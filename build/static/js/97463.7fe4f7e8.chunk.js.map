{"version":3,"file":"static/js/97463.7fe4f7e8.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/layers/support/StreamConnection.js","../node_modules/@arcgis/core/layers/graphics/sources/connections/WebSocketConnection.js","../node_modules/@arcgis/core/layers/graphics/sources/connections/GeoEventConnection.js","../node_modules/@arcgis/core/layers/support/ClientSideConnection.js","../node_modules/@arcgis/core/layers/graphics/sources/connections/createConnection.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import e from\"../../core/Error.js\";import o from\"../../core/Evented.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/RandomLCG.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";let c=class extends o.EventedAccessor{destroy(){this.emit(\"destroy\")}get connectionError(){return this.errorString?new e(\"stream-connection\",this.errorString):null}onFeature(r){this.emit(\"data-received\",r)}onMessage(r){this.emit(\"message-received\",r)}};r([t({readOnly:!0})],c.prototype,\"connectionError\",null),c=r([s(\"esri.layers.support.StreamConnection\")],c);const n=c;export{n as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import t from\"../../../../core/Error.js\";import o from\"../../../../core/Logger.js\";import{after as s,createResolver as r}from\"../../../../core/promiseUtils.js\";import{addQueryParameters as n}from\"../../../../core/urlUtils.js\";import{property as i}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/RandomLCG.js\";import{subclass as c}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{getGeometryZScaler as a}from\"../../../../geometry/support/zscale.js\";import l from\"../../../support/StreamConnection.js\";var h;!function(e){e[e.CONNECTING=0]=\"CONNECTING\",e[e.OPEN=1]=\"OPEN\",e[e.CLOSING=2]=\"CLOSING\",e[e.CLOSED=3]=\"CLOSED\"}(h||(h={}));let d=class extends l{constructor(e){super({}),this._outstandingMessages=[],this.errorString=null;const{geometryType:t,spatialReference:o,sourceSpatialReference:s}=e;this._config=e,this._featureZScaler=a(t,s,o),this._open()}normalizeCtorArgs(){return{}}async _open(){await this._tryCreateWebSocket(),this.destroyed||await this._handshake()}destroy(){super.destroy(),null!=this._websocket&&(this._websocket.onopen=null,this._websocket.onclose=null,this._websocket.onerror=null,this._websocket.onmessage=null,this._websocket.close()),this._websocket=null}get connectionStatus(){if(null==this._websocket)return\"disconnected\";switch(this._websocket.readyState){case h.CONNECTING:case h.OPEN:return\"connected\";case h.CLOSING:case h.CLOSED:return\"disconnected\"}}sendMessageToSocket(e){null!=this._websocket?this._websocket.send(JSON.stringify(e)):this._outstandingMessages.push(e)}sendMessageToClient(e){this._onMessage(e)}updateCustomParameters(e){this._config.customParameters=e,null!=this._websocket&&this._websocket.close()}async _tryCreateWebSocket(e=this._config.source.path,r=1e3,i=0){try{if(this.destroyed)return;const t=n(e,this._config.customParameters??{});this._websocket=await this._createWebSocket(t),this.notifyChange(\"connectionStatus\")}catch(c){const n=r/1e3;return this._config.maxReconnectionAttempts&&i>=this._config.maxReconnectionAttempts?(o.getLogger(this).error(new t(\"websocket-connection\",\"Exceeded maxReconnectionAttempts attempts. No further attempts will be made\")),void this.destroy()):(o.getLogger(this).error(new t(\"websocket-connection\",`Failed to connect. Attempting to reconnect in ${n}s`,c)),await s(r),this._tryCreateWebSocket(e,Math.min(1.5*r,1e3*this._config.maxReconnectionInterval),i+1))}}_setWebSocketJSONParseHandler(e){e.onmessage=e=>{try{const t=JSON.parse(e.data);this._onMessage(t)}catch(s){return void o.getLogger(this).error(new t(\"websocket-connection\",\"Failed to parse message, invalid JSON\",{error:s}))}}}_createWebSocket(e){return new Promise(((t,o)=>{const s=new WebSocket(e);s.onopen=()=>{if(s.onopen=null,this.destroyed)return s.onclose=null,void s.close();s.onclose=e=>this._onClose(e),s.onerror=e=>this._onError(e),this._setWebSocketJSONParseHandler(s),t(s)},s.onclose=e=>{s.onopen=s.onclose=null,o(e)}}))}async _handshake(e=1e4){const s=this._websocket;if(null==s)return;const n=r(),i=s.onmessage,{filter:c,outFields:a,spatialReference:l}=this._config;return n.timeout(e),s.onmessage=e=>{let r=null;try{r=JSON.parse(e.data)}catch(h){}r&&\"object\"==typeof r||(o.getLogger(this).error(new t(\"websocket-connection\",\"Protocol violation. Handshake failed - malformed message\",e.data)),n.reject(),this.destroy()),r.spatialReference?.wkid!==l?.wkid&&(o.getLogger(this).error(new t(\"websocket-connection\",`Protocol violation. Handshake failed - expected wkid of ${l.wkid}`,e.data)),n.reject(),this.destroy()),\"json\"!==r.format&&(o.getLogger(this).error(new t(\"websocket-connection\",\"Protocol violation. Handshake failed - format is not set\",e.data)),n.reject(),this.destroy()),c&&r.filter!==c&&o.getLogger(this).error(new t(\"websocket-connection\",\"Tried to set filter, but server doesn't support it\")),a&&r.outFields!==a&&o.getLogger(this).error(new t(\"websocket-connection\",\"Tried to set outFields, but server doesn't support it\")),s.onmessage=i;for(const t of this._outstandingMessages)s.send(JSON.stringify(t));this._outstandingMessages=[],n.resolve()},s.send(JSON.stringify({filter:c,outFields:a,format:\"json\",spatialReference:{wkid:l.wkid}})),n.promise}_onMessage(e){if(this.onMessage(e),\"type\"in e)switch(e.type){case\"features\":case\"featureResult\":for(const t of e.features)null!=this._featureZScaler&&this._featureZScaler(t.geometry),this.onFeature(t)}}_onError(e){const t=\"Encountered an error over WebSocket connection\";this._set(\"errorString\",t),o.getLogger(this).error(\"websocket-connection\",t)}_onClose(e){this._websocket=null,this.notifyChange(\"connectionStatus\"),1e3!==e.code&&o.getLogger(this).error(\"websocket-connection\",`WebSocket closed unexpectedly with error code ${e.code}`),this.destroyed||this._open()}};e([i()],d.prototype,\"connectionStatus\",null),e([i()],d.prototype,\"errorString\",void 0),d=e([c(\"esri.layers.graphics.sources.connections.WebSocketConnection\")],d);export{d as WebSocketConnection};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import\"../../../../geometry.js\";import t from\"../../../../request.js\";import r from\"../../../../core/Error.js\";import i from\"../../../../core/Logger.js\";import{createResolver as o}from\"../../../../core/promiseUtils.js\";import{addQueryParameters as s}from\"../../../../core/urlUtils.js\";import\"../../../../core/has.js\";import\"../../../../core/RandomLCG.js\";import{subclass as n}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{WebSocketConnection as a}from\"./WebSocketConnection.js\";import{executeQuery as c}from\"../../../../rest/query/operations/query.js\";import u from\"../../../../rest/support/Query.js\";import{fromJSON as l}from\"../../../../geometry/support/jsonUtils.js\";import f from\"../../../../geometry/SpatialReference.js\";const h=1e4,d={maxQueryDepth:5,maxRecordCountFactor:3};let g=class extends a{constructor(e){super({...d,...e}),this._buddyServicesQuery=null,this._relatedFeatures=null}async _open(){const e=await this._fetchServiceDefinition(this._config.source);e.timeInfo.trackIdField||i.getLogger(this).warn(\"GeoEvent service was configured without a TrackIdField. This may result in certain functionality being disabled. The purgeOptions.maxObservations property will have no effect.\");const t=this._fetchWebSocketUrl(e.streamUrls,this._config.spatialReference);this._buddyServicesQuery||(this._buddyServicesQuery=this._queryBuddyServices()),await this._buddyServicesQuery,await this._tryCreateWebSocket(t);const{filter:r,outFields:o}=this._config;this.destroyed||this._setFilter(r,o)}_onMessage(e){if(\"attributes\"in e){let o;try{o=this._enrich(e),null!=this._featureZScaler&&this._featureZScaler(o.geometry)}catch(t){return void i.getLogger(this).error(new r(\"geoevent-connection\",\"Failed to parse message\",t))}this.onFeature(o)}else this.onMessage(e)}async _fetchServiceDefinition(e){const r={f:\"json\",...this._config.customParameters},i=t(e.path,{query:r,responseType:\"json\"}),o=(await i).data;return this._serviceDefinition=o,o}_fetchWebSocketUrl(e,t){const r=e[0],{urls:i,token:o}=r,n=this._inferWebSocketBaseUrl(i);return s(`${n}/subscribe`,{outSR:\"\"+t.wkid,token:o})}_inferWebSocketBaseUrl(e){if(1===e.length)return e[0];for(const t of e)if(t.includes(\"wss\"))return t;return i.getLogger(this).error(new r(\"geoevent-connection\",\"Unable to infer WebSocket url\",e)),null}async _setFilter(e,t){const s=this._websocket;if(null==s||null==e&&null==t)return;const n=JSON.stringify({filter:this._serializeFilter(e,t)});let a=!1;const c=o(),u=()=>{a||(this.destroyed||this._websocket!==s||i.getLogger(this).error(new r(\"geoevent-connection\",\"Server timed out when setting filter\")),c.reject())},l=e=>{const t=JSON.parse(e.data);t.filter&&(t.error&&(i.getLogger(this).error(new r(\"geoevent-connection\",\"Failed to set service filter\",t.error)),this._set(\"errorString\",`Could not set service filter - ${t.error}`),c.reject(t.error)),this._setWebSocketJSONParseHandler(s),a=!0,c.resolve())};return s.onmessage=l,s.send(n),setTimeout(u,h),c.promise}_serializeFilter(e,t){const o={};if(null==e&&null==t)return o;if(e?.geometry)try{const t=l(e.geometry);if(\"extent\"!==t.type)throw new r(`Expected extent but found type ${t.type}`);o.geometry=JSON.stringify(t.shiftCentralMeridian())}catch(s){i.getLogger(this).error(new r(\"geoevent-connection\",\"Encountered an error when setting connection geometryDefinition\",s))}return e?.where&&\"1 = 1\"!==e.where&&\"1=1\"!==e.where&&(o.where=e.where),null!=t&&(o.outFields=t.join(\",\")),o}_enrich(e){if(!this._relatedFeatures)return e;const t=this._serviceDefinition.relatedFeatures.joinField,o=e.attributes[t],s=this._relatedFeatures.get(o);if(!s)return i.getLogger(this).warn(\"geoevent-connection\",\"Feature join failed. Is the join field configured correctly?\",e),e;const{attributes:n,geometry:a}=s;for(const r in n)e.attributes[r]=n[r];return a&&(e.geometry=a),e.geometry||e.centroid||i.getLogger(this).error(new r(\"geoevent-connection\",\"Found malformed feature - no geometry found\",e)),e}async _queryBuddyServices(){try{const{relatedFeatures:e,keepLatestArchive:t}=this._serviceDefinition,r=this._queryRelatedFeatures(e),i=this._queryArchive(t);await r;const o=await i;if(!o)return;for(const s of o.features)this.onFeature(this._enrich(s))}catch(e){i.getLogger(this).error(new r(\"geoevent-connection\",\"Encountered an error when querying buddy services\",{error:e}))}}async _queryRelatedFeatures(e){if(!e)return;const t=await this._queryBuddy(e.featuresUrl);this._addRelatedFeatures(t)}async _queryArchive(e){if(e)return this._queryBuddy(e.featuresUrl)}async _queryBuddy(e){const t=new((await import(\"../../../FeatureLayer.js\")).default)({url:e}),{capabilities:r}=await t.load(),i=r.query.supportsMaxRecordCountFactor,o=r.query.supportsPagination,s=r.query.supportsCentroid,n=this._config.maxRecordCountFactor,a=t.capabilities.query.maxRecordCount,l=i?a*n:a,h=new u;if(h.outFields=this._config.outFields??[\"*\"],h.where=this._config.filter?.where??\"1=1\",h.returnGeometry=!0,h.returnExceededLimitFeatures=!0,h.outSpatialReference=f.fromJSON(this._config.spatialReference),s&&(h.returnCentroid=!0),i&&(h.maxRecordCountFactor=n),o)return h.num=l,t.destroy(),this._queryPages(e,h);const d=await c(e,h,this._config.sourceSpatialReference);return t.destroy(),d.data}async _queryPages(e,t,r=[],i=0){t.start=null!=t.num?i*t.num:null;const{data:o}=await c(e,t,this._config.sourceSpatialReference);return o.exceededTransferLimit&&i<(this._config.maxQueryDepth??0)?(o.features.forEach((e=>r.push(e))),this._queryPages(e,t,r,i+1)):(r.forEach((e=>o.features.push(e))),o)}_addRelatedFeatures(e){const t=new Map,r=e.features,i=this._serviceDefinition.relatedFeatures.joinField;for(const o of r){const e=o.attributes[i];t.set(e,o)}this._relatedFeatures=t}};g=e([n(\"esri.layers.graphics.sources.connections.GeoEventConnection\")],g);const y=g;export{y as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import{property as r}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/RandomLCG.js\";import{subclass as t}from\"../../core/accessorSupport/decorators/subclass.js\";import{getGeometryZScaler as o}from\"../../geometry/support/zscale.js\";import s from\"./StreamConnection.js\";let a=class extends s{constructor(e){super({}),this.connectionStatus=\"connected\",this.errorString=null;const{geometryType:r,spatialReference:t,sourceSpatialReference:s}=e;this._featureZScaler=o(r,s,t)}normalizeCtorArgs(){return{}}updateCustomParameters(e){}sendMessageToSocket(e){}sendMessageToClient(e){if(\"type\"in e)switch(e.type){case\"features\":case\"featureResult\":for(const r of e.features)null!=this._featureZScaler&&this._featureZScaler(r.geometry),this.onFeature(r)}this.onMessage(e)}};e([r()],a.prototype,\"connectionStatus\",void 0),e([r()],a.prototype,\"errorString\",void 0),a=e([t(\"esri.layers.support.ClientSideConnection\")],a);export{a as ClientSideConnection};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport e from\"./GeoEventConnection.js\";import{WebSocketConnection as t}from\"./WebSocketConnection.js\";import{ClientSideConnection as n}from\"../../../support/ClientSideConnection.js\";function o(e,t){if(null==e&&null==t)return null;const n={};return null!=t&&(n.geometry=t),null!=e&&(n.where=e),n}function r(r,i,s,c,l,u,a,m,p){const f={source:r,sourceSpatialReference:i,spatialReference:s,geometryType:c,filter:o(l,u),maxReconnectionAttempts:a,maxReconnectionInterval:m,customParameters:p};if(!r)return new n(f);return r.path.startsWith(\"wss://\")||r.path.startsWith(\"ws://\")?new t(f):new e(f)}export{r as createConnection};\n"],"names":["c","_o$EventedAccessor","_inherits","_super","_createSuper","_classCallCheck","apply","arguments","_createClass","key","value","this","emit","get","errorString","e","r","o","t","readOnly","prototype","h","n","s","CONNECTING","OPEN","CLOSING","CLOSED","d","_l","_this","call","_outstandingMessages","geometryType","spatialReference","sourceSpatialReference","_config","_featureZScaler","a","_open","_open2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_context","prev","next","_tryCreateWebSocket","t0","destroyed","_handshake","stop","_get","_getPrototypeOf","_websocket","onopen","onclose","onerror","onmessage","close","readyState","send","JSON","stringify","push","_onMessage","customParameters","_tryCreateWebSocket2","_callee2","i","_this$_config$customP","_t","_n","_args2","_context2","length","undefined","source","path","abrupt","_createWebSocket","sent","notifyChange","maxReconnectionAttempts","t1","error","destroy","concat","Math","min","maxReconnectionInterval","_this2","parse","data","_this3","Promise","WebSocket","_onClose","_onError","_setWebSocketJSONParseHandler","_handshake2","_callee3","_this$_config","l","_this4","_args3","_context3","filter","outFields","timeout","_r$spatialReference","reject","wkid","format","_step","_iterator","_createForOfIteratorHelper","done","err","f","resolve","promise","onMessage","type","_step2","_iterator2","features","geometry","onFeature","_set","code","maxQueryDepth","maxRecordCountFactor","g","_a","_objectSpread","_buddyServicesQuery","_relatedFeatures","_fetchServiceDefinition","timeInfo","trackIdField","warn","_fetchWebSocketUrl","streamUrls","_queryBuddyServices","_setFilter","_enrich","_fetchServiceDefinition2","query","responseType","_serviceDefinition","_x","urls","token","_inferWebSocketBaseUrl","outSR","includes","_setFilter2","u","_serializeFilter","setTimeout","_x2","_x3","shiftCentralMeridian","where","join","relatedFeatures","joinField","attributes","centroid","_queryBuddyServices2","_callee4","_this$_serviceDefinit","_e","_t3","_r2","_i","_o2","_s","_context4","keepLatestArchive","_queryRelatedFeatures","_queryArchive","_queryRelatedFeatures2","_callee5","_context5","_queryBuddy","featuresUrl","_addRelatedFeatures","_x4","_queryArchive2","_callee6","_context6","_x5","_queryBuddy2","_callee7","_this$_config$outFiel","_this$_config$filter$","_this$_config$filter","_yield$t$load","_context7","default","url","load","capabilities","supportsMaxRecordCountFactor","supportsPagination","supportsCentroid","maxRecordCount","returnGeometry","returnExceededLimitFeatures","outSpatialReference","returnCentroid","num","_queryPages","_x6","_queryPages2","_callee8","_this$_config$maxQuer","_yield$c","_args8","_context8","start","exceededTransferLimit","forEach","_x7","_x8","_step3","Map","_iterator3","set","y","connectionStatus","m","p","startsWith"],"sourceRoot":""}