"use strict";(self.webpackChunkreact_training=self.webpackChunkreact_training||[]).push([[80907],{80907:function(e,r,t){t.r(r),t.d(r,{save:function(){return x},saveAs:function(){return b}});var n=t(74165),a=t(15861),o=t(1413),u=t(65286),i=t(32698),c=t(73117),s=t(40739),p="Group Layer",l="group-layer-save",f="group-layer-save-as",d=c.hz.GROUP_LAYER_MAP;function m(e){return{isValid:"group"===e.type,errorMessage:"Layer.type should be 'group'"}}function y(e){return{isValid:(0,c._$)(e,d),errorMessage:"Layer.portalItem.typeKeywords should have '".concat(d,"'")}}function v(e,r){return(0,o.Z)((0,o.Z)({},(0,i.Y)(e,"web-map",!0)),{},{initiator:r})}function h(e){var r=e.layerJSON;return Promise.resolve(r&&Object.keys(r).length?r:null)}function Z(e,r){return w.apply(this,arguments)}function w(){return(w=(0,a.Z)((0,n.Z)().mark((function e(r,t){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.title||(t.title=r.title),(0,c.ck)(t,c.hz.METADATA),(0,c.qj)(t,d);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e,r){return I.apply(this,arguments)}function I(){return I=(0,a.Z)((0,n.Z)().mark((function e(r,t){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.a1)({layer:r,itemType:p,validateLayer:m,validateItem:y,createJSONContext:function(e){return v(e,r)},createItemData:h,errorNamePrefix:l,saveResources:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,a){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=r.sourceIsPortalItem,e.t0){e.next=4;break}return e.next=4,t.removeAllResources().catch((function(){}));case 4:return e.abrupt("return",(0,s.H)(r.resourceReferences,a));case 5:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}()},t));case 1:case"end":return e.stop()}}),e)}))),I.apply(this,arguments)}function b(e,r,t){return g.apply(this,arguments)}function g(){return(g=(0,a.Z)((0,n.Z)().mark((function e(r,t,a){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.po)({layer:r,itemType:p,validateLayer:m,createJSONContext:function(e){return v(e,r)},createItemData:h,errorNamePrefix:f,newItem:t,setItemProperties:Z,saveResources:function(e,t){return(0,s.H)(r.resourceReferences,t)}},a));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},65286:function(e,r,t){t.d(r,{DC:function(){return m},Nw:function(){return b},UY:function(){return P},V3:function(){return I},Ym:function(){return w},a1:function(){return O},jX:function(){return k},po:function(){return U},uT:function(){return x},xG:function(){return h}});var n=t(74165),a=t(1413),o=t(15861),u=t(10064),i=t(15909),c=t(7575),s=t(98995),p=t(32698),l=t(73117),f=t(76926),d=t(9634);function m(e,r,t){var n=t(e);if(!n.isValid)throw new u.Z("".concat(r,":invalid-parameters"),n.errorMessage,{layer:e})}function y(e){return v.apply(this,arguments)}function v(){return(v=(0,o.Z)((0,n.Z)().mark((function e(r){var t,a,o;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.layer,a=r.errorNamePrefix,o=r.validateLayer,e.next=3,t.load();case 3:m(t,a,o);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e,r){return"Layer (title: ".concat(e.title,", id: ").concat(e.id,") of type '").concat(e.declaredClass,"' ").concat(r)}function Z(e){var r=e.item,t=e.errorNamePrefix,n=e.layer,a=e.validateItem;if((0,f.w)(r),function(e){var r=e.item,t=e.itemType,n=e.additionalItemType,a=e.errorNamePrefix,o=e.layer,i=[t];if(n&&i.push(n),!i.includes(r.type)){var c=i.map((function(e){return"'".concat(e,"'")})).join(", ");throw new u.Z("".concat(a,":portal-item-wrong-type"),'Portal item type should be one of: "'.concat(c,'"'),{item:r,layer:o})}}(e),a){var o=a(r);if(!o.isValid)throw new u.Z("".concat(t,":invalid-parameters"),o.errorMessage,{layer:n})}}function w(e){var r=e.layer,t=e.errorNamePrefix,n=r.portalItem;if(!n)throw new u.Z("".concat(t,":portal-item-not-set"),h(r,"requires the portalItem property to be set"));if(!n.loaded)throw new u.Z("".concat(t,":portal-item-not-loaded"),h(r,"cannot be saved to a portal item that does not exist or is inaccessible"));Z((0,a.Z)((0,a.Z)({},e),{},{item:n}))}function x(e){var r,t,n,o,u=e.newItem,i=e.itemType,p=s.default.from(u);return p.id&&((p=p.clone()).id=null),null!==(t=(r=p).type)&&void 0!==t||(r.type=i),null!==(o=(n=p).portal)&&void 0!==o||(n.portal=c.Z.getDefault()),Z((0,a.Z)((0,a.Z)({},e),{},{item:p})),p}function I(e){return(0,p.Y)(e,"portal-item")}function b(e,r,t){return g.apply(this,arguments)}function g(){return(g=(0,o.Z)((0,n.Z)().mark((function e(r,t,a){var o,u,i;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0="beforeSave"in r&&"function"==typeof r.beforeSave,!e.t0){e.next=4;break}return e.next=4,r.beforeSave();case 4:return i=r.write({},t),e.next=7,Promise.all(null!==(o=null===(u=t.resources)||void 0===u?void 0:u.pendingOperations)&&void 0!==o?o:[]);case 7:return(0,d.z)(t,{errorName:"layer-write:unsupported"},a),e.abrupt("return",i);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e){(0,l.qj)(e,l.hz.JSAPI),e.typeKeywords&&(e.typeKeywords=e.typeKeywords.filter((function(e,r,t){return t.indexOf(e)===r})))}function k(e,r,t){return N.apply(this,arguments)}function N(){return(N=(0,o.Z)((0,n.Z)().mark((function e(r,t,a){var o,u;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=r.portal,e.next=3,u.signIn();case 3:return e.next=5,null===(o=u.user)||void 0===o?void 0:o.addItem({item:r,data:t,folder:null===a||void 0===a?void 0:a.folder});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e,r){return R.apply(this,arguments)}function R(){return R=(0,o.Z)((0,n.Z)().mark((function e(r,t){var o,u,c,s,p,l,f,d,m,v;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=r.layer,u=r.createItemData,c=r.createJSONContext,s=r.setItemProperties,p=r.saveResources,l=r.supplementalUnsupportedErrors,e.next=3,y(r);case 3:return w(r),f=o.portalItem,d=c?c(f):I(f),e.next=8,b(o,d,(0,a.Z)((0,a.Z)({},t),{},{supplementalUnsupportedErrors:l}));case 8:return m=e.sent,e.next=11,u({layer:o,layerJSON:m},f);case 11:return v=e.sent,e.next=14,null===s||void 0===s?void 0:s(o,f);case 14:return P(f),e.next=17,f.update({data:v});case 17:return(0,i.D)(d),e.next=20,null===p||void 0===p?void 0:p(f,d);case 20:return e.abrupt("return",f);case 21:case"end":return e.stop()}}),e)}))),R.apply(this,arguments)}function U(e,r){return S.apply(this,arguments)}function S(){return S=(0,o.Z)((0,n.Z)().mark((function e(r,t){var o,u,c,s,p,l,f,d,m,v;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=r.layer,u=r.createItemData,c=r.createJSONContext,s=r.setItemProperties,p=r.saveResources,l=r.supplementalUnsupportedErrors,e.next=3,y(r);case 3:return f=x(r),d=c?c(f):I(f),e.next=7,b(o,d,(0,a.Z)((0,a.Z)({},t),{},{supplementalUnsupportedErrors:l}));case 7:return m=e.sent,e.next=10,u({layer:o,layerJSON:m},f);case 10:return v=e.sent,e.next=13,s(o,f);case 13:return P(f),e.next=16,k(f,v,t);case 16:return o.portalItem=f,(0,i.D)(d),e.next=20,null===p||void 0===p?void 0:p(f,d);case 20:return e.abrupt("return",f);case 21:case"end":return e.stop()}}),e)}))),S.apply(this,arguments)}},32698:function(e,r,t){t.d(r,{Y:function(){return i},h:function(){return u}});var n=t(1413),a=t(35995),o=t(7575);function u(e,r){return(0,n.Z)((0,n.Z)({},c(e,r)),{},{readResourcePaths:[]})}function i(e,r,t){var o=(0,a.mN)(e.itemUrl);return(0,n.Z)((0,n.Z)({},c(e,r)),{},{messages:[],writtenProperties:[],blockedRelativeUrls:[],verifyItemRelativeUrls:o?{rootPath:o.path,writtenUrls:[]}:null,resources:t?{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}:null})}function c(e,r){return{origin:r,url:(0,a.mN)(e.itemUrl),portal:e.portal||o.Z.getDefault(),portalItem:e}}}}]);
//# sourceMappingURL=80907.125149c8.chunk.js.map