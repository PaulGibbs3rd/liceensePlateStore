"use strict";(self.webpackChunkreact_training=self.webpackChunkreact_training||[]).push([[41779],{41779:function(e,t,r){r.r(t),r.d(t,{default:function(){return rt}});var n=r(93433),i=r(1413),o=r(29439),a=r(37762),u=r(74165),s=r(15861),l=r(15671),p=r(43144),c=r(97326),f=r(88301),v=r(61120),d=r(60136),y=r(29388),h=r(27366),g=r(19545),m=r(60762),w=r(36721),b=r(63780),Z=r(80987),_=r(10064),k=r(54472),S=r(93002),A=r(32718),x=r(92026),I=r(97642),j=r(67426),C=r(66978),V=r(94172),R=r(35995),O=r(49861),P=(r(93169),r(38511)),N=r(69912),J=r(31201),F=r(92562),E=r(78952),L=r(69518),U=r(98995),T=r(73117),q=r(1674),G=r(11582),B=r(46784),M=(r(84936),r(27135)),D=r(43404),W=function(e){(0,d.Z)(r,e);var t=(0,y.Z)(r);function r(e){var n;return(0,l.Z)(this,r),(n=t.call(this,e)).expression=null,n.returnType="string",n.title=null,n}return(0,p.Z)(r)}((0,G.J)(B.wq));(0,h._)([(0,O.Cb)({type:String,json:{write:{isRequired:!0}}})],W.prototype,"expression",void 0),(0,h._)([(0,O.Cb)({type:["number","string"],json:{write:!0}})],W.prototype,"returnType",void 0),(0,h._)([(0,O.Cb)({type:String,json:{write:!0}})],W.prototype,"title",void 0);var z=W=(0,h._)([(0,N.j)("esri.webdoc.geotriggersInfo.ExpressionInfo")],W),X=new D.X({deviceLocation:"device-location"}),$=function(e){(0,d.Z)(r,e);var t=(0,y.Z)(r);function r(e){var n;return(0,l.Z)(this,r),(n=t.call(this,e)).filterExpression=null,n.type="device-location",n}return(0,p.Z)(r)}((0,G.J)(B.wq));(0,h._)([(0,O.Cb)({type:z,json:{write:!0}})],$.prototype,"filterExpression",void 0),(0,h._)([(0,O.Cb)({type:X.apiValues,readOnly:!0,json:{type:X.jsonValues,read:X.read,write:X.write}})],$.prototype,"type",void 0);var H=$=(0,h._)([(0,N.j)("esri.webdoc.geotriggersInfo.DeviceLocationFeed")],$),K=r(59486),Q=r(77981),Y=function(e){(0,d.Z)(r,e);var t=(0,y.Z)(r);function r(e){var n;return(0,l.Z)(this,r),(n=t.call(this,e)).geometry=null,n.where=null,n}return(0,p.Z)(r)}((0,G.J)(B.wq));(0,h._)([(0,O.Cb)({types:K.qM,json:{read:Q.im,write:!0}})],Y.prototype,"geometry",void 0),(0,h._)([(0,O.Cb)({type:String,json:{write:!0}})],Y.prototype,"where",void 0);var ee=Y=(0,h._)([(0,N.j)("esri.webdoc.geotriggersInfo.FeatureFilter")],Y),te=function(e){(0,d.Z)(r,e);var t=(0,y.Z)(r);function r(e){var n;return(0,l.Z)(this,r),(n=t.call(this,e)).layerId=null,n.layerUrl=null,n.type="feature-layer",n}return(0,p.Z)(r)}((0,G.J)(B.wq));(0,h._)([(0,O.Cb)({type:String,json:{write:{overridePolicy:function(){return{isRequired:null===this.layerUrl}}}}})],te.prototype,"layerId",void 0),(0,h._)([(0,O.Cb)({type:String,json:{write:{overridePolicy:function(){return{isRequired:null===this.layerId}}}}})],te.prototype,"layerUrl",void 0),(0,h._)([(0,M.J)({featureLayer:"feature-layer"},{readOnly:!0})],te.prototype,"type",void 0);var re=te=(0,h._)([(0,N.j)("esri.webdoc.geotriggersInfo.FeatureLayerSource")],te),ne=function(e){(0,d.Z)(r,e);var t=(0,y.Z)(r);function r(e){var n;return(0,l.Z)(this,r),(n=t.call(this,e)).fenceSource=null,n.filter=null,n.bufferDistance=null,n.type="features",n}return(0,p.Z)(r)}((0,G.J)(B.wq));(0,h._)([(0,O.Cb)({type:re,json:{write:{isRequired:!0}}})],ne.prototype,"fenceSource",void 0),(0,h._)([(0,O.Cb)({type:ee,json:{write:!0}})],ne.prototype,"filter",void 0),(0,h._)([(0,O.Cb)({type:Number,json:{write:!0}})],ne.prototype,"bufferDistance",void 0),(0,h._)([(0,M.J)({features:"features"},{readOnly:!0})],ne.prototype,"type",void 0);var ie=ne=(0,h._)([(0,N.j)("esri.webdoc.geotriggersInfo.FeatureFenceParameters")],ne),oe=function(e){(0,d.Z)(r,e);var t=(0,y.Z)(r);function r(e){var n;return(0,l.Z)(this,r),(n=t.call(this,e)).type="fence",n}return(0,p.Z)(r)}((0,G.J)(B.wq));(0,h._)([(0,M.J)({fence:"fence"},{readOnly:!0})],oe.prototype,"type",void 0);var ae=oe=(0,h._)([(0,N.j)("esri.webdoc.geotriggersInfo.Geotrigger")],oe),ue=function(e){(0,d.Z)(r,e);var t=(0,y.Z)(r);function r(e){var n;return(0,l.Z)(this,r),(n=t.call(this,e)).expressionInfo=null,n.requestedActions=null,n}return(0,p.Z)(r)}((0,G.J)(B.wq));(0,h._)([(0,O.Cb)({type:z,json:{write:!0}})],ue.prototype,"expressionInfo",void 0),(0,h._)([(0,O.Cb)({type:[String],json:{write:!0}})],ue.prototype,"requestedActions",void 0);var se=ue=(0,h._)([(0,N.j)("esri.webdoc.geotriggersInfo.GeotriggerNotificationOptions")],ue),le=new D.X({enterContainsAndExitDoesNotContain:"enter-contains-and-exit-does-not-contain",enterContainsAndExitDoesNotIntersect:"enter-contains-and-exit-does-not-intersect",enterIntersectsAndExitDoesNotIntersect:"enter-intersects-and-exit-does-not-intersect"}),pe=new D.X({useGeometry:"use-geometry",useGeometryWithAccuracy:"use-geometry-with-accuracy"}),ce=new D.X({enter:"enter",enterOrExit:"enter-or-exit",exit:"exit"}),fe=function(e){(0,d.Z)(r,e);var t=(0,y.Z)(r);function r(e){var n;return(0,l.Z)(this,r),(n=t.call(this,e)).enterExitRule="enter-contains-and-exit-does-not-intersect",n.feed=null,n.feedAccuracyMode="use-geometry",n.fenceNotificationRule=null,n.fenceParameters=null,n.name=null,n.notificationOptions=null,n.type="fence",n}return(0,p.Z)(r)}(ae);(0,h._)([(0,M.J)(le)],fe.prototype,"enterExitRule",void 0),(0,h._)([(0,O.Cb)({type:H,json:{write:{isRequired:!0}}})],fe.prototype,"feed",void 0),(0,h._)([(0,M.J)(pe)],fe.prototype,"feedAccuracyMode",void 0),(0,h._)([(0,O.Cb)({type:ce.apiValues,json:{type:ce.jsonValues,read:ce.read,write:{writer:ce.write,isRequired:!0}}})],fe.prototype,"fenceNotificationRule",void 0),(0,h._)([(0,O.Cb)({type:ie,json:{write:{isRequired:!0}}})],fe.prototype,"fenceParameters",void 0),(0,h._)([(0,O.Cb)({type:String,json:{write:!0}})],fe.prototype,"name",void 0),(0,h._)([(0,O.Cb)({type:se,json:{write:!0}})],fe.prototype,"notificationOptions",void 0),(0,h._)([(0,M.J)({fence:"fence"},{readOnly:!0})],fe.prototype,"type",void 0);var ve={base:ae,key:"type",typeMap:{fence:fe=(0,h._)([(0,N.j)("esri.webdoc.geotriggersInfo.FenceGeotrigger")],fe)}},de=function(e){(0,d.Z)(r,e);var t=(0,y.Z)(r);function r(e){var n;return(0,l.Z)(this,r),(n=t.call(this,e)).geotriggers=null,n}return(0,p.Z)(r)}((0,G.J)(B.wq));(0,h._)([(0,O.Cb)({types:[ve],json:{write:{isRequired:!0}}})],de.prototype,"geotriggers",void 0);var ye,he=de=(0,h._)([(0,N.j)("esri.webdoc.GeotriggersInfo")],de),ge=r(84933),me=r(84652),we=ye=function(e){(0,d.Z)(r,e);var t=(0,y.Z)(r);function r(e){var n;return(0,l.Z)(this,r),(n=t.call(this,e)).activeRange=null,n.currentRangeExtent=null,n.fullRangeExtent=null,n}return(0,p.Z)(r,[{key:"clone",value:function(){return new ye((0,me.d9)({activeRange:this.activeRange,currentRangeExtent:this.currentRangeExtent,fullRangeExtent:this.fullRangeExtent}))}}]),r}(B.wq);(0,h._)([(0,O.Cb)({type:String,nonNullable:!0,json:{read:{source:"activeRangeName"},write:{target:"activeRangeName",isRequired:!0}}})],we.prototype,"activeRange",void 0),(0,h._)([(0,O.Cb)({type:[Number],json:{write:!0}})],we.prototype,"currentRangeExtent",void 0),(0,h._)([(0,O.Cb)({type:[Number],json:{write:!0}})],we.prototype,"fullRangeExtent",void 0);var be=we=ye=(0,h._)([(0,N.j)("esri.webdoc.RangeInfo")],we),Ze=r(15946),_e=r(41537),ke=r(81753),Se=r(7575),Ae=r(32698),xe=r(45362),Ie=r(81943);function je(e,t){var r;return t.resourceInfo?Ce(t,t.resourceInfo,{origin:e.origin}):null!==(r=t.portalItem)&&void 0!==r&&r.id?function(e,t,r){return Ve.apply(this,arguments)}(e,t,t.portalItem):Promise.resolve()}function Ce(e,t,n){var o={context:(0,i.Z)((0,i.Z)({},n),{},{layerContainerType:"operational-layers"})};return e.portalItem&&(o.context.portal=e.portalItem.portal||Se.Z.getDefault()),Promise.all([r.e(46727),r.e(43139),r.e(20519)]).then(r.bind(r,20519)).then((function(r){var n=r.populateOperationalLayers,a=[],u=t.operationalLayers;(null===u||void 0===u?void 0:u.length)&&a.push(n(e.layers,u,o));var s=(0,i.Z)((0,i.Z)({},o),{},{context:(0,i.Z)((0,i.Z)({},o.context),{},{layerContainerType:"tables"}),defaultLayerType:"ArcGISFeatureLayer"}),l=t.tables;return null!==l&&void 0!==l&&l.length&&a.push(n(e.tables,l,s)),Promise.allSettled(a).then((function(){}))}))}function Ve(){return Ve=(0,s.Z)((0,u.Z)().mark((function e(t,r,n){var i,o,a,s,l,p;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.load().catch((function(e){throw new _.Z("".concat(t.name,":load-portal-item"),"Failed to load portal item",{error:e})}));case 2:if(n.type===t.itemType){e.next=4;break}throw new _.Z("".concat(t.name,":invalid-portal-item"),"Invalid portal item type '".concat(n.type,"', expected '").concat(t.itemType,"'"),{type:n.type});case 4:return e.next=6,n.fetchData();case 6:return i=e.sent,r.resourceInfo=i,o=(0,Ae.h)(n,t.origin),e.next=11,Re(t,r,i,o);case 11:return r.resourceReferences={portalItem:n,paths:o.readResourcePaths},e.next=14,Oe(r.initialViewProperties,n,A.Z.getLogger(r));case 14:(a=e.sent)&&((p=null!==(s=null===(l=r.initialViewProperties)||void 0===l?void 0:l.clone())&&void 0!==s?s:t.createInitialViewProperties()).viewpoint=a,r.initialViewProperties=p);case 16:case"end":return e.stop()}}),e)}))),Ve.apply(this,arguments)}function Re(e,t,r,n){var i=function(e,t){var r=e.parseVersion(t.version||"",e.name);return e.currentVersion.validate(r),t.version="".concat(r.major,".").concat(r.minor),t}(e,r);return t.read(i,n),Ce(t,i,n)}function Oe(e,t,r){return Pe.apply(this,arguments)}function Pe(){return Pe=(0,s.Z)((0,u.Z)().mark((function e(t,r,n){var i,o;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null===t||void 0===t||null===(i=t.viewpoint)||void 0===i?void 0:i.targetGeometry)){e.next=3;break}return e.abrupt("return",null);case 3:return e.next=5,Ne(t,r,n);case 5:if(o=e.sent){e.next=8;break}return e.abrupt("return",null);case 8:return e.abrupt("return",new w.Z({targetGeometry:o}));case 9:case"end":return e.stop()}}),e)}))),Pe.apply(this,arguments)}function Ne(e,t,r){return Je.apply(this,arguments)}function Je(){return Je=(0,s.Z)((0,u.Z)().mark((function e(t,n,i){var o,a,s,l,p,c;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=null===t||void 0===t?void 0:t.spatialReference,a=null===n||void 0===n?void 0:n.extent,o&&a){e.next=3;break}return e.abrupt("return",null);case 3:if(!o.isWGS84){e.next=5;break}return e.abrupt("return",a.clone());case 5:if(!o.isWebMercator){e.next=7;break}return e.abrupt("return",(0,ke.$)(a));case 7:return e.next=9,r.e(2502).then(r.bind(r,67387));case 9:return s=e.sent,l=s.getGeometryServiceURL,e.prev=11,e.next=14,l(n);case 14:return p=e.sent,c=new Ie.Z({geometries:[a],outSpatialReference:o}),e.next=18,(0,xe.i)(p,c);case 18:return e.abrupt("return",e.sent[0]);case 21:e.prev=21,e.t0=e.catch(11),i.error("Error projecting item's extent:",e.t0);case 24:return e.abrupt("return",null);case 25:case"end":return e.stop()}}),e,null,[[11,21]])}))),Je.apply(this,arguments)}var Fe,Ee=r(41190),Le=r(48193),Ue=Fe=function(e){(0,d.Z)(r,e);var t=(0,y.Z)(r);function r(e){var n;return(0,l.Z)(this,r),(n=t.call(this,e)).editing=null,n.offline=null,n.viewing=null,n}return(0,p.Z)(r,[{key:"clone",value:function(){return new Fe((0,me.d9)({editing:this.editing,offline:this.offline,viewing:this.viewing}))}}]),r}(B.wq);(0,h._)([(0,O.Cb)({json:{write:!0}})],Ue.prototype,"editing",void 0),(0,h._)([(0,O.Cb)({json:{write:!0}})],Ue.prototype,"offline",void 0),(0,h._)([(0,O.Cb)({type:Le.Z,json:{write:!0}})],Ue.prototype,"viewing",void 0);var Te=Ue=Fe=(0,h._)([(0,N.j)("esri.webmap.ApplicationProperties")],Ue),qe=r(2284),Ge=r(7138),Be=r(6701),Me=r(53042),De=function(e){(0,d.Z)(r,e);var t=(0,y.Z)(r);function r(e){var n;return(0,l.Z)(this,r),(n=t.call(this,e)).background=null,n.rangeInfo=null,n.spatialReference=null,n.timeZone=Be.By,n.viewpoint=null,n}return(0,p.Z)(r)}((0,G.J)(Ge.default));(0,h._)([(0,O.Cb)({type:Me.Z})],De.prototype,"background",void 0),(0,h._)([(0,O.Cb)({type:be})],De.prototype,"rangeInfo",void 0),(0,h._)([(0,O.Cb)({type:E.Z})],De.prototype,"spatialReference",void 0),(0,h._)([(0,O.Cb)({nonNullable:!0})],De.prototype,"timeZone",void 0),(0,h._)([(0,O.Cb)({type:w.Z})],De.prototype,"viewpoint",void 0);var We=De=(0,h._)([(0,N.j)("esri.webmap.InitialViewProperties")],De),ze=function(e){(0,d.Z)(r,e);var t=(0,y.Z)(r);function r(e,n){return(0,l.Z)(this,r),t.call(this,e,n,"webmap")}return(0,p.Z)(r)}(r(49901).G),Xe=new ze(2,31),$e="web-map",He=Z.Z.ofType(qe.Z),Ke=Z.Z.ofType(L.default),Qe=new Map([["image/jpeg","jpeg"],["image/jpg","jpg"],["image/png","png"],["image/gif","gif"]]),Ye=T.hz.JSAPI,et={currentVersion:Xe,createInitialViewProperties:function(){return new We},parseVersion:ze.parse,itemType:"Web Map",name:"webmap",origin:$e},tt=function(e){(0,d.Z)(h,e);var t=(0,y.Z)(h);function h(e){var n;return(0,l.Z)(this,h),(n=t.call(this,e))._isAuthoringAppSetByUser=!1,n._isAuthoringAppVersionSetByUser=!1,n._thumbnailFilename=null,n._updateFromPromise=null,n.resourceReferences={portalItem:null,paths:[]},n.applicationProperties=null,n.bookmarks=new He,n.floorInfo=null,n.geotriggersInfo=null,n.initialViewProperties=new We,n.ipsInfo=null,n.portalItem=null,n.presentation=null,n.sourceVersion=null,n.widgets=null,n.utilityNetworks=null,n._debouncedSaveOperations=(0,C.Ds)(function(){var e=(0,s.Z)((0,u.Z)().mark((function e(t,i,o){var a,s,l;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([r.e(89035),r.e(9127)]).then(r.bind(r,9127));case 2:a=e.sent,s=a.save,l=a.saveAs,e.t0=t,e.next=e.t0===ge.x.SAVE?8:e.t0===ge.x.SAVE_AS?9:10;break;case 8:return e.abrupt("return",s(et,(0,c.Z)(n),i));case 9:return e.abrupt("return",l(et,(0,c.Z)(n),o,i));case 10:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}()),n.authoringApp=n.authoringAppVersion=null,n._isAuthoringAppSetByUser=n._isAuthoringAppVersionSetByUser=!1,n}return(0,p.Z)(h,[{key:"destroy",value:function(){if(this.portalItem=(0,x.SC)(this.portalItem),this.utilityNetworks){var e,t=this.utilityNetworks.removeAll(),r=(0,a.Z)(t);try{for(r.s();!(e=r.n()).done;){e.value.destroy()}}catch(n){r.e(n)}finally{r.f()}this.utilityNetworks.destroy()}}},{key:"initialize",value:function(){var e=this;if(this.when().catch((function(t){A.Z.getLogger(e).error("#load()","Failed to load web map",t)})),this.resourceInfo){var t;try{t=this._validateJSON(this.resourceInfo)}catch(r){return void this.addResolvingPromise(Promise.reject(r))}this.read(t)}}},{key:"authoringApp",set:function(e){this._isAuthoringAppSetByUser=!0,this._set("authoringApp",e)}},{key:"writeAuthoringApp",value:function(e,t){e&&this._isAuthoringAppSetByUser?t.authoringApp=e:t.authoringApp=Ye}},{key:"authoringAppVersion",set:function(e){this._isAuthoringAppVersionSetByUser=!0,this._set("authoringAppVersion",e)}},{key:"writeAuthoringAppVersion",value:function(e,t){e&&this._isAuthoringAppVersionSetByUser?t.authoringAppVersion=e:t.authoringAppVersion=g.i8}},{key:"readInitialViewProperties",value:function(e,t){var r,n=new We;t.background&&(n.background=Me.Z.fromJSON(t.background));var i=null===(r=t.initialState)||void 0===r?void 0:r.viewpoint;return i&&(i.rotation&&ze.parse(t.version||"","webmap").lessThan(2,20)&&"ArcGIS Pro"===t.authoringApp&&(i.rotation*=-1),n.viewpoint=w.Z.fromJSON(i)),t.mapRangeInfo&&(n.rangeInfo=be.fromJSON(t.mapRangeInfo)),t.spatialReference&&(n.spatialReference=E.Z.fromJSON(t.spatialReference)),t.timeZone&&(n.timeZone=t.timeZone),n}},{key:"writeInitialViewProperties",value:function(e,t,r,n){var i;e&&(null!==(i=e.background)&&void 0!==i&&i.color&&(t.background=e.background.write({},n)),e.viewpoint&&(t.initialState={viewpoint:e.viewpoint.write({},n)}),e.rangeInfo&&(t.mapRangeInfo=e.rangeInfo.toJSON(n)),e.spatialReference&&(t.spatialReference=e.spatialReference.write({},n)),t.timeZone=e.timeZone)}},{key:"writeLayers",value:function(e,t,r,n){t[r]=this._writeLayers(e,n,"operational-layers")}},{key:"readSourceVersion",value:function(e,t){var r=t.version.split("."),n=(0,o.Z)(r,2),i=n[0],a=n[1];return new ze(parseInt(i,10),parseInt(a,10))}},{key:"writeSourceVersion",value:function(e,t,r){t[r]="".concat(Xe.major,".").concat(Xe.minor)}},{key:"writeTables",value:function(e,t,r,n){var i=this._writeLayers(e,n,"tables");i.length&&(t[r]=i)}},{key:"thumbnailUrl",get:function(){var e;return(null===(e=this.portalItem)||void 0===e?void 0:e.thumbnailUrl)||null},set:function(e){e?(this._override("thumbnailUrl",e),this._thumbnailFilename=this._generateCustomThumbnailFilename(e)):this._clearThumbnailOverride()}},{key:"updatingFromView",get:function(){return!!this._updateFromPromise}},{key:"load",value:function(e){return this.addResolvingPromise(je(et,this)),Promise.resolve(this)}},{key:"loadAll",value:function(){var e=this;return(0,S.G)(this,(function(t){t(e.ground,e.basemap,e.layers,e.tables)}))}},{key:"read",value:function(e,t){var r=this;t=(0,i.Z)((0,i.Z)({},t),{},{origin:$e});var n=this._getAuthoringPropsState();(0,F.$)(this,e,(function(t){return(0,f.Z)((0,v.Z)(h.prototype),"read",r).call(r,e,t)}),t),this._restoreAuthoringPropsFromState(n)}},{key:"write",value:function(e,t){if("loaded"!==this.loadStatus){var r=new _.Z("webmap:not-loaded","Web map must be loaded before it can be serialized");throw A.Z.getLogger(this).error("#toJSON()","Web map must be loaded before it can be serialized",this.loadError||this.loadStatus),r}return this._removeDanglingLayerRefs(),t=(0,i.Z)((0,i.Z)({},t),{},{origin:$e,restrictedWebMapWriting:!0,webmap:this}),(0,f.Z)((0,v.Z)(h.prototype),"write",this).call(this,e,t)}},{key:"save",value:function(){var e=(0,s.Z)((0,u.Z)().mark((function e(t){return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._debouncedSaveOperations(ge.x.SAVE,t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"saveAs",value:function(){var e=(0,s.Z)((0,u.Z)().mark((function e(t,r){return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._debouncedSaveOperations(ge.x.SAVE_AS,r,t));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"updateFrom",value:function(){var e=(0,s.Z)((0,u.Z)().mark((function e(t,r){var n;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._updateFromInternal(t,r),this._updateFromPromise=n,e.next=4,n;case 4:n===this._updateFromPromise&&(this._updateFromPromise=null);case 5:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getLayerJSONFromResourceInfo",value:function(e){var t,r,i,o,a=this.resourceInfo;return this._collectAllLayersJSON([].concat((0,n.Z)((null===a||void 0===a||null===(t=a.baseMap)||void 0===t?void 0:t.baseMapLayers)||[]),(0,n.Z)((null===a||void 0===a?void 0:a.operationalLayers)||[]),(0,n.Z)((null===(r=this.basemap)||void 0===r||null===(i=r.resourceInfo)||void 0===i||null===(o=i.data)||void 0===o?void 0:o.baseMapLayers)||[]))).find((function(t){return t.id===e.id}))}},{key:"updateItemThumbnail",value:function(){var e=(0,s.Z)((0,u.Z)().mark((function e(){var t;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.thumbnailUrl&&this._isOverridden("thumbnailUrl"),!e.t0){e.next=5;break}return e.next=4,null===(t=this.portalItem)||void 0===t?void 0:t.updateThumbnail({thumbnail:this.thumbnailUrl,filename:this._thumbnailFilename});case 4:this._clearThumbnailOverride();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getThumbnailState",value:function(){var e=this.thumbnailUrl;return e&&(e=this._isOverridden("thumbnailUrl")?e:(0,R.ZN)(e,"w","8192")),{thumbnailUrl:e,filename:this._thumbnailFilename}}},{key:"restoreThumbnailFromState",value:function(e){this.thumbnailUrl=e.thumbnailUrl,this._thumbnailFilename=e.filename}},{key:"_collectAllLayersJSON",value:function(e){var t=this;return e.reduce((function(e,r){return e.push(r),"GroupLayer"===r.layerType&&(e=e.concat(t._collectAllLayersJSON(r.layers||[]))),e}),[])}},{key:"_writeLayers",value:function(e,t,r){var n=this;return t=(0,i.Z)((0,i.Z)({},t),{},{layerContainerType:r}),e.map((function(e){return(0,Ee.Nw)(e,"tables"===r?null:n.getLayerJSONFromResourceInfo(e),t)})).filter(b.pC).toArray()}},{key:"_validateJSON",value:function(e){var t=ze.parse(e.version||"","webmap");return Xe.validate(t),e.version="".concat(t.major,".").concat(t.minor),e}},{key:"_removeDanglingLayerRefs",value:function(){var e,t,r=this,n=this.applicationProperties,i=null===n||void 0===n||null===(e=n.viewing)||void 0===e?void 0:e.search,o=function(e){return r.allLayers.some((function(t){return t.id===e}))};if(null!==i&&void 0!==i&&i.layers&&(i.layers=i.layers.filter((function(e){return o(e.id)}))),null!==i&&void 0!==i&&i.tables&&(i.tables=i.tables.filter((function(e){return r.tables.some((function(t){return t.id===e.id}))}))),n){var a,u=null===(a=n.editing)||void 0===a?void 0:a.locationTracking;(null===u||void 0===u?void 0:u.info)&&!o(u.info.layerId)&&(n.editing=null)}var s=null===(t=this.presentation)||void 0===t?void 0:t.slides;s&&s.forEach((function(e){e.visibleLayers&&(e.visibleLayers=e.visibleLayers.filter((function(e){return o(e.id)})))}))}},{key:"_updateFromInternal",value:function(){var e=(0,s.Z)((0,u.Z)().mark((function e(t,r){var n,i,o,s;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null!==(n=r)&&void 0!==n||(r={}),e.next=3,(0,V.whenOnce)((function(){return t.ready}));case 3:if(this._updateInitialViewProperties(t,r),t.map!==this){e.next=7;break}i=(0,a.Z)(t.allLayerViews);try{for(i.s();!(o=i.n()).done;)"visible"in(s=o.value)&&"visible"in s.layer&&s._isOverridden("visible")&&(s.layer.visible=s.visible),"featureEffect"in s&&"featureEffect"in s.layer&&s._isOverridden("featureEffect")&&(s.layer.featureEffect=s.featureEffect)}catch(u){i.e(u)}finally{i.f()}case 7:return e.next=9,this._updateThumbnailUrl(t,r);case 9:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_updateInitialViewProperties",value:function(e,t){var r,n;if(t.backgroundExcluded||(this.initialViewProperties.background=null===(r=e.background)||void 0===r?void 0:r.clone()),this.initialViewProperties.spatialReference=null===(n=e.spatialReference)||void 0===n?void 0:n.clone(),this.initialViewProperties.timeZone=e.timeZone,t.viewpointExcluded||(this.initialViewProperties.viewpoint=new w.Z({rotation:e.rotation,scale:t.scalePreserved?e.scale:null,targetGeometry:this._getViewExtent(e)})),!t.widgetsExcluded){var i,o=(0,a.Z)(e.persistableViewModels);try{for(o.s();!(i=o.n()).done;){i.value.updateWebDocument(this)}}catch(u){o.e(u)}finally{o.f()}}}},{key:"_getViewExtent",value:function(e){var t=e.center.clone().normalize(),r=e.extent.clone(),n=r.width/2;return r.xmin=t.x-n,r.xmax=t.x+n,r}},{key:"_updateThumbnailUrl",value:function(){var e=(0,s.Z)((0,u.Z)().mark((function e(t,r){var n,i;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.thumbnailExcluded){e.next=2;break}return e.abrupt("return");case 2:return n=(0,_e.w)(t,r.thumbnailSize),e.next=5,t.takeScreenshot({format:"png",width:n.width,height:n.height});case 5:i=e.sent,this._setAutoGeneratedThumbnail(i.dataUrl);case 7:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_setAutoGeneratedThumbnail",value:function(e){this.thumbnailUrl=e,this._thumbnailFilename=null}},{key:"_clearThumbnailOverride",value:function(){this._clearOverride("thumbnailUrl"),this.clear("thumbnailUrl","user"),this._thumbnailFilename=null}},{key:"_generateCustomThumbnailFilename",value:function(e){if((0,R.HK)(e)){var t=(0,R.sJ)(e),r=null===t||void 0===t?void 0:t.mediaType,n=r&&Qe.get(r.toLowerCase())||null,i="thumbnail".concat(Date.now());return n?"".concat(i,".").concat(n):i}return null}},{key:"_getAuthoringPropsState",value:function(){return{authoringApp:this.authoringApp,authoringAppVersion:this.authoringAppVersion,isAuthoringAppSetByUser:this._isAuthoringAppSetByUser,isAuthoringAppVersionSetByUser:this._isAuthoringAppVersionSetByUser}}},{key:"_restoreAuthoringPropsFromState",value:function(e){e.isAuthoringAppSetByUser?this.authoringApp=e.authoringApp:this._isAuthoringAppSetByUser=!1,e.isAuthoringAppVersionSetByUser?this.authoringAppVersion=e.authoringAppVersion:this._isAuthoringAppVersionSetByUser=!1}}],[{key:"fromJSON",value:function(e){var t=e;if(!t)throw new _.Z("webmap:empty-resource","Expected a JSON resource but got nothing");return new this({resourceInfo:t})}}]),h}((0,I.R)(k.Z.LoadableMixin((0,j.v)(m.Z))));tt.VERSION=Xe,(0,h._)([(0,O.Cb)()],tt.prototype,"_updateFromPromise",void 0),(0,h._)([(0,O.Cb)({type:Te,json:{write:!0}})],tt.prototype,"applicationProperties",void 0),(0,h._)([(0,O.Cb)({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],tt.prototype,"authoringApp",null),(0,h._)([(0,J.c)("authoringApp")],tt.prototype,"writeAuthoringApp",null),(0,h._)([(0,O.Cb)({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],tt.prototype,"authoringAppVersion",null),(0,h._)([(0,J.c)("authoringAppVersion")],tt.prototype,"writeAuthoringAppVersion",null),(0,h._)([(0,O.Cb)({type:He,json:{write:{overridePolicy:function(e){return{enabled:!!(e&&e.length>0),ignoreOrigin:!0}}}}})],tt.prototype,"bookmarks",void 0),(0,h._)([(0,O.Cb)({type:q.Z,json:{name:"mapFloorInfo",write:!0}})],tt.prototype,"floorInfo",void 0),(0,h._)([(0,O.Cb)({type:he,json:{write:!0}})],tt.prototype,"geotriggersInfo",void 0),(0,h._)([(0,O.Cb)({type:We,nonNullable:!0,json:{read:{source:["background","initialState.viewpoint","mapRangeInfo","spatialReference","timeZone"]},write:{ignoreOrigin:!0,target:{background:{type:Me.Z},"initialState.viewpoint":{type:w.Z},mapRangeInfo:{type:be},spatialReference:{type:E.Z},"timeZone:":{type:String}}}}})],tt.prototype,"initialViewProperties",void 0),(0,h._)([(0,P.r)("initialViewProperties")],tt.prototype,"readInitialViewProperties",null),(0,h._)([(0,J.c)("initialViewProperties")],tt.prototype,"writeInitialViewProperties",null),(0,h._)([(0,O.Cb)({json:{write:!0,name:"mapIPSInfo"}})],tt.prototype,"ipsInfo",void 0),(0,h._)([(0,O.Cb)({json:{read:!1,write:{target:"operationalLayers",ignoreOrigin:!0}}})],tt.prototype,"layers",void 0),(0,h._)([(0,J.c)("layers")],tt.prototype,"writeLayers",null),(0,h._)([(0,O.Cb)({type:U.default})],tt.prototype,"portalItem",void 0),(0,h._)([(0,O.Cb)({json:{write:!0}})],tt.prototype,"presentation",void 0),(0,h._)([(0,O.Cb)()],tt.prototype,"resourceInfo",void 0),(0,h._)([(0,O.Cb)({readOnly:!0,type:ze,json:{read:{source:"version"},write:{allowNull:!0,ignoreOrigin:!0,target:"version",isRequired:!0}}})],tt.prototype,"sourceVersion",void 0),(0,h._)([(0,P.r)("sourceVersion")],tt.prototype,"readSourceVersion",null),(0,h._)([(0,J.c)("sourceVersion")],tt.prototype,"writeSourceVersion",null),(0,h._)([(0,O.Cb)({json:{read:!1,write:{ignoreOrigin:!0}}})],tt.prototype,"tables",void 0),(0,h._)([(0,J.c)("tables")],tt.prototype,"writeTables",null),(0,h._)([(0,O.Cb)()],tt.prototype,"thumbnailUrl",null),(0,h._)([(0,O.Cb)()],tt.prototype,"updatingFromView",null),(0,h._)([(0,O.Cb)({type:Ze.Z,json:{write:!0}})],tt.prototype,"widgets",void 0),(0,h._)([(0,O.Cb)({type:Ke,json:{read:!0,write:!0}})],tt.prototype,"utilityNetworks",void 0);var rt=tt=(0,h._)([(0,N.j)("esri.WebMap")],tt)},45362:function(e,t,r){r.d(t,{i:function(){return v}});var n=r(74165),i=r(1413),o=r(15861),a=r(76200),u=r(25243),s=r(77981),l=r(23084),p=r(35594),c=r(81943),f=(0,u.se)(c.Z);function v(e,t,r){return d.apply(this,arguments)}function d(){return d=(0,o.Z)((0,n.Z)().mark((function e(t,r,o){var u,c,v,d,y;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=f(r),u=(0,l.en)(t),c=(0,i.Z)((0,i.Z)({},u.query),{},{f:"json"},r.toJSON()),v=r.outSpatialReference,d=(0,s.Ji)(r.geometries[0]),y=(0,l.lA)(c,o),e.abrupt("return",(0,a.Z)(u.path+"/project",y).then((function(e){var t=e.data.geometries;return(0,p.o)(t,d,v)})));case 3:case"end":return e.stop()}}),e)}))),d.apply(this,arguments)}},35594:function(e,t,r){r.d(t,{F:function(){return i},o:function(){return o}});var n=r(77981);function i(e){return{geometryType:(0,n.Ji)(e[0]),geometries:e.map((function(e){return e.toJSON()}))}}function o(e,t,r){var i=(0,n.q9)(t);return e.map((function(e){var t=i.fromJSON(e);return t.spatialReference=r,t}))}},81943:function(e,t,r){r.d(t,{Z:function(){return d}});var n=r(15671),i=r(43144),o=r(60136),a=r(29388),u=r(27366),s=r(46784),l=r(49861),p=(r(93169),r(32718),r(84936),r(69912)),c=r(77981),f=r(92975),v=function(e){(0,o.Z)(r,e);var t=(0,a.Z)(r);function r(e){var i;return(0,n.Z)(this,r),(i=t.call(this,e)).geometries=[],i.outSpatialReference=null,i.transformation=null,i.transformForward=null,i}return(0,i.Z)(r,[{key:"toJSON",value:function(){var e=this.geometries.map((function(e){return e.toJSON()})),t=this.geometries[0],r={};return r.outSR=(0,f.B9)(this.outSpatialReference),r.inSR=(0,f.B9)(t.spatialReference),r.geometries=JSON.stringify({geometryType:(0,c.Ji)(t),geometries:e}),this.transformation&&(r.transformation=this.transformation.wkid||JSON.stringify(this.transformation)),null!=this.transformForward&&(r.transformForward=this.transformForward),r}}]),r}(s.wq);(0,u._)([(0,l.Cb)()],v.prototype,"geometries",void 0),(0,u._)([(0,l.Cb)({json:{read:{source:"outSR"}}})],v.prototype,"outSpatialReference",void 0),(0,u._)([(0,l.Cb)()],v.prototype,"transformation",void 0),(0,u._)([(0,l.Cb)()],v.prototype,"transformForward",void 0);var d=v=(0,u._)([(0,p.j)("esri.rest.support.ProjectParameters")],v)},2284:function(e,t,r){r.d(t,{Z:function(){return S}});var n,i=r(15671),o=r(43144),a=r(60136),u=r(29388),s=r(27366),l=r(36721),p=r(10064),c=r(79056),f=r(46784),v=r(84652),d=r(32718),y=r(49861),h=r(89125),g=r(38511),m=r(69912),w=r(31201),b=r(25243),Z=r(26838),_=r(39328),k=n=function(e){(0,a.Z)(r,e);var t=(0,u.Z)(r);function r(e){var n;return(0,i.Z)(this,r),(n=t.call(this,e)).name=null,n.thumbnail=new Z.A,n.timeExtent=null,n}return(0,o.Z)(r,[{key:"castThumbnail",value:function(e){return"string"==typeof e?new Z.A({url:e}):(0,b.se)(Z.A,e)}},{key:"viewpoint",set:function(e){var t=e.targetGeometry,r=e.scale;null!=t&&"point"===t.type&&null==r&&d.Z.getLogger(this).warn("Bookmark.viewpoint should include 'scale' when its targetGeometry is a point.",e),this._set("viewpoint",e)}},{key:"readViewpoint",value:function(e,t){var r=t.extent,n=t.viewpoint;return l.Z.fromJSON(n||{targetGeometry:r})}},{key:"writeViewpoint",value:function(e,t,r,n){if(e){var i=e.targetGeometry;if(null==i||"extent"===i.type)null!=i&&(t.extent=i.toJSON()),t[r]=e.toJSON();else{var o="Bookmark.viewpoint cannot be written to JSON when the viewpoint's targetGeometry is not an extent.";null!==n&&void 0!==n&&n.messages?n.messages.push(new p.Z("property:unsupported",o)):d.Z.getLogger(this).error(o)}}}},{key:"clone",value:function(){return new n((0,v.d9)({name:this.name,thumbnail:this.thumbnail,timeExtent:this.timeExtent,viewpoint:this.viewpoint}))}}]),r}((0,c.IG)(f.wq));(0,s._)([(0,y.Cb)({type:String,nonNullable:!0,json:{write:{isRequired:!0}}})],k.prototype,"name",void 0),(0,s._)([(0,y.Cb)({type:Z.A,json:{write:{overridePolicy:function(e){return{enabled:!(!e||!e.url)}}}}})],k.prototype,"thumbnail",void 0),(0,s._)([(0,h.p)("thumbnail")],k.prototype,"castThumbnail",null),(0,s._)([(0,y.Cb)(_.v)],k.prototype,"timeExtent",void 0),(0,s._)([(0,y.Cb)({type:l.Z,nonNullable:!0,json:{write:!0}})],k.prototype,"viewpoint",null),(0,s._)([(0,g.r)("viewpoint",["extent","viewpoint"])],k.prototype,"readViewpoint",null),(0,s._)([(0,w.c)("viewpoint")],k.prototype,"writeViewpoint",null);var S=k=n=(0,s._)([(0,m.j)("esri.webmap.Bookmark")],k)},53042:function(e,t,r){r.d(t,{Z:function(){return y}});var n,i=r(15671),o=r(43144),a=r(60136),u=r(29388),s=r(27366),l=r(51995),p=r(46784),c=r(84652),f=r(49861),v=(r(93169),r(32718),r(69912)),d=n=function(e){(0,a.Z)(r,e);var t=(0,u.Z)(r);function r(e){var n;return(0,i.Z)(this,r),(n=t.call(this,e)).color=new l.Z([0,0,0,1]),n}return(0,o.Z)(r,[{key:"clone",value:function(){return new n((0,c.d9)({color:this.color}))}}]),r}(p.wq);(0,s._)([(0,f.Cb)({type:l.Z,json:{write:!0}})],d.prototype,"color",void 0);var y=d=n=(0,s._)([(0,v.j)("esri.webmap.background.ColorBackground")],d)}}]);
//# sourceMappingURL=41779.f8412ab3.chunk.js.map