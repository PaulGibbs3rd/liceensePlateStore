"use strict";(self.webpackChunkreact_training=self.webpackChunkreact_training||[]).push([[21993],{70116:function(e,t,n){var i;n.d(t,{Y:function(){return i}}),function(e){e[e.KILOBYTES=1024]="KILOBYTES",e[e.MEGABYTES=1048576]="MEGABYTES",e[e.GIGABYTES=1073741824]="GIGABYTES"}(i||(i={}))},47898:function(e,t,n){n.d(t,{Fp:function(){return d},GJ:function(){return l},M1:function(){return r},MQ:function(){return f},Ww:function(){return v},bA:function(){return h},hw:function(){return m},mE:function(){return u},ne:function(){return s},nn:function(){return c},qF:function(){return g},yG:function(){return o},yP:function(){return p}});var i=n(1413),a=n(68860);function r(e){return{value:e}}function o(e,t){return{type:(0,a.UF)(t),value:e,unit:t}}function s(e,t){return{type:(0,a.UF)(t),value:e,unit:t}}function l(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"arithmetic";return{type:(0,a.UF)(t),value:e,unit:t,rotationType:n}}function c(e,t){var n=u(e,t);return"angle"===e.type?l(n,t,e.rotationType):function(e,t){return{type:(0,a.UF)(t),value:e,unit:t}}(n,t)}function u(e,t){return(0,a.En)(e.value,e.unit,t)}function d(e,t){return null==e?t:null==t||e.value>(0,a.En)(t.value,t.unit,e.unit)?e:t}function h(e,t){return null==e?null:(0,i.Z)((0,i.Z)({},e),{},{value:e.value*t})}function m(e,t,n){if(t===n)return e;switch(n){case"arithmetic":case"geographic":return 90-e}}var p=o(0,"meters"),f=s(0,"square-meters"),v=(l(0,"radians"),l(0,"degrees")),g=l(0,"degrees","geographic")},5163:function(e,t,n){n.d(t,{L4:function(){return I},LO:function(){return h},Qv:function(){return u},Rd:function(){return m},Ud:function(){return g},VG:function(){return d},Wv:function(){return f},Zv:function(){return y},_o:function(){return Z},aC:function(){return _},h9:function(){return v},ld:function(){return k},mg:function(){return p},q6:function(){return b},sS:function(){return z},yc:function(){return w}});var i=n(70116),a=n(17768),r=n(16889),o=n(47898),s=n(643),l=n(68860),c=n(6291);function u(e,t,n){return e.units[t][n]}function d(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr";return"".concat((0,c.uf)(t,{minimumFractionDigits:i,maximumFractionDigits:i,signDisplay:t>0?"never":"exceptZero"})," ").concat(u(e,n,a))}function h(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr";return"".concat((0,c.uf)(t,{minimumFractionDigits:i,maximumFractionDigits:i,signDisplay:"exceptZero"})," ").concat(u(e,n,a))}function m(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr",r=(0,l.Y8)(t,n);return d(e,(0,l.En)(t,n,r),r,i,a)}function p(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr",r=(0,l.Y8)(t,n);return h(e,(0,l.En)(t,n,r),r,i,a)}function f(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr",r=(0,l.Dw)(t,n);return d(e,(0,l.En)(t,n,r),r,i,a)}function v(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr",r=(0,l.Dw)(t,n);return h(e,(0,l.En)(t,n,r),r,i,a)}function g(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr",r=(0,l.Q7)(t,n);return d(e,(0,l.En)(t,n,r),r,i,a)}function b(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr",r=(0,l.Q7)(t,n);return h(e,(0,l.En)(t,n,r),r,i,a)}function y(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr",r=(0,l.jl)(t,n);return d(e,(0,l.En)(t,n,r),r,i,a)}function _(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr",r=(0,l.jl)(t,n);return h(e,(0,l.En)(t,n,r),r,i,a)}function k(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr",r=(0,l.ZI)(t,n);return d(e,(0,l.En)(t,n,r),r,i,a)}function w(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr",r=(0,l.LV)(t,n);return d(e,(0,l.En)(t,n,r),r,i,a)}var A=function(e,t){return{style:"unit",unitDisplay:"narrow",unit:"degree",maximumFractionDigits:t,minimumFractionDigits:t,signDisplay:e>0?"never":"exceptZero"}};function I(e,t,n,i,r){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:a.BV,u=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],d=s.normalize((0,o.hw)((0,l.En)(e,t,"degrees"),n,i),0,u),h=A(d,null!==r&&void 0!==r?r:2);return d=x(d,h),(0,c.uf)(d,h)}function Z(e,t,n,i,a){var r;n!==i&&(e=-e);var o={style:"unit",unitDisplay:"narrow",unit:"degree",maximumFractionDigits:a=null!==(r=a)&&void 0!==r?r:2,minimumFractionDigits:a,signDisplay:"exceptZero"},s=(0,l.En)(e,t,"degrees")%360;return s=x(s,o),(0,c.uf)(s,o)}var F=new Map;function x(e,t){var n=JSON.stringify(t),i=F.get(n);return i||(i=new Intl.NumberFormat("en-US",t),F.set(n,i)),/^[-+]?360\.?0*\xb0?$/.test(i.format(e))?0:e}var M=["B","kB","MB","GB","TB"];function z(e,t){var n=0===(t=Math.round(t))?0:Math.floor(Math.log(t)/Math.log(i.Y.KILOBYTES));n=(0,r.uZ)(n,0,M.length-1);var a=(0,c.uf)(t/Math.pow(i.Y.KILOBYTES,n),{maximumFractionDigits:2});return(0,s.gx)(e.units.bytes[M[n]],{fileSize:a})}},11812:function(e,t,n){n.d(t,{Z:function(){return v}});var i,a=n(15671),r=n(43144),o=n(60136),s=n(29388),l=n(27366),c=n(46784),u=n(49861),d=n(25243),h=(n(84936),n(93169),n(69912));function m(e){var t=e.exifInfo,n=e.exifName,i=e.tagName;if(!t||!n||!i)return null;var a=t.find((function(e){return e.name===n}));return a?function(e){var t=e.tagName,n=e.tags;if(!n||!t)return null;var i=n.find((function(e){return e.name===t}));return(null===i||void 0===i?void 0:i.value)||null}({tagName:i,tags:a.tags}):null}var p={1:{id:1,rotation:0,mirrored:!1},2:{id:2,rotation:0,mirrored:!0},3:{id:3,rotation:180,mirrored:!1},4:{id:4,rotation:180,mirrored:!0},5:{id:5,rotation:-90,mirrored:!0},6:{id:6,rotation:90,mirrored:!1},7:{id:7,rotation:90,mirrored:!0},8:{id:8,rotation:-90,mirrored:!1}},f=i=function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(e){var i;return(0,a.Z)(this,n),(i=t.call(this,e)).contentType=null,i.exifInfo=null,i.id=null,i.globalId=null,i.keywords=null,i.name=null,i.parentGlobalId=null,i.parentObjectId=null,i.size=null,i.url=null,i}return(0,r.Z)(n,[{key:"orientationInfo",get:function(){var e=m({exifName:"Exif IFD0",tagName:"Orientation",exifInfo:this.exifInfo});return p[e]||null}},{key:"clone",value:function(){return new i({contentType:this.contentType,exifInfo:this.exifInfo,id:this.id,globalId:this.globalId,keywords:this.keywords,name:this.name,parentGlobalId:this.parentGlobalId,parentObjectId:this.parentObjectId,size:this.size,url:this.url})}}]),n}(c.wq);(0,l._)([(0,u.Cb)({type:String})],f.prototype,"contentType",void 0),(0,l._)([(0,u.Cb)()],f.prototype,"exifInfo",void 0),(0,l._)([(0,u.Cb)({readOnly:!0})],f.prototype,"orientationInfo",null),(0,l._)([(0,u.Cb)({type:d.z8})],f.prototype,"id",void 0),(0,l._)([(0,u.Cb)({type:String})],f.prototype,"globalId",void 0),(0,l._)([(0,u.Cb)({type:String})],f.prototype,"keywords",void 0),(0,l._)([(0,u.Cb)({type:String})],f.prototype,"name",void 0),(0,l._)([(0,u.Cb)({json:{read:!1}})],f.prototype,"parentGlobalId",void 0),(0,l._)([(0,u.Cb)({json:{read:!1}})],f.prototype,"parentObjectId",void 0),(0,l._)([(0,u.Cb)({type:d.z8})],f.prototype,"size",void 0),(0,l._)([(0,u.Cb)({json:{read:!1}})],f.prototype,"url",void 0);var v=f=i=(0,l._)([(0,h.j)("esri.rest.query.support.AttachmentInfo")],f)},21993:function(e,t,n){n.r(t),n.d(t,{default:function(){return E}});var i=n(4942),a=n(1413),r=n(15671),o=n(43144),s=n(60136),l=n(29388),c=n(27366),u=n(10064),d=n(94172),h=n(5163),m=n(49861),p=n(89125),f=(n(84936),n(93169),n(69912)),v=n(33565),g=n(4819),b=n(65905);function y(e){var t=e.toLowerCase();return"image/bmp"===t||"image/emf"===t||"image/exif"===t||"image/gif"===t||"image/x-icon"===t||"image/jpeg"===t||"image/png"===t||"image/tiff"===t||"image/x-wmf"===t}var _=n(8905),k=n(7021),w=n(33095),A=n(80975),I=n(80532),Z=n(67005),F={addButton:!0,addSubmitButton:!0,cancelAddButton:!0,cancelUpdateButton:!0,deleteButton:!0,errorMessage:!0,progressBar:!0,updateButton:!0},x="esri-attachments",M={base:x,loaderContainer:"".concat(x,"__loader-container"),loader:"".concat(x,"__loader"),fadeIn:"".concat(x,"--fade-in"),container:"".concat(x,"__container"),containerList:"".concat(x,"__container--list"),containerPreview:"".concat(x,"__container--preview"),actions:"".concat(x,"__actions"),deleteButton:"".concat(x,"__delete-button"),addAttachmentButton:"".concat(x,"__add-attachment-button"),errorMessage:"".concat(x,"__error-message"),items:"".concat(x,"__items"),item:"".concat(x,"__item"),itemButton:"".concat(x,"__item-button"),itemMask:"".concat(x,"__item-mask"),itemMaskIcon:"".concat(x,"__item-mask--icon"),itemImage:"".concat(x,"__image"),itemImageResizable:"".concat(x,"__image--resizable"),itemLabel:"".concat(x,"__label"),itemFilename:"".concat(x,"__filename"),itemChevronIcon:"".concat(x,"__item-chevron-icon"),itemLink:"".concat(x,"__item-link"),itemLinkOverlay:"".concat(x,"__item-link-overlay"),itemLinkOverlayIcon:"".concat(x,"__item-link-overlay-icon"),itemEditIcon:"".concat(x,"__item-edit-icon"),itemAddIcon:"".concat(x,"__item-add-icon"),itemAddButton:"".concat(x,"__item-add-button"),formNode:"".concat(x,"__form-node"),fileFieldset:"".concat(x,"__file-fieldset"),fileLabel:"".concat(x,"__file-label"),fileName:"".concat(x,"__file-name"),fileInput:"".concat(x,"__file-input"),metadata:"".concat(x,"__metadata"),metadataFieldset:"".concat(x,"__metadata-fieldset"),progressBar:"".concat(x,"__progress-bar")},z=window.CSS,C=function(e){(0,s.Z)(c,e);var t=(0,l.Z)(c);function c(e,n){var i;return(0,r.Z)(this,c),(i=t.call(this,e,n)).displayType="auto",i.messages=null,i.messagesUnits=null,i.selectedFile=null,i.submitting=!1,i.viewModel=null,i.visibleElements=(0,a.Z)({},F),i._supportsImageOrientation=z&&z.supports&&z.supports("image-orientation","from-image"),i._addAttachmentForm=null,i._updateAttachmentForm=null,i}return(0,o.Z)(c,[{key:"normalizeCtorArgs",value:function(e){var t;return null!==(t=e)&&void 0!==t&&t.viewModel||(e=(0,a.Z)({viewModel:new g.Z},e)),e}},{key:"initialize",value:function(){var e=this;this.addHandles([(0,d.on)((function(){var t;return null===(t=e.viewModel)||void 0===t?void 0:t.attachmentInfos}),"change",(function(){return e.scheduleRender()})),(0,d.on)((function(){var t;return null===(t=e.viewModel)||void 0===t?void 0:t.fileInfos}),"change",(function(){return e.scheduleRender()})),(0,d.watch)((function(){var t;return null===(t=e.viewModel)||void 0===t?void 0:t.mode}),(function(){return e._modeChanged()}),d.initial)])}},{key:"loadDependencies",value:function(){return(0,_.h)({icon:function(){return Promise.all([n.e(92358),n.e(87474)]).then(n.bind(n,87474))}})}},{key:"capabilities",get:function(){return this.viewModel.capabilities},set:function(e){this.viewModel.capabilities=e}},{key:"effectiveDisplayType",get:function(){var e=this.displayType;return e&&"auto"!==e?e:this.viewModel.supportsResizeAttachments?"preview":"list"}},{key:"graphic",get:function(){return this.viewModel.graphic},set:function(e){this.viewModel.graphic=e}},{key:"icon",get:function(){return"attachment"},set:function(e){this._overrideIfSome("icon",e)}},{key:"label",get:function(){var e,t;return null!==(e=null===(t=this.messages)||void 0===t?void 0:t.widgetLabel)&&void 0!==e?e:""},set:function(e){this._overrideIfSome("label",e)}},{key:"castVisibleElements",value:function(e){return(0,a.Z)((0,a.Z)({},F),e)}},{key:"addAttachment",value:function(){var e=this,t=this._addAttachmentForm,n=this.viewModel;return this._set("submitting",!0),this._set("error",null),n.addAttachment(t).then((function(t){return e._set("submitting",!1),e._set("error",null),n.mode="view",t})).catch((function(t){throw e._set("submitting",!1),e._set("error",new u.Z("attachments:add-attachment",e.messages.addErrorMessage,t)),t}))}},{key:"deleteAttachment",value:function(e){var t=this,n=this.viewModel;return this._set("submitting",!0),this._set("error",null),n.deleteAttachment(e).then((function(e){return t._set("submitting",!1),t._set("error",null),n.mode="view",e})).catch((function(e){throw t._set("submitting",!1),t._set("error",new u.Z("attachments:delete-attachment",t.messages.deleteErrorMessage,e)),e}))}},{key:"updateAttachment",value:function(){var e=this,t=this.viewModel,n=this._updateAttachmentForm;return this._set("submitting",!0),this._set("error",null),t.updateAttachment(n).then((function(n){return e._set("submitting",!1),e._set("error",null),t.mode="view",n})).catch((function(t){throw e._set("submitting",!1),e._set("error",new u.Z("attachments:update-attachment",e.messages.updateErrorMessage,t)),t}))}},{key:"addFile",value:function(){var e=this.viewModel.addFile(this.selectedFile,this._addAttachmentForm);return this.viewModel.mode="view",e}},{key:"updateFile",value:function(){var e=this.viewModel,t=e.updateFile(this.selectedFile,this._updateAttachmentForm,e.activeFileInfo);return e.mode="view",t}},{key:"deleteFile",value:function(e){var t,n=this.viewModel.deleteFile(e||(null===(t=this.viewModel.activeFileInfo)||void 0===t?void 0:t.file));return this.viewModel.mode="view",n}},{key:"render",value:function(){var e=this.submitting,t=this.viewModel.state;return(0,Z.u)("div",{class:this.classes(M.base,k.z.widget)},e?this._renderProgressBar():null,"loading"===t?this._renderLoading():this._renderAttachments(),this._renderErrorMessage())}},{key:"_renderErrorMessage",value:function(){var e=this.error,t=this.visibleElements;return e&&t.errorMessage?(0,Z.u)("div",{class:M.errorMessage,key:"error-message"},e.message):null}},{key:"_renderAttachments",value:function(){var e=this.viewModel,t=e.activeFileInfo,n=e.mode,i=e.activeAttachmentInfo;return"add"===n?this._renderAddForm():"edit"===n?this._renderDetailsForm(i||t):this._renderAttachmentContainer()}},{key:"_renderLoading",value:function(){return(0,Z.u)("div",{class:M.loaderContainer,key:"loader"},(0,Z.u)("div",{class:M.loader}))}},{key:"_renderProgressBar",value:function(){return this.visibleElements.progressBar?(0,Z.u)("div",{class:M.progressBar,key:"progress-bar"}):null}},{key:"_renderAddForm",value:function(){var e=this.submitting,t=this.selectedFile,n=e||!t,a=this.visibleElements.cancelAddButton?(0,Z.u)("button",{bind:this,class:this.classes(k.z.button,k.z.buttonTertiary,k.z.buttonSmall,k.z.buttonHalf,e&&k.z.buttonDisabled),disabled:e,onclick:this._cancelForm,type:"button"},this.messages.cancel):null,r=this.visibleElements.addSubmitButton?(0,Z.u)("button",{class:this.classes(k.z.button,k.z.buttonSecondary,k.z.buttonSmall,k.z.buttonHalf,(0,i.Z)({},k.z.buttonDisabled,n)),disabled:n,type:"submit"},this.messages.add):null,o=t?(0,Z.u)("span",{class:M.fileName,key:"file-name"},t.name):null,s=(0,Z.u)("form",{afterCreate:A.Yo,afterRemoved:A.pV,bind:this,"data-node-ref":"_addAttachmentForm",onsubmit:this._submitAddAttachment},(0,Z.u)("fieldset",{class:M.fileFieldset},o,(0,Z.u)("label",{class:this.classes(M.fileLabel,k.z.button,k.z.buttonSecondary)},t?this.messages.changeFile:this.messages.selectFile,(0,Z.u)("input",{bind:this,class:M.fileInput,name:"attachment",onchange:this._handleFileInputChange,type:"file"}))),r,a);return(0,Z.u)("div",{class:M.formNode,key:"add-form-container"},s)}},{key:"_renderDetailsForm",value:function(e){var t,n,a,r,o,s,l,c,u=this,d=this.visibleElements,m=this.viewModel,p=this.selectedFile,f=this.submitting,v=m.capabilities,g=f||!p;p?(o=p.type,s=p.name,l=p.size):e&&"file"in e?(o=e.file.type,s=e.file.name,l=e.file.size):e&&"contentType"in e&&(o=e.contentType,s=e.name,l=e.size,c=e.url);var b=v.editing&&null!==(t=v.operations)&&void 0!==t&&t.delete&&d.deleteButton?(0,Z.u)("button",{bind:this,class:this.classes(k.z.button,k.z.buttonSmall,k.z.buttonTertiary,M.deleteButton,(0,i.Z)({},k.z.buttonDisabled,f)),disabled:f,key:"delete-button",onclick:function(t){return u._submitDeleteAttachment(t,e)},type:"button"},this.messages.delete):void 0,y=v.editing&&null!==(n=v.operations)&&void 0!==n&&n.update&&d.updateButton?(0,Z.u)("button",{class:this.classes(k.z.button,k.z.buttonSmall,k.z.buttonThird,(0,i.Z)({},k.z.buttonDisabled,g)),disabled:g,key:"update-button",type:"submit"},this.messages.update):void 0,_=this.visibleElements.cancelUpdateButton?(0,Z.u)("button",{bind:this,class:this.classes(k.z.button,k.z.buttonSmall,k.z.buttonTertiary,k.z.buttonThird,(0,i.Z)({},k.z.buttonDisabled,f)),disabled:f,key:"cancel-button",onclick:this._cancelForm,type:"button"},this.messages.cancel):void 0,w=v.editing&&null!==(a=v.operations)&&void 0!==a&&a.update?(0,Z.u)("fieldset",{class:M.fileFieldset,key:"file"},(0,Z.u)("span",{class:M.fileName,key:"file-name"},s),(0,Z.u)("label",{class:this.classes(M.fileLabel,k.z.button,k.z.buttonSecondary)},this.messages.changeFile,(0,Z.u)("input",{bind:this,class:M.fileInput,name:"attachment",onchange:this._handleFileInputChange,type:"file"}))):void 0,I=(0,Z.u)("fieldset",{class:M.metadataFieldset,key:"size"},(0,Z.u)("label",null,(0,h.sS)(this.messagesUnits,null!==(r=l)&&void 0!==r?r:0))),F=(0,Z.u)("fieldset",{class:M.metadataFieldset,key:"content-type"},(0,Z.u)("label",null,o)),x=null!=c?(0,Z.u)("a",{class:M.itemLink,href:c,rel:"noreferrer",target:"_blank"},this._renderImageMask(e,400),(0,Z.u)("div",{class:M.itemLinkOverlay},(0,Z.u)("span",{class:M.itemLinkOverlayIcon},(0,Z.u)("calcite-icon",{icon:"launch"})))):this._renderImageMask(e,400),z=(0,Z.u)("form",{afterCreate:A.Yo,afterRemoved:A.pV,bind:this,"data-node-ref":"_updateAttachmentForm",onsubmit:function(t){return u._submitUpdateAttachment(t,e)}},(0,Z.u)("div",{class:M.metadata},I,F),w,(0,Z.u)("div",{class:M.actions},b,_,y));return(0,Z.u)("div",{class:M.formNode,key:"edit-form-container"},x,z)}},{key:"_renderImageMask",value:function(e,t){return e?"file"in e?this._renderGenericImageMask(e.file.name,e.file.type):this._renderImageMaskForAttachment(e,t):null}},{key:"_renderGenericImageMask",value:function(e,t){var n=this.viewModel.supportsResizeAttachments,a=function(e){var t=(0,b.V)("esri/themes/base/images/files/");return e?"text/plain"===e?"".concat(t,"text-32.svg"):"application/pdf"===e?"".concat(t,"pdf-32.svg"):"text/csv"===e?"".concat(t,"csv-32.svg"):"application/gpx+xml"===e?"".concat(t,"gpx-32.svg"):"application/x-dwf"===e?"".concat(t,"cad-32.svg"):"application/postscript"===e||"application/json"===e||"text/xml"===e||"model/vrml"===e?"".concat(t,"code-32.svg"):"application/x-zip-compressed"===e||"application/x-7z-compressed"===e||"application/x-gzip"===e||"application/x-tar"===e||"application/x-gtar"===e||"application/x-bzip2"===e||"application/gzip"===e||"application/x-compress"===e||"application/x-apple-diskimage"===e||"application/x-rar-compressed"===e||"application/zip"===e?"".concat(t,"zip-32.svg"):e.includes("image/")?"".concat(t,"image-32.svg"):e.includes("audio/")?"".concat(t,"sound-32.svg"):e.includes("video/")?"".concat(t,"video-32.svg"):e.includes("msexcel")||e.includes("ms-excel")||e.includes("spreadsheetml")?"".concat(t,"excel-32.svg"):e.includes("msword")||e.includes("ms-word")||e.includes("wordprocessingml")?"".concat(t,"word-32.svg"):e.includes("powerpoint")||e.includes("presentationml")?"".concat(t,"report-32.svg"):"".concat(t,"generic-32.svg"):"".concat(t,"generic-32.svg")}(t),r=(0,i.Z)({},M.itemImageResizable,n);return(0,Z.u)("div",{class:this.classes(M.itemMaskIcon,M.itemMask),key:a},(0,Z.u)("img",{alt:e,class:this.classes(r,M.itemImage),src:a,title:e}))}},{key:"_renderImageMaskForAttachment",value:function(e,t){var n=this.viewModel.supportsResizeAttachments;if(!e)return null;var a=e.contentType,r=e.name,o=e.url;if(!n||!y(a))return this._renderGenericImageMask(r,a);var s=this._getCSSTransform(e),l=s?{transform:s,"image-orientation":"none"}:{},c="".concat(o).concat(null!==o&&void 0!==o&&o.includes("?")?"&":"?","w=").concat(t),u=(0,i.Z)({},M.itemImageResizable,n);return(0,Z.u)("div",{class:this.classes(M.itemMask),key:c},(0,Z.u)("img",{alt:r,class:this.classes(u,M.itemImage),src:c,styles:l,title:r}))}},{key:"_renderFile",value:function(e){var t=this,n=e.file;return(0,Z.u)("li",{class:M.item,key:n},(0,Z.u)("button",{"aria-label":this.messages.attachmentDetails,bind:this,class:M.itemButton,key:"details-button",onclick:function(){return t._startEditFile(e)},title:this.messages.attachmentDetails,type:"button"},this._renderImageMask(e),(0,Z.u)("label",{class:M.itemLabel},(0,Z.u)("span",{class:M.itemFilename},n.name||this.messages.noTitle),(0,Z.u)("span",{"aria-hidden":"true",class:this.classes(M.itemChevronIcon,(0,A.dZ)(this.container)?w.W.left:w.W.right)}))))}},{key:"_renderAttachmentInfo",value:function(e){var t=this,n=e.attachmentInfo,i=e.displayType,a=this.viewModel,r=this.effectiveDisplayType,o=a.capabilities,s=a.supportsResizeAttachments,l=n.contentType,c=n.name,u=n.url,d=this._renderImageMask(n,"list"===i?48:400),h=o.editing?(0,Z.u)("span",{"aria-hidden":"true",class:this.classes(M.itemChevronIcon,(0,A.dZ)(this.container)?w.W.left:w.W.right)}):null,m=[d,"preview"===r&&s&&y(l)?null:(0,Z.u)("label",{class:M.itemLabel},(0,Z.u)("span",{class:M.itemFilename},c||this.messages.noTitle),h)],p=o.editing?(0,Z.u)("button",{"aria-label":this.messages.attachmentDetails,bind:this,class:M.itemButton,"data-attachment-info-id":n.id,key:"details-button",onclick:function(){return t._startEditAttachment(n)},title:this.messages.attachmentDetails,type:"button"},m):(0,Z.u)("a",{class:M.itemButton,href:null!==u&&void 0!==u?u:void 0,key:"details-link",rel:"noreferrer",target:"_blank"},m);return(0,Z.u)("li",{class:M.item,key:n},p)}},{key:"_renderAttachmentContainer",value:function(){var e,t,n=this,a=this.effectiveDisplayType,r=this.viewModel,o=this.visibleElements,s=r.attachmentInfos,l=r.capabilities,c=r.fileInfos,u=!(null===s||void 0===s||!s.length),d=!(null===c||void 0===c||!c.length),h=(e={},(0,i.Z)(e,M.containerList,"preview"!==a),(0,i.Z)(e,M.containerPreview,"preview"===a),e),m=l.editing&&null!==(t=l.operations)&&void 0!==t&&t.add&&o.addButton?(0,Z.u)("button",{bind:this,class:this.classes(k.z.button,k.z.buttonTertiary,M.addAttachmentButton),onclick:function(){return n._startAddAttachment()},type:"button"},(0,Z.u)("span",{"aria-hidden":"true",class:this.classes(M.itemAddIcon,w.W.plus)}),this.messages.add):void 0,p=u?(0,Z.u)("ul",{class:M.items,key:"attachments-list"},s.toArray().map((function(e){return n._renderAttachmentInfo({attachmentInfo:e,displayType:a})}))):void 0,f=d?(0,Z.u)("ul",{class:M.items,key:"file-list"},c.toArray().map((function(e){return n._renderFile(e)}))):void 0,v=d||u?void 0:(0,Z.u)("div",{class:k.z.empty},this.messages.noAttachments);return(0,Z.u)("div",{class:this.classes(M.container,h),key:"attachments-container"},p,f,v,m)}},{key:"_modeChanged",value:function(){this._set("error",null),this._set("selectedFile",null)}},{key:"_handleFileInputChange",value:function(e){var t,n=null===(t=e.target.files)||void 0===t?void 0:t.item(0);this._set("selectedFile",n)}},{key:"_submitDeleteAttachment",value:function(e,t){e.preventDefault(),t&&("file"in t?this.deleteFile(t.file):t&&this.deleteAttachment(t))}},{key:"_submitAddAttachment",value:function(e){e.preventDefault(),this.viewModel.filesEnabled?this.addFile():this.addAttachment()}},{key:"_submitUpdateAttachment",value:function(e,t){e.preventDefault(),t&&"file"in t?this.updateFile():this.updateAttachment()}},{key:"_startEditAttachment",value:function(e){var t=this.viewModel;t.activeFileInfo=null,t.activeAttachmentInfo=e,t.mode="edit"}},{key:"_startEditFile",value:function(e){var t=this.viewModel;t.activeAttachmentInfo=null,t.activeFileInfo=e,t.mode="edit"}},{key:"_startAddAttachment",value:function(){this.viewModel.mode="add"}},{key:"_cancelForm",value:function(e){e.preventDefault(),this.viewModel.mode="view"}},{key:"_getCSSTransform",value:function(e){var t=e.orientationInfo;return!this._supportsImageOrientation&&t?[t.rotation?"rotate(".concat(t.rotation,"deg)"):"",t.mirrored?"scaleX(-1)":""].join(" "):""}}]),c}(v.Z);(0,c._)([(0,m.Cb)()],C.prototype,"capabilities",null),(0,c._)([(0,m.Cb)()],C.prototype,"displayType",void 0),(0,c._)([(0,m.Cb)({readOnly:!0})],C.prototype,"effectiveDisplayType",null),(0,c._)([(0,m.Cb)()],C.prototype,"graphic",null),(0,c._)([(0,m.Cb)()],C.prototype,"icon",null),(0,c._)([(0,m.Cb)()],C.prototype,"label",null),(0,c._)([(0,m.Cb)(),(0,I.H)("esri/widgets/Attachments/t9n/Attachments")],C.prototype,"messages",void 0),(0,c._)([(0,m.Cb)(),(0,I.H)("esri/core/t9n/Units")],C.prototype,"messagesUnits",void 0),(0,c._)([(0,m.Cb)({readOnly:!0})],C.prototype,"selectedFile",void 0),(0,c._)([(0,m.Cb)({readOnly:!0})],C.prototype,"submitting",void 0),(0,c._)([(0,m.Cb)({readOnly:!0})],C.prototype,"error",void 0),(0,c._)([(0,m.Cb)({type:g.Z})],C.prototype,"viewModel",void 0),(0,c._)([(0,m.Cb)()],C.prototype,"visibleElements",void 0),(0,c._)([(0,p.p)("visibleElements")],C.prototype,"castVisibleElements",null);var E=C=(0,c._)([(0,f.j)("esri.widgets.Attachments")],C)},4819:function(e,t,n){n.d(t,{Z:function(){return Z}});var i=n(74165),a=n(15861),r=n(1413),o=n(15671),s=n(43144),l=n(60136),c=n(29388),u=n(27366),d=n(52639),h=n(7138),m=n(80987),p=n(10064),f=n(94172),v=n(49861),g=n(89125),b=(n(84936),n(93169),n(69912)),y=n(11812),_=n(99837),k=n(45276),w={editing:!1,operations:{add:!0,update:!0,delete:!0}},A=m.Z.ofType(y.Z),I=function(e){(0,l.Z)(n,e);var t=(0,c.Z)(n);function n(e){var i;return(0,o.Z)(this,n),(i=t.call(this,e))._getAttachmentsPromise=null,i._attachmentLayer=null,i.capabilities=(0,r.Z)({},w),i.activeAttachmentInfo=null,i.activeFileInfo=null,i.attachmentInfos=new A,i.fileInfos=new m.Z,i.graphic=null,i.mode="view",i.filesEnabled=!1,i.addHandles((0,f.watch)((function(){return i.graphic}),(function(){return i._graphicChanged()}),f.initial)),i}return(0,s.Z)(n,[{key:"destroy",value:function(){this._attachmentLayer=null,this.graphic=null}},{key:"castCapabilities",value:function(e){return(0,r.Z)((0,r.Z)({},w),e)}},{key:"state",get:function(){return this._getAttachmentsPromise?"loading":this.graphic?"ready":"disabled"}},{key:"supportsResizeAttachments",get:function(){var e=this.graphic;if(!e)return!1;var t=e.layer||e.sourceLayer;return(null===t||void 0===t?void 0:t.loaded)&&"capabilities"in t&&t.capabilities&&"operations"in t.capabilities&&"supportsResizeAttachments"in t.capabilities.operations&&t.capabilities.operations.supportsResizeAttachments||!1}},{key:"getAttachments",value:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(){var t,n,a,r,o,s,l;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this._attachmentLayer,n=this.attachmentInfos,t&&"function"==typeof t.queryAttachments){e.next=3;break}throw new p.Z("invalid-layer","getAttachments(): A valid layer is required.");case 3:return a=this._getObjectId(),r=new _.Z({objectIds:[a],returnMetadata:!0}),o=[],s=t.queryAttachments(r).then((function(e){return e[a]||o})).catch((function(){return o})),this._getAttachmentsPromise=s,this.notifyChange("state"),e.next=7,s;case 7:return l=e.sent,e.abrupt("return",(n.destroyAll(),l.length&&n.addMany(l),this._getAttachmentsPromise=null,this.notifyChange("state"),l));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addAttachment",value:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t){var n,a,r,o,s,l,c,u=this,d=arguments;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=d.length>1&&void 0!==d[1]?d[1]:this.graphic,r=this._attachmentLayer,o=this.attachmentInfos,s=this.capabilities,a){e.next=4;break}throw new p.Z("invalid-graphic","addAttachment(): A valid graphic is required.",{graphic:a});case 4:if(t){e.next=6;break}throw new p.Z("invalid-attachment","addAttachment(): An attachment is required.",{attachment:t});case 6:if(null!==(n=s.operations)&&void 0!==n&&n.add){e.next=8;break}throw new p.Z("invalid-capabilities","addAttachment(): add capabilities are required.");case 8:if(r&&"function"==typeof r.addAttachment){e.next=10;break}throw new p.Z("invalid-layer","addAttachment(): A valid layer is required.");case 10:return l=r.addAttachment(a,t).then((function(e){return u._queryAttachment(e.objectId,a)})),e.next=13,l;case 13:return c=e.sent,e.abrupt("return",(o.add(c),c));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteAttachment",value:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t){var n,a,r,o,s,l,c;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this._attachmentLayer,r=this.attachmentInfos,o=this.graphic,s=this.capabilities,t){e.next=3;break}throw new p.Z("invalid-attachment-info","deleteAttachment(): An attachmentInfo is required.",{attachmentInfo:t});case 3:if(null!==(n=s.operations)&&void 0!==n&&n.delete){e.next=5;break}throw new p.Z("invalid-capabilities","deleteAttachment(): delete capabilities are required.");case 5:if(a&&"function"==typeof a.deleteAttachments){e.next=7;break}throw new p.Z("invalid-layer","deleteAttachment(): A valid layer is required.");case 7:if(o){e.next=9;break}throw new p.Z("invalid-graphic","deleteAttachment(): A graphic is required.");case 9:return l=a.deleteAttachments(o,[t.id]).then((function(){return t})),e.next=12,l;case 12:return c=e.sent,e.abrupt("return",(r.remove(c),c.destroy(),c));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateAttachment",value:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t){var n,a,r,o,s,l,c,u,d,h=this,m=arguments;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=m.length>1&&void 0!==m[1]?m[1]:this.activeAttachmentInfo,r=this._attachmentLayer,o=this.attachmentInfos,s=this.graphic,l=this.capabilities,t){e.next=4;break}throw new p.Z("invalid-attachment","updateAttachment(): An attachment is required.",{attachment:t});case 4:if(a){e.next=6;break}throw new p.Z("invalid-attachment-info","updateAttachment(): An attachmentInfo is required.",{attachmentInfo:a});case 6:if(null!==(n=l.operations)&&void 0!==n&&n.update){e.next=8;break}throw new p.Z("invalid-capabilities","updateAttachment(): Update capabilities are required.");case 8:if(c=o.indexOf(a),r&&"function"==typeof r.updateAttachment){e.next=11;break}throw new p.Z("invalid-layer","updateAttachment(): A valid layer is required.");case 11:if(s){e.next=13;break}throw new p.Z("invalid-graphic","updateAttachment(): A graphic is required.");case 13:return u=r.updateAttachment(s,a.id,t).then((function(e){return h._queryAttachment(e.objectId)})),e.next=16,u;case 16:return d=e.sent,e.abrupt("return",(o.splice(c,1,d),d));case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"commitFiles",value:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(){var t=this;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(this.fileInfos.items.map((function(e){return t.addAttachment(e.form)})));case 2:return this.fileInfos.removeAll(),e.abrupt("return",this.getAttachments());case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFile",value:function(e,t){if(!e||!t)return null;var n={file:e,form:t};return this.fileInfos.add(n),n}},{key:"updateFile",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.activeFileInfo;if(!e||!t||!n)return null;var i=this.fileInfos.indexOf(n);return i>-1&&this.fileInfos.splice(i,1,{file:e,form:t}),this.fileInfos.items[i]}},{key:"deleteFile",value:function(e){var t=this.fileInfos.find((function(t){return t.file===e}));return t?(this.fileInfos.remove(t),t):null}},{key:"_queryAttachment",value:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t,n){var a,r,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this._attachmentLayer,t&&null!==a&&void 0!==a&&a.queryAttachments){e.next=3;break}throw new p.Z("invalid-attachment-id","Could not query attachment.");case 3:return r=this._getObjectId(n),o=new _.Z({objectIds:[r],attachmentsWhere:"AttachmentId=".concat(t),returnMetadata:!0}),e.abrupt("return",a.queryAttachments(o).then((function(e){return e[r][0]})));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getObjectId",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graphic;return null!==(e=null===t||void 0===t?void 0:t.getObjectId())&&void 0!==e?e:null}},{key:"_graphicChanged",value:function(){this.graphic&&(this._setAttachmentLayer(),this.getAttachments().catch((function(){})))}},{key:"_setAttachmentLayer",value:function(){var e=this.graphic,t=(0,k.l$)(e);this._attachmentLayer=t?"scene"===t.type&&null!=t.associatedLayer?t.associatedLayer:t:null}}]),n}(h.default);(0,u._)([(0,v.Cb)()],I.prototype,"capabilities",void 0),(0,u._)([(0,g.p)("capabilities")],I.prototype,"castCapabilities",null),(0,u._)([(0,v.Cb)()],I.prototype,"activeAttachmentInfo",void 0),(0,u._)([(0,v.Cb)()],I.prototype,"activeFileInfo",void 0),(0,u._)([(0,v.Cb)({readOnly:!0,type:A})],I.prototype,"attachmentInfos",void 0),(0,u._)([(0,v.Cb)()],I.prototype,"fileInfos",void 0),(0,u._)([(0,v.Cb)({type:d.Z})],I.prototype,"graphic",void 0),(0,u._)([(0,v.Cb)()],I.prototype,"mode",void 0),(0,u._)([(0,v.Cb)({readOnly:!0})],I.prototype,"state",null),(0,u._)([(0,v.Cb)()],I.prototype,"filesEnabled",void 0),(0,u._)([(0,v.Cb)({readOnly:!0})],I.prototype,"supportsResizeAttachments",null);var Z=I=(0,u._)([(0,b.j)("esri.widgets.Attachments.AttachmentsViewModel")],I)},33095:function(e,t,n){n.d(t,{W:function(){return i}});var i={checkMark:"esri-icon-check-mark",close:"esri-icon-close",collapse:"esri-icon-collapse",down:"esri-icon-down",downArrow:"esri-icon-down-arrow",dragHorizontal:"esri-icon-drag-horizontal",dragVertical:"esri-icon-drag-vertical",duplicate:"esri-icon-duplicate",expand:"esri-icon-expand",fontFallbackText:"esri-icon-font-fallback-text",forward:"esri-icon-forward",handleVertical:"esri-icon-handle-vertical",icon:"esri-icon",left:"esri-icon-left",loadingIndicator:"esri-icon-loading-indicator",locateCircled:"esri-icon-locate-circled",minus:"esri-icon-minus",noticeTriangle:"esri-icon-notice-triangle",pause:"esri-icon-pause",play:"esri-icon-play",plus:"esri-icon-plus",radioChecked:"esri-icon-radio-checked",radioUnchecked:"esri-icon-radio-unchecked",refresh:"esri-icon-refresh",reverse:"esri-icon-reverse",right:"esri-icon-right",search:"esri-icon-search",swap:"esri-icon-swap",table:"esri-icon-table",trash:"esri-icon-trash",up:"esri-icon-up",upArrow:"esri-icon-up-arrow",upDownArrows:"esri-icon-up-down-arrows",urbanModel:"esri-icon-urban-model",zoomInMagnifyingGlass:"esri-icon-zoom-in-magnifying-glass",zoomToObject:"esri-icon-zoom-to-object"}}}]);
//# sourceMappingURL=21993.d20c0332.chunk.js.map