"use strict";(self.webpackChunkreact_training=self.webpackChunkreact_training||[]).push([[15421],{15421:function(e,t,r){r.r(t),r.d(t,{default:function(){return _}});var n=r(74165),i=r(15861),a=r(15671),o=r(43144),u=r(88301),l=r(61120),s=r(60136),c=r(29388),f=r(27366),h=r(80987),d=r(32718),v=r(94172),p=r(49861),y=(r(93169),r(84936),r(69912)),g=r(37933),m=r(42069),Z=r(77385),I=r(56667),w=r(67581),x=function(e){(0,s.Z)(r,e);var t=(0,c.Z)(r);function r(){var e;return(0,a.Z)(this,r),(e=t.apply(this,arguments)).type="wmts-3d",e}return(0,o.Z)(r,[{key:"initialize",value:function(){var e=this;this._getCompatibleTileInfoMatrixSet((function(t){return e._getTileInfoSupportError(t.tileInfo,t.fullExtent)}));var t=(0,v.whenOnce)((function(){var t,r;return null===(t=e.view)||void 0===t||null===(r=t.basemapTerrain)||void 0===r?void 0:r.tilingSchemeLocked})).then((function(){var t=e._getCompatibleTileInfoMatrixSet((function(t){return e._getTileInfoError(t.tileInfo,t.fullExtent)}));null!=t&&(null!==t.id&&e.layer.activeLayer.tileMatrixSetId!==t.id&&(e.layer.activeLayer.tileMatrixSetId=t.id),t.tileInfo&&(e.tileInfo=t.tileInfo),e.layer.fullExtent=t.fullExtent)}));this.addResolvingPromise(t),this.when((function(){return e._postInitialize()}))}},{key:"refresh",value:function(){this.emit("data-changed")}},{key:"canResume",value:function(){if(!(0,u.Z)((0,l.Z)(r.prototype),"canResume",this).call(this))return!1;var e=this.layer.activeLayer.tileMatrixSet;return null!=e&&!this._getTileInfoError(e.tileInfo,e.fullExtent)}},{key:"fetchTile",value:function(){var e=(0,i.Z)((0,n.Z)().mark((function e(t,r){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,I.h)(this,t,r));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"doRefresh",value:function(){var e=(0,i.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.suspended||this.emit("data-changed");case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_postInitialize",value:function(){var e=this;this._updatingHandles.add((function(){var t,r;return null===(t=e.layer)||void 0===t||null===(r=t.activeLayer)||void 0===r?void 0:r.styleId}),(function(){return e.refresh()})),this._updatingHandles.add((function(){var t;return null===(t=e.layer)||void 0===t?void 0:t.activeLayer}),(function(t){var r=e._getCompatibleTileInfoMatrixSet((function(t){return e._getTileInfoError(t.tileInfo,t.fullExtent)}),!0);r&&null!=r.id&&t.tileMatrixSetId!==r.id&&(e.layer.activeLayer.tileMatrixSetId=r.id),e.notifyChange("suspended"),e.canResume()&&e.refresh()}))}},{key:"_getCompatibleTileInfoMatrixSet",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=(0,g.mt)(this.layer);if(null!=n){if(h.Z.isCollection(n)){var i=n.find((function(n){var i=e(n);return null!=i&&(r?d.Z.getLogger(t).error("The selected tile matrix set is not compatible with the view",i):t.addResolvingPromise(Promise.reject(i))),null==i}));return i}var a=e(n);return null!=a&&(r?d.Z.getLogger(this).error("The selected tile matrix set is not compatible with the view",a):this.addResolvingPromise(Promise.reject(a))),n}return null}},{key:"_getTileInfoError",value:function(e,t){return this._getTileInfoSupportError(e,t)||this._getTileInfoCompatibilityError(e,this.view.basemapTerrain.tilingScheme)}}]),r}((0,r(13107).Z)((0,Z.r)((0,m.A)(w.Z))));(0,f._)([(0,p.Cb)()],x.prototype,"layer",void 0),(0,f._)([(0,p.Cb)()],x.prototype,"suspended",void 0),(0,f._)([(0,p.Cb)()],x.prototype,"tileInfo",void 0);var _=x=(0,f._)([(0,y.j)("esri.views.3d.layers.WMTSLayerView3D")],x)},56667:function(e,t,r){r.d(t,{h:function(){return s}});var n=r(74165),i=r(15861),a=r(32718),o=r(66978),u=r(71684),l=r(53379);function s(e,t,r){return c.apply(this,arguments)}function c(){return c=(0,i.Z)((0,n.Z)().mark((function e(t,r,i){var s,c,f,h;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=t.layer,!(0,l.FZ)(s)){e.next=8;break}return e.next=4,s.fetchTile(r[0],r[1],r[2],i);case 4:if(c=e.sent,!(0,o.Hc)(i)){e.next=7;break}throw a.Z.getLogger(t).warnOnce("A call to fetchTile resolved even though the request was aborted. fetchTile should not resolve if options.signal.aborted is true."),(0,o.zE)();case 7:return e.abrupt("return",c);case 8:return f=t.getTileUrl(r),(0,u.d)(s)&&s.refreshTimestamp&&(f+="".concat(f.includes("?")?"&":"?","_ts=").concat(s.refreshTimestamp)),h=t.hasMixedImageFormats?"image+type":"image",e.abrupt("return",i.requester.request(f,h,i));case 12:case"end":return e.stop()}}),e)}))),c.apply(this,arguments)}},13107:function(e,t,r){r.d(t,{Z:function(){return h}});var n=r(15671),i=r(43144),a=r(60136),o=r(29388),u=r(27366),l=r(32718),s=r(66978),c=r(94172),f=(r(93169),r(84936),r(10064),r(69912)),h=function(e){var t=function(e){(0,a.Z)(r,e);var t=(0,o.Z)(r);function r(){return(0,n.Z)(this,r),t.apply(this,arguments)}return(0,i.Z)(r,[{key:"initialize",value:function(){var e=this;this.addHandles((0,c.on)((function(){return e.layer}),"refresh",(function(t){e.doRefresh(t.dataChanged).catch((function(t){(0,s.D_)(t)||l.Z.getLogger(e).error(t)}))})),"RefreshableLayerView")}}]),r}(e);return t=(0,u._)([(0,f.j)("esri.views.layers.RefreshableLayerView")],t)}}}]);
//# sourceMappingURL=15421.94dec47a.chunk.js.map