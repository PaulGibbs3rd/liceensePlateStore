"use strict";(self.webpackChunkreact_training=self.webpackChunkreact_training||[]).push([[69229],{32500:function(e,t,r){r.d(t,{I:function(){return x},b:function(){return b}});var n,i,a,o,u=r(30168),s=r(37081),l=r(33280),c=r(94951),d=r(15226),p=r(26461),h=r(116),f=r(41012),v=r(58406),y=r(98634),g=r(64201),m=r(19253),_=r(25920),w=r(4760);function b(e){var t=new g.kG,r=t.vertex,b=t.fragment;return(0,f.Sv)(r,e),t.include(c.w,e),t.attributes.add(w.T.POSITION,"vec3"),t.attributes.add(w.T.UV0,"vec2"),e.perspectiveInterpolation&&t.attributes.add(w.T.PERSPECTIVEDIVIDE,"float"),t.varyings.add("vpos","vec3"),e.multipassEnabled&&t.varyings.add("depth","float"),r.code.add((0,y.H)(n||(n=(0,u.Z)(["\n    void main(void) {\n      vpos = position;\n      ","\n      vTexCoord = uv0;\n      gl_Position = transformPosition(proj, view, vpos);\n\n      ","\n    }\n  "])),e.multipassEnabled?"depth = (view * vec4(vpos, 1.0)).z;":"",e.perspectiveInterpolation?"gl_Position *= perspectiveDivide;":"")),t.include(l.f5,e),t.include(d.l,e),b.uniforms.add(new m.A("tex",(function(e){return e.texture})),new v.p("opacity",(function(e){return e.opacity}))),t.varyings.add("vTexCoord","vec2"),e.transparencyPassType===_.A.ColorAlpha&&(t.outputs.add("fragColor","vec4",0),t.outputs.add("fragAlpha","float",1)),b.include(h.Y),b.code.add((0,y.H)(i||(i=(0,u.Z)(["\n    void main() {\n      discardBySlice(vpos);\n      ","\n      fragColor = texture(tex, vTexCoord) * opacity;\n\n      if (fragColor.a < ",") {\n        discard;\n      }\n\n      fragColor = highlightSlice(fragColor, vpos);\n      ","\n      ","\n    }\n    "])),e.multipassEnabled?"terrainDepthTest(depth);":"",y.H.float(p.F),e.transparencyPassType===_.A.ColorAlpha?(0,y.H)(a||(a=(0,u.Z)(["\n              fragColor = premultiplyAlpha(fragColor);\n              fragAlpha = fragColor.a;"]))):"",e.output===s.H_.ObjectAndLayerIdColor?(0,y.H)(o||(o=(0,u.Z)(["\n              fragColor = vec4(0,0,0,1);"]))):"")),t}var x=Object.freeze(Object.defineProperty({__proto__:null,build:b},Symbol.toStringTag,{value:"Module"}))},69229:function(e,t,r){r.d(t,{Z:function(){return q}});var n=r(1413),i=r(37762),a=r(74165),o=r(15861),u=r(15671),s=r(43144),l=r(97326),c=r(60136),d=r(29388),p=r(27366),h=r(14921),f=r(42537),v=r(32718),y=r(92026),g=r(66978),m=r(94172),_=r(49861),w=(r(93169),r(84936),r(69912)),b=r(53866),x=r(65156),Z=r(26279),E=r(42069),C=r(86372),k=r(38461),I=r(91526),S=r(40779),P=r(70619),T=r(4760);function A(e,t){return(0,P.g7)(e,[[t[0],t[1],-1],[t[2],t[1],-1],[t[2],t[3],-1],[t[0],t[3],-1]])}function R(e,t,r){if(!(0,x.kK)(t,r))return A(e,r);for(var n=[t[1]-r[1],Math.min(t[3],r[3])-Math.max(t[1],r[1]),r[3]-t[3],123456],i=[t[0]-r[0],Math.min(t[2],r[2])-Math.max(t[0],r[0]),r[2]-t[2],123456],a=r[2]-r[0],o=r[3]-r[1],u=i[0]>0&&i[2]>0?3:2,s=n[0]>0&&n[2]>0?3:2,l=(s+1)*(u+1),c=(0,C.bg)(3*l),d=(0,k.xx)(2*l),p=new Array(6*(s*u-1)),h=0,f=0,v=0,y=0,g=0,m=0;m<4;m++){var _=n[m];if(!(_<=0)){for(var w=0,b=0;b<4;b++){var Z=i[b];Z<=0||(c[f++]=r[0]+w,c[f++]=r[1]+h,c[f++]=-1,d[v++]=w/a,d[v++]=h/o,b<3&&m<3&&(1!==b||1!==m)&&(p[g++]=y,p[g++]=y+1,p[g++]=y+u+1,p[g++]=y+1,p[g++]=y+u+2,p[g++]=y+u+1),y++,w+=Z)}h+=_}}var E=new Array(p.length);return new S.Z(e,[[T.T.POSITION,new I.a(c,p,3,!0)],[T.T.NORMAL,new I.a(O,E,3,!0)],[T.T.UV0,new I.a(d,p,2,!0)]])}var O=[0,0,1],D=r(61712),M=r(94463),H=r(54134),L=r(78289),N=r(39077),G=r(1487),V=r(78485),U=r(66156),j=r(67581),z=r(13107),F=r(69787),B=r(8548),W=function(e){(0,c.Z)(r,e);var t=(0,d.Z)(r);function r(){var e;return(0,u.Z)(this,r),(e=t.apply(this,arguments)).drapeSourceType=Z.Lw.RasterImage,e.updatePolicy=V.j.SYNC,e.fullExtentInLocalViewSpatialReference=null,e.maximumDataResolution=null,e._images=new Array,e._extents=new Array,e._overlays=new Array,e.updateWhenStationary=!0,e._drapeSourceRenderer=null,e.refreshDebounced=(0,g.Ds)(function(){var t=(0,o.Z)((0,a.Z)().mark((function t(r){return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=e.destroyed,t.t0){t.next=4;break}return t.next=4,e._doRefresh(r).catch((function(t){(0,g.D_)(t)||v.Z.getLogger((0,l.Z)(e)).error(t)}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),2e3),e}return(0,s.Z)(r,[{key:"visibleAtCurrentScale",get:function(){var e=this.layer,t="effectiveScaleRange"in e?e.effectiveScaleRange:null;return(0,F.GB)(t,this.view.terrainScale)}},{key:"initialize",value:function(){var e=this;this._drapeSourceRenderer=this.view.basemapTerrain.overlayManager.registerGeometryDrapeSource(this),this.addHandles((0,f.kB)((function(){return e.view.basemapTerrain.overlayManager.unregisterDrapeSource(e)}))),this.addResolvingPromise((0,D.E)(this).then((function(t){return e._set("fullExtentInLocalViewSpatialReference",t)}))),this._updatingHandles.add((function(){return e.suspended}),(function(){return e._suspendedChangeHandler()}))}},{key:"destroy",value:function(){this.clear()}},{key:"setDrapingExtent",value:function(e,t){var r=this;this._spatialReference=t,e.forEach((function(e,t){r._overlays[t]=e,r._updateImageExtent(e,t)}))}},{key:"_updateImageExtent",value:function(e,t){var r=this,n=this._clippedExtent(e.extent,J);if(null!=n){var i=function(e,t,r){var n=(0,x.d_)(e)/(0,x.Cb)(e),i={width:r,height:r};return n>1.0001?i.height=r/n:n<.9999&&(i.width=r*n),i.width=Math.round(i.width/((0,x.d_)(e)/(0,x.d_)(t))),i.height=Math.round(i.height/((0,x.Cb)(e)/(0,x.Cb)(t))),i}(e.extent,n,e.resolution),a=e.pixelRatio*this.view.state.pixelRatio,o=this.layer;if("imageMaxWidth"in o&&null!=o.imageMaxWidth||"imageMaxHeight"in o&&null!=o.imageMaxHeight){var u=o.imageMaxWidth,s=o.imageMaxHeight;if(i.width>u){var l=u/i.width;i.height=Math.floor(i.height*l),i.width=u,a*=l}if(i.height>s){var c=s/i.height;i.width=Math.floor(i.width*c),i.height=s,a*=c}}var d=this._extents[t];d&&(0,x.fS)(d.extent,n)&&this._imageSizeEquals(n,d.imageSize,i)||(this._extents[t]={extent:(0,x.Ue)(n),imageSize:i,pixelRatio:a},this.suspended||this._fetch(t).catch((function(e){(0,g.D_)(e)||v.Z.getLogger(r).error(e)})))}}},{key:"clear",value:function(){for(var e=0;e<this._images.length;e++)this._clearImage(e)}},{key:"doRefresh",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._doRefresh());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_doRefresh",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var r,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.suspended){e.next=2;break}return e.abrupt("return");case 2:for(r=[],n=0;n<this._extents.length;n++)this._extents[n]&&r.push(this._fetch(n,t));return e.next=6,Promise.allSettled(r);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"processResult",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,r,n){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(r instanceof HTMLImageElement||r instanceof HTMLCanvasElement)&&(t.image=r);case 1:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"findExtentInfoAt",value:function(e){var t,r=(0,i.Z)(this._extents);try{for(r.s();!(t=r.n()).done;){var n=t.value,a=n.extent;if(new b.Z(a[0],a[1],a[2],a[3],this._spatialReference).contains(e))return n}}catch(o){r.e(o)}finally{r.f()}return null}},{key:"getFetchOptions",value:function(){}},{key:"redraw",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,r){var n=this;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.Ed)(this._images,function(){var e=(0,o.Z)((0,a.Z)().mark((function e(i,o){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i,!e.t0){e.next=6;break}return e.next=4,t(i,r);case 4:return e.next=6,n._createStageObjects(o,i.image,r);case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_imageSizeEquals",value:function(e,t,r){if(!this.maximumDataResolution)return!1;var n=(0,x.d_)(e)/this.maximumDataResolution.x,i=(0,x.Cb)(e)/this.maximumDataResolution.y,a=n/t.width,o=i/t.height,u=n/r.width,s=i/r.height,l=Math.abs(a-u),c=Math.abs(o-s),d=M.h.TESTS_DISABLE_OPTIMIZATIONS?0:1.5;return l<=d&&c<=d}},{key:"_fetch",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,r){var i,u,s,l,c,d,p,h=this;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.suspended){e.next=2;break}return e.abrupt("return");case 2:if(i=this._extents[t],u=i.extent,this._images[t]||(this._images[t]={texture:null,material:null,renderGeometry:null,loadingPromise:null,loadingAbortController:null,image:null,pixelData:null,renderExtent:(0,x.Ue)(u)}),(s=this._images[t]).loadingAbortController=(0,y.IM)(s.loadingAbortController),0!==(l=new b.Z(u[0],u[1],u[2],u[3],this._spatialReference)).width&&0!==l.height){e.next=9;break}return e.abrupt("return",void this._clearImage(t));case 9:return c=new AbortController,s.loadingAbortController=c,(0,g.fu)(r,(function(){return c.abort()})),d=c.signal,p=this._waitFetchReady(d).then((0,o.Z)((0,a.Z)().mark((function e(){var r,o,u,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,n.Z)((0,n.Z)({requestAsImageElement:!0,pixelRatio:h._overlays[t].pixelRatio},h.getFetchOptions()),{},{signal:d}),o=i.imageSize,u=o.height,s=o.width,e.abrupt("return",h.layer.fetchImage(l,s,u,r));case 2:case"end":return e.stop()}}),e)})))).then((function(e){if((0,g.Hc)(d))throw v.Z.getLogger(h).warnOnce("A call to fetchImage resolved even though the request was aborted. fetchImage should not resolve if options.signal.aborted is true."),(0,g.zE)();return h.processResult(s,e)})).then((function(){(0,x.JG)(s.renderExtent,u)})),s.loadingPromise=p,e.next=15,this._updatingHandles.addPromise(p.then((0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,g.k_)(d),e.next=3,h._createStageObjects(t,s.image,d);case 3:case"end":return e.stop()}}),e)})))).catch((function(e){throw e&&!(0,g.D_)(e)&&v.Z.getLogger(h).error(e),e})).finally((function(){p===s.loadingPromise&&(s.loadingPromise=null,s.loadingAbortController=null)})));case 15:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_clearImage",value:function(e){var t=this._images[e];if(t){null!=t.renderGeometry&&(this._drapeSourceRenderer.removeGeometries([t.renderGeometry],L.T.UPDATE),t.renderGeometry=null);var r=this.view._stage,n=t.texture;null!==n&&void 0!==n&&n.unload(),r.remove(n),t.texture=null,r.remove(t.material),t.material=null,t.loadingAbortController=(0,y.IM)(t.loadingAbortController),t.loadingPromise=null,t.image=null,t.pixelData=null}}},{key:"_createStageObjects",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,r,n){var i,o,u,s,l,c,d=this;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=this.view._stage,o=this._images[t],u=function(){var e;null!==(e=o.texture)&&void 0!==e&&e.unload(),i.remove(o.texture),o.texture=null,o.renderGeometry&&(d._drapeSourceRenderer.removeGeometries([o.renderGeometry],L.T.UPDATE),o.renderGeometry=null)},!r){e.next=23;break}return s=new G.x(r,{width:r.width,height:r.height,preMultiplyAlpha:!0,wrap:{s:B.e8.CLAMP_TO_EDGE,t:B.e8.CLAMP_TO_EDGE}}),e.next=5,(0,h.q6)(this._images[t===H.fu.INNER?H.fu.OUTER:H.fu.INNER].loadingPromise);case 5:return(0,g.k_)(n),u(),e.next=9,i.schedule((function(){return s.load(i.renderView.renderingContext)}),n);case 9:if(i.add(s),o.texture=s,null==o.material?(o.material=new U.j({transparent:!0,textureId:s.id}),i.add(o.material)):o.material.setParameters({textureId:s.id}),t!==H.fu.INNER){e.next=16;break}l=A(o.material,o.renderExtent),e.next=20;break;case 16:if(c=this._images[0].renderExtent){e.next=19;break}return e.abrupt("return",void u());case 19:l=R(o.material,c,o.renderExtent);case 20:o.renderGeometry=new N.z(l),o.renderGeometry.localOrigin=this._overlays[t].renderLocalOrigin,this._drapeSourceRenderer.addGeometries([o.renderGeometry],L.T.UPDATE),e.next=24;break;case 23:u(),i.remove(o.material),o.material=null;case 24:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"_clippedExtent",value:function(e,t){if("local"!==this.view.viewingMode)return(0,x.JG)(t,e);var r=this.view.basemapTerrain;return r.ready?(0,x.jV)(e,r.extent,t):(0,x.JG)(t,e)}},{key:"_suspendedChangeHandler",value:function(){this.suspended?this.clear():this.refreshDebounced()}},{key:"_waitFetchReady",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var r=this;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.whenOnce)((function(){return r.view.stationary}),t);case 2:(0,g.k_)(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),r}((0,z.Z)((0,E.A)(j.Z)));(0,p._)([(0,_.Cb)()],W.prototype,"layer",void 0),(0,p._)([(0,_.Cb)()],W.prototype,"suspended",void 0),(0,p._)([(0,_.Cb)({readOnly:!0})],W.prototype,"fullExtentInLocalViewSpatialReference",void 0),(0,p._)([(0,_.Cb)({readOnly:!0})],W.prototype,"visibleAtCurrentScale",null),(0,p._)([(0,_.Cb)()],W.prototype,"updating",void 0);var q=W=(0,p._)([(0,w.j)("esri.views.3d.layers.DynamicLayerView3D")],W),J=(0,x.Ue)()},42069:function(e,t,r){r.d(t,{A:function(){return m}});var n=r(74165),i=r(15861),a=r(15671),o=r(43144),u=r(88301),s=r(61120),l=r(60136),c=r(29388),d=r(27366),p=r(42537),h=r(66978),f=r(94172),v=r(49861),y=(r(93169),r(32718),r(84936),r(69912)),g=r(5354),m=function(e){var t=function(e){(0,l.Z)(r,e);var t=(0,c.Z)(r);function r(){var e;return(0,a.Z)(this,r),(e=t.apply(this,arguments)).slicePlaneEnabled=!1,e.supportsHeightUnitConversion=!1,e}return(0,o.Z)(r,[{key:"postscript",value:function(){(0,u.Z)((0,s.Z)(r.prototype),"postscript",this).call(this),(0,g.qC)(this.layer)&&this.addResolvingPromise(this._validateHeightModelInfo())}},{key:"_validateHeightModelInfo",value:function(){var e=(0,i.Z)((0,n.Z)().mark((function e(){var t,r,i,a=this;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new AbortController,r=t.signal,this.addHandles((0,p.kB)((function(){return t.abort()}))),e.next=4,(0,f.whenOnce)((function(){var e;return null===(e=a.view.defaultsFromMap)||void 0===e?void 0:e.heightModelInfoReady}),r);case 4:if((0,h.k_)(r),!(i=(0,g.Wt)(this.layer,this.view.heightModelInfo,this.supportsHeightUnitConversion))){e.next=8;break}throw i;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),r}(e);return(0,d._)([(0,v.Cb)()],t.prototype,"view",void 0),(0,d._)([(0,v.Cb)()],t.prototype,"slicePlaneEnabled",void 0),t=(0,d._)([(0,y.j)("esri.views.3d.layers.LayerView3D")],t)}},61712:function(e,t,r){r.d(t,{E:function(){return a}});var n=r(81753),i=r(67387);function a(e){var t=e.view.spatialReference,r=e.layer.fullExtent,a=null!=r&&r.spatialReference;if(null==r||!a)return Promise.resolve(null);if(a.equals(t))return Promise.resolve(r.clone());var o=(0,n.iV)(r,t);return null!=o?Promise.resolve(o):e.view.state.isLocal?(0,i.projectGeometry)(r,t,e.layer.portalItem).then((function(t){return!e.destroyed&&t?t:null})).catch((function(){return null})):Promise.resolve(null)}},66156:function(e,t,r){r.d(t,{j:function(){return V}});var n=r(37762),i=r(1413),a=r(15671),o=r(43144),u=r(60136),s=r(29388),l=r(25158),c=r(37081),d=r(68401),p=r(17363),h=r(56529),f=r(78041),v=r(93822),y=r(97731),g=r(4760),m=r(12594),_=r(64642),w=r(11983),b=r(33236),x=r(88301),Z=r(61120),E=r(27366),C=r(98634),k=r(82144),I=r(31132),S=r(33559),P=r(27627),T=r(50411),A=r(25920),R=r(8883),O=r(32500),D=r(8548),M=r(36207),H=(C.K,function(e){(0,u.Z)(r,e);var t=(0,s.Z)(r);function r(){return(0,a.Z)(this,r),t.apply(this,arguments)}return(0,o.Z)(r,[{key:"initializeProgram",value:function(e){return new P.$(e.rctx,r.shader.get().build(this.configuration),G)}},{key:"_setPipelineState",value:function(e,t){var r=this.configuration,n=e===A.A.NONE,i=e===A.A.FrontFace;return(0,M.sm)({blending:r.output===c.H_.Color&&r.transparent?n?L:(0,f.j7)(e):null,culling:(0,M.zp)(r.cullFace),depthTest:{func:(0,f.Bh)(e)},depthWrite:n?r.writeDepth?M.LZ:null:(0,f.K5)(e),drawBuffers:(0,f.V7)(e),colorWrite:M.BK,stencilWrite:r.hasOccludees?T.s3:null,stencilTest:r.hasOccludees?t?T.eD:T.RY:null,polygonOffset:n||i?null:(0,f.je)(r.enableOffset)})}},{key:"initializePipeline",value:function(){return this._occludeePipelineState=this._setPipelineState(this.configuration.transparencyPassType,!0),this._setPipelineState(this.configuration.transparencyPassType,!1)}},{key:"getPipeline",value:function(e){return e?this._occludeePipelineState:(0,x.Z)((0,Z.Z)(r.prototype),"getPipeline",this).call(this)}}]),r}(I.A));H.shader=new k.J(O.I,(function(){return r.e(18957).then(r.bind(r,18957))}));var L=(0,M.if)(D.zi.ONE,D.zi.ONE_MINUS_SRC_ALPHA),N=function(e){(0,u.Z)(r,e);var t=(0,s.Z)(r);function r(){var e;return(0,a.Z)(this,r),(e=t.apply(this,arguments)).output=c.H_.Color,e.cullFace=d.Vr.None,e.hasSlicePlane=!1,e.transparent=!1,e.enableOffset=!0,e.writeDepth=!0,e.hasOccludees=!1,e.transparencyPassType=A.A.NONE,e.multipassEnabled=!1,e.cullAboveGround=!1,e.perspectiveInterpolation=!0,e}return(0,o.Z)(r)}(R.W);(0,E._)([(0,S.o)({count:c.H_.COUNT})],N.prototype,"output",void 0),(0,E._)([(0,S.o)({count:d.Vr.COUNT})],N.prototype,"cullFace",void 0),(0,E._)([(0,S.o)()],N.prototype,"hasSlicePlane",void 0),(0,E._)([(0,S.o)()],N.prototype,"transparent",void 0),(0,E._)([(0,S.o)()],N.prototype,"enableOffset",void 0),(0,E._)([(0,S.o)()],N.prototype,"writeDepth",void 0),(0,E._)([(0,S.o)()],N.prototype,"hasOccludees",void 0),(0,E._)([(0,S.o)({count:A.A.COUNT})],N.prototype,"transparencyPassType",void 0),(0,E._)([(0,S.o)()],N.prototype,"multipassEnabled",void 0),(0,E._)([(0,S.o)()],N.prototype,"cullAboveGround",void 0),(0,E._)([(0,S.o)()],N.prototype,"perspectiveInterpolation",void 0),(0,E._)([(0,S.o)({constValue:!1})],N.prototype,"occlusionPass",void 0);var G=new Map([[g.T.POSITION,0],[g.T.UV0,2],[g.T.PERSPECTIVEDIVIDE,3]]),V=function(e){(0,u.Z)(r,e);var t=(0,s.Z)(r);function r(e){var n;return(0,a.Z)(this,r),(n=t.call(this,e,new z)).supportsEdges=!0,n.produces=new Map([[v.r.OPAQUE_MATERIAL,function(e){return(0,c.ou)(e)||(0,c.D5)(e)&&!n.parameters.transparent}],[v.r.TRANSPARENT_MATERIAL,function(e){return(0,c.D5)(e)&&n.parameters.transparent&&n.parameters.writeDepth}],[v.r.TRANSPARENT_DEPTH_WRITE_DISABLED_MATERIAL,function(e){return(0,c.D5)(e)&&n.parameters.transparent&&!n.parameters.writeDepth}],[v.r.DRAPED_MATERIAL,function(e){return(0,c.D5)(e)||(0,c.ou)(e)}]]),n._vertexAttributeLocations=G,n._configuration=new N,n}return(0,o.Z)(r,[{key:"getConfiguration",value:function(e,t){return this._configuration.output=e,this._configuration.cullFace=this.parameters.cullFace,this._configuration.hasSlicePlane=this.parameters.hasSlicePlane,this._configuration.transparent=this.parameters.transparent,this._configuration.writeDepth=this.parameters.writeDepth,this._configuration.hasOccludees=this.parameters.hasOccludees,this._configuration.transparencyPassType=t.transparencyPassType,this._configuration.enableOffset=t.camera.relativeElevation<f.ve,this._configuration.multipassEnabled=t.multipassEnabled,this._configuration.cullAboveGround=t.multipassTerrain.cullAboveGround,this._configuration.perspectiveInterpolation=this.parameters.perspectiveInterpolation,this._configuration}},{key:"createGLMaterial",value:function(e){return new U(e)}},{key:"createBufferWriter",value:function(){var e=_.W1.clone();return this.parameters.perspectiveInterpolation&&e.f32(g.T.PERSPECTIVEDIVIDE),new j(e)}}]),r}(w.c),U=function(e){(0,u.Z)(r,e);var t=(0,s.Z)(r);function r(e){return(0,a.Z)(this,r),t.call(this,(0,i.Z)((0,i.Z)({},e),e.material.parameters))}return(0,o.Z)(r,[{key:"_updateParameters",value:function(e){return this.updateTexture(this._material.parameters.textureId),this._material.setParameters(this.textureBindParameters),this.ensureTechnique(H,e)}},{key:"_updateOccludeeState",value:function(e){e.hasOccludees!==this._material.parameters.hasOccludees&&(this._material.setParameters({hasOccludees:e.hasOccludees}),this._updateParameters(e))}},{key:"beginSlot",value:function(e){return this._output===c.H_.Color&&this._updateOccludeeState(e),this._updateParameters(e)}}]),r}(p.F),j=function(e){(0,u.Z)(r,e);var t=(0,s.Z)(r);function r(){return(0,a.Z)(this,r),t.apply(this,arguments)}return(0,o.Z)(r,[{key:"write",value:function(e,t,r,i,a){var o,u=(0,n.Z)(this.vertexBufferLayout.fields.keys());try{for(u.s();!(o=u.n()).done;){var s=o.value,c=r.attributes.get(s);if(c)if(s===g.T.PERSPECTIVEDIVIDE){(0,y.hu)(1===c.size);var d=i.getField(s,l.ly);d&&(0,b.XW)(c,d,a)}else(0,b.i9)(s,c,e,t,i,a)}}catch(p){u.e(p)}finally{u.f()}}}]),r}(m.G),z=function(e){(0,u.Z)(r,e);var t=(0,s.Z)(r);function r(){var e;return(0,a.Z)(this,r),(e=t.apply(this,arguments)).transparent=!1,e.writeDepth=!0,e.hasSlicePlane=!1,e.cullFace=d.Vr.None,e.hasOccludees=!1,e.opacity=1,e.textureId=null,e.initTextureTransparent=!0,e.perspectiveInterpolation=!1,e}return(0,o.Z)(r)}(h.Mt)},67581:function(e,t,r){r.d(t,{Z:function(){return _}});var n=r(15671),i=r(43144),a=r(60136),o=r(29388),u=r(27366),s=r(7138),l=r(91505),c=r(79056),d=r(32718),p=r(92026),h=r(67426),f=r(49861),v=(r(93169),r(84936),r(69912)),y=r(46634),g=r(69787),m=function(e){(0,a.Z)(r,e);var t=(0,o.Z)(r);function r(e){var i;return(0,n.Z)(this,r),(i=t.call(this,e))._updatingHandles=new y.R,i.layer=null,i.parent=null,i}return(0,i.Z)(r,[{key:"initialize",value:function(){var e=this;this.when().catch((function(t){if("layerview:create-error"!==t.name){var r,n=e.layer&&e.layer.id||"no id",i=(null===(r=e.layer)||void 0===r?void 0:r.title)||"no title";d.Z.getLogger(e).error("#resolve()","Failed to resolve layer view (layer title: '".concat(i,"', id: '").concat(n,"')"),t)}}))}},{key:"destroy",value:function(){this._updatingHandles=(0,p.SC)(this._updatingHandles)}},{key:"fullOpacity",get:function(){var e,t,r,n;return(null!==(e=null===(t=this.layer)||void 0===t?void 0:t.opacity)&&void 0!==e?e:1)*(null!==(r=null===(n=this.parent)||void 0===n?void 0:n.fullOpacity)&&void 0!==r?r:1)}},{key:"suspended",get:function(){return this.destroyed||!this.canResume()}},{key:"suspendInfo",get:function(){return this.getSuspendInfo()}},{key:"legendEnabled",get:function(){var e;return!this.suspended&&!0===(null===(e=this.layer)||void 0===e?void 0:e.legendEnabled)}},{key:"updating",get:function(){var e;return!((null===(e=this._updatingHandles)||void 0===e||!e.updating)&&!this.isUpdating())}},{key:"updatingProgress",get:function(){return this.updating?0:1}},{key:"updateSuspended",get:function(){return this.suspended}},{key:"visible",get:function(){var e;return!0===(null===(e=this.layer)||void 0===e?void 0:e.visible)},set:function(e){this._overrideIfSome("visible",e)}},{key:"visibleAtCurrentScale",get:function(){return!0}},{key:"visibleAtCurrentTimeExtent",get:function(){var e,t=this.view.timeExtent,r=null===(e=this.layer)||void 0===e?void 0:e.visibilityTimeExtent;return!t||!r||!t.intersection(r).isEmpty}},{key:"canResume",value:function(){var e,t,r,n=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;return this.visible&&(null===(e=this.layer)||void 0===e?void 0:e.loaded)&&!(null!==(t=this.parent)&&void 0!==t&&t.suspended)&&(null===(r=this.view)||void 0===r?void 0:r.ready)&&(0,g.Cy)(n)&&this.visibleAtCurrentScale&&this.visibleAtCurrentTimeExtent||!1}},{key:"getSuspendInfo",value:function(){var e,t,r=null!==(e=this.parent)&&void 0!==e&&e.suspended?this.parent.suspendInfo:{};null!==(t=this.view)&&void 0!==t&&t.ready||(r.viewNotReady=!0),this.layer&&this.layer.loaded||(r.layerNotLoaded=!0);var n=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;return(0,g.Cy)(n)&&this.visibleAtCurrentScale||(r.outsideScaleRange=!0),this.visibleAtCurrentTimeExtent||(r.outsideVisibilityTimeExtent=!0),this.visible||(r.layerInvisible=!0),r}},{key:"isUpdating",value:function(){return!1}}]),r}((0,c.IG)((0,h.v)(l.Z.EventedMixin(s.default))));(0,u._)([(0,f.Cb)()],m.prototype,"view",void 0),(0,u._)([(0,f.Cb)()],m.prototype,"fullOpacity",null),(0,u._)([(0,f.Cb)()],m.prototype,"layer",void 0),(0,u._)([(0,f.Cb)()],m.prototype,"parent",void 0),(0,u._)([(0,f.Cb)({readOnly:!0})],m.prototype,"suspended",null),(0,u._)([(0,f.Cb)({readOnly:!0})],m.prototype,"suspendInfo",null),(0,u._)([(0,f.Cb)({readOnly:!0})],m.prototype,"legendEnabled",null),(0,u._)([(0,f.Cb)({type:Boolean,readOnly:!0})],m.prototype,"updating",null),(0,u._)([(0,f.Cb)({readOnly:!0})],m.prototype,"updatingProgress",null),(0,u._)([(0,f.Cb)()],m.prototype,"updateSuspended",null),(0,u._)([(0,f.Cb)()],m.prototype,"visible",null),(0,u._)([(0,f.Cb)({readOnly:!0})],m.prototype,"visibleAtCurrentScale",null),(0,u._)([(0,f.Cb)({readOnly:!0})],m.prototype,"visibleAtCurrentTimeExtent",null);var _=m=(0,u._)([(0,v.j)("esri.views.layers.LayerView")],m)}}]);
//# sourceMappingURL=69229.0560b64e.chunk.js.map