"use strict";(self.webpackChunkreact_training=self.webpackChunkreact_training||[]).push([[9237,45739],{50863:function(e,t,n){n.d(t,{h:function(){return i}});var r=n(45739);function i(e,t,n){if(null==(null===e||void 0===e?void 0:e.timeInfo))return null;var i=e.datesInUnknownTimezone,a=void 0!==i&&i,u=e.timeOffset,l=e.useViewTime,o=e.timeExtent;a&&(o=(0,r.toLocalTimeExtent)(o));var s=l?t&&o?t.intersection(o):t||o:o;return!s||s.isEmpty||s.isAllTime?s:(u&&(s=s.offset(-u.value,u.unit)),a&&(s=(0,r.toUTCTimeExtent)(s)),s.equals(n)?n:s)}},83217:function(e,t,n){n.d(t,{x:function(){return r}});var r=Symbol("WebScene")},45739:function(e,t,n){n.r(t),n.d(t,{getTimeExtentFromLayers:function(){return w},getTimeSliderSettingsFromWebDocument:function(){return D},getTimeSliderSettingsFromWebMap:function(){return k},toLocalTimeExtent:function(){return S},toUTCTimeExtent:function(){return I}});var r=n(93433),i=n(37762),a=n(74165),u=n(15861),l=n(62044),o=n(63780),s=n(44927),c=n(84652),d=n(32718),f=n(86710),p=n(38675),m=n(83217);function v(e){return null!=e&&"object"==typeof e&&m.x in e}function h(e){return void 0!==e.timeInfo}function x(e,t){return y.apply(this,arguments)}function y(){return(y=(0,u.Z)((0,a.Z)().mark((function e(t,n){var r,i,u;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null!==(r=null===(i=t.widgets)||void 0===i||null===(u=i.timeSlider)||void 0===u?void 0:u.fullTimeExtent)&&void 0!==r?r:w(t.allLayers,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){var t,n=null!==(t=e.numThumbs)&&void 0!==t?t:2,r=e.currentTimeExtent;if(r){var i=r.start,a=r.end;return null!=i&&null!=a&&i.getTime()===a.getTime()?"instant":2===n?"time-window":null==i||0===i.getTime()?"cumulative-from-start":"cumulative-from-end"}return 2===n?"time-window":"cumulative-from-start"}function b(e){var t=e.numStops,n=e.stopInterval,r=e.stops;return r?{dates:(0,c.d9)(r)}:n?{interval:n.clone()}:{count:null!==t&&void 0!==t?t:5}}function w(e,t){return Z.apply(this,arguments)}function Z(){return Z=(0,u.Z)((0,a.Z)().mark((function e(t,n){var s,c,d,f,p,m,v,x,y,g,b,w,Z;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.length){e.next=2;break}return e.abrupt("return",l.Z.allTime);case 2:return e.next=4,Promise.all(t.map((function(e){return e.load({signal:n})})));case 4:if(s=t.filter(h),c=t.filter((function(e){return!h(e)&&null!=e.visibilityTimeExtent})),0!==s.length||0!==c.length){e.next=7;break}return e.abrupt("return",l.Z.allTime);case 7:d=[],f=[],p=(0,i.Z)(s);try{for(p.s();!(m=p.n()).done;)"feature"!==(null===(x=m.value)||void 0===x?void 0:x.type)&&"map-image"!==(null===x||void 0===x?void 0:x.type)||null===(v=x.timeInfo)||void 0===v||!v.hasLiveData?f.push(x):d.push(x)}catch(T){p.e(T)}finally{p.f()}if(y=function(e){return null==e||e.isAllTime},g=[].concat((0,r.Z)(f.map((function(e){var t,n,r=null===(t=e.timeInfo)||void 0===t?void 0:t.fullTimeExtent,i=e.visibilityTimeExtent;return null!==(n=null===r||void 0===r?void 0:r.intersection(i))&&void 0!==n?n:i}))),(0,r.Z)(c.map((function(e){return e.visibilityTimeExtent})))),!g.some(y)){e.next=13;break}return e.abrupt("return",l.Z.allTime);case 13:return b=d.map(function(){var e=(0,u.Z)((0,a.Z)().mark((function e(t){var r,i,u,l,o,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchRecomputedExtents({signal:n});case 2:if(e.t2=i=e.sent,e.t1=null===e.t2,e.t1){e.next=6;break}e.t1=void 0===i;case 6:if(!e.t1){e.next=10;break}e.t3=void 0,e.next=11;break;case 10:e.t3=i.timeExtent;case 11:if(e.t4=r=e.t3,e.t0=null!==e.t4,!e.t0){e.next=15;break}e.t0=void 0!==r;case 15:if(!e.t0){e.next=19;break}e.t5=r,e.next=20;break;case 19:e.t5=null===(u=t.timeInfo)||void 0===u?void 0:u.fullTimeExtent;case 20:return o=e.t5,s=t.visibilityTimeExtent,e.abrupt("return",null!==(l=null===o||void 0===o?void 0:o.intersection(s))&&void 0!==l?l:s);case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=16,Promise.allSettled(b);case 16:if(!(w=e.sent.map((function(e){return"fulfilled"===e.status?e.value:null}))).some(y)){e.next=19;break}return e.abrupt("return",l.Z.allTime);case 19:if(0!==(Z=[].concat((0,r.Z)(w),(0,r.Z)(g)).filter(o.pC)).length){e.next=22;break}return e.abrupt("return",l.Z.allTime);case 22:return e.abrupt("return",Z.reduce((function(e,t){return e.union(t)})));case 23:case"end":return e.stop()}}),e)}))),Z.apply(this,arguments)}function T(e,t){var n,r=e.currentTimeExtent;if(!r)return null;var i=r.start,a=r.end,u=null!==(n=null!==i&&void 0!==i?i:a)&&void 0!==n?n:null;switch(t){case"time-window":return new l.Z({start:i,end:a});case"cumulative-from-start":return new l.Z({start:null,end:u});case"cumulative-from-end":return new l.Z({start:u,end:null});case"instant":return new l.Z({start:u,end:u})}}function k(e,t){return E.apply(this,arguments)}function E(){return(E=(0,u.Z)((0,a.Z)().mark((function e(t,n){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,s.XV)(d.Z.getLogger("esri.support.timeUtils.getTimeSliderSettingsFromWebMap"),"`timeUtils.getTimeSliderSettingsFromWebMap` is deprecated in favor of 'timeUtils.getTimeSliderSettingsFromWebDocument'",{replacement:"timeUtils.getTimeSliderSettingsFromWebDocument",version:"4.30",see:"https://developers.arcgis.com/javascript/latest/api-reference/esri-support-timeUtils.html#getTimeSliderSettingsFromWebDocument",warnOnce:!0}),null==t||!(0,p.s)(t)){e.next=7;break}return e.next=4,D(t,n);case 4:e.t0=e.sent,e.next=8;break;case 7:e.t0=null;case 8:return e.abrupt("return",e.t0);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(e,t){return R.apply(this,arguments)}function R(){return(R=(0,u.Z)((0,a.Z)().mark((function e(t,n){var r,i,u,l,o,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,p.s)(t)||v(t)){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,t.load({signal:n});case 4:if(u=null===t||void 0===t||null===(r=t.widgets)||void 0===r?void 0:r.timeSlider){e.next=7;break}return e.abrupt("return",null);case 7:return e.next=9,x(t,n);case 9:return l=e.sent,o=u.loop,s=g(u),e.abrupt("return",{fullTimeExtent:l,loop:o,mode:s,playRate:null!==(i=u.stopDelay)&&void 0!==i?i:2e3,stops:b(u),timeExtent:T(u,s)});case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e){if(!e)return e;var t=e.start,n=e.end;return new l.Z({start:null!=t?(0,f.Nm)(t,-t.getTimezoneOffset(),"minutes"):t,end:null!=n?(0,f.Nm)(n,-n.getTimezoneOffset(),"minutes"):n})}function S(e){if(!e)return e;var t=e.start,n=e.end;return new l.Z({start:null!=t?(0,f.Nm)(t,t.getTimezoneOffset(),"minutes"):t,end:null!=n?(0,f.Nm)(n,n.getTimezoneOffset(),"minutes"):n})}},11283:function(e,t,n){n.r(t),n.d(t,{default:function(){return v}});var r=n(74165),i=n(15861),a=n(15671),u=n(43144),l=n(60136),o=n(29388),s=n(27366),c=n(66978),d=n(94172),f=(n(32718),n(93169),n(84936),n(10064),n(69912)),p=n(69229),m=function(e){(0,l.Z)(n,e);var t=(0,o.Z)(n);function n(){var e;return(0,a.Z)(this,n),(e=t.apply(this,arguments)).type="imagery-3d",e.redrawDebounced=(0,c.Ds)(function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.redraw((function(t,n){return e._redrawImage(t,n)}),n);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),2e3),e}return(0,u.Z)(n,[{key:"initialize",value:function(){var e=this;this.addHandles([(0,d.when)((function(){return e.view.basemapTerrain.ready}),(function(){return e._initializeMaximumDataResolution()}),{once:!0,initial:!0}),this.layer.on("redraw",(function(){return e._updatingHandles.addPromise(e.redrawDebounced())}))]),this._updatingHandles.add((function(){var t,n;return null===(t=e.layer)||void 0===t||null===(n=t.exportImageServiceParameters)||void 0===n?void 0:n.version}),(function(){e._updatingHandles.addPromise(e.refreshDebounced())})),this._updatingHandles.add((function(){var t;return null===(t=e.layer)||void 0===t?void 0:t.renderer}),(function(){e._updatingHandles.addPromise(e.refreshDebounced())})),this._updatingHandles.add((function(){return e.timeExtent}),(function(){return e._updatingHandles.addPromise(e.refreshDebounced())}))}},{key:"_initializeMaximumDataResolution",value:function(){this.maximumDataResolution=this.layer.loaded?this.layer.serviceRasterInfo.pixelSize:null}},{key:"getFetchOptions",value:function(){return{timeExtent:this.timeExtent}}},{key:"processResult",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n,i){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.imageOrCanvasElement){e.next=4;break}t.image=n.imageOrCanvasElement,e.next=8;break;case 4:return t.image=document.createElement("canvas"),t.pixelData=n.pixelData,e.next=8,this._redrawImage(t,i);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"_redrawImage",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n){var i,a,u,l,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.image instanceof HTMLCanvasElement&&null!=t.pixelData){e.next=2;break}throw new Error;case 2:return i=t.image,a=i.getContext("2d"),e.next=6,this.layer.applyRenderer(t.pixelData,{signal:n});case 6:if(u=e.sent,null!=(l=this.layer.applyFilter(u).pixelBlock)){e.next=10;break}throw new Error;case 10:i.width=l.width,i.height=l.height,(o=a.createImageData(l.width,l.height)).data.set(l.getAsRGBA()),a.putImageData(o,0,0);case 13:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),n}((0,n(1424).Z)(p.Z)),v=m=(0,s._)([(0,f.j)("esri.views.3d.layers.ImageryLayerView3D")],m)},1424:function(e,t,n){n.d(t,{Z:function(){return b}});var r=n(74165),i=n(15861),a=n(15671),u=n(43144),l=n(88301),o=n(61120),s=n(60136),c=n(29388),d=n(27366),f=n(10064),p=n(66978),m=n(49861),v=(n(93169),n(32718),n(84936),n(69912)),h=n(848),x=n(50863),y=n(21149),g=n(24405),b=function(e){var t=function(e){(0,s.Z)(n,e);var t=(0,c.Z)(n);function n(){var e;return(0,a.Z)(this,n),(e=t.apply(this,arguments)).view=null,e}return(0,u.Z)(n,[{key:"timeExtent",get:function(){var e;return(0,x.h)(this.layer,null===(e=this.view)||void 0===e?void 0:e.timeExtent,this._get("timeExtent"))}},{key:"fetchPopupFeaturesAtLocation",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n){var i,a,u,l,o,s,c,d,m,v,x,b,w;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=this.layer,t){e.next=3;break}throw new f.Z("imagerylayerview:fetchPopupFeatures","Nothing to fetch without area",{layer:i});case 3:if(a=i.popupEnabled,u=(0,g.V5)(i,n),a&&null!=u){e.next=6;break}return e.abrupt("return",[]);case 6:return e.next=8,u.getRequiredFields();case 8:return l=e.sent,(0,p.k_)(n),(o=new y.Z).timeExtent=this.timeExtent,o.geometry=t,o.outFields=l,o.outSpatialReference=t.spatialReference,s=this.view,c=s.resolution,d=s.spatialReference,m="2d"===this.view.type?new h.Z(c,c,d):new h.Z(.5*c,.5*c,d),v=u.layerOptions||{returnTopmostRaster:!0,showNoDataRecords:!1},x=v.returnTopmostRaster,b=v.showNoDataRecords,w={returnDomainValues:!0,returnTopmostRaster:x,pixelSize:m,showNoDataRecords:b,signal:null===n||void 0===n?void 0:n.signal},e.abrupt("return",i.queryVisibleRasters(o,w).then((function(e){return e})));case 14:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"canResume",value:function(){var e;return!!(0,l.Z)((0,o.Z)(n.prototype),"canResume",this).call(this)&&!(null!==(e=this.timeExtent)&&void 0!==e&&e.isEmpty)}}]),n}(e);return(0,d._)([(0,m.Cb)()],t.prototype,"layer",void 0),(0,d._)([(0,m.Cb)()],t.prototype,"suspended",void 0),(0,d._)([(0,m.Cb)({readOnly:!0})],t.prototype,"timeExtent",null),(0,d._)([(0,m.Cb)()],t.prototype,"view",void 0),t=(0,d._)([(0,v.j)("esri.views.layers.ImageryLayerView")],t)}},13107:function(e,t,n){n.d(t,{Z:function(){return f}});var r=n(15671),i=n(43144),a=n(60136),u=n(29388),l=n(27366),o=n(32718),s=n(66978),c=n(94172),d=(n(93169),n(84936),n(10064),n(69912)),f=function(e){var t=function(e){(0,a.Z)(n,e);var t=(0,u.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"initialize",value:function(){var e=this;this.addHandles((0,c.on)((function(){return e.layer}),"refresh",(function(t){e.doRefresh(t.dataChanged).catch((function(t){(0,s.D_)(t)||o.Z.getLogger(e).error(t)}))})),"RefreshableLayerView")}}]),n}(e);return t=(0,l._)([(0,d.j)("esri.views.layers.RefreshableLayerView")],t)}},24405:function(e,t,n){n.d(t,{V5:function(){return s},e7:function(){return l},zc:function(){return c}});var r=n(74165),i=n(93433),a=n(15861),u=n(37270);function l(e){return o.apply(this,arguments)}function o(){return o=(0,a.Z)((0,r.Z)().mark((function e(t){var n,a,l,o,s,c,d,f,p,m,v,h=arguments;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(l=h.length>1&&void 0!==h[1]?h[1]:t.popupTemplate)){e.next=3;break}return e.abrupt("return",[]);case 3:return e.next=5,l.getRequiredFields(t.fieldsIndex);case 5:if(o=e.sent,s=l.lastEditInfoEnabled,c=t.objectIdField,d=t.typeIdField,f=t.globalIdField,p=t.relationships,!o.includes("*")){e.next=13;break}return e.abrupt("return",["*"]);case 13:return m=s?(0,u.CH)(t):[],v=(0,u.Q0)(t.fieldsIndex,[].concat((0,i.Z)(o),(0,i.Z)(m))),e.abrupt("return",(d&&v.push(d),v&&c&&null!==(n=t.fieldsIndex)&&void 0!==n&&n.has(c)&&!v.includes(c)&&v.push(c),v&&f&&null!==(a=t.fieldsIndex)&&void 0!==a&&a.has(f)&&!v.includes(f)&&v.push(f),p&&p.forEach((function(e){var n,r=e.keyField;v&&r&&(null===(n=t.fieldsIndex)||void 0===n?void 0:n.has(r))&&!v.includes(r)&&v.push(r)})),v));case 15:case"end":return e.stop()}}),e)}))),o.apply(this,arguments)}function s(e,t){return e.popupTemplate?e.popupTemplate:null!=t&&t.defaultPopupTemplateEnabled&&null!=e.defaultPopupTemplate?e.defaultPopupTemplate:null}function c(e,t){return null!=s(e,{defaultPopupTemplateEnabled:t})}},38675:function(e,t,n){function r(e){return null!=e&&"object"==typeof e&&"declaredClass"in e&&"esri.WebMap"===e.declaredClass}n.d(t,{s:function(){return r}})}}]);
//# sourceMappingURL=9237.f009b076.chunk.js.map