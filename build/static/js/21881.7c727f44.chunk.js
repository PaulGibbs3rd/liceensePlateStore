"use strict";(self.webpackChunkreact_training=self.webpackChunkreact_training||[]).push([[21881],{44041:function(e,t,n){n.d(t,{R:function(){return h}});var r=n(1413),i=n(15671),a=n(43144),l=n(60136),u=n(29388),s=n(27366),o=n(7138),c=n(76672),m=n(49861),f=(n(93169),n(32718),n(84936),n(69912)),y=n(82582),p=n(87072),v=n(58132),d={visible:"visibleSublayers",definitionExpression:"layerDefs",labelingInfo:"hasDynamicLayers",labelsVisible:"hasDynamicLayers",opacity:"hasDynamicLayers",minScale:"visibleSublayers",maxScale:"visibleSublayers",renderer:"hasDynamicLayers",source:"hasDynamicLayers"},h=function(e){(0,l.Z)(n,e);var t=(0,u.Z)(n);function n(e){var r;return(0,i.Z)(this,n),(r=t.call(this,e)).floors=null,r.scale=0,r}return(0,a.Z)(n,[{key:"destroy",value:function(){this.layer=null}},{key:"dynamicLayers",get:function(){var e=this;if(!this.hasDynamicLayers)return null;var t=this.visibleSublayers.map((function(t){var n=(0,p.f)(e.floors,t);return t.toExportImageJSON(n)}));return t.length?JSON.stringify(t):null}},{key:"hasDynamicLayers",get:function(){return this.layer&&(0,v.FN)(this.visibleSublayers,this.layer.serviceSublayers,this.layer.gdbVersion)}},{key:"layer",set:function(e){var t=this;this._get("layer")!==e&&(this._set("layer",e),this.removeHandles("layer"),e&&this.addHandles([e.allSublayers.on("change",(function(){return t.notifyChange("visibleSublayers")})),e.on("sublayer-update",(function(e){return t.notifyChange(d[e.propertyName])}))],"layer"))}},{key:"layers",get:function(){var e=this.visibleSublayers;return e?e.length?"show:"+e.map((function(e){return e.id})).join(","):"show:-1":null}},{key:"layerDefs",get:function(){var e,t=this,n=!(null===(e=this.floors)||void 0===e||!e.length),r=this.visibleSublayers.filter((function(e){return null!=e.definitionExpression||n&&null!=e.floorInfo}));return r.length?JSON.stringify(r.reduce((function(e,n){var r=(0,p.f)(t.floors,n),i=(0,c._)(r,n.definitionExpression);return null!=i&&(e[n.id]=i),e}),{})):null}},{key:"version",get:function(){this.commitProperty("layers"),this.commitProperty("layerDefs"),this.commitProperty("dynamicLayers");var e=this.layer;return e&&(e.commitProperty("dpi"),e.commitProperty("imageFormat"),e.commitProperty("imageTransparency"),e.commitProperty("gdbVersion")),(this._get("version")||0)+1}},{key:"visibleSublayers",get:function(){var e=[];if(!this.layer)return e;var t=this.layer.sublayers,n=this.scale;t&&t.forEach((function t(r){r.visible&&(0===n||(0,y.o2)(n,r.minScale,r.maxScale))&&(r.sublayers?r.sublayers.forEach(t):e.unshift(r))}));var r=this._get("visibleSublayers");return!r||r.length!==e.length||r.some((function(t,n){return e[n]!==t}))?e:r}},{key:"toJSON",value:function(){var e=this.layer,t={dpi:e.dpi,format:e.imageFormat,transparent:e.imageTransparency,gdbVersion:e.gdbVersion||null};return this.hasDynamicLayers&&this.dynamicLayers?t.dynamicLayers=this.dynamicLayers:t=(0,r.Z)((0,r.Z)({},t),{},{layers:this.layers,layerDefs:this.layerDefs}),t}}]),n}(o.default);(0,s._)([(0,m.Cb)({readOnly:!0})],h.prototype,"dynamicLayers",null),(0,s._)([(0,m.Cb)()],h.prototype,"floors",void 0),(0,s._)([(0,m.Cb)({readOnly:!0})],h.prototype,"hasDynamicLayers",null),(0,s._)([(0,m.Cb)()],h.prototype,"layer",null),(0,s._)([(0,m.Cb)({readOnly:!0})],h.prototype,"layers",null),(0,s._)([(0,m.Cb)({readOnly:!0})],h.prototype,"layerDefs",null),(0,s._)([(0,m.Cb)({type:Number})],h.prototype,"scale",void 0),(0,s._)([(0,m.Cb)({readOnly:!0})],h.prototype,"version",null),(0,s._)([(0,m.Cb)({readOnly:!0})],h.prototype,"visibleSublayers",null),h=(0,s._)([(0,f.j)("esri.layers.support.ExportImageParameters")],h)},50863:function(e,t,n){n.d(t,{h:function(){return i}});var r=n(45739);function i(e,t,n){if(null==(null===e||void 0===e?void 0:e.timeInfo))return null;var i=e.datesInUnknownTimezone,a=void 0!==i&&i,l=e.timeOffset,u=e.useViewTime,s=e.timeExtent;a&&(s=(0,r.toLocalTimeExtent)(s));var o=u?t&&s?t.intersection(s):t||s:s;return!o||o.isEmpty||o.isAllTime?o:(l&&(o=o.offset(-l.value,l.unit)),a&&(o=(0,r.toUTCTimeExtent)(o)),o.equals(n)?n:o)}},83217:function(e,t,n){n.d(t,{x:function(){return r}});var r=Symbol("WebScene")},45739:function(e,t,n){n.r(t),n.d(t,{getTimeExtentFromLayers:function(){return Z},getTimeSliderSettingsFromWebDocument:function(){return E},getTimeSliderSettingsFromWebMap:function(){return k},toLocalTimeExtent:function(){return L},toUTCTimeExtent:function(){return C}});var r=n(93433),i=n(37762),a=n(74165),l=n(15861),u=n(62044),s=n(63780),o=n(44927),c=n(84652),m=n(32718),f=n(86710),y=n(38675),p=n(83217);function v(e){return null!=e&&"object"==typeof e&&p.x in e}function d(e){return void 0!==e.timeInfo}function h(e,t){return b.apply(this,arguments)}function b(){return(b=(0,l.Z)((0,a.Z)().mark((function e(t,n){var r,i,l;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null!==(r=null===(i=t.widgets)||void 0===i||null===(l=i.timeSlider)||void 0===l?void 0:l.fullTimeExtent)&&void 0!==r?r:Z(t.allLayers,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){var t,n=null!==(t=e.numThumbs)&&void 0!==t?t:2,r=e.currentTimeExtent;if(r){var i=r.start,a=r.end;return null!=i&&null!=a&&i.getTime()===a.getTime()?"instant":2===n?"time-window":null==i||0===i.getTime()?"cumulative-from-start":"cumulative-from-end"}return 2===n?"time-window":"cumulative-from-start"}function x(e){var t=e.numStops,n=e.stopInterval,r=e.stops;return r?{dates:(0,c.d9)(r)}:n?{interval:n.clone()}:{count:null!==t&&void 0!==t?t:5}}function Z(e,t){return T.apply(this,arguments)}function T(){return T=(0,l.Z)((0,a.Z)().mark((function e(t,n){var o,c,m,f,y,p,v,h,b,g,x,Z,T;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.length){e.next=2;break}return e.abrupt("return",u.Z.allTime);case 2:return e.next=4,Promise.all(t.map((function(e){return e.load({signal:n})})));case 4:if(o=t.filter(d),c=t.filter((function(e){return!d(e)&&null!=e.visibilityTimeExtent})),0!==o.length||0!==c.length){e.next=7;break}return e.abrupt("return",u.Z.allTime);case 7:m=[],f=[],y=(0,i.Z)(o);try{for(y.s();!(p=y.n()).done;)"feature"!==(null===(h=p.value)||void 0===h?void 0:h.type)&&"map-image"!==(null===h||void 0===h?void 0:h.type)||null===(v=h.timeInfo)||void 0===v||!v.hasLiveData?f.push(h):m.push(h)}catch(S){y.e(S)}finally{y.f()}if(b=function(e){return null==e||e.isAllTime},g=[].concat((0,r.Z)(f.map((function(e){var t,n,r=null===(t=e.timeInfo)||void 0===t?void 0:t.fullTimeExtent,i=e.visibilityTimeExtent;return null!==(n=null===r||void 0===r?void 0:r.intersection(i))&&void 0!==n?n:i}))),(0,r.Z)(c.map((function(e){return e.visibilityTimeExtent})))),!g.some(b)){e.next=13;break}return e.abrupt("return",u.Z.allTime);case 13:return x=m.map(function(){var e=(0,l.Z)((0,a.Z)().mark((function e(t){var r,i,l,u,s,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchRecomputedExtents({signal:n});case 2:if(e.t2=i=e.sent,e.t1=null===e.t2,e.t1){e.next=6;break}e.t1=void 0===i;case 6:if(!e.t1){e.next=10;break}e.t3=void 0,e.next=11;break;case 10:e.t3=i.timeExtent;case 11:if(e.t4=r=e.t3,e.t0=null!==e.t4,!e.t0){e.next=15;break}e.t0=void 0!==r;case 15:if(!e.t0){e.next=19;break}e.t5=r,e.next=20;break;case 19:e.t5=null===(l=t.timeInfo)||void 0===l?void 0:l.fullTimeExtent;case 20:return s=e.t5,o=t.visibilityTimeExtent,e.abrupt("return",null!==(u=null===s||void 0===s?void 0:s.intersection(o))&&void 0!==u?u:o);case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=16,Promise.allSettled(x);case 16:if(!(Z=e.sent.map((function(e){return"fulfilled"===e.status?e.value:null}))).some(b)){e.next=19;break}return e.abrupt("return",u.Z.allTime);case 19:if(0!==(T=[].concat((0,r.Z)(Z),(0,r.Z)(g)).filter(s.pC)).length){e.next=22;break}return e.abrupt("return",u.Z.allTime);case 22:return e.abrupt("return",T.reduce((function(e,t){return e.union(t)})));case 23:case"end":return e.stop()}}),e)}))),T.apply(this,arguments)}function S(e,t){var n,r=e.currentTimeExtent;if(!r)return null;var i=r.start,a=r.end,l=null!==(n=null!==i&&void 0!==i?i:a)&&void 0!==n?n:null;switch(t){case"time-window":return new u.Z({start:i,end:a});case"cumulative-from-start":return new u.Z({start:null,end:l});case"cumulative-from-end":return new u.Z({start:l,end:null});case"instant":return new u.Z({start:l,end:l})}}function k(e,t){return w.apply(this,arguments)}function w(){return(w=(0,l.Z)((0,a.Z)().mark((function e(t,n){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,o.XV)(m.Z.getLogger("esri.support.timeUtils.getTimeSliderSettingsFromWebMap"),"`timeUtils.getTimeSliderSettingsFromWebMap` is deprecated in favor of 'timeUtils.getTimeSliderSettingsFromWebDocument'",{replacement:"timeUtils.getTimeSliderSettingsFromWebDocument",version:"4.30",see:"https://developers.arcgis.com/javascript/latest/api-reference/esri-support-timeUtils.html#getTimeSliderSettingsFromWebDocument",warnOnce:!0}),null==t||!(0,y.s)(t)){e.next=7;break}return e.next=4,E(t,n);case 4:e.t0=e.sent,e.next=8;break;case 7:e.t0=null;case 8:return e.abrupt("return",e.t0);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e,t){return _.apply(this,arguments)}function _(){return(_=(0,l.Z)((0,a.Z)().mark((function e(t,n){var r,i,l,u,s,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,y.s)(t)||v(t)){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,t.load({signal:n});case 4:if(l=null===t||void 0===t||null===(r=t.widgets)||void 0===r?void 0:r.timeSlider){e.next=7;break}return e.abrupt("return",null);case 7:return e.next=9,h(t,n);case 9:return u=e.sent,s=l.loop,o=g(l),e.abrupt("return",{fullTimeExtent:u,loop:s,mode:o,playRate:null!==(i=l.stopDelay)&&void 0!==i?i:2e3,stops:x(l),timeExtent:S(l,o)});case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e){if(!e)return e;var t=e.start,n=e.end;return new u.Z({start:null!=t?(0,f.Nm)(t,-t.getTimezoneOffset(),"minutes"):t,end:null!=n?(0,f.Nm)(n,-n.getTimezoneOffset(),"minutes"):n})}function L(e){if(!e)return e;var t=e.start,n=e.end;return new u.Z({start:null!=t?(0,f.Nm)(t,t.getTimezoneOffset(),"minutes"):t,end:null!=n?(0,f.Nm)(n,n.getTimezoneOffset(),"minutes"):n})}},21881:function(e,t,n){n.d(t,{Z:function(){return p}});var r=n(15671),i=n(43144),a=n(88301),l=n(61120),u=n(60136),s=n(29388),o=n(27366),c=n(49861),m=(n(93169),n(32718),n(84936),n(69912)),f=n(44041),y=n(50863),p=function(e){var t=function(e){(0,u.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"initialize",value:function(){this.exportImageParameters=new f.R({layer:this.layer})}},{key:"destroy",value:function(){this.exportImageParameters.destroy(),this.exportImageParameters=null}},{key:"floors",get:function(){var e,t;return null!==(e=null===(t=this.view)||void 0===t?void 0:t.floors)&&void 0!==e?e:null}},{key:"exportImageVersion",get:function(){var e;return null!==(e=this.exportImageParameters)&&void 0!==e&&e.commitProperty("version"),this.commitProperty("timeExtent"),this.commitProperty("floors"),(this._get("exportImageVersion")||0)+1}},{key:"timeExtent",get:function(){var e;return(0,y.h)(this.layer,null===(e=this.view)||void 0===e?void 0:e.timeExtent,this._get("timeExtent"))}},{key:"canResume",value:function(){var e;return!!(0,a.Z)((0,l.Z)(n.prototype),"canResume",this).call(this)&&!(null!==(e=this.timeExtent)&&void 0!==e&&e.isEmpty)}}]),n}(e);return(0,o._)([(0,c.Cb)()],t.prototype,"exportImageParameters",void 0),(0,o._)([(0,c.Cb)({readOnly:!0})],t.prototype,"floors",null),(0,o._)([(0,c.Cb)({readOnly:!0})],t.prototype,"exportImageVersion",null),(0,o._)([(0,c.Cb)()],t.prototype,"layer",void 0),(0,o._)([(0,c.Cb)()],t.prototype,"suspended",void 0),(0,o._)([(0,c.Cb)({readOnly:!0})],t.prototype,"timeExtent",null),t=(0,o._)([(0,m.j)("esri.views.layers.MapImageLayerView")],t)}}}]);
//# sourceMappingURL=21881.7c727f44.chunk.js.map