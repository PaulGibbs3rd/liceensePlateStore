"use strict";(self.webpackChunkreact_training=self.webpackChunkreact_training||[]).push([[62358],{62358:function(e,t,i){i.r(t),i.d(t,{default:function(){return te}});var r=i(74165),n=i(15861),a=i(15671),s=i(43144),o=i(60136),u=i(29388),l=i(27366),c=i(52639),h=i(80987),d=i(42537),p=i(93169),v=i(94172),y=i(49861),f=i(32718),g=(i(84936),i(69912)),m=i(78983),x=i(34930),_=i(65457),b=i(85992),w=i(83978),k=i(1413),Z=i(7138),R=i(66978),C=i(17314),P=i(90110),S=i(33624),V=i(10978),B=i(9229),D=function(e){(0,o.Z)(i,e);var t=(0,u.Z)(i);function i(){var e;return(0,a.Z)(this,i),(e=t.apply(this,arguments)).attached=!1,e.container=new S.W,e.updateRequested=!1,e.type="imagery",e._bitmapView=new P.c,e}return(0,s.Z)(i,[{key:"destroy",value:function(){this.attached&&(this.detach(),this.attached=!1),this.updateRequested=!1}},{key:"updating",get:function(){return!this.attached||this.isUpdating()}},{key:"update",value:function(e){var t=this;this.strategy.update(e).catch((function(e){(0,R.D_)(e)||f.Z.getLogger(t).error(e)}))}},{key:"hitTest",value:function(e){return new c.Z({attributes:{},geometry:e.clone(),layer:this.layer})}},{key:"attach",value:function(){var e=this;this.container.addChild(this._bitmapView);var t=this.layer.version>=10,i=this.layer.version>=10.1?this.layer.imageMaxHeight:2048,r=this.layer.version>=10.1?this.layer.imageMaxWidth:2048;this.strategy=new B.Z({container:this._bitmapView,imageNormalizationSupported:t,imageMaxHeight:i,imageMaxWidth:r,fetchSource:this._fetchImage.bind(this),requestUpdate:function(){return e.requestUpdate()}})}},{key:"detach",value:function(){this.strategy.destroy(),this._bitmapView.removeAllChildren(),this.container.removeAllChildren(),this.updateRequested=!1}},{key:"redraw",value:function(){var e=this;this.strategy.updateExports(function(){var t=(0,n.Z)((0,r.Z)().mark((function t(i){var n,a,s;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((a=i.source)&&!(a instanceof ImageBitmap)){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,e.layer.applyRenderer({extent:a.extent,pixelBlock:null!==(n=a.originalPixelBlock)&&void 0!==n?n:a.pixelBlock});case 5:s=t.sent,a.filter=function(t){return e.layer.pixelFilter?e.layer.applyFilter(t):(0,k.Z)((0,k.Z)({},s),{},{extent:a.extent})};case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){(0,R.D_)(t)||f.Z.getLogger(e).error(t)}))}},{key:"requestUpdate",value:function(){this.updateRequested||(this.updateRequested=!0,this.view.requestUpdate())}},{key:"isUpdating",value:function(){return this.strategy.updating||this.updateRequested}},{key:"getPixelData",value:function(){if(this.updating)return null;var e=this.strategy.bitmaps;if(1===e.length&&e[0].source)return{extent:e[0].source.extent,pixelBlock:e[0].source.originalPixelBlock};if(e.length>1){var t=this.view.extent,i=e.map((function(e){return e.source})).filter((function(e){return e.extent&&e.extent.intersects(t)})).map((function(e){return{extent:e.extent,pixelBlock:e.originalPixelBlock}})),r=(0,C.Kh)(i,t);return null!=r?{extent:r.extent,pixelBlock:r.pixelBlock}:null}return null}},{key:"_fetchImage",value:function(){var e=(0,n.Z)((0,r.Z)().mark((function e(t,i,n,a){var s,o,u,l,c=this;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=a||{}).timeExtent=this.timeExtent,a.requestAsImageElement=!0,a.returnImageBitmap=!0,e.next=3,this.layer.fetchImage(t,i,n,a);case 3:if(!(o=e.sent).imageBitmap){e.next=6;break}return e.abrupt("return",o.imageBitmap);case 6:return e.next=8,this.layer.applyRenderer(o.pixelData,{signal:a.signal});case 8:return u=e.sent,l=new V.Z(u.pixelBlock,null===(s=u.extent)||void 0===s?void 0:s.clone(),o.pixelData.pixelBlock),e.abrupt("return",(l.filter=function(e){return c.layer.applyFilter(e)},l));case 11:case"end":return e.stop()}}),e,this)})));return function(t,i,r,n){return e.apply(this,arguments)}}()}]),i}(Z.default);(0,l._)([(0,y.Cb)()],D.prototype,"attached",void 0),(0,l._)([(0,y.Cb)()],D.prototype,"container",void 0),(0,l._)([(0,y.Cb)()],D.prototype,"layer",void 0),(0,l._)([(0,y.Cb)()],D.prototype,"strategy",void 0),(0,l._)([(0,y.Cb)()],D.prototype,"timeExtent",void 0),(0,l._)([(0,y.Cb)()],D.prototype,"view",void 0),(0,l._)([(0,y.Cb)()],D.prototype,"updateRequested",void 0),(0,l._)([(0,y.Cb)()],D.prototype,"updating",null),(0,l._)([(0,y.Cb)()],D.prototype,"type",void 0);var E=D=(0,l._)([(0,g.j)("esri.views.2d.layers.imagery.ImageryView2D")],D),A=i(76200),I=i(53866),z=i(92975),M=i(80394),q=i(64145),T=i(93433),U=i(88301),F=i(61120),O=i(57874),L=i(80613),H=function(e){(0,o.Z)(i,e);var t=(0,u.Z)(i);function i(){var e;return(0,a.Z)(this,i),(e=t.apply(this,arguments)).symbolTypes=["triangle"],e}return(0,s.Z)(i,[{key:"prepareRenderPasses",value:function(e){var t=this,r=e.registerRenderPass({name:"imagery (vf)",brushes:[O.Z],target:function(){return t.children},drawPhase:L.jx.MAP});return[].concat((0,T.Z)((0,U.Z)((0,F.Z)(i.prototype),"prepareRenderPasses",this).call(this,e)),[r])}},{key:"doRender",value:function(e){var t=this;this.visible&&e.drawPhase===L.jx.MAP&&this.symbolTypes.forEach((function(r){e.renderPass=r,(0,U.Z)((0,F.Z)(i.prototype),"doRender",t).call(t,e)}))}}]),i}(i(86438).Z),j=i(29439),N=i(97326),G=i(60831),W=function(e){(0,o.Z)(i,e);var t=(0,u.Z)(i);function i(e){var r;return(0,a.Z)(this,i),(r=t.call(this,e))._loading=null,r.update=(0,R.Ds)((function(e,t){return r._update(e,t).catch((function(e){(0,R.D_)(e)||f.Z.getLogger((0,N.Z)(r)).error(e)}))})),r}return(0,s.Z)(i,[{key:"updating",get:function(){return!!this._loading}},{key:"redraw",value:function(e){if(this.container.children.length){var t=this.container.children[0];t.symbolizerParameters=e,t.invalidateVAO(),this.container.symbolTypes="wind_speed"===e.style?["scalar","triangle"]:"simple_scalar"===e.style?["scalar"]:["triangle"],this.container.requestRender()}}},{key:"_update",value:function(){var e=(0,n.Z)((0,r.Z)().mark((function e(t,i,n){var a,s,o,u,l,c,h,d;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.stationary){e.next=2;break}return e.abrupt("return");case 2:return a=t.state,s=a.extent,o=a.spatialReference,u=new I.Z({xmin:s.xmin,ymin:s.ymin,xmax:s.xmax,ymax:s.ymax,spatialReference:o}),l=(0,j.Z)(t.state.size,2),c=l[0],h=l[1],this._loading=this.fetchPixels(u,c,h,n),e.next=6,this._loading;case 6:d=e.sent,this._addToDisplay(d,i,t.state),this._loading=null;case 8:case"end":return e.stop()}}),e,this)})));return function(t,i,r){return e.apply(this,arguments)}}()},{key:"_addToDisplay",value:function(e,t,i){if(null==e.pixelBlock)return this.container.children.forEach((function(e){return e.destroy()})),void this.container.removeAllChildren();var r=e.extent,n=e.pixelBlock,a=new G.F(n);a.offset=[0,0],a.symbolizerParameters=t,a.rawPixelData=e,a.invalidateVAO(),a.x=r.xmin,a.y=r.ymax,a.pixelRatio=i.pixelRatio,a.rotation=i.rotation,a.resolution=i.resolution,a.width=n.width*t.symbolTileSize,a.height=n.height*t.symbolTileSize,this.container.children.forEach((function(e){return e.destroy()})),this.container.removeAllChildren(),this.container.symbolTypes="wind_speed"===t.style?["scalar","triangle"]:"simple_scalar"===t.style?["scalar"]:["triangle"],this.container.addChild(a)}}]),i}(Z.default);(0,l._)([(0,y.Cb)()],W.prototype,"fetchPixels",void 0),(0,l._)([(0,y.Cb)()],W.prototype,"container",void 0),(0,l._)([(0,y.Cb)()],W.prototype,"_loading",void 0),(0,l._)([(0,y.Cb)()],W.prototype,"updating",null);var J=W=(0,l._)([(0,g.j)("esri.views.2d.layers.imagery.ImageryVFStrategy")],W),K=function(e){(0,o.Z)(i,e);var t=(0,u.Z)(i);function i(){var e;return(0,a.Z)(this,i),(e=t.apply(this,arguments)).attached=!1,e.container=new H,e.type="imageryVF",e._dataParameters={exportParametersVersion:0,bbox:"",symbolTileSize:0,time:""},e._fetchpixels=function(){var t=(0,n.Z)((0,r.Z)().mark((function t(i,n,a,s){var o,u,l,c,h,d,p,v,y,f,g;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e._projectFullExtentPromise;case 2:if(o=t.sent,u=e.layer.renderer.symbolTileSize,l=(0,q.BH)(i,n,a,u,o),c=l.extent,h=l.width,d=l.height,null==o||o.intersects(i)){t.next=10;break}return t.abrupt("return",{extent:c,pixelBlock:null});case 10:if(p={bbox:"".concat(c.xmin,", ").concat(c.ymin,", ").concat(c.xmax,", ").concat(c.ymax),exportParametersVersion:e.layer.exportImageServiceParameters.version,symbolTileSize:u,time:JSON.stringify(e.timeExtent||"")},!e._canReuseVectorFieldData(p)){t.next=16;break}if(null==(v=e.getPixelData())){t.next=16;break}if("".concat(v.extent.xmin,", ").concat(v.extent.ymin,", ").concat(v.extent.xmax,", ").concat(v.extent.ymax)!==p.bbox){t.next=16;break}return t.abrupt("return",v);case 16:return t.next=18,e.layer.fetchImage(c,h,d,{timeExtent:e.timeExtent,requestAsImageElement:!1,signal:s});case 18:if(y=t.sent,f=y.pixelData,e._dataParameters=p,null!=(g=null===f||void 0===f?void 0:f.pixelBlock)){t.next=24;break}return t.abrupt("return",{extent:c,pixelBlock:null});case 24:return t.abrupt("return",{extent:c,pixelBlock:"vector-uv"===e.layer.rasterInfo.dataType?(0,q.KC)(g,"vector-uv"):g});case 25:case"end":return t.stop()}}),t)})));return function(e,i,r,n){return t.apply(this,arguments)}}(),e}return(0,s.Z)(i,[{key:"updating",get:function(){return!this.attached||this._strategy.updating}},{key:"attach",value:function(){var e=this;this._projectFullExtentPromise=this._getProjectedFullExtent(this.view.spatialReference),this._strategy=new J({container:this.container,fetchPixels:this._fetchpixels}),this.addHandles((0,v.watch)((function(){return e.layer.renderer}),(function(t){return e._updateSymbolizerParams(t)}),v.syncAndInitial),"attach")}},{key:"detach",value:function(){this._strategy.destroy(),this.container.children.forEach((function(e){return e.destroy()})),this.container.removeAllChildren(),this.removeHandles("attach"),this._strategy=this.container=this._projectFullExtentPromise=null}},{key:"getPixelData",value:function(){var e,t=null===(e=this.container.children[0])||void 0===e?void 0:e.rawPixelData;return this.updating||!t?null:{extent:t.extent,pixelBlock:t.pixelBlock}}},{key:"hitTest",value:function(e){return new c.Z({attributes:{},geometry:e.clone(),layer:this.layer})}},{key:"update",value:function(e){var t=this;this._strategy.update(e,this._symbolizerParams).catch((function(e){(0,R.D_)(e)||f.Z.getLogger(t).error(e)}))}},{key:"redraw",value:function(){var e=this.layer.renderer;e&&(this._updateSymbolizerParams(e),this._strategy.redraw(this._symbolizerParams))}},{key:"_canReuseVectorFieldData",value:function(e){var t=this._dataParameters.exportParametersVersion===e.exportParametersVersion,i=this._dataParameters.time===e.time,r=this._dataParameters.symbolTileSize===e.symbolTileSize,n=this._dataParameters.bbox===e.bbox;return t&&i&&r&&n}},{key:"_getProjectedFullExtent",value:function(){var e=(0,n.Z)((0,r.Z)().mark((function e(t){var i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",(0,M.tB)(this.layer.fullExtent,t));case 4:return e.prev=4,e.t0=e.catch(0),e.prev=6,e.next=9,(0,A.Z)(this.layer.url,{query:{option:"footprints",outSR:(0,z.B9)(t),f:"json"}});case 9:return i=e.sent.data.featureCollection.layers[0].layerDefinition.extent,e.abrupt("return",i?I.Z.fromJSON(i):null);case 13:return e.prev=13,e.t1=e.catch(6),e.abrupt("return",null);case 16:case"end":return e.stop()}}),e,this,[[0,4],[6,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateSymbolizerParams",value:function(e){"vector-field"===e.type&&(this._symbolizerParams=this.layer.symbolizer.generateWebGLParameters({pixelBlock:null}))}}]),i}(Z.default);(0,l._)([(0,y.Cb)()],K.prototype,"attached",void 0),(0,l._)([(0,y.Cb)()],K.prototype,"container",void 0),(0,l._)([(0,y.Cb)()],K.prototype,"layer",void 0),(0,l._)([(0,y.Cb)()],K.prototype,"timeExtent",void 0),(0,l._)([(0,y.Cb)()],K.prototype,"type",void 0),(0,l._)([(0,y.Cb)()],K.prototype,"view",void 0),(0,l._)([(0,y.Cb)()],K.prototype,"updating",null);var X=K=(0,l._)([(0,g.j)("esri.views.2d.layers.imagery.VectorFieldView2D")],K),Y=i(1424),Q=i(67581),$=i(13107),ee=function(e){(0,o.Z)(i,e);var t=(0,u.Z)(i);function i(){var e;return(0,a.Z)(this,i),(e=t.apply(this,arguments))._exportImageVersion=-1,e._highlightGraphics=new m.J,e._highlightView=void 0,e.layer=null,e.subview=null,e}return(0,s.Z)(i,[{key:"pixelData",get:function(){var e=this.subview;return this.updating||!e?null:"getPixelData"in e?e.getPixelData():null}},{key:"update",value:function(e){var t;null===(t=this.subview)||void 0===t||t.update(e)}},{key:"attach",value:function(){var e=this;this.layer.increaseRasterJobHandlerUsage(),this._setSubView(),this.view&&(this._highlightView=new b.Z({view:this.view,graphics:this._highlightGraphics,requestUpdateCallback:function(){return e.requestUpdate()},container:new w.Z(this.view.featuresTilingScheme)}),this.container.addChild(this._highlightView.container)),this.addAttachHandles([(0,v.watch)((function(){return e.layer.exportImageServiceParameters.version}),(function(t){t&&e._exportImageVersion!==t&&(e._exportImageVersion=t,e.requestUpdate())}),v.sync),(0,v.watch)((function(){return e.timeExtent}),(function(t){var i=e.subview;i&&(i.timeExtent=t,"redraw"in i?e.requestUpdate():i.redrawOrRefetch())}),v.sync),this.layer.on("redraw",(function(){var t=e.subview;t&&("redraw"in t?t.redraw():t.redrawOrRefetch())})),(0,v.watch)((function(){return e.layer.renderer}),(function(){return e._setSubView()}))])}},{key:"detach",value:function(){var e,t;this.layer.decreaseRasterJobHandlerUsage(),this.container.removeAllChildren(),this._detachSubview(this.subview),null!==(e=this.subview)&&void 0!==e&&e.destroy(),this.subview=null,null!==(t=this._highlightView)&&void 0!==t&&t.destroy(),this._exportImageVersion=-1}},{key:"viewChange",value:function(){}},{key:"moveEnd",value:function(){this.requestUpdate()}},{key:"highlight",value:function(e,t){var i=this;if(!((Array.isArray(e)?e[0]:h.Z.isCollection(e)?e.at(0):e)instanceof c.Z))return(0,d.kB)();var r=[];return Array.isArray(e)||h.Z.isCollection(e)?r=e.map((function(e){return e.clone()})):e instanceof c.Z&&(r=[e.clone()]),this._highlightGraphics.addMany(r),(0,d.kB)((function(){return i._highlightGraphics.removeMany(r)}))}},{key:"doRefresh",value:function(){var e=(0,n.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.requestUpdate();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isUpdating",value:function(){var e,t,i=!this.subview||this.subview.updating||!(null===(e=this._highlightView)||void 0===e||!e.updating);return(0,p.Z)("esri-2d-log-updating")&&console.log("Updating ImageryLayerView2D (".concat(this.layer.id,"): ").concat(i,"\n-> subview ").concat(!this.subview||this.subview.updating,"\n-> higlightView ").concat(null===(t=this._highlightView)||void 0===t?void 0:t.updating,"\n")),i}},{key:"_setSubView",value:function(){var e;if(this.view){var t=null===(e=this.layer.renderer)||void 0===e?void 0:e.type,i="imagery";if("vector-field"===t?i="imageryVF":"flow"===t&&(i="flow"),this.subview){var r,n=this.subview.type;if(n===i)return this._attachSubview(this.subview),void("flow"===n?this.subview.redrawOrRefetch():"imagery"===n&&"lerc"===this.layer.format?this.subview.redraw():this.requestUpdate());this._detachSubview(this.subview),null===(r=this.subview)||void 0===r||r.destroy()}this.subview="imagery"===i?new E({layer:this.layer,view:this.view,timeExtent:this.timeExtent}):"imageryVF"===i?new X({layer:this.layer,view:this.view,timeExtent:this.timeExtent}):new x.Z({layer:this.layer,layerView:this}),this._attachSubview(this.subview),this.requestUpdate()}}},{key:"_attachSubview",value:function(e){e&&!e.attached&&(e.attach(),e.attached=!0,this.container.addChildAt(e.container,0))}},{key:"_detachSubview",value:function(e){(null===e||void 0===e?void 0:e.attached)&&(this.container.removeChild(e.container),e.detach(),e.attached=!1)}}]),i}((0,Y.Z)((0,$.Z)((0,_.y)(Q.Z))));(0,l._)([(0,y.Cb)()],ee.prototype,"pixelData",null),(0,l._)([(0,y.Cb)()],ee.prototype,"subview",void 0);var te=ee=(0,l._)([(0,g.j)("esri.views.2d.layers.ImageryLayerView2D")],ee)},39444:function(e,t,i){i.d(t,{K:function(){return A}});var r=i(37762),n=i(15671),a=i(43144),s=i(88301),o=i(61120),u=i(60136),l=i(29388),c=i(92026),h=i(58880),d=i(80613),p=i(97890),v=i(93560),y=i(66759),f=0;function g(e,t){return new p.G((0,y.W)(f++),e,t)}var m={visualVariableColor:null,visualVariableOpacity:null,visualVariableSizeMinMaxValue:null,visualVariableSizeScaleStops:null,visualVariableSizeStops:null,visualVariableSizeUnitValue:null,visualVariableRotation:null,visualVariableSizeOutlineScaleStops:null},x=function(){function e(){(0,n.Z)(this,e),this.instances={fill:g(v.k2.fill,{uniforms:m,optionalAttributes:{zoomRange:!0}}),marker:g(v.k2.marker,{uniforms:m,optionalAttributes:{zoomRange:!0}}),line:g(v.k2.line,{uniforms:m,optionalAttributes:{zoomRange:!0}}),text:g(v.k2.text,{uniforms:m,optionalAttributes:{zoomRange:!0,referenceSymbol:!1,clipAngle:!1}}),complexFill:g(v.k2.complexFill,{uniforms:m,optionalAttributes:{zoomRange:!0}}),texturedLine:g(v.k2.texturedLine,{uniforms:m,optionalAttributes:{zoomRange:!0}})},this._instancesById=Object.values(this.instances).reduce((function(e,t){return e.set(t.instanceId,t),e}),new Map)}return(0,a.Z)(e,[{key:"getInstance",value:function(e){return this._instancesById.get(e)}}]),e}(),_=i(29303),b=i(8768),w=i(30932),k=i(93311),Z=i(91340),R=i(87422),C=i(84319),P=i(44070),S=i(8548),V=i(45412),B=Math.PI/180,D=function(e){(0,u.Z)(i,e);var t=(0,l.Z)(i);function i(e){var r;return(0,n.Z)(this,i),(r=t.call(this))._program=null,r._vao=null,r._vertexBuffer=null,r._indexBuffer=null,r._dvsMat3=(0,b.Ue)(),r._localOrigin={x:0,y:0},r._getBounds=e,r}return(0,a.Z)(i,[{key:"destroy",value:function(){this._vao&&(this._vao.dispose(),this._vao=null,this._vertexBuffer=null,this._indexBuffer=null),this._program=(0,c.M2)(this._program)}},{key:"doRender",value:function(e){var t=e.context,i=this._getBounds();if(!(i.length<1)){this._createShaderProgram(t),this._updateMatricesAndLocalOrigin(e),this._updateBufferData(t,i),t.setBlendingEnabled(!0),t.setDepthTestEnabled(!1),t.setStencilWriteMask(0),t.setStencilTestEnabled(!1),t.setBlendFunction(S.zi.ONE,S.zi.ONE_MINUS_SRC_ALPHA),t.setColorMask(!0,!0,!0,!0);var r=this._program;t.bindVAO(this._vao),t.useProgram(r),r.setUniformMatrix3fv("u_dvsMat3",this._dvsMat3),t.gl.lineWidth(1),t.drawElements(S.MX.LINES,8*i.length,S.g.UNSIGNED_INT,0),t.bindVAO()}}},{key:"_createTransforms",value:function(){return{displayViewScreenMat3:(0,b.Ue)()}}},{key:"_createShaderProgram",value:function(e){if(!this._program){this._program=e.programCache.acquire("precision highp float;\n        uniform mat3 u_dvsMat3;\n\n        attribute vec2 a_position;\n\n        void main() {\n          mediump vec3 pos = u_dvsMat3 * vec3(a_position, 1.0);\n          gl_Position = vec4(pos.xy, 0.0, 1.0);\n        }","precision mediump float;\n      void main() {\n        gl_FragColor = vec4(0.75, 0.0, 0.0, 0.75);\n      }",E().attributes)}}},{key:"_updateMatricesAndLocalOrigin",value:function(e){var t=e.state,i=t.displayMat3,r=t.size,n=t.resolution,a=t.pixelRatio,s=t.rotation,o=t.viewpoint,u=B*s,l=o.targetGeometry,c=l.x,h=l.y,d=(0,Z.or)(c,t.spatialReference);this._localOrigin.x=d,this._localOrigin.y=h;var p=a*r[0],v=a*r[1],y=n*p,f=n*v,g=(0,_.yR)(this._dvsMat3);(0,_.Jp)(g,g,i),(0,_.Iu)(g,g,(0,w.al)(p/2,v/2)),(0,_.bA)(g,g,(0,k.al)(r[0]/y,-v/f,1)),(0,_.U1)(g,g,-u)}},{key:"_updateBufferData",value:function(e,t){var i,n=this._localOrigin,a=n.x,s=n.y,o=8*t.length,u=new Float32Array(o),l=new Uint32Array(8*t.length),c=0,h=0,d=(0,r.Z)(t);try{for(d.s();!(i=d.n()).done;){var p=i.value;p&&(u[2*c]=p[0]-a,u[2*c+1]=p[1]-s,u[2*c+2]=p[0]-a,u[2*c+3]=p[3]-s,u[2*c+4]=p[2]-a,u[2*c+5]=p[3]-s,u[2*c+6]=p[2]-a,u[2*c+7]=p[1]-s,l[h]=c+0,l[h+1]=c+3,l[h+2]=c+3,l[h+3]=c+2,l[h+4]=c+2,l[h+5]=c+1,l[h+6]=c+1,l[h+7]=c+0,c+=4,h+=8)}}catch(y){d.e(y)}finally{d.f()}if(this._vertexBuffer?this._vertexBuffer.setData(u.buffer):this._vertexBuffer=P.f.createVertex(e,S.l1.DYNAMIC_DRAW,u.buffer),this._indexBuffer?this._indexBuffer.setData(l):this._indexBuffer=P.f.createIndex(e,S.l1.DYNAMIC_DRAW,l),!this._vao){var v=E();this._vao=new V.U(e,v.attributes,v.bufferLayouts,{geometry:this._vertexBuffer},this._indexBuffer)}}}]),i}(R.s),E=function(){return(0,C.cM)("bounds",{geometry:[{location:0,name:"a_position",count:2,type:S.g.FLOAT}]})},A=function(e){(0,u.Z)(i,e);var t=(0,l.Z)(i);function i(e){var r;return(0,n.Z)(this,i),(r=t.call(this,e))._instanceStore=new x,r.checkHighlight=function(){return!0},r}return(0,a.Z)(i,[{key:"destroy",value:function(){(0,s.Z)((0,o.Z)(i.prototype),"destroy",this).call(this),this._boundsRenderer=(0,c.SC)(this._boundsRenderer)}},{key:"instanceStore",get:function(){return this._instanceStore}},{key:"enableRenderingBounds",value:function(e){this._boundsRenderer=new D(e),this.requestRender()}},{key:"hasHighlight",get:function(){return this.checkHighlight()}},{key:"onTileData",value:function(e,t){e.onMessage(t),this.contains(e)||this.addChild(e),this.requestRender()}},{key:"_renderChildren",value:function(e,t){e.selection=t;var i,n=(0,r.Z)(this.children);try{for(n.s();!(i=n.n()).done;){var a=i.value;if(a.visible){var s=a.getDisplayList(this._instanceStore,d.gl.STRICT_ORDER);null===s||void 0===s||s.render(e)}}}catch(o){n.e(o)}finally{n.f()}}}]),i}(h.b)},83978:function(e,t,i){i.d(t,{Z:function(){return y}});var r=i(15671),n=i(43144),a=i(88301),s=i(61120),o=i(60136),u=i(29388),l=i(27366),c=(i(32718),i(93169),i(84936),i(10064),i(69912)),h=i(80613),d=i(39444),p=i(39594),v=function(e){(0,o.Z)(i,e);var t=(0,u.Z)(i);function i(){return(0,r.Z)(this,i),t.apply(this,arguments)}return(0,n.Z)(i,[{key:"hasHighlight",get:function(){return this.children.some((function(e){return e.hasData}))}},{key:"renderChildren",value:function(e){var t=this;this.attributeView.update(),e.drawPhase===h.jx.HIGHLIGHT&&this.children.some((function(e){return e.hasData}))&&((0,a.Z)((0,s.Z)(i.prototype),"renderChildren",this).call(this,e),e.context.setColorMask(!0,!0,!0,!0),(0,p.P9)(e,!0,(function(e){t._renderChildren(e,h.Xq.All)})))}}]),i}(d.K),y=v=(0,l._)([(0,c.j)("esri.views.2d.layers.graphics.HighlightGraphicContainer")],v)},1424:function(e,t,i){i.d(t,{Z:function(){return _}});var r=i(74165),n=i(15861),a=i(15671),s=i(43144),o=i(88301),u=i(61120),l=i(60136),c=i(29388),h=i(27366),d=i(10064),p=i(66978),v=i(49861),y=(i(93169),i(32718),i(84936),i(69912)),f=i(848),g=i(50863),m=i(21149),x=i(24405),_=function(e){var t=function(e){(0,l.Z)(i,e);var t=(0,c.Z)(i);function i(){var e;return(0,a.Z)(this,i),(e=t.apply(this,arguments)).view=null,e}return(0,s.Z)(i,[{key:"timeExtent",get:function(){var e;return(0,g.h)(this.layer,null===(e=this.view)||void 0===e?void 0:e.timeExtent,this._get("timeExtent"))}},{key:"fetchPopupFeaturesAtLocation",value:function(){var e=(0,n.Z)((0,r.Z)().mark((function e(t,i){var n,a,s,o,u,l,c,h,v,y,g,_,b;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.layer,t){e.next=3;break}throw new d.Z("imagerylayerview:fetchPopupFeatures","Nothing to fetch without area",{layer:n});case 3:if(a=n.popupEnabled,s=(0,x.V5)(n,i),a&&null!=s){e.next=6;break}return e.abrupt("return",[]);case 6:return e.next=8,s.getRequiredFields();case 8:return o=e.sent,(0,p.k_)(i),(u=new m.Z).timeExtent=this.timeExtent,u.geometry=t,u.outFields=o,u.outSpatialReference=t.spatialReference,l=this.view,c=l.resolution,h=l.spatialReference,v="2d"===this.view.type?new f.Z(c,c,h):new f.Z(.5*c,.5*c,h),y=s.layerOptions||{returnTopmostRaster:!0,showNoDataRecords:!1},g=y.returnTopmostRaster,_=y.showNoDataRecords,b={returnDomainValues:!0,returnTopmostRaster:g,pixelSize:v,showNoDataRecords:_,signal:null===i||void 0===i?void 0:i.signal},e.abrupt("return",n.queryVisibleRasters(u,b).then((function(e){return e})));case 14:case"end":return e.stop()}}),e,this)})));return function(t,i){return e.apply(this,arguments)}}()},{key:"canResume",value:function(){var e;return!!(0,o.Z)((0,u.Z)(i.prototype),"canResume",this).call(this)&&!(null!==(e=this.timeExtent)&&void 0!==e&&e.isEmpty)}}]),i}(e);return(0,h._)([(0,v.Cb)()],t.prototype,"layer",void 0),(0,h._)([(0,v.Cb)()],t.prototype,"suspended",void 0),(0,h._)([(0,v.Cb)({readOnly:!0})],t.prototype,"timeExtent",null),(0,h._)([(0,v.Cb)()],t.prototype,"view",void 0),t=(0,h._)([(0,y.j)("esri.views.layers.ImageryLayerView")],t)}}}]);
//# sourceMappingURL=62358.af247839.chunk.js.map