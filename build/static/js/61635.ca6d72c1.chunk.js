"use strict";(self.webpackChunkreact_training=self.webpackChunkreact_training||[]).push([[61635,87960],{24191:function(e,t,n){function i(e,t){this.v=e,this.k=t}n.d(t,{Z:function(){return i}})},16296:function(e,t,n){function i(e){var t,n,i,o=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,i=Symbol.iterator);o--;){if(n&&null!=(t=e[n]))return t.call(e);if(i&&null!=(t=e[i]))return new r(t.call(e));n="@@asyncIterator",i="@@iterator"}throw new TypeError("Object is not async iterable")}function r(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:t}}))}return r=function(e){this.s=e,this.n=e.next},r.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new r(e)}n.d(t,{Z:function(){return i}})},26420:function(e,t,n){n.d(t,{Z:function(){return r}});var i=n(24191);function r(e){return new i.Z(e,0)}},50608:function(e,t,n){n.d(t,{Z:function(){return o}});var i=n(24191);function r(e){var t,n;function r(t,n){try{var a=e[t](n),l=a.value,s=l instanceof i.Z;Promise.resolve(s?l.v:l).then((function(n){if(s){var i="return"===t?"return":"next";if(!l.k||n.done)return r(i,n);n=e[i](n).value}o(a.done?"return":"normal",n)}),(function(e){r("throw",e)}))}catch(u){o("throw",u)}}function o(e,i){switch(e){case"return":t.resolve({value:i,done:!0});break;case"throw":t.reject(i);break;default:t.resolve({value:i,done:!1})}(t=t.next)?r(t.key,t.arg):n=null}this._invoke=function(e,i){return new Promise((function(o,a){var l={key:e,arg:i,resolve:o,reject:a,next:null};n?n=n.next=l:(t=n=l,r(e,i))}))},"function"!=typeof e.return&&(this.return=void 0)}function o(e){return function(){return new r(e.apply(this,arguments))}}r.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},r.prototype.next=function(e){return this._invoke("next",e)},r.prototype.throw=function(e){return this._invoke("throw",e)},r.prototype.return=function(e){return this._invoke("return",e)}},62565:function(e,t,n){n.d(t,{Z:function(){return V}});var i,r=n(74165),o=n(15861),a=n(1413),l=n(37762),s=n(15671),u=n(43144),c=n(97326),d=n(88301),h=n(61120),p=n(60136),v=n(29388),f=n(27366),y=n(51995),_=n(80987),g=n(60354),m=n(41644),b=n(10064),k=n(46784),C=n(84652),w=n(54472),Z=n(93002),S=n(32718),x=n(92026),E=n(66978),P=n(49861),I=n(25243),D=n(69912),M=n(31201),R=(n(93169),n(84936),n(27135)),L=i=function(e){(0,p.Z)(n,e);var t=(0,v.Z)(n);function n(e){var i;return(0,s.Z)(this,n),(i=t.call(this,e)).type="none",i}return(0,u.Z)(n,[{key:"clone",value:function(){return new i({type:this.type})}}]),n}(k.wq);(0,f._)([(0,R.J)({none:"none",stayAbove:"stay-above"})],L.prototype,"type",void 0),L=i=(0,f._)([(0,D.j)("esri.ground.NavigationConstraint")],L);var U,T=n(81219),O=U=function(e){(0,p.Z)(i,e);var t=(0,v.Z)(i);function i(e){var n;(0,s.Z)(this,i),(n=t.call(this,e)).opacity=1,n.surfaceColor=null,n.navigationConstraint=null,n.layers=new _.Z;return n.addHandles([n.layers.on("after-add",(function(e){return function(e){e.parent&&e.parent!==(0,c.Z)(n)&&"remove"in e.parent&&e.parent.remove(e),e.parent=(0,c.Z)(n),"elevation"!==e.type&&"base-elevation"!==e.type&&S.Z.getLogger((0,c.Z)(n)).error("Layer '".concat(e.title,", id:").concat(e.id,"' of type '").concat(e.type,"' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported."))}(e.item)})),n.layers.on("after-remove",(function(e){return function(e){e.parent=null}(e.item)}))]),n}return(0,u.Z)(i,[{key:"initialize",value:function(){var e=this;this.when().catch((function(t){(0,E.D_)(t)||S.Z.getLogger(e).error("#load()","Failed to load ground",t)})),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}},{key:"destroy",value:function(){var e,t=this.layers.removeAll(),n=(0,l.Z)(t);try{for(n.s();!(e=n.n()).done;){var i=e.value;(0,x.SC)(i)}}catch(r){n.e(r)}finally{n.f()}this.layers.destroy()}},{key:"normalizeCtorArgs",value:function(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e=(0,a.Z)({},e)).resourceInfo),e}},{key:"layers",set:function(e){this._set("layers",(0,g.Z)(e,this._get("layers")))}},{key:"writeLayers",value:function(e,t,n,i){var r=[];e?(i=(0,a.Z)((0,a.Z)({},i),{},{layerContainerType:"ground"}),e.forEach((function(e){var t;if("write"in e){var n={};(0,m.sM)(e)().write(n,i)&&r.push(n)}else(null===(t=i)||void 0===t?void 0:t.messages)&&i.messages.push(new b.Z("layer:unsupported","Layers (".concat(e.title,", ").concat(e.id,") of type '").concat(e.declaredClass,"' cannot be persisted in the ground"),{layer:e}))})),t.layers=r):t.layers=r}},{key:"load",value:function(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}},{key:"loadAll",value:function(){var e=this;return(0,Z.G)(this,(function(t){t(e.layers)}))}},{key:"queryElevation",value:function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t,i){var o,a,l,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load({signal:null===i||void 0===i?void 0:i.signal});case 2:return e.next=4,Promise.all([n.e(77043),n.e(87960)]).then(n.bind(n,77043));case 4:return o=e.sent,a=o.ElevationQuery,(0,E.k_)(i),l=new a,s=this.layers.filter(A).toArray(),e.abrupt("return",l.queryAll(s,t,i));case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createElevationSampler",value:function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t,i){var o,a,l,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load({signal:null===i||void 0===i?void 0:i.signal});case 2:return e.next=4,Promise.all([n.e(77043),n.e(87960)]).then(n.bind(n,77043));case 4:return o=e.sent,a=o.ElevationQuery,(0,E.k_)(i),l=new a,s=this.layers.filter(A).toArray(),e.abrupt("return",l.createSamplerAll(s,t,i));case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"clone",value:function(){var e={opacity:this.opacity,surfaceColor:(0,C.d9)(this.surfaceColor),navigationConstraint:(0,C.d9)(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(e.loadStatus="loaded"),new U({resourceInfo:this.resourceInfo}).set(e)}},{key:"read",value:function(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),(0,d.Z)((0,h.Z)(i.prototype),"read",this).call(this,e,t)}},{key:"_loadFromSource",value:function(e){var t=this.resourceInfo;return t?this._loadLayersFromJSON(t.data,t.context,e):Promise.resolve()}},{key:"_loadLayersFromJSON",value:function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t,i,o){var a,l,s,u,c,d,h;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(null===i||void 0===i?void 0:i.origin)||"web-scene",l=(null===i||void 0===i?void 0:i.portal)||null,s=(null===i||void 0===i?void 0:i.url)||null,e.next=5,Promise.all([n.e(46727),n.e(43139),n.e(20519)]).then(n.bind(n,20519));case 5:return u=e.sent,c=u.populateOperationalLayers,(0,E.k_)(o),d=[],t.layers&&Array.isArray(t.layers)&&(h={context:{origin:a,url:s,portal:l,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"},d.push(c(this.layers,t.layers,h))),e.next=12,Promise.allSettled(d);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n,i){return e.apply(this,arguments)}}()}]),i}((0,k.eC)(w.Z));function A(e){return"elevation"===e.type||function(e){return e&&"createElevationSampler"in e}(e)}(0,f._)([(0,P.Cb)({json:{read:!1}})],O.prototype,"layers",null),(0,f._)([(0,M.c)("layers")],O.prototype,"writeLayers",null),(0,f._)([(0,P.Cb)({readOnly:!0})],O.prototype,"resourceInfo",void 0),(0,f._)([(0,P.Cb)({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:I.z8,read:{reader:T.b,source:"transparency"},write:{writer:function(e,t){t.transparency=(0,T.a)(e)},target:"transparency"}}})],O.prototype,"opacity",void 0),(0,f._)([(0,P.Cb)({type:y.Z,json:{type:[I.z8],write:function(e,t){t.surfaceColor=e.toJSON().slice(0,3)}}})],O.prototype,"surfaceColor",void 0),(0,f._)([(0,P.Cb)({type:L,json:{write:!0}})],O.prototype,"navigationConstraint",void 0);var V=O=U=(0,f._)([(0,D.j)("esri.Ground")],O)},70116:function(e,t,n){var i;n.d(t,{Y:function(){return i}}),function(e){e[e.KILOBYTES=1024]="KILOBYTES",e[e.MEGABYTES=1048576]="MEGABYTES",e[e.GIGABYTES=1073741824]="GIGABYTES"}(i||(i={}))},18442:function(e,t,n){n.d(t,{Z:function(){return l}});var i=n(15671),r=n(43144),o=n(39052),a=n(56885),l=function(e,t){function n(e){(0,i.Z)(this,n),this._observable=new a.s,this._map=new Map(e)}return(0,r.Z)(n,[{key:"size",get:function(){return(0,o.it)(this._observable),this._map.size}},{key:"clear",value:function(){this._map.size>0&&(this._map.clear(),this._observable.notify())}},{key:"delete",value:function(e){var t=this._map.delete(e);return t&&this._observable.notify(),t}},{key:"entries",value:function(){return(0,o.it)(this._observable),this._map.entries()}},{key:"forEach",value:function(e,t){var n=this;(0,o.it)(this._observable),this._map.forEach((function(i,r){return e.call(t,i,r,n)}),t)}},{key:"get",value:function(e){return(0,o.it)(this._observable),this._map.get(e)}},{key:"has",value:function(e){return(0,o.it)(this._observable),this._map.has(e)}},{key:"keys",value:function(){return(0,o.it)(this._observable),this._map.keys()}},{key:"set",value:function(e,t){return this._map.set(e,t),this._observable.notify(),this}},{key:"values",value:function(){return(0,o.it)(this._observable),this._map.values()}},{key:e,value:function(){return(0,o.it)(this._observable),this._map[Symbol.iterator]()}},{key:t,get:function(){return this._map[Symbol.toStringTag]}}]),n}(Symbol.iterator,Symbol.toStringTag)},93002:function(e,t,n){n.d(t,{G:function(){return u},w:function(){return d}});var i=n(93433),r=n(74165),o=n(15861),a=n(14921),l=n(80987),s=n(54472);function u(e,t){return c.apply(this,arguments)}function c(){return(c=(0,o.Z)((0,r.Z)().mark((function e(t,n){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.load();case 2:return e.abrupt("return",d(t,n));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(e,t){return h.apply(this,arguments)}function h(){return h=(0,o.Z)((0,r.Z)().mark((function e(t,n){var u,c,d;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=[],c=function e(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var o=0,a=n;o<a.length;o++){var c=a[o];null!=c&&(Array.isArray(c)?e.apply(void 0,(0,i.Z)(c)):l.Z.isCollection(c)?c.forEach((function(t){return e(t)})):s.Z.isLoadable(c)&&u.push(c))}},n(c),d=null,e.next=5,(0,a.UI)(u,function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.q6)(p(t)?t.loadAll():t.load());case 2:!1!==(n=e.sent).ok||d||(d=n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 5:if(!d){e.next=7;break}throw d.error;case 7:return e.abrupt("return",t);case 8:case"end":return e.stop()}}),e)}))),h.apply(this,arguments)}function p(e){return"loadAll"in e&&"function"==typeof e.loadAll}},14916:function(e,t,n){function i(e,t,n,i){var r=null,o=1e3;"number"==typeof t?(o=t,i=n):(r=null!==t&&void 0!==t?t:null,o=n);var a,l=0,s=function(){l=0,e.apply(i,a)},u=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r&&r.apply(i,t),a=t,o?l||(l=setTimeout(s,o)):s()};return u.remove=function(){l&&(clearTimeout(l),l=0)},u.forceUpdate=function(){l&&(clearTimeout(l),s())},u.hasPendingUpdates=function(){return!!l},u}n.d(t,{P:function(){return i}})},5163:function(e,t,n){n.d(t,{L4:function(){return Z},LO:function(){return h},Qv:function(){return c},Rd:function(){return p},Ud:function(){return _},VG:function(){return d},Wv:function(){return f},Zv:function(){return m},_o:function(){return S},aC:function(){return b},h9:function(){return y},ld:function(){return k},mg:function(){return v},q6:function(){return g},sS:function(){return I},yc:function(){return C}});var i=n(70116),r=n(17768),o=n(16889),a=n(47898),l=n(643),s=n(68860),u=n(6291);function c(e,t,n){return e.units[t][n]}function d(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr";return"".concat((0,u.uf)(t,{minimumFractionDigits:i,maximumFractionDigits:i,signDisplay:t>0?"never":"exceptZero"})," ").concat(c(e,n,r))}function h(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr";return"".concat((0,u.uf)(t,{minimumFractionDigits:i,maximumFractionDigits:i,signDisplay:"exceptZero"})," ").concat(c(e,n,r))}function p(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr",o=(0,s.Y8)(t,n);return d(e,(0,s.En)(t,n,o),o,i,r)}function v(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr",o=(0,s.Y8)(t,n);return h(e,(0,s.En)(t,n,o),o,i,r)}function f(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr",o=(0,s.Dw)(t,n);return d(e,(0,s.En)(t,n,o),o,i,r)}function y(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr",o=(0,s.Dw)(t,n);return h(e,(0,s.En)(t,n,o),o,i,r)}function _(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr",o=(0,s.Q7)(t,n);return d(e,(0,s.En)(t,n,o),o,i,r)}function g(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr",o=(0,s.Q7)(t,n);return h(e,(0,s.En)(t,n,o),o,i,r)}function m(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr",o=(0,s.jl)(t,n);return d(e,(0,s.En)(t,n,o),o,i,r)}function b(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr",o=(0,s.jl)(t,n);return h(e,(0,s.En)(t,n,o),o,i,r)}function k(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr",o=(0,s.ZI)(t,n);return d(e,(0,s.En)(t,n,o),o,i,r)}function C(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr",o=(0,s.LV)(t,n);return d(e,(0,s.En)(t,n,o),o,i,r)}var w=function(e,t){return{style:"unit",unitDisplay:"narrow",unit:"degree",maximumFractionDigits:t,minimumFractionDigits:t,signDisplay:e>0?"never":"exceptZero"}};function Z(e,t,n,i,o){var l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:r.BV,c=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],d=l.normalize((0,a.hw)((0,s.En)(e,t,"degrees"),n,i),0,c),h=w(d,null!==o&&void 0!==o?o:2);return d=E(d,h),(0,u.uf)(d,h)}function S(e,t,n,i,r){var o;n!==i&&(e=-e);var a={style:"unit",unitDisplay:"narrow",unit:"degree",maximumFractionDigits:r=null!==(o=r)&&void 0!==o?o:2,minimumFractionDigits:r,signDisplay:"exceptZero"},l=(0,s.En)(e,t,"degrees")%360;return l=E(l,a),(0,u.uf)(l,a)}var x=new Map;function E(e,t){var n=JSON.stringify(t),i=x.get(n);return i||(i=new Intl.NumberFormat("en-US",t),x.set(n,i)),/^[-+]?360\.?0*\xb0?$/.test(i.format(e))?0:e}var P=["B","kB","MB","GB","TB"];function I(e,t){var n=0===(t=Math.round(t))?0:Math.floor(Math.log(t)/Math.log(i.Y.KILOBYTES));n=(0,o.uZ)(n,0,P.length-1);var r=(0,u.uf)(t/Math.pow(i.Y.KILOBYTES,n),{maximumFractionDigits:2});return(0,l.gx)(e.units.bytes[P[n]],{fileSize:r})}},28970:function(e,t,n){n.d(t,{d:function(){return i}});var i="OBJECTID"},22689:function(e,t,n){n.d(t,{b:function(){return o}});var i=n(15671),r=n(43144),o=function(){function e(t){(0,i.Z)(this,e),this._store=t}return(0,r.Z)(e,[{key:"destroy",value:function(){this._store.destroy()}},{key:"get",value:function(e){return this._store.get(e)}},{key:"put",value:function(e,t){this._store.put(e,t,t.values.byteLength+256)}}]),e}()},87960:function(e,t,n){n.d(t,{f:function(){return o}});var i=n(43144),r=n(15671),o=(0,i.Z)((function e(t,n,i,o){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;(0,r.Z)(this,e),this.id=t,this.level=n,this.row=i,this.col=o,this.extent=a}))},77671:function(e,t,n){n.d(t,{Y:function(){return r}});var i=n(74177),r={readOnly:!0,get:function(){return(0,i.R)(this.view)}}},74177:function(e,t,n){n.d(t,{R:function(){return o}});var i=n(68860),r=n(7575);function o(e){var t,n,o,a,l,s="metric";if(null==e)return s;var u=e.map,c=null!==(t=u&&"portalItem"in u?null===(n=u.portalItem)||void 0===n?void 0:n.portal:null)&&void 0!==t?t:r.Z.getDefault();switch(null!==(o=null===(a=c.user)||void 0===a?void 0:a.units)&&void 0!==o?o:c.units){case s:return s;case"english":return"imperial"}return null!==(l=(0,i.yT)(e.spatialReference))&&void 0!==l?l:s}},85312:function(e,t,n){n.d(t,{A8:function(){return y},AK:function(){return c},BF:function(){return _},DI:function(){return p},GS:function(){return f},a8:function(){return d},f9:function(){return h},lt:function(){return v}});var i=n(43144),r=n(15671),o=n(60136),a=n(29388),l=n(54463),s=n(55848),u=n(22178),c=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(e,i,o,a){var l;return(0,r.Z)(this,n),(l=t.call(this,i,o)).point=e,l.createGraphic=a,l}return(0,i.Z)(n)}(s.Dx);function d(e){return(0,u.nn)(e)&&e.intersector===l.q7.PCL&&!!e.target}var h=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(e,i,o,a,l){var s;return(0,r.Z)(this,n),(s=t.call(this,e)).layerUid=e,s.sublayerUid=i,s.nodeIndex=o,s.componentIndex=a,s.triangleNr=l,s}return(0,i.Z)(n)}(s.Zh),p=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(e,i,o){var a;return(0,r.Z)(this,n),(a=t.call(this,i,null)).point=e,a.createVoxelGraphic=o,a}return(0,i.Z)(n)}(s.Dx),v=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(e,i){var o;return(0,r.Z)(this,n),(o=t.call(this,e,null)).createTiles3DGraphic=i,o}return(0,i.Z)(n)}(s.Dx);function f(e){return(0,u.nn)(e)&&e.intersector===l.q7.I3S&&!!e.target}function y(e){return(0,u.nn)(e)&&e.intersector===l.q7.VOXEL&&!!e.target}function _(e){return(0,u.nn)(e)&&e.intersector===l.q7.TILES3D&&!!e.target}},9985:function(e,t,n){n.d(t,{K0:function(){return M},qL:function(){return S},us:function(){return R},wX:function(){return w}});var i=n(74165),r=n(1413),o=n(37762),a=n(15861),l=(n(59486),n(52639)),s=n(83704),u=n(17842),c=n(12400),d=n(5986),h=n(28970),p=n(37933),v=n(94463),f=n(77648),y=n(88153),_=n(54463),g=n(22178),m=n(41781),b=n(76783),k=n(78952),C=n(848);function w(e,t,n,i){return Z.apply(this,arguments)}function Z(){return(Z=(0,a.Z)((0,i.Z)().mark((function e(t,n,r,o){var a,l,s,c,d,h,f,b;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r?R(t,r):o,l=(0,u.s1)(n.x,n.y),a.requiresGroundFeedback=!0,a.enableDraped=!0,(s=(0,y.Z8)(t.state.viewingMode)).options.selectionMode=!0,s.options.store=_.eC.ALL,t.sceneIntersectionHelper.intersectIntersectorScreen(l,s,a),c=x(t,s.results.all,a.graphics),d=s.results.ground,h=(0,m.J4)(d,t),f=null!=h&&"type"in h&&(0,p.nx)(h.type)?h:null,b={screenPoint:n,results:c,ground:{mapPoint:E(t,d),distance:(0,g.nn)(d)?d.distanceInRenderSpace:0,layer:f}},e.abrupt("return",(v.h.SCENEVIEW_HITTEST_RETURN_INTERSECTOR&&(b.intersector=s),b));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e,t,n,i){var r,a,l,s,c,d=n?R(e,n):i,h=!((null===(r=d.graphics)||void 0===r||!r.include)&&(null===(a=d.graphics)||void 0===a||!a.exclude)),p=!((null===(l=d.mediaElements)||void 0===l||!l.include)&&(null===(s=d.mediaElements)||void 0===s||!s.exclude)),v=(0,u.md)(t);d.enableDraped=d.include&&!d.include.has(b.xX)||(null===(c=d.exclude)||void 0===c?void 0:c.has(b.xX));var f=e.sceneIntersectionHelper,g=(0,y.Z8)(e.state.viewingMode);if(g.options.selectionMode=!0,g.options.store=h||p?_.eC.ALL:_.eC.MIN,g.options.hud=!(null!==n&&void 0!==n&&n.excludeHud),f.intersectIntersectorScreen(v,g,d),h||p){var k,C=(0,o.Z)(g.results.all);try{for(C.s();!(k=C.n()).done;){var w=k.value,Z=(0,m.bK)(w,e);if(null==Z)return E(e,w);if(h&&("graphic"!==Z.type||I(d.graphics,Z.graphic)))return E(e,w);if(p&&("media"!==Z.type||D(d.mediaElements,Z.element)))return E(e,w)}}catch(S){C.e(S)}finally{C.f()}return null}return E(e,g.results.min)}function x(e,t,n){for(var i=new Array,o=null,a=0;a<t.length;a++){var l=t[a],s=(0,m.J4)(l,e);if(null!=s&&(s===e.map.ground||"type"in s&&(0,p.nx)(s.type)))break;var u=(0,m.bK)(l,e);if(null!=u){if("graphic"===u.type){if(null==o&&a!==t.length-1&&(o=new Set),null!=o){var c=P(u.graphic);if(o.has(c))continue;o.add(c)}if(!I(n,u.graphic))continue}var d=E(e,l),h=l.distanceInRenderSpace;if("media"===u.type){var v=u.element.toSource(d);i.push((0,r.Z)((0,r.Z)({},u),{},{mapPoint:d,distance:h,sourcePoint:v}))}else i.push((0,r.Z)((0,r.Z)({},u),{},{mapPoint:d,distance:h}))}}return i}function E(e,t,n){var i;return t.getIntersectionPoint(B)?(n=M(e,B,n),t.intersector===_.q7.TERRAIN&&e.basemapTerrain&&(n.z=null!==(i=(0,f.KO)(e.basemapTerrain,n))&&void 0!==i?i:0),n):null}function P(e){var t=e.sourceLayer,n=e.layer,i=t&&"objectIdField"in t?t:n&&"objectIdField"in n?n:t;if(i){var r,o,a=null!==(r=i.objectIdField)&&void 0!==r?r:h.d,l=null===(o=e.attributes)||void 0===o?void 0:o[a];if(l)return"o-".concat(i.id,"-").concat(l)}return"u-".concat(e.uid)}function I(e,t){return D(e,P(t))}function D(e,t){return null==e||(null==e.include||e.include.has(t))&&(null==e.exclude||!e.exclude.has(t))}function M(e,t,n){var i=e.spatialReference||k.Z.WGS84;return(0,d.S)(t,e.renderSpatialReference,B,i)?t=B:(i=k.Z.WGS84,(0,d.S)(t,e.renderSpatialReference,B,i)&&(t=B)),n?(n.x=t[0],n.y=t[1],n.z=t[2],n.spatialReference=i):n=new C.Z(t,i),n}function R(e,t){var n=L(e,t.include,A.INCLUDE),i=L(e,t.exclude,A.EXCLUDE);return{include:n.layerUids,exclude:i.layerUids,graphics:{include:n.graphicUids,exclude:i.graphicUids},mediaElements:{include:n.mediaElements,exclude:i.mediaElements}}}function L(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{layerUids:void 0,graphicUids:void 0,mediaElements:void 0};if(!t)return i;if(t instanceof l.Z)T(i,P(t)),n===A.INCLUDE&&(null!=e.graphicsView&&t.layer===e?U(i,e.graphicsView.processor.layer.id):t.layer&&U(i,t.layer.uid));else if("layer"in t&&"element"in t)O(i,t.element),n===A.INCLUDE&&U(i,t.layer.uid);else if((0,s.TW)(t)){var r,a=(0,o.Z)(t);try{for(a.s();!(r=a.n()).done;){var u=r.value;u===e.graphics&&null!=e.graphicsView?U(i,e.graphicsView.processor.layer.id):u===e.map.ground?U(i,b.xX):L(e,u,n,i)}}catch(c){a.e(c)}finally{a.f()}}else"uid"in t&&U(i,t.uid);return i}function U(e,t){e.layerUids||(e.layerUids=new Set),e.layerUids.add(t)}function T(e,t){e.graphicUids||(e.graphicUids=new Set),e.graphicUids.add(t)}function O(e,t){e.mediaElements||(e.mediaElements=new Set),e.mediaElements.add(t)}var A,V,B=(0,c.Ue)();(V=A||(A={}))[V.INCLUDE=0]="INCLUDE",V[V.EXCLUDE=1]="EXCLUDE"},43449:function(e,t,n){n.d(t,{T6:function(){return d},TX:function(){return c},j9:function(){return h}});var i=n(43144),r=n(15671),o=n(60136),a=n(29388),l=n(54463),s=n(55848),u=n(22178);function c(e){return(0,u.nn)(e)&&e.intersector===l.q7.TERRAIN&&!!e.target}var d=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(e,i,o){var a;return(0,r.Z)(this,n),(a=t.call(this,e,i)).triangleNr=o,a}return(0,i.Z)(n)}(s.Dx);function h(e){return(0,u.nn)(e)&&e.intersector===l.q7.OVERLAY&&!!e.target}},41781:function(e,t,n){n.d(t,{J4:function(){return d},VB:function(){return y},_s:function(){return _},bK:function(){return p},tB:function(){return h}});var i=n(29134),r=n(12400),o=n(41414),a=n(23470),l=n(85312),s=n(43449),u=n(22178),c=n(22255);function d(e,t){var n,i;return(0,u.es)(e)||(0,u.G1)(e)?f(null===(n=e.target)||void 0===n?void 0:n.object,t):(0,s.TX)(e)?null===(i=t.map)||void 0===i?void 0:i.ground:(0,l.a8)(e)||(0,l.GS)(e)||(0,s.j9)(e)||(0,l.A8)(e)?f(e.target,t):null}function h(e,t){var n=p(e,t);return null!=n&&"graphic"===n.type?n.graphic:null}function p(e,t){var n;if(null==e)return null;if((0,u.es)(e)||(0,u.G1)(e))return v(null===(n=e.target)||void 0===n?void 0:n.object,t);if((0,l.a8)(e)){var i=e.target.createGraphic();return{type:"graphic",graphic:i,layer:i.layer}}if((0,l.A8)(e)){var r=e.target.createVoxelGraphic();return{type:"graphic",graphic:r,layer:r.layer}}if((0,l.BF)(e)){var o=e.target.createTiles3DGraphic();return{type:"graphic",graphic:o,layer:o.layer}}return(0,s.j9)(e)||(0,c.w)(e)?v(e.target,t):(0,l.GS)(e)?function(e,t){var n=f(e,t);if(null==n)return null;var i=t.allLayerViews.find((function(e){return e.layer===n}));return i&&!i.suspended&&"getGraphicFromIntersectorTarget"in i?function(e){return null!=e?{type:"graphic",graphic:e,layer:e.layer}:null}(i.getGraphicFromIntersectorTarget(e)):null}(e.target,t):null}function v(e,t){if(null==(null===e||void 0===e?void 0:e.graphicUid))return null;var n=f(e,t);if(null==n)return null;if(n===t.graphics)return null==t.graphicsView||"number"!=typeof e.graphicUid?null:t.graphicsView.getHit(e.graphicUid);var i=t.allLayerViews.find((function(e){return e.layer===n}));return!i||i.suspended||null==e.graphicUid?null:"getHit"in i?i.getHit(e.graphicUid):null}function f(e,t){return null==(null===e||void 0===e?void 0:e.layerUid)?null:null!=t.graphicsView&&e.layerUid===t.graphicsView.processor.layer.id?t.graphics:t.map.allLayers.find((function(t){return t.uid===e.layerUid}))}function y(e,t){if((0,u.es)(e)||(0,u.G1)(e))return(0,a.b)(e.target.object.boundingVolumeWorldSpace.bounds);if((0,c.w)(e)){(0,i.Q$)(g,e.transformation);var n=Math.max(g[0],g[1],g[2]);return e.target.baseBoundingSphere.radius*n}if((0,l.GS)(e)){var r=function(e,t){var n=f(e,t);if(null==n)return null;var i=t.allLayerViews.find((function(e){return e.layer===n}));return i&&!i.suspended&&"getAABBFromIntersectorTarget"in i?i.getAABBFromIntersectorTarget(e):null}(e.target,t);return r?.5*(0,o.wz)(r):null}return null}function _(e){return!(0,u.es)(e)&&!(0,u.G1)(e)&&((0,c.w)(e)?e.target.numLodLevels>1:!!(0,l.GS)(e))}var g=(0,r.Ue)()},22255:function(e,t,n){n.d(t,{w:function(){return d},x:function(){return c}});var i=n(43144),r=n(15671),o=n(60136),a=n(29388),l=n(54463),s=n(55848),u=n(22178),c=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(e,i,o,a,l,s){var u;return(0,r.Z)(this,n),(u=t.call(this,e,i)).layerUid=e,u.graphicUid=i,u.geometryId=o,u.triangleNr=a,u.baseBoundingSphere=l,u.numLodLevels=s,u}return(0,i.Z)(n)}(s.Dx);function d(e){return(0,u.nn)(e)&&e.intersector===l.q7.LOD&&!!e.target}},38164:function(e,t,n){n.d(t,{e:function(){return h}});var i=n(43144),r=n(15671),o=(n(93169),n(92026)),a=n(66978),l=n(43e3),s=n(18442),u=n(99346),c=n(76432),d=(0,i.Z)((function e(t,n){(0,r.Z)(this,e),this.item=t,this.controller=n,this.promise=null})),h=function(){function e(t){(0,r.Z)(this,e),this._schedule=null,this._task=null,this._deferreds=new s.Z,this._controllers=new s.Z,this._processingItems=new s.Z,this._pausedSignal=(0,c.t)(!1),this.concurrency=1,t.concurrency&&(this.concurrency=t.concurrency),this._queue=new l.Z(t.peeker),this.process=t.process;var n=t.scheduler;t.priority&&n&&(this._task=n.registerTask(t.priority,this))}return(0,i.Z)(e,[{key:"destroy",value:function(){this.clear(),this._schedule=(0,o.hw)(this._schedule),this._task=(0,o.hw)(this._task)}},{key:"updating",get:function(){var e;return!(null===(e=this._task)||void 0===e||!e.updating)||this.running}},{key:"length",get:function(){return this._processingItems.size+this._queue.length}},{key:"abort",value:function(e){var t=this._controllers.get(e);t&&t.abort()}},{key:"clear",value:function(){this._queue.clear();var e=[];this._controllers.forEach((function(t){return e.push(t)})),this._controllers.clear(),e.forEach((function(e){return e.abort()})),this._processingItems.clear(),this._cancelNext()}},{key:"forEach",value:function(e){this._deferreds.forEach((function(t,n){return e(n)}))}},{key:"get",value:function(e){var t=this._deferreds.get(e);return t?t.promise:void 0}},{key:"isOngoing",value:function(e){return this._processingItems.has(e)}},{key:"has",value:function(e){return this._deferreds.has(e)}},{key:"pause",value:function(){this._pausedSignal.value||(this._pausedSignal.value=!0,this._cancelNext())}},{key:"push",value:function(e,t){var n=this,i=this.get(e);if(i)return i;var r=new AbortController,o=null;t&&(o=(0,a.fu)(t,(function(){return r.abort()})));var l=function(){s.remove(),null!=o&&o.remove(),n._removeItem(e),n._queue.remove(e),n._scheduleNext()},s=(0,a.$F)(r.signal,(function(){var t=n._processingItems.get(e);t&&t.controller.abort(),l(),u.reject((0,a.zE)())})),u=(0,a.hh)();return this._deferreds.set(e,u),this._controllers.set(e,r),u.promise.then(l,l),this._queue.push(e),this._scheduleNext(),u.promise}},{key:"last",value:function(){return this._queue.last()}},{key:"lastPromise",value:function(){var e=this.last();return e?this.get(e):null}},{key:"peek",value:function(){return this._queue.peek()}},{key:"popLast",value:function(){var e,t=this._queue.popLast();return t&&(null!==(e=this._deferreds.get(t))&&void 0!==e&&e.reject((0,a.zE)("Removed from queue")),this._removeItem(t)),t}},{key:"reset",value:function(){var e=[];this._processingItems.forEach((function(t){return e.push(t)})),this._processingItems.clear();for(var t=0,n=e;t<n.length;t++){var i=n[t];this._queue.push(i.item),i.controller.abort()}this._scheduleNext()}},{key:"resume",value:function(){this._pausedSignal.value&&(this._pausedSignal.value=!1,this._scheduleNext())}},{key:"takeAll",value:function(){for(var e=[];this._queue.length;)e.push(this._queue.pop());return this.clear(),e}},{key:"running",get:function(){return!this._pausedSignal.value&&this._queue.length>0&&this._processingItems.size<this.concurrency}},{key:"runTask",value:function(e){for(;!e.done&&this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),e.madeProgress()}},{key:"_removeItem",value:function(e){this._deferreds.delete(e),this._controllers.delete(e),this._processingItems.delete(e)}},{key:"_scheduleNext",value:function(){var e=this;this._task||this._pausedSignal.value||this._schedule||(this._schedule=(0,u.Os)((function(){e._schedule=null,e._next()})))}},{key:"_next",value:function(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}},{key:"_cancelNext",value:function(){this._schedule&&(this._schedule.remove(),this._schedule=null)}},{key:"_processResult",value:function(e,t){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).resolve(t))}},{key:"_processError",value:function(e,t){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).reject(t))}},{key:"_canProcessFulfillment",value:function(e){return!!this._deferreds.get(e.item)&&this._processingItems.get(e.item)===e}},{key:"_process",value:function(e){var t=this;if(null!=e){var n,i=new AbortController,r=new d(e,i);this._processingItems.set(e,r);try{n=this.process(e,i.signal)}catch(o){this._processError(r,o)}(0,a.y8)(n)?(r.promise=n,n.then((function(e){return t._processResult(r,e)}),(function(e){return t._processError(r,e)}))):this._processResult(r,n)}}},{key:"test",get:function(){}}]),e}()},7930:function(e,t,n){n.r(t),n.d(t,{default:function(){return mn}});var i,r=n(74165),o=n(15861),a=n(37762),l=n(1413),s=n(15671),u=n(43144),c=n(60136),d=n(29388),h=n(4942),p=n(27366),v=n(14921),f=n(92026),y=n(97942),_=n(66978),g=n(94172),m=n(49861),b=(n(93169),n(32718)),k=(n(84936),n(69912)),C=n(33565),w="esri-elevation-profile",Z={base:"".concat(w),portrait:"".concat(w,"--portrait"),refined:"".concat(w,"--refined"),mainContainer:"".concat(w,"__main-container"),promptContainer:"".concat(w,"__prompt-container"),header:"".concat(w,"__header"),zoomOutButton:"".concat(w,"__zoom-out-button"),clearButton:"".concat(w,"__clear-button"),actionButton:"".concat(w,"__action-button"),sketchButton:"".concat(w,"__sketch-button"),sketchCancelButton:"".concat(w,"__sketch-cancel-button"),sketchDoneButton:"".concat(w,"__sketch-done-button"),selectButton:"".concat(w,"__select-button"),selectCancelButton:"".concat(w,"__select-cancel-button"),chartContainer:"".concat(w,"__chart-container"),chartSpinner:"".concat(w,"__chart-spinner"),chartSpinnerVisible:"".concat(w,"__chart-spinner--visible"),chartSpinnerSmall:"".concat(w,"__chart-spinner--small"),footer:"".concat(w,"__footer")},S="esri-elevation-profile-legend",x="esri-elevation-profile-legend-item",E={base:x,disabled:"".concat(x,"--disabled"),expanded:"".concat(x,"--expanded"),colorIndicator:"".concat(x,"__color-indicator"),header:"".concat(x,"__header"),content:"".concat(x,"__content"),collapseToggle:"".concat(x,"__collapse-toggle"),label:"".concat(x,"__label"),checkbox:"".concat(x,"__checkbox")},P="esri-elevation-profile-statistics",I={base:P,statistic:"".concat(P,"__statistic"),statisticLabel:"".concat(P,"__statistic__label"),statisticValue:"".concat(P,"__statistic__value"),slopeValue:"".concat(P,"__slope-value")},D="esri-elevation-profile-settings",M={base:"".concat(D),popoverContent:"".concat(D,"__popover-content"),uniformChartScalingLabel:"".concat(D,"__uniform-scaling-label"),uniformChartScalingCheckbox:"".concat(D,"__uniform-scaling-checkbox")},R=n(52639),L=n(7138),U=n(63780),T=n(70116),O=n(80987),A=n(60354),V=n(44927),B=n(16054),z=n(68860),G=n(22689),N=n(77671),q=n(16296),H=n(42537),F=n(14916),j=n(74509),J=n(91079),W=n(29439),Y=n(16889),Q=n(13611),K=n(32035),X=n(29909),$=n(79803),ee=n(78952),te=n(15559),ne=n(28664),ie="ProfileGenerationError";!function(e){e.TooComplex="too-complex",e.InvalidGeometry="invalid-geometry",e.InvalidElevationInfo="invalid-elevation-info",e.ElevationQueryError="elevation-query-error"}(i||(i={}));var re=function(e){(0,c.Z)(n,e);var t=(0,d.Z)(n);function n(e){var i;return(0,s.Z)(this,n),(i=t.call(this,"profile could not be generated",{cause:e})).type=ie,i}return(0,u.Z)(n)}((0,ne.Z)(Error));function oe(e,t,n,i,r,o,a){return ae.apply(this,arguments)}function ae(){return ae=(0,o.Z)((0,r.Z)().mark((function e(t,o,a,l,s,u,c){var d,h,p,v,f,y,g,m,b,k,C,w,Z,S,x,E,P,I;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f=t.spatialReference,y=f.isGeographic||f.isWebMercator,g=0,y){e.next=12;break}return e.next=5,n.e(84178).then(n.bind(n,84178));case 5:return m=e.sent,b=m.planarLength,(0,_.k_)(c),e.next=10,b(t,"meters");case 10:g=e.sent,(0,_.k_)(c);case 12:if(k=1/(0,z.c9)(l),C=null!==(d=s.geodesicDistanceThreshold)&&void 0!==d?d:1/0,!(y||g>=C)){e.next=25;break}return e.next=16,(0,$.initializeProjection)([{source:f,dest:l},{source:f,dest:ee.Z.WGS84}],c);case 16:if(Z=Ce(t),h=(0,te.Jf)([Z],"meters")[0],S=le(h,s),!(Ze(t,h,S)>u)){e.next=21;break}throw new re(i.TooComplex);case 21:x=se(Z,o,a),w=fe(x,S,k),p=w.densifiedPath,v=w.distances,p=(0,$.project)(p,l),e.next=33;break;case 25:return e.next=27,(0,$.initializeProjection)([{source:f,dest:l}],c);case 27:if(P=le(h=g,s),!(Ze(t,h,P)>u)){e.next=31;break}throw new re(i.TooComplex);case 31:I=se(t,o,a),E=ve(I,P,k),p=E.densifiedPath,v=E.distances,(0,_.k_)(c),p=(0,$.project)(p,l);case 33:return e.abrupt("return",{densifiedPath:p,pathLength:h*k,distances:v});case 34:case"end":return e.stop()}}),e)}))),ae.apply(this,arguments)}function le(e,t){var n=e/t.densificationMaxSamples;return Math.max(t.samplingDistance,n)}function se(e,t,n){if(null==t)return ue(e);var i=e.spatialReference,r=t.mode,o=(0,j.ap)(t,i),a=null;switch(n.type){case"2d":a=function(e,t,n){var i=e.hasZ;return"absolute-height"===t?i?function(e){var t=(0,W.Z)(e,3);return[t[0],t[1],t[2]+n]}:function(e){var t=(0,W.Z)(e,2);return[t[0],t[1],n]}:null}(e,r,o);break;case"3d":a=function(e,t,n,i){var r=e.spatialReference,o=e.hasZ,a=i.elevationProvider,l=function(e,t,n,i){var o;return null!==(o=null===a||void 0===a?void 0:a.getElevation(e,t,n,r,i))&&void 0!==o?o:0};switch(t){case"on-the-ground":return function(e){var t=(0,W.Z)(e,2),n=t[0],i=t[1];return[n,i,l(n,i,0,"ground")]};case"absolute-height":return o?function(e){var t=(0,W.Z)(e,3);return[t[0],t[1],t[2]+n]}:function(e){var t=(0,W.Z)(e,2);return[t[0],t[1],n]};case"relative-to-ground":return o?function(e){var t=(0,W.Z)(e,3),i=t[0],r=t[1],o=t[2];return[i,r,o+l(i,r,o,"ground")+n]}:function(e){var t=(0,W.Z)(e,2),i=t[0],r=t[1];return[i,r,l(i,r,0,"ground")+n]};case"relative-to-scene":return o?function(e){var t=(0,W.Z)(e,3),i=t[0],r=t[1],o=t[2];return[i,r,o+l(i,r,o,"scene")+n]}:function(e){var t=(0,W.Z)(e,2),i=t[0],r=t[1];return[i,r,l(i,r,0,"scene")+n]};default:return null}}(e,r,o,n)}return null==a?ue(e):new X.Z({hasZ:!0,hasM:!1,spatialReference:i,paths:ce(e.paths,a)})}function ue(e){return e.hasZ?new X.Z({hasZ:!1,hasM:!1,spatialReference:e.spatialReference,paths:ce(e.paths,(function(e){var t=(0,W.Z)(e,2);return[t[0],t[1]]}))}):e}function ce(e,t){for(var n=e.length,i=new Array(n),r=0;r<n;++r){var o=e[r],a=o.length,l=new Array(o.length);i[r]=l;for(var s=0;s<a;++s)l[s]=t(o[s])}return i}function de(e){return he(e)&&e.paths.length>0&&e.paths.every((function(e){return e.length>=2}))}function he(e){return null!=e&&"polyline"===e.type}function pe(e,t,n,i,r){for(var o=e.spatialReference,a=e.hasZ,l={from:null,to:null,distance:0,azimuth:0,reverseAzimuth:0,spatialReference:o,metersPerSR:(0,z.c9)(o)},s=[],u=[],c=0,d=0;d<e.paths.length;++d){for(var h=e.paths[d],p=new Array,v=new Array,f=0,y=1;y<h.length;++y){var _=h[y-1],g=h[y],m=i(l,_,g),b=void 0;for(b=f;b<m.distance&&!(0,Y.Po)(b,m.distance);b+=t)p.push(r(m,b)),v.push((c+b)*n);f=b-m.distance,c+=m.distance,p.push(g),v.push(c*n)}s[d]=p,u[d]=v}return{densifiedPath:new X.Z({spatialReference:o,hasZ:a,paths:s}),distances:u}}function ve(e,t,n){return pe(e,t,n,_e,e.hasZ?ke:be)}function fe(e,t,n){return pe(e,t,n,ye,e.hasZ?me:ge)}function ye(e,t,n){return e.distance=0,(0,te.cA)(e,t,n,e.spatialReference),e.from=t,e.to=n,e}function _e(e,t,n){return e.from=t,e.to=n,e.distance=(0,Q.TE)(n,t)*e.metersPerSR,e}function ge(e,t){var n=e.from,i=e.azimuth,r=e.spatialReference;return(0,te.TB)([0,0],n,i,t,r)}function me(e,t){var n=e.from,i=e.to,r=e.azimuth,o=e.distance,a=e.spatialReference,l=t/o,s=[0,0,(0,Y.t7)(n[2],i[2],l)];return(0,te.TB)(s,n,r,t,a),s}function be(e,t){var n=e.from,i=e.to,r=e.distance;return(0,Q.t7)([0,0],n,i,t/r)}function ke(e,t){var n=e.from,i=e.to,r=e.distance;return(0,K.o)([0,0,0],n,i,t/r)}function Ce(e){return(0,te.Gb)(e.spatialReference)?e:(0,$.project)(e,ee.Z.WGS84)}function we(e){return e.paths.reduce((function(e,t){return e+t.length}),0)}function Ze(e,t,n){return we(e)+Math.floor(t/n)+Math.max(0,e.paths.reduce((function(e){return 1+e}),0)-1)}var Se=n(26420),xe=n(50608),Ee=n(77577),Pe=n(69662),Ie=n(92975),De=n(38164),Me=n(93463);function Re(e,t){var n=e.length;if(0===n)return null;var i=e[0],r=i.sampledZ,o=r,a=r,l=0,s=0,u=null,c=null,d=null!=r?r:0,h=0,p=0,v=null!=r?1:0,f=0,y=0,_=(0,z.c9)(t),g=(0,z._R)(t),m=(0,J.iE)().minSlopeSampleDistance/_,b=2*m,k=new Oe,C=new Oe,w=function(){S(),k.copy(C),C.reset()},Z=function(e,t){w(),e>0&&e-k.start<=b&&(e=k.start+m),C.restart(e,t)},S=function(){if(!k.isHole&&!C.isHole){var e=C.avgElevation-k.avgElevation,t=C.start-k.start,n=e*g,i=t*_,r=(0,z.En)(Math.atan2(n,i),"radians","degrees");r>0?(h+=r,u=Ue(u,r),f++):r<0&&(p-=r,c=Ue(c,-r),y++)}};null!=i.sampledZ&&Z(i.distance,i.sampledZ);for(var x=1;x<n;++x){var E=e[x-1],P=e[x],I=P.sampledZ;if(null!=I){v++,d+=I,o=Le(o,I),a=Ue(a,I),C.isHole||P.distance-C.start>=m?Z(P.distance,I):C.insert(I);var D=E.sampledZ;if(null!=D){var M=I-D;M>0?l+=M:M<0&&(s-=M)}}else C.isHole||w()}return w(),0===v?null:{maxDistance:e[n-1].distance,minElevation:o,maxElevation:a,avgElevation:0===v?null:d/v,elevationGain:l,elevationLoss:s,maxPositiveSlope:u,maxNegativeSlope:c,avgPositiveSlope:0===f?null:h/f,avgNegativeSlope:0===y?null:p/y}}function Le(e,t){return null==t?e:null!=e?Math.min(e,t):t}function Ue(e,t){return null==t?e:null!=e?Math.max(e,t):t}function Te(e,t){return null!=e&&null!=t?e*t:null}var Oe=function(){function e(){(0,s.Z)(this,e),this._start=0,this._totalElevation=0,this._sampleCount=0}return(0,u.Z)(e,[{key:"avgElevation",get:function(){return this._totalElevation/this._sampleCount}},{key:"isHole",get:function(){return 0===this._sampleCount}},{key:"start",get:function(){return this._start}},{key:"copy",value:function(e){this._start=e._start,this._sampleCount=e._sampleCount,this._totalElevation=e._totalElevation}},{key:"reset",value:function(){this._start=0,this._sampleCount=0,this._totalElevation=0}},{key:"restart",value:function(e,t){this._start=e,this._sampleCount=1,this._totalElevation=t}},{key:"insert",value:function(e){++this._sampleCount,this._totalElevation+=e}}]),e}(),Ae=n(39114),Ve=(0,r.Z)().mark(Ge);function Be(e,t){return ze.apply(this,arguments)}function ze(){return ze=(0,xe.Z)((0,r.Z)().mark((function e(t,n){var o,a,s,u,c,d,h,p,v,f,y,g,m,b,k,C,w,Z,S,x,E,P,I,D,M,R,L,U,T,O;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.view,s=t.geometry,u=t.elevationInfo,c=t.providers,d=t.options,(h=a.spatialReference)&&null!=s&&de(s)){e.next=3;break}throw new re(i.InvalidGeometry);case 3:if(0!==(p=c.length)){e.next=6;break}return e.abrupt("return",null);case 6:if(v=Math.round(d.maxTotalSamples/p),!(we(s)>v)){e.next=9;break}throw new re(i.TooComplex);case 9:return e.next=11,(0,Se.Z)(oe(s,u,a,h,d,v,n));case 11:for(f=e.sent,y=0,g=new Array(p),m=new Array(p),b=0;b<p;b++)k=We(f),g[b]=k,y+=k.samples.length,C=(0,l.Z)((0,l.Z)({},t),{},{provider:c[b],result:k,densificationResult:f}),m[b]=Ge(C,n)[Symbol.iterator]();if(!(y>d.maxTotalSamples)){e.next=17;break}throw new re(i.TooComplex);case 17:return e.next=19,(0,Se.Z)(Promise.all(m.map((function(e){var t=e.next();return!0===t.done?Promise.resolve(null):t.value}))));case 19:for(w=e.sent,(0,_.k_)(n),Z=0;Z<p;Z++)g[Z]=w[Z];return e.next=24,g;case 24:return e.next=26,(0,Se.Z)((0,_.e4)(null!==(o=t.delayAfterPreview)&&void 0!==o?o:(0,J.iE)().delayAfterPreviewMillis,null,n.signal));case 26:S=[];try{do{for(x=!1,E=0;E<p;E++)!1===(P=m[E].next()).done&&(S.push({resultPromise:P.value,index:E}),x=!0)}while(x)}finally{m.forEach((function(e){var t;return null===(t=e.return)||void 0===t?void 0:t.call(e)}))}I=0,D=S;case 29:if(!(I<D.length)){e.next=40;break}return M=D[I],R=M.resultPromise,L=M.index,e.next=33,(0,Se.Z)(R);case 33:return g[L]=e.sent,(0,_.k_)(n),e.next=37,g;case 37:I++,e.next=29;break;case 40:for(U=0,T=g;U<T.length;U++)null!=(O=T[U])&&(O.progress=1);return e.next=43,g;case 43:case"end":return e.stop()}}),e)}))),ze.apply(this,arguments)}function Ge(e,t){var n,i,o,s,u,c,d,h;return(0,r.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=e.densificationResult,i=(0,l.Z)((0,l.Z)({},e),{},{abortOptions:t,densificationResult:n}),o=(0,Ae.k)(0,i.result.samples.length),s=o.slice(0,i.provider.numSamplesForPreview),r.next=3,Ne(i,s,!0);case 3:u=(0,U.vr)(o,i.provider.numSamplesPerChunk),c=(0,a.Z)(u),r.prev=5,c.s();case 7:if((d=c.n()).done){r.next=13;break}return h=d.value,r.next=11,Ne(i,h,!1);case 11:r.next=7;break;case 13:r.next=18;break;case 15:r.prev=15,r.t0=r.catch(5),c.e(r.t0);case 18:return r.prev=18,c.f(),r.finish(18);case 21:case"end":return r.stop()}}),Ve,null,[[5,15,18,21]])}function Ne(e,t,n){return qe.apply(this,arguments)}function qe(){return qe=(0,o.Z)((0,r.Z)().mark((function e(t,n,i){var o,a,s,u,c,d,h,p,v,f,y,g,m;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=t.densificationResult,a=t.result,s=t.provider,u=t.queue,c=t.abortOptions,d=t.cache,h=o.densifiedPath,p=o.pathLength,v=a.spatialReference,f=a.samples,y=[],g=0;g<n.length;g++)m=f[n[g]],y[g]=m.coordinate;return e.prev=3,e.next=6,u.push({geometry:new Ee.Z({spatialReference:v,points:y,hasZ:h.hasZ}),provider:s,indices:n,preview:i,result:a,queryOptions:(0,l.Z)((0,l.Z)({},(0,J.iE)().defaultQueryOptions()),{},{minDemResolution:i?Math.round(p/s.numSamplesForPreview):Math.round(p/f.length),cache:d})},c);case 6:return e.abrupt("return",(0,l.Z)({},a));case 9:return e.prev=9,e.t0=e.catch(3),e.abrupt("return",(0,_.D_)(e.t0)?null:J.TH);case 12:case"end":return e.stop()}}),e,null,[[3,9]])}))),qe.apply(this,arguments)}function He(e){return Fe.apply(this,arguments)}function Fe(){return Fe=(0,o.Z)((0,r.Z)().mark((function e(t){var n,i,o,a,l,s,u,c,d,h,p,v,f,y;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.geometry,i=t.provider,o=t.indices,a=t.preview,l=t.result,s=t.queryOptions,0!==o.length){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,Xe(i,n,s);case 5:u=e.sent.geometry,c=u.hasZ,d=u.points,h=s.noDataValue,p=l.samples,v=0;case 11:if(!(v<o.length)){e.next=20;break}if(!(f=p[o[v]]).isHole){e.next=15;break}return e.abrupt("continue",17);case 15:null===(y=c?d[v][2]:null)||y===h?f.sampledZ=null:(l.hasZ=!0,f.sampledZ=y),f.sampled=!0;case 17:v++,e.next=11;break;case 20:je(p),l.progress=a?0:l.progress+o.length/p.length,l.statistics=Re(l.samples,l.spatialReference);case 21:case"end":return e.stop()}}),e)}))),Fe.apply(this,arguments)}function je(e){for(var t=e.length-1,n=0,i=1;i<=t;i++)(e[i].sampled||i===t)&&(Je(e,n,i),n=i)}function Je(e,t,n){if(n-t!=1){var i=e[t],r=i.sampledZ,o=e[n],a=o.sampledZ;if(null!=r&&null!=a)for(var l=i.distance,s=o.distance-l,u=t+1;u<n;u++){var c=e[u],d=(c.distance-l)/s;c.sampledZ=(0,Y.t7)(r,a,d)}else for(var h=t+1;h<n;h++)e[h].sampledZ=null}}function We(e){for(var t=e.densifiedPath,n=e.distances,i=t.spatialReference,r=(0,Ie.C5)(i),o=t.paths,a=o.length,l=[],s=null,u=0,c=0;c<a;c++)for(var d=o[c],h=d.length,p=n[c],v=0;v<h;v++){var f=d[v],y=p[v];r&&(f[0]=(0,Pe.gQ)(f[0],r.valid[0],r.valid[1])),s&&0===v&&Ye(l,s,f,u,y),l.push(Qe(f,y)),s=f,u=y}return{progress:0,samples:l,hasZ:!1,statistics:null,spatialReference:i}}function Ye(e,t,n,i,r){e.push(Ke(t,i)),e.push(Ke(n,r))}function Qe(e,t){return{coordinate:e,distance:t,sampledZ:null,sampled:!1,isHole:!1}}function Ke(e,t){return{coordinate:e,distance:t,sampledZ:null,sampled:!0,isHole:!0}}function Xe(e,t,n){return $e.apply(this,arguments)}function $e(){return $e=(0,o.Z)((0,r.Z)().mark((function e(t,n,o){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.queryElevation(n,o);case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e.catch(0),new re(i.ElevationQueryError);case 9:case"end":return e.stop()}}),e,null,[[0,6]])}))),$e.apply(this,arguments)}var et="line-change",tt=function(e){(0,c.Z)(n,e);var t=(0,d.Z)(n);function n(e){var i;return(0,s.Z)(this,n),(i=t.call(this,e))._updateTask=null,i._paramsPerProfile=new Map,i._getUpdateParametersMemoized=(0,y.H)((function(e,t,n){return{stationary:e,visibleProfiles:t,generationParameters:n}})),i._getGenerationParametersMemoized=(0,y.H)((function(e,t,n,i,r,o,a){return he(t)&&de(t)&&null!=i?{view:e,geometry:t,elevationInfo:n,options:o,queue:i,cache:r,slicePlane:a}:null})),i._getElevationInfoMemoized=(0,y.H)((function(e,t){return{mode:e,offset:t}})),i._getOptionsMemoized=(0,y.H)((function(e,t,n){var i=(0,J.iE)(),r=i.densificationMaxSamples,o=i.maxTotalSamples;return{geodesicDistanceThreshold:e,samplingDistance:t,densificationMaxSamples:Math.round(r/n),maxTotalSamples:o}})),i._updateThrottled=(0,F.P)((function(e){return(0,_.R8)(i._update(e))}),(0,J.iE)().updateThrottleMillis),i}return(0,u.Z)(n,[{key:"initialize",value:function(){var e=this,t=this.viewModel;this.addHandles([(0,g.watch)((function(){return t.profiles.toArray()}),(function(t){e._abortUpdate(),e._paramsPerProfile.clear(),e.removeHandles(et),e.addHandles(t.map((function(t){return(0,H.AL)([t.attach(e.viewModel),t.on("change",(function(){e._invalidateProfile(t)}))])})),et)}),g.syncAndInitial),this._updateThrottled,(0,g.watch)((function(){return e._updateParameters}),this._updateThrottled,g.syncAndInitial)])}},{key:"destroy",value:function(){this._paramsPerProfile.clear()}},{key:"_updateParameters",get:function(){var e=this.viewModel.view;return this._getUpdateParametersMemoized(null==e||e.stationary,this.viewModel.visibleProfiles,this._generationParameters)}},{key:"_generationParameters",get:function(){var e=this.viewModel,t=e.view,n=e.input,i=e.queue,r=e.tileCache;return null!=t&&t.ready?this._getGenerationParametersMemoized(t,null===n||void 0===n?void 0:n.geometry,this._elevationInfo,i,r,this._options,"3d"===t.type?t.slicePlane:null):null}},{key:"_elevationInfo",get:function(){var e=this.viewModel.input,t=e?(0,j.Lt)(e)?null:(0,j.RL)(e):null;return null!=t?this._getElevationInfoMemoized(t.mode,t.offset):null}},{key:"_options",get:function(){var e,t=this.viewModel,n=t.visibleProfiles.length,i=null!==(e=t.minDemResolution)&&void 0!==e?e:(0,J.iE)().defaultDemResolution;return i=parseFloat(i.toFixed(2)),this._getOptionsMemoized(t.geodesicDistanceThreshold,i,n)}},{key:"_update",value:function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t){var n,i,s,u=this;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.stationary,i=t.visibleProfiles,s=t.generationParameters,this._abortUpdate(),n&&(null!=s?this._updateTask=(0,v.vr)(function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t){var n,o,c,d,h,p,v,f,y,g,m,b;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u.viewModel.error=null,n=i.filter((function(e){return!u._isProfileValid(e,s)})),o=Be((0,l.Z)((0,l.Z)({},s),{},{providers:n}),{signal:t}),e.prev=2,c=!1,d=!1,e.prev=5,p=(0,q.Z)(o);case 7:return e.next=9,p.next();case 9:if(!(c=!(v=e.sent).done)){e.next=16;break}for(f=v.value,(0,_.k_)(t),u._clearInvalidResults(s),y=0;y<n.length;y++)n[y].result=f[y];case 13:c=!1,e.next=7;break;case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(5),d=!0,h=e.t0;case 22:if(e.prev=22,e.prev=23,!c||null==p.return){e.next=27;break}return e.next=27,p.return();case 27:if(e.prev=27,!d){e.next=30;break}throw h;case 30:return e.finish(27);case 31:return e.finish(22);case 32:g=(0,a.Z)(n);try{for(g.s();!(m=g.n()).done;)b=m.value,u._paramsPerProfile.set(b,s)}catch(r){g.e(r)}finally{g.f()}e.next=39;break;case 36:e.prev=36,e.t1=e.catch(2),(0,_.r9)(e.t1),u._abortUpdate(),u.viewModel.error=e.t1,n.forEach((function(e){e.result=null}));case 39:case"end":return e.stop()}}),e,null,[[2,36],[5,18,22,32],[23,,27,31]])})));return function(t){return e.apply(this,arguments)}}()):this._clearResults());case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_abortUpdate",value:function(){this._updateTask=(0,f.IM)(this._updateTask)}},{key:"_isProfileValid",value:function(e,t){return this._paramsPerProfile.has(e)&&this._paramsPerProfile.get(e)===t}},{key:"_invalidateProfile",value:function(e){this._paramsPerProfile.delete(e),this._updateThrottled(this._updateParameters)}},{key:"_clearInvalidResults",value:function(e){var t,n=(0,a.Z)(this.viewModel.profiles.items);try{for(n.s();!(t=n.n()).done;){var i=t.value;this._isProfileValid(i,e)||(i.result=null,this._paramsPerProfile.delete(i))}}catch(r){n.e(r)}finally{n.f()}}},{key:"_clearResults",value:function(){var e,t=(0,a.Z)(this.viewModel.profiles.items);try{for(t.s();!(e=t.n()).done;){var n=e.value;n.result=null,this._paramsPerProfile.delete(n)}}catch(i){t.e(i)}finally{t.f()}}}]),n}(L.default);(0,p._)([(0,m.Cb)({nonNullable:!0})],tt.prototype,"viewModel",void 0),(0,p._)([(0,m.Cb)()],tt.prototype,"_updateParameters",null),(0,p._)([(0,m.Cb)()],tt.prototype,"_generationParameters",null),(0,p._)([(0,m.Cb)()],tt.prototype,"_elevationInfo",null),(0,p._)([(0,m.Cb)()],tt.prototype,"_options",null),tt=(0,p._)([(0,k.j)("esri.widgets.ElevationProfile.ElevationProfileController")],tt);var nt=n(88301),it=n(61120),rt=n(51995),ot=n(91505),at=n(71907),lt=n(848);function st(e,t,n){return null==e?null:(0,z.En)(e*t,"meters",n)}function ut(e,t,n){return null==e?null:(0,z.En)(e*t,"meters",n)}var ct=function(e){(0,c.Z)(n,e);var t=(0,d.Z)(n);function n(e){var i;return(0,s.Z)(this,n),(i=t.call(this,e)).type=null,i.id=(0,at.DO)(),i.title=null,i.color=new rt.Z("#000000"),i.visible=!0,i._getSamplesMemoized=(0,y.H)((function(e,t){return function(e,t){if(null==e||null==t)return null;for(var n=e.samples,i=e.spatialReference,r=t.distance,o=t.elevation,a=(0,z.c9)(i),l=(0,z._R)(i),s=n.length,u=new Array(s),c=0;c<s;++c){var d=n[c],h=d.sampledZ,p=d.coordinate;u[c]={x:p[0],y:p[1],z:h,distance:st(d.distance,a,r),elevation:ut(h,l,o)}}return u}(e,t)})),i._getStatisticsMemoized=(0,y.H)((function(e,t){return function(e,t){if(null==e||null==t||null==e.statistics||null==e.spatialReference)return null;var n=t.distance,i=t.elevation,r=e.statistics,o=e.spatialReference,a=(0,z.c9)(o),l=(0,z._R)(o);return{maxDistance:st(r.maxDistance,a,n),minElevation:ut(r.minElevation,l,i),maxElevation:ut(r.maxElevation,l,i),avgElevation:ut(r.avgElevation,l,i),elevationGain:ut(r.elevationGain,l,i),elevationLoss:ut(r.elevationLoss,l,i),maxPositiveSlope:r.maxPositiveSlope,maxNegativeSlope:r.maxNegativeSlope,avgPositiveSlope:r.avgPositiveSlope,avgNegativeSlope:r.avgNegativeSlope}}(e,t)})),i.viewVisualizationEnabled=!0,i.result=null,i.effectiveUnits=null,i.numSamplesForPreview=30,i.numSamplesPerChunk=200,i.chartFillEnabled=!0,i.chartStrokeWidth=1.5,i.chartStrokeOffsetY=0,i._viewModel=null,i}return(0,u.Z)(n,[{key:"progress",get:function(){return null!=this.result&&this.visible?this.result.progress:0}},{key:"samples",get:function(){return this._getSamplesMemoized(this.result,this.effectiveUnits)}},{key:"statistics",get:function(){return this._getStatisticsMemoized(this.result,this.effectiveUnits)}},{key:"hoveredPoint",get:function(){var e,t=null===(e=this._viewModel)||void 0===e?void 0:e.hoveredChartPosition;return null!=t?this._getPoint(t):null}},{key:"available",get:function(){return!0}},{key:"hasZ",get:function(){var e=this.result;return null!=e&&e.hasZ}},{key:"minDemResolution",get:function(){return(0,J.iE)().defaultDemResolution}},{key:"queryElevation",value:function(){throw new Error("not implemented")}},{key:"attach",value:function(e){var t=this;return this._viewModel=e,(0,H.AL)([(0,g.watch)((function(){return e.effectiveUnits}),(function(e){t.effectiveUnits=e}),g.syncAndInitial),(0,g.watch)((function(){return[e.input]}),(function(){return t._onChange()}),g.sync)])}},{key:"toggleVisibility",value:function(e){this.visible=void 0===e?!this.visible:e}},{key:"_onChange",value:function(){this.emit("change")}},{key:"_getPoint",value:function(e){var t=this.samples,n=this.result;if(null==t||null==n)return null;var i=t.length;if(0===i)return null;var r=t[i-1].distance,o=(0,U.hG)(t,e*r,(function(e){return e.distance}));if(null==o)return null;var a=o.x,l=o.y,s=o.z;return null==s?null:new lt.Z({x:a,y:l,z:s,spatialReference:n.spatialReference})}}]),n}(ot.Z.EventedAccessor);(0,p._)([(0,m.Cb)({nonNullable:!0})],ct.prototype,"id",void 0),(0,p._)([(0,m.Cb)({nonNullable:!0})],ct.prototype,"title",void 0),(0,p._)([(0,m.Cb)({type:rt.Z,nonNullable:!0})],ct.prototype,"color",void 0),(0,p._)([(0,m.Cb)({nonNullable:!0})],ct.prototype,"visible",void 0),(0,p._)([(0,m.Cb)({readOnly:!0})],ct.prototype,"progress",null),(0,p._)([(0,m.Cb)({readOnly:!0})],ct.prototype,"samples",null),(0,p._)([(0,m.Cb)({readOnly:!0})],ct.prototype,"statistics",null),(0,p._)([(0,m.Cb)()],ct.prototype,"hoveredPoint",null),(0,p._)([(0,m.Cb)()],ct.prototype,"viewVisualizationEnabled",void 0),(0,p._)([(0,m.Cb)()],ct.prototype,"available",null),(0,p._)([(0,m.Cb)()],ct.prototype,"result",void 0),(0,p._)([(0,m.Cb)()],ct.prototype,"effectiveUnits",void 0),(0,p._)([(0,m.Cb)()],ct.prototype,"numSamplesForPreview",void 0),(0,p._)([(0,m.Cb)()],ct.prototype,"numSamplesPerChunk",void 0),(0,p._)([(0,m.Cb)()],ct.prototype,"chartFillEnabled",void 0),(0,p._)([(0,m.Cb)()],ct.prototype,"chartStrokeWidth",void 0),(0,p._)([(0,m.Cb)()],ct.prototype,"chartStrokeOffsetY",void 0),(0,p._)([(0,m.Cb)({readOnly:!0})],ct.prototype,"hasZ",null),(0,p._)([(0,m.Cb)({readOnly:!0})],ct.prototype,"minDemResolution",null),(0,p._)([(0,m.Cb)()],ct.prototype,"_viewModel",void 0);var dt=ct=(0,p._)([(0,k.j)("esri.widgets.ElevationProfile.ElevationProfileLine")],ct),ht=n(62565);function pt(e){if(null==e)return null;if(e instanceof ht.Z)return vt(e);var t=e.tileInfo;if(null==t)return null;var n=(0,U.Z$)(t.lods);return null==n?null:n.resolution*(0,z.c9)(t.spatialReference)}function vt(e){var t;if(null==e)return null;var n=e.layers.items.map(ft).filter(U.pC);return null!==(t=(0,U.VV)(n))&&void 0!==t?t:null}function ft(e){return e&&"tileInfo"in e?pt(e):null}var yt=function(e){(0,c.Z)(n,e);var t=(0,d.Z)(n);function n(e){var i;return(0,s.Z)(this,n),(i=t.call(this,e)).type="ground",i.color=new rt.Z("#ff7f00"),i.viewVisualizationEnabled=!0,i.numSamplesForPreview=50,i.numSamplesPerChunk=1e3,i._getQueryElevationDependencies=(0,y.H)((function(e,t){return{ground:e,groundLayers:t}})),i}return(0,u.Z)(n,[{key:"available",get:function(){var e=this._ground;return null!=e&&e.layers.some((function(e){return e.visible}))}},{key:"minDemResolution",get:function(){return vt(this._ground)}},{key:"_queryElevationDependencies",get:function(){return this._getQueryElevationDependencies(this._ground,this._groundLayers)}},{key:"_ground",get:function(){var e,t,n;return null===(e=this._viewModel)||void 0===e||null===(t=e.view)||void 0===t||null===(n=t.map)||void 0===n?void 0:n.ground}},{key:"_groundLayers",get:function(){var e,t,n;return null!==(e=null===(t=this._ground)||void 0===t||null===(n=t.layers)||void 0===n?void 0:n.toArray())&&void 0!==e?e:[]}},{key:"queryElevation",value:function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t,n){var i,o,a,l,s,u;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(i=this._queryElevationDependencies)){e.next=3;break}throw new Error("ElevationProfileLineGround: no dependencies");case 3:if(null!=(o=i.ground)){e.next=6;break}throw new Error("No ground configured in the view");case 6:return e.next=8,o.queryElevation(t,n);case 8:return a=e.sent,l=(0,z._R)(t.spatialReference),s=(0,z._R)(o.layers.at(0).spatialReference),l!==s&&((u=a.geometry).points=u.points.map((function(e){var t=(0,W.Z)(e,3),i=t[0],r=t[1],o=t[2];return[i,r,o===n.noDataValue?o:o*s/l]}))),e.abrupt("return",a);case 13:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"attach",value:function(e){var t=this;return(0,H.AL)([(0,nt.Z)((0,it.Z)(n.prototype),"attach",this).call(this,e),(0,g.watch)((function(){return t._queryElevationDependencies}),(function(){return t._onChange()}))])}}]),n}(dt);(0,p._)([(0,m.Cb)({type:rt.Z,nonNullable:!0})],yt.prototype,"color",void 0),(0,p._)([(0,m.Cb)()],yt.prototype,"viewVisualizationEnabled",void 0),(0,p._)([(0,m.Cb)()],yt.prototype,"available",null),(0,p._)([(0,m.Cb)({readOnly:!0})],yt.prototype,"minDemResolution",null),(0,p._)([(0,m.Cb)()],yt.prototype,"_queryElevationDependencies",null),(0,p._)([(0,m.Cb)()],yt.prototype,"_ground",null),(0,p._)([(0,m.Cb)()],yt.prototype,"_groundLayers",null);var _t=yt=(0,p._)([(0,k.j)("esri.widgets.ElevationProfile.ElevationProfileLineGround")],yt),gt=n(77043),mt=function(e){(0,c.Z)(n,e);var t=(0,d.Z)(n);function n(e){var i;return(0,s.Z)(this,n),(i=t.call(this,e)).type="input",i.color=new rt.Z("#00c8c8"),i.viewVisualizationEnabled=!1,i.numSamplesForPreview=50,i.numSamplesPerChunk=500,i.chartFillEnabled=!1,i.chartStrokeOffsetY=-1,i._getQueryElevationDependencies=(0,y.H)((function(e,t,n,i,r){return e?{elevationInfo:e,visibleLayers:t,view:n,stationary:i,spatialReference:r}:null})),i}return(0,u.Z)(n,[{key:"queryElevationDependencies",get:function(){var e,t=null===(e=this._viewModel)||void 0===e?void 0:e.view;return null==t?null:this._getQueryElevationDependencies(this._elevationInfo,this._visibleLayers,t,t.stationary,t.spatialReference)}},{key:"available",get:function(){var e;return!(null!==(e=this._viewModel)&&void 0!==e&&e.inputIsSketched)}},{key:"_elevationInfo",get:function(){var e,t=null===(e=this._viewModel)||void 0===e?void 0:e.input;return t?(0,j.RL)(t):null}},{key:"_visibleLayers",get:function(){var e,t,n,i,r;return null!==(e=null===(t=this._viewModel)||void 0===t||null===(n=t.view)||void 0===n||null===(i=n.map)||void 0===i||null===(r=i.allLayers)||void 0===r?void 0:r.filter((function(e){return e.visible})).toArray())&&void 0!==e?e:[]}},{key:"queryElevation",value:function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t,n){var i,o,a,l,s,u,c,d;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.noDataValue,o=n.signal,null!=(a=this.queryElevationDependencies)){e.next=4;break}throw new Error("ElevationProfileLineInput: no dependencies");case 4:if(l=a.view,s=a.elevationInfo,u=a.spatialReference,"on-the-ground"!==s.mode||"3d"!==l.type||!u){e.next=13;break}return e.next=8,gt.GeometryDescriptor.fromGeometry(t).project(u,o);case 8:if(c=e.sent){e.next=11;break}return e.abrupt("return",{geometry:t,noDataValue:i});case 11:return d=l.elevationProvider,e.abrupt("return",(c.coordinates.forEach((function(e){var t;e.z=null!==(t=d.getElevation(e.x,e.y,0,u,"ground"))&&void 0!==t?t:0})),{geometry:c.export(),noDataValue:i}));case 13:return e.abrupt("return",{geometry:t,noDataValue:i});case 14:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"attach",value:function(e){var t=this,i=function(){return t._onChange()};return(0,H.AL)([(0,nt.Z)((0,it.Z)(n.prototype),"attach",this).call(this,e),(0,g.watch)((function(){return t.queryElevationDependencies}),i),(0,g.on)((function(){return e.elevationProvider}),"elevation-change",i,{onListenerAdd:i,onListenerRemove:i})])}}]),n}(dt);(0,p._)([(0,m.Cb)({type:rt.Z,nonNullable:!0})],mt.prototype,"color",void 0),(0,p._)([(0,m.Cb)()],mt.prototype,"viewVisualizationEnabled",void 0),(0,p._)([(0,m.Cb)()],mt.prototype,"queryElevationDependencies",null),(0,p._)([(0,m.Cb)()],mt.prototype,"available",null),(0,p._)([(0,m.Cb)()],mt.prototype,"_elevationInfo",null),(0,p._)([(0,m.Cb)()],mt.prototype,"_visibleLayers",null);var bt=mt=(0,p._)([(0,k.j)("esri.widgets.ElevationProfile.ElevationProfileLineInput")],mt),kt=function(e){(0,c.Z)(n,e);var t=(0,d.Z)(n);function n(e){var i;return(0,s.Z)(this,n),(i=t.call(this,e)).type="query",i.color=new rt.Z("#db334a"),i.viewVisualizationEnabled=!0,i.source=null,i.numSamplesForPreview=50,i.numSamplesPerChunk=500,i}return(0,u.Z)(n,[{key:"minDemResolution",get:function(){return pt(this.source)}},{key:"available",get:function(){var e=this.source;return!!e&&(null==e.visible||e.visible)&&(null==e.layers||e.layers.some((function(e){return e.visible})))}},{key:"queryElevation",value:function(e,t){if(!this.source)throw new Error("No source configured for the elevation profile line");return this.source.queryElevation(e,t)}},{key:"attach",value:function(e){var t=this;return(0,H.AL)([(0,nt.Z)((0,it.Z)(n.prototype),"attach",this).call(this,e),(0,g.watch)((function(){return t.source}),(function(){return t._onChange()}),g.sync)])}}]),n}(dt);(0,p._)([(0,m.Cb)({type:rt.Z,nonNullable:!0})],kt.prototype,"color",void 0),(0,p._)([(0,m.Cb)()],kt.prototype,"viewVisualizationEnabled",void 0),(0,p._)([(0,m.Cb)()],kt.prototype,"source",void 0),(0,p._)([(0,m.Cb)({readOnly:!0})],kt.prototype,"minDemResolution",null),(0,p._)([(0,m.Cb)()],kt.prototype,"available",null);var Ct=kt=(0,p._)([(0,k.j)("esri.widgets.ElevationProfile.ElevationProfileLineQuery")],kt),wt=n(92377),Zt=n(12400),St=n(83448),xt=n(40885),Et=n(9985),Pt=n(88153),It=n(54463),Dt=n(41781),Mt=function(e){(0,c.Z)(n,e);var t=(0,d.Z)(n);function n(e){var i;return(0,s.Z)(this,n),(i=t.call(this,e)).type="view",i.color=new rt.Z("#cf4ccf"),i.viewVisualizationEnabled=!0,i.include=null,i.exclude=null,i.numSamplesForPreview=50,i.numSamplesPerChunk=25,i._getQueryElevationDependencies=(0,y.H)((function(e,t,n,i,r,o,a){return{inputGraphicUid:null!=e?Lt(e):null,visibleLayers:t,maxIntersectionDistance:n,intersectOptions:i,view:r,stationary:o,spatialReference:a}})),i._vecA=(0,Zt.Ue)(),i._vecB=(0,Zt.Ue)(),i._ray=(0,xt.Ue)(),i}return(0,u.Z)(n,[{key:"minDemResolution",get:function(){var e,t,n,i=null===(e=this._viewModel)||void 0===e?void 0:e.view;if(null==i||"3d"!==i.type)return null;var r=null===(t=i.pointsOfInterest)||void 0===t||null===(n=t.focus)||void 0===n?void 0:n.worldUnitsPerContentPixel;return null==r?null:r*(0,z._R)(i.spatialReference)}},{key:"queryElevationDependencies",get:function(){var e,t=this._view;return t?this._getQueryElevationDependencies(null===(e=this._viewModel)||void 0===e?void 0:e.input,this._visibleLayers,this._maxIntersectionDistance,this._intersectOptions,t,t.stationary,t.spatialReference):null}},{key:"_visibleLayers",get:function(){var e,t,n,i;return null!==(e=null===(t=this._view)||void 0===t||null===(n=t.map)||void 0===n||null===(i=n.allLayers)||void 0===i?void 0:i.filter((function(e){return e.visible})).toArray())&&void 0!==e?e:[]}},{key:"_intersectOptions",get:function(){var e=this._view;if(null==e||e.destroyed)return{};var t=(0,Et.us)(e,{include:this.include,exclude:this.exclude}),n=(0,Et.us)(e,{exclude:this._pointCloudLayers});return t.exclude=(0,wt.G0)(t.exclude,n.exclude),t}},{key:"_pointCloudLayers",get:function(){var e=this._view;return null==e?[]:e.allLayerViews.toArray().filter((function(e){var t;return"point-cloud"===(null===(t=e.layer)||void 0===t?void 0:t.type)})).map((function(e){return e.layer}))}},{key:"_view",get:function(){var e,t=null===(e=this._viewModel)||void 0===e?void 0:e.view;return null!=t&&"3d"===t.type?t:null}},{key:"_maxIntersectionDistance",get:function(){var e=this._view;return null!==e&&void 0!==e&&e.renderCoordsHelper?(0,St.Iu)(e.spatialReference).radius/e.renderCoordsHelper.unitInMeters:Number.POSITIVE_INFINITY}},{key:"_intersector",get:function(){var e=this._view;if(null==e)return null;var t=(0,Pt.Z8)(e.state.viewingMode),n=t.options;return n.hud=!1,n.invisibleTerrain=!1,n.backfacesTerrain=!1,n.selectionMode=!1,n.store=It.eC.ALL,t}},{key:"queryElevation",value:function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t,n){var i,o,a,l,s,u,c,d,h,p,v,f,y,_,g,m,b,k,C,w,Z;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.noDataValue,o=n.signal,null!=(a=this.queryElevationDependencies)){e.next=4;break}throw new Error("ElevationProfileLineInput: no dependencies");case 4:if(null!=(l=this._intersector)){e.next=7;break}throw new Error("ElevationProfileLineInput: no view");case 7:if(s=a.intersectOptions,u=a.view,c=a.spatialReference,d=u.renderCoordsHelper,h=u.sceneIntersectionHelper,p=this._vecA,v=this._vecA,f=this._vecB,y=this._ray,c){e.next=10;break}return e.abrupt("return",{geometry:t,noDataValue:i});case 10:return e.next=12,gt.GeometryDescriptor.fromGeometry(t).project(c,o);case 12:if(_=e.sent){e.next=15;break}return e.abrupt("return",{geometry:t,noDataValue:i});case 15:for(g=_.coordinates,m=g.length,b=0;b<m;++b)C=g[b],(0,K.s)(f,C.x,C.y,null!==(k=C.z)&&void 0!==k?k:0),d.toRenderCoords(f,c,f),d.setAltitude(p,2e5,f),w=(0,xt.zk)(p,f,y),h.computeIntersection(w,l,s,!0),(Z=Rt(a,l.results.all))?(Z.getIntersectionPoint(v),d.fromRenderCoords(v,v,c),C.z=v[2]):C.z=i;return e.abrupt("return",{geometry:_.export(),noDataValue:i});case 18:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"attach",value:function(e){var t=this,i=function(){return t._onChange()};return(0,H.AL)([(0,nt.Z)((0,it.Z)(n.prototype),"attach",this).call(this,e),(0,g.watch)((function(){return t.queryElevationDependencies}),i),(0,g.on)((function(){return e.elevationProvider}),"elevation-change",i,{onListenerAdd:i,onListenerRemove:i})])}}]),n}(dt);function Rt(e,t){var n,i=e.view,r=e.inputGraphicUid,o=e.maxIntersectionDistance,l=(0,a.Z)(t);try{for(l.s();!(n=l.n()).done;){var s=n.value;if(!(null!=s.distanceInRenderSpace&&s.distanceInRenderSpace>o)){var u=(0,Dt.tB)(s,i);if(null==u||Lt(u)!==r)return s}}}catch(c){l.e(c)}finally{l.f()}return null}function Lt(e){if(e.layer&&"objectIdField"in e.layer){var t=e.attributes[e.layer.objectIdField];if(t)return"o-".concat(e.layer.id,"-").concat(t)}return"u-".concat(e.uid)}(0,p._)([(0,m.Cb)({type:rt.Z,nonNullable:!0})],Mt.prototype,"color",void 0),(0,p._)([(0,m.Cb)()],Mt.prototype,"viewVisualizationEnabled",void 0),(0,p._)([(0,m.Cb)()],Mt.prototype,"include",void 0),(0,p._)([(0,m.Cb)()],Mt.prototype,"exclude",void 0),(0,p._)([(0,m.Cb)({readOnly:!0})],Mt.prototype,"minDemResolution",null),(0,p._)([(0,m.Cb)()],Mt.prototype,"queryElevationDependencies",null),(0,p._)([(0,m.Cb)()],Mt.prototype,"_visibleLayers",null),(0,p._)([(0,m.Cb)()],Mt.prototype,"_intersectOptions",null),(0,p._)([(0,m.Cb)()],Mt.prototype,"_pointCloudLayers",null),(0,p._)([(0,m.Cb)()],Mt.prototype,"_view",null),(0,p._)([(0,m.Cb)()],Mt.prototype,"_maxIntersectionDistance",null),(0,p._)([(0,m.Cb)()],Mt.prototype,"_intersector",null),Mt=(0,p._)([(0,k.j)("esri.widgets.ElevationProfile.ElevationProfileLineView")],Mt);var Ut,Tt,Ot,At={base:dt,key:"type",typeMap:{ground:_t,input:bt,query:Ct,view:Mt},errorContext:"elevation-profile-line"},Vt=O.Z.ofType(At),Bt=n(93655),zt=n(75021),Gt=n(14404),Nt=n(1614),qt=n(40763);(Ot=Ut||(Ut={})).Ready="ready",Ot.Creating="creating",Ot.Reshaping="reshaping",Ot.ReshapingDisabled="reshaping-disabled",Ot.Selecting="selecting",Ot.Selected="selected",function(e){e.View="view",e.Main="main",e.Interaction="interaction"}(Tt||(Tt={}));var Ht=function(e){(0,c.Z)(n,e);var t=(0,d.Z)(n);function n(e){var i;return(0,s.Z)(this,n),(i=t.call(this,e)).state=Ut.Ready,i._pendingStartOptions=null,i._previousInputInfo=null,i._shouldRemoveLastPoint=!1,i._sketchedGraphics=new WeakSet,i._creationToolPromise=null,i._updateToolPromise=null,i._updateDisabled=!1,i}return(0,u.Z)(n,[{key:"initialize",value:function(){var e=this;this.addHandles((0,g.watch)((function(){return{view:e.tool.viewModel.view,visible:e.tool.visible}}),(function(t){var n=t.view,i=t.visible;null!=n&&i?e._attach(n):e._detach()}),g.syncAndInitial),Tt.View)}},{key:"destroy",value:function(){this._detach()}},{key:"canStopCreating",get:function(){var e=this._geometry,t=this._shouldRemoveLastPoint?3:2;return he(e)&&e.paths.length>0&&e.paths[0].length>=t}},{key:"_input",get:function(){return this.tool.viewModel.input},set:function(e){this.tool.viewModel.input=e}},{key:"_geometry",get:function(){var e;return null===(e=this._input)||void 0===e?void 0:e.geometry}},{key:"_visibleAndEditable",get:function(){return this.tool.visible&&this.tool.editable}},{key:"_view",get:function(){return this.tool.viewModel.view}},{key:"test",get:function(){}},{key:"start",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{mode:"sketch"};if(this.tool.editable){var t=this._view;if(null!=t&&t.ready)switch(this._pendingStartOptions=null,this._stopInteraction(),null==this._previousInputInfo&&this._storePreviousInput(this._input),this._setSketchedGraphic(null),e.mode){case"sketch":this._set("state",Ut.Creating),this._startCreationInteraction();break;case"select":this._set("state",Ut.Selecting),this._startSelectionInteraction()}else this._pendingStartOptions=e}}},{key:"stop",value:function(){this._pendingStartOptions=null,this._stopInteractionAndUpdate(),this._clearPreviousInput()}},{key:"cancel",value:function(){this._pendingStartOptions=null,this._stopInteractionAndUpdate(),this._restorePreviousInput()}},{key:"clear",value:function(){this._stopInteractionAndUpdate(),this._set("state",Ut.Ready),this._clearPreviousInput(),this._input=null,this._pendingStartOptions=null}},{key:"isSketchedGraphic",value:function(e){return null!=e&&this._sketchedGraphics.has(e)}},{key:"_attach",value:function(e){var t=this;this._detach();var n={mode:"3d"===e.type?"relative-to-ground":"on-the-ground",offset:null};this._graphicsLayer=new Bt.default({listMode:"hide",internal:!0,elevationInfo:n});var i=function(e){return"2d"===e?new zt.Z({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",effects:[{type:"CIMGeometricEffectDashes",dashTemplate:[5,4],lineDashEnding:"FullGap",controlPointEnding:"NoConstraint"}],enable:!0,capStyle:"Butt",joinStyle:"Round",width:1.5,color:[0,0,0,255]},{type:"CIMSolidStroke",enable:!0,capStyle:"Butt",joinStyle:"Round",width:1.5,color:[255,255,255,255]}]}}}):new Gt.default({color:[0,0,0,0]})}(e.type);this._sketchVM=new qt.Z({layer:this._graphicsLayer,view:e,defaultCreateOptions:{mode:"click",hasZ:!1},updateOnGraphicClick:!1,defaultUpdateOptions:{reshapeOptions:{shapeOperation:"none"},enableRotation:!1,enableScaling:!1,enableMoveAllGraphics:!1,enableZ:!1,multipleSelectionEnabled:!1,toggleToolOnClick:!1,tool:"reshape"},polylineSymbol:i,activeLineSymbol:i}),this.addHandles([(0,g.when)((function(){return e.ready}),(function(){var e=t._pendingStartOptions;e&&t.start(e)}),g.syncAndInitial),(0,g.watch)((function(){return[t._input,t._visibleAndEditable]}),(function(){return t._update()}),g.syncAndInitial),(0,g.watch)((function(){return{map:e.map,graphicsLayer:t._graphicsLayer}}),(function(e){var n=e.map,i=e.graphicsLayer;null!=n&&null!=i&&n.add(i),t._update()}),g.syncAndInitial)],Tt.Main)}},{key:"_detach",value:function(){var e;this.removeHandles(Tt.Main),this._sketchVM=(0,f.SC)(this._sketchVM),this._creationToolPromise=null,this._updateToolPromise=null;var t=null===(e=this._view)||void 0===e?void 0:e.map,n=this._graphicsLayer;null!=t&&null!=n&&t.remove(n),this._graphicsLayer=(0,f.SC)(this._graphicsLayer),this._shouldRemoveLastPoint=!1,this._set("state",Ut.Ready)}},{key:"_startCreationInteraction",value:function(){var e=this;this._stopInteractionAndUpdate();var t=this._view,n=this._sketchVM;if(null!=t&&null!=n){this._shouldRemoveLastPoint=!1;var i=n.on("create",(function(t){var n,i=t.graphic;switch(t.state){case"complete":e._shouldRemoveLastPoint=!1,e._setSketchedGraphic(i),e._stopInteractionAndUpdate(),e._clearPreviousInput();break;case"cancel":e.cancel();break;case"active":e._setSketchedGraphic(i),"cursor-update"===(null===(n=t.toolEventInfo)||void 0===n?void 0:n.type)&&(e._shouldRemoveLastPoint=!0);break;case"start":e._setSketchedGraphic(i)}}));this.removeHandles(Tt.Interaction),this.addHandles((0,H.kB)((function(){var t;i.remove();var r=e.canStopCreating,o=null===(t=e._geometry)||void 0===t?void 0:t.clone();n.cancel(),e._creationToolPromise=null,null!=o&&r?e._shouldRemoveLastPoint&&e._setSketchedGraphic(new R.Z({geometry:Ft(o)})):e._input=null})),Tt.Interaction),this._creationToolPromise=(0,_.R8)(n.create("polyline"))}}},{key:"_startReshapeInteraction",value:function(){var e=this;this._stopInteraction();var t=this._view,n=this._sketchVM;if(null!=t&&null!=n){var i=n.on("update",(function(t){var n=t.graphics[0];switch(t.state){case"complete":e._setSketchedGraphic(n),e._stopInteractionAndUpdate(),e._clearPreviousInput();break;case"active":case"start":e._setSketchedGraphic(n)}}));this.removeHandles(Tt.Interaction),this.addHandles((0,H.kB)((function(){i.remove(),n.cancel(),e._updateToolPromise=null})),Tt.Interaction);var r=this._input;r&&(r.visible=!0,this._updateToolPromise=(0,_.R8)(n.update(r,{tool:"reshape"})))}}},{key:"_startSelectionInteraction",value:function(){var e=this;this._stopInteraction();var t=this._view;if(null!=t){var n=t.cursor,i=(0,H.kB)((function(){return t.cursor=n}));t.cursor="crosshair",t.closePopup();var a=null,l=(0,H.kB)((function(){return(0,f.IM)(a)})),s=t.on("immediate-click",(function(n){n.async((0,o.Z)((0,r.Z)().mark((function i(){return(0,r.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return(0,f.IM)(a),a=(0,v.vr)(function(){var i=(0,o.Z)((0,r.Z)().mark((function i(o){var a,l,s;return(0,r.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,t.hitTest(n);case 2:a=i.sent,l=a.results,(0,_.k_)(o),s=l.filter((function(e){return"graphic"===e.type&&null!=e.graphic})).map((function(e){return e.graphic})).find((function(e){return null!=e.geometry&&"polyline"===e.geometry.type})),s&&(n.preventDefault(),n.stopPropagation(),e._input=s,e._clearPreviousInput(),e._stopInteractionAndUpdate());case 7:case"end":return i.stop()}}),i)})));return function(e){return i.apply(this,arguments)}}()),i.next=4,a.promise;case 4:case"end":return i.stop()}}),i)}))))}),Nt.f.TOOL),u=t.on("key-down",(function(t){"Escape"===t.key&&e.cancel()}));this.removeHandles(Tt.Interaction),this.addHandles([s,u,l,i],Tt.Interaction),t.ready&&t.focus()}}},{key:"_stopInteraction",value:function(){this.removeHandles(Tt.Interaction)}},{key:"_stopInteractionAndUpdate",value:function(){this.hasHandles(Tt.Interaction)&&(this._updateDisabled=!0,this._stopInteraction(),this._updateDisabled=!1,this._triggerUpdate())}},{key:"_triggerUpdate",value:function(){this._set("state",Ut.Ready),this._update()}},{key:"_update",value:function(){if(!this._updateDisabled){var e=this.state;if(e!==Ut.Selecting){if(this._visibleAndEditable){if(e===Ut.Creating||e===Ut.Reshaping&&this.isSketchedGraphic(this._input))return}else this.cancel();this._set("state",this._getNextState()),this._updateVisuals()}else this.stop()}}},{key:"_getNextState",value:function(){return null==this._input?Ut.Ready:this.isSketchedGraphic(this._input)?this.state===Ut.Creating?Ut.Creating:this._visibleAndEditable?Ut.Reshaping:Ut.ReshapingDisabled:Ut.Selected}},{key:"_updateVisuals",value:function(){switch(this.state){case Ut.Creating:break;case Ut.Reshaping:this._startReshapeInteraction();break;case Ut.ReshapingDisabled:this._stopInteractionAndUpdate();var e=this._input;null!=e&&this.isSketchedGraphic(e)&&(e.visible=!1);break;case Ut.Ready:case Ut.Selected:this._stopInteractionAndUpdate();case Ut.Selecting:}this._updateSketchedGraphic()}},{key:"_storePreviousInput",value:function(e){this._previousInputInfo={graphic:e}}},{key:"_restorePreviousInput",value:function(){var e=this._previousInputInfo;null!=e&&(this._clearPreviousInput(),this._input=e.graphic,this._triggerUpdate())}},{key:"_clearPreviousInput",value:function(){this._previousInputInfo=null}},{key:"_updateSketchedGraphic",value:function(){var e=this._graphicsLayer;if(null!=e){var t=e.graphics,n=this._input;if(null!=n&&this.isSketchedGraphic(n)){if(-1===t.indexOf(n))t.removeAll(),t.add(n);else if(1!==t.length){var i=t.filter((function(e){return e!==n}));t.removeMany(i)}}else t.removeAll()}}},{key:"_setSketchedGraphic",value:function(e){null!=e&&this._sketchedGraphics.add(e),this._input=e,this._updateSketchedGraphic()}}]),n}(L.default);function Ft(e){if(he(e)){var t=e.clone();return t.paths=[t.paths[0].slice(0,-1)],t}return e}(0,p._)([(0,m.Cb)({nonNullable:!0})],Ht.prototype,"state",void 0),(0,p._)([(0,m.Cb)({nonNullable:!0})],Ht.prototype,"tool",void 0),(0,p._)([(0,m.Cb)()],Ht.prototype,"canStopCreating",null),(0,p._)([(0,m.Cb)()],Ht.prototype,"_graphicsLayer",void 0),(0,p._)([(0,m.Cb)()],Ht.prototype,"_sketchVM",void 0),(0,p._)([(0,m.Cb)()],Ht.prototype,"_input",null),(0,p._)([(0,m.Cb)()],Ht.prototype,"_geometry",null),(0,p._)([(0,m.Cb)()],Ht.prototype,"_visibleAndEditable",null),(0,p._)([(0,m.Cb)()],Ht.prototype,"_view",null),(0,p._)([(0,m.Cb)()],Ht.prototype,"_shouldRemoveLastPoint",void 0),Ht=(0,p._)([(0,k.j)("esri.widgets.ElevationProfile.ElevationProfileInteraction")],Ht);var jt=function(e){(0,c.Z)(i,e);var t=(0,d.Z)(i);function i(e){var n;return(0,s.Z)(this,i),(n=t.call(this,e))._implementation=null,n._loadingTask=null,n}return(0,u.Z)(i,[{key:"initialize",value:function(){var e=this;this.addHandles((0,g.watch)((function(){var t;return{tool:e.tool,view:e.tool.viewModel.view,visible:e.tool.visible&&!(null===(t=e.tool.viewModel.view)||void 0===t||!t.ready)}}),(function(t){var n=t.tool,i=t.view,r=t.visible;null!=i&&r?e._show(i,n):e._hide()}),g.syncAndInitial))}},{key:"destroy",value:function(){this._hide()}},{key:"_show",value:function(e,t){var i=this;this._loadingTask=(0,f.IM)(this._loadingTask),this._loadingTask=(0,v.vr)(function(){var a=(0,o.Z)((0,r.Z)().mark((function o(a){var l,s,u,c;return(0,r.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if("2d"!==e.type){r.next=8;break}return l=n.e(69570).then(n.bind(n,69570)),r.next=4,(0,_.Hl)(l,a);case 4:s=r.sent.ElevationProfileView2D,i._implementation=new s(e,t),r.next=14;break;case 8:if("3d"!==e.type){r.next=14;break}return u=Promise.all([n.e(57808),n.e(25158),n.e(69656),n.e(25269),n.e(11219),n.e(96026),n.e(97411),n.e(87853)]).then(n.bind(n,90188)),r.next=12,(0,_.Hl)(u,a);case 12:c=r.sent.ElevationProfileView3D,i._implementation=new c(e,t);case 14:case"end":return r.stop()}}),o)})));return function(e){return a.apply(this,arguments)}}())}},{key:"_hide",value:function(){this._loadingTask=(0,f.IM)(this._loadingTask),this._implementation=(0,f.SC)(this._implementation)}}]),i}(L.default);(0,p._)([(0,m.Cb)()],jt.prototype,"tool",void 0),jt=(0,p._)([(0,k.j)("esri.widgets.ElevationProfile.support.ElevationProfileView")],jt);var Jt=function(e){(0,c.Z)(n,e);var t=(0,d.Z)(n);function n(e){var i;return(0,s.Z)(this,n),(i=t.call(this,e)).editable=!0,i.visible=!0,i.highlightEnabled=!0,i}return(0,u.Z)(n,[{key:"initialize",value:function(){this.view=new jt({tool:this}),this.interaction=new Ht({tool:this})}},{key:"destroy",value:function(){this.interaction.destroy(),this.view.destroy()}},{key:"state",get:function(){var e;switch(null===(e=this.interaction)||void 0===e?void 0:e.state){case Ut.Ready:return J.dd.Ready;case Ut.Creating:return J.dd.Creating;case Ut.Selecting:return J.dd.Selecting;case Ut.Selected:return J.dd.Selected;case Ut.Reshaping:case Ut.ReshapingDisabled:return J.dd.Created}}}]),n}(L.default);(0,p._)([(0,m.Cb)({nonNullable:!0})],Jt.prototype,"viewModel",void 0),(0,p._)([(0,m.Cb)()],Jt.prototype,"view",void 0),(0,p._)([(0,m.Cb)()],Jt.prototype,"interaction",void 0),(0,p._)([(0,m.Cb)()],Jt.prototype,"editable",void 0),(0,p._)([(0,m.Cb)()],Jt.prototype,"visible",void 0),(0,p._)([(0,m.Cb)()],Jt.prototype,"highlightEnabled",void 0),Jt=(0,p._)([(0,k.j)("esri.widgets.ElevationProfile.ElevationProfileTool")],Jt);var Wt=function(e){(0,c.Z)(n,e);var t=(0,d.Z)(n);function n(e){var i;return(0,s.Z)(this,n),(i=t.call(this,e)).view=null,i.input=null,i._getEffectiveUnitsMemoized=(0,y.H)((function(e,t){return{distance:e,elevation:t}})),i.hoveredChartPosition=null,i.uniformChartScaling=!1,i.defaultUnit=null,i.queue=null,i._currentTileCache=null,i.error=null,i._defaultProfileLineGround=new _t,i._userUnitOptions=null,i._userUnit=null,(null===e||void 0===e?void 0:e.profiles)||(i.profiles=new O.Z([i._defaultProfileLineGround])),i}return(0,u.Z)(n,[{key:"initialize",value:function(){var e=this;this.addHandles((0,g.watch)((function(){return e.view}),(function(t){var n;if(null!=t){e.removeHandles(Yt);var i="3d"===t.type?t.resourceController:void 0;null!==(n=e.queue)&&void 0!==n&&n.destroy(),e.queue=function(e){return new De.e({priority:Me.T8.ELEVATION_PROFILE,concurrency:1,scheduler:e,process:function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,_.k_)(t.queryOptions),e.prev=1,e.next=4,He(t);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),(0,_.H9)(e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()})}(null===i||void 0===i?void 0:i.scheduler);var a=null===i||void 0===i?void 0:i.addUpdatingObject(e);a&&e.addHandles(a,Yt)}else b.Z.getLogger(e).warnOnce("no view. Widget will be disabled until a view is provided.")}),g.syncAndInitial)),this.tool=new Jt({viewModel:this}),this._controller=new tt({viewModel:this})}},{key:"destroy",value:function(){this._defaultProfileLineGround=(0,f.SC)(this._defaultProfileLineGround),this._controller=(0,f.SC)(this._controller),this._currentTileCache=(0,f.SC)(this._currentTileCache),this.tool=(0,f.SC)(this.tool),this.queue=(0,f.SC)(this.queue)}},{key:"profiles",get:function(){return this._get("profiles")},set:function(e){var t=this._get("profiles"),n=null!==e&&void 0!==e?e:new O.Z;this._set("profiles",(0,A.Z)(n,t))}},{key:"state",get:function(){var e=this.view;return null!=e&&e.ready?this.tool.state:J.dd.Disabled}},{key:"progress",get:function(){var e,t=0,n=0,i=(0,a.Z)(this.visibleProfiles);try{for(i.s();!(e=i.n()).done;){var r=e.value;t++,n+=r.progress}}catch(o){i.e(o)}finally{i.f()}return t>0?n/t:0}},{key:"unitOptions",get:function(){return this._filteredOrAllUnits(this._userUnitOptions)},set:function(e){this._userUnitOptions=e,this._set("unitOptions",this._filteredOrAllUnits(this._userUnitOptions))}},{key:"unit",get:function(){return this._userUnit?(this._userUnit=this._findSelectableUnit(this._userUnit,this.defaultUnit),this._userUnit):this._findSelectableUnit(this.defaultUnit)},set:function(e){this._userUnit=e?this._findSelectableUnit(e,this._userUnit):null,this.notifyChange("unit")}},{key:"effectiveUnits",get:function(){var e=function(e){var t,n,i,r,o=null,l=null,s=null,u=(0,a.Z)(e);try{for(u.s();!(r=u.n()).done;){var c=r.value;if(null!=c){var d=c.statistics,h=c.spatialReference;if(null!=d){var p=(0,z.c9)(h);o=Ue(o,Te(d.maxDistance,p));var v=(0,z._R)(h);s=Le(s,Te(d.minElevation,v)),l=Ue(l,Te(d.maxElevation,v))}}}}catch(f){u.e(f)}finally{u.f()}return{minDistance:0,maxDistance:null!==(t=o)&&void 0!==t?t:0,minElevation:null!==(n=s)&&void 0!==n?n:0,maxElevation:null!==(i=l)&&void 0!==i?i:0}}(this.visibleProfiles.map((function(e){return e.result}))),t=(0,z.wd)(e.maxDistance,"meters",this.unit),n=(0,z.yv)(e.maxElevation,"meters",this.unit);return this._getEffectiveUnitsMemoized(t,n)}},{key:"geodesicDistanceThreshold",get:function(){return this._get("geodesicDistanceThreshold")},set:function(e){(0,V.Mr)(b.Z.getLogger(this),"geodesicDistanceThreshold",{version:"4.29",warnOnce:!0}),this._set("geodesicDistanceThreshold",e)}},{key:"highlightEnabled",get:function(){return this.tool.highlightEnabled},set:function(e){this.tool.highlightEnabled=e}},{key:"hasVertices",get:function(){var e,t=null===(e=this.input)||void 0===e?void 0:e.geometry;return he(t)&&t.paths.reduce((function(e,t){return e+t.length}),0)>0}},{key:"hoveredPoints",get:function(){return null!=this.input&&this.visible&&this.tool.editable?this.visibleProfiles.map((function(e){var t=e.hoveredPoint;return null!=t?{hoveredPoint:t,color:e.color}:null})).filter(U.pC):[]}},{key:"statistics",get:function(){return function(e){var t=e.filter(U.pC),n=t.length;if(0===n)return null;var i=t[0];if(1===n)return i;for(var r=i.maxDistance,o=i.minElevation,a=i.maxElevation,l=i.maxPositiveSlope,s=i.maxNegativeSlope,u=1;u<t.length;++u){var c=t[u];r=Ue(r,c.maxDistance),o=Le(o,c.minElevation),a=Ue(a,c.maxElevation),l=Ue(l,c.maxPositiveSlope),s=Ue(s,c.maxNegativeSlope)}return{maxDistance:r,minElevation:o,maxElevation:a,avgElevation:null,elevationGain:null,elevationLoss:null,maxPositiveSlope:l,maxNegativeSlope:s,avgPositiveSlope:null,avgNegativeSlope:null}}(this.visibleProfiles.map((function(e){return e.statistics})))}},{key:"chartData",get:function(){if(null==this.input)return null;var e=this.effectiveUnits,t=this.progress,n=this.statistics,i=this.visibleProfiles,r=this.uniformChartScaling,o=i.filter((function(e){return e.hasZ})).map((function(e){return{id:e.id,type:e.type,title:e.title,color:e.color,samples:e.samples,progress:e.progress,chartFillEnabled:e.chartFillEnabled,chartStrokeWidth:e.chartStrokeWidth,chartStrokeOffsetY:e.chartStrokeOffsetY,viewVisualizationEnabled:e.viewVisualizationEnabled}}));return 0===o.length?null:{lines:o,effectiveUnits:e,statistics:n,refined:1===t,dynamicElevationRange:i.some((function(e){return"view"===e.type})),uniformScaling:r}}},{key:"visibleProfiles",get:function(){return this.profiles.toArray().filter((function(e){return e.available&&e.visible}))}},{key:"minDemResolutions",get:function(){var e,t=[],n=(0,a.Z)(this.visibleProfiles);try{for(n.s();!(e=n.n()).done;){var i=e.value.minDemResolution;null!=i&&t.push(i)}}catch(r){n.e(r)}finally{n.f()}return t}},{key:"minDemResolution",get:function(){return(0,U.VV)(this.minDemResolutions)}},{key:"errorState",get:function(){var e;if(!de(null===(e=this.input)||void 0===e?void 0:e.geometry))return J.J8.NoValidInput;if(null!=this.error){if(function(e){return e.type===ie}(this.error))switch(this.error.cause){case i.TooComplex:return J.J8.TooComplex;case i.InvalidGeometry:return J.J8.InvalidGeometry;case i.InvalidElevationInfo:return J.J8.InvalidElevationInfo;case i.ElevationQueryError:return J.J8.NoValidInput}return J.J8.UnknownError}return 0===this.visibleProfiles.length?J.J8.NoVisibleProfiles:null==this.chartData&&1===this.progress?J.J8.RefinedButNoChartData:J.J8.None}},{key:"tileCache",get:function(){this._currentTileCache=(0,f.SC)(this._currentTileCache);var e=this.view;if(null!=e&&"3d"===(null===e||void 0===e?void 0:e.type)){var t,n=null===(t=e.basemapTerrain)||void 0===t?void 0:t.elevationQueryCache;if(null!=n)return n}return null==this._currentTileCache&&(this._currentTileCache=new G.b(new B.z(20*T.Y.MEGABYTES))),this._currentTileCache}},{key:"visible",get:function(){return this.tool.visible},set:function(e){this.tool.visible=e}},{key:"inputIsSketched",get:function(){return this.tool.interaction.isSketchedGraphic(this.input)}},{key:"elevationProvider",get:function(){var e=this.view;return null!=e&&"3d"===e.type?e.elevationProvider:null}},{key:"updating",get:function(){var e,t=this.progress,n=!(null===(e=this.queue)||void 0===e||!e.updating);return t>0&&t<1||n}},{key:"start",value:function(e){this.tool.interaction.start(e)}},{key:"stop",value:function(){this.tool.interaction.stop()}},{key:"cancel",value:function(){this.tool.interaction.cancel()}},{key:"clear",value:function(){this.tool.interaction.clear()}},{key:"_findSelectableUnit",value:function(e,t){var n=this.unitOptions;return null!=e&&n.includes(e)?e:t?this._findSelectableUnit(t):n[0]}},{key:"_filteredOrAllUnits",value:function(e){var t=(null!=e?e:[]).filter((function(e){return z.oD.includes(e)}));return 0===t.length?z.oD.slice():t}}]),n}(L.default);(0,p._)([(0,m.Cb)()],Wt.prototype,"view",void 0),(0,p._)([(0,m.Cb)({type:R.Z})],Wt.prototype,"input",void 0),(0,p._)([(0,m.Cb)({type:Vt,nonNullable:!0})],Wt.prototype,"profiles",null),(0,p._)([(0,m.Cb)({readOnly:!0})],Wt.prototype,"state",null),(0,p._)([(0,m.Cb)({readOnly:!0})],Wt.prototype,"progress",null),(0,p._)([(0,m.Cb)()],Wt.prototype,"unitOptions",null),(0,p._)([(0,m.Cb)()],Wt.prototype,"unit",null),(0,p._)([(0,m.Cb)({readOnly:!0})],Wt.prototype,"effectiveUnits",null),(0,p._)([(0,m.Cb)()],Wt.prototype,"geodesicDistanceThreshold",null),(0,p._)([(0,m.Cb)()],Wt.prototype,"hoveredChartPosition",void 0),(0,p._)([(0,m.Cb)()],Wt.prototype,"uniformChartScaling",void 0),(0,p._)([(0,m.Cb)()],Wt.prototype,"highlightEnabled",null),(0,p._)([(0,m.Cb)({readOnly:!0})],Wt.prototype,"hoveredPoints",null),(0,p._)([(0,m.Cb)({readOnly:!0})],Wt.prototype,"statistics",null),(0,p._)([(0,m.Cb)()],Wt.prototype,"chartData",null),(0,p._)([(0,m.Cb)()],Wt.prototype,"visibleProfiles",null),(0,p._)([(0,m.Cb)()],Wt.prototype,"minDemResolutions",null),(0,p._)([(0,m.Cb)({readOnly:!0})],Wt.prototype,"minDemResolution",null),(0,p._)([(0,m.Cb)({readOnly:!0})],Wt.prototype,"errorState",null),(0,p._)([(0,m.Cb)(N.Y)],Wt.prototype,"defaultUnit",void 0),(0,p._)([(0,m.Cb)()],Wt.prototype,"queue",void 0),(0,p._)([(0,m.Cb)()],Wt.prototype,"tileCache",null),(0,p._)([(0,m.Cb)()],Wt.prototype,"tool",void 0),(0,p._)([(0,m.Cb)()],Wt.prototype,"visible",null),(0,p._)([(0,m.Cb)()],Wt.prototype,"error",void 0),(0,p._)([(0,m.Cb)()],Wt.prototype,"inputIsSketched",null),(0,p._)([(0,m.Cb)()],Wt.prototype,"elevationProvider",null),(0,p._)([(0,m.Cb)()],Wt.prototype,"updating",null),(0,p._)([(0,m.Cb)()],Wt.prototype,"_defaultProfileLineGround",void 0),(0,p._)([(0,m.Cb)()],Wt.prototype,"_userUnitOptions",void 0),(0,p._)([(0,m.Cb)()],Wt.prototype,"_controller",void 0),(0,p._)([(0,m.Cb)()],Wt.prototype,"_userUnit",void 0),Wt=(0,p._)([(0,k.j)("esri.widgets.ElevationProfile.ElevationProfileViewModel")],Wt);var Yt=Symbol("updating-object"),Qt=Wt,Kt=function(e){(0,c.Z)(n,e);var t=(0,d.Z)(n);function n(){var e;return(0,s.Z)(this,n),(e=t.apply(this,arguments)).legend=!0,e.chart=!0,e.clearButton=!0,e.settingsButton=!0,e.sketchButton=!0,e.selectButton=!0,e.unitSelector=!0,e.uniformChartScalingToggle=!0,e}return(0,u.Z)(n)}(L.default);(0,p._)([(0,m.Cb)()],Kt.prototype,"legend",void 0),(0,p._)([(0,m.Cb)()],Kt.prototype,"chart",void 0),(0,p._)([(0,m.Cb)()],Kt.prototype,"clearButton",void 0),(0,p._)([(0,m.Cb)()],Kt.prototype,"settingsButton",void 0),(0,p._)([(0,m.Cb)()],Kt.prototype,"sketchButton",void 0),(0,p._)([(0,m.Cb)()],Kt.prototype,"selectButton",void 0),(0,p._)([(0,m.Cb)()],Kt.prototype,"unitSelector",void 0),(0,p._)([(0,m.Cb)()],Kt.prototype,"uniformChartScalingToggle",void 0);var Xt=Kt=(0,p._)([(0,k.j)("esri.widgets.ElevationProfile.ElevationProfileVisibleElements")],Kt),$t=(n(59166),n(5163)),en=n(8905),tn=n(80975),nn=n(80532),rn=n(67005),on=function(e){(0,c.Z)(i,e);var t=(0,d.Z)(i);function i(e,n){var r;return(0,s.Z)(this,i),(r=t.call(this,e,n))._updateLayout=function(e){var t=e.parentElement,n=e.style.display;null!==t&&void 0!==t&&t.removeChild(e),document.body.appendChild(e),e.style.display="block";var i,r=80,o=(0,a.Z)(e.childNodes);try{for(o.s();!(i=o.n()).done;){var l=i.value;l instanceof HTMLElement&&(r=Math.max(r,l.offsetWidth))}}catch(s){o.e(s)}finally{o.f()}document.body.removeChild(e),null!==t&&void 0!==t&&t.appendChild(e),e.style.display=n,e.style.setProperty("--max-width","".concat(r,"px"))},r._updateLayoutThrottled=(0,F.P)(r._updateLayout,100),r}return(0,u.Z)(i,[{key:"loadDependencies",value:function(){return(0,en.h)({icon:function(){return Promise.all([n.e(92358),n.e(87474)]).then(n.bind(n,87474))}})}},{key:"initialize",value:function(){this.addHandles(this._updateLayoutThrottled)}},{key:"render",value:function(){return(0,rn.u)("div",{afterCreate:this._updateLayout,afterUpdate:this._updateLayoutThrottled,bind:this,class:I.base},this._renderStatistics())}},{key:"_renderStatistics",value:function(){var e,t=null===(e=this._messages)||void 0===e?void 0:e.statistics;return t?[this._renderDistanceStatistic("maxDistance",t.maxDistance),this._renderElevationStatistic("elevationGain",t.gain),this._renderElevationStatistic("elevationLoss",t.loss),this._renderElevationStatistic("minElevation",t.minElevation),this._renderElevationStatistic("maxElevation",t.maxElevation),this._renderElevationStatistic("avgElevation",t.avgElevation),this._renderSlopeStatistic("maxPositiveSlope","maxNegativeSlope",t.maxSlope),this._renderSlopeStatistic("avgPositiveSlope","avgNegativeSlope",t.avgSlope)]:[]}},{key:"_renderDistanceStatistic",value:function(e,t){var n=this,i=(0,J.iE)().formatPrecision,r=this._renderValue(e,(function(e){var t=n.effectiveUnits.distance;return(0,$t.VG)(n._messagesUnits,e,t,i)}));return this._renderStatistic(t,r)}},{key:"_renderElevationStatistic",value:function(e,t){var n=this,i=(0,J.iE)().formatPrecision,r=this._renderValue(e,(function(e){var t=n.effectiveUnits.elevation;return(0,$t.VG)(n._messagesUnits,e,t,i)}));return this._renderStatistic(t,r)}},{key:"_renderSlopeStatistic",value:function(e,t,n){var i=(0,J.iE)().formatPrecision,r=(0,rn.u)("div",{class:I.slopeValue,key:"slope-up"},(0,rn.u)("calcite-icon",{icon:"arrow-up",scale:"s"}),this._renderValue(e,(function(e){return(0,$t.L4)(e,"degrees","geographic","geographic",i)})),(0,rn.u)("calcite-icon",{icon:"arrow-down",scale:"s"}),this._renderValue(t,(function(e){return(0,$t.L4)(e,"degrees","geographic","geographic",i)})));return this._renderStatistic(n,r)}},{key:"_renderStatistic",value:function(e,t){return(0,rn.u)("div",{class:I.statistic},(0,rn.u)("label",{class:I.statisticLabel},e),(0,rn.u)("div",{class:I.statisticValue},t))}},{key:"_renderValue",value:function(e,t){var n=this.line,i=1===n.progress?n.statistics:null,r=null===i||void 0===i?void 0:i[e];return null!=r?t(r):J.h8}}]),i}(C.Z);(0,p._)([(0,m.Cb)()],on.prototype,"effectiveUnits",void 0),(0,p._)([(0,m.Cb)()],on.prototype,"line",void 0),(0,p._)([(0,m.Cb)(),(0,nn.H)("esri/widgets/ElevationProfile/t9n/ElevationProfile")],on.prototype,"_messages",void 0),(0,p._)([(0,m.Cb)(),(0,nn.H)("esri/core/t9n/Units")],on.prototype,"_messagesUnits",void 0),on=(0,p._)([(0,k.j)("esri.widgets.ElevationProfile.components.Statistics")],on);var an=n(47732),ln=n(8704),sn=function(e){(0,c.Z)(i,e);var t=(0,d.Z)(i);function i(e,n){var r;return(0,s.Z)(this,i),(r=t.call(this,e,n)).checkboxVisible=!0,r.expanded=!1,r}return(0,u.Z)(i,[{key:"loadDependencies",value:function(){return(0,en.h)({action:function(){return Promise.all([n.e(92358),n.e(46895),n.e(65138),n.e(91741)]).then(n.bind(n,6814))},checkbox:function(){return Promise.all([n.e(92358),n.e(54438),n.e(12424)]).then(n.bind(n,12424))},label:function(){return Promise.all([n.e(92358),n.e(35738)]).then(n.bind(n,35738))},tooltip:function(){return Promise.all([n.e(92358),n.e(89219),n.e(94730)]).then(n.bind(n,94730))}})}},{key:"initialize",value:function(){var e=this;this._statistics=new on(this._statisticsProps),this.addHandles((0,g.watch)((function(){return e._statisticsProps}),(function(t){return e._statistics.set(t)})))}},{key:"destroy",value:function(){this._statistics=(0,f.SC)(this._statistics)}},{key:"render",value:function(){var e,t=this.expanded;return(0,rn.u)("div",{class:this.classes(E.base,(e={},(0,h.Z)(e,E.disabled,this.disabled),(0,h.Z)(e,E.expanded,t),e)),key:this},this._renderColorIndicator(),(0,rn.u)("div",{class:E.header,key:"header"},this._renderLabelWithCheckbox(),this._renderCollapseToggleButton()),t?(0,rn.u)("div",{class:E.content,key:"content"},this._statistics.render()):null)}},{key:"disabled",get:function(){return!this.line.available}},{key:"_statisticsProps",get:function(){return{line:this.line,effectiveUnits:this.effectiveUnits}}},{key:"_renderColorIndicator",value:function(){return(0,rn.u)("div",{class:E.colorIndicator,key:"color-indicator",styles:{backgroundColor:this.line.color.toCss()}})}},{key:"_renderCollapseToggleButton",value:function(){var e=this.expanded,t=this.messages,n=e?t.hideDetails:t.showDetails;return(0,rn.u)("calcite-action",{appearance:"transparent",bind:this,class:E.collapseToggle,"data-testid":"legend-toggle",icon:e?"chevron-up":"chevron-down",key:"collapse-toggle",onclick:this._onCollapseToggleClick,scale:"s",text:n,title:n})}},{key:"_onCollapseToggleClick",value:function(){this.onExpandedToggle()}},{key:"_renderLabelWithCheckbox",value:function(){var e=this.line,t=this.checkboxVisible,n=this.disabled,i=this.messages,r="label-".concat(e.id);return(0,rn.u)("calcite-label",{class:E.label,disabled:n,key:r,layout:"inline"},t?this._renderCheckbox(e.id):null,(0,an.f)(e,i))}},{key:"_renderCheckbox",value:function(e){var t=this.disabled,n=this.line,i=this.messages,r=n.visible,o="".concat(e,"-checkbox"),a=r?i.hideProfile:i.showProfile,l=(0,ln.n)(a,{name:(0,an.f)(n,i)});return(0,rn.u)(rn.D,null,(0,rn.u)("calcite-checkbox",{checked:r,class:E.checkbox,disabled:t,id:o,key:"checkbox",onCalciteCheckboxChange:function(){return n.toggleVisibility()}}),(0,rn.u)("calcite-tooltip",{overlayPositioning:"fixed",placement:"top",referenceElement:o},l))}}]),i}(C.Z);(0,p._)([(0,m.Cb)()],sn.prototype,"checkboxVisible",void 0),(0,p._)([(0,m.Cb)()],sn.prototype,"disabled",null),(0,p._)([(0,m.Cb)({nonNullable:!0})],sn.prototype,"effectiveUnits",void 0),(0,p._)([(0,m.Cb)()],sn.prototype,"expanded",void 0),(0,p._)([(0,m.Cb)({nonNullable:!0})],sn.prototype,"line",void 0),(0,p._)([(0,m.Cb)()],sn.prototype,"messages",void 0),(0,p._)([(0,m.Cb)()],sn.prototype,"onExpandedToggle",void 0),(0,p._)([(0,m.Cb)()],sn.prototype,"_statistics",void 0),sn=(0,p._)([(0,k.j)("esri.widgets.ElevationProfile.components.LegendItem")],sn);var un=function(e){(0,c.Z)(n,e);var t=(0,d.Z)(n);function n(){var e;return(0,s.Z)(this,n),(e=t.apply(this,arguments))._expandedLine=null,e}return(0,u.Z)(n,[{key:"render",value:function(){var e=this,t=this.profiles,n=this.messages,i=this.effectiveUnits,r=this._expandedLine;return(0,rn.u)("div",{class:S},t.map((function(o){return(0,rn.u)(sn,{checkboxVisible:t.length>1,effectiveUnits:i,expanded:o===r,line:o,messages:n,onExpandedToggle:function(){return e._onExpandedToggle(o)}})})))}},{key:"_onExpandedToggle",value:function(e){this._expandedLine=e===this._expandedLine?null:e}}]),n}(C.Z);(0,p._)([(0,m.Cb)()],un.prototype,"effectiveUnits",void 0),(0,p._)([(0,m.Cb)()],un.prototype,"messages",void 0),(0,p._)([(0,m.Cb)()],un.prototype,"profiles",void 0),(0,p._)([(0,m.Cb)()],un.prototype,"_expandedLine",void 0),un=(0,p._)([(0,k.j)("esri.widgets.ElevationProfile.components.Legend")],un);var cn=n(10498),dn=function(e){(0,c.Z)(i,e);var t=(0,d.Z)(i);function i(){var e;return(0,s.Z)(this,i),(e=t.apply(this,arguments)).messages=null,e._popover=null,e._popoverIsOpen=!1,e._onPopoverAfterCreate=function(t){e._popover=t},e._onUniformChartScalingChange=function(t){e.onUniformChartScalingChange(t.target.checked)},e}return(0,u.Z)(i,[{key:"loadDependencies",value:function(){return(0,en.h)({action:function(){return Promise.all([n.e(92358),n.e(46895),n.e(65138),n.e(91741)]).then(n.bind(n,6814))},checkbox:function(){return Promise.all([n.e(92358),n.e(54438),n.e(12424)]).then(n.bind(n,12424))},label:function(){return Promise.all([n.e(92358),n.e(35738)]).then(n.bind(n,35738))},popover:function(){return Promise.all([n.e(92358),n.e(46895),n.e(89219),n.e(63839),n.e(65138),n.e(2654),n.e(447)]).then(n.bind(n,61580))},tooltip:function(){return Promise.all([n.e(92358),n.e(89219),n.e(94730)]).then(n.bind(n,94730))}})}},{key:"initialize",value:function(){var e=this,t=function(){return e._popover};this.addHandles([(0,g.on)(t,"calcitePopoverOpen",(function(){return e._popoverIsOpen=!0})),(0,g.on)(t,"calcitePopoverClose",(function(){return e._popoverIsOpen=!1}))])}},{key:"render",value:function(){var e=this.id,t=this.messages,n=this.visibleElements,i=n.unitSelector,r=n.uniformChartScalingToggle;if(!t||!i&&!r)return(0,rn.u)("div",{key:"".concat(e,"-empty")});var o="".concat(e,"__action"),a=this._popoverIsOpen?t.hideSettings:t.showSettings;return(0,rn.u)("div",{class:M.base,key:this},(0,rn.u)("calcite-popover",{afterCreate:this._onPopoverAfterCreate,autoClose:!0,label:a,overlayPositioning:"fixed",placement:"bottom-end",referenceElement:o},this._renderPopoverContent()),(0,rn.u)("calcite-action",{appearance:"transparent","data-testid":"settings-button",icon:"gear",id:o,scale:"s",text:a,title:a}))}},{key:"_renderPopoverContent",value:function(){var e=this.visibleElements,t=e.unitSelector,n=e.uniformChartScalingToggle;return(0,rn.u)("div",{class:M.popoverContent},t?this._renderUnitSelector():null,n?this._renderUniformChartScalingToggle():null)}},{key:"_renderUnitSelector",value:function(){var e,t=this.messages;return(0,rn.u)(cn.m,{key:"unit-selector-label",options:this.unitOptions,selectLabel:null!==(e=null===t||void 0===t?void 0:t.unitSelectLabel)&&void 0!==e?e:"",value:this.unit,onChange:this.onUnitChange})}},{key:"_renderUniformChartScalingToggle",value:function(){var e,t=this.messages,n=this.uniformChartScaling,i="".concat(this.id,"__uniform-chart-scaling-toggle"),r=null!==(e=null===t||void 0===t?void 0:t[n?"uniformChartScalingDisable":"uniformChartScalingEnable"])&&void 0!==e?e:"";return(0,rn.u)("calcite-label",{class:M.uniformChartScalingLabel,key:"uniform-chart-scaling-label",layout:"inline"},(0,rn.u)("calcite-checkbox",{checked:n,class:M.uniformChartScalingCheckbox,id:i,onCalciteCheckboxChange:this._onUniformChartScalingChange}),(0,rn.u)("calcite-tooltip",{overlayPositioning:"fixed",referenceElement:i},r),null===t||void 0===t?void 0:t.uniformChartScalingLabel)}}]),i}(C.Z);(0,p._)([(0,m.Cb)()],dn.prototype,"messages",void 0),(0,p._)([(0,m.Cb)()],dn.prototype,"onUniformChartScalingChange",void 0),(0,p._)([(0,m.Cb)()],dn.prototype,"onUnitChange",void 0),(0,p._)([(0,m.Cb)()],dn.prototype,"uniformChartScaling",void 0),(0,p._)([(0,m.Cb)()],dn.prototype,"unit",void 0),(0,p._)([(0,m.Cb)()],dn.prototype,"unitOptions",void 0),(0,p._)([(0,m.Cb)()],dn.prototype,"visibleElements",void 0),(0,p._)([(0,m.Cb)()],dn.prototype,"_popover",void 0),(0,p._)([(0,m.Cb)()],dn.prototype,"_popoverIsOpen",void 0),dn=(0,p._)([(0,k.j)("esri.widgets.ElevationProfile.components.SettingsButton")],dn);var hn,pn,vn=n(7021);!function(e){e.Sketch="sketch",e.SketchCancel="sketch-cancel",e.SketchDone="sketch-done",e.Select="select",e.SelectCancel="select-cancel"}(pn||(pn={}));var fn=[{type:pn.Select},{type:pn.Sketch}],yn=(hn={},(0,h.Z)(hn,J.J8.None,null),(0,h.Z)(hn,J.J8.NoValidInput,"noProfile"),(0,h.Z)(hn,J.J8.NoVisibleProfiles,"noProfile"),(0,h.Z)(hn,J.J8.RefinedButNoChartData,"noProfile"),(0,h.Z)(hn,J.J8.TooComplex,"tooComplex"),(0,h.Z)(hn,J.J8.UnknownError,"unknown"),(0,h.Z)(hn,J.J8.InvalidGeometry,"invalidGeometry"),(0,h.Z)(hn,J.J8.InvalidElevationInfo,"invalidElevationInfo"),hn),_n=Symbol("resize-observer-handle"),gn=function(e){(0,c.Z)(i,e);var t=(0,d.Z)(i);function i(e,n){var r;return(0,s.Z)(this,i),(r=t.call(this,e,n)).viewModel=null,r.visibleElements=new Xt,r.messages=null,r.messagesCommon=null,r.messagesUnits=null,r._contentWrapper=null,r._chartContainer=null,r._chart=null,r._chartInitTask=null,r._chartIsRefined=!1,r._width=0,r._zoomOutButtonVisible=!1,r._getChartUpdateParamsMemoized=(0,y.H)((function(e,t,n,i){return{chart:e,data:t,stationary:n,messages:i}})),r._onZoomOutButtonClick=function(){var e;null===(e=r._chart)||void 0===e||e.zoomOut()},r._onClearButtonClick=function(){r.viewModel.clear()},(null===e||void 0===e?void 0:e.viewModel)||(r._defaultViewModel=new Qt({view:null===e||void 0===e?void 0:e.view}),r.viewModel=r._defaultViewModel),r}return(0,u.Z)(i,[{key:"loadDependencies",value:function(){return(0,en.h)({action:function(){return Promise.all([n.e(92358),n.e(46895),n.e(65138),n.e(91741)]).then(n.bind(n,6814))},button:function(){return Promise.all([n.e(92358),n.e(46895),n.e(54438),n.e(14105),n.e(32275)]).then(n.bind(n,32275))},loader:function(){return Promise.all([n.e(92358),n.e(46895),n.e(92382)]).then(n.bind(n,92382))}})}},{key:"postInitialize",value:function(){var e=this;this.addHandles([(0,g.watch)((function(){return{container:e._chartContainer,width:e._width}}),(function(t){var n=t.container,i=t.width;e._destroyChart(),null!=n&&i>0&&e._initializeChart(n)}),g.initial),(0,g.watch)((function(){return e._chartUpdateParams}),(function(){return e._updateChart(e._chartUpdateParams)}),g.initial)])}},{key:"destroy",value:function(){this._destroyChart(),null!=this._defaultViewModel&&this.viewModel!==this._defaultViewModel&&this._defaultViewModel.destroy()}},{key:"view",get:function(){return this.viewModel.view},set:function(e){this.viewModel.view=e}},{key:"input",get:function(){return this.viewModel.input},set:function(e){this.viewModel.input=e}},{key:"profiles",get:function(){return this.viewModel.profiles},set:function(e){this.viewModel.profiles=e}},{key:"unitOptions",get:function(){return this.viewModel.unitOptions},set:function(e){this.viewModel.unitOptions=e}},{key:"unit",get:function(){return this.viewModel.unit},set:function(e){this.viewModel.unit=e}},{key:"geodesicDistanceThreshold",get:function(){return this.viewModel.geodesicDistanceThreshold},set:function(e){this.viewModel.geodesicDistanceThreshold=e}},{key:"icon",get:function(){return"altitude"},set:function(e){this._overrideIfSome("icon",e)}},{key:"label",get:function(){var e,t;return null!==(e=null===(t=this.messages)||void 0===t?void 0:t.widgetLabel)&&void 0!==e?e:""},set:function(e){this._overrideIfSome("label",e)}},{key:"visible",get:function(){return this.viewModel.visible},set:function(e){this.viewModel.visible=e}},{key:"_portrait",get:function(){return this._width<(0,J.iE)().portraitModePixelBreakpoint}},{key:"_chartUpdateParams",get:function(){var e=this.view;return this._getChartUpdateParamsMemoized(this._chart,this.viewModel.chartData,null==e||e.stationary,this._chartMessages)}},{key:"_chartMessages",get:function(){return(0,l.Z)((0,l.Z)({},this.messagesUnits),this.messages)}},{key:"_profilesArray",get:function(){return this.profiles.toArray()}},{key:"render",value:function(){var e,t=this.viewModel,n=this.visible;return(0,rn.u)("div",{"aria-label":this.messages.widgetLabel,class:this.classes((e={},(0,h.Z)(e,Z.base,n),(0,h.Z)(e,vn.z.widget,n),(0,h.Z)(e,vn.z.panel,n),(0,h.Z)(e,vn.z.widgetDisabled,n&&"disabled"===t.state),(0,h.Z)(e,Z.portrait,this._portrait),(0,h.Z)(e,Z.refined,1===t.progress),e)),key:this},(0,rn.u)("div",{afterCreate:this._onContentWrapperUpdate,afterRemoved:this._onContentWrapperRemoved,afterUpdate:this._onContentWrapperUpdate,bind:this,key:"content-wrapper"},n?this._renderContentForState():null))}},{key:"_renderContentForState",value:function(){switch(this.viewModel.state){case J.dd.Ready:return this._renderContentForReadyState();case J.dd.Selecting:return this._renderContentForSelectingState();case J.dd.Creating:return this._renderContentForCreatingState();case J.dd.Selected:return this._renderContentForSelectedState();case J.dd.Created:return this._renderContentForCreatedState();case J.dd.Disabled:return this._renderContentForReadyState()}}},{key:"_renderContentForReadyState",value:function(){var e,t,n=this.visibleElements,i=n.sketchButton,r=n.selectButton,o=this.messages;return t=i&&r?o.readyPrompt:i?o.readyPromptCreateOnly:r?o.readyPromptSelectOnly:null===(e=o.errors)||void 0===e?void 0:e.noProfile,this._renderContent({prompt:t,chart:!1,actions:fn})}},{key:"_renderContentForSelectingState",value:function(){var e=this.view;if(null==e)return null;var t=this.messages["selectingPrompt-".concat(e.type)];return this._renderContent({prompt:t,chart:!1,actions:[{type:pn.SelectCancel}]})}},{key:"_renderContentForCreatingState",value:function(){var e=this.view,t=this.viewModel;if(null==e)return null;var n=t.hasVertices?[{type:pn.SketchCancel},{type:pn.SketchDone,disabled:!t.tool.interaction.canStopCreating}]:[{type:pn.Select},{type:pn.Sketch,disabled:!0}];if(t.errorState===J.J8.NoValidInput){var i=this.messages["creatingPrompt-".concat(e.type)];return this._renderContent({chart:!1,actions:n,prompt:i})}var r=this._getErrorMessage();return r?this._renderContent({chart:!1,actions:n,prompt:r}):this._renderContent({chart:!0,actions:n})}},{key:"_renderContentForSelectedState",value:function(){var e=this._getErrorMessage();return e?this._renderContent({chart:!1,actions:fn,prompt:e}):this._renderContent({chart:!0,actions:fn})}},{key:"_renderContentForCreatedState",value:function(){var e=this._getErrorMessage();return e?this._renderContent({chart:!1,actions:fn,prompt:e}):this._renderContent({chart:!0,actions:fn})}},{key:"_getErrorMessage",value:function(){var e,t,n=yn[this.viewModel.errorState];return n?null===(e=this.messages)||void 0===e||null===(t=e.errors)||void 0===t?void 0:t[n]:null}},{key:"_renderContent",value:function(e){var t=null!=e.prompt?this._renderPrompt(e.prompt):e.chart&&this._renderChart(),n=this.viewModel,i=null!=n.input;return(0,rn.u)(rn.D,null,(0,rn.u)("header",{class:Z.header,key:"header"},this._zoomOutButtonVisible?this._renderZoomOutButton():null,this.visibleElements.clearButton&&i?this._renderClearButton():null,this.visibleElements.settingsButton?(0,rn.u)(dn,{messages:this.messages,uniformChartScaling:n.uniformChartScaling,unit:n.unit,unitOptions:n.unitOptions,visibleElements:this.visibleElements,onUniformChartScalingChange:function(e){return n.uniformChartScaling=e},onUnitChange:function(e){return n.unit=e}}):null),(0,rn.u)("div",{class:Z.mainContainer,key:"main-container"},t),this.visibleElements.legend?(0,rn.u)(un,{effectiveUnits:n.effectiveUnits,messages:this.messages,profiles:this._profilesArray}):null,this._renderActions(e))}},{key:"_renderZoomOutButton",value:function(){var e=this.messages.zoomOut;return(0,rn.u)("calcite-action",{appearance:"transparent",class:Z.zoomOutButton,"data-testid":"zoom-out-button",icon:"magnifying-glass-minus",key:"zoom-out",onclick:this._onZoomOutButtonClick,scale:"s",text:e,title:e})}},{key:"_renderClearButton",value:function(){var e=this.messages.clearProfile;return(0,rn.u)("calcite-action",{appearance:"transparent",class:Z.clearButton,"data-testid":"clear-button",icon:"trash",key:"clear-profile",onclick:this._onClearButtonClick,scale:"s",text:e,title:e})}},{key:"_renderPrompt",value:function(e){return[(0,rn.u)("div",{bind:this,class:Z.promptContainer,key:"prompt-container"},(0,rn.u)("p",null,e))]}},{key:"_renderChart",value:function(){if(!this.visibleElements.chart)return(0,rn.u)("div",{class:Z.chartContainer,key:"empty-chart-container"});var e=this.viewModel,t=e.chartData,n=e.progress,i=this._chartIsRefined||this._canRenderChart(),r=null!=t&&n<1;return i?(0,rn.u)(rn.D,null,this._renderSpinner({size:i?"small":"large",visible:r}),(0,rn.u)("div",{afterCreate:this._onChartContainerUpdate,afterRemoved:this._onChartContainerRemoved,afterUpdate:this._onChartContainerUpdate,bind:this,class:Z.chartContainer,key:"chart-container"})):(0,rn.u)(rn.D,null,this._renderSpinner({size:"large",visible:r}),(0,rn.u)("div",{class:Z.chartContainer,key:"chart-container-empty"}))}},{key:"_renderSpinner",value:function(e){var t,n="small"===e.size,i=null===(t=e.visible)||void 0===t||t;return(0,rn.u)("calcite-loader",{class:this.classes(Z.chartSpinner,n&&Z.chartSpinnerSmall,i&&Z.chartSpinnerVisible),inline:n,key:"spinner",label:"",scale:"s"})}},{key:"_canRenderChart",value:function(){var e=this.viewModel.chartData;if(null==e)return!1;if(!this.viewModel.inputIsSketched)return e.refined;var t,n=0,i=(0,a.Z)(e.lines);try{for(i.s();!(t=i.n()).done;){var r=t.value.samples;n+=null!=r?r.length:0}}catch(o){i.e(o)}finally{i.f()}return e.refined||n<=(0,J.iE)().largeChartSamples}},{key:"_renderActions",value:function(e){var t=this,n=e.actions.map((function(e){switch(e.type){case pn.Sketch:return t.visibleElements.sketchButton&&t._renderAction({action:e,className:Z.sketchButton,label:t.messages.sketchButtonLabel,onClick:t._onSketchButtonClick,primary:!0});case pn.SketchCancel:return t.visibleElements.sketchButton&&t._renderAction({action:e,onClick:t._onCancelButtonClick,className:Z.sketchCancelButton,label:t.messagesCommon.cancel,primary:!1});case pn.SketchDone:return t.visibleElements.sketchButton&&t._renderAction({action:e,onClick:t._onDoneButtonClick,className:Z.sketchDoneButton,label:t.messagesCommon.done,primary:!0});case pn.Select:return t.visibleElements.selectButton&&t._renderAction({action:e,onClick:t._onSelectButtonClick,className:Z.selectButton,label:t.messages.selectButtonLabel,primary:!1});case pn.SelectCancel:return t.visibleElements.selectButton&&t._renderAction({action:e,onClick:t._onCancelButtonClick,className:Z.selectCancelButton,label:t.messagesCommon.cancel,primary:!1})}})).filter(Boolean);return n.length?(0,rn.u)("footer",{class:Z.footer,key:"footer"},n):null}},{key:"_renderAction",value:function(e){var t=e.action,n=e.className,i=e.label,r=e.onClick,o=e.primary;return(0,rn.u)("calcite-button",{appearance:o?"solid":"outline-fill",bind:this,class:this.classes(Z.actionButton,n),disabled:t.disabled,key:"action-".concat(t.type),onclick:r},i)}},{key:"_onSketchButtonClick",value:function(){this.viewModel.start({mode:"sketch"})}},{key:"_onSelectButtonClick",value:function(){this.viewModel.start({mode:"select"})}},{key:"_onCancelButtonClick",value:function(){this.viewModel.cancel()}},{key:"_onDoneButtonClick",value:function(){this.viewModel.stop()}},{key:"_onContentWrapperUpdate",value:function(e){var t=this;e!==this._contentWrapper&&(this._contentWrapper=e,this.removeHandles(_n),this.addHandles((0,tn.ib)(e,(function(e){t._width=e.contentRect.width})),_n))}},{key:"_onContentWrapperRemoved",value:function(){this.removeHandles(_n),this._contentWrapper=null}},{key:"_updateChart",value:function(e){var t=e.data,n=e.chart,i=e.messages,r=e.stationary;null!=n&&null!=i&&r&&this._canRenderChart()&&(n.update(e),this._chartIsRefined=null!=t&&t.refined)}},{key:"_onChartContainerUpdate",value:function(e){this._chartContainer=e}},{key:"_onChartContainerRemoved",value:function(){this._chartContainer=null}},{key:"_initializeChart",value:function(e){var t=this;(0,f.IM)(this._chartInitTask),this._chartInitTask=(0,v.vr)(function(){var i=(0,o.Z)((0,r.Z)().mark((function i(o){var a,l,s;return(0,r.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Promise.all([n.e(24390),n.e(98266),n.e(17228),n.e(24489),n.e(49596),n.e(25059)]).then(n.bind(n,25059));case 2:return a=i.sent,l=a.createChart,(0,_.k_)(o),i.next=7,l({container:e,abortOptions:{signal:o},onRangeChange:function(e,n){t._zoomOutButtonVisible=1!==e||1!==n},onCursorPositionChange:function(e){t.viewModel.hoveredChartPosition=e}});case 7:if(s=i.sent,!o.aborted){i.next=10;break}throw(0,f.SC)(s),(0,_.zE)();case 10:t._chart=s,t._updateChart(t._chartUpdateParams);case 11:case"end":return i.stop()}}),i)})));return function(e){return i.apply(this,arguments)}}())}},{key:"_destroyChart",value:function(){this._chartInitTask=(0,f.IM)(this._chartInitTask),this._chart=(0,f.SC)(this._chart),this._chartIsRefined=!1}}]),i}(C.Z);(0,p._)([(0,m.Cb)({type:Qt})],gn.prototype,"viewModel",void 0),(0,p._)([(0,m.Cb)()],gn.prototype,"view",null),(0,p._)([(0,m.Cb)()],gn.prototype,"input",null),(0,p._)([(0,m.Cb)()],gn.prototype,"profiles",null),(0,p._)([(0,m.Cb)()],gn.prototype,"unitOptions",null),(0,p._)([(0,m.Cb)()],gn.prototype,"unit",null),(0,p._)([(0,m.Cb)()],gn.prototype,"geodesicDistanceThreshold",null),(0,p._)([(0,m.Cb)({type:Xt,nonNullable:!0})],gn.prototype,"visibleElements",void 0),(0,p._)([(0,m.Cb)()],gn.prototype,"icon",null),(0,p._)([(0,m.Cb)()],gn.prototype,"label",null),(0,p._)([(0,m.Cb)()],gn.prototype,"visible",null),(0,p._)([(0,m.Cb)(),(0,nn.H)("esri/widgets/ElevationProfile/t9n/ElevationProfile")],gn.prototype,"messages",void 0),(0,p._)([(0,m.Cb)(),(0,nn.H)("esri/t9n/common")],gn.prototype,"messagesCommon",void 0),(0,p._)([(0,m.Cb)(),(0,nn.H)("esri/core/t9n/Units")],gn.prototype,"messagesUnits",void 0),(0,p._)([(0,m.Cb)()],gn.prototype,"_contentWrapper",void 0),(0,p._)([(0,m.Cb)()],gn.prototype,"_chartContainer",void 0),(0,p._)([(0,m.Cb)()],gn.prototype,"_chart",void 0),(0,p._)([(0,m.Cb)()],gn.prototype,"_chartInitTask",void 0),(0,p._)([(0,m.Cb)()],gn.prototype,"_chartIsRefined",void 0),(0,p._)([(0,m.Cb)()],gn.prototype,"_width",void 0),(0,p._)([(0,m.Cb)()],gn.prototype,"_portrait",null),(0,p._)([(0,m.Cb)()],gn.prototype,"_zoomOutButtonVisible",void 0),(0,p._)([(0,m.Cb)()],gn.prototype,"_chartUpdateParams",null),(0,p._)([(0,m.Cb)()],gn.prototype,"_chartMessages",null),(0,p._)([(0,m.Cb)()],gn.prototype,"_profilesArray",null);var mn=gn=(0,p._)([(0,k.j)("esri.widgets.ElevationProfile")],gn)},91079:function(e,t,n){n.d(t,{J8:function(){return r},TH:function(){return h},dd:function(){return i},h8:function(){return d},iE:function(){return c}});var i,r,o,a=n(68860),l=n(86361),s=n(56529);(o=i||(i={})).Disabled="disabled",o.Ready="ready",o.Creating="creating",o.Created="created",o.Selecting="selecting",o.Selected="selected",function(e){e.NoValidInput="no-valid-input",e.NoVisibleProfiles="no-visible-profiles",e.InvalidGeometry="invalid-geometry",e.TooComplex="too-complex",e.InvalidElevationInfo="invalid-elevation-info",e.UnknownError="unknown-error",e.RefinedButNoChartData="refined-but-no-chart-data",e.None="none"}(r||(r={}));var u={noDataValue:-5e5,defaultQueryOptions:function(){return{noDataValue:u.noDataValue,demResolution:"auto",maximumAutoTileRequests:150,ignoreInvisibleLayers:!0}},updateThrottleMillis:100,delayAfterPreviewMillis:500,defaultDemResolution:(0,a.En)(10,"centimeters","meters"),densificationMaxSamples:3e3,largeChartSamples:1e4,maxTotalSamples:1e5,maxChartRatio:300,minSlopeSampleDistance:10,formatPrecision:1,portraitModePixelBreakpoint:400,profileLinesStyle3D:{width:3,outlineSize:0,falloff:0,outlineColor:(0,l.nI)([1,1,1,0]),renderOccluded:s.yD.Opaque},hoveredPointsStyle:{size:14,borderStyle:"solid",borderWidth:3,borderColor:"#ffffff",boxShadow:"0px 0px 0px 5px rgba(255,255,255,0.2)"}};function c(){return u}var d=" \u2015 ",h={progress:1,hasZ:!1,samples:[],statistics:null,spatialReference:null}},47732:function(e,t,n){function i(e,t){var n=t.profiles,i=e.title;if(null!=i)return i;switch(e.type){case"ground":return n.ground;case"input":return n.input;case"query":return n.query;case"view":return n.view;default:return""}}n.d(t,{f:function(){return i}})},39114:function(e,t,n){n.d(t,{k:function(){return o}});var i=n(74165),r=(0,i.Z)().mark(a);function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(e>=t)return n;if(n.push(e),t-e<2)return n;var i=t-1;n.push(i);for(var r=a(e+1,i);;){var o=r.next();if(o.done)break;n.push(o.value)}return n}function a(e,t){var n,o,l,s,u;return(0,i.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(!(e>=t)){i.next=2;break}return i.abrupt("return");case 2:return n=e+Math.floor((t-e)/2),i.next=5,n;case 5:o=a(e,n),l=a(n+1,t);case 6:if(s=o.next(),u=l.next(),!s.done||!u.done){i.next=9;break}return i.abrupt("break",19);case 9:if(i.t0=s.done,i.t0){i.next=13;break}return i.next=13,s.value;case 13:if(i.t1=u.done,i.t1){i.next=17;break}return i.next=17,u.value;case 17:i.next=6;break;case 19:case"end":return i.stop()}}),r)}}}]);
//# sourceMappingURL=61635.ca6d72c1.chunk.js.map