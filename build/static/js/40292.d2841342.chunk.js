"use strict";(self.webpackChunkreact_training=self.webpackChunkreact_training||[]).push([[40292],{53942:function(e,t,n){function r(e,t,n,r){var i=3*e,a=3*(n-e)-i,l=1-i-a,o=3*t,s=3*(r-t)-o,u=1-o-s;function c(e){return((l*e+a)*e+i)*e}function h(e){return((u*e+s)*e+o)*e}function d(e){return(3*l*e+2*a)*e+i}function f(e,t){var n,r,i,a,l,o;for(i=e,o=0;o<8;o++){if(a=c(i)-e,Math.abs(a)<t)return i;if(l=d(i),Math.abs(l)<1e-6)break;i-=a/l}if((i=e)<(n=0))return n;if(i>(r=1))return r;for(;n<r;){if(a=c(i),Math.abs(a-e)<t)return i;e>a?n=i:r=i,i=.5*(r-n)+n}return i}return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e-6;return h(f(e,t))}}n.d(t,{LI:function(){return a},Qc:function(){return l},n_:function(){return r}});var i=/^cubic-bezier\((.*)\)/,a={};function l(e){var t=a[e]||null;if(!t){var n=i.exec(e);if(n){var l=n[1].split(",").map((function(e){return parseFloat(e.trim())}));4!==l.length||l.some((function(e){return isNaN(e)}))||(t=r.apply(r,l))}}return t}a.ease=r(.25,.1,.25,1),a.linear=r(0,0,1,1),a.easeIn=a["ease-in"]=r(.42,0,1,1),a.easeOut=a["ease-out"]=r(0,0,.58,1),a.easeInOut=a["ease-in-out"]=r(.42,0,.58,1)},61368:function(e,t,n){n.r(t),n.d(t,{default:function(){return j}});var r=n(74165),i=n(15861),a=n(29439),l=n(15671),o=n(43144),s=n(60136),u=n(29388),c=n(27366),h=n(10064),d=n(93169),f=n(92026),v=n(66978),y=n(94172),g=n(49861),p=(n(32718),n(84936),n(69912)),m=function(){function e(t,n,r){(0,l.Z)(this,e),this._scale=t,this._shift=n,this._levelShift=r}return(0,o.Z)(e,[{key:"getLevelRowColumn",value:function(e){var t=this.getLevelShift(e[0]),n=this._shift+t;return n?[e[0]-t,e[1]>>n,e[2]>>n]:e}},{key:"getLevelShift",value:function(e){return Math.min(e,this._levelShift)}},{key:"getOffset",value:function(e,t){var n=0,r=0,i=this._shift+this.getLevelShift(e[0]);if(i){var a=(1<<i)-1,l=t/(this._scale*(1<<i-1));n=(e[2]&a)*l,r=(e[1]&a)*l}return[n,r]}},{key:"getScale",value:function(e){return this._scale*(1<<this._shift+this.getLevelShift(e))}}]),e}(),_=n(88301),b=n(61120),C=n(18759),w=n(8768),S=n(65156),k=n(98067),L=n(72291),R=n(75572),T=n(73828),M=function(e){(0,s.Z)(n,e);var t=(0,u.Z)(n);function n(e,r,i,a){var o;return(0,l.Z)(this,n),(o=t.call(this,e,r,i,e.tileInfo.lods.length-1))._memCache=a,o._ongoingTileRequests=new Map,o._ongoingRequestToController=new Map,o._tileInfoView=new R.Z(e.tileInfo,e.fullExtent),o}return(0,o.Z)(n,[{key:"destroy",value:function(){(0,_.Z)((0,b.Z)(n.prototype),"destroy",this).call(this),this._ongoingRequestToController.forEach((function(e){return e.abort()})),this._ongoingRequestToController.clear(),this._ongoingTileRequests.clear()}},{key:"getVectorTile",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n){var i,a,l,o,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=new T.Z(t[0],t[1],t[2],0),null==(a=this._memCache.get(i.id))){e.next=4;break}return e.abrupt("return",(a.retain(),a));case 4:return e.next=6,this._getVectorTileData(i);case 6:if(l=e.sent,(0,v.k_)(n),this._layer){e.next=9;break}return e.abrupt("return",null);case 9:if(null==(a=this._memCache.get(i.id))){e.next=11;break}return e.abrupt("return",(a.retain(),a));case 11:return o=this._layer.tileInfo.getTileBounds((0,S.Ue)(),i),s=this._tileInfoView.getTileResolution(t[0]),e.abrupt("return",((a=new L.i(i,s,o[0],o[3],512,512,this._styleRepository,this._memCache)).setData(l),l&&(a.retain(),this._memCache.put(i.id,a,a.usedMemory,C.M4)),a.neededForCoverage=!0,a.transforms.tileUnitsToPixels=(0,w.al)(1/8,0,0,0,1/8,0,0,0,1),a));case 13:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getVectorTileData",value:function(e){var t=this,n=e.id;if(this._ongoingTileRequests.has(n))return this._ongoingTileRequests.get(n);var r=new AbortController,i={signal:r.signal},a=this._getParsedVectorTileData(e,i).then((function(e){return t._ongoingTileRequests.delete(n),t._ongoingRequestToController.delete(n),e})).catch((function(){return t._ongoingTileRequests.delete(n),t._ongoingRequestToController.delete(n),null}));return this._ongoingTileRequests.set(n,a),this._ongoingRequestToController.set(n,r),a}},{key:"_getParsedVectorTileData",value:function(e,t){var n=this;return this.fetchTileData(e,t).then((function(r){return n.parseTileData({key:e,data:r},t)}))}}]),n}(k.m),x=n(17538),E=n(5562),I=n(54410),Z=n(93509),H=n(11640),P={vtlBackground:x.J,vtlFill:I.R,vtlLine:Z.z,vtlCircle:E.j,vtlSymbol:H.e},z=n(56130),B=n(21391),D=n(8548),q=1e-6,V=function(){function e(t,n){(0,l.Z)(this,e),this.spriteMosaic=t,this.glyphMosaic=n,this._brushCache=new Map,this._vtlMaterialManager=new z.Z}return(0,o.Z)(e,[{key:"dispose",value:function(){this._brushCache&&(this._brushCache.forEach((function(e){return e.dispose()})),this._brushCache=null),this._vtlMaterialManager=(0,f.M2)(this._vtlMaterialManager),this.spriteMosaic.dispose(),this.glyphMosaic.dispose()}},{key:"vectorTilesMaterialManager",get:function(){return this._vtlMaterialManager}},{key:"drawSymbols",value:function(e,t,n){var r=n.layers;e.renderPass="translucent";for(var i=0;i<r.length;i++){var a=r[i];if(a.type===B.fR.SYMBOL){var l=a.getLayoutProperty("visibility");if(!l||l.getValue()!==B.EE.NONE){var o=e.displayLevel;void 0!==a.minzoom&&a.minzoom>o+q||void 0!==a.maxzoom&&a.maxzoom<=o-q||(e.styleLayerUID=a.uid,e.styleLayer=a,this._drawWithBrush(e,t,"vtlSymbol"))}}}}},{key:"drawBackground",value:function(e,t,n){var r=this;if(0!==n.backgroundBucketIds.length){var i=e.context,a=e.displayLevel,l=e.requiredLevel;t.key.level=l,i.setBlendingEnabled(!0),i.setDepthTestEnabled(!1),i.setStencilTestEnabled(!1),e.renderPass="background",n.backgroundBucketIds.forEach((function(i){var l=n.getLayerById(i);if(l.type===B.fR.BACKGROUND){var o=l.getLayoutProperty("visibility");o&&o.getValue()===B.EE.NONE||void 0!==l.minzoom&&l.minzoom>a+q||void 0!==l.maxzoom&&l.maxzoom<=a-q||(e.styleLayerUID=l.uid,e.styleLayer=l,r._drawWithBrush(e,t,"vtlBackground"))}}))}}},{key:"drawTile",value:function(e,t,n,r){var i=e.context,a=n.layers;i.setBlendingEnabled(!1),i.setDepthTestEnabled(!0),i.setDepthWriteEnabled(!0),i.setDepthFunction(D.wb.LEQUAL),e.renderPass="opaque";for(var l=a.length-1;l>=0;l--){var o=a[l];null!=r&&r!==o.type||this._renderStyleLayer(o,e,t,!1)}i.setDepthWriteEnabled(!1),i.setBlendingEnabled(!0),i.setBlendFunctionSeparate(D.zi.ONE,D.zi.ONE_MINUS_SRC_ALPHA,D.zi.ONE,D.zi.ONE_MINUS_SRC_ALPHA),e.renderPass="translucent";for(var s=0;s<a.length;s++){var u=a[s];null!=r&&r!==u.type||this._renderStyleLayer(u,e,t,!1)}i.setDepthTestEnabled(!1),i.bindVAO()}},{key:"_renderStyleLayer",value:function(e,t,n,r){if(r||e&&n.layerData.has(e.uid)){var i=e.getLayoutProperty("visibility");if(!i||i.getValue()!==B.EE.NONE){var a,l=t.renderPass;switch(e.type){case B.fR.BACKGROUND:if("background"!==l)return;a="vtlBackground";break;case B.fR.FILL:if("opaque"!==l&&"translucent"!==t.renderPass)return;a="vtlFill";break;case B.fR.LINE:if("translucent"!==l)return;a="vtlLine";break;case B.fR.CIRCLE:if("translucent"!==l)return;a="vtlCircle";break;case B.fR.SYMBOL:if("translucent"!==l)return;a="vtlSymbol"}var o=t.displayLevel;if(!(void 0!==e.minzoom&&e.minzoom>o+q||void 0!==e.maxzoom&&e.maxzoom<=o-q)){var s=t.context;s.setStencilTestEnabled(!1),s.setStencilWriteMask(0),t.styleLayerUID=e.uid,t.styleLayer=e,this._drawWithBrush(t,n,a)}}}}},{key:"_drawWithBrush",value:function(e,t,n){if(!this._brushCache.has(n)){var r=P[n];this._brushCache.set(n,new r)}this._brushCache.get(n).drawMany(e,[t])}}]),e}(),N=n(30969),O=n(42069),A=n(77385),F=n(53379),U=n(67581),W=function(e){(0,s.Z)(n,e);var t=(0,u.Z)(n);function n(){var e;return(0,l.Z)(this,n),(e=t.apply(this,arguments))._tileHandlerController=null,e.type="vector-tile-3d",e.levelShift=(0,d.Z)("disable-feature:vtl-level-shift")?0:1,e}return(0,o.Z)(n,[{key:"initialize",value:function(){var e=this;if(null!=this.layer.fullExtent){var t=this.view,n=t.basemapTerrain,r=t.spatialReference,i=t.state,l="local"===t.viewingMode&&!(0,F.jO)(r)||F.Bu.force512VTL?this.layer.tileInfo:this.layer.tileInfo.getCompatibleForVTL(256),o=this._getTileInfoSupportError(l,this.layer.fullExtent);if(null!=o)return this.addResolvingPromise(Promise.reject(o));var s=(0,y.whenOnce)((function(){var t,n;return null===(t=e.view)||void 0===t||null===(n=t.basemapTerrain)||void 0===n?void 0:n.tilingSchemeLocked})).then((function(){var t,r,i,a=n.tilingScheme,l=a.pixelSize,o=256===l?1:2,s=null!==(t=n.spatialReference)&&void 0!==t&&t.isGeographic&&256===l?1:0,u=null!==(r=n.spatialReference)&&void 0!==r&&r.isGeographic||256!==l?0:1;e.schemaHelper=new m(o,s,e.levelShift+u),i=256===l||512===l?e.layer.tileInfo.getCompatibleForVTL(l):e.layer.tileInfo;var c=e._getTileInfoCompatibilityError(i,a);if(c)throw c;e.tileInfo=i}));this._tileHandlerController=new AbortController;var u=this.view.resourceController;this._memCache=u.memoryController.newCache("vtl-".concat(this.layer.uid),(function(e){e.release()})),this.addHandles((0,y.watch)((function(){return e.view.qualitySettings.memoryLimit}),(function(t){return e._memCache.maxSize=Math.ceil(t/10*1048576)}),y.syncAndInitial));var c=new N.Z(this.layer.currentStyleInfo.style);this._tileHandler=new M(this.layer,c,i.contentPixelRatio,this._memCache);var d=this._tileHandlerController.signal,f=function(e){return function(t){return e.immediate.schedule(t)}}(u),g=this._tileHandler.start({signal:d,schedule:f}),p=this._tileHandler.spriteMosaic;p.then((function(t){!(0,v.Hc)(d)&&e._tileHandler&&(e.painter=new V(t,e._tileHandler.glyphMosaic))})),g.then((function(){return e._tileHandlerController=null}));var _=function(){var t,n;e._tileHandlerController&&e._tileHandlerController.abort(),e._tileHandlerController=new AbortController,e._memCache.clear();var r=e.layer.currentStyleInfo.style,i=null!==(t=null===(n=e.view.state)||void 0===n?void 0:n.contentPixelRatio)&&void 0!==t?t:1,l=new N.Z(r),o=new M(e.layer,l,i,e._memCache),s=o.start({signal:e._tileHandlerController.signal,schedule:f}),u=o.spriteMosaic;s.then((function(){return e._tileHandlerController=null})),e._updatingHandles.addPromise(Promise.all([s,u]).then((function(t){var n=(0,a.Z)(t,2)[1],r=e._tileHandler,i=e.painter;e.painter=new V(n,o.glyphMosaic),e._tileHandler=o,e.emit("data-changed"),r.destroy(),i&&i.dispose()})))};this._updatingHandles.add((function(){var t;return{style:e.layer.currentStyleInfo.style,pixelRatio:null===(t=e.view.state)||void 0===t?void 0:t.contentPixelRatio}}),_),this.addHandles([this.layer.on("paint-change",(function(){return e.emit("data-changed")})),this.layer.on("style-layer-change",_),this.layer.on("delete-style-layer",_),this.layer.on("spriteSource-change",(function(){return e.emit("data-changed")})),this.layer.on("layout-change",(function(){return e.emit("data-changed")})),this.layer.on("style-layer-visibility-change",(function(){return e.emit("data-changed")}))]);var b=Promise.all([s,g,p]);this.addResolvingPromise(b)}else this.addResolvingPromise(Promise.reject(new h.Z("vectortilelayerview:full-extent-undefined","This layer view's layer does not define a fullExtent.")))}},{key:"destroy",value:function(){this.painter=(0,f.M2)(this.painter),this._tileHandlerController=(0,f.IM)(this._tileHandlerController),this._tileHandler=(0,f.SC)(this._tileHandler),this._memCache=(0,f.SC)(this._memCache)}},{key:"contentZoom",get:function(){return(0,d.Z)("disable-feature:vtl-level-shift")?1:this.view.qualitySettings.tiledSurface.vtlContentZoom}},{key:"displayLevelRange",get:function(){var e=this.tileInfo.lods,t=this.layer.minScale||e[0].scale,n=this.layer.maxScale||e[e.length-1].scale,r=this.levelRangeFromScaleRange(t,n);return this.layer.maxScale?r.maxLevel++:r.maxLevel+=this.levelShift,r}},{key:"dataScaleRange",get:function(){var e=this.tileInfo.lods;return{minScale:e[0].scale,maxScale:e[e.length-1].scale}}},{key:"dataLevelRange",get:function(){var e=this.dataScaleRange,t=e.minScale,n=e.maxScale,r=this.levelRangeFromScaleRange(t,n);return 1===r.minLevel&&256===this.tileInfo.size[0]&&(r.minLevel=0),r.maxLevel+=this.levelShift,r}},{key:"fetchTile",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n){var i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.schemaHelper.getLevelRowColumn(t),e.abrupt("return",this._tileHandler.getVectorTile(i,n));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),n}((0,A.r)((0,O.A)(U.Z)));(0,c._)([(0,g.Cb)()],W.prototype,"layer",void 0),(0,c._)([(0,g.Cb)()],W.prototype,"levelShift",void 0),(0,c._)([(0,g.Cb)()],W.prototype,"contentZoom",null),(0,c._)([(0,g.Cb)()],W.prototype,"displayLevelRange",null),(0,c._)([(0,g.Cb)()],W.prototype,"tileInfo",void 0),(0,c._)([(0,g.Cb)()],W.prototype,"dataScaleRange",null),(0,c._)([(0,g.Cb)()],W.prototype,"dataLevelRange",null),(0,c._)([(0,g.Cb)()],W.prototype,"updatingProgressValue",void 0);var j=W=(0,c._)([(0,p.j)("esri.views.3d.layers.VectorTileLayerView3D")],W)}}]);
//# sourceMappingURL=40292.d2841342.chunk.js.map