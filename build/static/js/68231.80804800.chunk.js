"use strict";(self.webpackChunkreact_training=self.webpackChunkreact_training||[]).push([[68231],{82218:function(e,t,n){n.d(t,{B:function(){return x},a:function(){return b},b:function(){return Q},c:function(){return k},d:function(){return I},e:function(){return U},f:function(){return M},g:function(){return C},h:function(){return A},i:function(){return P},n:function(){return V},r:function(){return O},t:function(){return z},u:function(){return w}});var r=n(37762),i=n(43144),a=n(15671),o=(n(93169),n(32718)),s=n(16889),l=n(21530),c=n(29134),u=n(7025),h=n(32035),f=n(12400),p=n(14320),v=n(85981),d=n(55652),y=n(40885),m=n(40927),g=n(51378),_=function(){return o.Z.getLogger("esri.views.3d.support.geometryUtils.boundedPlane")},x=(0,i.Z)((function e(){(0,a.Z)(this,e),this.plane=(0,d.Ue)(),this.origin=(0,f.Ue)(),this.basis1=(0,f.Ue)(),this.basis2=(0,f.Ue)()}));function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N;return{plane:(0,d.Ue)(e.plane),origin:(0,f.d9)(e.origin),basis1:(0,f.d9)(e.basis1),basis2:(0,f.d9)(e.basis2)}}function k(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b();return M(e.origin,e.basis1,e.basis2,t)}function M(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:b();return(0,h.c)(r.origin,e),(0,h.c)(r.basis1,t),(0,h.c)(r.basis2,n),w(r),j(r,"fromValues()"),r}function w(e){(0,d.my)(e.basis2,e.basis1,e.origin,e.plane)}function S(e,t,n){e!==n&&k(e,n);var r=(0,h.j)(g.WM.get(),V(e),t);return(0,h.g)(n.origin,n.origin,r),n.plane[3]-=t,n}function C(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b(),n=(e[2]-e[0])/2,r=(e[3]-e[1])/2;return(0,h.s)(t.origin,e[0]+n,e[1]+r,0),(0,h.s)(t.basis1,n,0,0),(0,h.s)(t.basis2,0,r,0),(0,d.al)(0,0,1,0,t.plane),t}function P(e,t,n){return!!(0,d.BR)(e.plane,t,n)&&W(e,n)}function T(e,t,n){var i=Y.get();B(e,t,i,Y.get());var a,o=Number.POSITIVE_INFINITY,l=(0,r.Z)(q);try{for(l.s();!(a=l.n()).done;){var c=D(e,a.value,F.get()),u=g.WM.get();if((0,d.rx)(i,c,u)){var f=(0,h.E)(g.WM.get(),t.origin,u),p=Math.abs((0,s.ZF)((0,h.m)(t.direction,f)));p<o&&(o=p,(0,h.c)(n,u))}}}catch(v){l.e(v)}finally{l.f()}return o===Number.POSITIVE_INFINITY?Z(e,t,n):n}function Z(e,t,n){if(P(e,t,n))return n;var i=Y.get(),a=Y.get();B(e,t,i,a);var o,s=Number.POSITIVE_INFINITY,l=(0,r.Z)(q);try{for(l.s();!(o=l.n()).done;){var c=D(e,o.value,F.get()),u=g.WM.get();if((0,d.dZ)(i,c,u)){var f=(0,y.Jk)(t,u);if(!(0,d.Ac)(a,u))continue;f<s&&(s=f,(0,h.c)(n,u))}}}catch(p){l.e(p)}finally{l.f()}return R(e,t.origin)<s&&E(e,t.origin,n),n}function E(e,t,n){var r=(0,d.nF)(e.plane,t,g.WM.get()),i=(0,v.ct)(H(e,e.basis1),r,-1,1,g.WM.get()),a=(0,v.ct)(H(e,e.basis2),r,-1,1,g.WM.get());return(0,h.f)(n,(0,h.g)(g.WM.get(),i,a),e.origin),n}function G(e,t,n){var r=e.origin,i=e.basis1,a=e.basis2,o=(0,h.f)(g.WM.get(),t,r),s=(0,m.SR)(i,o),l=(0,m.SR)(a,o),c=(0,m.SR)(V(e),o);return(0,h.s)(n,s,l,c)}function R(e,t){var n=G(e,t,g.WM.get()),r=e.basis1,i=e.basis2,a=(0,h.l)(r),o=(0,h.l)(i),s=Math.max(Math.abs(n[0])-a,0),l=Math.max(Math.abs(n[1])-o,0),c=n[2];return s*s+l*l+c*c}function A(e,t){return Math.sqrt(R(e,t))}function U(e,t){return(0,d.Ac)(e.plane,t)&&W(e,t)}function L(e,t){var n=-e.plane[3];return(0,m.SR)(V(e),t)-n}function I(e,t){return(0,h.e)(e.basis1,t.basis1)&&(0,h.e)(e.basis2,t.basis2)&&(0,h.e)(e.origin,t.origin)}function z(e,t,n){return e!==n&&k(e,n),(0,c.U_)($,t),(0,c.p4)($,$),(0,h.h)(n.basis1,e.basis1,$),(0,h.h)(n.basis2,e.basis2,$),(0,h.h)((0,d.st)(n.plane),(0,d.st)(e.plane),$),(0,h.h)(n.origin,e.origin,t),(0,d.T5)(n.plane,n.plane,n.origin),n}function O(e,t,n,r){return e!==r&&k(e,r),(0,c.Us)(K,t,n),(0,h.h)(r.basis1,e.basis1,K),(0,h.h)(r.basis2,e.basis2,K),w(r),r}function V(e){return(0,d.st)(e.plane)}function W(e,t){var n=(0,h.f)(g.WM.get(),t,e.origin),r=(0,h.q)(e.basis1),i=(0,h.q)(e.basis2),a=(0,h.m)(e.basis1,n),o=(0,h.m)(e.basis2,n);return-a-r<0&&a-r<0&&-o-i<0&&o-i<0}function H(e,t){var n=F.get();return(0,h.c)(n.origin,e.origin),(0,h.c)(n.vector,t),n}function D(e,t,n){var r=e.basis1,i=e.basis2,a=e.origin,o=(0,h.j)(g.WM.get(),r,t.origin[0]),s=(0,h.j)(g.WM.get(),i,t.origin[1]);(0,h.g)(n.origin,o,s),(0,h.g)(n.origin,n.origin,a);var l=(0,h.j)(g.WM.get(),r,t.direction[0]),c=(0,h.j)(g.WM.get(),i,t.direction[1]);return(0,h.j)(n.vector,(0,h.g)(l,l,c),2),n}function j(e,t){Math.abs((0,h.m)(e.basis1,e.basis2)/((0,h.l)(e.basis1)*(0,h.l)(e.basis2)))>1e-6&&_().warn(t,"Provided basis vectors are not perpendicular"),Math.abs((0,h.m)(e.basis1,V(e)))>1e-6&&_().warn(t,"Basis vectors and plane normal are not perpendicular"),Math.abs(-(0,h.m)(V(e),e.origin)-e.plane[3])>1e-6&&_().warn(t,"Plane offset is not consistent with plane origin")}function B(e,t,n,r){var i=V(e);(0,d.my)(i,t.direction,t.origin,n),(0,d.my)((0,d.st)(n),i,t.origin,r)}var N={plane:(0,d.Ue)(),origin:(0,f.al)(0,0,0),basis1:(0,f.al)(1,0,0),basis2:(0,f.al)(0,1,0)},Y=new l.x(d.Ue),F=new l.x(v.Ue),X=(0,f.Ue)(),J=new l.x((function(){return b()})),q=[{origin:[-1,-1],direction:[1,0]},{origin:[1,-1],direction:[0,1]},{origin:[1,1],direction:[-1,0]},{origin:[-1,1],direction:[0,-1]}],$=(0,u.Ue)(),K=(0,u.Ue)(),Q=Object.freeze(Object.defineProperty({__proto__:null,BoundedPlaneClass:x,altitudeAt:L,axisAt:function(e,t,n,r){return function(e,t,n){switch(t){case p.R.X:(0,h.c)(n,e.basis1),(0,h.n)(n,n);break;case p.R.Y:(0,h.c)(n,e.basis2),(0,h.n)(n,n);break;case p.R.Z:(0,h.c)(n,V(e))}return n}(e,n,r)},closestPoint:Z,closestPointOnSilhouette:T,copy:k,copyWithoutVerify:function(e,t){(0,h.c)(t.origin,e.origin),(0,h.c)(t.basis1,e.basis1),(0,h.c)(t.basis2,e.basis2),(0,d.JG)(t.plane,e.plane)},create:b,distance:A,distance2:R,distanceToSilhouette:function(e,t){var n,i=Number.NEGATIVE_INFINITY,a=(0,r.Z)(q);try{for(a.s();!(n=a.n()).done;){var o=D(e,n.value,F.get()),s=(0,v.Jk)(o,t);s>i&&(i=s)}}catch(l){a.e(l)}finally{a.f()}return Math.sqrt(i)},elevate:S,equals:I,extrusionContainsPoint:U,fromAABoundingRect:C,fromValues:M,intersectRay:P,intersectRayClosestSilhouette:function(e,t,n){if(P(e,t,n))return n;var r=T(e,t,g.WM.get());return(0,h.g)(n,t.origin,(0,h.j)(g.WM.get(),t.direction,(0,h.p)(t.origin,r)/(0,h.l)(t.direction))),n},normal:V,projectPoint:E,projectPointLocal:G,rotate:O,setAltitudeAt:function(e,t,n,r){var i=L(e,t),a=(0,h.j)(X,V(e),n-i);return(0,h.g)(r,t,a),r},setExtent:function(e,t,n){return C(t,n),S(n,L(e,e.origin),n),n},transform:z,up:N,updateUnboundedPlane:w,wrap:function(e,t,n){var r=J.get();return r.origin=e,r.basis1=t,r.basis2=n,r.plane=(0,d.re)(0,0,0,0),w(r),r}},Symbol.toStringTag,{value:"Module"}))},79347:function(e,t,n){n.d(t,{e:function(){return l}});var r,i,a,o=n(84397),s={exports:{}};r=s,i=function(){function e(e,n,i){i=i||2;var a,o,s,c,u,h,f,p=n&&n.length,v=p?n[0]*i:e.length,d=t(e,0,v,i,!0),y=[];if(!d||d.next===d.prev)return y;if(p&&(d=l(e,n,d,i)),e.length>80*i){a=s=e[0],o=c=e[1];for(var m=i;m<v;m+=i)(u=e[m])<a&&(a=u),(h=e[m+1])<o&&(o=h),u>s&&(s=u),h>c&&(c=h);f=0!==(f=Math.max(s-a,c-o))?1/f:0}return r(d,y,i,a,o,f),y}function t(e,t,n,r,i){var a,o;if(i===T(e,t,n,r)>0)for(a=t;a<n;a+=r)o=S(a,e[a],e[a+1],o);else for(a=n-r;a>=t;a-=r)o=S(a,e[a],e[a+1],o);if(o&&_(o,o.next)){var s=o.next;C(o),o=s}return o}function n(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!_(r,r.next)&&0!==g(r.prev,r,r.next))r=r.next;else{var i=r.prev;if(C(r),(r=t=i)===r.next)break;n=!0}}while(n||r!==t);return t}function r(e,t,l,c,u,h,f){if(e){!f&&h&&p(e,c,u,h);for(var v,d,y=e;e.prev!==e.next;)if(v=e.prev,d=e.next,h?a(e,c,u,h):i(e))t.push(v.i/l),t.push(e.i/l),t.push(d.i/l),C(e),e=d.next,y=d.next;else if((e=d)===y){f?1===f?r(e=o(n(e),t,l),t,l,c,u,h,2):2===f&&s(e,t,l,c,u,h):r(n(e),t,l,c,u,h,1);break}}}function i(e){var t=e.prev,n=e,r=e.next;if(g(t,n,r)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(y(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)&&g(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function a(e,t,n,r){var i=e.prev,a=e,o=e.next;if(g(i,a,o)>=0)return!1;for(var s=i.x<a.x?i.x<o.x?i.x:o.x:a.x<o.x?a.x:o.x,l=i.y<a.y?i.y<o.y?i.y:o.y:a.y<o.y?a.y:o.y,c=i.x>a.x?i.x>o.x?i.x:o.x:a.x>o.x?a.x:o.x,u=i.y>a.y?i.y>o.y?i.y:o.y:a.y>o.y?a.y:o.y,h=v(s,l,t,n,r),f=v(c,u,t,n,r),p=e.prevZ,d=e.nextZ;p&&p.z>=h&&d&&d.z<=f;){if(p!==e.prev&&p!==e.next&&y(i.x,i.y,a.x,a.y,o.x,o.y,p.x,p.y)&&g(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,d!==e.prev&&d!==e.next&&y(i.x,i.y,a.x,a.y,o.x,o.y,d.x,d.y)&&g(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(;p&&p.z>=h;){if(p!==e.prev&&p!==e.next&&y(i.x,i.y,a.x,a.y,o.x,o.y,p.x,p.y)&&g(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;d&&d.z<=f;){if(d!==e.prev&&d!==e.next&&y(i.x,i.y,a.x,a.y,o.x,o.y,d.x,d.y)&&g(d.prev,d,d.next)>=0)return!1;d=d.nextZ}return!0}function o(e,t,r){var i=e;do{var a=i.prev,o=i.next.next;!_(a,o)&&x(a,i,i.next,o)&&M(a,o)&&M(o,a)&&(t.push(a.i/r),t.push(i.i/r),t.push(o.i/r),C(i),C(i.next),i=e=o),i=i.next}while(i!==e);return n(i)}function s(e,t,i,a,o,s){var l=e;do{for(var c=l.next.next;c!==l.prev;){if(l.i!==c.i&&m(l,c)){var u=w(l,c);return l=n(l,l.next),u=n(u,u.next),r(l,t,i,a,o,s),void r(u,t,i,a,o,s)}c=c.next}l=l.next}while(l!==e)}function l(e,r,i,a){var o,s,l,u=[];for(o=0,s=r.length;o<s;o++)(l=t(e,r[o]*a,o<s-1?r[o+1]*a:e.length,a,!1))===l.next&&(l.steiner=!0),u.push(d(l));for(u.sort(c),o=0;o<u.length;o++)i=n(i=h(u[o],i),i.next);return i}function c(e,t){return e.x-t.x}function u(e){if(e.next.prev===e)return e;for(var t=e;;){var n=t.next;if(n.prev===t||n===t||n===e)break;t=n}return t}function h(e,t){var r=function(e,t){var n,r=t,i=e.x,a=e.y,o=-1/0;do{if(a<=r.y&&a>=r.next.y&&r.next.y!==r.y){var s=r.x+(a-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>o){if(o=s,s===i){if(a===r.y)return r;if(a===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!n)return null;if(i===o)return n;var l,c=n,u=n.x,h=n.y,p=1/0;r=n;do{i>=r.x&&r.x>=u&&i!==r.x&&y(a<h?i:o,a,u,h,a<h?o:i,a,r.x,r.y)&&(l=Math.abs(a-r.y)/(i-r.x),M(r,e)&&(l<p||l===p&&(r.x>n.x||r.x===n.x&&f(n,r)))&&(n=r,p=l)),r=r.next}while(r!==c);return n}(e,t);if(!r)return t;var i=w(r,e),a=n(r,r.next),o=u(i);return n(o,o.next),a=u(a),u(t===r?a:t)}function f(e,t){return g(e.prev,e,t.prev)<0&&g(t.next,e,e.next)<0}function p(e,t,n,r){var i=e;do{null===i.z&&(i.z=v(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,n,r,i,a,o,s,l,c=1;do{for(n=e,e=null,a=null,o=0;n;){for(o++,r=n,s=0,t=0;t<c&&(s++,r=r.nextZ);t++);for(l=c;s>0||l>0&&r;)0!==s&&(0===l||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,l--),a?a.nextZ=i:e=i,i.prevZ=a,a=i;n=r}a.nextZ=null,c*=2}while(o>1)}(i)}function v(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function d(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function y(e,t,n,r,i,a,o,s){return(i-o)*(t-s)-(e-o)*(a-s)>=0&&(e-o)*(r-s)-(n-o)*(t-s)>=0&&(n-o)*(a-s)-(i-o)*(r-s)>=0}function m(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&x(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(M(e,t)&&M(t,e)&&function(e,t){var n=e,r=!1,i=(e.x+t.x)/2,a=(e.y+t.y)/2;do{n.y>a!=n.next.y>a&&n.next.y!==n.y&&i<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(g(e.prev,e,t.prev)||g(e,t.prev,t))||_(e,t)&&g(e.prev,e,e.next)>0&&g(t.prev,t,t.next)>0)}function g(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function _(e,t){return e.x===t.x&&e.y===t.y}function x(e,t,n,r){var i=k(g(e,t,n)),a=k(g(e,t,r)),o=k(g(n,r,e)),s=k(g(n,r,t));return i!==a&&o!==s||!(0!==i||!b(e,n,t))||!(0!==a||!b(e,r,t))||!(0!==o||!b(n,e,r))||!(0!==s||!b(n,t,r))}function b(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function k(e){return e>0?1:e<0?-1:0}function M(e,t){return g(e.prev,e,e.next)<0?g(e,t,e.next)>=0&&g(e,e.prev,t)>=0:g(e,t,e.prev)<0||g(e,e.next,t)<0}function w(e,t){var n=new P(e.i,e.x,e.y),r=new P(t.i,t.x,t.y),i=e.next,a=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,a.next=r,r.prev=a,r}function S(e,t,n,r){var i=new P(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function C(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function P(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function T(e,t,n,r){for(var i=0,a=t,o=n-r;a<n;a+=r)i+=(e[o]-e[a])*(e[a+1]+e[o+1]),o=a;return i}return e.deviation=function(e,t,n,r){var i=t&&t.length,a=i?t[0]*n:e.length,o=Math.abs(T(e,0,a,n));if(i)for(var s=0,l=t.length;s<l;s++){var c=t[s]*n,u=s<l-1?t[s+1]*n:e.length;o-=Math.abs(T(e,c,u,n))}var h=0;for(s=0;s<r.length;s+=3){var f=r[s]*n,p=r[s+1]*n,v=r[s+2]*n;h+=Math.abs((e[f]-e[v])*(e[p+1]-e[f+1])-(e[f]-e[p])*(e[v+1]-e[f+1]))}return 0===o&&0===h?0:Math.abs((h-o)/o)},e.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},r=0,i=0;i<e.length;i++){for(var a=0;a<e[i].length;a++)for(var o=0;o<t;o++)n.vertices.push(e[i][a][o]);i>0&&(r+=e[i-1].length,n.holes.push(r))}return n},e},void 0!==(a=i())&&(r.exports=a);var l=(0,o.g)(s.exports)},90193:function(e,t,n){n.d(t,{n:function(){return i}});var r=n(42265),i=function(){return r.Z.respectPrefersReducedMotion&&window.matchMedia("(prefers-reduced-motion: reduce)").matches}},55364:function(e,t,n){function r(){return[1,0,0,1,0,0]}function i(e){return[e[0],e[1],e[2],e[3],e[4],e[5]]}n.d(t,{Ue:function(){return r},Wd:function(){return a},d9:function(){return i}});var a=[1,0,0,1,0,0];Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:a,clone:i,create:r,createView:function(e,t){return new Float64Array(e,t,6)},fromValues:function(e,t,n,r,i,a){return[e,t,n,r,i,a]}},Symbol.toStringTag,{value:"Module"}))},50264:function(e,t,n){n.d(t,{Iu:function(){return u},Jp:function(){return s},U1:function(){return l},U_:function(){return o},Us:function(){return h},bA:function(){return c},t8:function(){return a},vc:function(){return p},xJ:function(){return f},yR:function(){return i}});var r=n(24204);function i(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function a(e,t,n,r,i,a,o){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e[4]=a,e[5]=o,e}function o(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=n*a-r*i;return l?(l=1/l,e[0]=a*l,e[1]=-r*l,e[2]=-i*l,e[3]=n*l,e[4]=(i*s-a*o)*l,e[5]=(r*o-n*s)*l,e):null}function s(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],l=t[5],c=n[0],u=n[1],h=n[2],f=n[3],p=n[4],v=n[5];return e[0]=r*c+a*u,e[1]=i*c+o*u,e[2]=r*h+a*f,e[3]=i*h+o*f,e[4]=r*p+a*v+s,e[5]=i*p+o*v+l,e}function l(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],l=t[5],c=Math.sin(n),u=Math.cos(n);return e[0]=r*u+a*c,e[1]=i*u+o*c,e[2]=r*-c+a*u,e[3]=i*-c+o*u,e[4]=s,e[5]=l,e}function c(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],l=t[5],c=n[0],u=n[1];return e[0]=r*c,e[1]=i*c,e[2]=a*u,e[3]=o*u,e[4]=s,e[5]=l,e}function u(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],l=t[5],c=n[0],u=n[1];return e[0]=r,e[1]=i,e[2]=a,e[3]=o,e[4]=r*c+a*u+s,e[5]=i*c+o*u+l,e}function h(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=-n,e[3]=r,e[4]=0,e[5]=0,e}function f(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e}function p(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e}function v(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e}var d=s,y=v;Object.freeze(Object.defineProperty({__proto__:null,add:function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e},copy:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},determinant:function(e){return e[0]*e[3]-e[1]*e[2]},equals:function(e,t){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],c=t[0],u=t[1],h=t[2],f=t[3],p=t[4],v=t[5],d=(0,r.bn)();return Math.abs(n-c)<=d*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(i-u)<=d*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(a-h)<=d*Math.max(1,Math.abs(a),Math.abs(h))&&Math.abs(o-f)<=d*Math.max(1,Math.abs(o),Math.abs(f))&&Math.abs(s-p)<=d*Math.max(1,Math.abs(s),Math.abs(p))&&Math.abs(l-v)<=d*Math.max(1,Math.abs(l),Math.abs(v))},exactEquals:function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]},frob:function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+1)},fromRotation:h,fromScaling:f,fromTranslation:p,identity:i,invert:o,mul:d,multiply:s,multiplyScalar:function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e},multiplyScalarAndAdd:function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e},rotate:l,scale:c,set:a,str:function(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"},sub:y,subtract:v,translate:u},Symbol.toStringTag,{value:"Module"}))},29691:function(e,t,n){n.d(t,{HQ:function(){return s},VY:function(){return l},rS:function(){return u},wY:function(){return c}});var r=n(83448),i=n(78952),a=n(92975),o=new i.Z(r.kU),s=new i.Z(r.JL),l=new i.Z(r.mM),c=new i.Z(r.pn);function u(e){var t=h.get(e);if(t)return t;var n=o;if(e)if(e===s)n=s;else if(e===l)n=l;else{var r=e.wkid,i=e.latestWkid;if(null!=r||null!=i)(0,a.o$)(r)||(0,a.o$)(i)?n=s:((0,a.ME)(r)||(0,a.ME)(i))&&(n=l);else{var c,u=null!==(c=e.wkt2)&&void 0!==c?c:e.wkt;if(u){var v=u.toUpperCase();v===f?n=s:v===p&&(n=l)}}}return h.set(e,n),n}var h=new Map,f=s.wkt.toUpperCase(),p=l.wkt.toUpperCase()},45238:function(e,t,n){n.d(t,{EU:function(){return m},Ue:function(){return u},WH:function(){return g},ZZ:function(){return y},q_:function(){return p},qw:function(){return d},uT:function(){return h},up:function(){return x},zk:function(){return f}});var r=n(16889),i=n(29134),a=n(68700),o=n(50894),s=n(32035),l=n(12400),c=n(86361);function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x;return[e[0],e[1],e[2],e[3]]}function h(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u();return(0,s.c)(n,e),n[3]=t,n}function f(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,c.Ue)();return(0,s.b)(n,e,t),(0,s.n)(n,n),n[3]=-(0,s.d)(e,t),n}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u(),n=(0,i.j6)(b,e);return _(t,(0,r.BV)((0,a.Bh)(t,n))),t}function v(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u();return(0,a.yY)(b,e,g(e)),(0,a.yY)(k,t,g(t)),(0,a.Jp)(b,k,b),_(n,(0,r.BV)((0,a.Bh)(n,b)))}function d(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:u();return h(l.E9,e,M),h(l.IO,t,w),h(l.eG,n,S),v(M,w,M),v(M,S,r),r}function y(e){return e}function m(e){return e[3]}function g(e){return(0,r.Vl)(e[3])}function _(e,t){return e[3]=t,e}var x=[0,0,1,0],b=(0,o.Ue)(),k=(0,o.Ue)(),M=(u(),u()),w=u(),S=u()},85981:function(e,t,n){n.d(t,{AR:function(){return g},Gr:function(){return m},JG:function(){return u},Jk:function(){return p},KU:function(){return d},Ue:function(){return l},al:function(){return h},ct:function(){return y},nF:function(){return v},re:function(){return c},zk:function(){return f}});var r=n(16889),i=n(21530),a=n(32035),o=n(12400),s=n(51378);function l(e){return e?{origin:(0,o.d9)(e.origin),vector:(0,o.d9)(e.vector)}:{origin:(0,o.Ue)(),vector:(0,o.Ue)()}}function c(e,t){var n=b.get();return n.origin=e,n.vector=t,n}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l();return h(e.origin,e.vector,t)}function h(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l();return(0,a.c)(n.origin,e),(0,a.c)(n.vector,t),n}function f(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l();return(0,a.c)(n.origin,e),(0,a.f)(n.vector,t,e),n}function p(e,t){var n=(0,a.f)(s.WM.get(),t,e.origin),i=(0,a.m)(e.vector,n),o=(0,a.m)(e.vector,e.vector),l=(0,r.uZ)(i/o,0,1),c=(0,a.f)(s.WM.get(),(0,a.j)(s.WM.get(),e.vector,l),n);return(0,a.m)(c,c)}function v(e,t,n){return y(e,t,0,1,n)}function d(e,t,n){return(0,a.g)(n,e.origin,(0,a.j)(n,e.vector,t))}function y(e,t,n,i,o){var l=e.vector,c=e.origin,u=(0,a.f)(s.WM.get(),t,c),h=(0,a.m)(l,u)/(0,a.q)(l);return(0,a.j)(o,l,(0,r.uZ)(h,n,i)),(0,a.g)(o,o,e.origin)}function m(e,t){if(_(e,c(t.origin,t.direction),!1,x)){var n=x.tA,r=x.pB,i=x.distance2;if(n>=0&&n<=1)return i;if(n<0)return(0,a.a)(e.origin,r);if(n>1)return(0,a.a)((0,a.g)(s.WM.get(),e.origin,e.vector),r)}return null}function g(e,t,n){return!!_(e,t,!0,x)&&((0,a.c)(n,x.pA),!0)}function _(e,t,n,i){var o=1e-6,l=e.origin,c=(0,a.g)(s.WM.get(),l,e.vector),u=t.origin,h=(0,a.g)(s.WM.get(),u,t.vector),f=s.WM.get(),p=s.WM.get();if(f[0]=l[0]-u[0],f[1]=l[1]-u[1],f[2]=l[2]-u[2],p[0]=h[0]-u[0],p[1]=h[1]-u[1],p[2]=h[2]-u[2],Math.abs(p[0])<o&&Math.abs(p[1])<o&&Math.abs(p[2])<o)return!1;var v=s.WM.get();if(v[0]=c[0]-l[0],v[1]=c[1]-l[1],v[2]=c[2]-l[2],Math.abs(v[0])<o&&Math.abs(v[1])<o&&Math.abs(v[2])<o)return!1;var d=f[0]*p[0]+f[1]*p[1]+f[2]*p[2],y=p[0]*v[0]+p[1]*v[1]+p[2]*v[2],m=f[0]*v[0]+f[1]*v[1]+f[2]*v[2],g=p[0]*p[0]+p[1]*p[1]+p[2]*p[2],_=(v[0]*v[0]+v[1]*v[1]+v[2]*v[2])*g-y*y;if(Math.abs(_)<o)return!1;var x=(d*y-m*g)/_,b=(d+y*x)/g;n&&(x=(0,r.uZ)(x,0,1),b=(0,r.uZ)(b,0,1));var k=s.WM.get(),M=s.WM.get();return k[0]=l[0]+x*v[0],k[1]=l[1]+x*v[1],k[2]=l[2]+x*v[2],M[0]=u[0]+b*p[0],M[1]=u[1]+b*p[1],M[2]=u[2]+b*p[2],i.tA=x,i.tB=b,i.pA=k,i.pB=M,i.distance2=(0,a.a)(k,M),!0}var x={tA:0,tB:0,pA:(0,o.Ue)(),pB:(0,o.Ue)(),distance2:0},b=new i.x((function(){return l()}))},74702:function(e,t,n){n.d(t,{bE:function(){return c},wu:function(){return l}});var r=n(21530),i=n(32035),a=n(12400),o=n(85981);n(51378);function s(e){return e?{p0:(0,a.d9)(e.p0),p1:(0,a.d9)(e.p1),p2:(0,a.d9)(e.p2)}:{p0:(0,a.Ue)(),p1:(0,a.Ue)(),p2:(0,a.Ue)()}}function l(e,t,n){var r=t[0]-e[0],i=t[1]-e[1],a=n[0]-e[0],o=n[1]-e[1];return.5*Math.abs(r*o-i*a)}function c(e,t,n){return(0,i.f)(u,t,e),(0,i.f)(h,n,e),.5*(0,i.l)((0,i.b)(u,u,h))}new r.x(o.Ue),new r.x((function(){return s()}));var u=(0,a.Ue)(),h=(0,a.Ue)()},70178:function(e,t,n){n.d(t,{Fz:function(){return l},fS:function(){return u},kg:function(){return s}});n(93169);var r=n(16889),i=n(92975);function a(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++){var r=e[n],i=t[n];if(r.length!==i.length)return!1;for(var a=0;a<r.length;a++)if(r[a]!==i[a])return!1}return!0}function o(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!a(e[n],t[n]))return!1;return!0}function s(e,t){return e===t||null!=e&&null!=t&&(0,i.fS)(e.spatialReference,t.spatialReference)&&e.x===t.x&&e.y===t.y&&e.z===t.z&&e.m===t.m}function l(e,t,n){var a,o,s,l;return e===t||null!=e&&null!=t&&(0,i.fS)(e.spatialReference,t.spatialReference)&&(0,r.W8)(e.x,t.x,n)&&(0,r.W8)(e.y,t.y,n)&&(0,r.W8)(null!==(a=e.z)&&void 0!==a?a:0,null!==(o=t.z)&&void 0!==o?o:0,n)&&(0,r.W8)(null!==(s=e.m)&&void 0!==s?s:0,null!==(l=t.m)&&void 0!==l?l:0,n)}function c(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.type!==t.type)return!1;switch(e.type){case"point":return s(e,t);case"extent":return function(e,t){return e.hasZ===t.hasZ&&e.hasM===t.hasM&&!!(0,i.fS)(e.spatialReference,t.spatialReference)&&e.xmin===t.xmin&&e.ymin===t.ymin&&e.zmin===t.zmin&&e.xmax===t.xmax&&e.ymax===t.ymax&&e.zmax===t.zmax}(e,t);case"polyline":return function(e,t){return e.hasZ===t.hasZ&&e.hasM===t.hasM&&!!(0,i.fS)(e.spatialReference,t.spatialReference)&&o(e.paths,t.paths)}(e,t);case"polygon":return function(e,t){return e.hasZ===t.hasZ&&e.hasM===t.hasM&&!!(0,i.fS)(e.spatialReference,t.spatialReference)&&o(e.rings,t.rings)}(e,t);case"multipoint":return function(e,t){return e.hasZ===t.hasZ&&e.hasM===t.hasM&&!!(0,i.fS)(e.spatialReference,t.spatialReference)&&a(e.points,t.points)}(e,t);case"mesh":return!1;default:return}}function u(e,t){return e===t||null!=e&&null!=t&&e.objectId===t.objectId&&!!c(e.geometry,t.geometry)&&!!function(e,t){if(e===t)return!0;if(!e||!t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var i=0,a=n;i<a.length;i++){var o=a[i];if(e[o]!==t[o])return!1}return!0}(e.attributes,t.attributes)}},37818:function(e,t,n){n.d(t,{D:function(){return g},Ou:function(){return u},WG:function(){return m},kB:function(){return p},mW:function(){return f}});var r=n(37762),i=(n(59486),n(52639)),a=(n(93169),n(84652)),o=n(18722),s=n(77981),l=n(55946),c=n(78952);function u(e){return"declaredClass"in e}function h(e){return"declaredClass"in e}function f(e,t){return e?function(e){return"declaredClass"in e}(e)?e:new i.Z({layer:t,sourceLayer:t,visible:e.visible,symbol:(0,a.d9)(e.symbol),attributes:(0,a.d9)(e.attributes),geometry:p(e.geometry)}):null}function p(e){return null==e?null:u(e)?e:(0,s.im)(function(e){var t=e.spatialReference,n=t.wkid,r=t.wkt,i=t.wkt2,a=t.latestWkid,o={wkid:n,wkt:r,wkt2:i,latestWkid:a};switch(e.type){case"point":return{x:e.x,y:e.y,z:e.z,m:e.m,spatialReference:o};case"polygon":var s=e.rings,l=e.hasZ,c=e.hasM;return{rings:v(s),hasZ:l,hasM:c,spatialReference:o};case"polyline":var u=e.paths,h=e.hasZ,f=e.hasM;return{paths:v(u),hasZ:h,hasM:f,spatialReference:o};case"extent":return{xmin:e.xmin,xmax:e.xmax,ymin:e.ymin,ymax:e.ymax,zmin:e.zmin,zmax:e.zmax,mmin:e.mmin,mmax:e.mmax,hasZ:e.hasZ,hasM:e.hasM,spatialReference:o};case"multipoint":var p=e.points,m=e.hasZ,g=e.hasM;return{points:y(p)?d(p):p,hasZ:m,hasM:g,spatialReference:o};default:return}}(e))}function v(e){return function(e){var t,n=(0,r.Z)(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;if(0!==i.length)return y(i)}}catch(a){n.e(a)}finally{n.f()}return!1}(e)?e.map((function(e){return d(e)})):e}function d(e){return e.map((function(e){return Array.from(e)}))}function y(e){return e.length>0&&((0,o.xZ)(e[0])||(0,o.fS)(e[0]))}function m(e,t){if(!e)return null;var n;if(h(e)){if(null==t)return e.clone();if(h(t))return t.copy(e)}return null!=t?((n=t).x=e.x,n.y=e.y,n.spatialReference=e.spatialReference,e.hasZ?(n.z=e.z,n.hasZ=e.hasZ):(n.z=void 0,n.hasZ=!1),e.hasM?(n.m=e.m,n.hasM=!0):(n.m=void 0,n.hasM=!1)):(n=(0,l.T)(e.x,e.y,e.z,e.spatialReference),e.hasM&&(n.m=e.m,n.hasM=!0)),n}function g(e){var t={wkid:e.wkid,wkt:e.wkt,wkt2:e.wkt2,latestWkid:e.latestWkid};return c.Z.fromJSON(t)}},37384:function(e,t,n){n.d(t,{$o:function(){return i},V$:function(){return o},rk:function(){return a}});var r="calcite-mode-";function i(){return getComputedStyle(document.body).getPropertyValue("--esri-calcite-mode-name").replaceAll(/\s|'|"/g,"").startsWith("dark")}function a(){return"".concat(r).concat(i()?"dark":"light")}function o(e){s(e),e.classList.add(a())}function s(e){Array.from(e.classList).forEach((function(t){t.startsWith(r)&&e.classList.remove(t)}))}},49729:function(e,t,n){n.d(t,{YV:function(){return s},ZB:function(){return p},iW:function(){return u}});var r=n(1413),i=n(37762),a=n(51995),o=n(31027);function s(e,t,n,a){if(e)if("CIMTextSymbol"!==e.type){if(n&&e.effects){var o,u=(0,i.Z)(e.effects);try{for(u.s();!(o=u.n()).done;){c(o.value,t)}}catch(v){u.e(v)}finally{u.f()}}if(e.symbolLayers){var h,f=(0,i.Z)(e.symbolLayers);try{for(f.s();!(h=f.n()).done;){var p=h.value;switch(p.type){case"CIMPictureMarker":case"CIMVectorMarker":l(p,t,a);break;case"CIMPictureStroke":case"CIMSolidStroke":(null===a||void 0===a||!a.preserveOutlineWidth)&&p.width&&(p.width*=t);break;case"CIMPictureFill":p.height&&(p.height*=t),p.offsetX&&(p.offsetX*=t),p.offsetY&&(p.offsetY*=t);break;case"CIMHatchFill":s(p.lineSymbol,t,!0,(0,r.Z)((0,r.Z)({},a),{},{preserveOutlineWidth:!1})),p.offsetX&&(p.offsetX*=t),p.offsetY&&(p.offsetY*=t),p.separation&&(p.separation*=t)}}}catch(v){f.e(v)}finally{f.f()}}}else null!=e.height&&(e.height*=t)}function l(e,t,n){if(e&&(e.markerPlacement&&function(e,t){switch((0,o.gJ)(e)&&e.offset&&(e.offset*=t),e.type){case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAlongLineSameSize":if(e.customEndingOffset&&(e.customEndingOffset*=t),e.offsetAlongLine&&(e.offsetAlongLine*=t),e.placementTemplate&&e.placementTemplate.length){var n=e.placementTemplate.map((function(e){return e*t}));e.placementTemplate=n}break;case"CIMMarkerPlacementAlongLineVariableSize":if(e.maxRandomOffset&&(e.maxRandomOffset*=t),e.placementTemplate&&e.placementTemplate.length){var r=e.placementTemplate.map((function(e){return e*t}));e.placementTemplate=r}break;case"CIMMarkerPlacementOnLine":e.startPointOffset&&(e.startPointOffset*=t);break;case"CIMMarkerPlacementAtExtremities":e.offsetAlongLine&&(e.offsetAlongLine*=t);break;case"CIMMarkerPlacementAtMeasuredUnits":case"CIMMarkerPlacementOnVertices":break;case"CIMMarkerPlacementAtRatioPositions":e.beginPosition&&(e.beginPosition*=t),e.endPosition&&(e.endPosition*=t);break;case"CIMMarkerPlacementPolygonCenter":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t);break;case"CIMMarkerPlacementInsidePolygon":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t),e.stepX&&(e.stepX*=t),e.stepY&&(e.stepY*=t)}}(e.markerPlacement,t),e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t),e.anchorPoint&&"Absolute"===e.anchorPointUnits&&(e.anchorPoint={x:e.anchorPoint.x*t,y:e.anchorPoint.y*t}),e.size=null!=e.size?e.size*t:0,"CIMVectorMarker"===e.type&&e.markerGraphics)){var r,a=(0,i.Z)(e.markerGraphics);try{for(a.s();!(r=a.n()).done;){var l=r.value;e.scaleSymbolsProportionally||s(l.symbol,t,!0,n)}}catch(c){a.e(c)}finally{a.f()}}}function c(e,t){switch(e.type){case"CIMGeometricEffectArrow":case"CIMGeometricEffectDonut":e.width&&(e.width*=t);break;case"CIMGeometricEffectBuffer":e.size&&(e.size*=t);break;case"CIMGeometricEffectCut":e.beginCut&&(e.beginCut*=t),e.endCut&&(e.endCut*=t),e.middleCut&&(e.middleCut*=t);break;case"CIMGeometricEffectDashes":if(e.customEndingOffset&&(e.customEndingOffset*=t),e.offsetAlongLine&&(e.offsetAlongLine*=t),e.dashTemplate&&e.dashTemplate.length){var n=e.dashTemplate.map((function(e){return e*t}));e.dashTemplate=n}break;case"CIMGeometricEffectExtension":case"CIMGeometricEffectJog":case"CIMGeometricEffectRadial":e.length&&(e.length*=t);break;case"CIMGeometricEffectMove":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t);break;case"CIMGeometricEffectOffset":case"CIMGeometricEffectOffsetTangent":e.offset&&(e.offset*=t);break;case"CIMGeometricEffectRegularPolygon":e.radius&&(e.radius*=t);break;case"CIMGeometricEffectTaperedPolygon":e.fromWidth&&(e.fromWidth*=t),e.length&&(e.length*=t),e.toWidth&&(e.toWidth*=t);break;case"CIMGeometricEffectWave":e.amplitude&&(e.amplitude*=t),e.period&&(e.period*=t)}}function u(e){var t=[];return h((0,o.be)(e),t),t.length?new a.Z((0,o.oY)(t[0])):null}function h(e,t){var n,r;if(e){var a;a="CIMTextSymbol"===e.type?e.symbol:e;var s="CIMPolygonSymbol"===e.type;if(null!==(n=a)&&void 0!==n&&n.symbolLayers){var l,c=(0,i.Z)(a.symbolLayers);try{for(c.s();!(l=c.n()).done;){var u=l.value;if(!(u.colorLocked||s&&((0,o.yL)(u)||(0,o.zL)(u)&&u.markerPlacement&&(0,o.gJ)(u.markerPlacement))))switch(u.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":u.tintColor&&f(t,u.tintColor);break;case"CIMVectorMarker":null===(r=u.markerGraphics)||void 0===r||r.forEach((function(e){h(e.symbol,t)}));break;case"CIMSolidStroke":case"CIMSolidFill":f(t,u.color);break;case"CIMHatchFill":h(u.lineSymbol,t)}}}catch(p){c.e(p)}finally{c.f()}}}}function f(e,t){var n,r=(0,i.Z)(e);try{for(r.s();!(n=r.n()).done;){if(n.value.join(".")===t.join("."))return}}catch(a){r.e(a)}finally{r.f()}e.push(t)}function p(e,t,n){t instanceof a.Z||(t=new a.Z(t));var r=(0,o.be)(e);r&&v(r,t,n)}function v(e,t,n){var r,a,s;if(e){var l,c="CIMPolygonSymbol"===(null===(r=l="CIMTextSymbol"===e.type?e.symbol:e)||void 0===r?void 0:r.type);if(null!==(a=l)&&void 0!==a&&a.symbolLayers){var u,h=(0,i.Z)(l.symbolLayers);try{for(h.s();!(u=h.n()).done;){var f=u.value;if(!f.colorLocked){if(c)if(n){var p=n.layersToColor;if(((0,o.yL)(f)||(0,o.zL)(f)&&f.markerPlacement&&(0,o.gJ)(f.markerPlacement))&&"fill"===p||(0,o.k5)(f)&&"outline"===p)continue}else if((0,o.yL)(f)||(0,o.zL)(f)&&f.markerPlacement&&(0,o.gJ)(f.markerPlacement))continue;var d=t.toArray();switch(f.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":f.tintColor=d;break;case"CIMVectorMarker":null===(s=f.markerGraphics)||void 0===s||s.forEach((function(e){v(e.symbol,t,n)}));break;case"CIMSolidStroke":case"CIMSolidFill":f.color=d;break;case"CIMHatchFill":v(f.lineSymbol,t,n)}}}}catch(y){h.e(y)}finally{h.f()}}}}},10461:function(e,t,n){n.r(t),n.d(t,{ControlPointsTransformTool:function(){return ne},DrawGraphicTool2D:function(){return P},MediaTransformToolsWrapper:function(){return Ae},TransformTool:function(){return Ze}});var r=n(29439),i=n(1413),a=n(15671),o=n(43144),s=n(60136),l=n(29388),c=n(27366),u=(n(59486),n(52639)),h=n(42537),f=n(92026),p=n(94172),v=n(49861),d=(n(93169),n(32718),n(84936),n(69912)),y=n(85577),m=(n(51508),n(75021)),g=n(16072),_=new m.Z({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",effects:[{type:"CIMGeometricEffectDashes",dashTemplate:[3.75,3.75],lineDashEnding:"HalfPattern",controlPointEnding:"NoConstraint"}],enable:!0,capStyle:"Butt",joinStyle:"Round",miterLimit:10,width:1.6,color:[255,255,255,255]},{type:"CIMSolidStroke",enable:!0,capStyle:"Butt",joinStyle:"Round",miterLimit:10,width:2,color:[0,0,0,255]}]}}}),x=new g.default({style:"circle",size:6,color:[127,127,127,1],outline:{color:[50,50,50],width:1}}),b=new g.default({style:"circle",size:6,color:[255,127,0,1],outline:{color:[50,50,50],width:1}}),k=n(84827),M=n(66038),w=n(46640),S=n(848),C=n(77577),P=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(e){var r,o,s,l;return(0,a.Z)(this,n),(l=t.call(this,e))._visualElementGraphics={regularVertices:null,activeVertex:null,activeEdge:null},l.activeFillSymbol=null,l.type="draw-2d",l._visualElementSymbols={outline:null!==(r=e.activeLineSymbol)&&void 0!==r?r:_,regularVertices:null!==(o=e.regularVerticesSymbol)&&void 0!==o?o:x,activeVertex:null!==(s=e.activeVertexSymbol)&&void 0!==s?s:b,fill:e.activeFillSymbol},e.activeVertexSymbol||l.addHandles((0,p.watch)((function(){var e,t;return null===(e=l.view)||void 0===e||null===(t=e.effectiveTheme)||void 0===t?void 0:t.accentColor}),(function(e){var t;if(e){var n=l._visualElementSymbols.activeVertex.clone().set({color:e});null!==(t=l._visualElementGraphics.activeVertex)&&void 0!==t&&t.set("symbol",n),l._visualElementSymbols=(0,i.Z)((0,i.Z)({},l._visualElementSymbols),{},{activeVertex:n})}}),p.initial)),l}return(0,o.Z)(n,[{key:"normalizeCtorArgs",value:function(e){var t=(0,i.Z)({},e);return delete t.activeFillSymbol,delete t.activeVertexSymbol,delete t.regularVerticesSymbol,delete t.activeLineSymbol,t}},{key:"initializeGraphic",value:function(e){return null!=this._visualElementSymbols.fill&&(e.symbol=this._visualElementSymbols.fill),this.internalGraphicsLayer.graphics.sort(T),(0,h.kB)()}},{key:"makeDrawOperation",value:function(){var e=this.defaultZ,t=this.hasZ,n=this.view;return this._createOrUpdateGraphic(null),new M.wW({view:n,manipulators:this.manipulators,geometryType:(0,k.I)(this.geometryType),drawingMode:this.mode,hasZ:t,defaultZ:e,snapToSceneEnabled:this.snapToScene,drawSurface:new w.hP(n,t,e),hasM:!1,snappingManager:this.snappingManager,snappingVisualizer:new y.r(this.internalGraphicsLayer),graphic:this.graphic,cursor:this.cursor,constraintsEnabled:!0})}},{key:"onActiveVertexChanged",value:function(e){var t=this;if("point"===this.geometryType)return(0,h.kB)();var n=(0,r.Z)(e,2),i=n[0],a=n[1],o=new S.Z({x:i,y:a,spatialReference:this.view.spatialReference});return null!=this._visualElementGraphics.activeVertex?(this._visualElementGraphics.activeVertex.geometry=o,(0,h.kB)()):(this._visualElementGraphics.activeVertex=new u.Z({geometry:o,symbol:this._visualElementSymbols.activeVertex,attributes:{displayOrder:2}}),this.internalGraphicsLayer.add(this._visualElementGraphics.activeVertex),this.internalGraphicsLayer.graphics.sort(T),(0,h.kB)((function(){null!=t._visualElementGraphics.activeVertex&&(t.internalGraphicsLayer.remove(t._visualElementGraphics.activeVertex),t._visualElementGraphics.activeVertex=(0,f.SC)(t._visualElementGraphics.activeVertex))})))}},{key:"onCursorEdgeChanged",value:function(e){var t=this;return null!=this._visualElementGraphics.activeEdge?(this._visualElementGraphics.activeEdge.geometry=e,(0,h.kB)()):(this._visualElementGraphics.activeEdge=new u.Z({geometry:e,symbol:this._visualElementSymbols.outline,attributes:{displayOrder:0}}),this.internalGraphicsLayer.add(this._visualElementGraphics.activeEdge),this.internalGraphicsLayer.graphics.sort(T),(0,h.kB)((function(){null!=t._visualElementGraphics.activeEdge&&(t.internalGraphicsLayer.remove(t._visualElementGraphics.activeEdge),t._visualElementGraphics.activeEdge=(0,f.SC)(t._visualElementGraphics.activeEdge))})))}},{key:"onRegularVerticesChanged",value:function(e){var t=this,n=new C.Z({points:e,spatialReference:this.view.spatialReference});return null!=this._visualElementGraphics.regularVertices?(this._visualElementGraphics.regularVertices.geometry=n,(0,h.kB)()):(this._visualElementGraphics.regularVertices=new u.Z({geometry:n,symbol:this._visualElementSymbols.regularVertices,attributes:{displayOrder:1}}),this.internalGraphicsLayer.add(this._visualElementGraphics.regularVertices),this.internalGraphicsLayer.graphics.sort(T),(0,h.kB)((function(){null!=t._visualElementGraphics.regularVertices&&(t.internalGraphicsLayer.remove(t._visualElementGraphics.regularVertices),t._visualElementGraphics.regularVertices=(0,f.SC)(t._visualElementGraphics.regularVertices))})))}}]),n}(k.T);function T(e,t){var n,r,i,a;return(null!==(n=null===(r=e.attributes)||void 0===r?void 0:r.displayOrder)&&void 0!==n?n:-1/0)-(null!==(i=null===(a=t.attributes)||void 0===a?void 0:a.displayOrder)&&void 0!==i?i:-1/0)}(0,c._)([(0,v.Cb)()],P.prototype,"activeFillSymbol",void 0),(0,c._)([(0,v.Cb)({readOnly:!0})],P.prototype,"type",void 0),(0,c._)([(0,v.Cb)({constructOnly:!0,nonNullable:!0})],P.prototype,"view",void 0),P=(0,c._)([(0,d.j)("esri.views.2d.interactive.editingTools.draw.DrawGraphicTool2D")],P);var Z,E=n(93433),G=n(74165),R=n(15861),A=n(51995),U=n(79803),L=n(92975),I=n(93655),z=n(49729),O=n(50951),V=function(){function e(){(0,a.Z)(this,e)}return(0,o.Z)(e,[{key:"hovering",get:function(){return this.someManipulator((function(e){return e.hovering}))}},{key:"grabbing",get:function(){return this.someManipulator((function(e){return e.grabbing}))}},{key:"dragging",get:function(){return this.someManipulator((function(e){return e.dragging}))}},{key:"hasManipulator",value:function(e){return this.someManipulator((function(t){return t===e}))}},{key:"someManipulator",value:function(e){var t=!1;return this.forEachManipulator((function(n){!t&&e(n)&&(t=!0)})),t}}]),e}();!function(e){e[e.TRANSLATE_XY=0]="TRANSLATE_XY",e[e.SCALE=1]="SCALE",e[e.ROTATE=2]="ROTATE"}(Z||(Z={}));var W=n(74229),H=n(2346),D=n(153),j=n(90297),B=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(e){var r;return(0,a.Z)(this,n),(r=t.call(this))._view=e.view,r._tool=e.tool,r._graphic=e.graphic,r._manipulator=r._createManipulator(),r.forEachManipulator((function(e){return r._tool.manipulators.add(e)})),r}return(0,o.Z)(n,[{key:"destroy",value:function(){var e=this;this.forEachManipulator((function(t){e._tool.manipulators.remove(t),t.destroy()})),this._tool=null,this._view=null,this._manipulator=null,this._graphic=null}},{key:"forEachManipulator",value:function(e){e(this._manipulator,Z.TRANSLATE_XY)}},{key:"createDragPipeline",value:function(e,t){var n=this,r=null,i=null,a=0,o=0,s=0,l=(0,j.i)(this._graphic.symbol),c=l.offsetX,u=l.offsetY,h=l.size;return(0,W.Xd)(this._manipulator,(function(l,f){f.next((function(t){if("start"===t.action){var n=e();r=n.editGeometryOperations,i=n.constraints}return t})).next((0,W.Cf)(n._view)).next((function(e){var n=e.mapEnd,l=n.x,f=n.y,p=n.z;if(i&&(l+c<i.xmin||f+u-h<i.ymin||l+c>i.xmax||f+u-h>i.ymax))return e;("start"===e.action||0===a&&0===o&&0===s)&&(a=e.mapStart.x,o=e.mapStart.y,s=e.mapStart.z);var v=l-a,d=f-o,y=p-s;a=l,o=f,s=p;var m="start"===e.action?D.b.NEW_STEP:D.b.ACCUMULATE_STEPS,g=r.move(v,d,y,m);return t(e,g),e}))}))}},{key:"_createManipulator",value:function(){var e=this._view,t=this._graphic;return new H.L({view:e,graphic:t,selectable:!0,cursor:"move"})}}]),n}(V),N=n(67750),Y=n(45900),F=n(17877),X="ArrowUp",J="ArrowDown",q="ArrowLeft",$="ArrowRight",K="t",Q="Shift",ee=N.C,te=new A.Z("#009AF2"),ne=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(e){var r;return(0,a.Z)(this,n),(r=t.call(this,e))._isOpacityToggled=!1,r._isModifierActive=!1,r._factor=1,r._initialControlPoints=null,r._graphicsLayer=new I.default({internal:!0,listMode:"hide",visible:!1,effect:"drop-shadow(0px, 0px, 3px)"}),r._undoStack=[],r._redoStack=[],r._sharedUndoStack=[],r._sharedRedoStack=[],r._highlightHandle=null,r.activeHandle=0,r}return(0,o.Z)(n,[{key:"initialize",value:function(){this._initialize()}},{key:"destroy",value:function(){var e=this.view.map;this._controlPointManipulations.forEach((function(e){return e.destroy()})),this._controlPointEditGeometryOperations.forEach((function(e){return e.destroy()})),e.removeMany([this._graphicsLayer]),this._graphicsLayer.removeAll(),this._graphicsLayer=(0,f.SC)(this._graphicsLayer),this._georeference=null,this._controlPointGraphics=null,this._controlPointManipulations=null,this._graphicsLayer=null,this._controlPointEditGeometryOperations=null,this._undoStack=null,this._redoStack=null,this._initialControlPoints=null,this._sharedUndoStack=null,this._sharedRedoStack=null}},{key:"_hasValidSpatialReference",get:function(){return(0,L.JY)(this.view.spatialReference)}},{key:"onActivate",value:function(){this.visible=!0}},{key:"onDeactivate",value:function(){this.visible=!1}},{key:"onShow",value:function(){this._graphicsLayer.visible=!0}},{key:"onHide",value:function(){this._graphicsLayer.visible=!1}},{key:"canUndo",value:function(){var e=this._undoStack[this._undoStack.length-1];return null!=e&&this._controlPointEditGeometryOperations[e].canUndo}},{key:"canRedo",value:function(){var e=this._redoStack[this._redoStack.length-1];return null!=e&&this._controlPointEditGeometryOperations[e].canRedo}},{key:"undo",value:function(){if(this._undoStack.length>0){var e=this._undoStack.pop();this._controlPointEditGeometryOperations[e].undo(),this.updateGraphics(),this._redoStack.push(e)}}},{key:"redo",value:function(){if(this._redoStack.length>0){var e=this._redoStack.pop();this._controlPointEditGeometryOperations[e].redo(),this.updateGraphics(),this._undoStack.push(e)}}},{key:"refresh",value:function(){var e=this,t=this.mediaElement;if(null!=t.georeference){var n=t.georeference;"control-points"===n.type&&null!=n.coords&&(this._georeference=n,this._georeference.controlPoints.forEach((function(t,n){var r=t.mapPoint,i=e._controlPointEditGeometryOperations[n],a=i.data.components[0].vertices[0];i.setVertexPosition(a,i.data.coordinateHelper.pointToVector(r))})),this.updateGraphics())}}},{key:"reset",value:function(){this._georeference.controlPoints=this._initialControlPoints,this.refresh(),this._sharedUndoStack.length=0,this._sharedRedoStack.length=0}},{key:"updateGraphics",value:function(){var e=this,t=this._georeference,n=t.controlPoints,r=n[0].mapPoint.spatialReference,i=this._hasValidSpatialReference;this._georeference.controlPoints=this._controlPointEditGeometryOperations.map((function(a,o){var s=a.data.geometry;return e._controlPointGraphics[o].geometry=s,{mapPoint:(0,U.project)(s,r),sourcePoint:i?n[o].sourcePoint:t.toSource(s)}}))}},{key:"updateActiveHandle",value:function(e){if(this.activeHandle!==e){var t=this._controlPointGraphics[this.activeHandle].symbol.clone();(0,z.ZB)(t,this.view.effectiveTheme.accentColor),this._controlPointGraphics[this.activeHandle].symbol=t;var n=this._controlPointGraphics[e].symbol.clone();(0,z.ZB)(n,te),this._controlPointGraphics[e].symbol=n,this.activeHandle=e,this.view.surface===document.activeElement&&this.highlightActiveHandle()}}},{key:"highlightActiveHandle",value:function(){var e=(0,R.Z)((0,G.Z)().mark((function e(){var t;return(0,G.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.removeHighlightActiveHandle(),e.next=3,this.view.whenLayerView(this._graphicsLayer);case 3:t=e.sent,this._highlightHandle=t.highlight(this._controlPointGraphics[this.activeHandle]);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeHighlightActiveHandle",value:function(){this._highlightHandle&&this._highlightHandle.remove()}},{key:"setSharedUndoStack",value:function(e){this._sharedUndoStack=e}},{key:"setSharedRedoStack",value:function(e){this._sharedRedoStack=e}},{key:"_initialize",value:function(){var e=(0,R.Z)((0,G.Z)().mark((function e(){var t,n,r,i=this;return(0,G.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.view,null!=(n=this.mediaElement).georeference){e.next=3;break}return e.abrupt("return");case 3:if(r=n.georeference,e.t0="control-points"===r.type&&null!=r.coords,!e.t0){e.next=21;break}return this._georeference=r,this._initialControlPoints=this._georeference.controlPoints,t.map.addMany([this._graphicsLayer]),t.focus(),this.visible=!1,this.finishToolCreation(),e.next=14,this._loadProjectionEngine();case 14:this._controlPointEditGeometryOperations=this._georeference.controlPoints.map((function(e){var n=e.mapPoint;return F.c.fromGeometry((0,U.project)(n,t.spatialReference),O.JY.Local)})),this._controlPointGraphics=this._controlPointEditGeometryOperations.map((function(e,t){return new u.Z({symbol:new m.Z({data:{type:"CIMSymbolReference",symbol:{type:"CIMPointSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,colorLocked:!0,anchorPoint:{x:0,y:-15.75},anchorPointUnits:"Absolute",dominantSizeAxis3D:"Y",size:9,billboardMode3D:"FaceNearPlane",frame:{xmin:0,ymin:0,xmax:84.3,ymax:84.3},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{rings:[[[83.2,32.5],[84.3,40.7],[83.8,48.9],[81.7,56.9],[78.1,64.3],[73,70.9],[66.9,76.4],[59.7,80.5],[51.9,83.2],[43.7,84.3],[35.4,83.8],[27.4,81.7],[20,78],[13.4,73],[7.9,66.8],[3.8,59.7],[1.1,51.9],[0,43.7],[.5,35.4],[2.6,27.4],[6.3,20],[11.3,13.4],[17.5,7.9],[24.7,3.8],[32.5,1.1],[39.8,.1],[47.1,.3],[54.3,1.8],[61.1,4.5],[67.4,8.4],[72.9,13.3],[77.4,19.1],[80.9,25.5],[83.2,32.5]]]},symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:[255,255,255,255]}]}}],scaleSymbolsProportionally:!0,respectFrame:!0,clippingPath:{type:"CIMClippingPath",clippingType:"Intersect",path:{rings:[[[0,0],[84.3,0],[84.3,84.3],[0,84.3],[0,0]]]}},rotation:0},{type:"CIMVectorMarker",enable:!0,anchorPoint:{x:0,y:-11.25},anchorPointUnits:"Absolute",dominantSizeAxis3D:"Y",size:22.5,billboardMode3D:"FaceNearPlane",frame:{xmin:0,ymin:0,xmax:197.7,ymax:294.7},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{rings:[[[98.9,0],[119.4,23.2],[139.4,49.3],[156.8,75.2],[171.2,100.8],[182.4,125.3],[190.6,148.8],[195.7,171.4],[197.7,192.9],[197.7,195.8],[197.7,200.3],[197.6,202.5],[197.5,204.8],[197.3,207.1],[197,209.4],[196.7,211.7],[196.4,214.1],[196,216.4],[195.5,218.7],[195,221.1],[194.4,223.4],[193.7,225.8],[193,228.1],[192.2,230.5],[191.4,232.8],[190.5,235.1],[189.5,237.5],[188.5,239.7],[187.4,242],[186.2,244.3],[185,246.5],[183.7,248.7],[182.4,250.9],[181,253.1],[179.5,255.2],[178,257.3],[176.4,259.4],[174.7,261.4],[173.1,263.3],[171.3,265.3],[169.5,267.2],[167.7,269],[165.8,270.8],[163.9,272.5],[161.9,274.2],[159.9,275.8],[157.8,277.4],[155.7,278.9],[153.6,280.4],[151.4,281.7],[149.2,283.1],[147,284.4],[144.8,285.6],[142.5,286.7],[140.3,287.8],[138,288.8],[135.7,289.8],[133.4,290.7],[131,291.5],[128.7,292.3],[126.4,293],[124,293.6],[121.7,294.2],[119.4,294.7],[117,295.2],[114.7,295.6],[112.4,296],[110.1,296.3],[107.8,296.5],[105.5,296.7],[103.3,296.8],[101.1,296.9],[98.8,296.9],[83.1,295.7],[67.8,292],[53.3,285.9],[39.9,277.5],[28.1,267.2],[18,255.1],[10,241.5],[4.2,226.9],[.9,211.5],[0,195.8],[.1,192.9],[2.1,171.4],[7.2,148.8],[15.4,125.3],[26.6,100.8],[41,75.2],[58.4,49.3],[78.4,23.2],[98.9,0]]]},symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:t===i.activeHandle?te.toArray():i.view.effectiveTheme.accentColor.toArray()}]}}],scaleSymbolsProportionally:!0,respectFrame:!0,clippingPath:{type:"CIMClippingPath",clippingType:"Intersect",path:{rings:[[[0,0],[197.7,0],[197.7,294.7],[0,294.7],[0,0]]]}},rotation:0}],haloSize:1,scaleX:1,angleAlignment:"Display",angle:0}}}),geometry:e.data.geometry})})),this._graphicsLayer.graphics.addMany((0,E.Z)(this._controlPointGraphics)),this._controlPointManipulations=this._controlPointGraphics.map((function(e){return new B({tool:i,view:t,graphic:e})})),this.addHandles([].concat((0,E.Z)(this._controlPointManipulations.map((function(e,t){return e.createDragPipeline(i._getInfo.bind(i,t),(function(e,n){"start"===e.action&&(i._undoStack.push(t),i._redoStack=[],i._sharedUndoStack.push({tool:i,operation:n}),i._sharedRedoStack.length=0),i.updateGraphics()}))}))),[(0,p.watch)((function(){return i.view.scale}),(function(){return i.active?i.updateGraphics():null}))])),this._controlPointManipulations.forEach((function(e,t){e.forEachManipulator((function(e){i.addHandles([e.events.on(["click","grab-changed"],(function(e){return i.updateActiveHandle(t)}))])}))})),this.addHandles([t.on("key-down",(function(e){t.activeTool===i&&(e.key!==Q||e.repeat||(i._isModifierActive=!0,e.stopPropagation()),e.key!==K||e.repeat||(n.opacity*=i._isOpacityToggled?2:.5,i._isOpacityToggled=!i._isOpacityToggled,e.stopPropagation()),e.key!==ee||e.repeat||(i._factor=10,e.stopPropagation()),i._isModifierActive&&(e.key===X&&(i._move(0,i._factor),e.stopPropagation()),e.key===J&&(i._move(0,-i._factor),e.stopPropagation()),e.key===q&&(i._move(-i._factor,0),e.stopPropagation()),e.key===$&&(i._move(i._factor,0),e.stopPropagation())))})),t.on("key-up",(function(e){t.activeTool===i&&(e.key===Q&&(i._isModifierActive=!1,e.stopPropagation()),e.key===ee&&(i._factor=1,e.stopPropagation()))}))]);case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_loadProjectionEngine",value:function(){var e=(0,R.Z)((0,G.Z)().mark((function e(){var t;return(0,G.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._georeference.controlPoints[0].mapPoint,e.abrupt("return",(0,U.initializeProjection)(t.spatialReference,this.view.spatialReference));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getInfo",value:function(e){return{editGeometryOperations:this._controlPointEditGeometryOperations[e],constraints:this._hasValidSpatialReference?null:{xmin:0,ymin:0,xmax:this._georeference.width,ymax:this._georeference.height}}}},{key:"_move",value:function(e,t){var n=this._controlPointEditGeometryOperations[this.activeHandle].move(e*this.view.resolution,t*this.view.resolution,0,D.b.NEW_STEP);this._sharedUndoStack.push({tool:this,operation:n}),this._sharedRedoStack.length=0,this.updateGraphics()}}]),n}(Y.m);(0,c._)([(0,v.Cb)()],ne.prototype,"_hasValidSpatialReference",null),(0,c._)([(0,v.Cb)()],ne.prototype,"activeHandle",void 0),(0,c._)([(0,v.Cb)({constructOnly:!0,nonNullable:!0})],ne.prototype,"mediaElement",void 0),(0,c._)([(0,v.Cb)({constructOnly:!0})],ne.prototype,"view",void 0),ne=(0,c._)([(0,d.j)("esri.views.2d.interactive.editingTools.ControlPointsTransformTool")],ne);var re=n(86950),ie=n(68860),ae=n(13611),oe=n(6644),se=n(32035),le=n(12400),ce=n(82218),ue=n(100),he=n(16889);function fe(e,t){"start"===e.action?t.cursor="grabbing":t.cursor="grab"}var pe=function(){function e(){(0,a.Z)(this,e),this._lastDragEvent=null,this.next=new W.hM,this._enabled=!1}return(0,o.Z)(e,[{key:"enabled",get:function(){return this._enabled},set:function(e){if(this._enabled!==e&&null!=this._lastDragEvent){var t=(0,i.Z)((0,i.Z)({},this._lastDragEvent),{},{action:"update"});e&&this._adjustScaleFactors(t),this.next.execute(t)}this._enabled=e}},{key:"createDragEventPipelineStep",value:function(){var e=this;return this._lastDragEvent=null,function(t){return e._lastDragEvent="end"!==t.action?(0,i.Z)({},t):null,e._enabled&&e._adjustScaleFactors(t),t}}},{key:"_adjustScaleFactors",value:function(e){var t=0!==e.direction[0]&&0!==e.direction[1]?Math.max(Math.abs(e.factor1),Math.abs(e.factor2)):0===e.direction[0]?Math.abs(e.factor2):Math.abs(e.factor1);e.factor1=e.factor1<0?-t:t,e.factor2=e.factor2<0?-t:t}}]),e}(),ve=function(){function e(){(0,a.Z)(this,e),this._lastDragEvent=null,this.next=new W.hM,this._enabled=!1}return(0,o.Z)(e,[{key:"enabled",get:function(){return this._enabled},set:function(e){if(this._enabled!==e&&null!=this._lastDragEvent){var t=(0,i.Z)((0,i.Z)({},this._lastDragEvent),{},{action:"update"});e&&this._adjustRotateAngle(t),this.next.execute(t)}this._enabled=e}},{key:"createDragEventPipelineStep",value:function(){var e=this;return this._lastDragEvent=null,function(t){return e._lastDragEvent="end"!==t.action?(0,i.Z)({},t):null,e._enabled&&e._adjustRotateAngle(t),t}}},{key:"_adjustRotateAngle",value:function(e){var t=(0,he.BV)(e.rotateAngle);e.rotateAngle=(0,he.Vl)(5*Math.round(t/5))}}]),e}(),de=n(20008),ye=n(34778),me=n(92583),ge=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(e){var r;return(0,a.Z)(this,n),(r=t.call(this))._handles=new ue.Z,r._originCache=(0,le.Ue)(),r._view=e.view,r._tool=e.tool,r._graphic=e.graphic,r._snapRotation=e.snapRotation,r._manipulator=r._createManipulator(),r._handles.add([r._manipulator.events.on("grab-changed",(function(e){return fe(e,r._manipulator)}))]),r.forEachManipulator((function(e){return r._tool.manipulators.add(e)})),r}return(0,o.Z)(n,[{key:"destroy",value:function(){var e=this;this._handles.destroy(),this.forEachManipulator((function(t){e._tool.manipulators.remove(t),t.destroy()})),this._tool=null,this._view=null,this._manipulator=null,this._snapRotation=null,this._graphic=null,this._handles=null,this._originCache=null}},{key:"forEachManipulator",value:function(e){e(this._manipulator,Z.ROTATE)}},{key:"createDragPipeline",value:function(e,t){var n=this,r=null,a=null;return(0,W.Xd)(this._manipulator,(function(o,s){s.next((function(t){if("start"===t.action){o.cursor="grabbing";var n=e();r=n.plane,a=n.editGeometryOperations}return t})).next((0,W.Cf)(n._view)).next((function(e){return(0,i.Z)((0,i.Z)({},e),{},{rotateAngle:(0,de.cM)(e.mapStart,e.mapEnd,{x:r.origin[0],y:r.origin[1]},!0)})})).next(n._snapRotation.createDragEventPipelineStep(),n._snapRotation.next).next((function(e){var i=(0,se.c)(n._originCache,r.origin),o="start"===e.action?D.b.NEW_STEP:D.b.ACCUMULATE_STEPS,s=a.rotate(i,e.rotateAngle,o,ye.w.REPLACE);return(0,me.nn)(s,r),t(e,s),e})).next((function(e){return"end"===e.action&&(o.cursor="grab"),e}))}))}},{key:"_createManipulator",value:function(){var e=this._view,t=this._graphic;return new H.L({view:e,graphic:t,selectable:!0,cursor:"grab"})}}]),n}(V),_e=1e-6;function xe(e){var t=(0,se.l)(e.basis1),n=(0,se.l)(e.basis2);return.3*Math.min(t,n)}var be=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(e){var r;return(0,a.Z)(this,n),(r=t.call(this))._handles=new ue.Z,r._planeStart=(0,ce.a)(),r._displayPlaneStart=(0,ce.a)(),r._originCache=(0,le.Ue)(),r._axisCache=(0,oe.Ue)(),r._renderStartCache=(0,le.Ue)(),r._renderEndCache=(0,le.Ue)(),r._resizeOriginCache=(0,le.Ue)(),r._view=e.view,r._tool=e.tool,r._graphic=e.graphic,r._direction=e.direction,r._preserveAspectRatio=e.preserveAspectRatio,r._manipulator=r._createManipulator(),r._handles.add([r._manipulator.events.on("grab-changed",(function(e){return fe(e,r._manipulator)}))]),r.forEachManipulator((function(e){return r._tool.manipulators.add(e)})),r}return(0,o.Z)(n,[{key:"destroy",value:function(){var e=this;this._handles.destroy(),this.forEachManipulator((function(t){e._tool.manipulators.remove(t),t.destroy()})),this._tool=null,this._view=null,this._graphic=null,this._manipulator=null,this._direction=null,this._handles=null,this._planeStart=null,this._displayPlaneStart=null,this._originCache=null,this._axisCache=null,this._renderStartCache=null,this._renderEndCache=null,this._resizeOriginCache=null,this._preserveAspectRatio=null}},{key:"forEachManipulator",value:function(e){e(this._manipulator,Z.SCALE)}},{key:"createDragPipeline",value:function(e,t){var n=this,r=null,a=null,o=null,s=0,l=null,c=null,u=this._planeStart,h=this._displayPlaneStart,f=this._direction;return(0,W.Xd)(this._manipulator,(function(p,v){v.next((function(t){if("start"===t.action){p.cursor="grabbing";var i=e();r=i.plane,a=i.displayPlane,o=i.editGeometryOperations,s=10*n._view.resolution,(0,ce.c)(r,u),(0,ce.c)(a,h);var c=(0,L.C5)(o.data.spatialReference);l=c?c.valid[1]-c.valid[0]-30*n._view.resolution:null}return t})).next((0,W.Cf)(n._view)).next((function(e){var t=(0,se.c)(n._renderStartCache,[e.mapStart.x,e.mapStart.y,0]),r=(0,se.c)(n._renderEndCache,[e.mapEnd.x,e.mapEnd.y,0]),o=(0,se.c)(n._resizeOriginCache,h.origin);(0,se.r)(o,o,h.basis1,-f[0]),(0,se.r)(o,o,h.basis2,-f[1]),(0,se.f)(r,r,o),(0,se.f)(t,t,o);var l=0!==f[0]&&0!==f[1],c=xe(h),u=xe(a)/c,p=function(e,i){if(0===e)return 1;var a=(0,se.l)(i),o=.5*e*(0,se.m)(i,r)/a,c=o<0?-1:1;l&&(o+=(a-.5*e*(0,se.m)(i,t)/a)*c*u);var h=a<1.5*s?1:_e;return a=Math.max(a-s,_e),c>0&&(o-=10*n._view.resolution),c*Math.max(c*(o/a),h)},v=p(f[0],h.basis1),d=p(f[1],h.basis2);return(0,i.Z)((0,i.Z)({},e),{},{direction:f,factor1:v,factor2:d})})).next(n._preserveAspectRatio.createDragEventPipelineStep(),n._preserveAspectRatio.next).next((function(e){var i=(0,se.c)(n._originCache,u.origin);(0,se.r)(i,i,u.basis1,-f[0]),(0,se.r)(i,i,u.basis2,-f[1]);var a=(0,ae.t8)(n._axisCache,u.basis1[0],u.basis1[1]);(0,ae.Fv)(a,a);var s=o.data.allVertices,h="start"===e.action?D.b.NEW_STEP:D.b.ACCUMULATE_STEPS,p=o.scaleVertices(s,i,a,e.factor1,e.factor2,h,ye.w.REPLACE);return l&&l<o.data.geometry.extent.width&&c?o.updateVertices(s,c):((0,ce.c)(u,r),(0,me.nn)(p,r),c=p.operation,t(e,p)),e})).next((function(e){return"end"===e.action&&(p.cursor="grab"),e}))}))}},{key:"_createManipulator",value:function(){return new H.L({view:this._view,graphic:this._graphic,selectable:!0,cursor:"grab"})}}]),n}(V),ke=n(87888),Me=n(84954),we=n(74923),Se=n(72612),Ce=n(80885),Pe=n(61459),Te=(N.C,[[1,1],[1,-1],[-1,-1],[-1,1],[1,0],[0,-1],[-1,0],[0,1]]),Ze=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(e){var r;return(0,a.Z)(this,n),(r=t.call(this,e))._initialControlPoints=null,r._initialGeometry=null,r._graphic=null,r._planeCache=(0,ce.a)(),r._displayPlaneCache=(0,ce.a)(),r._mainAxisCache=(0,oe.Ue)(),r._rotationHandleCache=(0,le.Ue)(),r._cornerA=(0,le.Ue)(),r._cornerB=(0,le.Ue)(),r._cornerC=(0,le.Ue)(),r._cornerD=(0,le.Ue)(),r._avgAB=(0,le.Ue)(),r._avgBC=(0,le.Ue)(),r._avgCD=(0,le.Ue)(),r._avgDA=(0,le.Ue)(),r._preserveAspectRatio=new pe,r._snapRotation=new ve,r._graphicsLayer=new I.default({internal:!0,listMode:"hide",visible:!1}),r._sharedUndoStack=[],r._sharedRedoStack=[],r._isOpacityToggled=!1,r._factor=1,r.preserveAspectRatio=null,r.snapRotation=null,r}return(0,o.Z)(n,[{key:"initialize",value:function(){this._initialize()}},{key:"destroy",value:function(){var e=this.view.map;this._dragManipulation.destroy(),this._rotateManipulation.destroy(),this._scaleManipulations.forEach((function(e){return e.destroy()})),this._editGeometryOperations.destroy(),e.removeMany([this._graphicsLayer]),this._graphicsLayer.removeAll(),this._graphicsLayer=(0,f.SC)(this._graphicsLayer),this._initialControlPoints=null,this._initialGeometry=null,this._graphic=null,this._preserveAspectRatio=null,this._snapRotation=null,this._planeCache=null,this._displayPlaneCache=null,this._rotationHandleCache=null,this._mainAxisCache=null,this._cornerA=null,this._cornerB=null,this._cornerC=null,this._cornerD=null,this._avgAB=null,this._avgBC=null,this._avgCD=null,this._avgDA=null,this._sharedUndoStack=null,this._sharedRedoStack=null}},{key:"_plane",get:function(){var e=this._graphic.geometry;if(null==e)return null;var t=this._editGeometryOperations.data,n=t.components[0].edges[0],r=(0,ae.$X)(this._mainAxisCache,n.leftVertex.pos,n.rightVertex.pos);(0,ae.Fv)(r,r);var i=80*this.view.resolution,a=this.view.spatialReference;return(0,L.fS)(a,e.spatialReference)&&(i*=(0,ie.c9)(a)/(0,ie.c9)(e.spatialReference)),(0,me.lv)(r,t,i,this._planeCache)}},{key:"_displayPlane",get:function(){var e=this._plane;if(!e)return null;var t=this._displayPlaneCache;(0,ce.c)(e,t);var n=10*this.view.resolution;return(0,se.j)(t.basis1,t.basis1,1+n/(0,se.l)(t.basis1)),(0,se.j)(t.basis2,t.basis2,1+n/(0,se.l)(t.basis2)),t}},{key:"_backgroundGraphicGeometry",get:function(){var e=this._displayPlane;if(!e)return null;var t=this.view.spatialReference;return this._updateDisplayPlaneConrers(e),new Ce.Z({spatialReference:t,rings:[[this._cornerA,this._cornerB,this._cornerC,this._cornerD,this._cornerA]]})}},{key:"_rotateGraphicGeometry",get:function(){var e=this._plane;if(!e)return null;var t=this._rotationHandleCache;return(0,se.n)(t,e.basis1),(0,se.j)(t,t,30*this.view.resolution),(0,se.g)(t,t,e.origin),(0,se.g)(t,t,e.basis1),new S.Z({x:t[0],y:t[1],spatialReference:this.view.spatialReference})}},{key:"_scaleGraphicGeometries",get:function(){var e=this._displayPlane;if(!e)return[];var t=this.view.spatialReference;this._updateDisplayPlaneConrers(e);var n=this._cornerA,r=this._cornerB,i=this._cornerC,a=this._cornerD,o=(0,se.o)(this._avgAB,n,r,.5),s=(0,se.o)(this._avgBC,r,i,.5),l=(0,se.o)(this._avgCD,i,a,.5),c=(0,se.o)(this._avgDA,a,n,.5);return[new S.Z({x:n[0],y:n[1],spatialReference:t}),new S.Z({x:r[0],y:r[1],spatialReference:t}),new S.Z({x:i[0],y:i[1],spatialReference:t}),new S.Z({x:a[0],y:a[1],spatialReference:t}),new S.Z({x:o[0],y:o[1],spatialReference:t}),new S.Z({x:s[0],y:s[1],spatialReference:t}),new S.Z({x:l[0],y:l[1],spatialReference:t}),new S.Z({x:c[0],y:c[1],spatialReference:t})]}},{key:"onActivate",value:function(){this.visible=!0}},{key:"onDeactivate",value:function(){this.visible=!1}},{key:"onShow",value:function(){this._graphicsLayer.visible=!0}},{key:"onHide",value:function(){this._graphicsLayer.visible=!1}},{key:"canUndo",value:function(){return this._editGeometryOperations.canUndo}},{key:"canRedo",value:function(){return this._editGeometryOperations.canRedo}},{key:"undo",value:function(){this._editGeometryOperations.undo(),this.updateGraphics()}},{key:"redo",value:function(){this._editGeometryOperations.redo(),this.updateGraphics()}},{key:"refresh",value:function(){var e=this.view,t=this.target,n="georeference"in t?t.georeference.coords:t.geometry,r=this._editGeometryOperations,i=r.data.components[0].vertices,a=Me.XE.fromGeometry((0,U.project)(n,e.spatialReference),O.JY.Local).components[0].vertices;i.forEach((function(e,t){r.setVertexPosition(e,a[t].pos)})),this.updateGraphics()}},{key:"reset",value:function(){var e=this.target;if("georeference"in e){var t=e.georeference;"control-points"===t.type&&(t.controlPoints=this._initialControlPoints)}else e.geometry=this._initialGeometry;this.refresh(),this._sharedUndoStack.length=0,this._sharedRedoStack.length=0}},{key:"updateGraphics",value:function(){var e=this,t=this._editGeometryOperations.data.geometry;"georeference"in this.target&&(this.target.georeference.coords=t),this._graphic.geometry=t,this._backgroundGraphic.geometry=this._backgroundGraphicGeometry,this._rotateGraphic.geometry=this._rotateGraphicGeometry,this._scaleGraphicGeometries.forEach((function(t,n){e._scaleGraphics[n].geometry=t}))}},{key:"setSharedUndoStack",value:function(e){this._sharedUndoStack=e}},{key:"setSharedRedoStack",value:function(e){this._sharedRedoStack=e}},{key:"_initialize",value:function(){var e=(0,R.Z)((0,G.Z)().mark((function e(){var t,n,r,i,a,o=this;return(0,G.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.view,"georeference"in(n=this.target)?(r=n.georeference,this._graphic=new u.Z({geometry:r.coords}),this._initialControlPoints="control-points"===r.type?r.controlPoints:null):(this._graphic=n,this._initialGeometry=n.geometry),t.map.addMany([this._graphicsLayer]),t.focus(),this.visible=!1,this.finishToolCreation(),e.next=8,this._loadProjectionEngine();case 8:this._editGeometryOperations=F.c.fromGeometry((0,U.project)(this._graphic.geometry,t.spatialReference),O.JY.Local),this._backgroundGraphic=new u.Z({symbol:new Pe.default({color:"transparent",outline:{type:"simple-line",color:t.effectiveTheme.accentColor,width:2}}),geometry:this._backgroundGraphicGeometry}),this._rotateGraphic=new u.Z({symbol:new g.default({color:(0,re.mj)(t.effectiveTheme.accentColor),outline:{type:"simple-line",color:t.effectiveTheme.accentColor,width:1}}),geometry:this._rotateGraphicGeometry}),this._scaleGraphics=this._scaleGraphicGeometries.map((function(e){return new u.Z({symbol:new g.default({size:6,style:"square",color:(0,re.mj)(t.effectiveTheme.accentColor),outline:{type:"simple-line",color:t.effectiveTheme.accentColor,width:1}}),geometry:e})})),this._graphicsLayer.graphics.addMany([this._backgroundGraphic,this._rotateGraphic].concat((0,E.Z)(this._scaleGraphics))),this._dragManipulation=new B({tool:this,view:t,graphic:this._graphic}),this._rotateManipulation=new ge({tool:this,view:t,graphic:this._rotateGraphic,snapRotation:this._snapRotation}),this._scaleManipulations=this._scaleGraphics.map((function(e,n){return new be({tool:o,view:t,graphic:e,direction:Te[n],preserveAspectRatio:o._preserveAspectRatio})})),this.addHandles([this._dragManipulation.createDragPipeline(this._getInfo.bind(this),this._updateGraphics.bind(this)),this._rotateManipulation.createDragPipeline(this._getInfo.bind(this),this._updateGraphics.bind(this))].concat((0,E.Z)(this._scaleManipulations.map((function(e){return e.createDragPipeline(o._getInfo.bind(o),o._updateGraphics.bind(o))}))),[(0,p.watch)((function(){return o.view.scale}),(function(){return o.active?o.updateGraphics():null})),t.on("click",function(){var e=(0,R.Z)((0,G.Z)().mark((function e(r){var i,a,s,l,c,u,h,f;return(0,G.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==t.activeTool||t.activeTool===o){e.next=2;break}return e.abrupt("return");case 2:return i=(0,Se.vT)(r),a=[],t.map.allLayers.forEach((function(e){"vector-tile"!==e.type&&"imagery"!==e.type||a.push(e)})),e.next=6,o.view.hitTest(i,{exclude:a});case 6:s=e.sent,0===(l=s.results).length?t.activeTool=null:(c=(0,we.qm)(s.results),u="georeference"in n,h=l.map((function(e){return"media"===e.type?e.element:null})).filter(Boolean),f=new Set([].concat((0,E.Z)(o._graphicsLayer.graphics),[u?null:n]).filter(Boolean)),u&&h.includes(n)||null!=c&&f.has(c.graphic)?null==t.activeTool&&(t.activeTool=o):t.activeTool=null);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())])),i=function(e){o.addHandles(e.events.on("grab-changed",(function(e){"georeference"in n&&("start"===e.action?n.opacity*=.5:"end"===e.action&&(n.opacity*=2))})))},this._dragManipulation.forEachManipulator(i),this._rotateManipulation.forEachManipulator(i),this._scaleManipulations.forEach((function(e){return e.forEachManipulator(i)})),(a=new ke.G7).addToggle(ke.Lk.preserveAspectRatio,(function(){null==o.preserveAspectRatio&&(o._preserveAspectRatio.enabled=!o._preserveAspectRatio.enabled)})),a.addToggle(ke.Lk.rotateIncrements,(function(){null==o.snapRotation&&(o._snapRotation.enabled=!o._snapRotation.enabled)})),a.add(ke.Lk.toggleOpacity,(function(){"georeference"in n&&(n.opacity*=o._isOpacityToggled?2:.5,o._isOpacityToggled=!o._isOpacityToggled)})),a.addToggle(ke.Lk.factorModifier,(function(e){return o._factor="key-down"===e.type?10:1})),a.add(ke.Lk.scaleUp,(function(){return o._scale(o._factor)})),a.add(ke.Lk.scaleDown,(function(){return o._scale(-o._factor)})),a.add(ke.Lk.moveUp,(function(){return o._move(0,o._factor)})),a.add(ke.Lk.moveDown,(function(){return o._move(0,-o._factor)})),a.add(ke.Lk.moveLeft,(function(){return o._move(-o._factor,0)})),a.add(ke.Lk.moveRight,(function(){return o._move(o._factor,0)})),this.addHandles([t.on("key-down",(function(e){t.activeTool===o&&a.dispatch(t.inputManager,e)})),t.on("key-up",(function(e){t.activeTool===o&&a.dispatch(t.inputManager,e)}))]);case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_loadProjectionEngine",value:function(){var e=(0,R.Z)((0,G.Z)().mark((function e(){var t;return(0,G.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._graphic.geometry,e.abrupt("return",(0,U.initializeProjection)(t.spatialReference,this.view.spatialReference));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_updateDisplayPlaneConrers",value:function(e){var t=e.basis1,n=e.basis2,r=e.origin,i=this._cornerA;(0,se.g)(i,r,t),(0,se.g)(i,i,n);var a=this._cornerB;(0,se.g)(a,r,t),(0,se.f)(a,a,n);var o=this._cornerC;(0,se.f)(o,r,t),(0,se.f)(o,o,n);var s=this._cornerD;(0,se.f)(s,r,t),(0,se.g)(s,s,n)}},{key:"_getInfo",value:function(){return{editGeometryOperations:this._editGeometryOperations,plane:this._plane,displayPlane:this._displayPlane}}},{key:"_updateGraphics",value:function(e,t){"start"===e.action&&(this._sharedUndoStack.push({tool:this,operation:t}),this._sharedRedoStack.length=0),this.updateGraphics()}},{key:"_scale",value:function(e){var t,n=this._editGeometryOperations,r=null===(t=n.data.geometry.extent)||void 0===t?void 0:t.width,i=(r+e*this.view.resolution)/r,a=n.scale(this._plane.origin,oe.E9,i,i,D.b.NEW_STEP,ye.w.REPLACE);this._sharedUndoStack.push({tool:this,operation:a}),this._sharedRedoStack.length=0,this.updateGraphics()}},{key:"_move",value:function(e,t){var n=this._editGeometryOperations.move(e*this.view.resolution,t*this.view.resolution,0,D.b.NEW_STEP);this._sharedUndoStack.push({tool:this,operation:n}),this._sharedRedoStack.length=0,this.updateGraphics()}}]),n}(Y.m);(0,c._)([(0,v.Cb)()],Ze.prototype,"_plane",null),(0,c._)([(0,v.Cb)()],Ze.prototype,"_backgroundGraphicGeometry",null),(0,c._)([(0,v.Cb)()],Ze.prototype,"_rotateGraphicGeometry",null),(0,c._)([(0,v.Cb)()],Ze.prototype,"_scaleGraphicGeometries",null),(0,c._)([(0,v.Cb)()],Ze.prototype,"preserveAspectRatio",void 0),(0,c._)([(0,v.Cb)()],Ze.prototype,"snapRotation",void 0),(0,c._)([(0,v.Cb)({constructOnly:!0,nonNullable:!0})],Ze.prototype,"target",void 0),(0,c._)([(0,v.Cb)({constructOnly:!0})],Ze.prototype,"view",void 0),Ze=(0,c._)([(0,d.j)("esri.views.2d.interactive.editingTools.TransformTool")],Ze);var Ee=n(7138),Ge="r",Re="z",Ae=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(e){var r;return(0,a.Z)(this,n),(r=t.call(this,e))._transformTool=null,r._controlPointsTransformTool=null,r._advancedModeTransformTool=null,r._activeTool=null,r._sharedUndoStack=[],r._sharedRedoStack=[],r._originalOpacity=null,r.activeHandle=0,r}return(0,o.Z)(n,[{key:"initialize",value:function(){var e=this,t=this.view,n=this.mediaElement,r=this.preserveAspectRatio,i=this.snapRotation,a=this.advancedMode;this._originalOpacity=n.opacity,this._transformTool=new Ze({target:n,view:t,preserveAspectRatio:r,snapRotation:i}),this._controlPointsTransformTool=new ne({mediaElement:n,view:t}),this._advancedModeTransformTool=new ne({mediaElement:a.mediaElement,view:a.view}),this._transformTool.setSharedUndoStack(this._sharedUndoStack),this._transformTool.setSharedRedoStack(this._sharedRedoStack),this._controlPointsTransformTool.setSharedUndoStack(this._sharedUndoStack),this._controlPointsTransformTool.setSharedRedoStack(this._sharedRedoStack),this._advancedModeTransformTool.setSharedUndoStack(this._sharedUndoStack),this._advancedModeTransformTool.setSharedRedoStack(this._sharedRedoStack);var o=n.georeference,s=a.mediaElement.georeference;a.view.tools.addMany([this._advancedModeTransformTool]),"controlPoints"in s&&"controlPoints"in o&&this.addHandles([a.view.on("key-down",(function(t){t.key===Re&&e.canUndo()&&(e.undo(),t.stopPropagation()),t.key===Ge&&e.canRedo()&&(e.redo(),t.stopPropagation())})),a.view.on("focus",function(){var t=(0,R.Z)((0,G.Z)().mark((function t(n){return(0,G.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e._controlPointsTransformTool.removeHighlightActiveHandle(),e._advancedModeTransformTool.highlightActiveHandle();case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),(0,p.watch)((function(){return s.controlPoints}),(function(t){var n;o.controlPoints=t.map((function(e,t){return{sourcePoint:e.sourcePoint,mapPoint:o.controlPoints[t].mapPoint}})),null===(n=e._activeTool)||void 0===n||n.refresh()})),(0,p.watch)((function(){return e._controlPointsTransformTool.activeHandle}),(function(t){e._advancedModeTransformTool.updateActiveHandle(t),e.activeHandle=t})),(0,p.watch)((function(){return e._advancedModeTransformTool.activeHandle}),(function(t){e._controlPointsTransformTool.updateActiveHandle(t),e.activeHandle=t}))]),this.addHandles([t.on("key-down",(function(t){t.key===Re&&e.canUndo()&&(e.undo(),t.stopPropagation()),t.key===Ge&&e.canRedo()&&(e.redo(),t.stopPropagation())})),t.on("focus",function(){var t=(0,R.Z)((0,G.Z)().mark((function t(n){return(0,G.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e._advancedModeTransformTool.removeHighlightActiveHandle(),e._controlPointsTransformTool.highlightActiveHandle();case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())]),t.tools.addMany([this._transformTool,this._controlPointsTransformTool]),t.activeTool=this._transformTool,this._activeTool=this._transformTool,t.focus()}},{key:"destroy",value:function(){var e,t;null!==(e=this._transformTool)&&void 0!==e&&e.destroy(),null!==(t=this._controlPointsTransformTool)&&void 0!==t&&t.destroy(),this._transformTool=null,this._controlPointsTransformTool=null,this._advancedModeTransformTool=null,this._activeTool=null,this._sharedUndoStack=null,this._sharedRedoStack=null}},{key:"canUndo",value:function(){return this._sharedUndoStack.length>0}},{key:"canRedo",value:function(){return this._sharedRedoStack.length>0}},{key:"undo",value:function(){if(this._sharedUndoStack.length>0){var e,t=this._sharedUndoStack.pop(),n=t.tool,r=t.operation;n!==this._activeTool&&n.refresh(),r.undo(),n.updateGraphics(),this._sharedRedoStack.push({tool:n,operation:r}),this._activeTool!==n&&(null===(e=this._activeTool)||void 0===e||e.refresh())}}},{key:"redo",value:function(){if(this._sharedRedoStack.length>0){var e,t=this._sharedRedoStack.pop(),n=t.tool,r=t.operation;n!==this._activeTool&&n.refresh(),r.apply(),n.updateGraphics(),this._sharedUndoStack.push({tool:n,operation:r}),this._activeTool!==n&&(null===(e=this._activeTool)||void 0===e||e.refresh())}}},{key:"refresh",value:function(){this._activeTool.refresh()}},{key:"reset",value:function(){this._activeTool.reset(),this._advancedModeTransformTool.reset()}},{key:"enableAdvancedMode",value:function(){var e=(0,R.Z)((0,G.Z)().mark((function e(){return(0,G.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.view.activeTool=this._controlPointsTransformTool,this._activeTool=this._controlPointsTransformTool,this._activeTool.refresh(),e.next=5,this.advancedMode.view.when();case 5:this.advancedMode.view.activeTool=this._advancedModeTransformTool,this._originalOpacity=this._controlPointsTransformTool.mediaElement.opacity,this._controlPointsTransformTool.mediaElement.opacity=.25*this._originalOpacity;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"disableAdvancedMode",value:function(){this.view.activeTool=this._transformTool,this._activeTool=this._transformTool,this._activeTool.refresh(),this.advancedMode.view.activeTool=null,this._controlPointsTransformTool.mediaElement.opacity=this._originalOpacity}}]),n}(Ee.default);(0,c._)([(0,v.Cb)()],Ae.prototype,"activeHandle",void 0),(0,c._)([(0,v.Cb)({constructOnly:!0})],Ae.prototype,"advancedMode",void 0),(0,c._)([(0,v.Cb)()],Ae.prototype,"preserveAspectRatio",void 0),(0,c._)([(0,v.Cb)()],Ae.prototype,"snapRotation",void 0),(0,c._)([(0,v.Cb)({constructOnly:!0,nonNullable:!0})],Ae.prototype,"mediaElement",void 0),(0,c._)([(0,v.Cb)({constructOnly:!0})],Ae.prototype,"view",void 0),Ae=(0,c._)([(0,d.j)("esri.views.2d.interactive.editingTools.MediaTransformToolsWrapper")],Ae)},20008:function(e,t,n){n.d(t,{Ru:function(){return h},bA:function(){return u},cM:function(){return f},e7:function(){return c}});var r=n(29439),i=n(16889),a=n(65156),o=n(376),s=n(69662);function l(e,t,n,r){var i,a;if(null==r||e.hasZ||(r=void 0),"point"===e.type)return e.x+=t,e.y+=n,e.hasZ&&null!=r&&(e.z+=r),e;if("multipoint"===e.type){for(var o=e.points,l=0;l<o.length;l++)o[l]=p(o[l],t,n,r);return e}if("extent"===e.type)return e.xmin+=t,e.xmax+=t,e.ymin+=n,e.ymax+=n,null!=r&&(null!==(i=e.zmin)&&void 0!==i||(e.zmin=0),e.zmin+=r,null!==(a=e.zmax)&&void 0!==a||(e.zmax=0),e.zmax+=r),e;for(var c=(0,s.nA)(e),u="polyline"===e.type?e.paths:e.rings,h=0;h<c.length;h++)for(var f=c[h],v=0;v<f.length;v++)f[v]=p(f[v],t,n,r);return"paths"in e?e.paths=u:e.rings=u,e}function c(e,t,n,r,i){var a=e.clone(),o=r.resolution;if("point"===a.type){if(i)l(a,t*o,-n*o);else{var c=r.state.transform,u=r.state.inverseTransform,h=c[0]*a.x+c[2]*a.y+c[4],f=c[1]*a.x+c[3]*a.y+c[5];a.x=u[0]*(h+t)+u[2]*(f+n)+u[4],a.y=u[1]*(h+t)+u[3]*(f+n)+u[5]}return a}if("multipoint"===a.type){if(i)l(a,t*o,-n*o);else for(var p=a.points,d=r.state.transform,y=r.state.inverseTransform,m=0;m<p.length;m++){var g=p[m],_=d[0]*g[0]+d[2]*g[1]+d[4],x=d[1]*g[0]+d[3]*g[1]+d[5],b=y[0]*(_+t)+y[2]*(x+n)+y[4],k=y[1]*(_+t)+y[3]*(x+n)+y[5];p[m]=v(g,b,k,void 0)}return a}if("extent"===a.type){if(i)l(a,t*o,-n*o);else{var M=r.state.transform,w=r.state.inverseTransform,S=M[0]*a.xmin+M[2]*a.ymin+M[4],C=M[1]*a.xmin+M[3]*a.ymin+M[5],P=M[0]*a.xmax+M[2]*a.ymax+M[4],T=M[1]*a.xmax+M[3]*a.ymax+M[5];a.xmin=w[0]*(S+t)+w[2]*(C+n)+w[4],a.ymin=w[1]*(S+t)+w[3]*(C+n)+w[5],a.xmax=w[0]*(P+t)+w[2]*(T+n)+w[4],a.ymax=w[1]*(P+t)+w[3]*(T+n)+w[5]}return a}if(i)l(a,t*o,-n*o);else{for(var Z=(0,s.nA)(a),E="polyline"===a.type?a.paths:a.rings,G=r.state.transform,R=r.state.inverseTransform,A=0;A<Z.length;A++)for(var U=Z[A],L=0;L<U.length;L++){var I=U[L],z=G[0]*I[0]+G[2]*I[1]+G[4],O=G[1]*I[0]+G[3]*I[1]+G[5],V=R[0]*(z+t)+R[2]*(O+n)+R[4],W=R[1]*(z+t)+R[3]*(O+n)+R[5];U[L]=v(I,V,W,void 0)}"paths"in a?a.paths=E:a.rings=E}return a}function u(e,t,n,i){if("point"===e.type){var l=e.x,c=e.y,u=i?i[0]:l,h=i?i[1]:c,f=e.clone(),p=(l-u)*t+u,d=(c-h)*n+h;return f.x=p,f.y=d,f}if("multipoint"===e.type){for(var y=(0,s.nA)(e),m=(0,a.Ue)(),g=(0,o.C6)(m,[y]),_=(0,r.Z)(g,4),x=_[0],b=_[1],k=_[2],M=_[3],w=i?i[0]:(x+k)/2,S=i?i[1]:(M+b)/2,C=e.clone(),P=C.points,T=0;T<P.length;T++){var Z=P[T],E=(0,r.Z)(Z,2),G=(E[0]-w)*t+w,R=(E[1]-S)*n+S;P[T]=v(Z,G,R,void 0)}return C}if("extent"===e.type){var A=e.xmin,U=e.xmax,L=e.ymin,I=e.ymax,z=i?i[0]:(A+U)/2,O=i?i[1]:(I+L)/2,V=e.clone();if(V.xmin=(A-z)*t+z,V.ymax=(I-O)*n+O,V.xmax=(U-z)*t+z,V.ymin=(L-O)*n+O,V.xmin>V.xmax){var W=V.xmin,H=V.xmax;V.xmin=H,V.xmax=W}if(V.ymin>V.ymax){var D=V.ymin,j=V.ymax;V.ymin=j,V.ymax=D}return V}for(var B=(0,s.nA)(e),N=(0,a.Ue)(),Y=(0,o.C6)(N,B),F=(0,r.Z)(Y,4),X=F[0],J=F[1],q=F[2],$=F[3],K=i?i[0]:(X+q)/2,Q=i?i[1]:($+J)/2,ee=e.clone(),te="polyline"===ee.type?ee.paths:ee.rings,ne=0;ne<B.length;ne++)for(var re=B[ne],ie=0;ie<re.length;ie++){var ae=re[ie],oe=(0,r.Z)(ae,2),se=(oe[0]-K)*t+K,le=(oe[1]-Q)*n+Q;te[ne][ie]=v(ae,se,le,void 0)}return"paths"in ee?ee.paths=te:ee.rings=te,ee}function h(e,t,n,r,i,a){var o=Math.sqrt((n-e)*(n-e)+(r-t)*(r-t));return Math.sqrt((i-e)*(i-e)+(a-t)*(a-t))/o}function f(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=Math.atan2(t.y-n.y,t.x-n.x)-Math.atan2(e.y-n.y,e.x-n.x),o=Math.atan2(Math.sin(a),Math.cos(a));return r?o:(0,i.BV)(o)}function p(e,t,n,r){return v(e,e[0]+t,e[1]+n,null!=e[2]&&null!=r?e[2]+r:void 0)}function v(e,t,n,r){var i=[t,n];return e.length>2&&i.push(null!=r?r:e[2]),e.length>3&&i.push(e[3]),i}},99034:function(e,t,n){var r,i,a;n.d(t,{Q9:function(){return i},bH:function(){return r},jg:function(){return a}}),function(e){e[e.USER=0]="USER",e[e.MANAGER=1]="MANAGER"}(r||(r={})),function(e){e[e.None=0]="None",e[e.Unfocused=1]="Unfocused",e[e.Focused=2]="Focused",e[e.Unselected=4]="Unselected",e[e.Selected=8]="Selected",e[e.All=15]="All"}(i||(i={})),function(e){e[e.None=0]="None",e[e.Custom1=16]="Custom1",e[e.Custom2=32]="Custom2",e[e.Custom3=64]="Custom3",e[e.Custom4=128]="Custom4",e[e.Custom5=256]="Custom5",e[e.Custom6=512]="Custom6",e[e.Custom7=1024]="Custom7",e[e.Custom8=2048]="Custom8",e[e.Custom9=4096]="Custom9",e[e.Custom10=8192]="Custom10",e[e.Custom11=16384]="Custom11",e[e.Custom12=32768]="Custom12",e[e.All=65520]="All"}(a||(a={}))},4914:function(e,t,n){n.d(t,{Cr:function(){return k},FN:function(){return x},KY:function(){return _},Sx:function(){return f},Uy:function(){return v},Z1:function(){return d},_e:function(){return m},qj:function(){return b},un:function(){return g},xI:function(){return y}});var r,i=n(37762),a=n(47898),o=n(68860),s=n(32035),l=n(12400),c=n(5986),u=n(92975),h=n(25003);function f(e){return p(e,r.Horizontal)}function p(e,t){var n=e.hasZ,s=e.spatialReference,l=(0,h.m)(s),c=0,u=(0,o.j5)(l);if(null==u)return null;var f,p=t===r.Direct?x:b,v=(0,i.Z)(e.paths);try{for(v.s();!(f=v.n()).done;){var d=f.value;if(!(d.length<2))for(var y=d.length-1,m=0;m<y;++m){var g=d[m];w[0]=g[0],w[1]=g[1],w[2]=n?g[2]:0;var _=d[m+1];S[0]=_[0],S[1]=_[1],S[2]=n?_[2]:0;var k=p(w,S,s);if(null==k)return null;c+=k.value}}}catch(M){v.e(M)}finally{v.f()}return(0,a.yG)(c,u)}function v(e,t){var n=e.spatialReference;return(0,u.fS)(n,t.spatialReference)?(w[0]=e.x,w[1]=e.y,w[2]=e.hasZ?e.z:0,S[0]=t.x,S[1]=t.y,S[2]=t.hasZ?t.z:0,function(e,t,n){var r=M(e,t,n);return null!=r?{direct:(0,a.yG)(r.direct,r.unit),horizontal:(0,a.yG)(r.horizontal,r.unit),vertical:(0,a.yG)(r.vertical,r.unit)}:null}(w,S,n)):null}function d(e,t){var n=e.spatialReference;return(0,u.fS)(n,t.spatialReference)?(w[0]=e.x,w[1]=e.y,w[2]=e.hasZ?e.z:0,S[0]=t.x,S[1]=t.y,S[2]=t.hasZ?t.z:0,x(w,S,n)):null}function y(e,t){var n=e.spatialReference;return(0,u.fS)(n,t.spatialReference)?(w[0]=e.x,w[1]=e.y,w[2]=e.hasZ?e.z:0,S[0]=t.x,S[1]=t.y,S[2]=t.hasZ?t.z:0,b(w,S,n)):null}function m(e,t){var n=e.spatialReference;return(0,u.fS)(n,t.spatialReference)?(w[0]=e.x,w[1]=e.y,w[2]=e.hasZ?e.z:0,S[0]=t.x,S[1]=t.y,S[2]=t.hasZ?t.z:0,k(w,S,n)):null}function g(e){return null!=e?_(e.hasZ?e.z:0,e.spatialReference):null}function _(e,t){var n=(0,o.y)(t);return null!=n?(0,a.yG)(null!==e&&void 0!==e?e:0,n):null}function x(e,t,n){var i=M(e,t,n,r.Direct);return null!=i?(0,a.yG)(i.direct,i.unit):null}function b(e,t,n){var i=M(e,t,n,r.Horizontal);return null!=i?(0,a.yG)(i.horizontal,i.unit):null}function k(e,t,n){var i=M(e,t,n,r.Vertical);return null!=i?(0,a.yG)(i.verticalSigned,i.unit):null}function M(e,t,n,i){var a=(0,h.m)(n),l=(0,o.j5)(a);if(null==l)return null;var u=t[2]-e[2];if(i===r.Vertical)return{verticalSigned:u,unit:l};if(!(0,c.S)(e,n,C,a)||!(0,c.S)(t,n,P,a))return null;if(i===r.Direct)return{direct:(0,s.p)(P,C),unit:l};if((0,s.s)(T,e[0],e[1],t[2]),!(0,c.S)(T,n,T,a))return null;var f=(0,s.p)(T,P);return i===r.Horizontal?{horizontal:f,unit:l}:{direct:(0,s.p)(P,C),horizontal:f,vertical:Math.abs(u),unit:l}}!function(e){e[e.Direct=0]="Direct",e[e.Horizontal=1]="Horizontal",e[e.Vertical=2]="Vertical"}(r||(r={}));var w=(0,l.Ue)(),S=(0,l.Ue)(),C=(0,l.Ue)(),P=(0,l.Ue)(),T=(0,l.Ue)()},25003:function(e,t,n){n.d(t,{m:function(){return o}});var r=n(83448),i=n(29691),a=n(92975);function o(e){return(0,a.N$)(e)?(0,a.oR)(e)||(0,a.sS)(e)||(0,a.yW)(e)||(0,r.fY)(e)?i.wY:e:(0,i.rS)(e)}}}]);
//# sourceMappingURL=68231.80804800.chunk.js.map