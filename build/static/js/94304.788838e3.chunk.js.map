{"version":3,"file":"static/js/94304.788838e3.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/symbols/cim/CIMResourceManager.js","../node_modules/@arcgis/core/symbols/cim/CIMSymbolRasterizer.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{loadFont as e}from\"../../core/fontUtils.js\";import{getImageData as t}from\"../../core/imageUtils.js\";class i{constructor(){this._resourceMap=new Map,this._inFlightResourceMap=new Map,this.geometryEngine=null,this.geometryEnginePromise=null}destroy(){this._inFlightResourceMap.clear(),this._resourceMap.clear()}getResource(e){return this._resourceMap.get(e)??null}async fetchResource(e,i){const h=this._resourceMap.get(e);if(h)return{width:h.width,height:h.height};let r=this._inFlightResourceMap.get(e);return r?r.then((e=>({width:e.width,height:e.height}))):(r=t(e,i),this._inFlightResourceMap.set(e,r),r.then((t=>(this._inFlightResourceMap.delete(e),this._resourceMap.set(e,t),{width:t.width,height:t.height})),(()=>({width:0,height:0}))))}deleteResource(e){this._inFlightResourceMap.delete(e),this._resourceMap.delete(e)}loadFont(t){return e(t)}}export{i as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport e from\"./CIMResourceManager.js\";import{Transformation as t,CanvasDrawHelper as i}from\"./CIMSymbolDrawHelper.js\";import{CIMSymbolHelper as r}from\"./CIMSymbolHelper.js\";import{OverrideHelper as a}from\"./OverrideHelper.js\";import{mapCIMSymbolToGeometryType as s}from\"./utils.js\";const n=96/72;class o{constructor(t){this._spatialReference=t,this._imageDataCanvas=null,this._cimResourceManager=new e}get _canvas(){return this._imageDataCanvas||(this._imageDataCanvas=document.createElement(\"canvas\")),this._imageDataCanvas}get resourceManager(){return this._cimResourceManager}async rasterizeCIMSymbolAsync(e,t,i,n,o,l,c,m,g){if(!e)return null;const{data:y}=e;if(!y||\"CIMSymbolReference\"!==y.type||!y.symbol)return null;const{symbol:u}=y;l||(l=s(u));const d=await a.resolveSymbolOverrides(y,t,this._spatialReference,o,l,c,m),w=this._cimResourceManager,p=[];r.fetchResources(d,w,p),r.fetchFonts(d,w,p),p.length>0&&await Promise.all(p);const{width:b,height:f}=i,M=h(l,b,f,n),C=r.getEnvelope(d,M,w);if(!C)return null;let R=1,v=0,I=0;switch(u.type){case\"CIMPointSymbol\":case\"CIMTextSymbol\":{let e=1;C.width>b&&(e=b/C.width);let t=1;C.height>f&&(t=f/C.height),\"preview\"===n&&(C.width<b&&(e=b/C.width),C.height<f&&(t=f/C.height)),R=Math.min(e,t),v=C.x+C.width/2,I=C.y+C.height/2}break;case\"CIMLineSymbol\":{(g||C.height>f)&&(R=f/C.height),I=C.y+C.height/2;const e=C.x*R+b/2,t=(C.x+C.width)*R+b/2,{paths:i}=M;i[0][0][0]-=e/R,i[0][2][0]-=(t-b)/R}break;case\"CIMPolygonSymbol\":{v=C.x+C.width/2,I=C.y+C.height/2;const e=C.x*R+b/2,t=(C.x+C.width)*R+b/2,i=C.y*R+f/2,r=(C.y+C.height)*R+f/2,{rings:a}=M;e<0&&(a[0][0][0]-=e,a[0][3][0]-=e,a[0][4][0]-=e),i<0&&(a[0][0][1]+=i,a[0][1][1]+=i,a[0][4][1]+=i),t>b&&(a[0][1][0]-=t-b,a[0][2][0]-=t-b),r>f&&(a[0][2][1]+=r-f,a[0][3][1]+=r-f)}}const S={type:\"cim\",data:{type:\"CIMSymbolReference\",symbol:d}};return this.rasterize(S,b,f,v,I,R,l,1,M)}rasterize(e,r,a,o,l,c,m,g=0,y=null){const{data:u}=e;if(!u||\"CIMSymbolReference\"!==u.type||!u.symbol)return null;const{symbol:d}=u,w=this._canvas,p=(window.devicePixelRatio||1)*n;w.width=r*p,w.height=a*p,m||(m=s(d)),y||(y=h(m,r,a,\"legend\")),w.width+=2*g,w.height+=2*g;const b=w.getContext(\"2d\",{willReadFrequently:!0}),f=t.createIdentity();f.translate(-o,-l),f.scale(c*p,-c*p),f.translate(r*p/2+g,a*p/2+g),b.clearRect(0,0,w.width,w.height);return new i(b,this._cimResourceManager,f,!0).drawSymbol(d,y),b.getImageData(0,0,w.width,w.height)}}function h(e,t,i,r){const a=1,s=-t/2+a,n=t/2-a,o=i/2-a,h=-i/2+a;switch(e){case\"esriGeometryPoint\":return{x:0,y:0};case\"esriGeometryPolyline\":return{paths:[[[s,0],[0,0],[n,0]]]};default:return\"legend\"===r?{rings:[[[s,o],[n,0],[n,h],[s,h],[s,o]]]}:{rings:[[[s,o],[n,o],[n,h],[s,h],[s,o]]]}}}export{o as CIMSymbolRasterizer};\n"],"names":["i","_classCallCheck","this","_resourceMap","Map","_inFlightResourceMap","geometryEngine","geometryEnginePromise","_createClass","key","value","clear","e","_this$_resourceMap$ge","get","_fetchResource","_asyncToGenerator","_regeneratorRuntime","mark","_callee","h","r","_this","wrap","_context","prev","next","abrupt","width","height","then","t","set","delete","stop","_x","_x2","apply","arguments","n","o","_spatialReference","_imageDataCanvas","_cimResourceManager","document","createElement","_rasterizeCIMSymbolAsync","l","c","m","g","y","u","d","w","p","b","f","M","C","R","v","I","_e","_t","_e2","_t2","_i","_e3","_t3","_i2","_r","_a","S","data","type","symbol","s","a","sent","t0","length","Promise","all","t1","Math","min","x","paths","rings","rasterize","_x3","_x4","_x5","_x6","_x7","_x8","_x9","undefined","_canvas","window","devicePixelRatio","getContext","willReadFrequently","translate","scale","clearRect","drawSymbol","getImageData"],"sourceRoot":""}