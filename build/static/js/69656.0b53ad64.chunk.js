"use strict";(self.webpackChunkreact_training=self.webpackChunkreact_training||[]).push([[69656],{30168:function(e,t,n){function r(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}n.d(t,{Z:function(){return r}})},59447:function(e,t,n){n.d(t,{r:function(){return o}});var r=n(15671),i=n(43144),o=function(){function e(){(0,r.Z)(this,e),this._outer=new Map}return(0,i.Z)(e,[{key:"clear",value:function(){this._outer.clear()}},{key:"empty",get:function(){return 0===this._outer.size}},{key:"get",value:function(e,t){var n;return null===(n=this._outer.get(e))||void 0===n?void 0:n.get(t)}},{key:"set",value:function(e,t,n){var r=this._outer.get(e);r?r.set(t,n):this._outer.set(e,new Map([[t,n]]))}},{key:"delete",value:function(e,t){var n=this._outer.get(e);n&&(n.delete(t),0===n.size&&this._outer.delete(e))}},{key:"forEach",value:function(e){this._outer.forEach((function(t,n){return e(t,n)}))}}]),e}()},38461:function(e,t,n){n.d(t,{AA:function(){return u},XO:function(){return a},YI:function(){return o},xx:function(){return i}});var r=n(18722);function i(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e<=r.c8?t?new Array(e).fill(0):new Array(e):new Float32Array(e)}function o(e){return(0,r.kJ)(e)?e.length<r.c8?e:new Float32Array(e):e.length<r.c8?Array.from(e):e}function a(e){return((0,r.kJ)(e)?e.length:e.byteLength/8)<=r.c8?Array.from(e):new Float32Array(e)}function u(e,t,n){return Array.isArray(e)?e.slice(t,t+n):e.subarray(t,t+n)}},39406:function(e,t,n){n.d(t,{$z:function(){return a},KF:function(){return f},LE:function(){return h},X9:function(){return u},mi:function(){return o}});var r=n(37762),i=n(18722);function o(e){if((0,i.kJ)(e)){if(e.length<i.c8)return e}else if(e.length<i.c8)return Array.from(e);var t=!0,n=!0;return e.some((function(e,r){return n=n&&e===r,!(t=t&&0===e)&&!n})),t?h(e.length):n?f(e.length):(0,i.kJ)(e)||e.BYTES_PER_ELEMENT!==Uint16Array.BYTES_PER_ELEMENT?function(e){var t,n=!0,o=(0,r.Z)(e);try{for(o.s();!(t=o.n()).done;){var a=t.value;if(a>=65536)return(0,i.kJ)(e)?new Uint32Array(e):e;a>=256&&(n=!1)}}catch(u){o.e(u)}finally{o.f()}return n?new Uint8Array(e):new Uint16Array(e)}(e):e}function a(e){return e<=i.c8?new Array(e):e<=65536?new Uint16Array(e):new Uint32Array(e)}function u(e){return e<=i.c8?new Array(e):new Uint32Array(e)}var s=function(){for(var e=new Uint32Array(131072),t=0;t<e.length;++t)e[t]=t;return e}(),c=[0],l=function(){for(var e=new Uint16Array(65536),t=0;t<e.length;++t)e[t]=t;return e}();function f(e){if(1===e)return c;if(e<i.c8)return Array.from(new Uint16Array(l.buffer,0,e));if(e<l.length)return new Uint16Array(l.buffer,0,e);if(e>s.length){var t=Math.max(2*s.length,e);s=new Uint32Array(t);for(var n=0;n<s.length;n++)s[n]=n}return new Uint32Array(s.buffer,0,e)}var d=new Uint8Array(65536);function h(e){if(1===e)return c;if(e<i.c8)return new Array(e).fill(0);if(e>d.length){var t=Math.max(2*d.length,e);d=new Uint8Array(t)}return new Uint8Array(d.buffer,0,e)}},48734:function(e,t,n){function r(e){switch(e){case"u8":case"i8":return 1;case"u16":case"i16":return 2;case"u32":case"i32":case"f32":return 4;case"f64":return 8}}n.d(t,{n1:function(){return r}})},74702:function(e,t,n){n.d(t,{bE:function(){return c},wu:function(){return s}});var r=n(21530),i=n(32035),o=n(12400),a=n(85981);n(51378);function u(e){return e?{p0:(0,o.d9)(e.p0),p1:(0,o.d9)(e.p1),p2:(0,o.d9)(e.p2)}:{p0:(0,o.Ue)(),p1:(0,o.Ue)(),p2:(0,o.Ue)()}}function s(e,t,n){var r=t[0]-e[0],i=t[1]-e[1],o=n[0]-e[0],a=n[1]-e[1];return.5*Math.abs(r*a-i*o)}function c(e,t,n){return(0,i.f)(l,t,e),(0,i.f)(f,n,e),.5*(0,i.l)((0,i.b)(l,l,f))}new r.x(a.Ue),new r.x((function(){return u()}));var l=(0,o.Ue)(),f=(0,o.Ue)()},38330:function(e,t,n){n.d(t,{t:function(){return u}});var r=n(74165),i=n(1413),o=n(15861),a=n(76200);function u(e,t){return s.apply(this,arguments)}function s(){return s=(0,o.Z)((0,r.Z)().mark((function e(t,n){var o,u;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.Z)(t,(0,i.Z)({responseType:"image"},n));case 2:return o=e.sent,u=o.data,e.abrupt("return",u);case 5:case"end":return e.stop()}}),e)}))),s.apply(this,arguments)}},66202:function(e,t,n){n.d(t,{FE:function(){return B},Tc:function(){return D},Ve:function(){return U},Z3:function(){return k},kD:function(){return V},vT:function(){return F},z2:function(){return z}});var r,i,o=n(60136),a=n(29388),u=n(43144),s=n(15671),c=(n(93169),n(16889)),l=n(29303),f=n(21389),d=n(29134),h=n(7025),v=n(32035),m=n(12400),p=n(49229),g=n(94463),_=n(98634);!function(e){e[e.Undefined=0]="Undefined",e[e.DefinedSize=1]="DefinedSize",e[e.DefinedScale=2]="DefinedScale"}(r||(r={})),function(e){e[e.Undefined=0]="Undefined",e[e.DefinedAngle=1]="DefinedAngle"}(i||(i={}));var y=(0,u.Z)((function e(t){(0,s.Z)(this,e),this.field=t})),T=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(e){var i;return(0,s.Z)(this,n),(i=t.call(this,e)).minSize=[0,0,0],i.maxSize=[0,0,0],i.offset=[0,0,0],i.factor=[0,0,0],i.type=[r.Undefined,r.Undefined,r.Undefined],i}return(0,u.Z)(n)}(y),x=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(e){var r;return(0,s.Z)(this,n),(r=t.call(this,e)).colors=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],r.values=[0,0,0,0,0,0,0,0],r}return(0,u.Z)(n)}(y),A=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(e){var r;return(0,s.Z)(this,n),(r=t.call(this,e)).values=[0,0,0,0,0,0,0,0],r.opacityValues=[0,0,0,0,0,0,0,0],r}return(0,u.Z)(n)}(y),S=(0,u.Z)((function e(){(0,s.Z)(this,e)}));function b(e){return null!=e}function w(e){return"number"==typeof e}function E(e){return"string"==typeof e}function R(e,t){e&&e.push(t)}function I(e,t,n,i,o){var a=e.minSize,u=e.maxSize;if(e.useSymbolValue){var s=i.symbolSize[n];return t.minSize[n]=s,t.maxSize[n]=s,t.offset[n]=t.minSize[n],t.factor[n]=0,t.type[n]=r.DefinedSize,!0}if(b(e.field))return b(e.stops)?2===e.stops.length&&w(e.stops[0].size)&&w(e.stops[1].size)?(Z(e.stops[0].size,e.stops[1].size,e.stops[0].value,e.stops[1].value,t,n),t.type[n]=r.DefinedSize,!0):(R(o,"Could not convert size info: stops only supported with 2 elements"),!1):w(a)&&w(u)&&b(e.minDataValue)&&b(e.maxDataValue)?(Z(a,u,e.minDataValue,e.maxDataValue,t,n),t.type[n]=r.DefinedSize,!0):"unknown"===e.valueUnit?(R(o,"Could not convert size info: proportional size not supported"),!1):null!=p.a[e.valueUnit]?(t.minSize[n]=-1/0,t.maxSize[n]=1/0,t.offset[n]=0,t.factor[n]=1/p.a[e.valueUnit],t.type[n]=r.DefinedSize,!0):(R(o,"Could not convert size info: scale-dependent size not supported"),!1);if(!b(e.field)){var c;if(null!==(c=e.stops)&&void 0!==c&&c[0]&&w(e.stops[0].size))return t.minSize[n]=e.stops[0].size,t.maxSize[n]=e.stops[0].size,t.offset[n]=t.minSize[n],t.factor[n]=0,t.type[n]=r.DefinedSize,!0;if(w(a))return t.minSize[n]=a,t.maxSize[n]=a,t.offset[n]=a,t.factor[n]=0,t.type[n]=r.DefinedSize,!0}return R(o,"Could not convert size info: unsupported variant of sizeInfo"),!1}function Z(e,t,n,r,i,o){var a=Math.abs(r-n)>0?(t-e)/(r-n):0;i.minSize[o]=a>0?e:t,i.maxSize[o]=a>0?t:e,i.offset[o]=e-n*a,i.factor[o]=a}function P(e,t,n,r){if(e.normalizationField||e.valueRepresentation)return R(r,"Could not convert size info: unsupported property"),null;if(!function(e){return null==e||E(e)}(e.field))return R(r,"Could not convert size info: field is not a string"),null;if(t.size){if(e.field)if(t.size.field){if(e.field!==t.size.field)return R(r,"Could not convert size info: multiple fields in use"),null}else t.size.field=e.field}else t.size=new T(e.field);var i;switch(e.axis){case"width":return(i=I(e,t.size,0,n,r))?t:null;case"height":return(i=I(e,t.size,2,n,r))?t:null;case"depth":return(i=I(e,t.size,1,n,r))?t:null;case"width-and-depth":return(i=I(e,t.size,0,n,r))&&I(e,t.size,1,n,r),i?t:null;case null:case void 0:case"all":return(i=(i=(i=I(e,t.size,0,n,r))&&I(e,t.size,1,n,r))&&I(e,t.size,2,n,r))?t:null;default:return R(r,'Could not convert size info: unknown axis "'.concat(e.axis,'""')),null}}function C(e,t,n){e[4*t]=n.r/255,e[4*t+1]=n.g/255,e[4*t+2]=n.b/255,e[4*t+3]=n.a}function M(e,t,n){var r=2===n&&"arithmetic"===e.rotationType;t.offset[n]=r?90:0,t.factor[n]=r?-1:1,t.type[n]=1}var k=(0,u.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[1,1,1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[1,1,1],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[0,0,0],a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1,1],u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[0,0,0];(0,s.Z)(this,e),this.supports=t,this.modelSize=n,this.symbolSize=r,this.unitInMeters=i,this.anchor=o,this.scale=a,this.rotation=u}));function N(e,t,n){if(!e)return null;var i=e.reduce((function(e,r){if(!e)return e;if(r.valueExpression)return R(n,"Could not convert visual variables: arcade expressions not supported"),null;switch(r.type){case"size":return t.supports.size?P(r,e,t,n):e;case"color":return t.supports.color?function(e,t,n){if(e.normalizationField)return R(n,"Could not convert color info: unsupported property"),null;if(E(e.field)){if(!e.stops)return R(n,"Could not convert color info: missing stops or colors"),null;if(e.stops.length>8)return R(n,"Could not convert color info: too many color stops"),null;t.color=new x(e.field);for(var r=e.stops,i=0;i<8;++i){var o=r[Math.min(i,r.length-1)];t.color.values[i]=o.value,C(t.color.colors,i,o.color)}}else{if(!(e.stops&&e.stops.length>=0))return R(n,"Could not convert color info: no field and no colors/stops"),null;var a=e.stops&&e.stops.length>=0&&e.stops[0].color;t.color={field:null,values:[0,0,0,0,0,0,0,0],colors:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]};for(var u=0;u<8;u++)t.color.values[u]=1/0,C(t.color.colors,u,a)}return t}(r,e,n):e;case"opacity":return t.supports.opacity?function(e,t,n){if(e.normalizationField)return R(n,"Could not convert opacity info: unsupported property"),null;if(E(e.field)){if(!e.stops)return R(n,"Could not convert opacity info: missing stops or opacities"),null;if(e.stops.length>8)return R(n,"Could not convert opacity info: too many opacity stops"),null;t.opacity=new A(e.field);for(var r=e.stops,i=0;i<8;++i){var o=r[Math.min(i,r.length-1)];t.opacity.values[i]=o.value,t.opacity.opacityValues[i]=o.opacity}}else{if(!(e.stops&&e.stops.length>=0))return R(n,"Could not convert opacity info: no field and no opacities/stops"),null;var a=e.stops&&e.stops.length>=0?e.stops[0].opacity:0;t.opacity={field:null,values:[0,0,0,0,0,0,0,0],opacityValues:[0,0,0,0,0,0,0,0]};for(var u=0;u<8;u++)t.opacity.values[u]=1/0,t.opacity.opacityValues[u]=a}return t}(r,e,n):null;case"rotation":return t.supports.rotation?function(e,t,n){if(!E(e.field))return R(n,"Could not convert rotation info: field is not a string"),null;if(t.rotation){if(e.field)if(t.rotation.field){if(e.field!==t.rotation.field)return R(n,"Could not convert rotation info: multiple fields in use"),null}else t.rotation.field=e.field}else t.rotation={field:e.field,offset:[0,0,0],factor:[1,1,1],type:[0,0,0]};switch(e.axis){case"tilt":return M(e,t.rotation,0),t;case"roll":return M(e,t.rotation,1),t;case null:case void 0:case"heading":return M(e,t.rotation,2),t;default:return R(n,'Could not convert rotation info: unknown axis "'.concat(e.axis,'""')),null}}(r,e,n):e;default:return null}}),new S);return!(e.length>0&&i)||i.size||i.color||i.opacity||i.rotation?null!==i&&void 0!==i&&i.size&&!function(e,t,n){for(var i=0;i<3;++i){var o=t.unitInMeters;e.type[i]===r.DefinedSize&&(o*=t.modelSize[i],e.type[i]=r.DefinedScale),e.minSize[i]=e.minSize[i]/o,e.maxSize[i]=e.maxSize[i]/o,e.offset[i]=e.offset[i]/o,e.factor[i]=e.factor[i]/o}var a;if(e.type[0]!==r.Undefined)a=0;else if(e.type[1]!==r.Undefined)a=1;else{if(e.type[2]===r.Undefined)return R(n,"No size axis contains a valid size or scale"),!1;a=2}for(var u=0;u<3;++u)e.type[u]===r.Undefined&&(e.minSize[u]=e.minSize[a],e.maxSize[u]=e.maxSize[a],e.offset[u]=e.offset[a],e.factor[u]=e.factor[a],e.type[u]=e.type[a]);return!0}(i.size,t,n)?null:i:null}var L=(0,u.Z)((function e(t,n,r){(0,s.Z)(this,e),this.visualVariables=t,this.materialParameters=n,this.requiresShaderTransformation=r}));function F(e,t){if(!e)return null;if(g.h.TESTS_DISABLE_FAST_UPDATES)return null;var n=N(e.visualVariables,t);return n?new L(n,H(n,t),!!n.size):null}function D(e,t,n){if(!t||!e)return!1;var r=e.visualVariables,i=N(t.visualVariables,n);return!!i&&!!(O(r.size,i.size,"size")&&O(r.color,i.color,"color")&&O(r.rotation,i.rotation,"rotation")&&O(r.opacity,i.opacity,"opacity"))&&(e.visualVariables=i,e.materialParameters=H(i,n),e.requiresShaderTransformation=!!i.size,!0)}function O(e,t,n){if(!!e!=!!t)return!1;if(e&&e.field!==(null===t||void 0===t?void 0:t.field))return!1;if(e&&"rotation"===n)for(var r=e,i=t,o=0;o<3;o++)if(r.type[o]!==i.type[o]||r.offset[o]!==i.offset[o]||r.factor[o]!==i.factor[o])return!1;return!0}var U=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(e){var r,i,o,a;return(0,s.Z)(this,n),(a=t.call(this)).vvSize=null!==(r=null===e||void 0===e?void 0:e.size)&&void 0!==r?r:null,a.vvColor=null!==(i=null===e||void 0===e?void 0:e.color)&&void 0!==i?i:null,a.vvOpacity=null!==(o=null===e||void 0===e?void 0:e.opacity)&&void 0!==o?o:null,a}return(0,u.Z)(n)}(_.K);function H(e,t){var n=new U(e);return n.vvSize&&(n.vvSymbolAnchor=t.anchor,(0,d.yR)(j),function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:(0,h.Ue)(),i=e||0,o=t||0,a=n||0;0!==i&&(0,d.jI)(r,r,-i/180*Math.PI),0!==o&&(0,d.lM)(r,r,o/180*Math.PI),0!==a&&(0,d.uD)(r,r,a/180*Math.PI)}(t.rotation[2],t.rotation[0],t.rotation[1],j),n.vvSymbolRotationMatrix=n.vvSymbolRotationMatrix||(0,f.Ue)(),(0,l.xO)(n.vvSymbolRotationMatrix,j)),n}function z(e,t,n){if(!e.vvSize)return n;(0,d.JG)(G,n);var r=e.vvSymbolRotationMatrix;(0,d.t8)(j,r[0],r[1],r[2],0,r[3],r[4],r[5],0,r[6],r[7],r[8],0,0,0,0,1),(0,d.Jp)(G,G,j);for(var i=0;i<3;++i){var o=e.vvSize.offset[i]+t[0]*e.vvSize.factor[i];W[i]=(0,c.uZ)(o,e.vvSize.minSize[i],e.vvSize.maxSize[i])}return(0,d.bA)(G,G,W),(0,d.Iu)(G,G,e.vvSymbolAnchor),G}function B(e,t,n){if(!t.vvSize)return(0,v.s)(e,1,1,1),e;for(var r=0;r<3;++r){var i=t.vvSize.offset[r]+n[0]*t.vvSize.factor[r];e[r]=(0,c.uZ)(i,t.vvSize.minSize[r],t.vvSize.maxSize[r])}return e}function V(e,t){var n=null==e?0:t.attributes[e];return"number"==typeof n&&isFinite(n)?n:0}var G=(0,h.Ue)(),W=(0,m.Ue)(),j=(0,h.Ue)()},55158:function(e,t,n){n.d(t,{Gw:function(){return h},U$:function(){return d},pV:function(){return f}});var r=n(1413),i=n(37762),o=n(15671),a=n(43144),u=n(25158),s=n(48734),c=n(97731),l=function(){function e(t,n){(0,o.Z)(this,e),this.layout=t,this.buffer="number"==typeof n?new ArrayBuffer(n*t.stride):n;var r,a=(0,i.Z)(t.fields.keys());try{for(a.s();!(r=a.n()).done;){var u=r.value,s=t.fields.get(u);this[u]=new s.constructor(this.buffer,s.offset,this.stride)}}catch(c){a.e(c)}finally{a.f()}}return(0,a.Z)(e,[{key:"stride",get:function(){return this.layout.stride}},{key:"count",get:function(){return this.buffer.byteLength/this.stride}},{key:"byteLength",get:function(){return this.buffer.byteLength}},{key:"getField",value:function(e,t){var n=this[e];return n&&n.elementCount===t.ElementCount&&n.elementType===t.ElementType?n:null}},{key:"slice",value:function(t,n){return new e(this.layout,this.buffer.slice(t*this.stride,n*this.stride))}},{key:"copyFrom",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.count,i=this.stride;if(i%4==0){var o=new Uint32Array(e.buffer,t*i,r*i/4);new Uint32Array(this.buffer,n*i,r*i/4).set(o)}else{var a=new Uint8Array(e.buffer,t*i,r*i);new Uint8Array(this.buffer,n*i,r*i).set(a)}return this}},{key:"usedMemory",get:function(){return this.byteLength}},{key:"dispose",value:function(){}}]),e}(),f=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;(0,o.Z)(this,e),this._stride=0,this._lastAligned=0,this._fields=new Map,n&&(this._stride=n.stride,n.fields.forEach((function(e){return t._fields.set(e[0],(0,r.Z)((0,r.Z)({},e[1]),{},{constructor:p(e[1].constructor)}))})))}return(0,a.Z)(e,[{key:"freeze",value:function(){return this}},{key:"vec2f",value:function(e,t){return this._appendField(e,u.Eu,t),this}},{key:"vec2f64",value:function(e,t){return this._appendField(e,u.q6,t),this}},{key:"vec3f",value:function(e,t){return this._appendField(e,u.ct,t),this}},{key:"vec3f64",value:function(e,t){return this._appendField(e,u.fP,t),this}},{key:"vec4f",value:function(e,t){return this._appendField(e,u.ek,t),this}},{key:"vec4f64",value:function(e,t){return this._appendField(e,u.Cd,t),this}},{key:"mat3f",value:function(e,t){return this._appendField(e,u.gK,t),this}},{key:"mat3f64",value:function(e,t){return this._appendField(e,u.ey,t),this}},{key:"mat4f",value:function(e,t){return this._appendField(e,u.bj,t),this}},{key:"mat4f64",value:function(e,t){return this._appendField(e,u.O1,t),this}},{key:"vec4u8",value:function(e,t){return this._appendField(e,u.mc,t),this}},{key:"f32",value:function(e,t){return this._appendField(e,u.ly,t),this}},{key:"f64",value:function(e,t){return this._appendField(e,u.oS,t),this}},{key:"u8",value:function(e,t){return this._appendField(e,u.D_,t),this}},{key:"u16",value:function(e,t){return this._appendField(e,u.av,t),this}},{key:"i8",value:function(e,t){return this._appendField(e,u.Hz,t),this}},{key:"vec2i8",value:function(e,t){return this._appendField(e,u.Vs,t),this}},{key:"vec2i16",value:function(e,t){return this._appendField(e,u.or,t),this}},{key:"vec2u8",value:function(e,t){return this._appendField(e,u.xA,t),this}},{key:"vec4u16",value:function(e,t){return this._appendField(e,u.v6,t),this}},{key:"u32",value:function(e,t){return this._appendField(e,u.Nu,t),this}},{key:"_appendField",value:function(e,t,n){if(this._fields.has(e))(0,c.hu)(!1,"".concat(e," already added to vertex buffer layout"));else{var r=t.ElementCount*(0,s.n1)(t.ElementType),i=this._stride;this._stride+=r,this._fields.set(e,{size:r,constructor:t,offset:i,optional:n})}}},{key:"createBuffer",value:function(e){return new l(this,e)}},{key:"createView",value:function(e){return new l(this,e)}},{key:"clone",value:function(){var t=new e;return t._stride=this._stride,t._fields=new Map,this._fields.forEach((function(e,n){return t._fields.set(n,e)})),t.BufferType=this.BufferType,t}},{key:"stride",get:function(){if(this._lastAligned!==this._fields.size){var e=1;this._fields.forEach((function(t){return e=Math.max(e,(0,s.n1)(t.constructor.ElementType))})),this._stride=Math.floor((this._stride+e-1)/e)*e,this._lastAligned=this._fields.size}return this._stride}},{key:"fields",get:function(){return this._fields}}]),e}();function d(){return new f}var h=(0,a.Z)((function e(t){var n=this;(0,o.Z)(this,e),this.fields=new Array,t.fields.forEach((function(e,t){var i=(0,r.Z)((0,r.Z)({},e),{},{constructor:m(e.constructor)});n.fields.push([t,i])})),this.stride=t.stride})),v=[u.ly,u.Eu,u.ct,u.ek,u.gK,u.bj,u.oS,u.q6,u.fP,u.Cd,u.ey,u.O1,u.D_,u.xA,u.ne,u.mc,u.av,u.TS,u.mw,u.v6,u.Nu,u.qt,u.G5,u.hu,u.Hz,u.Vs,u.P_,u.ir,u.o7,u.or,u.n1,u.zO,u.Jj,u.wA,u.PP,u.TN];function m(e){return"".concat(e.ElementType,"_").concat(e.ElementCount)}function p(e){return g.get(e)}var g=new Map;v.forEach((function(e){return g.set(m(e),e)}))},24967:function(e,t,n){n.d(t,{k:function(){return s}});var r,i,o=n(30168),a=n(98634),u=n(4760);function s(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.attributes.add(u.T.POSITION,"vec2"),t&&e.varyings.add("uv","vec2"),e.vertex.code.add((0,a.H)(r||(r=(0,o.Z)(["\n    void main(void) {\n      gl_Position = vec4(position, 0.0, 1.0);\n      ","\n    }\n  "])),t?(0,a.H)(i||(i=(0,o.Z)(["uv = position * 0.5 + vec2(0.5);"]))):""))}},37081:function(e,t,n){var r;function i(e){return o(e)||e===r.Depth||e===r.Normal||e===r.ObjectAndLayerIdColor}function o(e){return e===r.Shadow||e===r.ShadowHighlight||e===r.ShadowExcludeHighlight||e===r.ViewshedShadow}function a(e){return v(e)||e===r.Normal}function u(e){return e===r.Highlight||e===r.ObjectAndLayerIdColor}function s(e){return e===r.Color||u(e)}function c(e){return e===r.Color}function l(e){return c(e)||e===r.ObjectAndLayerIdColor}function f(e){return c(e)||e===r.Highlight}function d(e){return f(e)||m(e)}function h(e){return c(e)||u(e)}function v(e){return h(e)||m(e)}function m(e){return e===r.Depth}n.d(t,{BX:function(){return m},CQ:function(){return l},D5:function(){return c},H_:function(){return r},Jb:function(){return a},Kr:function(){return o},L_:function(){return h},Xo:function(){return d},_4:function(){return v},_D:function(){return i},ou:function(){return u},xs:function(){return s}}),function(e){e[e.Color=0]="Color",e[e.Depth=1]="Depth",e[e.Normal=2]="Normal",e[e.Shadow=3]="Shadow",e[e.ShadowHighlight=4]="ShadowHighlight",e[e.ShadowExcludeHighlight=5]="ShadowExcludeHighlight",e[e.ViewshedShadow=6]="ViewshedShadow",e[e.Highlight=7]="Highlight",e[e.ObjectAndLayerIdColor=8]="ObjectAndLayerIdColor",e[e.COUNT=9]="COUNT"}(r||(r={}))},33280:function(e,t,n){n.d(t,{P_:function(){return x},UT:function(){return T},f5:function(){return A}});var r,i,o,a,u,s=n(30168),c=n(43144),l=n(15671),f=n(60136),d=n(29388),h=n(29134),v=n(7025),m=n(32035),p=n(12400),g=n(86471),_=n(49450),y=n(98634),T=function(e){(0,f.Z)(n,e);var t=(0,d.Z)(n);function n(e){var r;return(0,l.Z)(this,n),(r=t.call(this)).slicePlaneLocalOrigin=e,r}return(0,c.Z)(n)}(y.K);function x(e,t){S(e,t,new _.J("slicePlaneOrigin",(function(e,n){return R(t,e,n)})),new _.J("slicePlaneBasis1",(function(e,n){var r;return I(t,e,n,null===(r=n.slicePlane)||void 0===r?void 0:r.basis1)})),new _.J("slicePlaneBasis2",(function(e,n){var r;return I(t,e,n,null===(r=n.slicePlane)||void 0===r?void 0:r.basis2)})))}function A(e,t){S(e,t,new g.B("slicePlaneOrigin",(function(e,n){return R(t,e,n)})),new g.B("slicePlaneBasis1",(function(e,n){var r;return I(t,e,n,null===(r=n.slicePlane)||void 0===r?void 0:r.basis1)})),new g.B("slicePlaneBasis2",(function(e,n){var r;return I(t,e,n,null===(r=n.slicePlane)||void 0===r?void 0:r.basis2)})))}function S(e,t){var n,c;if(!t.hasSlicePlane){var l=(0,y.H)(r||(r=(0,s.Z)(["#define rejectBySlice(_pos_) false\n#define discardBySlice(_pos_) {}\n#define highlightSlice(_color_, _pos_) (_color_)"])));return t.hasSliceInVertexProgram&&e.vertex.code.add(l),void e.fragment.code.add(l)}for(var f=arguments.length,d=new Array(f>2?f-2:0),h=2;h<f;h++)d[h-2]=arguments[h];t.hasSliceInVertexProgram&&(n=e.vertex.uniforms).add.apply(n,d),(c=e.fragment.uniforms).add.apply(c,d);var v=(0,y.H)(i||(i=(0,s.Z)(["struct SliceFactors {\nfloat front;\nfloat side0;\nfloat side1;\nfloat side2;\nfloat side3;\n};\nSliceFactors calculateSliceFactors(vec3 pos) {\nvec3 rel = pos - slicePlaneOrigin;\nvec3 slicePlaneNormal = -cross(slicePlaneBasis1, slicePlaneBasis2);\nfloat slicePlaneW = -dot(slicePlaneNormal, slicePlaneOrigin);\nfloat basis1Len2 = dot(slicePlaneBasis1, slicePlaneBasis1);\nfloat basis2Len2 = dot(slicePlaneBasis2, slicePlaneBasis2);\nfloat basis1Dot = dot(slicePlaneBasis1, rel);\nfloat basis2Dot = dot(slicePlaneBasis2, rel);\nreturn SliceFactors(\ndot(slicePlaneNormal, pos) + slicePlaneW,\n-basis1Dot - basis1Len2,\nbasis1Dot - basis1Len2,\n-basis2Dot - basis2Len2,\nbasis2Dot - basis2Len2\n);\n}\nbool sliceByFactors(SliceFactors factors) {\nreturn factors.front < 0.0\n&& factors.side0 < 0.0\n&& factors.side1 < 0.0\n&& factors.side2 < 0.0\n&& factors.side3 < 0.0;\n}\nbool sliceEnabled() {\nreturn dot(slicePlaneBasis1, slicePlaneBasis1) != 0.0;\n}\nbool sliceByPlane(vec3 pos) {\nreturn sliceEnabled() && sliceByFactors(calculateSliceFactors(pos));\n}\n#define rejectBySlice(_pos_) sliceByPlane(_pos_)\n#define discardBySlice(_pos_) { if (sliceByPlane(_pos_)) discard; }"]))),m=(0,y.H)(o||(o=(0,s.Z)(["vec4 applySliceHighlight(vec4 color, vec3 pos) {\nSliceFactors factors = calculateSliceFactors(pos);\nconst float HIGHLIGHT_WIDTH = 1.0;\nconst vec4 HIGHLIGHT_COLOR = vec4(0.0, 0.0, 0.0, 0.3);\nfactors.front /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.front);\nfactors.side0 /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side0);\nfactors.side1 /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side1);\nfactors.side2 /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side2);\nfactors.side3 /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side3);\nif (sliceByFactors(factors)) {\nreturn color;\n}\nfloat highlightFactor = (1.0 - step(0.5, factors.front))\n* (1.0 - step(0.5, factors.side0))\n* (1.0 - step(0.5, factors.side1))\n* (1.0 - step(0.5, factors.side2))\n* (1.0 - step(0.5, factors.side3));\nreturn mix(color, vec4(HIGHLIGHT_COLOR.rgb, color.a), highlightFactor * HIGHLIGHT_COLOR.a);\n}"]))),p=t.hasSliceHighlight?(0,y.H)(a||(a=(0,s.Z)(["\n        ","\n        #define highlightSlice(_color_, _pos_) (sliceEnabled() ? applySliceHighlight(_color_, _pos_) : (_color_))\n      "])),m):(0,y.H)(u||(u=(0,s.Z)(["#define highlightSlice(_color_, _pos_) (_color_)"])));t.hasSliceInVertexProgram&&e.vertex.code.add(v),e.fragment.code.add(v),e.fragment.code.add(p)}function b(e,t,n){return e.instancedDoublePrecision?(0,m.s)(Z,n.camera.viewInverseTransposeMatrix[3],n.camera.viewInverseTransposeMatrix[7],n.camera.viewInverseTransposeMatrix[11]):t.slicePlaneLocalOrigin}function w(e,t){return null!=e?(0,m.f)(P,t.origin,e):t.origin}function E(e,t,n){return e.hasSliceTranslatedView?null!=t?(0,h.Iu)(M,n.camera.viewMatrix,t):n.camera.viewMatrix:null}function R(e,t,n){if(null==n.slicePlane)return p.AG;var r=b(e,t,n),i=w(r,n.slicePlane),o=E(e,r,n);return null!=o?(0,m.h)(P,i,o):i}function I(e,t,n,r){if(null==r||null==n.slicePlane)return p.AG;var i=b(e,t,n),o=w(i,n.slicePlane),a=E(e,i,n);return null!=a?((0,m.g)(C,r,o),(0,m.h)(P,o,a),(0,m.h)(C,C,a),(0,m.f)(C,C,P)):r}var Z=(0,p.Ue)(),P=(0,p.Ue)(),C=(0,p.Ue)(),M=(0,v.Ue)()},81221:function(e,t,n){n.d(t,{PO:function(){return Z},fQ:function(){return C}});var r,i,o,a,u,s=n(30168),c=n(43144),l=n(15671),f=n(60136),d=n(29388),h=n(27366),v=n(29303),m=n(21389),p=n(7025),g=n(32035),_=n(12400),y=n(37081),T=n(27254),x=n(41012),A=n(86471),S=n(98634),b=n(35522),w=n(8654),E=n(33559),R=n(4760),I=n(43411),Z=function(e){(0,f.Z)(n,e);var t=(0,d.Z)(n);function n(){var e;return(0,l.Z)(this,n),(e=t.apply(this,arguments)).instancedDoublePrecision=!1,e.hasModelTransformation=!1,e}return(0,c.Z)(n)}(E.m);(0,h._)([(0,E.o)()],Z.prototype,"instancedDoublePrecision",void 0),(0,h._)([(0,E.o)()],Z.prototype,"hasModelTransformation",void 0);S.K;var P=(0,m.Ue)();function C(e,t){var n=t.hasModelTransformation,c=t.instancedDoublePrecision;n&&(e.vertex.uniforms.add(new w.g("model",(function(e){var t;return null!==(t=e.modelTransformation)&&void 0!==t?t:p.Wd}))),e.vertex.uniforms.add(new b.c("normalLocalOriginFromModel",(function(e){var t;return(0,v.XL)(P,null!==(t=e.modelTransformation)&&void 0!==t?t:p.Wd),P})))),t.instanced&&c&&(e.attributes.add(R.T.INSTANCEMODELORIGINHI,"vec3"),e.attributes.add(R.T.INSTANCEMODELORIGINLO,"vec3"),e.attributes.add(R.T.INSTANCEMODEL,"mat3"),e.attributes.add(R.T.INSTANCEMODELNORMAL,"mat3"));var l=e.vertex;c&&(l.include(T.$,t),l.uniforms.add(new A.B("viewOriginHi",(function(e,t){return(0,I.U8)((0,g.s)(M,t.camera.viewInverseTransposeMatrix[3],t.camera.viewInverseTransposeMatrix[7],t.camera.viewInverseTransposeMatrix[11]),M)})),new A.B("viewOriginLo",(function(e,t){return(0,I.GB)((0,g.s)(M,t.camera.viewInverseTransposeMatrix[3],t.camera.viewInverseTransposeMatrix[7],t.camera.viewInverseTransposeMatrix[11]),M)})))),l.code.add((0,S.H)(r||(r=(0,s.Z)(["\n    vec3 getVertexInLocalOriginSpace() {\n      return ",";\n    }\n\n    vec3 subtractOrigin(vec3 _pos) {\n      ","\n    }\n    "])),n?c?"(model * vec4(instanceModel * localPosition().xyz, 1.0)).xyz":"(model * localPosition()).xyz":c?"instanceModel * localPosition().xyz":"localPosition().xyz",c?(0,S.H)(i||(i=(0,s.Z)(["\n          // Negated inputs are intentionally the first two arguments. The other way around the obfuscation in dpAdd() stopped\n          // working for macOS 14+ and iOS 17+.\n          // Issue: https://devtopia.esri.com/WebGIS/arcgis-js-api/issues/56280\n          vec3 originDelta = dpAdd(-instanceModelOriginHi, -instanceModelOriginLo, viewOriginHi, viewOriginLo);\n          return _pos - originDelta;"]))):"return vpos;")),l.code.add((0,S.H)(o||(o=(0,s.Z)(["\n    vec3 dpNormal(vec4 _normal) {\n      return normalize(",");\n    }\n    "])),n?c?"normalLocalOriginFromModel * (instanceModelNormal * _normal.xyz)":"normalLocalOriginFromModel * _normal.xyz":c?"instanceModelNormal * _normal.xyz":"_normal.xyz")),t.output===y.H_.Normal&&((0,x._8)(l),l.code.add((0,S.H)(a||(a=(0,s.Z)(["\n    vec3 dpNormalView(vec4 _normal) {\n      return normalize((viewNormal * ",").xyz);\n    }\n    "])),n?c?"vec4(normalLocalOriginFromModel * (instanceModelNormal * _normal.xyz), 1.0)":"vec4(normalLocalOriginFromModel * _normal.xyz, 1.0)":c?"vec4(instanceModelNormal * _normal.xyz, 1.0)":"_normal"))),t.hasVertexTangents&&l.code.add((0,S.H)(u||(u=(0,s.Z)(["\n    vec4 dpTransformVertexTangent(vec4 _tangent) {\n      ","\n    }"])),n?c?"return vec4(normalLocalOriginFromModel * (instanceModelNormal * _tangent.xyz), _tangent.w);":"return vec4(normalLocalOriginFromModel * _tangent.xyz, _tangent.w);":c?"return vec4(instanceModelNormal * _tangent.xyz, _tangent.w);":"return _tangent;"))}var M=(0,_.Ue)()},16010:function(e,t,n){n.d(t,{O:function(){return f},r:function(){return a}});var r,i,o,a,u=n(30168),s=n(41644),c=n(98634),l=n(4760);function f(e,t){switch(t.normalType){case a.Compressed:e.attributes.add(l.T.NORMALCOMPRESSED,"vec2"),e.vertex.code.add((0,c.H)(r||(r=(0,u.Z)(["vec3 decompressNormal(vec2 normal) {\nfloat z = 1.0 - abs(normal.x) - abs(normal.y);\nreturn vec3(normal + sign(normal) * min(z, 0.0), z);\n}\nvec3 normalModel() {\nreturn decompressNormal(normalCompressed);\n}"]))));break;case a.Attribute:e.attributes.add(l.T.NORMAL,"vec3"),e.vertex.code.add((0,c.H)(i||(i=(0,u.Z)(["vec3 normalModel() {\nreturn normal;\n}"]))));break;case a.ScreenDerivative:e.fragment.code.add((0,c.H)(o||(o=(0,u.Z)(["vec3 screenDerivativeNormal(vec3 positionView) {\nreturn normalize(cross(dFdx(positionView), dFdy(positionView)));\n}"]))));break;default:(0,s.Bg)(t.normalType);case a.COUNT:case a.Ground:}}!function(e){e[e.Attribute=0]="Attribute",e[e.Compressed=1]="Compressed",e[e.Ground=2]="Ground",e[e.ScreenDerivative=3]="ScreenDerivative",e[e.COUNT=4]="COUNT"}(a||(a={}))},14801:function(e,t,n){n.d(t,{R:function(){return v}});var r,i,o,a,u,s,c,l=n(30168),f=n(37081),d=n(98634),h=n(4760);function v(e,t){var n=t.output===f.H_.ObjectAndLayerIdColor,v=t.objectAndLayerIdColorInstanced;n&&(e.varyings.add("objectAndLayerIdColorVarying","vec4"),v?e.attributes.add(h.T.INSTANCEOBJECTANDLAYERIDCOLOR,"vec4"):e.attributes.add(h.T.OBJECTANDLAYERIDCOLOR,"vec4")),e.vertex.code.add((0,d.H)(r||(r=(0,l.Z)(["\n     void forwardObjectAndLayerIdColor() {\n      "," }"])),n?v?(0,d.H)(i||(i=(0,l.Z)(["objectAndLayerIdColorVarying = instanceObjectAndLayerIdColor * 0.003921568627451;"]))):(0,d.H)(o||(o=(0,l.Z)(["objectAndLayerIdColorVarying = objectAndLayerIdColor * 0.003921568627451;"]))):(0,d.H)(a||(a=(0,l.Z)([""]))))),e.fragment.code.add((0,d.H)(u||(u=(0,l.Z)(["\n      void outputObjectAndLayerIdColor() {\n        "," }"])),n?(0,d.H)(s||(s=(0,l.Z)(["fragColor = objectAndLayerIdColorVarying;"]))):(0,d.H)(c||(c=(0,l.Z)([""])))))}},52276:function(e,t,n){n.d(t,{f:function(){return u}});var r,i=n(30168),o=n(98634),a=n(4760);function u(e){e.attributes.add(a.T.POSITION,"vec3"),e.vertex.code.add((0,o.H)(r||(r=(0,i.Z)(["vec3 positionModel() { return position; }"]))))}},60113:function(e,t,n){n.d(t,{D:function(){return d},N:function(){return u}});var r,i,o,a,u,s=n(30168),c=n(41644),l=n(98634),f=n(4760);function d(e,t){switch(t.textureCoordinateType){case u.Default:return e.attributes.add(f.T.UV0,"vec2"),e.varyings.add("vuv0","vec2"),void e.vertex.code.add((0,l.H)(r||(r=(0,s.Z)(["void forwardTextureCoordinates() {\nvuv0 = uv0;\n}"]))));case u.Compressed:return e.attributes.add(f.T.UV0,"vec2"),e.varyings.add("vuv0","vec2"),void e.vertex.code.add((0,l.H)(i||(i=(0,s.Z)(["vec2 getUV0() {\nreturn uv0 / 16384.0;\n}\nvoid forwardTextureCoordinates() {\nvuv0 = getUV0();\n}"]))));case u.Atlas:return e.attributes.add(f.T.UV0,"vec2"),e.varyings.add("vuv0","vec2"),e.attributes.add(f.T.UVREGION,"vec4"),e.varyings.add("vuvRegion","vec4"),void e.vertex.code.add((0,l.H)(o||(o=(0,s.Z)(["void forwardTextureCoordinates() {\nvuv0 = uv0;\nvuvRegion = uvRegion;\n}"]))));default:(0,c.Bg)(t.textureCoordinateType);case u.None:return void e.vertex.code.add((0,l.H)(a||(a=(0,s.Z)(["void forwardTextureCoordinates() {}"]))));case u.COUNT:return}}!function(e){e[e.None=0]="None",e[e.Default=1]="Default",e[e.Atlas=2]="Atlas",e[e.Compressed=3]="Compressed",e[e.COUNT=4]="COUNT"}(u||(u={}))},85380:function(e,t,n){n.d(t,{Bb:function(){return x},Pf:function(){return S},d4:function(){return A}});var r,i,o,a,u,s=n(43144),c=n(15671),l=n(60136),f=n(29388),d=n(30168),h=n(41644),v=n(21389),m=n(86361),p=n(16010),g=n(74058),_=n(98634),y=n(82644),T=n(35522);function x(e,t){switch(t.normalType){case p.r.Attribute:case p.r.Compressed:e.include(p.O,t),e.varyings.add("vNormalWorld","vec3"),e.varyings.add("vNormalView","vec3"),e.vertex.uniforms.add(new y.j("transformNormalGlobalFromModel",(function(e){return e.transformNormalGlobalFromModel})),new T.c("transformNormalViewFromGlobal",(function(e){return e.transformNormalViewFromGlobal}))),e.vertex.code.add((0,_.H)(r||(r=(0,d.Z)(["void forwardNormal() {\nvNormalWorld = transformNormalGlobalFromModel * normalModel();\nvNormalView = transformNormalViewFromGlobal * vNormalWorld;\n}"]))));break;case p.r.Ground:e.include(g.up,t),e.varyings.add("vNormalWorld","vec3"),e.vertex.code.add((0,_.H)(i||(i=(0,d.Z)(["\n        void forwardNormal() {\n          vNormalWorld = ","\n        }\n        "])),t.spherical?(0,_.H)(o||(o=(0,d.Z)(["normalize(vPositionWorldCameraRelative);"]))):(0,_.H)(a||(a=(0,d.Z)(["vec3(0.0, 0.0, 1.0);"])))));break;case p.r.ScreenDerivative:e.vertex.code.add((0,_.H)(u||(u=(0,d.Z)(["void forwardNormal() {}"]))));break;default:(0,h.Bg)(t.normalType);case p.r.COUNT:}}var A=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(){var e;return(0,c.Z)(this,n),(e=t.apply(this,arguments)).transformNormalViewFromGlobal=(0,v.Ue)(),e}return(0,s.Z)(n)}(g.su),S=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(){var e;return(0,c.Z)(this,n),(e=t.apply(this,arguments)).transformNormalGlobalFromModel=(0,v.Ue)(),e.toMapSpace=(0,m.Ue)(),e}return(0,s.Z)(n)}(g.OU)},74058:function(e,t,n){n.d(t,{OU:function(){return R},su:function(){return E},up:function(){return w}});var r,i,o,a,u,s,c=n(43144),l=n(15671),f=n(60136),d=n(29388),h=n(30168),v=n(21389),m=n(7025),p=n(12400),g=n(52276),_=n(27254),y=n(86471),T=n(49450),x=n(98634),A=n(82644),S=n(35522),b=n(8654);function w(e,t){e.include(g.f);var n=e.vertex;n.include(_.$,t),e.varyings.add("vPositionWorldCameraRelative","vec3"),e.varyings.add("vPosition_view","vec3"),n.uniforms.add(new T.J("transformWorldFromViewTH",(function(e){return e.transformWorldFromViewTH})),new T.J("transformWorldFromViewTL",(function(e){return e.transformWorldFromViewTL})),new S.c("transformViewFromCameraRelativeRS",(function(e){return e.transformViewFromCameraRelativeRS})),new b.g("transformProjFromView",(function(e){return e.transformProjFromView})),new A.j("transformWorldFromModelRS",(function(e){return e.transformWorldFromModelRS})),new y.B("transformWorldFromModelTH",(function(e){return e.transformWorldFromModelTH})),new y.B("transformWorldFromModelTL",(function(e){return e.transformWorldFromModelTL}))),n.code.add((0,x.H)(r||(r=(0,h.Z)(["vec3 positionWorldCameraRelative() {\nvec3 rotatedModelPosition = transformWorldFromModelRS * positionModel();\nvec3 transform_CameraRelativeFromModel = dpAdd(\ntransformWorldFromModelTL,\ntransformWorldFromModelTH,\n-transformWorldFromViewTL,\n-transformWorldFromViewTH\n);\nreturn transform_CameraRelativeFromModel + rotatedModelPosition;\n}"])))),n.code.add((0,x.H)(i||(i=(0,h.Z)(["\n    void forwardPosition(float fOffset) {\n      vPositionWorldCameraRelative = positionWorldCameraRelative();\n      if (fOffset != 0.0) {\n        vPositionWorldCameraRelative += fOffset * ",";\n      }\n\n      vPosition_view = transformViewFromCameraRelativeRS * vPositionWorldCameraRelative;\n      gl_Position = transformProjFromView * vec4(vPosition_view, 1.0);\n    }\n  "])),t.spherical?(0,x.H)(o||(o=(0,h.Z)(["normalize(transformWorldFromViewTL + vPositionWorldCameraRelative)"]))):(0,x.H)(a||(a=(0,h.Z)(["vec3(0.0, 0.0, 1.0)"]))))),e.fragment.uniforms.add(new T.J("transformWorldFromViewTL",(function(e){return e.transformWorldFromViewTL}))),n.code.add((0,x.H)(u||(u=(0,h.Z)(["vec3 positionWorld() {\nreturn transformWorldFromViewTL + vPositionWorldCameraRelative;\n}"])))),e.fragment.code.add((0,x.H)(s||(s=(0,h.Z)(["vec3 positionWorld() {\nreturn transformWorldFromViewTL + vPositionWorldCameraRelative;\n}"]))))}var E=function(e){(0,f.Z)(n,e);var t=(0,d.Z)(n);function n(){var e;return(0,l.Z)(this,n),(e=t.apply(this,arguments)).transformWorldFromViewTH=(0,p.Ue)(),e.transformWorldFromViewTL=(0,p.Ue)(),e.transformViewFromCameraRelativeRS=(0,v.Ue)(),e.transformProjFromView=(0,m.Ue)(),e}return(0,c.Z)(n)}(x.K),R=function(e){(0,f.Z)(n,e);var t=(0,d.Z)(n);function n(){var e;return(0,l.Z)(this,n),(e=t.apply(this,arguments)).transformWorldFromModelRS=(0,v.Ue)(),e.transformWorldFromModelTH=(0,p.Ue)(),e.transformWorldFromModelTL=(0,p.Ue)(),e}return(0,c.Z)(n)}(x.K)},51520:function(e,t,n){n.d(t,{i:function(){return l}});var r,i,o=n(30168),a=n(41644),u=n(60113),s=n(27193),c=n(98634);function l(e,t){switch(e.include(u.D,t),t.textureCoordinateType){case u.N.Default:case u.N.Compressed:return void e.fragment.code.add((0,c.H)(r||(r=(0,o.Z)(["vec4 textureLookup(sampler2D tex, vec2 uv) {\nreturn texture(tex, uv);\n}"]))));case u.N.Atlas:return e.include(s.r),void e.fragment.code.add((0,c.H)(i||(i=(0,o.Z)(["vec4 textureLookup(sampler2D tex, vec2 uv) {\nreturn textureAtlasLookup(tex, uv, vuvRegion);\n}"]))));default:(0,a.Bg)(t.textureCoordinateType);case u.N.None:case u.N.COUNT:return}}},54943:function(e,t,n){n.d(t,{K:function(){return v},S:function(){return h}});var r,i,o,a,u=n(30168),s=n(13611),c=n(6644),l=n(78980),f=n(82999),d=n(98634);function h(e){e.include(l.n),e.code.add((0,d.H)(r||(r=(0,u.Z)(["float linearDepthFromFloat(float depth, vec2 nearFar) {\nreturn -(depth * (nearFar[1] - nearFar[0]) + nearFar[0]);\n}\nfloat linearDepthFromRGBA(vec4 depth, vec2 nearFar) {\nreturn linearDepthFromFloat(rgba2float(depth), nearFar);\n}\nfloat linearDepthFromTexture(sampler2D depthTexture, vec2 uv, vec2 nearFar) {\nivec2 iuv = ivec2(uv * vec2(textureSize(depthTexture, 0)));\nreturn linearDepthFromRGBA(texelFetch(depthTexture, iuv, 0), nearFar);\n}"]))))}function v(e){e.uniforms.add(new f.A("zProjectionMap",(function(e,t){return function(e){var t=e.projectionMatrix;return(0,s.t8)(m,t[14],t[10])}(t.camera)}))),e.code.add((0,d.H)(i||(i=(0,u.Z)(["float linearizeDepth(float depth) {\nfloat depthNdc = depth * 2.0 - 1.0;\nfloat c1 = zProjectionMap[0];\nfloat c2 = zProjectionMap[1];\nreturn -(c1 / (depthNdc + c2 + 1e-7));\n}"])))),e.code.add((0,d.H)(o||(o=(0,u.Z)(["float depthFromTexture(sampler2D depthTexture, vec2 uv) {\nivec2 iuv = ivec2(uv * vec2(textureSize(depthTexture, 0)));\nfloat depth = texelFetch(depthTexture, iuv, 0).r;\nreturn depth;\n}"])))),e.code.add((0,d.H)(a||(a=(0,u.Z)(["float linearDepthFromTexture(sampler2D depthTexture, vec2 uv) {\nreturn linearizeDepth(depthFromTexture(depthTexture, uv));\n}"]))))}var m=(0,c.Ue)()},92395:function(e,t,n){n.d(t,{F1:function(){return s},Pe:function(){return u},kR:function(){return c}});var r,i=n(30168),o=n(49450),a=n(98634);function u(e){e.uniforms.add(new o.J("mainLightDirection",(function(e,t){return t.lighting.mainLight.direction})))}function s(e){e.uniforms.add(new o.J("mainLightIntensity",(function(e,t){return t.lighting.mainLight.intensity})))}function c(e){u(e.fragment),s(e.fragment),e.fragment.code.add((0,a.H)(r||(r=(0,i.Z)(["vec3 evaluateMainLighting(vec3 normal_global, float shadowing) {\nfloat dotVal = clamp(dot(normal_global, mainLightDirection), 0.0, 1.0);\nreturn mainLightIntensity * ((1.0 - shadowing) * dotVal);\n}"]))))}},15226:function(e,t,n){n.d(t,{a:function(){return h},l:function(){return d}});var r,i,o,a=n(43144),u=n(15671),s=n(30168),c=n(54943),l=n(98634),f=n(19253);function d(e,t){if(t.multipassEnabled){e.fragment.include(c.K),e.fragment.uniforms.add(new f.A("terrainDepthTexture",(function(e,t){var n;return null===(n=t.multipassTerrain.depth)||void 0===n?void 0:n.attachment})));var n=t.occlusionPass;e.fragment.code.add((0,l.H)(r||(r=(0,s.Z)(["\n   "," terrainDepthTest(float fragmentDepth) {\n      float depth = texelFetch(terrainDepthTexture, ivec2(gl_FragCoord.xy), 0).r;\n      float linearDepth = linearizeDepth(depth);\n      ","\n    }"])),n?"bool":"void",n?(0,l.H)(i||(i=(0,s.Z)(["return fragmentDepth < linearDepth && depth < 1.0;"]))):(0,l.H)(o||(o=(0,s.Z)(["\n          if(fragmentDepth "," linearDepth){\n            discard;\n          }"])),t.cullAboveGround?">":"<=")))}}var h=(0,a.Z)((function e(){(0,u.Z)(this,e),this.cullAboveGround=!1}))},2116:function(e,t,n){n.d(t,{T:function(){return A},g:function(){return S}});var r,i,o,a=n(30168),u=n(98634);function s(e){var t=e.fragment.code;t.add((0,u.H)(r||(r=(0,a.Z)(["vec3 evaluateDiffuseIlluminationHemisphere(vec3 ambientGround, vec3 ambientSky, float NdotNG)\n{\nreturn ((1.0 - NdotNG) * ambientGround + (1.0 + NdotNG) * ambientSky) * 0.5;\n}"])))),t.add((0,u.H)(i||(i=(0,a.Z)(["float integratedRadiance(float cosTheta2, float roughness)\n{\nreturn (cosTheta2 - 1.0) / (cosTheta2 * (1.0 - roughness * roughness) - 1.0);\n}"])))),t.add((0,u.H)(o||(o=(0,a.Z)(["vec3 evaluateSpecularIlluminationHemisphere(vec3 ambientGround, vec3 ambientSky, float RdotNG, float roughness)\n{\nfloat cosTheta2 = 1.0 - RdotNG * RdotNG;\nfloat intRadTheta = integratedRadiance(cosTheta2, roughness);\nfloat ground = RdotNG < 0.0 ? 1.0 - intRadTheta : 1.0 + intRadTheta;\nfloat sky = 2.0 - ground;\nreturn (ground * ambientGround + sky * ambientSky) * 0.5;\n}"]))))}var c,l,f,d,h,v,m,p,g,_,y,T=n(41481),x=n(85586);function A(e,t){var n=e.fragment.code;e.include(x.e),t.pbrMode!==T.f7.Normal&&t.pbrMode!==T.f7.Schematic&&t.pbrMode!==T.f7.Simplified&&t.pbrMode!==T.f7.TerrainWithWater||(n.add((0,u.H)(c||(c=(0,a.Z)(["float normalDistribution(float NdotH, float roughness)\n{\nfloat a = NdotH * roughness;\nfloat b = roughness / (1.0 - NdotH * NdotH + a * a);\nreturn b * b * INV_PI;\n}"])))),n.add((0,u.H)(l||(l=(0,a.Z)(["const vec4 c0 = vec4(-1.0, -0.0275, -0.572,  0.022);\nconst vec4 c1 = vec4( 1.0,  0.0425,  1.040, -0.040);\nconst vec2 c2 = vec2(-1.04, 1.04);\nvec2 prefilteredDFGAnalytical(float roughness, float NdotV) {\nvec4 r = roughness * c0 + c1;\nfloat a004 = min(r.x * r.x, exp2(-9.28 * NdotV)) * r.x + r.y;\nreturn c2 * a004 + r.zw;\n}"]))))),t.pbrMode!==T.f7.Normal&&t.pbrMode!==T.f7.Schematic||(e.include(s),n.add((0,u.H)(f||(f=(0,a.Z)(["struct PBRShadingInfo\n{\nfloat NdotL;\nfloat NdotV;\nfloat NdotH;\nfloat VdotH;\nfloat LdotH;\nfloat NdotNG;\nfloat RdotNG;\nfloat NdotAmbDir;\nfloat NdotH_Horizon;\nvec3 skyRadianceToSurface;\nvec3 groundRadianceToSurface;\nvec3 skyIrradianceToSurface;\nvec3 groundIrradianceToSurface;\nfloat averageAmbientRadiance;\nfloat ssao;\nvec3 albedoLinear;\nvec3 f0;\nvec3 f90;\nvec3 diffuseColor;\nfloat metalness;\nfloat roughness;\n};"])))),n.add((0,u.H)(d||(d=(0,a.Z)(["vec3 evaluateEnvironmentIllumination(PBRShadingInfo inputs) {\nvec3 indirectDiffuse = evaluateDiffuseIlluminationHemisphere(inputs.groundIrradianceToSurface, inputs.skyIrradianceToSurface, inputs.NdotNG);\nvec3 indirectSpecular = evaluateSpecularIlluminationHemisphere(inputs.groundRadianceToSurface, inputs.skyRadianceToSurface, inputs.RdotNG, inputs.roughness);\nvec3 diffuseComponent = inputs.diffuseColor * indirectDiffuse * INV_PI;\nvec2 dfg = prefilteredDFGAnalytical(inputs.roughness, inputs.NdotV);\nvec3 specularColor = inputs.f0 * dfg.x + inputs.f90 * dfg.y;\nvec3 specularComponent = specularColor * indirectSpecular;\nreturn (diffuseComponent + specularComponent);\n}"])))),n.add((0,u.H)(h||(h=(0,a.Z)(["float gamutMapChanel(float x, vec2 p){\nreturn (x < p.x) ? mix(0.0, p.y, x/p.x) : mix(p.y, 1.0, (x - p.x) / (1.0 - p.x) );\n}"])))),n.add((0,u.H)(v||(v=(0,a.Z)(["vec3 blackLevelSoftCompression(vec3 inColor, PBRShadingInfo inputs){\nvec3 outColor;\nvec2 p = vec2(0.02 * (inputs.averageAmbientRadiance), 0.0075 * (inputs.averageAmbientRadiance));\noutColor.x = gamutMapChanel(inColor.x, p) ;\noutColor.y = gamutMapChanel(inColor.y, p) ;\noutColor.z = gamutMapChanel(inColor.z, p) ;\nreturn outColor;\n}"])))))}function S(e,t){var n=e.fragment.code;e.include(x.e),n.add((0,u.H)(m||(m=(0,a.Z)(["\n  struct PBRShadingWater\n  {\n      float NdotL;   // cos angle between normal and light direction\n      float NdotV;   // cos angle between normal and view direction\n      float NdotH;   // cos angle between normal and half vector\n      float VdotH;   // cos angle between view direction and half vector\n      float LdotH;   // cos angle between light direction and half vector\n      float VdotN;   // cos angle between view direction and normal vector\n  };\n\n  float dtrExponent = ",";\n  "])),t.useCustomDTRExponentForWater?"2.2":"2.0")),n.add((0,u.H)(p||(p=(0,a.Z)(["vec3 fresnelReflection(float angle, vec3 f0, float f90) {\nreturn f0 + (f90 - f0) * pow(1.0 - angle, 5.0);\n}"])))),n.add((0,u.H)(g||(g=(0,a.Z)(["float normalDistributionWater(float NdotH, float roughness)\n{\nfloat r2 = roughness * roughness;\nfloat NdotH2 = NdotH * NdotH;\nfloat denom = pow((NdotH2 * (r2 - 1.0) + 1.0), dtrExponent) * PI;\nreturn r2 / denom;\n}"])))),n.add((0,u.H)(_||(_=(0,a.Z)(["float geometricOcclusionKelemen(float LoH)\n{\nreturn 0.25 / (LoH * LoH);\n}"])))),n.add((0,u.H)(y||(y=(0,a.Z)(["vec3 brdfSpecularWater(in PBRShadingWater props, float roughness, vec3 F0, float F0Max)\n{\nvec3  F = fresnelReflection(props.VdotH, F0, F0Max);\nfloat dSun = normalDistributionWater(props.NdotH, roughness);\nfloat V = geometricOcclusionKelemen(props.LdotH);\nfloat diffusionSunHaze = mix(roughness + 0.045, roughness + 0.385, 1.0 - props.VdotH);\nfloat strengthSunHaze  = 1.2;\nfloat dSunHaze = normalDistributionWater(props.NdotH, diffusionSunHaze)*strengthSunHaze;\nreturn ((dSun + dSunHaze) * V) * F;\n}\nvec3 tonemapACES(const vec3 x) {\nreturn (x * (2.51 * x + 0.03)) / (x * (2.43 * x + 0.59) + 0.14);\n}"]))))}},41481:function(e,t,n){n.d(t,{f7:function(){return g},jV:function(){return C}});var r,i,o,a,u,s,c,l,f,d,h,v,m,p,g,_=n(30168),y=n(43144),T=n(15671),x=n(60136),A=n(29388),S=n(51520),b=n(86471),w=n(49450),E=n(98634),R=n(78050),I=n(19253),Z=n(99340),P=n(17363);!function(e){e[e.Disabled=0]="Disabled",e[e.Normal=1]="Normal",e[e.Schematic=2]="Schematic",e[e.Water=3]="Water",e[e.WaterOnIntegratedMesh=4]="WaterOnIntegratedMesh",e[e.Simplified=5]="Simplified",e[e.TerrainWithWater=6]="TerrainWithWater",e[e.COUNT=7]="COUNT"}(g||(g={}));P.E;function C(e,t){var n=e.fragment,y=t.hasMetallicRoughnessTexture||t.hasEmissionTexture||t.hasOcclusionTexture;if(t.pbrMode===g.Normal&&y&&e.include(S.i,t),t.pbrMode!==g.Schematic)if(t.pbrMode!==g.Disabled){if(t.pbrMode===g.Normal){n.code.add((0,E.H)(r||(r=(0,_.Z)(["vec3 mrr;\nvec3 emission;\nfloat occlusion;"]))));var T=t.pbrTextureBindType;t.hasMetallicRoughnessTexture&&(n.uniforms.add(T===Z.P.Pass?new I.A("texMetallicRoughness",(function(e){return e.textureMetallicRoughness})):new R.R("texMetallicRoughness",(function(e){return e.textureMetallicRoughness}))),n.code.add((0,E.H)(i||(i=(0,_.Z)(["void applyMetallnessAndRoughness(vec2 uv) {\nvec3 metallicRoughness = textureLookup(texMetallicRoughness, uv).rgb;\nmrr[0] *= metallicRoughness.b;\nmrr[1] *= metallicRoughness.g;\n}"]))))),t.hasEmissionTexture&&(n.uniforms.add(T===Z.P.Pass?new I.A("texEmission",(function(e){return e.textureEmissive})):new R.R("texEmission",(function(e){return e.textureEmissive}))),n.code.add((0,E.H)(o||(o=(0,_.Z)(["void applyEmission(vec2 uv) {\nemission *= textureLookup(texEmission, uv).rgb;\n}"]))))),t.hasOcclusionTexture?(n.uniforms.add(T===Z.P.Pass?new I.A("texOcclusion",(function(e){return e.textureOcclusion})):new R.R("texOcclusion",(function(e){return e.textureOcclusion}))),n.code.add((0,E.H)(a||(a=(0,_.Z)(["void applyOcclusion(vec2 uv) {\nocclusion *= textureLookup(texOcclusion, uv).r;\n}\nfloat getBakedOcclusion() {\nreturn occlusion;\n}"]))))):n.code.add((0,E.H)(u||(u=(0,_.Z)(["float getBakedOcclusion() { return 1.0; }"])))),T===Z.P.Pass?n.uniforms.add(new w.J("emissionFactor",(function(e){return e.emissiveFactor})),new w.J("mrrFactors",(function(e){return e.mrrFactors}))):n.uniforms.add(new b.B("emissionFactor",(function(e){return e.emissiveFactor})),new b.B("mrrFactors",(function(e){return e.mrrFactors}))),n.code.add((0,E.H)(s||(s=(0,_.Z)(["\n    void applyPBRFactors() {\n      mrr = mrrFactors;\n      emission = emissionFactor;\n      occlusion = 1.0;\n\n      ","\n\n      ","\n\n      ","\n    }\n  "])),t.hasMetallicRoughnessTexture?(0,E.H)(c||(c=(0,_.Z)(["applyMetallnessAndRoughness(",");"])),t.hasMetallicRoughnessTextureTransform?(0,E.H)(l||(l=(0,_.Z)(["metallicRoughnessUV"]))):"vuv0"):"",t.hasEmissionTexture?(0,E.H)(f||(f=(0,_.Z)(["applyEmission(",");"])),t.hasEmissiveTextureTransform?(0,E.H)(d||(d=(0,_.Z)(["emissiveUV"]))):"vuv0"):"",t.hasOcclusionTexture?(0,E.H)(h||(h=(0,_.Z)(["applyOcclusion(",");"])),t.hasOcclusionTextureTransform?(0,E.H)(v||(v=(0,_.Z)(["occlusionUV"]))):"vuv0"):""))}}else n.code.add((0,E.H)(m||(m=(0,_.Z)(["float getBakedOcclusion() { return 1.0; }"]))));else n.code.add((0,E.H)(p||(p=(0,_.Z)(["vec3 mrr = vec3(0.0, 0.6, 0.2);\nvec3 emission = vec3(0.0);\nfloat occlusion = 1.0;\nvoid applyPBRFactors() {}\nfloat getBakedOcclusion() { return 1.0; }"]))))}},85586:function(e,t,n){n.d(t,{e:function(){return u}});var r,i,o=n(30168),a=n(98634);function u(e){e.vertex.code.add((0,a.H)(r||(r=(0,o.Z)(["const float PI = 3.141592653589793;"])))),e.fragment.code.add((0,a.H)(i||(i=(0,o.Z)(["const float PI = 3.141592653589793;\nconst float LIGHT_NORMALIZATION = 1.0 / PI;\nconst float INV_PI = 0.3183098861837907;\nconst float HALF_PI = 1.570796326794897;"]))))}},41287:function(e,t,n){n.d(t,{o:function(){return i},s:function(){return r}});var r=3e5,i=5e5},18607:function(e,t,n){n.d(t,{k:function(){return _}});var r,i,o,a,u,s,c,l=n(30168),f=n(49450),d=n(59150),h=n(699),v=n(98634),m=n(35522),p=n(4760),g=n(65964);function _(e,t){var n=e.vertex,_=e.attributes;t.hasVvInstancing&&(t.vvSize||t.vvColor)&&_.add(p.T.INSTANCEFEATUREATTRIBUTE,"vec4"),t.vvSize?(n.uniforms.add(new f.J("vvSizeMinSize",(function(e){return e.vvSize.minSize}))),n.uniforms.add(new f.J("vvSizeMaxSize",(function(e){return e.vvSize.maxSize}))),n.uniforms.add(new f.J("vvSizeOffset",(function(e){return e.vvSize.offset}))),n.uniforms.add(new f.J("vvSizeFactor",(function(e){return e.vvSize.factor}))),n.uniforms.add(new m.c("vvSymbolRotationMatrix",(function(e){return e.vvSymbolRotationMatrix}))),n.uniforms.add(new f.J("vvSymbolAnchor",(function(e){return e.vvSymbolAnchor}))),n.code.add((0,v.H)(r||(r=(0,l.Z)(["vec3 vvScale(vec4 _featureAttribute) {\nreturn clamp(vvSizeOffset + _featureAttribute.x * vvSizeFactor, vvSizeMinSize, vvSizeMaxSize);\n}\nvec4 vvTransformPosition(vec3 position, vec4 _featureAttribute) {\nreturn vec4(vvSymbolRotationMatrix * ( vvScale(_featureAttribute) * (position + vvSymbolAnchor)), 1.0);\n}"])))),n.code.add((0,v.H)(i||(i=(0,l.Z)(["\n      const float eps = 1.192092896e-07;\n      vec4 vvTransformNormal(vec3 _normal, vec4 _featureAttribute) {\n        vec3 vvScale = clamp(vvSizeOffset + _featureAttribute.x * vvSizeFactor, vvSizeMinSize + eps, vvSizeMaxSize);\n        return vec4(vvSymbolRotationMatrix * _normal / vvScale, 1.0);\n      }\n\n      ","\n    "])),t.hasVvInstancing?(0,v.H)(o||(o=(0,l.Z)(["\n      vec4 vvLocalNormal(vec3 _normal) {\n        return vvTransformNormal(_normal, instanceFeatureAttribute);\n      }\n\n      vec4 localPosition() {\n        return vvTransformPosition(position, instanceFeatureAttribute);\n      }"]))):""))):n.code.add((0,v.H)(a||(a=(0,l.Z)(["vec4 localPosition() { return vec4(position, 1.0); }\nvec4 vvLocalNormal(vec3 _normal) { return vec4(_normal, 1.0); }"])))),t.vvColor?(n.constants.add("vvColorNumber","int",g.x),n.uniforms.add(new h.O("vvColorValues",(function(e){return e.vvColor.values}),g.x),new d.b("vvColorColors",(function(e){return e.vvColor.colors}),g.x)),n.code.add((0,v.H)(u||(u=(0,l.Z)(["\n      vec4 interpolateVVColor(float value) {\n        if (value <= vvColorValues[0]) {\n          return vvColorColors[0];\n        }\n\n        for (int i = 1; i < vvColorNumber; ++i) {\n          if (vvColorValues[i] >= value) {\n            float f = (value - vvColorValues[i-1]) / (vvColorValues[i] - vvColorValues[i-1]);\n            return mix(vvColorColors[i-1], vvColorColors[i], f);\n          }\n        }\n        return vvColorColors[vvColorNumber - 1];\n      }\n\n      vec4 vvGetColor(vec4 featureAttribute) {\n        return interpolateVVColor(featureAttribute.y);\n      }\n\n      ","\n    "])),t.hasVvInstancing?(0,v.H)(s||(s=(0,l.Z)(["\n            vec4 vvColor() {\n              return vvGetColor(instanceFeatureAttribute);\n            }"]))):"vec4 vvColor() { return vec4(1.0); }"))):n.code.add((0,v.H)(c||(c=(0,l.Z)(["vec4 vvColor() { return vec4(1.0); }"]))))}},26461:function(e,t,n){n.d(t,{F:function(){return r},b:function(){return i}});var r=.1,i=.001},96415:function(e,t,n){n.d(t,{GZ:function(){return d}});var r,i=n(30168),o=n(13611),a=n(6644),u=n(19093),s=n(86361),c=n(82999),l=n(95276),f=n(98634);function d(e){e.fragment.uniforms.add(new l.N("projInfo",(function(e,t){return function(e){var t=e.projectionMatrix;return 0===t[11]?(0,u.s)(h,2/(e.fullWidth*t[0]),2/(e.fullHeight*t[5]),(1+t[12])/t[0],(1+t[13])/t[5]):(0,u.s)(h,-2/(e.fullWidth*t[0]),-2/(e.fullHeight*t[5]),(1-t[8])/t[0],(1-t[9])/t[5])}(t.camera)}))),e.fragment.uniforms.add(new c.A("zScale",(function(e,t){return function(e){return 0===e.projectionMatrix[11]?(0,o.t8)(v,0,1):(0,o.t8)(v,1,0)}(t.camera)}))),e.fragment.code.add((0,f.H)(r||(r=(0,i.Z)(["vec3 reconstructPosition(vec2 fragCoord, float depth) {\nreturn vec3((fragCoord * projInfo.xy + projInfo.zw) * (zScale.x * depth + zScale.y), depth);\n}"]))))}var h=(0,s.Ue)();var v=(0,a.Ue)()},116:function(e,t,n){n.d(t,{Y:function(){return a}});var r,i=n(30168),o=n(98634);function a(e){e.code.add((0,o.H)(r||(r=(0,i.Z)(["vec4 premultiplyAlpha(vec4 v) {\nreturn vec4(v.rgb * v.a, v.a);\n}\nvec3 rgb2hsv(vec3 c) {\nvec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\nvec4 p = c.g < c.b ? vec4(c.bg, K.wz) : vec4(c.gb, K.xy);\nvec4 q = c.r < p.x ? vec4(p.xyw, c.r) : vec4(c.r, p.yzx);\nfloat d = q.x - min(q.w, q.y);\nfloat e = 1.0e-10;\nreturn vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), min(d / (q.x + e), 1.0), q.x);\n}\nvec3 hsv2rgb(vec3 c) {\nvec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\nvec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\nreturn c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n}\nfloat rgb2v(vec3 c) {\nreturn max(c.x, max(c.y, c.z));\n}"]))))}},27254:function(e,t,n){n.d(t,{$:function(){return u}});var r,i,o=n(30168),a=n(98634);function u(e,t){var n=e.code;t.doublePrecisionRequiresObfuscation?n.add((0,a.H)(r||(r=(0,o.Z)(["vec3 dpPlusFrc(vec3 a, vec3 b) {\nreturn mix(a, a + b, vec3(notEqual(b, vec3(0))));\n}\nvec3 dpMinusFrc(vec3 a, vec3 b) {\nreturn mix(vec3(0), a - b, vec3(notEqual(a, b)));\n}\nvec3 dpAdd(vec3 hiA, vec3 loA, vec3 hiB, vec3 loB) {\nvec3 t1 = dpPlusFrc(hiA, hiB);\nvec3 e = dpMinusFrc(t1, hiA);\nvec3 t2 = dpMinusFrc(hiB, e) + dpMinusFrc(hiA, dpMinusFrc(t1, e)) + loA + loB;\nreturn t1 + t2;\n}"])))):n.add((0,a.H)(i||(i=(0,o.Z)(["vec3 dpAdd(vec3 hiA, vec3 loA, vec3 hiB, vec3 loB) {\nvec3 t1 = hiA + hiB;\nvec3 e = t1 - hiA;\nvec3 t2 = ((hiB - e) + (hiA - (t1 - e))) + loA + loB;\nreturn t1 + t2;\n}"]))))}},78980:function(e,t,n){n.d(t,{n:function(){return a}});var r,i=n(30168),o=n(98634);function a(e){e.code.add((0,o.H)(r||(r=(0,i.Z)(["const float MAX_RGBA_FLOAT =\n255.0 / 256.0 +\n255.0 / 256.0 / 256.0 +\n255.0 / 256.0 / 256.0 / 256.0 +\n255.0 / 256.0 / 256.0 / 256.0 / 256.0;\nconst vec4 FIXED_POINT_FACTORS = vec4(1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0);\nvec4 float2rgba(const float value) {\nfloat valueInValidDomain = clamp(value, 0.0, MAX_RGBA_FLOAT);\nvec4 fixedPointU8 = floor(fract(valueInValidDomain * FIXED_POINT_FACTORS) * 256.0);\nconst float toU8AsFloat = 1.0 / 255.0;\nreturn fixedPointU8 * toU8AsFloat;\n}\nconst vec4 RGBA_2_FLOAT_FACTORS = vec4(\n255.0 / (256.0),\n255.0 / (256.0 * 256.0),\n255.0 / (256.0 * 256.0 * 256.0),\n255.0 / (256.0 * 256.0 * 256.0 * 256.0)\n);\nfloat rgba2float(vec4 rgba) {\nreturn dot(rgba, RGBA_2_FLOAT_FACTORS);\n}"]))))}},27193:function(e,t,n){n.d(t,{r:function(){return a}});var r,i=n(30168),o=n(98634);function a(e){e.fragment.code.add((0,o.H)(r||(r=(0,i.Z)(["vec4 textureAtlasLookup(sampler2D tex, vec2 textureCoordinates, vec4 atlasRegion) {\nvec2 atlasScale = atlasRegion.zw - atlasRegion.xy;\nvec2 uvAtlas = fract(textureCoordinates) * atlasScale + atlasRegion.xy;\nfloat maxdUV = 0.125;\nvec2 dUVdx = clamp(dFdx(textureCoordinates), -maxdUV, maxdUV) * atlasScale;\nvec2 dUVdy = clamp(dFdy(textureCoordinates), -maxdUV, maxdUV) * atlasScale;\nreturn textureGrad(tex, uvAtlas, dUVdx, dUVdy);\n}"]))))}},41012:function(e,t,n){n.d(t,{Sv:function(){return h},ZI:function(){return g},_8:function(){return p},hY:function(){return d}});var r=n(29134),i=n(7025),o=n(32035),a=n(12400),u=n(86471),s=n(49450),c=n(58406),l=n(76028),f=n(8654);function d(e,t){t.instancedDoublePrecision?e.constants.add("cameraPosition","vec3",a.AG):e.uniforms.add(new u.B("cameraPosition",(function(e,t){return(0,o.s)(m,t.camera.viewInverseTransposeMatrix[3]-e.origin[0],t.camera.viewInverseTransposeMatrix[7]-e.origin[1],t.camera.viewInverseTransposeMatrix[11]-e.origin[2])})))}function h(e,t){if(t.instancedDoublePrecision){var n=function(e){return(0,o.s)(m,e.camera.viewInverseTransposeMatrix[3],e.camera.viewInverseTransposeMatrix[7],e.camera.viewInverseTransposeMatrix[11])};e.uniforms.add(new f.g("proj",(function(e,t){return t.camera.projectionMatrix})),new f.g("view",(function(e,t){return(0,r.Iu)(v,t.camera.viewMatrix,n(t))})),new s.J("localOrigin",(function(e,t){return n(t)})))}else e.uniforms.add(new f.g("proj",(function(e,t){return t.camera.projectionMatrix})),new l.K("view",(function(e,t){return(0,r.Iu)(v,t.camera.viewMatrix,e.origin)})),new u.B("localOrigin",(function(e){return e.origin})))}var v=(0,i.Ue)(),m=(0,a.Ue)();function p(e){e.uniforms.add(new f.g("viewNormal",(function(e,t){return t.camera.viewInverseTransposeMatrix})))}function g(e){e.uniforms.add(new c.p("pixelRatio",(function(e,t){return t.camera.pixelRatio/t.overlayStretch})))}},13773:function(e,t,n){n.d(t,{U:function(){return c}});var r=n(43144),i=n(15671),o=n(60136),a=n(29388),u=n(61809),s=n(99340),c=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(e,r){return(0,i.Z)(this,n),t.call(this,e,"bool",s.P.Pass,(function(t,n,i){return t.setUniform1b(e,r(n,i))}))}return(0,r.Z)(n)}(u.x)},82999:function(e,t,n){n.d(t,{A:function(){return c}});var r=n(43144),i=n(15671),o=n(60136),a=n(29388),u=n(61809),s=n(99340),c=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(e,r){return(0,i.Z)(this,n),t.call(this,e,"vec2",s.P.Pass,(function(t,n,i){return t.setUniform2fv(e,r(n,i))}))}return(0,r.Z)(n)}(u.x)},86471:function(e,t,n){n.d(t,{B:function(){return c}});var r=n(43144),i=n(15671),o=n(60136),a=n(29388),u=n(61809),s=n(99340),c=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(e,r){return(0,i.Z)(this,n),t.call(this,e,"vec3",s.P.Draw,(function(t,n,i,o){return t.setUniform3fv(e,r(n,i,o))}))}return(0,r.Z)(n)}(u.x)},49450:function(e,t,n){n.d(t,{J:function(){return c}});var r=n(43144),i=n(15671),o=n(60136),a=n(29388),u=n(61809),s=n(99340),c=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(e,r){return(0,i.Z)(this,n),t.call(this,e,"vec3",s.P.Pass,(function(t,n,i){return t.setUniform3fv(e,r(n,i))}))}return(0,r.Z)(n)}(u.x)},95276:function(e,t,n){n.d(t,{N:function(){return c}});var r=n(43144),i=n(15671),o=n(60136),a=n(29388),u=n(61809),s=n(99340),c=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(e,r){return(0,i.Z)(this,n),t.call(this,e,"vec4",s.P.Pass,(function(t,n,i){return t.setUniform4fv(e,r(n,i))}))}return(0,r.Z)(n)}(u.x)},59150:function(e,t,n){n.d(t,{b:function(){return c}});var r=n(43144),i=n(15671),o=n(60136),a=n(29388),u=n(61809),s=n(99340),c=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(e,r,o){return(0,i.Z)(this,n),t.call(this,e,"vec4",s.P.Pass,(function(t,n,i){return t.setUniform4fv(e,r(n,i))}),o)}return(0,r.Z)(n)}(u.x)},58406:function(e,t,n){n.d(t,{p:function(){return c}});var r=n(43144),i=n(15671),o=n(60136),a=n(29388),u=n(61809),s=n(99340),c=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(e,r){return(0,i.Z)(this,n),t.call(this,e,"float",s.P.Pass,(function(t,n,i){return t.setUniform1f(e,r(n,i))}))}return(0,r.Z)(n)}(u.x)},699:function(e,t,n){n.d(t,{O:function(){return c}});var r=n(43144),i=n(15671),o=n(60136),a=n(29388),u=n(61809),s=n(99340),c=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(e,r,o){return(0,i.Z)(this,n),t.call(this,e,"float",s.P.Pass,(function(t,n,i){return t.setUniform1fv(e,r(n,i))}),o)}return(0,r.Z)(n)}(u.x)},99339:function(e,t,n){n.d(t,{_:function(){return c}});var r=n(43144),i=n(15671),o=n(60136),a=n(29388),u=n(61809),s=n(99340),c=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(e,r){return(0,i.Z)(this,n),t.call(this,e,"int",s.P.Pass,(function(t,n,i){return t.setUniform1i(e,r(n,i))}))}return(0,r.Z)(n)}(u.x)},82644:function(e,t,n){n.d(t,{j:function(){return c}});var r=n(43144),i=n(15671),o=n(60136),a=n(29388),u=n(61809),s=n(99340),c=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(e,r){return(0,i.Z)(this,n),t.call(this,e,"mat3",s.P.Draw,(function(t,n,i){return t.setUniformMatrix3fv(e,r(n,i))}))}return(0,r.Z)(n)}(u.x)},35522:function(e,t,n){n.d(t,{c:function(){return c}});var r=n(43144),i=n(15671),o=n(60136),a=n(29388),u=n(61809),s=n(99340),c=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(e,r){return(0,i.Z)(this,n),t.call(this,e,"mat3",s.P.Pass,(function(t,n,i){return t.setUniformMatrix3fv(e,r(n,i))}))}return(0,r.Z)(n)}(u.x)},76028:function(e,t,n){n.d(t,{K:function(){return c}});var r=n(43144),i=n(15671),o=n(60136),a=n(29388),u=n(61809),s=n(99340),c=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(e,r){return(0,i.Z)(this,n),t.call(this,e,"mat4",s.P.Draw,(function(t,n,i){return t.setUniformMatrix4fv(e,r(n,i))}))}return(0,r.Z)(n)}(u.x)},8654:function(e,t,n){n.d(t,{g:function(){return c}});var r=n(43144),i=n(15671),o=n(60136),a=n(29388),u=n(61809),s=n(99340),c=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(e,r){return(0,i.Z)(this,n),t.call(this,e,"mat4",s.P.Pass,(function(t,n,i){return t.setUniformMatrix4fv(e,r(n,i))}))}return(0,r.Z)(n)}(u.x)},64201:function(e,t,n){n.d(t,{kG:function(){return h}});var r=n(97326),i=n(60136),o=n(29388),a=n(15671),u=n(43144),s=n(10064),c=(n(93169),n(32718)),l=n(99340),f=n(97731),d=function(){function e(){(0,a.Z)(this,e),this._includedModules=new Map}return(0,u.Z)(e,[{key:"include",value:function(e,t){this._includedModules.has(e)?this._includedModules.get(e):(this._includedModules.set(e,t),e(this.builder,t))}}]),e}(),h=function(e){(0,i.Z)(n,e);var t=(0,o.Z)(n);function n(){var e;return(0,a.Z)(this,n),(e=t.apply(this,arguments)).vertex=new p,e.fragment=new p,e.attributes=new g,e.varyings=new _,e.extensions=new y,e.constants=new x,e.outputs=new T,e}return(0,u.Z)(n,[{key:"fragmentUniforms",get:function(){return this.fragment.uniforms.entries}},{key:"builder",get:function(){return this}},{key:"generate",value:function(e){var t=this.extensions.generateSource(e),n=this.attributes.generateSource(e),r=this.varyings.generateSource(e),i="vertex"===e?this.vertex:this.fragment,o=i.uniforms.generateSource(),a=i.code.generateSource(),u="vertex"===e?S:A,s=this.constants.generateSource().concat(i.constants.generateSource()),c=this.outputs.generateSource(e);return"#version 300 es\n".concat(t.join("\n"),"\n\n").concat(u,"\n\n").concat(s.join("\n"),"\n\n").concat(o.join("\n"),"\n\n").concat(n.join("\n"),"\n\n").concat(r.join("\n"),"\n\n").concat(c.join("\n"),"\n\n").concat(a.join("\n"))}},{key:"generateBindPass",value:function(e){var t=new Map;this.vertex.uniforms.entries.forEach((function(e){var n=e.bind[l.P.Pass];n&&t.set(e.name,n)})),this.fragment.uniforms.entries.forEach((function(e){var n=e.bind[l.P.Pass];n&&t.set(e.name,n)}));var n=Array.from(t.values()),r=n.length;return function(t,i){for(var o=0;o<r;++o)n[o](e,t,i)}}},{key:"generateBindDraw",value:function(e){var t=new Map;this.vertex.uniforms.entries.forEach((function(e){var n=e.bind[l.P.Draw];n&&t.set(e.name,n)})),this.fragment.uniforms.entries.forEach((function(e){var n=e.bind[l.P.Draw];n&&t.set(e.name,n)}));var n=Array.from(t.values()),r=n.length;return function(t,i,o){for(var a=0;a<r;++a)n[a](e,t,i,o)}}}]),n}(d),v=function(){function e(t){(0,a.Z)(this,e),this._stage=t,this._entries=new Map}return(0,u.Z)(e,[{key:"add",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0,i=t;r<i.length;r++){var o=i[r];this._add(o)}return this._stage}},{key:"get",value:function(e){return this._entries.get(e)}},{key:"_add",value:function(e){if(null!=e){if(this._entries.has(e.name)&&!this._entries.get(e.name).equals(e))throw new s.Z("Duplicate uniform name ".concat(e.name," for different uniform type"));this._entries.set(e.name,e)}else c.Z.getLogger("esri.views.3d.webgl-engine.core.shaderModules.shaderBuilder").error("Trying to add null Uniform from ".concat((new Error).stack,"."))}},{key:"generateSource",value:function(){return Array.from(this._entries.values()).map((function(e){return null!=e.arraySize?"uniform ".concat(e.type," ").concat(e.name,"[").concat(e.arraySize,"];"):"uniform ".concat(e.type," ").concat(e.name,";")}))}},{key:"entries",get:function(){return Array.from(this._entries.values())}}]),e}(),m=function(){function e(t){(0,a.Z)(this,e),this._stage=t,this._entries=new Array}return(0,u.Z)(e,[{key:"add",value:function(e){return this._entries.push(e),this._stage}},{key:"generateSource",value:function(){return this._entries}}]),e}(),p=function(e){(0,i.Z)(n,e);var t=(0,o.Z)(n);function n(){var e;return(0,a.Z)(this,n),(e=t.apply(this,arguments)).uniforms=new v((0,r.Z)(e)),e.code=new m((0,r.Z)(e)),e.constants=new x,e}return(0,u.Z)(n,[{key:"builder",get:function(){return this}}]),n}(d),g=function(){function e(){(0,a.Z)(this,e),this._entries=new Array}return(0,u.Z)(e,[{key:"add",value:function(e,t){this._entries.push([e,t])}},{key:"generateSource",value:function(e){return"fragment"===e?[]:this._entries.map((function(e){return"in ".concat(e[1]," ").concat(e[0],";")}))}}]),e}(),_=function(){function e(){(0,a.Z)(this,e),this._entries=new Map}return(0,u.Z)(e,[{key:"add",value:function(e,t){this._entries.has(e)&&(0,f.hu)(this._entries.get(e)===t),this._entries.set(e,t)}},{key:"generateSource",value:function(e){var t=new Array;return this._entries.forEach((function(n,r){return t.push("vertex"===e?"out ".concat(n," ").concat(r,";"):"in ".concat(n," ").concat(r,";"))})),t}}]),e}(),y=function(){function e(){(0,a.Z)(this,e),this._entries=new Set}return(0,u.Z)(e,[{key:"add",value:function(e){this._entries.add(e)}},{key:"generateSource",value:function(t){var n="vertex"===t?e.ALLOWLIST_VERTEX:e.ALLOWLIST_FRAGMENT;return Array.from(this._entries).filter((function(e){return n.includes(e)})).map((function(e){return"#extension ".concat(e," : enable")}))}}]),e}();y.ALLOWLIST_FRAGMENT=["GL_EXT_shader_texture_lod","GL_OES_standard_derivatives"],y.ALLOWLIST_VERTEX=[];var T=function(){function e(){(0,a.Z)(this,e),this._entries=new Map}return(0,u.Z)(e,[{key:"add",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=this._entries.get(n);r?(0,f.hu)(r.name===e&&r.type===t,"Fragment shader output location ".concat(n," occupied")):this._entries.set(n,{name:e,type:t})}},{key:"generateSource",value:function(t){if("vertex"===t)return[];0===this._entries.size&&this._entries.set(0,{name:e.DEFAULT_NAME,type:e.DEFAULT_TYPE});var n=new Array;return this._entries.forEach((function(e,t){return n.push("layout(location = ".concat(t,") out ").concat(e.type," ").concat(e.name,";"))})),n}}]),e}();T.DEFAULT_TYPE="vec4",T.DEFAULT_NAME="fragColor";var x=function(){function e(){(0,a.Z)(this,e),this._entries=new Set}return(0,u.Z)(e,[{key:"add",value:function(t,n,r){var i="ERROR_CONSTRUCTOR_STRING";switch(n){case"float":i=e._numberToFloatStr(r);break;case"int":i=e._numberToIntStr(r);break;case"bool":i=r.toString();break;case"vec2":i="vec2(".concat(e._numberToFloatStr(r[0]),",                            ").concat(e._numberToFloatStr(r[1]),")");break;case"vec3":i="vec3(".concat(e._numberToFloatStr(r[0]),",                            ").concat(e._numberToFloatStr(r[1]),",                            ").concat(e._numberToFloatStr(r[2]),")");break;case"vec4":i="vec4(".concat(e._numberToFloatStr(r[0]),",                            ").concat(e._numberToFloatStr(r[1]),",                            ").concat(e._numberToFloatStr(r[2]),",                            ").concat(e._numberToFloatStr(r[3]),")");break;case"ivec2":i="ivec2(".concat(e._numberToIntStr(r[0]),",                             ").concat(e._numberToIntStr(r[1]),")");break;case"ivec3":i="ivec3(".concat(e._numberToIntStr(r[0]),",                             ").concat(e._numberToIntStr(r[1]),",                             ").concat(e._numberToIntStr(r[2]),")");break;case"ivec4":i="ivec4(".concat(e._numberToIntStr(r[0]),",                             ").concat(e._numberToIntStr(r[1]),",                             ").concat(e._numberToIntStr(r[2]),",                             ").concat(e._numberToIntStr(r[3]),")");break;case"mat2":case"mat3":case"mat4":i="".concat(n,"(").concat(Array.prototype.map.call(r,(function(t){return e._numberToFloatStr(t)})).join(", "),")")}return this._entries.add("const ".concat(n," ").concat(t," = ").concat(i,";")),this}},{key:"generateSource",value:function(){return Array.from(this._entries)}}],[{key:"_numberToIntStr",value:function(e){return e.toFixed(0)}},{key:"_numberToFloatStr",value:function(e){return Number.isInteger(e)?e.toFixed(1):e.toString()}}]),e}(),A="#ifdef GL_FRAGMENT_PRECISION_HIGH\n  precision highp float;\n  precision highp sampler2D;\n#else\n  precision mediump float;\n  precision mediump sampler2D;\n#endif",S="precision highp float;\nprecision highp sampler2D;"},78050:function(e,t,n){n.d(t,{R:function(){return c}});var r=n(43144),i=n(15671),o=n(60136),a=n(29388),u=n(61809),s=n(99340),c=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(e,r){return(0,i.Z)(this,n),t.call(this,e,"sampler2D",s.P.Draw,(function(t,n,i){return t.bindTexture(e,r(n,i))}))}return(0,r.Z)(n)}(u.x)},19253:function(e,t,n){n.d(t,{A:function(){return c}});var r=n(43144),i=n(15671),o=n(60136),a=n(29388),u=n(61809),s=n(99340),c=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(e,r){return(0,i.Z)(this,n),t.call(this,e,"sampler2D",s.P.Pass,(function(t,n,i){return t.bindTexture(e,r(n,i))}))}return(0,r.Z)(n)}(u.x)},61809:function(e,t,n){n.d(t,{x:function(){return u}});var r=n(4942),i=n(15671),o=n(43144),a=n(99340),u=function(){function e(t,n,o,u){var s,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if((0,i.Z)(this,e),this.name=t,this.type=n,this.arraySize=c,this.bind=(s={},(0,r.Z)(s,a.P.Pass,null),(0,r.Z)(s,a.P.Draw,null),s),u)switch(o){case a.P.Pass:this.bind[a.P.Pass]=u;break;case a.P.Draw:this.bind[a.P.Draw]=u}}return(0,o.Z)(e,[{key:"equals",value:function(e){return this.type===e.type&&this.name===e.name&&this.arraySize===e.arraySize}}]),e}()},99340:function(e,t,n){var r;n.d(t,{P:function(){return r}}),function(e){e[e.Pass=0]="Pass",e[e.Draw=1]="Draw"}(r||(r={}))},82144:function(e,t,n){n.d(t,{J:function(){return u}});var r=n(74165),i=n(15861),o=n(15671),a=n(43144),u=function(){function e(t,n){(0,o.Z)(this,e),this._module=t,this._loadModule=n}return(0,a.Z)(e,[{key:"get",value:function(){return this._module}},{key:"reload",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._loadModule();case 2:return this._module=e.sent,e.abrupt("return",this._module);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}()},31132:function(e,t,n){n.d(t,{A:function(){return u}});var r=n(15671),i=n(43144),o=n(92026),a=n(8548),u=function(){function e(t,n,i){(0,r.Z)(this,e),this.release=i,this.initializeConfiguration(t,n),this._configuration=n.snapshot(),this._program=this.initializeProgram(t),this._pipeline=this.initializePipeline(t)}return(0,i.Z)(e,[{key:"destroy",value:function(){this._program=(0,o.M2)(this._program),this._pipeline=this._configuration=null}},{key:"reload",value:function(e){(0,o.M2)(this._program),this._program=this.initializeProgram(e),this._pipeline=this.initializePipeline(e)}},{key:"program",get:function(){return this._program}},{key:"compiled",get:function(){return this.program.compiled}},{key:"key",get:function(){return this._configuration.key}},{key:"configuration",get:function(){return this._configuration}},{key:"ensureAttributeLocations",value:function(e){this.program.assertCompatibleVertexAttributeLocations(e)}},{key:"primitiveType",get:function(){return a.MX.TRIANGLES}},{key:"getPipeline",value:function(e,t,n){return this._pipeline}},{key:"initializeConfiguration",value:function(e,t){}}]),e}()},33559:function(e,t,n){n.d(t,{m:function(){return s},o:function(){return c}});var r=n(37762),i=n(15671),o=n(43144),a=n(60136),u=n(29388),s=function(e){(0,a.Z)(n,e);var t=(0,u.Z)(n);function n(){var e;return(0,i.Z)(this,n),(e=t.call(this))._key="",e._keyDirty=!1,e._parameterBits=e._parameterBits?e._parameterBits.map((function(){return 0})):[],e._parameterNames||(e._parameterNames=[]),e}return(0,o.Z)(n,[{key:"key",get:function(){return this._keyDirty&&(this._keyDirty=!1,this._key=String.fromCharCode.apply(String,this._parameterBits)),this._key}},{key:"snapshot",value:function(){var e,t=this._parameterNames,n={key:this.key},i=(0,r.Z)(t);try{for(i.s();!(e=i.n()).done;){var o=e.value;n[o]=this[o]}}catch(a){i.e(a)}finally{i.f()}return n}}]),n}(n(98634).K);function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,n){var r;if(t._parameterNames=null!==(r=t._parameterNames)&&void 0!==r?r:[],t._parameterNames.push(n),null!=e.constValue)Object.defineProperty(t,n,{get:function(){return e.constValue}});else{for(var i,o=t._parameterNames.length-1,a=e.count||2,u=Math.ceil(Math.log2(a)),s=null!==(i=t._parameterBits)&&void 0!==i?i:[0],c=0;s[c]+u>16;)++c>=s.length&&s.push(0);t._parameterBits=s;var l=s[c],f=(1<<u)-1<<l;s[c]+=u,Object.defineProperty(t,n,{get:function(){return this[o]},set:function(e){if(this[o]!==e&&(this[o]=e,this._keyDirty=!0,this._parameterBits[c]=this._parameterBits[c]&~f|+e<<l&f,"number"!=typeof e&&"boolean"!=typeof e))throw new Error("Configuration value for "+n+" must be boolean or number, got "+typeof e)}})}}}},74713:function(e,t,n){n.d(t,{fX:function(){return A},pk:function(){return b},$u:function(){return g},_h:function(){return _},$8:function(){return m}});var r,i,o=n(74165),a=n(29439),u=n(15861),s=n(65905);function c(){var e;return null!==(e=r)&&void 0!==e||(r=(0,u.Z)((0,o.Z)().mark((function e(){var t,r;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(61562).then(n.bind(n,61562));case 2:return t=e.sent,e.next=5,t.default({locateFile:function(e){return(0,s.V)("esri/libs/basisu/".concat(e))}});case 5:return r=e.sent,e.abrupt("return",(r.initializeBasis(),r));case 7:case"end":return e.stop()}}),e)})))()),r}!function(e){e[e.ETC1_RGB=0]="ETC1_RGB",e[e.ETC2_RGBA=1]="ETC2_RGBA",e[e.BC1_RGB=2]="BC1_RGB",e[e.BC3_RGBA=3]="BC3_RGBA",e[e.BC4_R=4]="BC4_R",e[e.BC5_RG=5]="BC5_RG",e[e.BC7_M6_RGB=6]="BC7_M6_RGB",e[e.BC7_M5_RGBA=7]="BC7_M5_RGBA",e[e.PVRTC1_4_RGB=8]="PVRTC1_4_RGB",e[e.PVRTC1_4_RGBA=9]="PVRTC1_4_RGBA",e[e.ASTC_4x4_RGBA=10]="ASTC_4x4_RGBA",e[e.ATC_RGB=11]="ATC_RGB",e[e.ATC_RGBA=12]="ATC_RGBA",e[e.FXT1_RGB=17]="FXT1_RGB",e[e.PVRTC2_4_RGB=18]="PVRTC2_4_RGB",e[e.PVRTC2_4_RGBA=19]="PVRTC2_4_RGBA",e[e.ETC2_EAC_R11=20]="ETC2_EAC_R11",e[e.ETC2_EAC_RG11=21]="ETC2_EAC_RG11",e[e.RGBA32=13]="RGBA32",e[e.RGB565=14]="RGB565",e[e.BGR565=15]="BGR565",e[e.RGBA4444=16]="RGBA4444"}(i||(i={}));var l=n(8548),f=n(57808),d=n(3384),h=null,v=null;function m(){return p.apply(this,arguments)}function p(){return(p=(0,u.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=null==v,!e.t0){e.next=6;break}return v=c(),e.next=5,v;case 5:h=e.sent;case 6:return e.abrupt("return",v);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e,t){if(null==h)return e.byteLength;var n=new h.BasisFile(new Uint8Array(e)),r=T(n)?y(n.getNumLevels(0),n.getHasAlpha(),n.getImageWidth(0,0),n.getImageHeight(0,0),t):0;return n.close(),n.delete(),r}function _(e,t){if(null==h)return e.byteLength;var n=new h.KTX2File(new Uint8Array(e)),r=x(n)?y(n.getLevels(),n.getHasAlpha(),n.getWidth(),n.getHeight(),t):0;return n.close(),n.delete(),r}function y(e,t,n,r,i){var o=(0,d.RG)(t?l.q_.COMPRESSED_RGBA8_ETC2_EAC:l.q_.COMPRESSED_RGB8_ETC2),a=i&&e>1?(Math.pow(4,e)-1)/(3*Math.pow(4,e-1)):1;return Math.ceil(n*r*o*a)}function T(e){return e.getNumImages()>=1&&!e.isUASTC()}function x(e){return e.getFaces()>=1&&e.isETC1S()}function A(e,t,n){return S.apply(this,arguments)}function S(){return S=(0,u.Z)((0,o.Z)().mark((function e(t,n,r){var i,a;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=null==h,!e.t0){e.next=5;break}return e.next=4,m();case 4:h=e.sent;case 5:if(T(i=new h.BasisFile(new Uint8Array(r)))){e.next=8;break}return e.abrupt("return",null);case 8:return i.startTranscoding(),a=E(t,n,i.getNumLevels(0),i.getHasAlpha(),i.getImageWidth(0,0),i.getImageHeight(0,0),(function(e,t){return i.getImageTranscodedSizeInBytes(0,e,t)}),(function(e,t,n){return i.transcodeImage(n,0,e,t,0,0)})),e.abrupt("return",(i.close(),i.delete(),a));case 11:case"end":return e.stop()}}),e)}))),S.apply(this,arguments)}function b(e,t,n){return w.apply(this,arguments)}function w(){return w=(0,u.Z)((0,o.Z)().mark((function e(t,n,r){var i,a;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=null==h,!e.t0){e.next=5;break}return e.next=4,m();case 4:h=e.sent;case 5:if(x(i=new h.KTX2File(new Uint8Array(r)))){e.next=8;break}return e.abrupt("return",null);case 8:return i.startTranscoding(),a=E(t,n,i.getLevels(),i.getHasAlpha(),i.getWidth(),i.getHeight(),(function(e,t){return i.getImageTranscodedSizeInBytes(e,0,0,t)}),(function(e,t,n){return i.transcodeImage(n,e,0,0,t,0,-1,-1)})),e.abrupt("return",(i.close(),i.delete(),a));case 11:case"end":return e.stop()}}),e)}))),w.apply(this,arguments)}function E(e,t,n,r,o,u,s,c){for(var d=e.capabilities,h=d.compressedTextureETC,v=d.compressedTextureS3TC,m=h?r?[i.ETC2_RGBA,l.q_.COMPRESSED_RGBA8_ETC2_EAC]:[i.ETC1_RGB,l.q_.COMPRESSED_RGB8_ETC2]:v?r?[i.BC3_RGBA,l.q_.COMPRESSED_RGBA_S3TC_DXT5_EXT]:[i.BC1_RGB,l.q_.COMPRESSED_RGB_S3TC_DXT1_EXT]:[i.RGBA32,l.VI.RGBA],p=(0,a.Z)(m,2),g=p[0],_=p[1],y=t.hasMipmap?n:Math.min(1,n),T=[],x=0;x<y;x++)T.push(new Uint8Array(s(x,g))),c(x,g,T[x]);return t.internalFormat=_,t.hasMipmap=T.length>1,t.samplingMode=t.hasMipmap?l.cw.LINEAR_MIPMAP_LINEAR:l.cw.LINEAR,t.width=o,t.height=u,new f.x(e,t,{type:"compressed",levels:T})}},47180:function(e,t,n){n.d(t,{j:function(){return c}});var r=n(15671),i=n(43144),o=n(27546),a=n(32035),u=n(12400),s=n(97731),c=function(){function e(t,n,i){(0,r.Z)(this,e),this.primitiveIndices=t,this._numIndexPerPrimitive=n,this.position=i,this._children=void 0,(0,s.hu)(t.length>=1),(0,s.hu)(3===i.size||4===i.size);var o=i.data,c=i.size,f=i.indices;(0,s.hu)(f.length%this._numIndexPerPrimitive==0),(0,s.hu)(f.length>=t.length*this._numIndexPerPrimitive);var d=t.length,h=c*f[this._numIndexPerPrimitive*t[0]];l.clear(),l.push(h);for(var v=(0,u.al)(o[h],o[h+1],o[h+2]),m=(0,u.d9)(v),p=0;p<d;++p)for(var g=this._numIndexPerPrimitive*t[p],_=0;_<this._numIndexPerPrimitive;++_){h=c*f[g+_],l.push(h);var y=o[h];v[0]=Math.min(y,v[0]),m[0]=Math.max(y,m[0]),y=o[h+1],v[1]=Math.min(y,v[1]),m[1]=Math.max(y,m[1]),y=o[h+2],v[2]=Math.min(y,v[2]),m[2]=Math.max(y,m[2])}this.bbMin=v,this.bbMax=m;var T=(0,a.o)((0,u.Ue)(),this.bbMin,this.bbMax,.5);this.radius=.5*Math.max(Math.max(m[0]-v[0],m[1]-v[1]),m[2]-v[2]);for(var x=this.radius*this.radius,A=0;A<l.length;++A){var S=o[h=l.at(A)]-T[0],b=o[h+1]-T[1],w=o[h+2]-T[2],E=S*S+b*b+w*w;if(!(E<=x)){var R=Math.sqrt(E),I=.5*(R-this.radius);this.radius=this.radius+I,x=this.radius*this.radius;var Z=I/R;T[0]+=S*Z,T[1]+=b*Z,T[2]+=w*Z}}this.center=T,l.clear()}return(0,i.Z)(e,[{key:"getChildren",value:function(){if(this._children||(0,a.a)(this.bbMin,this.bbMax)<=1)return this._children;for(var t=(0,a.o)((0,u.Ue)(),this.bbMin,this.bbMax,.5),n=this.primitiveIndices.length,r=new Uint8Array(n),i=new Array(8),o=0;o<8;++o)i[o]=0;for(var s=this.position,c=s.data,l=s.size,f=s.indices,d=0;d<n;++d){for(var h=0,v=this._numIndexPerPrimitive*this.primitiveIndices[d],m=l*f[v],p=c[m],g=c[m+1],_=c[m+2],y=1;y<this._numIndexPerPrimitive;++y){var T=c[m=l*f[v+y]],x=c[m+1],A=c[m+2];T<p&&(p=T),x<g&&(g=x),A<_&&(_=A)}p<t[0]&&(h|=1),g<t[1]&&(h|=2),_<t[2]&&(h|=4),r[d]=h,++i[h]}for(var S=0,b=0;b<8;++b)i[b]>0&&++S;if(!(S<2)){for(var w=new Array(8),E=0;E<8;++E)w[E]=i[E]>0?new Uint32Array(i[E]):void 0;for(var R=0;R<8;++R)i[R]=0;for(var I=0;I<n;++I){var Z=r[I];w[Z][i[Z]++]=this.primitiveIndices[I]}this._children=new Array;for(var P=0;P<8;++P)void 0!==w[P]&&this._children.push(new e(w[P],this._numIndexPerPrimitive,this.position));return this._children}}}],[{key:"prune",value:function(){l.prune()}}]),e}(),l=new o.Z({deallocator:null})},23620:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(15671),i=n(43144),o=n(68401),a=function(){function e(t){(0,r.Z)(this,e),this._material=t.material,this._techniques=t.techniques,this._output=t.output}return(0,i.Z)(e,[{key:"dispose",value:function(){this._techniques.release(this._technique)}},{key:"technique",get:function(){return this._technique}},{key:"_stippleTextures",get:function(){return this._techniques.constructionContext.stippleTextures}},{key:"_markerTextures",get:function(){return this._techniques.constructionContext.markerTextures}},{key:"ensureTechnique",value:function(e,t){return this._technique=this._techniques.releaseAndAcquire(e,this._material.getConfiguration(this._output,t),this._technique),this._technique}},{key:"ensureResources",value:function(e){return o.Rw.LOADED}}]),e}()},17363:function(e,t,n){n.d(t,{E:function(){return d},F:function(){return f}});var r=n(15671),i=n(43144),o=n(60136),a=n(29388),u=n(92026),s=n(66978),c=n(98634),l=n(68401),f=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(e){var i;return(0,r.Z)(this,n),(i=t.call(this,e))._numLoading=0,i._disposed=!1,i._textures=e.textures,i._textureId=e.textureId,i._acquire(e.textureId,(function(e){return i._texture=e})),i._acquire(e.normalTextureId,(function(e){return i._textureNormal=e})),i._acquire(e.emissiveTextureId,(function(e){return i._textureEmissive=e})),i._acquire(e.occlusionTextureId,(function(e){return i._textureOcclusion=e})),i._acquire(e.metallicRoughnessTextureId,(function(e){return i._textureMetallicRoughness=e})),i}return(0,i.Z)(n,[{key:"dispose",value:function(){this._texture=(0,u.RY)(this._texture),this._textureNormal=(0,u.RY)(this._textureNormal),this._textureEmissive=(0,u.RY)(this._textureEmissive),this._textureOcclusion=(0,u.RY)(this._textureOcclusion),this._textureMetallicRoughness=(0,u.RY)(this._textureMetallicRoughness),this._disposed=!0}},{key:"ensureResources",value:function(e){return 0===this._numLoading?l.Rw.LOADED:l.Rw.LOADING}},{key:"textureBindParameters",get:function(){return new d(null!=this._texture?this._texture.glTexture:null,null!=this._textureNormal?this._textureNormal.glTexture:null,null!=this._textureEmissive?this._textureEmissive.glTexture:null,null!=this._textureOcclusion?this._textureOcclusion.glTexture:null,null!=this._textureMetallicRoughness?this._textureMetallicRoughness.glTexture:null)}},{key:"updateTexture",value:function(e){var t=this;null!=this._texture&&e===this._texture.id||(this._texture=(0,u.RY)(this._texture),this._textureId=e,this._acquire(this._textureId,(function(e){return t._texture=e})))}},{key:"_acquire",value:function(e,t){var n=this;if(null!=e){var r=this._textures.acquire(e);if((0,s.y8)(r))return++this._numLoading,void r.then((function(e){if(n._disposed)return(0,u.RY)(e),void t(null);t(e)})).finally((function(){return--n._numLoading}));t(r)}else t(null)}}]),n}(n(23620).Z),d=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,c=arguments.length>5?arguments[5]:void 0,l=arguments.length>6?arguments[6]:void 0;return(0,r.Z)(this,n),(e=t.call(this)).texture=i,e.textureNormal=o,e.textureEmissive=a,e.textureOcclusion=u,e.textureMetallicRoughness=s,e.scale=c,e.normalTextureTransformMatrix=l,e}return(0,i.Z)(n)}(c.K)},40779:function(e,t,n){n.d(t,{Z:function(){return Z}});var r=n(1413),i=n(29439),o=n(37762),a=n(15671),u=n(43144),s=n(60136),c=n(29388),l=n(7025),f=n(32035),d=n(39406),h=n(18722);function v(e){if(e.length<h.c8)return Array.from(e);if((0,h.kJ)(e))return Float64Array.from(e);if(!("BYTES_PER_ELEMENT"in e))return Array.from(e);switch(e.BYTES_PER_ELEMENT){case 1:return Uint8Array.from(e);case 2:return(0,h.Uc)(e)?Uint16Array.from(e):Int16Array.from(e);case 4:return Float32Array.from(e);default:return Float64Array.from(e)}}var m=n(68401),p=n(47180),g=n(1395),_=n(79100),y=n(12400),T=n(74702);var x=(0,y.Ue)(),A=(0,y.Ue)(),S=(0,y.Ue)(),b=(0,y.Ue)(),w=n(47669),E=n(97731),R=n(4760),I=n(32683),Z=function(e){(0,s.Z)(n,e);var t=(0,c.Z)(n);function n(e,u){var s,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:_.U.Mesh,f=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,h=arguments.length>5&&void 0!==arguments[5]?arguments[5]:-1;(0,a.Z)(this,n),(s=t.call(this)).material=e,s.mapPositions=c,s.type=l,s.objectAndLayerIdColor=f,s.edgeIndicesLength=h,s.visible=!0,s._attributes=new Map,s._boundingInfo=null;var v,m=(0,o.Z)(u);try{for(m.s();!(v=m.n()).done;){var p=(0,i.Z)(v.value,2),g=p[0],y=p[1];s._attributes.set(g,(0,r.Z)((0,r.Z)({},y),{},{indices:(0,d.mi)(y.indices)})),g===R.T.POSITION&&(s.edgeIndicesLength=s.edgeIndicesLength<0?s._attributes.get(g).indices.length:s.edgeIndicesLength)}}catch(T){m.e(T)}finally{m.f()}return s}return(0,u.Z)(n,[{key:"instantiate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new n(e.material||this.material,[],this.mapPositions,this.type,this.objectAndLayerIdColor,this.edgeIndicesLength);return this._attributes.forEach((function(e,n){e.exclusive=!1,t._attributes.set(n,e)})),t._boundingInfo=this._boundingInfo,t.transformation=e.transformation||this.transformation,t}},{key:"attributes",get:function(){return this._attributes}},{key:"getMutableAttribute",value:function(e){var t=this._attributes.get(e);return t&&!t.exclusive&&(t=(0,r.Z)((0,r.Z)({},t),{},{exclusive:!0,data:v(t.data)}),this._attributes.set(e,t)),t}},{key:"setAttributeData",value:function(e,t){var n=this._attributes.get(e);n&&this._attributes.set(e,(0,r.Z)((0,r.Z)({},n),{},{exclusive:!0,data:t}))}},{key:"indexCount",get:function(){var e,t=this._attributes.values().next().value.indices;return null!==(e=null===t||void 0===t?void 0:t.length)&&void 0!==e?e:0}},{key:"faceCount",get:function(){return this.indexCount/3}},{key:"boundingInfo",get:function(){return null==this._boundingInfo&&(this._boundingInfo=this._calculateBoundingInfo()),this._boundingInfo}},{key:"computeAttachmentOrigin",value:function(e){return!!(this.type===_.U.Mesh?this._computeAttachmentOriginTriangles(e):this.type===_.U.Line?this._computeAttachmentOriginLines(e):this._computeAttachmentOriginPoints(e))&&(null!=this._transformation&&(0,f.h)(e,e,this._transformation),!0)}},{key:"_computeAttachmentOriginTriangles",value:function(e){return function(e,t){if(!e)return!1;var n=e.size,r=e.data,i=e.indices;(0,f.s)(t,0,0,0),(0,f.s)(b,0,0,0);for(var o=0,a=0,u=0;u<i.length-2;u+=3){var s=i[u]*n,c=i[u+1]*n,l=i[u+2]*n;(0,f.s)(x,r[s],r[s+1],r[s+2]),(0,f.s)(A,r[c],r[c+1],r[c+2]),(0,f.s)(S,r[l],r[l+1],r[l+2]);var d=(0,T.bE)(x,A,S);d?((0,f.g)(x,x,A),(0,f.g)(x,x,S),(0,f.j)(x,x,1/3*d),(0,f.g)(t,t,x),o+=d):((0,f.g)(b,b,x),(0,f.g)(b,b,A),(0,f.g)(b,b,S),a+=3)}return(0!==a||0!==o)&&(0!==o?((0,f.j)(t,t,1/o),!0):0!==a&&((0,f.j)(t,b,1/a),!0))}(this.attributes.get(R.T.POSITION),e)}},{key:"_computeAttachmentOriginLines",value:function(e){var t=this.attributes.get(R.T.POSITION);return function(e,t,n){if(!e)return!1;(0,f.s)(n,0,0,0),(0,f.s)(b,0,0,0);for(var r=0,i=0,o=e.size,a=e.data,u=e.indices,s=u.length-1,c=s+(t?2:0),l=0;l<c;l+=2){var d=l<s?l+1:0,h=u[l<s?l:s]*o,v=u[d]*o;x[0]=a[h],x[1]=a[h+1],x[2]=a[h+2],A[0]=a[v],A[1]=a[v+1],A[2]=a[v+2],(0,f.j)(x,(0,f.g)(x,x,A),.5);var m=(0,f.F)(x,A);m>0?((0,f.g)(n,n,(0,f.j)(x,x,m)),r+=m):0===r&&((0,f.g)(b,b,x),i++)}return 0!==r?((0,f.j)(n,n,1/r),!0):0!==i&&((0,f.j)(n,b,1/i),!0)}(t,function(e,t){return!(!("isClosed"in e)||!e.isClosed)&&t.indices.length>2}(this.material.parameters,t),e)}},{key:"_computeAttachmentOriginPoints",value:function(e){return function(e,t){if(!e)return!1;var n=e.size,r=e.data,i=e.indices;(0,f.s)(t,0,0,0);for(var o=-1,a=0,u=0;u<i.length;u++){var s=i[u]*n;o!==s&&(t[0]+=r[s],t[1]+=r[s+1],t[2]+=r[s+2],a++),o=s}return a>1&&(0,f.j)(t,t,1/a),a>0}(this.attributes.get(R.T.POSITION),e)}},{key:"invalidateBoundingInfo",value:function(){this._boundingInfo=null}},{key:"_calculateBoundingInfo",value:function(){var e=this.attributes.get(R.T.POSITION);if(!e||0===e.indices.length)return null;var t=this.type===_.U.Mesh?3:1;(0,E.hu)(e.indices.length%t==0,"Indexing error: "+e.indices.length+" not divisible by "+t);var n=(0,d.KF)(e.indices.length/t);return new p.j(n,t,e)}},{key:"transformation",get:function(){var e;return null!==(e=this._transformation)&&void 0!==e?e:l.Wd},set:function(e){this._transformation=e&&e!==l.Wd?(0,l.d9)(e):null}},{key:"addHighlight",value:function(){var e=new w.O(m.V_.Highlight);return this.highlights=(0,I.lr)(this.highlights,e),e}},{key:"removeHighlight",value:function(e){this.highlights=(0,I.U_)(this.highlights,e)}}]),n}(g.c)},47669:function(e,t,n){n.d(t,{O:function(){return a}});var r=n(43144),i=n(15671),o=n(95439),a=(0,r.Z)((function e(t){(0,i.Z)(this,e),this.channel=t,this.id=(0,o.D)()}))},78041:function(e,t,n){n.d(t,{Bh:function(){return h},E0:function(){return f},K5:function(){return c},V7:function(){return v},j7:function(){return s},je:function(){return d},ve:function(){return l},wu:function(){return a}});var r=n(25920),i=n(8548),o=n(36207),a=(0,o.wK)(i.zi.SRC_ALPHA,i.zi.ONE,i.zi.ONE_MINUS_SRC_ALPHA,i.zi.ONE_MINUS_SRC_ALPHA),u=(0,o.wK)(i.zi.ONE,i.zi.ZERO,i.zi.ONE,i.zi.ONE_MINUS_SRC_ALPHA);function s(e){return e===r.A.FrontFace?null:u}function c(e){return e===r.A.FrontFace?o.LZ:null}var l=5e5,f={factor:-1,units:-2};function d(e){return e?f:null}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.wb.LESS;return e===r.A.NONE||e===r.A.FrontFace?t:i.wb.LEQUAL}function v(e){return e===r.A.ColorAlpha?{buffers:[i.VY.COLOR_ATTACHMENT0,i.VY.COLOR_ATTACHMENT1]}:null}},27627:function(e,t,n){n.d(t,{$:function(){return u}});var r=n(15671),i=n(43144),o=n(27546),a=n(37825),u=function(){function e(t,n,i){(0,r.Z)(this,e),this._context=t,this._locations=i,this._textures=new Map,this._freeTextureUnits=new o.Z({deallocator:null}),this._glProgram=t.programCache.acquire(n.generate("vertex"),n.generate("fragment"),i),this._glProgram.stop=function(){throw new Error("Wrapped _glProgram used directly")},this.bindPass=n.generateBindPass(this),this.bindDraw=n.generateBindDraw(this),this._fragmentUniforms=(0,a.hZ)()?n.fragmentUniforms:null}return(0,i.Z)(e,[{key:"dispose",value:function(){this._glProgram.dispose()}},{key:"glName",get:function(){return this._glProgram.glName}},{key:"hasTransformFeedbackVaryings",get:function(){return this._glProgram.hasTransformFeedbackVaryings}},{key:"compiled",get:function(){return this._glProgram.compiled}},{key:"setUniform1b",value:function(e,t){this._glProgram.setUniform1i(e,t?1:0)}},{key:"setUniform1i",value:function(e,t){this._glProgram.setUniform1i(e,t)}},{key:"setUniform1f",value:function(e,t){this._glProgram.setUniform1f(e,t)}},{key:"setUniform2fv",value:function(e,t){this._glProgram.setUniform2fv(e,t)}},{key:"setUniform3fv",value:function(e,t){this._glProgram.setUniform3fv(e,t)}},{key:"setUniform4fv",value:function(e,t){this._glProgram.setUniform4fv(e,t)}},{key:"setUniformMatrix3fv",value:function(e,t){this._glProgram.setUniformMatrix3fv(e,t)}},{key:"setUniformMatrix4fv",value:function(e,t){this._glProgram.setUniformMatrix4fv(e,t)}},{key:"setUniform1fv",value:function(e,t){this._glProgram.setUniform1fv(e,t)}},{key:"setUniform1iv",value:function(e,t){this._glProgram.setUniform1iv(e,t)}},{key:"setUniform2iv",value:function(e,t){this._glProgram.setUniform3iv(e,t)}},{key:"setUniform3iv",value:function(e,t){this._glProgram.setUniform3iv(e,t)}},{key:"setUniform4iv",value:function(e,t){this._glProgram.setUniform4iv(e,t)}},{key:"assertCompatibleVertexAttributeLocations",value:function(e){e.locations!==this._locations&&console.error("VertexAttributeLocations are incompatible")}},{key:"stop",value:function(){this._textures.clear(),this._freeTextureUnits.clear()}},{key:"bindTexture",value:function(e,t){if(null==(null===t||void 0===t?void 0:t.glName)){var n=this._textures.get(e);return n&&(this._context.bindTexture(null,n.unit),this._freeTextureUnit(n),this._textures.delete(e)),null}var r=this._textures.get(e);return null==r?(r=this._allocTextureUnit(t),this._textures.set(e,r)):r.texture=t,this._context.useProgram(this),this.setUniform1i(e,r.unit),this._context.bindTexture(t,r.unit),r.unit}},{key:"rebindTextures",value:function(){var e,t=this;this._context.useProgram(this),this._textures.forEach((function(e,n){t._context.bindTexture(e.texture,e.unit),t.setUniform1i(n,e.unit)})),null===(e=this._fragmentUniforms)||void 0===e||e.forEach((function(e){"sampler2D"!==e.type&&"samplerCube"!==e.type||t._textures.has(e.name)||console.error("Texture sampler ".concat(e.name," has no bound texture"))}))}},{key:"_allocTextureUnit",value:function(e){return{texture:e,unit:0===this._freeTextureUnits.length?this._textures.size:this._freeTextureUnits.pop()}}},{key:"_freeTextureUnit",value:function(e){this._freeTextureUnits.push(e.unit)}}]),e}()},93822:function(e,t,n){var r;n.d(t,{r:function(){return r}}),function(e){e[e.INTEGRATED_MESH=0]="INTEGRATED_MESH",e[e.OPAQUE_TERRAIN=1]="OPAQUE_TERRAIN",e[e.OPAQUE_MATERIAL=2]="OPAQUE_MATERIAL",e[e.OPAQUE_NO_SSAO_DEPTH=3]="OPAQUE_NO_SSAO_DEPTH",e[e.TRANSPARENT_MATERIAL=4]="TRANSPARENT_MATERIAL",e[e.TRANSPARENT_NO_SSAO_DEPTH=5]="TRANSPARENT_NO_SSAO_DEPTH",e[e.TRANSPARENT_TERRAIN=6]="TRANSPARENT_TERRAIN",e[e.TRANSPARENT_DEPTH_WRITE_DISABLED_MATERIAL=7]="TRANSPARENT_DEPTH_WRITE_DISABLED_MATERIAL",e[e.OCCLUDED_TERRAIN=8]="OCCLUDED_TERRAIN",e[e.OCCLUDER_MATERIAL=9]="OCCLUDER_MATERIAL",e[e.TRANSPARENT_OCCLUDER_MATERIAL=10]="TRANSPARENT_OCCLUDER_MATERIAL",e[e.OCCLUSION_PIXELS=11]="OCCLUSION_PIXELS",e[e.OPAQUE_ENVIRONMENT=12]="OPAQUE_ENVIRONMENT",e[e.TRANSPARENT_ENVIRONMENT=13]="TRANSPARENT_ENVIRONMENT",e[e.LASERLINES=14]="LASERLINES",e[e.LASERLINES_CONTRAST_CONTROL=15]="LASERLINES_CONTRAST_CONTROL",e[e.HUD_MATERIAL=16]="HUD_MATERIAL",e[e.LABEL_MATERIAL=17]="LABEL_MATERIAL",e[e.LINE_CALLOUTS=18]="LINE_CALLOUTS",e[e.LINE_CALLOUTS_HUD_DEPTH=19]="LINE_CALLOUTS_HUD_DEPTH",e[e.DRAPED_MATERIAL=20]="DRAPED_MATERIAL",e[e.DRAPED_WATER=21]="DRAPED_WATER",e[e.VIEWSHED=22]="VIEWSHED",e[e.VOXEL=23]="VOXEL",e[e.MAX_SLOTS=24]="MAX_SLOTS"}(r||(r={}))},50411:function(e,t,n){n.d(t,{JN:function(){return o},P7:function(){return s},RY:function(){return f},YD:function(){return v},eD:function(){return d},ec:function(){return l},iV:function(){return c},ii:function(){return h},s3:function(){return u},zV:function(){return a}});var r=n(68401),i=n(8548),o={func:i.wb.LESS},a={func:i.wb.ALWAYS},u={mask:255},s={mask:0},c=function(e){return{function:{func:i.wb.NOTEQUAL,ref:e,mask:e},operation:{fail:i.xS.KEEP,zFail:i.xS.KEEP,zPass:i.xS.KEEP}}},l=function(e){return{function:{func:i.wb.ALWAYS,ref:e,mask:e},operation:{fail:i.xS.KEEP,zFail:i.xS.KEEP,zPass:i.xS.REPLACE}}},f={function:{func:i.wb.ALWAYS,ref:r.hU.OutlineVisualElementMask,mask:r.hU.OutlineVisualElementMask},operation:{fail:i.xS.KEEP,zFail:i.xS.KEEP,zPass:i.xS.ZERO}},d={function:{func:i.wb.ALWAYS,ref:r.hU.OutlineVisualElementMask,mask:r.hU.OutlineVisualElementMask},operation:{fail:i.xS.KEEP,zFail:i.xS.KEEP,zPass:i.xS.REPLACE}},h={function:{func:i.wb.EQUAL,ref:r.hU.OutlineVisualElementMask,mask:r.hU.OutlineVisualElementMask},operation:{fail:i.xS.KEEP,zFail:i.xS.KEEP,zPass:i.xS.KEEP}},v={function:{func:i.wb.NOTEQUAL,ref:r.hU.OutlineVisualElementMask,mask:r.hU.OutlineVisualElementMask},operation:{fail:i.xS.KEEP,zFail:i.xS.KEEP,zPass:i.xS.KEEP}}},1487:function(e,t,n){n.d(t,{x:function(){return L}});var r=n(74165),i=n(15861),o=n(1413),a=n(15671),u=n(43144),s=n(60136),c=n(29388),l=(n(93169),n(10064)),f=n(91505),d=n(92026),h=n(66978),v=n(18722),m=n(35995),p=n(38330),g=n(5640),_=n(68401),y=n(74713),T=n(1395),x=n(79100),A=n(32718),S=n(8548),b=n(57808),w=function(){return A.Z.getLogger("esri.views.3d.webgl-engine.lib.DDSUtil")};function E(e){return e.charCodeAt(0)+(e.charCodeAt(1)<<8)+(e.charCodeAt(2)<<16)+(e.charCodeAt(3)<<24)}var R=E("DXT1"),I=E("DXT3"),Z=E("DXT5");function P(e,t){var n=new Int32Array(e,0,31);if(542327876!==n[0])return w().error("Invalid magic number in DDS header"),null;if(!(4&n[20]))return w().error("Unsupported format, must contain a FourCC code"),null;var r,i,o=n[21];switch(o){case R:r=8,i=S.q_.COMPRESSED_RGB_S3TC_DXT1_EXT;break;case I:r=16,i=S.q_.COMPRESSED_RGBA_S3TC_DXT3_EXT;break;case Z:r=16,i=S.q_.COMPRESSED_RGBA_S3TC_DXT5_EXT;break;default:return w().error("Unsupported FourCC code:",function(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)}(o)),null}var a=1,u=n[4],s=n[3];(3&u||3&s)&&(w().warn("Rounding up compressed texture size to nearest multiple of 4."),u=u+3&-4,s=s+3&-4);var c,l,f=u,d=s;131072&n[2]&&!1!==t&&(a=Math.max(1,n[7]));for(var h=n[1]+4,v=[],m=0;m<a;++m)l=(u+3>>2)*(s+3>>2)*r,c=new Uint8Array(e,h,l),v.push(c),h+=l,u=Math.max(1,u>>1),s=Math.max(1,s>>1);return{textureData:{type:"compressed",levels:v},internalFormat:i,width:f,height:d}}var C,M=n(32251),k=n(97731),N=n(52311),L=function(e){(0,s.Z)(n,e);var t=(0,c.Z)(n);function n(e,r){var i;return(0,a.Z)(this,n),(i=t.call(this))._data=e,i.type=x.U.Texture,i._glTexture=null,i._loadingPromise=null,i._loadingController=null,i.events=new f.Z,i._parameters=(0,o.Z)((0,o.Z)({},D),r),i._startPreload(e),i}return(0,u.Z)(n,[{key:"parameters",get:function(){return this._parameters}},{key:"dispose",value:function(){this.unload(),this._data=this.frameUpdate=void 0}},{key:"_startPreload",value:function(e){var t=this;null!=e&&(e instanceof HTMLVideoElement?(this.frameUpdate=function(n){return t._frameUpdate(e,n)},this._startPreloadVideoElement(e)):e instanceof HTMLImageElement&&this._startPreloadImageElement(e))}},{key:"_startPreloadVideoElement",value:function(e){if(!((0,m.jc)(e.src)||"auto"===e.preload&&e.crossOrigin)){e.preload="auto",e.crossOrigin="anonymous";var t=!e.paused;if(e.src=e.src,t&&e.autoplay){e.addEventListener("canplay",(function t(){e.removeEventListener("canplay",t),e.play()}))}}}},{key:"_startPreloadImageElement",value:function(e){(0,m.HK)(e.src)||(0,m.jc)(e.src)||e.crossOrigin||(e.crossOrigin="anonymous",e.src=e.src)}},{key:"_createDescriptor",value:function(e){var t,n,r=new N.X;return r.wrapMode=null!==(t=this._parameters.wrap)&&void 0!==t?t:S.e8.REPEAT,r.flipped=!this._parameters.noUnpackFlip,r.samplingMode=this._parameters.mipmap?S.cw.LINEAR_MIPMAP_LINEAR:S.cw.LINEAR,r.hasMipmap=!!this._parameters.mipmap,r.preMultiplyAlpha=!!this._parameters.preMultiplyAlpha,r.maxAnisotropy=null!==(n=this._parameters.maxAnisotropy)&&void 0!==n?n:this._parameters.mipmap?e.parameters.maxMaxAnisotropy:1,r}},{key:"glTexture",get:function(){return this._glTexture}},{key:"memoryEstimate",get:function(){var e;return(null===(e=this._glTexture)||void 0===e?void 0:e.usedMemory)||function(e,t){if(null==e)return 0;if((0,v.eP)(e)||(0,v.lq)(e))return t.encoding===_.Ti.KTX2_ENCODING?(0,y._h)(e,!!t.mipmap):t.encoding===_.Ti.BASIS_ENCODING?(0,y.$u)(e,!!t.mipmap):e.byteLength;var n=e instanceof Image||e instanceof ImageData||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement?F(e):t,r=n.width,i=n.height;return(t.mipmap?4/3:1)*r*i*(t.components||4)||0}(this._data,this._parameters)}},{key:"load",value:function(e){if(this._glTexture)return this._glTexture;if(this._loadingPromise)return this._loadingPromise;var t=this._data;return null==t?(this._glTexture=new b.x(e,this._createDescriptor(e),null),this._glTexture):(this._parameters.reloadable||(this._data=void 0),"string"==typeof t?this._loadFromURL(e,t):t instanceof Image?this._loadFromImageElement(e,t):t instanceof HTMLVideoElement?this._loadFromVideoElement(e,t):t instanceof ImageData||t instanceof HTMLCanvasElement?this._loadFromImage(e,t):((0,v.eP)(t)||(0,v.lq)(t))&&this._parameters.encoding===_.Ti.DDS_ENCODING?this._loadFromDDSData(e,t):((0,v.eP)(t)||(0,v.lq)(t))&&this._parameters.encoding===_.Ti.KTX2_ENCODING?this._loadFromKTX2(e,t):((0,v.eP)(t)||(0,v.lq)(t))&&this._parameters.encoding===_.Ti.BASIS_ENCODING?this._loadFromBasis(e,t):(0,v.lq)(t)?this._loadFromPixelData(e,t):(0,v.eP)(t)?this._loadFromPixelData(e,new Uint8Array(t)):null)}},{key:"_frameUpdate",value:function(e,t){return null==this._glTexture||e.readyState<C.HAVE_CURRENT_DATA||t===e.currentTime?t:(this._glTexture.setData(e),this._glTexture.descriptor.hasMipmap&&this._glTexture.generateMipmap(),this._parameters.updateCallback&&this._parameters.updateCallback(),e.currentTime)}},{key:"_loadFromDDSData",value:function(e,t){return this._glTexture=function(e,t,n){var r,i=P(n,null!==(r=t.hasMipmap)&&void 0!==r&&r);if(null==i)throw new Error("DDS texture data is null");var o=i.textureData,a=i.internalFormat,u=i.width,s=i.height;return t.samplingMode=o.levels.length>1?S.cw.LINEAR_MIPMAP_LINEAR:S.cw.LINEAR,t.hasMipmap=o.levels.length>1,t.internalFormat=a,t.width=u,t.height=s,new b.x(e,t,o)}(e,this._createDescriptor(e),t),this._glTexture}},{key:"_loadFromKTX2",value:function(e,t){var n=this;return this._loadAsync((function(){return(0,y.pk)(e,n._createDescriptor(e),t).then((function(e){return n._glTexture=e,e}))}))}},{key:"_loadFromBasis",value:function(e,t){var n=this;return this._loadAsync((function(){return(0,y.fX)(e,n._createDescriptor(e),t).then((function(e){return n._glTexture=e,e}))}))}},{key:"_loadFromPixelData",value:function(e,t){var n,r;(0,k.hu)(this._parameters.width>0&&this._parameters.height>0);var i=this._createDescriptor(e);return i.pixelFormat=1===this._parameters.components?S.VI.LUMINANCE:3===this._parameters.components?S.VI.RGB:S.VI.RGBA,i.width=null!==(n=this._parameters.width)&&void 0!==n?n:0,i.height=null!==(r=this._parameters.height)&&void 0!==r?r:0,this._glTexture=new b.x(e,i,t),this._glTexture}},{key:"_loadFromURL",value:function(e,t){var n=this;return this._loadAsync(function(){var o=(0,i.Z)((0,r.Z)().mark((function i(o){var a;return(0,r.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,p.t)(t,{signal:o});case 2:return a=r.sent,r.abrupt("return",((0,h.k_)(o),n._loadFromImage(e,a)));case 4:case"end":return r.stop()}}),i)})));return function(e){return o.apply(this,arguments)}}())}},{key:"_loadFromImageElement",value:function(e,t){var n=this;return t.complete?this._loadFromImage(e,t):this._loadAsync(function(){var o=(0,i.Z)((0,r.Z)().mark((function i(o){var a;return(0,r.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,g.fY)(t,t.src,!1,o);case 2:return a=r.sent,r.abrupt("return",((0,h.k_)(o),n._loadFromImage(e,a)));case 4:case"end":return r.stop()}}),i)})));return function(e){return o.apply(this,arguments)}}())}},{key:"_loadFromVideoElement",value:function(e,t){return t.readyState>=C.HAVE_CURRENT_DATA?this._loadFromImage(e,t):this._loadFromVideoElementAsync(e,t)}},{key:"_loadFromVideoElementAsync",value:function(e,t){var n=this;return this._loadAsync((function(r){return new Promise((function(i,o){var a=function(){t.removeEventListener("loadeddata",u),t.removeEventListener("error",s),(0,d.hw)(c)},u=function(){t.readyState>=C.HAVE_CURRENT_DATA&&(a(),i(n._loadFromImage(e,t)))},s=function(e){a(),o(e||new l.Z("Failed to load video"))};t.addEventListener("loadeddata",u),t.addEventListener("error",s);var c=(0,h.fu)(r,(function(){return s((0,h.zE)())}))}))}))}},{key:"_loadFromImage",value:function(e,t){var n=t;if(!(n instanceof HTMLVideoElement)){var r=e.parameters.maxTextureSize;n=this._parameters.downsampleUncompressed?(0,M.n9)(n,r):(0,M.qB)(n,r)}var i=F(n);this._parameters.width=i.width,this._parameters.height=i.height;var o=this._createDescriptor(e);return o.pixelFormat=3===this._parameters.components?S.VI.RGB:S.VI.RGBA,o.width=i.width,o.height=i.height,this._glTexture=new b.x(e,o,n),this._glTexture}},{key:"_loadAsync",value:function(e){var t=this,n=new AbortController;this._loadingController=n;var r=e(n.signal);this._loadingPromise=r;var i=function(){t._loadingController===n&&(t._loadingController=null),t._loadingPromise===r&&(t._loadingPromise=null)};return r.then(i,i),r}},{key:"unload",value:function(){if(this._glTexture=(0,d.M2)(this._glTexture),null!=this._loadingController){var e=this._loadingController;this._loadingController=null,this._loadingPromise=null,e.abort()}this.events.emit("unloaded")}}]),n}(T.c);function F(e){return e instanceof HTMLVideoElement?{width:e.videoWidth,height:e.videoHeight}:e}!function(e){e[e.HAVE_NOTHING=0]="HAVE_NOTHING",e[e.HAVE_METADATA=1]="HAVE_METADATA",e[e.HAVE_CURRENT_DATA=2]="HAVE_CURRENT_DATA",e[e.HAVE_FUTURE_DATA=3]="HAVE_FUTURE_DATA",e[e.HAVE_ENOUGH_DATA=4]="HAVE_ENOUGH_DATA"}(C||(C={}));var D={wrap:{s:S.e8.REPEAT,t:S.e8.REPEAT},mipmap:!0,noUnpackFlip:!1,preMultiplyAlpha:!1,downsampleUncompressed:!1}},25920:function(e,t,n){var r;n.d(t,{A:function(){return r}}),function(e){e[e.ColorAlpha=0]="ColorAlpha",e[e.FrontFace=1]="FrontFace",e[e.NONE=2]="NONE",e[e.COUNT=3]="COUNT"}(r||(r={}))},97731:function(e,t,n){n.d(t,{E6:function(){return v},T:function(){return l},ep:function(){return d},hu:function(){return c},iV:function(){return h},kG:function(){return p},u_:function(){return m},yK:function(){return f}});var r=n(15671),i=n(43144),o=n(6644),a=n(19093),u=(0,n(86361).Ue)(),s=function(){function e(t){(0,r.Z)(this,e),this.message=t}return(0,i.Z)(e,[{key:"toString",value:function(){return"AssertException: ".concat(this.message)}}]),e}();function c(e,t){if(!e){t=t||"Assertion";var n=new Error(t).stack;throw new s("".concat(t," at ").concat(n))}}function l(e,t){e||(t=t||"",console.warn("Verify failed: "+t+"\n"+new Error("verify").stack))}function f(e,t,n,r){var i,o=(n[0]-e[0])/t[0],a=(r[0]-e[0])/t[0];o>a&&(i=o,o=a,a=i);var u=(n[1]-e[1])/t[1],s=(r[1]-e[1])/t[1];if(u>s&&(i=u,u=s,s=i),o>s||u>a)return!1;u>o&&(o=u),s<a&&(a=s);var c=(n[2]-e[2])/t[2],l=(r[2]-e[2])/t[2];return c>l&&(i=c,c=l,l=i),!(o>l||c>a)&&(l<a&&(a=l),!(a<0))}function d(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:(0,o.Ue)(),u=(r[i]-n[i])*(t[0]-e[0])-(r[0]-n[0])*(t[i]-e[i]),s=(r[0]-n[0])*(e[i]-n[i])-(r[i]-n[i])*(e[0]-n[0]);if(0===u)return!1;var c=s/u;return a[0]=e[0]+c*(t[0]-e[0]),a[1]=e[i]+c*(t[i]-e[i]),!0}function h(e,t,n,r,i){u[0]=e[0],u[1]=e[1],u[2]=e[2],u[3]=1,(0,a.t)(u,u,t),i.length>2&&(i[2]=-u[2]),(0,a.t)(u,u,n),c(0!==u[3]),i[0]=u[0]/u[3],i[1]=u[1]/u[3],i[2]=u[2]/u[3],i[0]=(.5*i[0]+.5)*r[2]+r[0],i[1]=(.5*i[1]+.5)*r[3]+r[1]}function v(e,t){return Math.log(e)/Math.log(t)}function m(e,t,n,r){e[12]=t,e[13]=n,e[14]=r}function p(e){return 1===e[0]&&0===e[1]&&0===e[2]&&0===e[3]&&0===e[4]&&1===e[5]&&0===e[6]&&0===e[7]&&0===e[8]&&0===e[9]&&1===e[10]&&0===e[11]&&1===e[15]}},32251:function(e,t,n){n.d(t,{n9:function(){return a},nq:function(){return i},pf:function(){return o},qB:function(){return u}});var r=n(10064);function i(e){return 16*Math.ceil(e/16)}function o(e){return 16*Math.floor(e/16)}function a(e,t){var n=e.width*e.height;if(n<4096)return e instanceof ImageData?c(e):e;var r=e.width,i=e.height;do{n=(r=Math.ceil(r/2))*(i=Math.ceil(i/2))}while(n>1048576||null!=t&&(r>t||i>t));return s(e,r,i)}function u(e,t){var n=Math.max(e.width,e.height);if(n<=t)return e;var r=t/n;return s(e,Math.round(e.width*r),Math.round(e.height*r))}function s(e,t,n){if(e instanceof ImageData)return s(c(e),t,n);var r=document.createElement("canvas");return r.width=t,r.height=n,r.getContext("2d").drawImage(e,0,0,r.width,r.height),r}function c(e){var t=document.createElement("canvas");t.width=e.width,t.height=e.height;var n=t.getContext("2d");if(null==n)throw new r.Z("Failed to create 2d context from HTMLCanvasElement");return n.putImageData(e,0,0),t}},11954:function(e,t,n){n.d(t,{AM:function(){return u},Eg:function(){return s},Mi:function(){return a},Ur:function(){return c}});var r=n(43144),i=n(15671),o=n(12400),a=(0,r.Z)((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,o.Ue)();(0,i.Z)(this,e),this.intensity=t})),u=(0,r.Z)((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,o.Ue)(),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,o.al)(.57735,.57735,.57735);(0,i.Z)(this,e),this.intensity=t,this.direction=n})),s=(0,r.Z)((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,o.Ue)(),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,o.al)(.57735,.57735,.57735),r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;(0,i.Z)(this,e),this.intensity=t,this.direction=n,this.castShadows=r,this.specularStrength=a,this.environmentStrength=u})),c=(0,r.Z)((function e(){(0,i.Z)(this,e),this.r=[0],this.g=[0],this.b=[0]}))},48919:function(e,t,n){n.d(t,{cI:function(){return I},Vt:function(){return R}});var r=n(43144),i=n(15671),o=n(16889),a=n(32035),u=n(12400),s=n(11954),c=n(37762);function l(e,t,n){(n=n||e).length=e.length;for(var r=0;r<e.length;r++)n[r]=e[r]*t[r];return n}function f(e,t,n){(n=n||e).length=e.length;for(var r=0;r<e.length;r++)n[r]=e[r]*t;return n}function d(e,t,n){(n=n||e).length=e.length;for(var r=0;r<e.length;r++)n[r]=e[r]+t[r];return n}function h(e){return(e+1)*(e+1)}function v(e,t,n){var r=e[0],i=e[1],o=e[2],a=n||[];return a.length=h(t),t>=0&&(a[0]=.28209479177),t>=1&&(a[1]=.4886025119*r,a[2]=.4886025119*o,a[3]=.4886025119*i),t>=2&&(a[4]=1.09254843059*r*i,a[5]=1.09254843059*i*o,a[6]=.31539156525*(3*o*o-1),a[7]=1.09254843059*r*o,a[8]=.54627421529*(r*r-i*i)),a}function m(e,t){var n=h(e),r=t||{r:[],g:[],b:[]};r.r.length=r.g.length=r.b.length=n;for(var i=0;i<n;i++)r.r[i]=r.g[i]=r.b[i]=0;return r}function p(e,t){var n,r=function(e){return(0,o.uZ)(Math.floor(Math.sqrt(e)-1),0,2)}(t.r.length),i=(0,c.Z)(e);try{for(i.s();!(n=i.n()).done;){var u=n.value;(0,a.k)(S,u.direction),v(S,r,x),l(x,b),f(x,u.intensity[0],A),d(t.r,A),f(x,u.intensity[1],A),d(t.g,A),f(x,u.intensity[2],A),d(t.b,A)}}catch(s){i.e(s)}finally{i.f()}return t}function g(e,t){v(S,0,x);var n,r=(0,c.Z)(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;t.r[0]+=x[0]*b[0]*i.intensity[0]*4*Math.PI,t.g[0]+=x[0]*b[0]*i.intensity[1]*4*Math.PI,t.b[0]+=x[0]*b[0]*i.intensity[2]*4*Math.PI}}catch(o){r.e(o)}finally{r.f()}return t}var _=[],y=[],T=[],x=[0],A=[0],S=(0,u.Ue)(),b=[3.141593,2.094395,2.094395,2.094395,.785398,.785398,.785398,.785398,.785398],w=(0,r.Z)((function e(){(0,i.Z)(this,e),this.color=(0,u.Ue)(),this.intensity=1})),E=(0,r.Z)((function e(){(0,i.Z)(this,e),this.direction=(0,u.Ue)(),this.ambient=new w,this.diffuse=new w})),R=.4,I=function(){function e(){(0,i.Z)(this,e),this._shOrder=2,this._legacy=new E,this.globalFactor=.5,this.noonFactor=.5,this._sphericalHarmonics=new s.Ur,this._mainLight=new s.Eg((0,u.Ue)(),(0,u.al)(1,0,0),!1)}return(0,r.Z)(e,[{key:"legacy",get:function(){return this._legacy}},{key:"sh",get:function(){return this._sphericalHarmonics}},{key:"mainLight",get:function(){return this._mainLight}},{key:"set",value:function(e){(function(e,t,n,r){m(t,r),(0,a.s)(n.intensity,0,0,0);var i=!1,o=_,u=y,l=T;o.length=0,u.length=0,l.length=0;var f,h=(0,c.Z)(e);try{for(h.s();!(f=h.n()).done;){var v=f.value;v instanceof s.Eg&&!i?((0,a.c)(n.direction,v.direction),(0,a.c)(n.intensity,v.intensity),n.specularStrength=v.specularStrength,n.environmentStrength=v.environmentStrength,n.castShadows=v.castShadows,i=!0):v instanceof s.Eg||v instanceof s.AM?o.push(v):v instanceof s.Mi?u.push(v):v instanceof s.Ur&&l.push(v)}}catch(b){h.e(b)}finally{h.f()}p(o,r),g(u,r);var x,A=(0,c.Z)(l);try{for(A.s();!(x=A.n()).done;){var S=x.value;d(r.r,S.r),d(r.g,S.g),d(r.b,S.b)}}catch(b){A.e(b)}finally{A.f()}})(e,this._shOrder,this._mainLight,this._sphericalHarmonics),(0,a.c)(this._legacy.direction,this._mainLight.direction);var t=1/Math.PI;this._legacy.ambient.color[0]=.282095*this._sphericalHarmonics.r[0]*t,this._legacy.ambient.color[1]=.282095*this._sphericalHarmonics.g[0]*t,this._legacy.ambient.color[2]=.282095*this._sphericalHarmonics.b[0]*t,(0,a.j)(this._legacy.diffuse.color,this._mainLight.intensity,t),(0,a.c)(Z,this._legacy.diffuse.color),(0,a.j)(Z,Z,R*this.globalFactor),(0,a.g)(this._legacy.ambient.color,this._legacy.ambient.color,Z)}},{key:"copyFrom",value:function(e){this._sphericalHarmonics.r=Array.from(e.sh.r),this._sphericalHarmonics.g=Array.from(e.sh.g),this._sphericalHarmonics.b=Array.from(e.sh.b),(0,a.c)(this._mainLight.direction,e.mainLight.direction),(0,a.c)(this._mainLight.intensity,e.mainLight.intensity),this._mainLight.castShadows=e.mainLight.castShadows,this._mainLight.specularStrength=e.mainLight.specularStrength,this._mainLight.environmentStrength=e.mainLight.environmentStrength,this.globalFactor=e.globalFactor,this.noonFactor=e.noonFactor}},{key:"lerpLighting",value:function(e,t,n){if((0,a.o)(this._mainLight.intensity,e.mainLight.intensity,t.mainLight.intensity,n),this._mainLight.environmentStrength=(0,o.t7)(e.mainLight.environmentStrength,t.mainLight.environmentStrength,n),this._mainLight.specularStrength=(0,o.t7)(e.mainLight.specularStrength,t.mainLight.specularStrength,n),(0,a.c)(this._mainLight.direction,t.mainLight.direction),this._mainLight.castShadows=t.mainLight.castShadows,this.globalFactor=(0,o.t7)(e.globalFactor,t.globalFactor,n),this.noonFactor=(0,o.t7)(e.noonFactor,t.noonFactor,n),e.sh.r.length===t.sh.r.length)for(var r=0;r<t.sh.r.length;r++)this._sphericalHarmonics.r[r]=(0,o.t7)(e.sh.r[r],t.sh.r[r],n),this._sphericalHarmonics.g[r]=(0,o.t7)(e.sh.g[r],t.sh.g[r],n),this._sphericalHarmonics.b[r]=(0,o.t7)(e.sh.b[r],t.sh.b[r],n);else for(var i=0;i<t.sh.r.length;i++)this._sphericalHarmonics.r[i]=t.sh.r[i],this._sphericalHarmonics.g[i]=t.sh.g[i],this._sphericalHarmonics.b[i]=t.sh.b[i]}}]),e}(),Z=(0,u.Ue)()},8883:function(e,t,n){n.d(t,{W:function(){return f}});var r=n(43144),i=n(15671),o=n(60136),a=n(29388),u=n(27366),s=n(81221),c=n(99340),l=n(33559),f=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,r.Z)(n)}(s.PO);(0,u._)([(0,l.o)({constValue:!0})],f.prototype,"hasSliceHighlight",void 0),(0,u._)([(0,l.o)({constValue:!1})],f.prototype,"hasSliceInVertexProgram",void 0),(0,u._)([(0,l.o)({constValue:c.P.Pass})],f.prototype,"pbrTextureBindType",void 0)},65964:function(e,t,n){n.d(t,{n:function(){return c},x:function(){return l}});var r=n(43144),i=n(15671),o=n(60136),a=n(29388),u=n(66202),s=n(56529),c=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(){var e;return(0,i.Z)(this,n),(e=t.apply(this,arguments)).renderOccluded=s.yD.Occlude,e.isDecoration=!1,e}return(0,r.Z)(n)}(u.Ve),l=8},32683:function(e,t,n){n.d(t,{EE:function(){return u},U_:function(){return a},lr:function(){return o}});var r=n(12400),i=n(43411);function o(e,t){return null==e&&(e=[]),e.push(t),e}function a(e,t){if(null==e)return null;var n=e.filter((function(e){return e!==t}));return 0===n.length?null:n}function u(e,t,n,r,o){s[0]=e.get(t,0),s[1]=e.get(t,1),s[2]=e.get(t,2),(0,i.LF)(s,c,3),n.set(o,0,c[0]),r.set(o,0,c[1]),n.set(o,1,c[2]),r.set(o,1,c[3]),n.set(o,2,c[4]),r.set(o,2,c[5])}var s=(0,r.Ue)(),c=new Float32Array(6)},18020:function(e,t,n){var r,i;n.d(t,{m:function(){return i},q:function(){return r}}),function(e){e[e.RED=0]="RED",e[e.RG=1]="RG",e[e.RGBA4=2]="RGBA4",e[e.RGBA=3]="RGBA",e[e.RGBA_MIPMAP=4]="RGBA_MIPMAP",e[e.R16F=5]="R16F",e[e.RGBA16F=6]="RGBA16F"}(r||(r={})),function(e){e[e.DEPTH_STENCIL_TEXTURE=0]="DEPTH_STENCIL_TEXTURE",e[e.DEPTH16_BUFFER=1]="DEPTH16_BUFFER"}(i||(i={}))},43411:function(e,t,n){function r(e,t,n){for(var r=0;r<n;++r)t[2*r]=e[r],t[2*r+1]=e[r]-t[2*r]}function i(e,t){for(var n=e.length,r=0;r<n;++r)a[0]=e[r],t[r]=a[0];return t}function o(e,t){for(var n=e.length,r=0;r<n;++r)a[0]=e[r],a[1]=e[r]-a[0],t[r]=a[1];return t}n.d(t,{GB:function(){return o},LF:function(){return r},U8:function(){return i}});var a=new Float32Array(2)},36207:function(e,t,n){n.d(t,{BK:function(){return v},LZ:function(){return h},Rd:function(){return l},if:function(){return s},jp:function(){return j},sg:function(){return f},sm:function(){return b},wK:function(){return c},zp:function(){return d}});var r=n(1413),i=n(15671),o=n(43144),a=n(68401),u=n(8548);function s(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u.db.ADD,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[0,0,0,0];return{srcRgb:e,srcAlpha:e,dstRgb:t,dstAlpha:t,opRgb:n,opAlpha:n,color:{r:r[0],g:r[1],b:r[2],a:r[3]}}}function c(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:u.db.ADD,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:u.db.ADD,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[0,0,0,0];return{srcRgb:e,srcAlpha:t,dstRgb:n,dstAlpha:r,opRgb:i,opAlpha:o,color:{r:a[0],g:a[1],b:a[2],a:a[3]}}}var l={face:u.LR.BACK,mode:u.Wf.CCW},f={face:u.LR.FRONT,mode:u.Wf.CCW},d=function(e){return e===a.Vr.Back?l:e===a.Vr.Front?f:null},h={zNear:0,zFar:1},v={r:!0,g:!0,b:!0,a:!0};function m(e){return R.intern(e)}function p(e){return Z.intern(e)}function g(e){return C.intern(e)}function _(e){return k.intern(e)}function y(e){return L.intern(e)}function T(e){return D.intern(e)}function x(e){return U.intern(e)}function A(e){return z.intern(e)}function S(e){return V.intern(e)}function b(e){return W.intern(e)}var w=function(){function e(t,n){(0,i.Z)(this,e),this._makeKey=t,this._makeRef=n,this._interns=new Map}return(0,o.Z)(e,[{key:"intern",value:function(e){var t;if(!e)return null;var n=this._makeKey(e),r=this._interns;return r.has(n)||r.set(n,this._makeRef(e)),null!==(t=r.get(n))&&void 0!==t?t:null}}]),e}();function E(e){return"["+e.join(",")+"]"}var R=new w(I,(function(e){return(0,r.Z)({__tag:"Blending"},e)}));function I(e){return e?E([e.srcRgb,e.srcAlpha,e.dstRgb,e.dstAlpha,e.opRgb,e.opAlpha,e.color.r,e.color.g,e.color.b,e.color.a]):null}var Z=new w(P,(function(e){return(0,r.Z)({__tag:"Culling"},e)}));function P(e){return e?E([e.face,e.mode]):null}var C=new w(M,(function(e){return(0,r.Z)({__tag:"PolygonOffset"},e)}));function M(e){return e?E([e.factor,e.units]):null}var k=new w(N,(function(e){return(0,r.Z)({__tag:"DepthTest"},e)}));function N(e){return e?E([e.func]):null}var L=new w(F,(function(e){return(0,r.Z)({__tag:"StencilTest"},e)}));function F(e){return e?E([e.function.func,e.function.ref,e.function.mask,e.operation.fail,e.operation.zFail,e.operation.zPass]):null}var D=new w(O,(function(e){return(0,r.Z)({__tag:"DepthWrite"},e)}));function O(e){return e?E([e.zNear,e.zFar]):null}var U=new w(H,(function(e){return(0,r.Z)({__tag:"ColorWrite"},e)}));function H(e){return e?E([e.r,e.g,e.b,e.a]):null}var z=new w(B,(function(e){return(0,r.Z)({__tag:"StencilWrite"},e)}));function B(e){return e?E([e.mask]):null}var V=new w(G,(function(e){return(0,r.Z)({__tag:"DrawBuffers"},e)}));function G(e){return e?E(e.buffers):null}var W=new w((function(e){return e?E([I(e.blending),P(e.culling),M(e.polygonOffset),N(e.depthTest),F(e.stencilTest),O(e.depthWrite),H(e.colorWrite),B(e.stencilWrite),G(e.drawBuffers)]):null}),(function(e){return{blending:m(e.blending),culling:p(e.culling),polygonOffset:g(e.polygonOffset),depthTest:_(e.depthTest),stencilTest:y(e.stencilTest),depthWrite:T(e.depthWrite),colorWrite:x(e.colorWrite),stencilWrite:A(e.stencilWrite),drawBuffers:S(e.drawBuffers)}}));var j=function(){function e(t){(0,i.Z)(this,e),this._pipelineInvalid=!0,this._blendingInvalid=!0,this._cullingInvalid=!0,this._polygonOffsetInvalid=!0,this._depthTestInvalid=!0,this._stencilTestInvalid=!0,this._depthWriteInvalid=!0,this._colorWriteInvalid=!0,this._stencilWriteInvalid=!0,this._drawBuffersInvalid=!0,this._stateSetters=t}return(0,o.Z)(e,[{key:"setPipeline",value:function(e){(this._pipelineInvalid||e!==this._pipeline)&&(this._setBlending(e.blending),this._setCulling(e.culling),this._setPolygonOffset(e.polygonOffset),this._setDepthTest(e.depthTest),this._setStencilTest(e.stencilTest),this._setDepthWrite(e.depthWrite),this._setColorWrite(e.colorWrite),this._setStencilWrite(e.stencilWrite),this._setDrawBuffers(e.drawBuffers),this._pipeline=e),this._pipelineInvalid=!1}},{key:"invalidateBlending",value:function(){this._blendingInvalid=!0,this._pipelineInvalid=!0}},{key:"invalidateCulling",value:function(){this._cullingInvalid=!0,this._pipelineInvalid=!0}},{key:"invalidatePolygonOffset",value:function(){this._polygonOffsetInvalid=!0,this._pipelineInvalid=!0}},{key:"invalidateDepthTest",value:function(){this._depthTestInvalid=!0,this._pipelineInvalid=!0}},{key:"invalidateStencilTest",value:function(){this._stencilTestInvalid=!0,this._pipelineInvalid=!0}},{key:"invalidateDepthWrite",value:function(){this._depthWriteInvalid=!0,this._pipelineInvalid=!0}},{key:"invalidateColorWrite",value:function(){this._colorWriteInvalid=!0,this._pipelineInvalid=!0}},{key:"invalidateStencilWrite",value:function(){this._stencilTestInvalid=!0,this._pipelineInvalid=!0}},{key:"invalidateDrawBuffers",value:function(){this._drawBuffersInvalid=!0,this._pipelineInvalid=!0}},{key:"_setBlending",value:function(e){this._blending=this._setSubState(e,this._blending,this._blendingInvalid,this._stateSetters.setBlending),this._blendingInvalid=!1}},{key:"_setCulling",value:function(e){this._culling=this._setSubState(e,this._culling,this._cullingInvalid,this._stateSetters.setCulling),this._cullingInvalid=!1}},{key:"_setPolygonOffset",value:function(e){this._polygonOffset=this._setSubState(e,this._polygonOffset,this._polygonOffsetInvalid,this._stateSetters.setPolygonOffset),this._polygonOffsetInvalid=!1}},{key:"_setDepthTest",value:function(e){this._depthTest=this._setSubState(e,this._depthTest,this._depthTestInvalid,this._stateSetters.setDepthTest),this._depthTestInvalid=!1}},{key:"_setStencilTest",value:function(e){this._stencilTest=this._setSubState(e,this._stencilTest,this._stencilTestInvalid,this._stateSetters.setStencilTest),this._stencilTestInvalid=!1}},{key:"_setDepthWrite",value:function(e){this._depthWrite=this._setSubState(e,this._depthWrite,this._depthWriteInvalid,this._stateSetters.setDepthWrite),this._depthWriteInvalid=!1}},{key:"_setColorWrite",value:function(e){this._colorWrite=this._setSubState(e,this._colorWrite,this._colorWriteInvalid,this._stateSetters.setColorWrite),this._colorWriteInvalid=!1}},{key:"_setStencilWrite",value:function(e){this._stencilWrite=this._setSubState(e,this._stencilWrite,this._stencilWriteInvalid,this._stateSetters.setStencilWrite),this._stencilTestInvalid=!1}},{key:"_setDrawBuffers",value:function(e){this._drawBuffers=this._setSubState(e,this._drawBuffers,this._drawBuffersInvalid,this._stateSetters.setDrawBuffers),this._drawBuffersInvalid=!1}},{key:"_setSubState",value:function(e,t,n,r){return(n||e!==t)&&(r(e),this._pipelineInvalid=!0),e}}]),e}()}}]);
//# sourceMappingURL=69656.0b53ad64.chunk.js.map