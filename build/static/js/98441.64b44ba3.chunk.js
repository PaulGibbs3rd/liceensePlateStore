"use strict";(self.webpackChunkreact_training=self.webpackChunkreact_training||[]).push([[98441],{59877:function(e,t,n){n.d(t,{p:function(){return v}});var a=n(29439),r=n(37762),i=n(74165),u=n(15861),c=n(15671),o=n(43144),s=(n(93169),n(16054)),f=n(77427),l=n(66978),h=n(68860),d=n(88152);function v(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;if(e){var n=t.elevationInfo,a=t.alignPointsInFeatures;return new y(n,a)}return new p}var p=function(){function e(){(0,c.Z)(this,e)}return(0,o.Z)(e,[{key:"alignCandidates",value:function(){var e=(0,u.Z)((0,i.Z)().mark((function e(t,n,a){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t);case 1:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"notifyElevationSourceChange",value:function(){}}]),e}(),y=function(){function e(t,n){(0,c.Z)(this,e),this._elevationInfo=t,this._alignPointsInFeatures=n,this._alignmentsCache=new s.z(1024),this._cacheVersion=0}return(0,o.Z)(e,[{key:"alignCandidates",value:function(){var e=(0,u.Z)((0,i.Z)().mark((function e(t,n,a){var r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this._elevationInfo,e.abrupt("return",null==r||"absolute-height"!==r.mode||r.featureExpressionInfo?this._alignComputedElevationCandidates(t,n,a):(_(t,n,r),t));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"notifyElevationSourceChange",value:function(){this._alignmentsCache.clear(),this._cacheVersion++}},{key:"_alignComputedElevationCandidates",value:function(){var e=(0,u.Z)((0,i.Z)().mark((function e(t,n,u){var c,o,s,h,d,v,p,y,g,Z,_,x,C,b,w,z,m;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=new Map,o=(0,r.Z)(t);try{for(o.s();!(s=o.n()).done;)h=s.value,(0,f.s1)(c,h.objectId,k).push(h)}catch(i){o.e(i)}finally{o.f()}return d=this._prepareQuery(c,n),v=(0,a.Z)(d,3),p=v[0],y=v[1],g=v[2],e.next=10,this._alignPointsInFeatures(p,u);case 10:if(Z=e.sent,(0,l.k_)(u),g===this._cacheVersion){e.next=14;break}return e.abrupt("return",this._alignComputedElevationCandidates(t,n,u));case 14:this._applyCacheAndResponse(p,Z,y),_=Z.drapedObjectIds,x=Z.failedObjectIds,C=[],b=(0,r.Z)(t);try{for(b.s();!(w=b.n()).done;)z=w.value,m=z.objectId,_.has(m)&&"edge"===z.type&&(z.draped=!0),x.has(m)||C.push(z)}catch(i){b.e(i)}finally{b.f()}return e.abrupt("return",C);case 19:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"_prepareQuery",value:function(e,t){var n,i=[],u=[],c=(0,r.Z)(e);try{for(c.s();!(n=c.n()).done;){var o,s=(0,a.Z)(n.value,2),f=s[0],l=s[1],h=[],d=(0,r.Z)(l);try{for(d.s();!(o=d.n()).done;){var v=o.value;this._addToQueriesOrCachedResult(f,v.target,h,u),"edge"===v.type&&(this._addToQueriesOrCachedResult(f,v.start,h,u),this._addToQueriesOrCachedResult(f,v.end,h,u))}}catch(p){d.e(p)}finally{d.f()}0!==h.length&&i.push({objectId:f,points:h})}}catch(p){c.e(p)}finally{c.f()}return[{spatialReference:t.toJSON(),pointsInFeatures:i},u,this._cacheVersion]}},{key:"_addToQueriesOrCachedResult",value:function(e,t,n,a){var r=Z(e,t),i=this._alignmentsCache.get(r);null==i?n.push(t):a.push(new g(t,i))}},{key:"_applyCacheAndResponse",value:function(e,t,n){var a,i=t.elevations,u=t.drapedObjectIds,c=t.failedObjectIds,o=(0,r.Z)(n);try{for(o.s();!(a=o.n()).done;){a.value.apply()}}catch(b){o.e(b)}finally{o.f()}var s,f=0,l=this._alignmentsCache,h=(0,r.Z)(e.pointsInFeatures);try{for(h.s();!(s=h.n()).done;){var d=s.value,v=d.objectId,p=d.points;if(c.has(v))f+=p.length;else{var y,g=!u.has(v),_=(0,r.Z)(p);try{for(_.s();!(y=_.n()).done;){var k=y.value,x=Z(v,k),C=i[f++];k.z=C,g&&l.put(x,C,1)}}catch(b){_.e(b)}finally{_.f()}}}}catch(b){h.e(b)}finally{h.f()}}}]),e}(),g=function(){function e(t,n){(0,c.Z)(this,e),this.point=t,this.z=n}return(0,o.Z)(e,[{key:"apply",value:function(){this.point.z=this.z}}]),e}();function Z(e,t){var n=t.x,a=t.y,r=t.z,i=t.spatialReference;return"".concat(e,"-").concat(n,"-").concat(a,"-").concat(null!==r&&void 0!==r?r:0,"}-wkid:").concat(null===i||void 0===i?void 0:i.wkid)}function _(e,t,n){var a=n.offset,i=n.unit;if(null!=a){var u,c=(0,h._R)(t),o=a*((0,d.Z7)(null!==i&&void 0!==i?i:"meters")/c),s=(0,r.Z)(e);try{for(s.s();!(u=s.n()).done;){var f=u.value;switch(f.type){case"edge":f.start.z+=o,f.end.z+=o;continue;case"vertex":f.target.z+=o;continue}}}catch(l){s.e(l)}finally{s.f()}}}function k(){return[]}},53580:function(e,t,n){n.d(t,{c:function(){return s}});var a=n(37762),r=n(15671),i=n(43144),u=(n(93169),function(){function e(){(0,r.Z)(this,e)}return(0,i.Z)(e,[{key:"filter",value:function(e,t){return t}},{key:"notifyElevationSourceChange",value:function(){}}]),e}()),c=function(){function e(){(0,r.Z)(this,e)}return(0,i.Z)(e,[{key:"filter",value:function(e,t){var n=e.point,a=e.distance;if(null==n.z)return t;if(0===t.length)return t;var r=function(e){return"number"==typeof e?{x:e,y:e,z:e}:e}(a),i=this._updateCandidatesTo3D(t,n,r).filter(o);return i.sort(h),i}},{key:"_updateCandidatesTo3D",value:function(e,t,n){var r,i=(0,a.Z)(e);try{for(i.s();!(r=i.n()).done;){var u=r.value;switch(u.type){case"edge":f(u,t,n);continue;case"vertex":l(u,t,n);continue}}}catch(c){i.e(c)}finally{i.f()}return e}}]),e}();function o(e){return e.distance<=1}function s(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e?new c:new u}function f(e,t,n){var a=n.x,r=n.y,i=n.z,u=e.start,c=e.end,o=e.target;e.draped||function(e,t,n,a){var r=a.x-n.x,i=a.y-n.y,u=a.z-n.z,c=r*r+i*i+u*u,o=(t.x-n.x)*r+(t.y-n.y)*i+u*(t.z-n.z),s=Math.min(1,Math.max(0,o/c)),f=n.x+r*s,l=n.y+i*s,h=n.z+u*s;e.x=f,e.y=l,e.z=h}(o,t,u,c);var s=(t.x-o.x)/a,f=(t.y-o.y)/r,l=(t.z-o.z)/i;e.distance=Math.sqrt(s*s+f*f+l*l)}function l(e,t,n){var a=n.x,r=n.y,i=n.z,u=e.target,c=(t.x-u.x)/a,o=(t.y-u.y)/r,s=(t.z-u.z)/i,f=Math.sqrt(c*c+o*o+s*s);e.distance=f}function h(e,t){return e.distance-t.distance}},48817:function(e,t,n){n.d(t,{k:function(){return h}});var a=n(37762),r=n(74165),i=n(15861),u=n(15671),c=n(43144),o=(n(93169),n(84652)),s=n(16054),f=n(66978),l=n(643);function h(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return e?new v(t):new d}var d=function(){function e(){(0,u.Z)(this,e)}return(0,c.Z)(e,[{key:"fetch",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[]);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"notifySymbologyChange",value:function(){}}]),e}(),v=function(){function e(t){(0,u.Z)(this,e),this._getSymbologyCandidates=t,this._candidatesCache=new s.z(1024),this._cacheVersion=0}return(0,c.Z)(e,[{key:"fetch",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n){var i,u,c,s,l,h,d,v,y,g,Z,_,k,x,C,b,w,z,m,I,j;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.length){e.next=2;break}return e.abrupt("return",[]);case 2:i=[],u=[],c=this._candidatesCache,s=(0,a.Z)(t);try{for(s.s();!(l=s.n()).done;)if(h=l.value,d=p(h),v=c.get(d)){y=(0,a.Z)(v);try{for(y.s();!(g=y.n()).done;)Z=g.value,u.push((0,o.d9)(Z))}catch(r){y.e(r)}finally{y.f()}}else i.push(h),c.put(d,[],1)}catch(r){s.e(r)}finally{s.f()}if(0!==i.length){e.next=7;break}return e.abrupt("return",u);case 7:return _=this._cacheVersion,e.next=10,this._getSymbologyCandidates(i,n);case 10:if(k=e.sent,x=k.candidates,C=k.sourceCandidateIndices,(0,f.k_)(n),_===this._cacheVersion){e.next=16;break}return e.abrupt("return",this.fetch(t,n));case 16:for(b=[],w=x.length,z=0;z<w;++z)m=x[z],I=p(i[C[z]]),(j=c.get(I)).push(m),c.put(I,j,j.length),b.push((0,o.d9)(m));return e.abrupt("return",u.concat(b));case 19:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"notifySymbologyChange",value:function(){this._candidatesCache.clear(),this._cacheVersion++}}]),e}();function p(e){switch(e.type){case"vertex":var t,n=e.objectId,a=e.target,r="".concat(n,"-vertex-").concat(a.x,"-").concat(a.y,"-").concat(null!==(t=a.z)&&void 0!==t?t:0);return(0,l.hP)(r).toString();case"edge":var i,u,c=e.objectId,o=e.start,s=e.end,f="".concat(c,"-edge-").concat(o.x,"-").concat(o.y,"-").concat(null!==(i=o.z)&&void 0!==i?i:0,"-to-").concat(s.x,"-").concat(s.y,"-").concat(null!==(u=s.z)&&void 0!==u?u:0);return(0,l.hP)(f).toString();default:return""}}}}]);
//# sourceMappingURL=98441.64b44ba3.chunk.js.map