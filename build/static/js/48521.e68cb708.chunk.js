"use strict";(self.webpackChunkreact_training=self.webpackChunkreact_training||[]).push([[48521],{32500:function(e,t,n){n.d(t,{I:function(){return w},b:function(){return x}});var r,i,a,o,s=n(30168),l=n(37081),u=n(33280),c=n(94951),d=n(15226),p=n(26461),h=n(116),v=n(41012),f=n(58406),y=n(98634),_=n(64201),m=n(19253),g=n(25920),b=n(4760);function x(e){var t=new _.kG,n=t.vertex,x=t.fragment;return(0,v.Sv)(n,e),t.include(c.w,e),t.attributes.add(b.T.POSITION,"vec3"),t.attributes.add(b.T.UV0,"vec2"),e.perspectiveInterpolation&&t.attributes.add(b.T.PERSPECTIVEDIVIDE,"float"),t.varyings.add("vpos","vec3"),e.multipassEnabled&&t.varyings.add("depth","float"),n.code.add((0,y.H)(r||(r=(0,s.Z)(["\n    void main(void) {\n      vpos = position;\n      ","\n      vTexCoord = uv0;\n      gl_Position = transformPosition(proj, view, vpos);\n\n      ","\n    }\n  "])),e.multipassEnabled?"depth = (view * vec4(vpos, 1.0)).z;":"",e.perspectiveInterpolation?"gl_Position *= perspectiveDivide;":"")),t.include(u.f5,e),t.include(d.l,e),x.uniforms.add(new m.A("tex",(function(e){return e.texture})),new f.p("opacity",(function(e){return e.opacity}))),t.varyings.add("vTexCoord","vec2"),e.transparencyPassType===g.A.ColorAlpha&&(t.outputs.add("fragColor","vec4",0),t.outputs.add("fragAlpha","float",1)),x.include(h.Y),x.code.add((0,y.H)(i||(i=(0,s.Z)(["\n    void main() {\n      discardBySlice(vpos);\n      ","\n      fragColor = texture(tex, vTexCoord) * opacity;\n\n      if (fragColor.a < ",") {\n        discard;\n      }\n\n      fragColor = highlightSlice(fragColor, vpos);\n      ","\n      ","\n    }\n    "])),e.multipassEnabled?"terrainDepthTest(depth);":"",y.H.float(p.F),e.transparencyPassType===g.A.ColorAlpha?(0,y.H)(a||(a=(0,s.Z)(["\n              fragColor = premultiplyAlpha(fragColor);\n              fragAlpha = fragColor.a;"]))):"",e.output===l.H_.ObjectAndLayerIdColor?(0,y.H)(o||(o=(0,s.Z)(["\n              fragColor = vec4(0,0,0,1);"]))):"")),t}var w=Object.freeze(Object.defineProperty({__proto__:null,build:x},Symbol.toStringTag,{value:"Module"}))},55364:function(e,t,n){function r(){return[1,0,0,1,0,0]}function i(e){return[e[0],e[1],e[2],e[3],e[4],e[5]]}n.d(t,{Ue:function(){return r},Wd:function(){return a},d9:function(){return i}});var a=[1,0,0,1,0,0];Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:a,clone:i,create:r,createView:function(e,t){return new Float64Array(e,t,6)},fromValues:function(e,t,n,r,i,a){return[e,t,n,r,i,a]}},Symbol.toStringTag,{value:"Module"}))},67593:function(e,t,n){n.d(t,{E:function(){return h},H:function(){return p}});var r=n(29439),i=n(29303),a=n(21389),o=n(13611),s=n(32035),l=(0,n(12400).Ue)(),u=(0,a.Ue)(),c=(0,a.Ue)(),d=(0,a.Ue)();function p(e,t,n){return(0,s.s)(l,t[0],t[1],1),(0,s.t)(l,l,(0,i.p4)(u,n)),0===l[2]?(0,o.t8)(e,l[0],l[1]):(0,o.t8)(e,l[0]/l[2],l[1]/l[2])}function h(e,t,n){return v(c,t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]),v(d,n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7]),(0,i.Jp)(e,(0,i.uj)(c,c),d),0!==e[8]&&(e[0]/=e[8],e[1]/=e[8],e[2]/=e[8],e[3]/=e[8],e[4]/=e[8],e[5]/=e[8],e[6]/=e[8],e[7]/=e[8],e[8]/=e[8]),e}function v(e,t,n,a,o,c,d,p,h){(0,i.t8)(e,t,a,c,n,o,d,1,1,1),(0,s.s)(l,p,h,1),(0,i.uj)(u,e);var v=(0,s.t)(l,l,(0,i.p4)(u,u)),f=(0,r.Z)(v,3),y=f[0],_=f[1],m=f[2];return(0,i.t8)(u,y,0,0,0,_,0,0,0,m),(0,i.Jp)(e,u,e)}},76335:function(e,t,n){n.d(t,{Sy:function(){return u},UZ:function(){return s},XZ:function(){return l},x3:function(){return c}});var r=n(37762),i=n(29909),a=n(78952),o=n(77981),s={102100:{maxX:20037508.342788905,minX:-20037508.342788905,plus180Line:new i.Z({paths:[[[20037508.342788905,-20037508.342788905],[20037508.342788905,20037508.342788905]]],spatialReference:a.Z.WebMercator}),minus180Line:new i.Z({paths:[[[-20037508.342788905,-20037508.342788905],[-20037508.342788905,20037508.342788905]]],spatialReference:a.Z.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new i.Z({paths:[[[180,-180],[180,180]]],spatialReference:a.Z.WGS84}),minus180Line:new i.Z({paths:[[[-180,-180],[-180,180]]],spatialReference:a.Z.WGS84})}};function l(e,t){return Math.ceil((e-t)/(2*t))}function u(e,t){var n,i=c(e),a=(0,r.Z)(i);try{for(a.s();!(n=a.n()).done;){var o,s=n.value,l=(0,r.Z)(s);try{for(l.s();!(o=l.n()).done;){o.value[0]+=t}}catch(u){l.e(u)}finally{l.f()}}}catch(u){a.e(u)}finally{a.f()}return e}function c(e){return(0,o.oU)(e)?e.rings:e.paths}},47991:function(e,t,n){n.d(t,{SR:function(){return f},Ui:function(){return v}});var r=n(43144),i=n(15671),a=n(37762),o=n(29439),s=n(46784),l=n(65156),u=n(376),c=n(69662),d=n(77981),p=n(76335),h=n(92975);function v(e){return y(e,!0)}function f(e){return y(e,!1)}function y(e,t){if(null==e)return null;var n=e.spatialReference,r=(0,h.C5)(n),i=(0,s.AK)(e)?e.toJSON():e;if(!r)return i;var a=(0,h.sS)(n)?102100:4326,o=p.UZ[a].maxX,l=p.UZ[a].minX;if((0,d.wp)(i))return m(i,o,l);if((0,d.aW)(i))return i.points=i.points.map((function(e){return m(e,o,l)})),i;if((0,d.YX)(i))return _(i,r);if((0,d.oU)(i)||(0,d.l9)(i)){var c=(0,u.$P)(T,i),v={xmin:c[0],ymin:c[1],xmax:c[2],ymax:c[3]},f=(0,p.XZ)(v.xmin,l)*(2*o),y=0===f?i:(0,p.Sy)(i,f);return v.xmin+=f,v.xmax+=f,v.xmax>o?w(y,o,t):v.xmin<l?w(y,l,t):y}return i}function _(e,t){if(!t)return e;var n=function(e,t){var n=[],r=e.ymin,i=e.ymax,a=e.xmin,s=e.xmax,l=e.xmax-e.xmin,u=(0,o.Z)(t.valid,2),c=u[0],d=u[1],p=g(e.xmin,t),h=p.x,v=p.frameId,f=g(e.xmax,t),y=f.x,_=f.frameId,m=h===y&&l>0;if(l>2*d){var x={xmin:a<s?h:y,ymin:r,xmax:d,ymax:i},w={xmin:c,ymin:r,xmax:a<s?y:h,ymax:i},T={xmin:0,ymin:r,xmax:d,ymax:i},E={xmin:c,ymin:r,xmax:0,ymax:i},k=[],C=[];b(x,T)&&k.push(v),b(x,E)&&C.push(v),b(w,T)&&k.push(_),b(w,E)&&C.push(_);for(var I=v+1;I<_;I++)k.push(I),C.push(I);n.push(new Z(x,[v]),new Z(w,[_]),new Z(T,k),new Z(E,C))}else h>y||m?n.push(new Z({xmin:h,ymin:r,xmax:d,ymax:i},[v]),new Z({xmin:c,ymin:r,xmax:y,ymax:i},[_])):n.push(new Z({xmin:h,ymin:r,xmax:y,ymax:i},[v]));return n}(e,t).map((function(e){return e.extent}));return n.length<2?n[0]||e:n.length>2?(e.xmin=t.valid[0],e.xmax=t.valid[1],e):{rings:n.map((function(e){return[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]}))}}function m(e,t,n){if(Array.isArray(e)){var r=e[0];if(r>t){var i=(0,p.XZ)(r,t);e[0]=r+i*(-2*t)}else if(r<n){var a=(0,p.XZ)(r,n);e[0]=r+a*(-2*n)}}else{var o=e.x;if(o>t){var s=(0,p.XZ)(o,t);e.x+=s*(-2*t)}else if(o<n){var l=(0,p.XZ)(o,n);e.x+=l*(-2*n)}}return e}function g(e,t){var n,r=(0,o.Z)(t.valid,2),i=r[0],a=r[1],s=2*a,l=0;return e>a?(e-=(n=Math.ceil(Math.abs(e-a)/s))*s,l=n):e<i&&(e+=(n=Math.ceil(Math.abs(e-i)/s))*s,l=-n),{x:e,frameId:l}}function b(e,t){var n=t.xmin,r=t.ymin,i=t.xmax,a=t.ymax;return x(e,n,r)&&x(e,n,a)&&x(e,i,a)&&x(e,i,r)}function x(e,t,n){return t>=e.xmin&&t<=e.xmax&&n>=e.ymin&&n<=e.ymax}function w(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=!(0,d.l9)(e);if(r&&(0,c.Zy)(e),n)return(new E).cut(e,t);for(var i=r?e.rings:e.paths,o=r?4:2,s=i.length,l=-2*t,u=0;u<s;u++){var p=i[u];if(p&&p.length>=o){var h,v=[],f=(0,a.Z)(p);try{for(f.s();!(h=f.n()).done;){var y=h.value;v.push([y[0]+l,y[1]])}}catch(_){f.e(_)}finally{f.f()}i.push(v)}}return r?e.rings=i:e.paths=i,e}var Z=(0,r.Z)((function e(t,n){(0,i.Z)(this,e),this.extent=t,this.frameIds=n})),T=(0,l.Ue)(),E=function(){function e(){(0,i.Z)(this,e),this._linesIn=[],this._linesOut=[]}return(0,r.Z)(e,[{key:"cut",value:function(e,t){var n;if(this._xCut=t,e.rings)this._closed=!0,n=e.rings,this._minPts=4;else{if(!e.paths)return null;this._closed=!1,n=e.paths,this._minPts=2}var r,i=(0,a.Z)(n);try{for(i.s();!(r=i.n()).done;){var o=r.value;if(o&&!(o.length<this._minPts)){var s,l=!0,u=(0,a.Z)(o);try{for(u.s();!(s=u.n()).done;){var c=s.value;l?(this.moveTo(c),l=!1):this.lineTo(c)}}catch(b){u.e(b)}finally{u.f()}this._closed&&this.close()}}}catch(b){i.e(b)}finally{i.f()}this._pushLineIn(),this._pushLineOut(),n=[];var d,p=(0,a.Z)(this._linesIn);try{for(p.s();!(d=p.n()).done;){var h=d.value;h&&h.length>=this._minPts&&n.push(h)}}catch(b){p.e(b)}finally{p.f()}var v,f=-2*this._xCut,y=(0,a.Z)(this._linesOut);try{for(y.s();!(v=y.n()).done;){var _=v.value;if(_&&_.length>=this._minPts){var m,g=(0,a.Z)(_);try{for(g.s();!(m=g.n()).done;){m.value[0]+=f}}catch(b){g.e(b)}finally{g.f()}n.push(_)}}}catch(b){y.e(b)}finally{y.f()}return this._closed?e.rings=n:e.paths=n,e}},{key:"moveTo",value:function(e){this._pushLineIn(),this._pushLineOut(),this._prevSide=this._side(e[0]),this._moveTo(e[0],e[1],this._prevSide),this._prevPt=e,this._firstPt=e}},{key:"lineTo",value:function(e){var t=this._side(e[0]);if(t*this._prevSide==-1){var n=this._intersect(this._prevPt,e);this._lineTo(this._xCut,n,0),this._prevSide=0,this._lineTo(e[0],e[1],t)}else this._lineTo(e[0],e[1],t);this._prevSide=t,this._prevPt=e}},{key:"close",value:function(){var e=this._firstPt,t=this._prevPt;e[0]===t[0]&&e[1]===t[1]||this.lineTo(e),this._checkClosingPt(this._lineIn),this._checkClosingPt(this._lineOut)}},{key:"_moveTo",value:function(e,t,n){this._closed?(this._lineIn.push([n<=0?e:this._xCut,t]),this._lineOut.push([n>=0?e:this._xCut,t])):(n<=0&&this._lineIn.push([e,t]),n>=0&&this._lineOut.push([e,t]))}},{key:"_lineTo",value:function(e,t,n){this._closed?(k(this._lineIn,n<=0?e:this._xCut,t),k(this._lineOut,n>=0?e:this._xCut,t)):n<0?(0===this._prevSide&&this._pushLineOut(),this._lineIn.push([e,t])):n>0?(0===this._prevSide&&this._pushLineIn(),this._lineOut.push([e,t])):this._prevSide<0?(this._lineIn.push([e,t]),this._lineOut.push([e,t])):this._prevSide>0&&(this._lineOut.push([e,t]),this._lineIn.push([e,t]))}},{key:"_checkClosingPt",value:function(e){var t=e.length;t>3&&e[0][0]===this._xCut&&e[t-2][0]===this._xCut&&e[1][0]===this._xCut&&(e[0][1]=e[t-2][1],e.pop())}},{key:"_side",value:function(e){return e<this._xCut?-1:e>this._xCut?1:0}},{key:"_intersect",value:function(e,t){var n=(this._xCut-e[0])/(t[0]-e[0]);return e[1]+n*(t[1]-e[1])}},{key:"_pushLineIn",value:function(){this._lineIn&&this._lineIn.length>=this._minPts&&this._linesIn.push(this._lineIn),this._lineIn=[]}},{key:"_pushLineOut",value:function(){this._lineOut&&this._lineOut.length>=this._minPts&&this._linesOut.push(this._lineOut),this._lineOut=[]}}]),e}();function k(e,t,n){var r=e.length;r>1&&e[r-1][0]===t&&e[r-2][0]===t?e[r-1][1]=n:e.push([t,n])}},59568:function(e,t,n){n.d(t,{L:function(){return f}});var r=n(15671),i=n(43144),a=n(60136),o=n(29388),s=n(27366),l=n(7138),u=n(49861),c=(n(93169),n(32718),n(84936),n(69912)),d=n(80885),p=n(79803),h=n(65156),v=n(47991),f=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(e){return(0,r.Z)(this,n),t.call(this,e)}return(0,i.Z)(n,[{key:"bounds",get:function(){var e=this.coords;return null==(null===e||void 0===e?void 0:e.extent)?null:(0,h.oJ)(e.extent)}},{key:"coords",get:function(){var e,t=null===(e=this.element.georeference)||void 0===e?void 0:e.coords;return(0,p.projectOrLoad)(t,this.spatialReference).geometry}},{key:"normalizedCoords",get:function(){return d.Z.fromJSON((0,v.Ui)(this.coords))}},{key:"normalizedBounds",get:function(){var e=null!=this.normalizedCoords?this.normalizedCoords.extent:null;return null!=e?(0,h.oJ)(e):null}}]),n}(l.default);(0,s._)([(0,u.Cb)()],f.prototype,"spatialReference",void 0),(0,s._)([(0,u.Cb)()],f.prototype,"element",void 0),(0,s._)([(0,u.Cb)()],f.prototype,"bounds",null),(0,s._)([(0,u.Cb)()],f.prototype,"coords",null),(0,s._)([(0,u.Cb)()],f.prototype,"normalizedCoords",null),(0,s._)([(0,u.Cb)()],f.prototype,"normalizedBounds",null),f=(0,s._)([(0,c.j)("esri.layers.support.MediaElementView")],f)},42069:function(e,t,n){n.d(t,{A:function(){return m}});var r=n(74165),i=n(15861),a=n(15671),o=n(43144),s=n(88301),l=n(61120),u=n(60136),c=n(29388),d=n(27366),p=n(42537),h=n(66978),v=n(94172),f=n(49861),y=(n(93169),n(32718),n(84936),n(69912)),_=n(5354),m=function(e){var t=function(e){(0,u.Z)(n,e);var t=(0,c.Z)(n);function n(){var e;return(0,a.Z)(this,n),(e=t.apply(this,arguments)).slicePlaneEnabled=!1,e.supportsHeightUnitConversion=!1,e}return(0,o.Z)(n,[{key:"postscript",value:function(){(0,s.Z)((0,l.Z)(n.prototype),"postscript",this).call(this),(0,_.qC)(this.layer)&&this.addResolvingPromise(this._validateHeightModelInfo())}},{key:"_validateHeightModelInfo",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var t,n,i,a=this;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new AbortController,n=t.signal,this.addHandles((0,p.kB)((function(){return t.abort()}))),e.next=4,(0,v.whenOnce)((function(){var e;return null===(e=a.view.defaultsFromMap)||void 0===e?void 0:e.heightModelInfoReady}),n);case 4:if((0,h.k_)(n),!(i=(0,_.Wt)(this.layer,this.view.heightModelInfo,this.supportsHeightUnitConversion))){e.next=8;break}throw i;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(e);return(0,d._)([(0,f.Cb)()],t.prototype,"view",void 0),(0,d._)([(0,f.Cb)()],t.prototype,"slicePlaneEnabled",void 0),t=(0,d._)([(0,y.j)("esri.views.3d.layers.LayerView3D")],t)}},48521:function(e,t,n){n.r(t),n.d(t,{default:function(){return ne}});var r=n(29439),i=n(37762),a=n(74165),o=n(15861),s=n(15671),l=n(43144),u=n(88301),c=n(61120),d=n(60136),p=n(29388),h=n(27366),v=n(10064),f=n(42537),y=(n(93169),n(67593)),_=n(66978),m=n(94172),g=n(49861),b=(n(32718),n(84936),n(69912)),x=n(21389),w=n(65156),Z=n(59568),T=n(26279),E=n(42069),k=n(7138),C=n(16889),I=n(92026),P=n(68860),O=n(50264),S=n(55364),A=n(13611),D=n(6644),R=n(46634),M=n(1614),L=n(87888),H=n(44270),j=Symbol(),U=Symbol(),V=function(e){(0,d.Z)(i,e);var t=(0,p.Z)(i);function i(e){var n;return(0,s.Z)(this,i),(n=t.call(this,e)).enabled=!1,n._updatingHandles=new R.R,n._isOpacityToggled=!1,n._factor=1,n._tool=null,n._object=null,n._createToolAbortController=null,n._onPointerMove=(0,_.Ds)(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._updatingHandles.addPromise(n._findElementAtScreenPoint(t));case 2:r=e.sent,n.destroyed||(n.removeHandles(U),r&&r!==n.selectedElement&&(n.view.cursor="pointer",n.addHandles((0,f.kB)((function(){return n.view.cursor=null})),U)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n._tmpMat2=(0,S.Ue)(),n._tmpVec2=(0,D.Ue)(),n}return(0,l.Z)(i,[{key:"updating",get:function(){return this._updatingHandles.updating}},{key:"_preferredInteractionTool",get:function(){var e,t;return null!==(e=null===(t=this.options)||void 0===t?void 0:t.tool)&&void 0!==e?e:"transform"}},{key:"_toolType",get:function(){switch(this._preferredInteractionTool){case"transform":return"transform-3d";case"reshape":return"reshape-3d"}}},{key:"_validatedSelectedElement",get:function(){var e=this.selectedElement;if(!e)return null;var t=this.layer.source;return t?"hasElement"in t?t.hasElement(e)?e:null:t===e?e:null:null}},{key:"destroy",value:function(){this._createToolAbortController=(0,I.IM)(this._createToolAbortController)}},{key:"initialize",value:function(){var e=this;this.addHandles([(0,f.ed)(this._updatingHandles),this._updatingHandles.add((function(){return e.enabled}),(function(t){return e._enableDisable(t)}),m.initial),this._updatingHandles.add((function(){return e._preferredInteractionTool}),(function(t){return e._preferredInteractionToolChanged(t)}))])}},{key:"_enableDisable",value:function(e){var t=this;if(e){this._dynamicImports();var n=this.view,r=new L.G7;r.add(L.Lk.undo,(function(){var e,n,r;null!==(e=t._object)&&void 0!==e&&null!==(n=e.operations)&&void 0!==n&&n.undo(),null===(r=t._object)||void 0===r||r.emit("modified-externally")})),r.add(L.Lk.redo,(function(){var e,n,r;null!==(e=t._object)&&void 0!==e&&null!==(n=e.operations)&&void 0!==n&&n.redo(),null===(r=t._object)||void 0===r||r.emit("modified-externally")})),r.addToggle(L.Lk.preserveAspectRatio,(function(e){var n;"transform-3d"===(null===(n=t._tool)||void 0===n?void 0:n.type)&&(t._tool.preserveAspectRatio="key-down"===e.type)})),r.addToggle(L.Lk.rotateIncrements,(function(e){var n;"transform-3d"===(null===(n=t._tool)||void 0===n?void 0:n.type)&&(t._tool.snapRotation="key-down"===e.type)})),r.add(L.Lk.toggleOpacity,(function(){var e,n=null===(e=t._object)||void 0===e?void 0:e.element;n&&(n.opacity*=t._isOpacityToggled?2:.5,t._isOpacityToggled=!t._isOpacityToggled)})),r.add(L.Lk.moveUp,(function(){return t._move(0,t._factor)})),r.add(L.Lk.moveDown,(function(){return t._move(0,-t._factor)})),r.add(L.Lk.moveRight,(function(){return t._move(t._factor,0)})),r.add(L.Lk.moveLeft,(function(){return t._move(-t._factor,0)})),r.addToggle(L.Lk.factorModifier,(function(e){return t._factor="key-down"===e.type?10:1})),this._isOpacityToggled=!1,this.addHandles([r.register(n,M.f.TOOL),(0,f.kB)((function(){t._isOpacityToggled&&t.selectedElement&&(t.selectedElement.opacity*=2,t._isOpacityToggled=!1)})),n.on("immediate-click",(function(e){return t._onClick(e)}),M.f.TOOL),n.on("pointer-move",(function(e){return t._onPointerMove(e).catch((function(){}))}),M.f.TOOL),this._updatingHandles.add((function(){return t._validatedSelectedElement}),(function(e,n){n&&e!==n&&t._isOpacityToggled&&(n.opacity*=2,t._isOpacityToggled=!1),t._selectedElementChanged(e)}),m.initial),(0,f.kB)((function(){n.cursor=null,t._removeTool()}))],j)}else this.removeHandles(j)}},{key:"_onClick",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n=this;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._updatingHandles.addPromise(t.async((0,o.Z)((0,a.Z)().mark((function e(){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._findElementAtScreenPoint(t);case 2:r=e.sent,n.destroyed||(r&&t.stopPropagation(),n.selectedElement=r,n.selectedElement&&(n.view.cursor=null));case 4:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_selectedElementChanged",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===t||void 0===t||!t.georeference){e.next=7;break}if(e.t0=(null===(n=this._object)||void 0===n?void 0:n.element)!==t,!e.t0){e.next=5;break}return e.next=5,this._updatingHandles.addPromise(this._recreateTool());case 5:e.next=8;break;case 7:this._removeTool();case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_recreateTool",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){var t,n,r,i,o,s,l,u,c,d,p,h,v=this;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._createToolAbortController=(0,I.IM)(this._createToolAbortController),this._removeTool(),t=this._validatedSelectedElement){e.next=4;break}return e.abrupt("return");case 4:return n=new AbortController,this._createToolAbortController=n,e.next=8,this._dynamicImports();case 8:if(r=e.sent,i=r.ManipulatedObject3DMediaElement,o=r.ExtentTransformTool,s=r.ReshapeTool3D,!n.signal.aborted){e.next=14;break}return e.abrupt("return");case 14:l=this.view,u=this.layer,c=this._toolType,e.t0=(this._object=new i({view:l,layer:u,element:t,tool:this._preferredInteractionTool}),c),e.next="transform-3d"===e.t0?18:"reshape-3d"===e.t0?22:26;break;case 18:return this._tool=new o({view:l,object:this._object}),(d=l.inputManager).isModifierKeyDown(L.Lk.rotateIncrements.key)&&(this._tool.snapRotation=!0),d.isModifierKeyDown(L.Lk.preserveAspectRatio.key)&&(this._tool.preserveAspectRatio=!0),e.abrupt("break",26);case 22:p=(0,H.u)(l),this.addHandles(p,this._tool),h=p.snappingManager,this._tool=new s({view:l,object:this._object,enableMidpoints:!1,enableZShape:!1,snappingManager:h,enableMoveObject:!1,autoHideManipulators:!0,enableDeleteVertices:!1});case 26:this.addHandles([(0,f.kB)((function(){v._object=(0,I.SC)(v._object),v._tool&&(l.tools.remove(v._tool),v._tool=null)}))],this._tool),l.addAndActivateTool(this._tool);case 27:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_preferredInteractionToolChanged",value:function(e){var t=this._tool;if(t)if(this._toolType===t.type){var n=this._object;n&&(n.tool=e)}else this._updatingHandles.addPromise(this._recreateTool())}},{key:"_dynamicImports",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){var t,i,o,s,l,u;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([Promise.all([n.e(17877),n.e(82723),n.e(2582)]).then(n.bind(n,2582)),Promise.all([n.e(17877),n.e(52162),n.e(96026),n.e(10039),n.e(97411),n.e(95537),n.e(29950),n.e(76412),n.e(95050),n.e(18320),n.e(29606),n.e(98035),n.e(6599),n.e(63336),n.e(30440)]).then(n.bind(n,63336))]);case 2:return t=e.sent,i=(0,r.Z)(t,2),o=i[0].ManipulatedObject3DMediaElement,s=i[1],l=s.ExtentTransformTool,u=s.ReshapeTool3D,e.abrupt("return",{ManipulatedObject3DMediaElement:o,ExtentTransformTool:l,ReshapeTool3D:u});case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_findElementAtScreenPoint",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.view.hitTest(t,{include:[this.layer]});case 2:return n=e.sent.results[0],e.abrupt("return","media"===(null===n||void 0===n?void 0:n.type)?n.element:null);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_removeTool",value:function(){this._tool&&this.removeHandles(this._tool)}},{key:"_move",value:function(e,t){var n=this.view,r=this._object,i=null===r||void 0===r?void 0:r.operations;if(i){var a=n.overlayPixelSizeInMapUnits(n.pointsOfInterest.focus.location)*(0,P.c9)(n.spatialReference)/(0,P.c9)(i.data.spatialReference),o=this._tmpMat2,s=this._tmpVec2,l=(0,O.Us)(o,(0,C.Vl)(360-this.view.camera.heading)),u=(0,A.t8)(s,a*e,a*t);(0,A.iu)(u,u,l),i.move(u[0],u[1],0),r.emit("modified-externally")}}}]),i}(k.default);(0,h._)([(0,g.Cb)({constructOnly:!0})],V.prototype,"view",void 0),(0,h._)([(0,g.Cb)({constructOnly:!0})],V.prototype,"layer",void 0),(0,h._)([(0,g.Cb)()],V.prototype,"selectedElement",void 0),(0,h._)([(0,g.Cb)()],V.prototype,"enabled",void 0),(0,h._)([(0,g.Cb)()],V.prototype,"options",void 0),(0,h._)([(0,g.Cb)()],V.prototype,"updating",null),(0,h._)([(0,g.Cb)()],V.prototype,"_preferredInteractionTool",null),(0,h._)([(0,g.Cb)()],V.prototype,"_validatedSelectedElement",null),V=(0,h._)([(0,b.j)("esri.views.3d.layers.support.MediaLayerInteraction")],V);var z=n(19265),G=n(91526),N=n(40779),W=n(78289),B=n(39077),F=n(1487),X=n(78485),J=n(4760),Y=n(66156),K=n(67581),q=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(){var e;return(0,s.Z)(this,n),(e=t.apply(this,arguments)).tool="transform",e}return(0,l.Z)(n)}(k.default);(0,h._)([(0,g.Cb)()],q.prototype,"tool",void 0),q=(0,h._)([(0,b.j)("esri.views.3d.layers.support.MediaLayerInteractionOptions")],q);var $=n(69787),Q=n(8548),ee=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(e){var r;(0,s.Z)(this,n),(r=t.call(this,e)).type="media-3d",r.drapeSourceType=T.Lw.RasterImage,r.updatePolicy=X.j.ASYNC,r._uidToElement=new Map,r._renderedElements=new Map,r._lastDrapingExtent=null,r._update=(0,_.Ds)(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,n,i){var o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._collectMediaElements(t,n,i);case 2:o=e.sent,r._synchronizeRenderElements(o);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),0);var i=e.view,l=e.layer;return r._interaction=new V({view:i,layer:l}),r.addHandles((0,m.watch)((function(){return r.interactionOptions}),(function(e){return r._interaction.options=e}),m.syncAndInitial)),r}return(0,l.Z)(n,[{key:"interactive",get:function(){return this._interaction.enabled},set:function(e){this._interaction&&(this._interaction.enabled=e)}},{key:"selectedElement",get:function(){return this._interaction.selectedElement},set:function(e){this._interaction&&(this._interaction.selectedElement=e)}},{key:"visibleAtCurrentScale",get:function(){return(0,$.GB)(this.layer.effectiveScaleRange,this.view.terrainScale)}},{key:"initialize",value:function(){var e=this,t=this.view,n=this.layer;this._renderer=t.basemapTerrain.overlayManager.registerGeometryDrapeSource(this);var r=function(){return e._updateWithLastDrapingExtent()};this.addHandles([(0,f.kB)((function(){return t.basemapTerrain.overlayManager.unregisterDrapeSource(e)})),(0,m.on)((function(){return n.effectiveSource}),"change",r),(0,m.on)((function(){return n.effectiveSource}),"refresh",r)]),this._updatingHandles.add((function(){return e.suspended}),r)}},{key:"setDrapingExtent",value:function(e,t){this._lastDrapingExtent={overlays:e,spatialReference:t},this._updateWithLastDrapingExtent()}},{key:"getHit",value:function(e){var t=this._uidToElement.get(e);return t?{type:"media",element:t,layer:this.layer}:null}},{key:"isUpdating",value:function(){return(0,u.Z)((0,c.Z)(n.prototype),"isUpdating",this).call(this)||this._interaction.updating}},{key:"_updateWithLastDrapingExtent",value:function(){if(null==this._lastDrapingExtent||this.suspended)this._renderer&&this._synchronizeRenderElements(new Set);else{var e=this._lastDrapingExtent,t=e.overlays,n=e.spatialReference;this._updatingHandles.addPromise(this._update(t,n).catch((function(){})))}}},{key:"_collectMediaElements",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,n,r){var i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(i=this.layer.effectiveSource)){e.next=5;break}e.t0=new Set,e.next=10;break;case 5:return e.t1=Set,e.next=8,Promise.all(t.map((function(e){return i.queryElements((0,w.HH)(e.extent,n),{signal:r})})));case 8:e.t2=e.sent.flat(),e.t0=new e.t1(e.t2);case 10:return e.abrupt("return",e.t0);case 11:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"_synchronizeRenderElements",value:function(e){this._synchronizeRenderElementsRemove(e),this._synchronizeRenderElementsAdd(e)}},{key:"_synchronizeRenderElementsRemove",value:function(e){var t=this,n=[];this._renderedElements.forEach((function(r,i){e.has(i)||(null!=r.renderData&&n.push(r.renderData.renderGeometry),t._removeElement(i,r),t.emit("element-render-changed",{element:i}))}))}},{key:"_synchronizeRenderElementsAdd",value:function(e){var t,n=(0,i.Z)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this._renderedElements.has(r)||this._createRenderElement(r)}}catch(a){n.e(a)}finally{n.f()}}},{key:"_removeElement",value:function(e,t){var n=t.renderData,r=t.handle;this._destroyRenderData(e,n),this._renderedElements.delete(e),this._uidToElement.delete(e.uid),r.remove()}},{key:"_createRenderElement",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n,r,i=this;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=new Z.L({spatialReference:this.view.spatialReference,element:t}),r={renderData:null,handle:(0,f.AL)([this._updatingHandles.add((function(){return t.opacity}),(function(e){null!=r.renderData&&r.renderData.material.setParameters({opacity:e})})),this._updatingHandles.add((function(){return n.coords}),(function(){null!=r.renderData?i._updateGeometry(n,r,r.renderData):i._initializeRenderData(n,r)})),this._updatingHandles.add((function(){return t.content}),(function(){return i._initializeRenderData(n,r)})),(0,f.ed)(n)])},this._renderedElements.set(t,r),this._uidToElement.set(t.uid,t),this._updatingHandles.addPromise(t.load().catch((function(){}))),this._initializeRenderData(n,r);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_initializeRenderData",value:function(e,t){var n=e.coords,r=e.element,i=r.contentWidth,a=r.contentHeight;if(null!=n&&null!=r.content){if(null==t.renderData){var o=this._createTexture(r.content),s=o.load(this.view._stage.renderView.renderingContext);this.view._stage.add(o),(0,_.y8)(s)&&this._updatingHandles.addPromise(s);var l=new Y.j({initTextureTransparent:!0,textureId:o.id,opacity:r.opacity,transparent:!0,perspectiveInterpolation:!0}),u=this._getPositionAttributeArray(n),c=this._getPerspectiveDivideAttributeArray(u,i,a),d=[0,1,2,0,2,3],p=new N.Z(l,[[J.T.POSITION,new G.a(u,d,3,!0)],[J.T.UV0,new G.a([0,0,1,0,1,1,0,1],d,2,!0)],[J.T.PERSPECTIVEDIVIDE,new G.a(c,d,1,!0)]]),h=new B.z(p,{layerUid:this.layer.uid,graphicUid:r.uid});this._renderer.addGeometries([h],W.T.ADD),t.renderData={renderGeometry:h,texture:o,material:l},this.emit("element-render-changed",{element:r})}}else t.renderData=this._destroyRenderData(r,t.renderData)}},{key:"_updateGeometry",value:function(e,t,n){var r=e.coords,i=e.element;if(null!=r&&null!=i.content){var a=this._getPositionAttributeArray(r);n.renderGeometry.geometry.setAttributeData(J.T.POSITION,a);var o=this._getPerspectiveDivideAttributeArray(a,i.contentWidth,i.contentHeight);n.renderGeometry.geometry.setAttributeData(J.T.PERSPECTIVEDIVIDE,o),n.renderGeometry.geometry.invalidateBoundingInfo(),this._renderer.modifyGeometries([n.renderGeometry],W.$.GEOMETRY),this.emit("element-render-changed",{element:i})}else t.renderData=this._destroyRenderData(i,t.renderData)}},{key:"_getPositionAttributeArray",value:function(e){var t=(0,r.Z)(e.rings[0],4),n=t[0],i=t[1],a=t[2],o=t[3];return[n[0],n[1],z.gi,o[0],o[1],z.gi,a[0],a[1],z.gi,i[0],i[1],z.gi]}},{key:"_getPerspectiveDivideAttributeArray",value:function(e,t,n){(0,y.E)(te,[0,0,t,0,t,n,0,n],[e[0],e[1],e[3],e[4],e[6],e[7],e[9],e[10]]);var r=te[6]/te[8]*t,i=te[7]/te[8]*n;return[1,1+r,1+r+i,1+i]}},{key:"_destroyRenderData",value:function(e,t){if(null==t)return null;var n=t.texture;return n.unload(),this.view._stage.remove(n),this._renderer.removeGeometries([t.renderGeometry],W.T.REMOVE),this.emit("element-render-changed",{element:e}),null}},{key:"_createTexture",value:function(e){var t=this,n=e instanceof HTMLImageElement?e.naturalWidth:e.width,r=e instanceof HTMLImageElement?e.naturalHeight:e.height;if("getFrame"in e)throw new v.Z("media-layer-view-3d","animation is not supported");return new F.x(e,{wrap:{s:Q.e8.CLAMP_TO_EDGE,t:Q.e8.CLAMP_TO_EDGE},preMultiplyAlpha:!0,width:n,height:r,mipmap:!0,updateCallback:function(){return t.view.basemapTerrain.overlayManager.setDrawTexturesDirty()}})}},{key:"test",get:function(){}}]),n}((0,E.A)(function(e){var t=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(){var e;(0,s.Z)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).layer=null,e.interactive=!1,e.interactionOptions=new q,e.selectedElement=null,e}return(0,l.Z)(n)}(e);return(0,h._)([(0,g.Cb)()],t.prototype,"layer",void 0),(0,h._)([(0,g.Cb)()],t.prototype,"interactive",void 0),(0,h._)([(0,g.Cb)()],t.prototype,"interactionOptions",void 0),(0,h._)([(0,g.Cb)()],t.prototype,"selectedElement",void 0),t=(0,h._)([(0,b.j)("esri.views.layers.MediaLayerView")],t)}(K.Z)));(0,h._)([(0,g.Cb)({readOnly:!0})],ee.prototype,"type",void 0),(0,h._)([(0,g.Cb)()],ee.prototype,"layer",void 0),(0,h._)([(0,g.Cb)()],ee.prototype,"interactive",null),(0,h._)([(0,g.Cb)()],ee.prototype,"selectedElement",null),(0,h._)([(0,g.Cb)({readOnly:!0})],ee.prototype,"visibleAtCurrentScale",null),ee=(0,h._)([(0,b.j)("esri.views.3d.layers.MediaLayerView3D")],ee);var te=(0,x.Ue)(),ne=ee},66156:function(e,t,n){n.d(t,{j:function(){return V}});var r=n(37762),i=n(1413),a=n(15671),o=n(43144),s=n(60136),l=n(29388),u=n(25158),c=n(37081),d=n(68401),p=n(17363),h=n(56529),v=n(78041),f=n(93822),y=n(97731),_=n(4760),m=n(12594),g=n(64642),b=n(11983),x=n(33236),w=n(88301),Z=n(61120),T=n(27366),E=n(98634),k=n(82144),C=n(31132),I=n(33559),P=n(27627),O=n(50411),S=n(25920),A=n(8883),D=n(32500),R=n(8548),M=n(36207),L=(E.K,function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(){return(0,a.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"initializeProgram",value:function(e){return new P.$(e.rctx,n.shader.get().build(this.configuration),U)}},{key:"_setPipelineState",value:function(e,t){var n=this.configuration,r=e===S.A.NONE,i=e===S.A.FrontFace;return(0,M.sm)({blending:n.output===c.H_.Color&&n.transparent?r?H:(0,v.j7)(e):null,culling:(0,M.zp)(n.cullFace),depthTest:{func:(0,v.Bh)(e)},depthWrite:r?n.writeDepth?M.LZ:null:(0,v.K5)(e),drawBuffers:(0,v.V7)(e),colorWrite:M.BK,stencilWrite:n.hasOccludees?O.s3:null,stencilTest:n.hasOccludees?t?O.eD:O.RY:null,polygonOffset:r||i?null:(0,v.je)(n.enableOffset)})}},{key:"initializePipeline",value:function(){return this._occludeePipelineState=this._setPipelineState(this.configuration.transparencyPassType,!0),this._setPipelineState(this.configuration.transparencyPassType,!1)}},{key:"getPipeline",value:function(e){return e?this._occludeePipelineState:(0,w.Z)((0,Z.Z)(n.prototype),"getPipeline",this).call(this)}}]),n}(C.A));L.shader=new k.J(D.I,(function(){return n.e(18957).then(n.bind(n,18957))}));var H=(0,M.if)(R.zi.ONE,R.zi.ONE_MINUS_SRC_ALPHA),j=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(){var e;return(0,a.Z)(this,n),(e=t.apply(this,arguments)).output=c.H_.Color,e.cullFace=d.Vr.None,e.hasSlicePlane=!1,e.transparent=!1,e.enableOffset=!0,e.writeDepth=!0,e.hasOccludees=!1,e.transparencyPassType=S.A.NONE,e.multipassEnabled=!1,e.cullAboveGround=!1,e.perspectiveInterpolation=!0,e}return(0,o.Z)(n)}(A.W);(0,T._)([(0,I.o)({count:c.H_.COUNT})],j.prototype,"output",void 0),(0,T._)([(0,I.o)({count:d.Vr.COUNT})],j.prototype,"cullFace",void 0),(0,T._)([(0,I.o)()],j.prototype,"hasSlicePlane",void 0),(0,T._)([(0,I.o)()],j.prototype,"transparent",void 0),(0,T._)([(0,I.o)()],j.prototype,"enableOffset",void 0),(0,T._)([(0,I.o)()],j.prototype,"writeDepth",void 0),(0,T._)([(0,I.o)()],j.prototype,"hasOccludees",void 0),(0,T._)([(0,I.o)({count:S.A.COUNT})],j.prototype,"transparencyPassType",void 0),(0,T._)([(0,I.o)()],j.prototype,"multipassEnabled",void 0),(0,T._)([(0,I.o)()],j.prototype,"cullAboveGround",void 0),(0,T._)([(0,I.o)()],j.prototype,"perspectiveInterpolation",void 0),(0,T._)([(0,I.o)({constValue:!1})],j.prototype,"occlusionPass",void 0);var U=new Map([[_.T.POSITION,0],[_.T.UV0,2],[_.T.PERSPECTIVEDIVIDE,3]]),V=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(e){var r;return(0,a.Z)(this,n),(r=t.call(this,e,new N)).supportsEdges=!0,r.produces=new Map([[f.r.OPAQUE_MATERIAL,function(e){return(0,c.ou)(e)||(0,c.D5)(e)&&!r.parameters.transparent}],[f.r.TRANSPARENT_MATERIAL,function(e){return(0,c.D5)(e)&&r.parameters.transparent&&r.parameters.writeDepth}],[f.r.TRANSPARENT_DEPTH_WRITE_DISABLED_MATERIAL,function(e){return(0,c.D5)(e)&&r.parameters.transparent&&!r.parameters.writeDepth}],[f.r.DRAPED_MATERIAL,function(e){return(0,c.D5)(e)||(0,c.ou)(e)}]]),r._vertexAttributeLocations=U,r._configuration=new j,r}return(0,o.Z)(n,[{key:"getConfiguration",value:function(e,t){return this._configuration.output=e,this._configuration.cullFace=this.parameters.cullFace,this._configuration.hasSlicePlane=this.parameters.hasSlicePlane,this._configuration.transparent=this.parameters.transparent,this._configuration.writeDepth=this.parameters.writeDepth,this._configuration.hasOccludees=this.parameters.hasOccludees,this._configuration.transparencyPassType=t.transparencyPassType,this._configuration.enableOffset=t.camera.relativeElevation<v.ve,this._configuration.multipassEnabled=t.multipassEnabled,this._configuration.cullAboveGround=t.multipassTerrain.cullAboveGround,this._configuration.perspectiveInterpolation=this.parameters.perspectiveInterpolation,this._configuration}},{key:"createGLMaterial",value:function(e){return new z(e)}},{key:"createBufferWriter",value:function(){var e=g.W1.clone();return this.parameters.perspectiveInterpolation&&e.f32(_.T.PERSPECTIVEDIVIDE),new G(e)}}]),n}(b.c),z=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(e){return(0,a.Z)(this,n),t.call(this,(0,i.Z)((0,i.Z)({},e),e.material.parameters))}return(0,o.Z)(n,[{key:"_updateParameters",value:function(e){return this.updateTexture(this._material.parameters.textureId),this._material.setParameters(this.textureBindParameters),this.ensureTechnique(L,e)}},{key:"_updateOccludeeState",value:function(e){e.hasOccludees!==this._material.parameters.hasOccludees&&(this._material.setParameters({hasOccludees:e.hasOccludees}),this._updateParameters(e))}},{key:"beginSlot",value:function(e){return this._output===c.H_.Color&&this._updateOccludeeState(e),this._updateParameters(e)}}]),n}(p.F),G=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(){return(0,a.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"write",value:function(e,t,n,i,a){var o,s=(0,r.Z)(this.vertexBufferLayout.fields.keys());try{for(s.s();!(o=s.n()).done;){var l=o.value,c=n.attributes.get(l);if(c)if(l===_.T.PERSPECTIVEDIVIDE){(0,y.hu)(1===c.size);var d=i.getField(l,u.ly);d&&(0,x.XW)(c,d,a)}else(0,x.i9)(l,c,e,t,i,a)}}catch(p){s.e(p)}finally{s.f()}}}]),n}(m.G),N=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(){var e;return(0,a.Z)(this,n),(e=t.apply(this,arguments)).transparent=!1,e.writeDepth=!0,e.hasSlicePlane=!1,e.cullFace=d.Vr.None,e.hasOccludees=!1,e.opacity=1,e.textureId=null,e.initTextureTransparent=!0,e.perspectiveInterpolation=!1,e}return(0,o.Z)(n)}(h.Mt)},44270:function(e,t,n){n.d(t,{u:function(){return v}});var r=n(1413),i=n(42537),a=n(70758),o=n(80987),s=n(94172),l=n(22006),u=n(76014),c=n(98173);var d=n(27357),p=n(38856),h=new Map;function v(e){if(!h.has(e)){var t=function(e,t){var n,i,a=new c.Z({enabled:!0,selfEnabled:!1,featureEnabled:!0,distance:null!==(n=null===t||void 0===t?void 0:t.distance)&&void 0!==n?n:u.c.distance,touchSensitivityMultiplier:null!==(i=null===t||void 0===t?void 0:t.touchSensitivityMultiplier)&&void 0!==i?i:u.c.touchSensitivityMultiplier});return(0,r.Z)((0,r.Z)({},(0,s.watch)((function(){var t,n,r;return null!==(t=null===(n=e.map)||void 0===n||null===(r=n.allLayers)||void 0===r?void 0:r.toArray())&&void 0!==t?t:[]}),(function(e){a.featureSources=new o.Z(e.map((function(e){return new l.Z({layer:e})})))}),s.initial)),{},{options:a})}(e,{distance:10}),n=function(e,t){return new p.N({view:e,options:t,snappingEnginesFactory:function(t,n){return[new d.U({view:e,spatialReference:e.spatialReference,options:n})]}})}(e,t.options);h.set(e,{referenceCount:0,snappingManager:n,remove:function(){t.remove(),n.destroy()}})}var v=h.get(e);v.referenceCount++;var f=(0,i.kB)((function(){return t=e,(n=v).referenceCount--,void(n.referenceCount>0||(0,a.Y)((function(){0===n.referenceCount&&(n.remove(),h.delete(t))})));var t,n}));return(0,r.Z)({snappingManager:v.snappingManager},f)}},67581:function(e,t,n){n.d(t,{Z:function(){return g}});var r=n(15671),i=n(43144),a=n(60136),o=n(29388),s=n(27366),l=n(7138),u=n(91505),c=n(79056),d=n(32718),p=n(92026),h=n(67426),v=n(49861),f=(n(93169),n(84936),n(69912)),y=n(46634),_=n(69787),m=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(e){var i;return(0,r.Z)(this,n),(i=t.call(this,e))._updatingHandles=new y.R,i.layer=null,i.parent=null,i}return(0,i.Z)(n,[{key:"initialize",value:function(){var e=this;this.when().catch((function(t){if("layerview:create-error"!==t.name){var n,r=e.layer&&e.layer.id||"no id",i=(null===(n=e.layer)||void 0===n?void 0:n.title)||"no title";d.Z.getLogger(e).error("#resolve()","Failed to resolve layer view (layer title: '".concat(i,"', id: '").concat(r,"')"),t)}}))}},{key:"destroy",value:function(){this._updatingHandles=(0,p.SC)(this._updatingHandles)}},{key:"fullOpacity",get:function(){var e,t,n,r;return(null!==(e=null===(t=this.layer)||void 0===t?void 0:t.opacity)&&void 0!==e?e:1)*(null!==(n=null===(r=this.parent)||void 0===r?void 0:r.fullOpacity)&&void 0!==n?n:1)}},{key:"suspended",get:function(){return this.destroyed||!this.canResume()}},{key:"suspendInfo",get:function(){return this.getSuspendInfo()}},{key:"legendEnabled",get:function(){var e;return!this.suspended&&!0===(null===(e=this.layer)||void 0===e?void 0:e.legendEnabled)}},{key:"updating",get:function(){var e;return!((null===(e=this._updatingHandles)||void 0===e||!e.updating)&&!this.isUpdating())}},{key:"updatingProgress",get:function(){return this.updating?0:1}},{key:"updateSuspended",get:function(){return this.suspended}},{key:"visible",get:function(){var e;return!0===(null===(e=this.layer)||void 0===e?void 0:e.visible)},set:function(e){this._overrideIfSome("visible",e)}},{key:"visibleAtCurrentScale",get:function(){return!0}},{key:"visibleAtCurrentTimeExtent",get:function(){var e,t=this.view.timeExtent,n=null===(e=this.layer)||void 0===e?void 0:e.visibilityTimeExtent;return!t||!n||!t.intersection(n).isEmpty}},{key:"canResume",value:function(){var e,t,n,r=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;return this.visible&&(null===(e=this.layer)||void 0===e?void 0:e.loaded)&&!(null!==(t=this.parent)&&void 0!==t&&t.suspended)&&(null===(n=this.view)||void 0===n?void 0:n.ready)&&(0,_.Cy)(r)&&this.visibleAtCurrentScale&&this.visibleAtCurrentTimeExtent||!1}},{key:"getSuspendInfo",value:function(){var e,t,n=null!==(e=this.parent)&&void 0!==e&&e.suspended?this.parent.suspendInfo:{};null!==(t=this.view)&&void 0!==t&&t.ready||(n.viewNotReady=!0),this.layer&&this.layer.loaded||(n.layerNotLoaded=!0);var r=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;return(0,_.Cy)(r)&&this.visibleAtCurrentScale||(n.outsideScaleRange=!0),this.visibleAtCurrentTimeExtent||(n.outsideVisibilityTimeExtent=!0),this.visible||(n.layerInvisible=!0),n}},{key:"isUpdating",value:function(){return!1}}]),n}((0,c.IG)((0,h.v)(u.Z.EventedMixin(l.default))));(0,s._)([(0,v.Cb)()],m.prototype,"view",void 0),(0,s._)([(0,v.Cb)()],m.prototype,"fullOpacity",null),(0,s._)([(0,v.Cb)()],m.prototype,"layer",void 0),(0,s._)([(0,v.Cb)()],m.prototype,"parent",void 0),(0,s._)([(0,v.Cb)({readOnly:!0})],m.prototype,"suspended",null),(0,s._)([(0,v.Cb)({readOnly:!0})],m.prototype,"suspendInfo",null),(0,s._)([(0,v.Cb)({readOnly:!0})],m.prototype,"legendEnabled",null),(0,s._)([(0,v.Cb)({type:Boolean,readOnly:!0})],m.prototype,"updating",null),(0,s._)([(0,v.Cb)({readOnly:!0})],m.prototype,"updatingProgress",null),(0,s._)([(0,v.Cb)()],m.prototype,"updateSuspended",null),(0,s._)([(0,v.Cb)()],m.prototype,"visible",null),(0,s._)([(0,v.Cb)({readOnly:!0})],m.prototype,"visibleAtCurrentScale",null),(0,s._)([(0,v.Cb)({readOnly:!0})],m.prototype,"visibleAtCurrentTimeExtent",null);var g=m=(0,s._)([(0,f.j)("esri.views.layers.LayerView")],m)}}]);
//# sourceMappingURL=48521.e68cb708.chunk.js.map