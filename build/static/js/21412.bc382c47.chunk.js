"use strict";(self.webpackChunkreact_training=self.webpackChunkreact_training||[]).push([[21412],{79347:function(e,t,i){i.d(t,{e:function(){return l}});var n,r,o,a=i(84397),s={exports:{}};n=s,r=function(){function e(e,i,r){r=r||2;var o,a,s,c,u,h,v,p=i&&i.length,d=p?i[0]*r:e.length,f=t(e,0,d,r,!0),y=[];if(!f||f.next===f.prev)return y;if(p&&(f=l(e,i,f,r)),e.length>80*r){o=s=e[0],a=c=e[1];for(var x=r;x<d;x+=r)(u=e[x])<o&&(o=u),(h=e[x+1])<a&&(a=h),u>s&&(s=u),h>c&&(c=h);v=0!==(v=Math.max(s-o,c-a))?1/v:0}return n(f,y,r,o,a,v),y}function t(e,t,i,n,r){var o,a;if(r===C(e,t,i,n)>0)for(o=t;o<i;o+=n)a=G(o,e[o],e[o+1],a);else for(o=i-n;o>=t;o-=n)a=G(o,e[o],e[o+1],a);if(a&&m(a,a.next)){var s=a.next;M(a),a=s}return a}function i(e,t){if(!e)return e;t||(t=e);var i,n=e;do{if(i=!1,n.steiner||!m(n,n.next)&&0!==g(n.prev,n,n.next))n=n.next;else{var r=n.prev;if(M(n),(n=t=r)===n.next)break;i=!0}}while(i||n!==t);return t}function n(e,t,l,c,u,h,v){if(e){!v&&h&&p(e,c,u,h);for(var d,f,y=e;e.prev!==e.next;)if(d=e.prev,f=e.next,h?o(e,c,u,h):r(e))t.push(d.i/l),t.push(e.i/l),t.push(f.i/l),M(e),e=f.next,y=f.next;else if((e=f)===y){v?1===v?n(e=a(i(e),t,l),t,l,c,u,h,2):2===v&&s(e,t,l,c,u,h):n(i(e),t,l,c,u,h,1);break}}}function r(e){var t=e.prev,i=e,n=e.next;if(g(t,i,n)>=0)return!1;for(var r=e.next.next;r!==e.prev;){if(y(t.x,t.y,i.x,i.y,n.x,n.y,r.x,r.y)&&g(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function o(e,t,i,n){var r=e.prev,o=e,a=e.next;if(g(r,o,a)>=0)return!1;for(var s=r.x<o.x?r.x<a.x?r.x:a.x:o.x<a.x?o.x:a.x,l=r.y<o.y?r.y<a.y?r.y:a.y:o.y<a.y?o.y:a.y,c=r.x>o.x?r.x>a.x?r.x:a.x:o.x>a.x?o.x:a.x,u=r.y>o.y?r.y>a.y?r.y:a.y:o.y>a.y?o.y:a.y,h=d(s,l,t,i,n),v=d(c,u,t,i,n),p=e.prevZ,f=e.nextZ;p&&p.z>=h&&f&&f.z<=v;){if(p!==e.prev&&p!==e.next&&y(r.x,r.y,o.x,o.y,a.x,a.y,p.x,p.y)&&g(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,f!==e.prev&&f!==e.next&&y(r.x,r.y,o.x,o.y,a.x,a.y,f.x,f.y)&&g(f.prev,f,f.next)>=0)return!1;f=f.nextZ}for(;p&&p.z>=h;){if(p!==e.prev&&p!==e.next&&y(r.x,r.y,o.x,o.y,a.x,a.y,p.x,p.y)&&g(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;f&&f.z<=v;){if(f!==e.prev&&f!==e.next&&y(r.x,r.y,o.x,o.y,a.x,a.y,f.x,f.y)&&g(f.prev,f,f.next)>=0)return!1;f=f.nextZ}return!0}function a(e,t,n){var r=e;do{var o=r.prev,a=r.next.next;!m(o,a)&&_(o,r,r.next,a)&&w(o,a)&&w(a,o)&&(t.push(o.i/n),t.push(r.i/n),t.push(a.i/n),M(r),M(r.next),r=e=a),r=r.next}while(r!==e);return i(r)}function s(e,t,r,o,a,s){var l=e;do{for(var c=l.next.next;c!==l.prev;){if(l.i!==c.i&&x(l,c)){var u=k(l,c);return l=i(l,l.next),u=i(u,u.next),n(l,t,r,o,a,s),void n(u,t,r,o,a,s)}c=c.next}l=l.next}while(l!==e)}function l(e,n,r,o){var a,s,l,u=[];for(a=0,s=n.length;a<s;a++)(l=t(e,n[a]*o,a<s-1?n[a+1]*o:e.length,o,!1))===l.next&&(l.steiner=!0),u.push(f(l));for(u.sort(c),a=0;a<u.length;a++)r=i(r=h(u[a],r),r.next);return r}function c(e,t){return e.x-t.x}function u(e){if(e.next.prev===e)return e;for(var t=e;;){var i=t.next;if(i.prev===t||i===t||i===e)break;t=i}return t}function h(e,t){var n=function(e,t){var i,n=t,r=e.x,o=e.y,a=-1/0;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){var s=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(s<=r&&s>a){if(a=s,s===r){if(o===n.y)return n;if(o===n.next.y)return n.next}i=n.x<n.next.x?n:n.next}}n=n.next}while(n!==t);if(!i)return null;if(r===a)return i;var l,c=i,u=i.x,h=i.y,p=1/0;n=i;do{r>=n.x&&n.x>=u&&r!==n.x&&y(o<h?r:a,o,u,h,o<h?a:r,o,n.x,n.y)&&(l=Math.abs(o-n.y)/(r-n.x),w(n,e)&&(l<p||l===p&&(n.x>i.x||n.x===i.x&&v(i,n)))&&(i=n,p=l)),n=n.next}while(n!==c);return i}(e,t);if(!n)return t;var r=k(n,e),o=i(n,n.next),a=u(r);return i(a,a.next),o=u(o),u(t===n?o:t)}function v(e,t){return g(e.prev,e,t.prev)<0&&g(t.next,e,e.next)<0}function p(e,t,i,n){var r=e;do{null===r.z&&(r.z=d(r.x,r.y,t,i,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==e);r.prevZ.nextZ=null,r.prevZ=null,function(e){var t,i,n,r,o,a,s,l,c=1;do{for(i=e,e=null,o=null,a=0;i;){for(a++,n=i,s=0,t=0;t<c&&(s++,n=n.nextZ);t++);for(l=c;s>0||l>0&&n;)0!==s&&(0===l||!n||i.z<=n.z)?(r=i,i=i.nextZ,s--):(r=n,n=n.nextZ,l--),o?o.nextZ=r:e=r,r.prevZ=o,o=r;i=n}o.nextZ=null,c*=2}while(a>1)}(r)}function d(e,t,i,n,r){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*r)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*r)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function f(e){var t=e,i=e;do{(t.x<i.x||t.x===i.x&&t.y<i.y)&&(i=t),t=t.next}while(t!==e);return i}function y(e,t,i,n,r,o,a,s){return(r-a)*(t-s)-(e-a)*(o-s)>=0&&(e-a)*(n-s)-(i-a)*(t-s)>=0&&(i-a)*(o-s)-(r-a)*(n-s)>=0}function x(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var i=e;do{if(i.i!==e.i&&i.next.i!==e.i&&i.i!==t.i&&i.next.i!==t.i&&_(i,i.next,e,t))return!0;i=i.next}while(i!==e);return!1}(e,t)&&(w(e,t)&&w(t,e)&&function(e,t){var i=e,n=!1,r=(e.x+t.x)/2,o=(e.y+t.y)/2;do{i.y>o!=i.next.y>o&&i.next.y!==i.y&&r<(i.next.x-i.x)*(o-i.y)/(i.next.y-i.y)+i.x&&(n=!n),i=i.next}while(i!==e);return n}(e,t)&&(g(e.prev,e,t.prev)||g(e,t.prev,t))||m(e,t)&&g(e.prev,e,e.next)>0&&g(t.prev,t,t.next)>0)}function g(e,t,i){return(t.y-e.y)*(i.x-t.x)-(t.x-e.x)*(i.y-t.y)}function m(e,t){return e.x===t.x&&e.y===t.y}function _(e,t,i,n){var r=b(g(e,t,i)),o=b(g(e,t,n)),a=b(g(i,n,e)),s=b(g(i,n,t));return r!==o&&a!==s||!(0!==r||!Z(e,i,t))||!(0!==o||!Z(e,n,t))||!(0!==a||!Z(i,e,n))||!(0!==s||!Z(i,t,n))}function Z(e,t,i){return t.x<=Math.max(e.x,i.x)&&t.x>=Math.min(e.x,i.x)&&t.y<=Math.max(e.y,i.y)&&t.y>=Math.min(e.y,i.y)}function b(e){return e>0?1:e<0?-1:0}function w(e,t){return g(e.prev,e,e.next)<0?g(e,t,e.next)>=0&&g(e,e.prev,t)>=0:g(e,t,e.prev)<0||g(e,e.next,t)<0}function k(e,t){var i=new V(e.i,e.x,e.y),n=new V(t.i,t.x,t.y),r=e.next,o=t.prev;return e.next=t,t.prev=e,i.next=r,r.prev=i,n.next=i,i.prev=n,o.next=n,n.prev=o,n}function G(e,t,i,n){var r=new V(e,t,i);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function M(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function V(e,t,i){this.i=e,this.x=t,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function C(e,t,i,n){for(var r=0,o=t,a=i-n;o<i;o+=n)r+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return r}return e.deviation=function(e,t,i,n){var r=t&&t.length,o=r?t[0]*i:e.length,a=Math.abs(C(e,0,o,i));if(r)for(var s=0,l=t.length;s<l;s++){var c=t[s]*i,u=s<l-1?t[s+1]*i:e.length;a-=Math.abs(C(e,c,u,i))}var h=0;for(s=0;s<n.length;s+=3){var v=n[s]*i,p=n[s+1]*i,d=n[s+2]*i;h+=Math.abs((e[v]-e[d])*(e[p+1]-e[v+1])-(e[v]-e[p])*(e[d+1]-e[v+1]))}return 0===a&&0===h?0:Math.abs((h-a)/a)},e.flatten=function(e){for(var t=e[0][0].length,i={vertices:[],holes:[],dimensions:t},n=0,r=0;r<e.length;r++){for(var o=0;o<e[r].length;o++)for(var a=0;a<t;a++)i.vertices.push(e[r][o][a]);r>0&&(n+=e[r-1].length,i.holes.push(n))}return i},e},void 0!==(o=r())&&(n.exports=o);var l=(0,a.g)(s.exports)},90193:function(e,t,i){i.d(t,{n:function(){return r}});var n=i(42265),r=function(){return n.Z.respectPrefersReducedMotion&&window.matchMedia("(prefers-reduced-motion: reduce)").matches}},29691:function(e,t,i){i.d(t,{HQ:function(){return s},VY:function(){return l},rS:function(){return u},wY:function(){return c}});var n=i(83448),r=i(78952),o=i(92975),a=new r.Z(n.kU),s=new r.Z(n.JL),l=new r.Z(n.mM),c=new r.Z(n.pn);function u(e){var t=h.get(e);if(t)return t;var i=a;if(e)if(e===s)i=s;else if(e===l)i=l;else{var n=e.wkid,r=e.latestWkid;if(null!=n||null!=r)(0,o.o$)(n)||(0,o.o$)(r)?i=s:((0,o.ME)(n)||(0,o.ME)(r))&&(i=l);else{var c,u=null!==(c=e.wkt2)&&void 0!==c?c:e.wkt;if(u){var d=u.toUpperCase();d===v?i=s:d===p&&(i=l)}}}return h.set(e,i),i}var h=new Map,v=s.wkt.toUpperCase(),p=l.wkt.toUpperCase()},45238:function(e,t,i){i.d(t,{EU:function(){return x},Ue:function(){return u},WH:function(){return g},ZZ:function(){return y},q_:function(){return p},qw:function(){return f},uT:function(){return h},up:function(){return _},zk:function(){return v}});var n=i(16889),r=i(29134),o=i(68700),a=i(50894),s=i(32035),l=i(12400),c=i(86361);function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_;return[e[0],e[1],e[2],e[3]]}function h(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u();return(0,s.c)(i,e),i[3]=t,i}function v(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,c.Ue)();return(0,s.b)(i,e,t),(0,s.n)(i,i),i[3]=-(0,s.d)(e,t),i}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u(),i=(0,r.j6)(Z,e);return m(t,(0,n.BV)((0,o.Bh)(t,i))),t}function d(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u();return(0,o.yY)(Z,e,g(e)),(0,o.yY)(b,t,g(t)),(0,o.Jp)(Z,b,Z),m(i,(0,n.BV)((0,o.Bh)(i,Z)))}function f(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:u();return h(l.E9,e,w),h(l.IO,t,k),h(l.eG,i,G),d(w,k,w),d(w,G,n),n}function y(e){return e}function x(e){return e[3]}function g(e){return(0,n.Vl)(e[3])}function m(e,t){return e[3]=t,e}var _=[0,0,1,0],Z=(0,a.Ue)(),b=(0,a.Ue)(),w=(u(),u()),k=u(),G=u()},85981:function(e,t,i){i.d(t,{AR:function(){return g},Gr:function(){return x},JG:function(){return u},Jk:function(){return p},KU:function(){return f},Ue:function(){return l},al:function(){return h},ct:function(){return y},nF:function(){return d},re:function(){return c},zk:function(){return v}});var n=i(16889),r=i(21530),o=i(32035),a=i(12400),s=i(51378);function l(e){return e?{origin:(0,a.d9)(e.origin),vector:(0,a.d9)(e.vector)}:{origin:(0,a.Ue)(),vector:(0,a.Ue)()}}function c(e,t){var i=Z.get();return i.origin=e,i.vector=t,i}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l();return h(e.origin,e.vector,t)}function h(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l();return(0,o.c)(i.origin,e),(0,o.c)(i.vector,t),i}function v(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l();return(0,o.c)(i.origin,e),(0,o.f)(i.vector,t,e),i}function p(e,t){var i=(0,o.f)(s.WM.get(),t,e.origin),r=(0,o.m)(e.vector,i),a=(0,o.m)(e.vector,e.vector),l=(0,n.uZ)(r/a,0,1),c=(0,o.f)(s.WM.get(),(0,o.j)(s.WM.get(),e.vector,l),i);return(0,o.m)(c,c)}function d(e,t,i){return y(e,t,0,1,i)}function f(e,t,i){return(0,o.g)(i,e.origin,(0,o.j)(i,e.vector,t))}function y(e,t,i,r,a){var l=e.vector,c=e.origin,u=(0,o.f)(s.WM.get(),t,c),h=(0,o.m)(l,u)/(0,o.q)(l);return(0,o.j)(a,l,(0,n.uZ)(h,i,r)),(0,o.g)(a,a,e.origin)}function x(e,t){if(m(e,c(t.origin,t.direction),!1,_)){var i=_.tA,n=_.pB,r=_.distance2;if(i>=0&&i<=1)return r;if(i<0)return(0,o.a)(e.origin,n);if(i>1)return(0,o.a)((0,o.g)(s.WM.get(),e.origin,e.vector),n)}return null}function g(e,t,i){return!!m(e,t,!0,_)&&((0,o.c)(i,_.pA),!0)}function m(e,t,i,r){var a=1e-6,l=e.origin,c=(0,o.g)(s.WM.get(),l,e.vector),u=t.origin,h=(0,o.g)(s.WM.get(),u,t.vector),v=s.WM.get(),p=s.WM.get();if(v[0]=l[0]-u[0],v[1]=l[1]-u[1],v[2]=l[2]-u[2],p[0]=h[0]-u[0],p[1]=h[1]-u[1],p[2]=h[2]-u[2],Math.abs(p[0])<a&&Math.abs(p[1])<a&&Math.abs(p[2])<a)return!1;var d=s.WM.get();if(d[0]=c[0]-l[0],d[1]=c[1]-l[1],d[2]=c[2]-l[2],Math.abs(d[0])<a&&Math.abs(d[1])<a&&Math.abs(d[2])<a)return!1;var f=v[0]*p[0]+v[1]*p[1]+v[2]*p[2],y=p[0]*d[0]+p[1]*d[1]+p[2]*d[2],x=v[0]*d[0]+v[1]*d[1]+v[2]*d[2],g=p[0]*p[0]+p[1]*p[1]+p[2]*p[2],m=(d[0]*d[0]+d[1]*d[1]+d[2]*d[2])*g-y*y;if(Math.abs(m)<a)return!1;var _=(f*y-x*g)/m,Z=(f+y*_)/g;i&&(_=(0,n.uZ)(_,0,1),Z=(0,n.uZ)(Z,0,1));var b=s.WM.get(),w=s.WM.get();return b[0]=l[0]+_*d[0],b[1]=l[1]+_*d[1],b[2]=l[2]+_*d[2],w[0]=u[0]+Z*p[0],w[1]=u[1]+Z*p[1],w[2]=u[2]+Z*p[2],r.tA=_,r.tB=Z,r.pA=b,r.pB=w,r.distance2=(0,o.a)(b,w),!0}var _={tA:0,tB:0,pA:(0,a.Ue)(),pB:(0,a.Ue)(),distance2:0},Z=new r.x((function(){return l()}))},74702:function(e,t,i){i.d(t,{bE:function(){return c},wu:function(){return l}});var n=i(21530),r=i(32035),o=i(12400),a=i(85981);i(51378);function s(e){return e?{p0:(0,o.d9)(e.p0),p1:(0,o.d9)(e.p1),p2:(0,o.d9)(e.p2)}:{p0:(0,o.Ue)(),p1:(0,o.Ue)(),p2:(0,o.Ue)()}}function l(e,t,i){var n=t[0]-e[0],r=t[1]-e[1],o=i[0]-e[0],a=i[1]-e[1];return.5*Math.abs(n*a-r*o)}function c(e,t,i){return(0,r.f)(u,t,e),(0,r.f)(h,i,e),.5*(0,r.l)((0,r.b)(u,u,h))}new n.x(a.Ue),new n.x((function(){return s()}));var u=(0,o.Ue)(),h=(0,o.Ue)()},37384:function(e,t,i){i.d(t,{$o:function(){return r},V$:function(){return a},rk:function(){return o}});var n="calcite-mode-";function r(){return getComputedStyle(document.body).getPropertyValue("--esri-calcite-mode-name").replaceAll(/\s|'|"/g,"").startsWith("dark")}function o(){return"".concat(n).concat(r()?"dark":"light")}function a(e){s(e),e.classList.add(o())}function s(e){Array.from(e.classList).forEach((function(t){t.startsWith(n)&&e.classList.remove(t)}))}},19284:function(e,t,i){i.r(t),i.d(t,{default:function(){return ge}});var n=i(93433),r=i(74165),o=i(15861),a=i(29439),s=i(37762),l=i(1413),c=i(60136),u=i(29388),h=i(43144),v=i(15671),p=i(27366),d=(i(59486),i(52639)),f=i(14921),y=i(80987),x=i(10064),g=i(91505),m=i(32718),_=i(92026),Z=i(94172),b=i(49861),w=(i(93169),i(84936),i(69912)),k=i(69662),G=i(93655),M=i(16072),V=i(50951),C=i(85577),S=i(20008),E=i(53503),O=i(74982),I=i(83089),T=i(42537),z=i(47898),A=i(17842),R=i(848),H=i(87036),U=i(51155),L=i(6896),F=i(42170),P=function(e){(0,c.Z)(i,e);var t=(0,u.Z)(i);function i(e){var n;return(0,v.Z)(this,i),(n=t.call(this,e)).type="translate-vertex",n.distance=z.yP,n.elevation=null,n.area=null,n.totalLength=null,n}return(0,h.Z)(i,[{key:"clear",value:function(){this.distance=z.yP,this.elevation=null,this.area=null,this.totalLength=null}}]),i}(i(85809).h);(0,p._)([(0,b.Cb)()],P.prototype,"type",void 0),(0,p._)([(0,b.Cb)()],P.prototype,"distance",void 0),(0,p._)([(0,b.Cb)()],P.prototype,"elevation",void 0),(0,p._)([(0,b.Cb)()],P.prototype,"area",void 0),(0,p._)([(0,b.Cb)()],P.prototype,"totalLength",void 0),P=(0,p._)([(0,w.j)("esri.views.interactive.tooltip.infos.TranslateVertexTooltipInfo")],P);var D=i(543),W=i(59418),j=i(4914);function Y(e,t){var i=!1;function n(){var e=t(),i=e.sketchOptions.tooltips.effectiveEnabled?e.activeTooltipInfo:null;return(0,l.Z)((0,l.Z)({},e),{},{activeTooltipInfo:i})}return(0,T.AL)([(0,Z.watch)((function(){var e,t,i=n();return{context:i,geometry:null===(e=i.graphic)||void 0===e?void 0:e.geometry,vertexGeometry:null===(t=i.selectedVertex)||void 0===t?void 0:t.geometry}}),(function(t){var n=t.context;i=!0,function(e){var t=e.activeTooltipInfo;if(t){switch(null===t||void 0===t?void 0:t.type){case"move-point":return function(e,t){var i=t.graphic;B(e,i,null===i||void 0===i?void 0:i.geometry)}(t,e);case"selected-vertex":return function(e,t){var i=t.graphic,n=t.selectedVertex;B(e,i,null===n||void 0===n?void 0:n.geometry);var r=null===i||void 0===i?void 0:i.geometry;switch(null===r||void 0===r?void 0:r.type){case"polygon":e.geometryType="polygon",e.totalLength.visible=!1,e.area.actual=(0,D.f)(r);break;case"polyline":e.geometryType="polyline",e.totalLength.actual=(0,W.C_)(r),e.area.visible=!1}}(t,e)}t.sketchOptions=e.sketchOptions}}(n),e.info=n.activeTooltipInfo,i=!1}),Z.syncAndInitial),(0,Z.watch)((function(){var e=n(),t=e.activeTooltipInfo;if(t&&"key"in t)return{context:e,key:t.key}}),(function(e,t){e&&!i&&t&&e.key!==t.key&&function(e){function t(t,i){var n=null===i||void 0===i?void 0:i.geometry;if(n&&"point"===n.type){var r=(0,H.$4)(t,n),o=r.dx,a=r.dy,s=r.dz;if(0!==o||0!==a||0!==s){var l=n.x,c=n.y,u=n.z,h=n.m,v=n.spatialReference,p=new R.Z({x:l+o,y:c+a,z:null!=u?u+s:void 0,m:h,spatialReference:v});e.updateGeometry(i,p,n,o,a)}}}var i=e.activeTooltipInfo,n=e.graphic,r=e.selectedVertex;switch(null===i||void 0===i?void 0:i.type){case"move-point":return t(i,n);case"selected-vertex":t(i,r)}}(e.context)}),Z.sync),(0,H.OE)(e)])}function B(e,t,i){var n;t&&"point"===(null===i||void 0===i?void 0:i.type)&&(e.setLocationFromPoint(i),e.elevation.actual=(0,j.un)(i),e.elevation.visible=!(null===(n=t.geometry)||void 0===n||!n.hasZ),e.elevation.readOnly=!1,e.elevation.showAsZ=!0)}function $(e,t,i){if(i){var n=i.origin,r=n.x,o=n.y,a=t.toMap(i),s=t.toMap((0,A.vW)(r,o)),l=(0,W.Qw)(s,a);e.distance=null!=l?l:z.yP}}var J=i(70040),K=i(1614),N=i(14813),q=i(87888),X=i(17877),Q=i(59981),ee=i(34019),te=i(26091),ie=i(29909),ne=(0,h.Z)((function e(t,i,n){(0,v.Z)(this,e),this.graphic=t,this.mover=i,this.selected=n,this.type="reshape-start"})),re=(0,h.Z)((function e(t,i,n){(0,v.Z)(this,e),this.graphic=t,this.mover=i,this.selected=n,this.type="reshape"})),oe=(0,h.Z)((function e(t,i,n){(0,v.Z)(this,e),this.graphic=t,this.mover=i,this.selected=n,this.type="reshape-stop"})),ae=(0,h.Z)((function e(t,i,n){(0,v.Z)(this,e),this.mover=t,this.dx=i,this.dy=n,this.type="move-start"})),se=(0,h.Z)((function e(t,i,n){(0,v.Z)(this,e),this.mover=t,this.dx=i,this.dy=n,this.type="move"})),le=(0,h.Z)((function e(t,i,n){(0,v.Z)(this,e),this.mover=t,this.dx=i,this.dy=n,this.type="move-stop"})),ce=(0,h.Z)((function e(t){(0,v.Z)(this,e),this.added=t,this.type="vertex-select"})),ue=(0,h.Z)((function e(t){(0,v.Z)(this,e),this.removed=t,this.type="vertex-deselect"})),he=(0,h.Z)((function e(t,i,n,r){(0,v.Z)(this,e),this.added=t,this.graphic=i,this.oldGraphic=n,this.vertices=r,this.type="vertex-add"})),ve=(0,h.Z)((function e(t,i,n,r){(0,v.Z)(this,e),this.removed=t,this.graphic=i,this.oldGraphic=n,this.vertices=r,this.type="vertex-remove"})),pe=J.X.reshapeGraphics,de={vertices:{default:new M.default({style:"circle",size:pe.vertex.size,color:pe.vertex.color,outline:{color:pe.vertex.outlineColor,width:1}}),hover:new M.default({style:"circle",size:pe.vertex.hoverSize,color:pe.vertex.hoverColor,outline:{color:pe.vertex.hoverOutlineColor,width:1}}),selected:new M.default({style:"circle",size:pe.selected.size,color:pe.selected.color,outline:{color:pe.selected.outlineColor,width:1}})},midpoints:{default:new M.default({style:"circle",size:pe.midpoint.size,color:pe.midpoint.color,outline:{color:pe.midpoint.outlineColor,width:1}}),hover:new M.default({style:"circle",size:pe.midpoint.size,color:pe.midpoint.color,outline:{color:pe.midpoint.outlineColor,width:1}})}},fe=function(e){(0,c.Z)(i,e);var t=(0,u.Z)(i);function i(e){var n;return(0,v.Z)(this,i),(n=t.call(this,e))._activeOperationInfo=null,n._editGeometryOperations=null,n._graphicAttributes={esriSketchTool:"box"},n._mover=null,n._snappingContext=null,n._snappingGraphicsLayer=null,n._hoverGraphic=null,n._snappingTask=null,n._stagedVertex=null,n.tooltip=null,n.activeTooltipInfo=null,n.callbacks={onReshapeStart:function(){},onReshape:function(){},onReshapeStop:function(){},onMoveStart:function(){},onMove:function(){},onMoveStop:function(){},onGraphicClick:function(){}},n.enableMidpoints=!0,n.enableMovement=!0,n.enableVertices=!0,n.graphic=null,n.layer=null,n.midpointGraphics=new y.Z,n.midpointSymbol=new M.default({style:"circle",size:6,color:[200,200,200],outline:{color:[100,100,100],width:1}}),n.selectedVertices=new y.Z,n.snappingManager=null,n.symbols=de,n.sketchOptions=new Q.Z,n.type="reshape",n.vertexGraphics=new y.Z,n.view=null,n}return(0,h.Z)(i,[{key:"initialize",value:function(){var e=this,t=this.view;this._highlightHelper=new O.Z({view:t}),this._setup(),this.tooltip=new te.u({view:this.view}),this.tooltipInfos=function(e){var t={sketchOptions:e,viewType:"2d"};return{movePoint:new U.o(t),selectedVertex:new L.K(t),translateGraphic:new F.E(t),translateVertices:new P(t)}}(this.sketchOptions),this.addHandles([(0,Z.when)((function(){return null===t||void 0===t?void 0:t.ready}),(function(){var t=e.layer,i=e.view;(0,I.p)(i,t),e.addHandles(i.on("key-down",(function(t){return e._keyDownHandler(t)}),K.f.TOOL))}),{once:!0,initial:!0}),(0,Z.watch)((function(){return e.graphic}),(function(){return e.refresh()})),(0,Z.watch)((function(){return e.layer}),(function(t,i){i&&(e._clearSelection(),e._resetGraphics(i)),e.refresh()})),(0,Z.watch)((function(){return e.enableMidpoints}),(function(){return e.refresh()})),Y(this.tooltip,(function(){return e._tooltipsContext})),(0,Z.watch)((function(){return e.view.effectiveTheme.accentColor}),(function(){return e._updateSymbolsForTheme()}),Z.initial)]),this._updateTooltip()}},{key:"destroy",value:function(){var e;this._reset(),null!==(e=this._mover)&&void 0!==e&&e.destroy(),this._mover=null,this.tooltip=(0,_.SC)(this.tooltip)}},{key:"_coordinateHelper",get:function(){var e,t,i,n;return null!==(e=null===(t=this._editGeometryOperations)||void 0===t?void 0:t.data.coordinateHelper)&&void 0!==e?e:(0,N.Y6)(!(null===(i=this.graphic.geometry)||void 0===i||!i.hasZ),!(null===(n=this.graphic.geometry)||void 0===n||!n.hasM),this.view.spatialReference)}},{key:"_selectedVertex",get:function(){return 1===this.selectedVertices.length?this.selectedVertices.at(0):void 0}},{key:"_tooltipsContext",get:function(){var e=this;return{sketchOptions:this.sketchOptions,activeTooltipInfo:this.activeTooltipInfo,graphic:this.graphic,selectedVertex:this._selectedVertex,updateGeometry:function(t,i,n,r,o){e._setUpGeometryHelper();var a=t===e.graphic;a?e._emitMoveStartEvent(0,0):e._emitReshapeStartEvent(t);if(e._syncGeometryAfterVertexMove(t,i,r,o,!0),a){var s,l,c,u,h=e.view,v=h.toScreen(n),p=h.toScreen(i),d=(null!==(s=null===p||void 0===p?void 0:p.x)&&void 0!==s?s:0)-(null!==(l=null===v||void 0===v?void 0:v.x)&&void 0!==l?l:0),f=(null!==(c=null===p||void 0===p?void 0:p.y)&&void 0!==c?c:0)-(null!==(u=null===v||void 0===v?void 0:v.y)&&void 0!==u?u:0);e._emitMoveEvent(d,f),e._emitMoveStopEvent(d,f)}else e._emitReshapeEvent(t),e._emitReshapeStopEvent(t);e._editGeometryOperations=(0,_.SC)(e._editGeometryOperations)}}}},{key:"highlightsEnabled",set:function(e){var t;null!==(t=this._highlightHelper)&&void 0!==t&&t.removeAll(),this._set("highlightsEnabled",e),this._setUpHighlights()}},{key:"state",get:function(){var e=this.view.ready,t=!(!this.graphic||!this.layer);return e&&t?"active":e?"ready":"disabled"}},{key:"isUIGraphic",value:function(e){var t=[];return this.graphic&&t.push(this.graphic),t.concat(this.vertexGraphics.items,this.midpointGraphics.items),t.length>0&&t.includes(e)}},{key:"refresh",value:function(){this._reset(),this._setup()}},{key:"reset",value:function(){this.graphic=null}},{key:"clearSelection",value:function(){this._clearSelection()}},{key:"removeSelectedVertices",value:function(){var e=this.selectedVertices;e.length&&this._removeVertices(e)}},{key:"_setup",value:function(){var e=this.graphic;if(this.layer&&null!=(null===e||void 0===e?void 0:e.geometry)){var t=e.geometry;"mesh"!==t.type&&"extent"!==t.type?("polygon"===t.type&&(0,k.pW)(t),this._setUpHighlights(),this._setupGraphics(),this._setupMover()):this._logGeometryTypeError()}}},{key:"_setUpHighlights",value:function(){var e;this.highlightsEnabled&&this.graphic&&(null===(e=this._highlightHelper)||void 0===e||e.add(this.graphic))}},{key:"_setUpGeometryHelper",value:function(){var e=this.graphic.geometry;if(null!=e&&"mesh"!==e.type&&"extent"!==e.type){var t="multipoint"===e.type?new ie.Z({paths:e.points,spatialReference:e.spatialReference}):e;this._editGeometryOperations=X.c.fromGeometry(t,V.JY.Local)}else this._logGeometryTypeError()}},{key:"_saveSnappingContextForHandle",value:function(e,t){var i;this._snappingGraphicsLayer=new G.default({listMode:"hide",internal:!0,title:"Reshape snapping layer"}),this.view.map.layers.add(this._snappingGraphicsLayer);var n=this._editGeometryOperations;(0,_.O3)(n),this._snappingContext=new ee.N({editGeometryOperations:n,elevationInfo:{mode:"on-the-ground",offset:0},pointer:(null===(i=t.viewEvent)||void 0===i?void 0:i.pointerType)||"mouse",excludeFeature:this.graphic,feature:this.graphic,visualizer:new C.r(this._snappingGraphicsLayer),vertexHandle:this._getVertexFromEditGeometry(e)})}},{key:"_reset",value:function(){var e;this._clearSelection(),null!==(e=this._highlightHelper)&&void 0!==e&&e.removeAll(),this._updateTooltip(),this._resetGraphics(),this._resetSnappingStateVars(),this._activeOperationInfo=null,this._mover&&this._mover.destroy(),this._mover=null,this.view.cursor="default"}},{key:"_resetSnappingStateVars",value:function(){var e;null!=this.snappingManager&&this.snappingManager.doneSnapping(),null!=this._snappingGraphicsLayer&&(null!==(e=this.view)&&void 0!==e&&e.map&&this.view.map.layers.remove(this._snappingGraphicsLayer),this._snappingGraphicsLayer.destroy()),this._editGeometryOperations=(0,_.SC)(this._editGeometryOperations),this._snappingTask=(0,_.IM)(this._snappingTask),this._snappingTask=null,this._snappingContext=null,this._stagedVertex=null}},{key:"_resetGraphics",value:function(e){this._removeMidpointGraphics(e),this._removeVertexGraphics(e),this.selectedVertices.removeAll(),this._updateTooltip()}},{key:"_removeMidpointGraphics",value:function(e){var t=e||this.layer;t&&t.removeMany(this.midpointGraphics.items),this.midpointGraphics.items.forEach((function(e){return e.destroy()})),this.midpointGraphics.removeAll()}},{key:"_removeVertexGraphics",value:function(e){var t=e||this.layer;t&&t.removeMany(this.vertexGraphics.items),this.vertexGraphics.items.forEach((function(e){return e.destroy()})),this.vertexGraphics.removeAll()}},{key:"_setupGraphics",value:function(){var e=this.graphic.geometry;if(null!=e&&("polyline"===e.type||"polygon"===e.type)){var t=ye(e);this.enableMidpoints&&this._setUpMidpointGraphics(t),this.enableVertices&&this._setUpVertexGraphics(t)}}},{key:"_setUpMidpointGraphics",value:function(e){this._removeMidpointGraphics();var t=this._createMidpointGraphics(e);this.midpointGraphics.addMany(t),this.layer.addMany(t)}},{key:"_setUpVertexGraphics",value:function(e){this._removeVertexGraphics();var t=this._createVertexGraphics(e);this.vertexGraphics.addMany(t),this._storeRelatedVertexIndices(),this.layer.addMany(t)}},{key:"_createVertexGraphics",value:function(e){var t=this,i=this._graphicAttributes,n=this.symbols,r=[];return null!==e&&void 0!==e&&e.forEach((function(e,o){e.forEach((function(e,a){var s;r.push(new d.Z({geometry:t._coordinateHelper.arrayToPoint(e),symbol:null===n||void 0===n||null===(s=n.vertices)||void 0===s?void 0:s.default,attributes:(0,l.Z)((0,l.Z)({},i),{},{pathIndex:o,pointIndex:a})}))}))})),r}},{key:"_createMidpointGraphics",value:function(e){for(var t=this._graphicAttributes,i=this.symbols,n=[],r=0;r<e.length;r++)for(var o=e[r],a=0;a<o.length;a++){var s,c=(a+1)%o.length;if("polyline"!==(null===(s=this.graphic.geometry)||void 0===s?void 0:s.type)||0!==c){var u=o[a],h=o[c],v=this._getMidpoint(u,h);n.push(new d.Z({geometry:v,symbol:i.midpoints.default,attributes:(0,l.Z)((0,l.Z)({},t),{},{pathIndex:r,pointIndexStart:a,pointIndexEnd:c})}))}}return n}},{key:"_updateSymbolsForTheme",value:function(){var e,t=this.view.effectiveTheme.accentColor;this.symbols={vertices:(0,l.Z)((0,l.Z)({},this.symbols.vertices),{},{default:this.symbols.vertices.default.clone().set("color",t),hover:null===(e=this.symbols.vertices.hover)||void 0===e?void 0:e.clone().set("color",t)}),midpoints:(0,l.Z)({},this.symbols.midpoints)};var i,n=(0,s.Z)(this.vertexGraphics);try{for(n.s();!(i=n.n()).done;){var r=i.value;this._isSelected(r)?r.symbol=this.symbols.vertices.selected:this._hoverGraphic===r?r.symbol=this.symbols.vertices.hover:r.symbol=this.symbols.vertices.default}}catch(o){n.e(o)}finally{n.f()}}},{key:"_storeRelatedVertexIndices",value:function(){var e=this.vertexGraphics.items;if(e)for(var t=e.map((function(e){var t=e.geometry;return{x:t.x,y:t.y}})),i=0;i<t.length;i++){for(var n=[],r=0;r<t.length;r++)if(i!==r){var o=t[i],a=t[r];o.x===a.x&&o.y===a.y&&n.push(r)}e[i].attributes.relatedGraphicIndices=n}}},{key:"_setupMover",value:function(){var e=this,t=this.enableMovement,i=this.graphic,n=this.midpointGraphics,r=this.vertexGraphics,o=this.view,a=r.concat(n).items;t&&a.push(i),this._mover=new E.default({enableMoveAllGraphics:!1,highlightsEnabled:!1,indicatorsEnabled:!1,graphics:a,view:o,callbacks:{onGraphicClick:function(t){return e._onGraphicClickCallback(t)},onGraphicMoveStart:function(t){return e._onGraphicMoveStartCallback(t)},onGraphicMove:function(t){return e._onGraphicMoveCallback(t)},onGraphicMoveStop:function(t){return e._onGraphicMoveStopCallback(t)},onGraphicPointerOver:function(t){return e._onGraphicPointerOverCallback(t)},onGraphicPointerOut:function(t){return e._onGraphicPointerOutCallback(t)}}})}},{key:"_onGraphicClickCallback",value:function(e){var t,i;e.viewEvent.stopPropagation();var n=e.graphic;if(n===this.graphic)this.clearSelection(),this.emit("graphic-click",e),null===(t=(i=this.callbacks).onGraphicClick)||void 0===t||t.call(i,e);else if(this._isMidpoint(n)){if(2===e.viewEvent.button)return;var r=this.graphic.clone(),o=this._createVertexFromMidpoint(n);this.refresh(),this._emitVertexAddEvent([n],r,o)}else this._isVertex(n)&&(e.viewEvent.stopPropagation(),2===e.viewEvent.button?this._removeVertices(n):(e.viewEvent.native.shiftKey||this._clearSelection(),this.selectedVertices.includes(n)?this._removeFromSelection(n,!0):this._addToSelection(n)))}},{key:"_setUpOperation",value:function(e){var t=e.graphic,i=e.dx,n=e.dy,r=t===this.graphic;this._resetSnappingStateVars(),this._setUpGeometryHelper(),this._saveSnappingContextForHandle(t,e),this._activeOperationInfo={target:this.graphic,mover:t,operationType:r?"move":"reshape",totalDx:i,totalDy:n}}},{key:"_onGraphicMoveStartCallback",value:function(e){var t=this,i=e.dx,n=e.dy,r=e.graphic;if(r===this.graphic){var o=r.geometry;return this._setUpOperation(e),this._emitMoveStartEvent(i,n),void(null!=o&&"point"===o.type&&this._onHandleMove(r,i,n,e,(function(){t._updateTooltip(t.graphic,e.viewEvent),t._emitMoveEvent(i,n)})))}if(!this.selectedVertices.includes(r)){if(this._clearSelection(),this._isMidpoint(r)){var a=this.graphic.clone(),s=this._createVertexFromMidpoint(r);this._emitVertexAddEvent([r],a,s)}this._addToSelection(r)}this._setUpOperation(e),this._emitReshapeStartEvent(r),this._onHandleMove(r,i,n,e,(function(){t._updateTooltip(r,e.viewEvent),t._emitReshapeEvent(r)}))}},{key:"_onGraphicMoveCallback",value:function(e){var t=this,i=this._activeOperationInfo;if(i){var n=e.dx,r=e.dy,o=e.graphic;i.totalDx+=n,i.totalDy+=r;var a=i.operationType,s=o.geometry;if(null!=s)if("move"!==a)this._onHandleMove(o,n,r,e,(function(){t._updateTooltip(o,e.viewEvent),t._emitReshapeEvent(o)}));else if("point"===s.type)this._onHandleMove(o,n,r,e,(function(){t._updateTooltip(t.graphic,e.viewEvent),t._emitMoveEvent(n,r)}));else if("polyline"===s.type||"polygon"===s.type){var l=ye(s);this._updateVertexGraphicLocations(l),this._updateTooltip(this.graphic,e.viewEvent),this._emitMoveEvent(n,r)}}}},{key:"_onGraphicMoveStopCallback",value:function(e){var t=this,i=this._activeOperationInfo;if(i){var n=e.dx,r=e.dy,o=e.graphic,a=i.operationType;i.totalDx+=n,i.totalDy+=r,this._onHandleMove(o,n,r,e,(function(){return"move"===a?t._emitMoveStopEvent():t._emitReshapeStopEvent(o)})),this._isMidpoint(o)?this.refresh():(this._updateTooltip(this._isVertex(o)?o:null),this._resetSnappingStateVars(),this._activeOperationInfo=null)}}},{key:"_updateVertexGraphicLocations",value:function(e){var t,i=this._coordinateHelper,n=(0,s.Z)(this.vertexGraphics);try{for(n.s();!(t=n.n()).done;){var r=t.value,o=r.attributes,a=o.pathIndex,l=o.pointIndex;r.geometry=i.arrayToPoint(e[a][l])}}catch(c){n.e(c)}finally{n.f()}this._updateMidpointGraphicLocations(e)}},{key:"_updateMidpointGraphicLocations",value:function(e){var t,i=(0,s.Z)(this.midpointGraphics);try{for(i.s();!(t=i.n()).done;){var n=t.value,r=n.attributes,o=r.pathIndex,a=r.pointIndexStart,l=r.pointIndexEnd,c=e[o];n.geometry=this._getMidpoint(c[a],c[l])}}catch(u){i.e(u)}finally{i.f()}}},{key:"_getMidpoint",value:function(e,t){var i=this._coordinateHelper,n=i.arrayToVector(e),r=i.arrayToVector(t),o=i.toXYZ(n),s=i.toXYZ(r),l=(0,k.Gi)(o,s),c=(0,a.Z)(l,3),u=c[0],h=c[1],v=c[2],p=i.hasM()?0:void 0;return new R.Z({x:u,y:h,z:v,m:p,spatialReference:i.spatialReference})}},{key:"_getVertexFromEditGeometry",value:function(e){var t=xe(e),i=(0,a.Z)(t,2),n=i[0],r=i[1];return(0,_.O3)(this._editGeometryOperations),this._editGeometryOperations.data.components[n].vertices[r]}},{key:"_onHandleMove",value:function(e,t,i,n,a){var s=this;(0,_.IM)(this._snappingTask);var l=this._snappingContext;if(l){var c=e.geometry,u="graphic-move-stop"===n.type;if(null!=this.snappingManager&&this.selectedVertices.length<2&&!u){var h=this.snappingManager;this._stagedVertex=h.update({point:c,context:l}),this._syncGeometryAfterVertexMove(e,new R.Z(this._stagedVertex),t,i,u),a(),this._snappingTask=(0,f.vr)(function(){var n=(0,o.Z)((0,r.Z)().mark((function n(o){var v;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,h.snap({point:c,context:l,signal:o});case 2:(v=n.sent).valid&&(s._stagedVertex=v.apply(),s._syncGeometryAfterVertexMove(e,new R.Z(s._stagedVertex),t,i,u),a());case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())}else{var v=null!=this._stagedVertex?new R.Z(this._stagedVertex):c;this._syncGeometryAfterVertexMove(e,v,t,i,u),a()}}}},{key:"_syncGeometryAfterVertexMove",value:function(e,t,i,n){var r,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=null===(r=this._editGeometryOperations)||void 0===r?void 0:r.data.geometry;if(s)if("point"===s.type)e.geometry=t;else if("mesh"===s.type)e.geometry=s.centerAt(t);else{var l,c=this._coordinateHelper,u=xe(e),h=(0,a.Z)(u,2),v=h[0],p=h[1],d=(0,k.nA)(s),f=d[v].length-1,y=c.pointToArray(t);d[v][p]=y,"polygon"===s.type&&(0===p?d[v][f]=y:p===f&&(d[v][0]=y)),this._isVertex(e)&&(d=this._moveRelatedCoordinates(d,e,y),d=this._moveSelectedHandleCoordinates(d,e,i,n,"polygon"===s.type),this._updateMidpointGraphicLocations(d)),this.graphic.geometry=s.clone();var x=c.pointToVector(t),g=this._getVertexFromEditGeometry(e),m=c.getZ(x),_=x[0]-g.pos[0],Z=x[1]-g.pos[1],b=null!=m?m-g.pos[2]:0;null!==(l=this._editGeometryOperations)&&void 0!==l&&l.moveVertices([g],_,Z,b),o&&(this._mover?this._mover.updateGeometry(this._mover.graphics.indexOf(e),t):e.geometry=t)}}},{key:"_moveRelatedCoordinates",value:function(e,t,i){var n,r=t.attributes.relatedGraphicIndices,o=(0,s.Z)(r);try{for(o.s();!(n=o.n()).done;){var a=n.value,l=this.vertexGraphics.at(a),c=l.attributes,u=c.pathIndex,h=c.pointIndex;e[u][h]=i,l.geometry=t.geometry}}catch(v){o.e(v)}finally{o.f()}return e}},{key:"_moveSelectedHandleCoordinates",value:function(e,t,i,n,r){var o,a=(0,s.Z)(this.selectedVertices);try{for(a.s();!(o=a.n()).done;){var l=o.value;if(l!==t){var c=l.attributes,u=c.pathIndex,h=c.pointIndex,v=c.relatedGraphicIndices,p=(0,S.e7)(l.geometry,i,n,this.view),d=(0,k.nA)(p),f=e[u].length-1;e[u][h]=d,l.geometry=p,r&&(0===h?e[u][f]=d:h===f&&(e[u][0]=d));var y,x=(0,s.Z)(v);try{for(x.s();!(y=x.n()).done;){var g=y.value,m=this.vertexGraphics.at(g),_=m.attributes,Z=_.pathIndex,b=_.pointIndex;e[Z][b]=d,m.geometry=p}}catch(w){x.e(w)}finally{x.f()}}}}catch(w){a.e(w)}finally{a.f()}return e}},{key:"_onGraphicPointerOverCallback",value:function(e){var t=e.graphic;this._hoverGraphic=t;var i=this._isVertex(t);i&&!this._isSelected(t)&&(t.symbol=this.symbols.vertices.hover),this._updateTooltip(i?t:null),this._updateHoverCursor(t)}},{key:"_onGraphicPointerOutCallback",value:function(e){var t=e.graphic;this._hoverGraphic=null,this._isVertex(t)&&!this._isSelected(t)&&(t.symbol=this.symbols.vertices.default),this.view.cursor="default",this._updateTooltip()}},{key:"_createVertexFromMidpoint",value:function(e){var t=this._graphicAttributes,i=this.graphic.geometry;if(null==i||"polygon"!==i.type&&"polyline"!==i.type)return[];var n=i.clone(),r=[],o=e.attributes,a=o.pathIndex,s=o.pointIndexStart,c=o.pointIndexEnd,u=(0,k.nA)(e.geometry),h=0===c?s+1:c,v=(0,k.nA)(n);return v[a].splice(h,0,u),e.attributes=(0,l.Z)((0,l.Z)({},t),{},{pathIndex:a,pointIndex:h,relatedGraphicIndices:[]}),r.push({coordinates:v[a][h],componentIndex:a,vertexIndex:h}),this.graphic.geometry=n,r}},{key:"_addToSelection",value:function(e){e.symbol=this.symbols.vertices.selected,this.selectedVertices.add(e),this._emitSelectEvent([e]),this._updateTooltip(e)}},{key:"_removeFromSelection",value:function(e,t){var i=this.symbols.vertices,n=t?i.hover:i.default;this.selectedVertices.remove(e),e.symbol=n,this._emitDeselectEvent([e]),this._updateTooltip()}},{key:"_clearSelection",value:function(){var e=this.selectedVertices.toArray();if(e.length>0){var t,i=(0,s.Z)(e);try{for(i.s();!(t=i.n()).done;){t.value.set("symbol",this.symbols.vertices.default)}}catch(n){i.e(n)}finally{i.f()}this.selectedVertices.removeAll(),this._emitDeselectEvent(e),this._updateTooltip()}}},{key:"_keyDownHandler",value:function(e){null==this._activeOperationInfo&&(0,H._i)(e,this.tooltip)||q.Sn.delete.includes(e.key)&&!e.repeat&&this.selectedVertices.length&&this._removeVertices(this.selectedVertices)}},{key:"_removeVertices",value:function(e){var t=this.graphic.geometry;if(null!=t&&("polygon"===t.type||"polyline"===t.type)&&!("polygon"===t.type&&this.vertexGraphics.length<4||this.vertexGraphics.length<3)){var i,r=this.graphic.clone(),o=t.clone(),l=(0,k.nA)(o),c=[],u=function(e){return e instanceof d.Z?[e]:(0,n.Z)(e)}(e),h=(0,s.Z)(u);try{for(h.s();!(i=h.n()).done;)for(var v=i.value.geometry,p=v.x,f=v.y,y=0;y<l.length;y++)for(var x=l[y],g=0;g<x.length;g++){var m=(0,a.Z)(x[g],2),_=m[0],Z=m[1];p===_&&f===Z&&(c.push({coordinates:l[y][g],componentIndex:y,vertexIndex:g}),l[y].splice(Number(g),1))}}catch(M){h.e(M)}finally{h.f()}if("polygon"===o.type)l=l.filter((function(e){if(e.length<2)return!1;var t=(0,a.Z)(e[0],2),i=t[0],n=t[1],r=(0,a.Z)(e[e.length-1],2),o=r[0],s=r[1];return(2!==e.length||i!==o||n!==s)&&(i===o&&n===s||e.push(e[0]),!0)})),o.rings=l;else{var b,w=(0,s.Z)(l);try{for(w.s();!(b=w.n()).done;){var G=b.value;1===G.length&&l.splice(l.indexOf(G),1)}}catch(M){w.e(M)}finally{w.f()}o.paths=l}this.graphic.geometry=o,this.refresh(),this._emitVertexRemoveEvent(u,r,c)}}},{key:"_isVertex",value:function(e){return this.vertexGraphics.includes(e)}},{key:"_isSelected",value:function(e){return this._isVertex(e)&&this.selectedVertices.includes(e)}},{key:"_isMidpoint",value:function(e){return this.midpointGraphics.includes(e)}},{key:"_updateHoverCursor",value:function(e){this.view.cursor=this._isMidpoint(e)?"copy":"move"}},{key:"_updateTooltip",value:function(e,t){var i=null,n=this.graphic,r=this.view,o=this.tooltipInfos,a=null===n||void 0===n?void 0:n.geometry;"point"===(null===a||void 0===a?void 0:a.type)?i=o.movePoint:this._selectedVertex?i=o.selectedVertex:e===this.graphic?function(e,t,i){e.clear(),$(e,t,i)}(i=o.translateGraphic,r,t):e&&this.selectedVertices.length>1&&function(e,t,i,n){e.clear(),"polygon"===(null===i||void 0===i?void 0:i.type)?e.area=(0,D.f)(i):"polyline"===(null===i||void 0===i?void 0:i.type)&&(e.totalLength=(0,W.C_)(i)),$(e,t,n)}(i=o.translateVertices,r,a,t),this.activeTooltipInfo=i}},{key:"_emitMoveStartEvent",value:function(e,t){var i,n,r=new ae(this.graphic,e,t);this.emit("move-start",r),null===(i=(n=this.callbacks).onMoveStart)||void 0===i||i.call(n,r)}},{key:"_emitMoveEvent",value:function(e,t){var i,n,r=new se(this.graphic,e,t);this.emit("move",r),null===(i=(n=this.callbacks).onMove)||void 0===i||i.call(n,r)}},{key:"_emitMoveStopEvent",value:function(e,t){var i,n;if(null==e||null==t){var r=this._activeOperationInfo;if(!r)return;e=r.totalDx,t=r.totalDy}var o=new le(this.graphic,e,t);this.emit("move-stop",o),null===(i=(n=this.callbacks).onMoveStop)||void 0===i||i.call(n,o)}},{key:"_emitReshapeStartEvent",value:function(e){var t,i,n=new ne(this.graphic,e,this.selectedVertices.toArray());this.emit("reshape-start",n),null===(t=(i=this.callbacks).onReshapeStart)||void 0===t||t.call(i,n)}},{key:"_emitReshapeEvent",value:function(e){var t,i,n=new re(this.graphic,e,this.selectedVertices.toArray());this.emit("reshape",n),null===(t=(i=this.callbacks).onReshape)||void 0===t||t.call(i,n)}},{key:"_emitReshapeStopEvent",value:function(e){var t,i,n=new oe(this.graphic,e,this.selectedVertices.toArray());this.emit("reshape-stop",n),null===(t=(i=this.callbacks).onReshapeStop)||void 0===t||t.call(i,n)}},{key:"_emitSelectEvent",value:function(e){var t,i,n=new ce(e);this.emit("select",n),null===(t=(i=this.callbacks).onVertexSelect)||void 0===t||t.call(i,n)}},{key:"_emitDeselectEvent",value:function(e){var t,i,n=new ue(e);this.emit("deselect",n),null===(t=(i=this.callbacks).onVertexDeselect)||void 0===t||t.call(i,n)}},{key:"_emitVertexAddEvent",value:function(e,t,i){var n,r,o=new he(e,this.graphic,t,i);this.emit("vertex-add",o),null===(n=(r=this.callbacks).onVertexAdd)||void 0===n||n.call(r,o)}},{key:"_emitVertexRemoveEvent",value:function(e,t,i){var n,r,o=new ve(e,this.graphic,t,i);this.emit("vertex-remove",o),null===(n=(r=this.callbacks).onVertexRemove)||void 0===n||n.call(r,o)}},{key:"_logGeometryTypeError",value:function(){m.Z.getLogger(this).error(new x.Z("reshape:invalid-geometry","Reshape operation not supported for the provided graphic. The geometry type is not supported."))}}]),i}(g.Z.EventedAccessor);function ye(e){var t=(0,k.nA)(e.clone());if("polygon"===e.type){var i,n=(0,s.Z)(t);try{for(n.s();!(i=n.n()).done;){var r=i.value,o=r[r.length-1];r[0][0]===o[0]&&r[0][1]===o[1]&&r.length>2&&r.pop()}}catch(a){n.e(a)}finally{n.f()}}return t}function xe(e){var t=e.attributes;return[(null===t||void 0===t?void 0:t.pathIndex)||0,(null===t||void 0===t?void 0:t.pointIndex)||0]}(0,p._)([(0,b.Cb)()],fe.prototype,"_activeOperationInfo",void 0),(0,p._)([(0,b.Cb)()],fe.prototype,"_coordinateHelper",null),(0,p._)([(0,b.Cb)()],fe.prototype,"_editGeometryOperations",void 0),(0,p._)([(0,b.Cb)()],fe.prototype,"tooltip",void 0),(0,p._)([(0,b.Cb)()],fe.prototype,"tooltipInfos",void 0),(0,p._)([(0,b.Cb)()],fe.prototype,"activeTooltipInfo",void 0),(0,p._)([(0,b.Cb)()],fe.prototype,"_selectedVertex",null),(0,p._)([(0,b.Cb)()],fe.prototype,"_tooltipsContext",null),(0,p._)([(0,b.Cb)()],fe.prototype,"callbacks",void 0),(0,p._)([(0,b.Cb)()],fe.prototype,"enableMidpoints",void 0),(0,p._)([(0,b.Cb)()],fe.prototype,"enableMovement",void 0),(0,p._)([(0,b.Cb)()],fe.prototype,"enableVertices",void 0),(0,p._)([(0,b.Cb)()],fe.prototype,"graphic",void 0),(0,p._)([(0,b.Cb)({value:!0})],fe.prototype,"highlightsEnabled",null),(0,p._)([(0,b.Cb)()],fe.prototype,"layer",void 0),(0,p._)([(0,b.Cb)({readOnly:!0})],fe.prototype,"midpointGraphics",void 0),(0,p._)([(0,b.Cb)()],fe.prototype,"midpointSymbol",void 0),(0,p._)([(0,b.Cb)({readOnly:!0})],fe.prototype,"selectedVertices",void 0),(0,p._)([(0,b.Cb)()],fe.prototype,"snappingManager",void 0),(0,p._)([(0,b.Cb)({readOnly:!0})],fe.prototype,"state",null),(0,p._)([(0,b.Cb)()],fe.prototype,"symbols",void 0),(0,p._)([(0,b.Cb)({type:Q.Z})],fe.prototype,"sketchOptions",void 0),(0,p._)([(0,b.Cb)({readOnly:!0})],fe.prototype,"type",void 0),(0,p._)([(0,b.Cb)({readOnly:!0})],fe.prototype,"vertexGraphics",void 0),(0,p._)([(0,b.Cb)()],fe.prototype,"view",void 0);var ge=fe=(0,p._)([(0,w.j)("esri.views.draw.support.Reshape")],fe)},70040:function(e,t,i){i.d(t,{X:function(){return p}});var n=i(43144),r=i(15671),o=i(51995),a={main:new o.Z([255,127,0]),selected:new o.Z([255,255,255]),outline:new o.Z([0,0,0,.5]),selectedOutline:new o.Z([255,255,255]),hoverOutline:new o.Z([255,255,255]),secondary:new o.Z([255,255,255]),secondaryOutline:new o.Z([100,100,100]),transparent:new o.Z([0,0,0,0])};function s(e,t){Object.assign(e,t)}var l=(0,n.Z)((function e(t){(0,r.Z)(this,e),this.size=8,this.hoverSize=10,this.color=a.main,this.hoverColor=a.main,this.outlineColor=a.outline,this.hoverOutlineColor=a.hoverOutline,s(this,t)})),c=(0,n.Z)((function e(t){(0,r.Z)(this,e),this.color=a.secondary,this.hoverColor=a.main,s(this,t)})),u=(0,n.Z)((function e(t){(0,r.Z)(this,e),this.color=a.transparent,this.hoverColor=a.transparent,this.outlineColor=a.main,this.hoverOutlineColor=a.main,this.stagedColor=a.transparent,this.stagedOutlineColor=a.secondary,s(this,t)})),h=(0,n.Z)((function e(t){(0,r.Z)(this,e),this.vertex=new l,this.midpoint=new l({color:a.secondary,outlineColor:a.secondaryOutline,size:6}),this.selected=new l({color:a.selected,hoverColor:a.selected,hoverOutlineColor:a.hoverOutline}),s(this,t)})),v=(0,n.Z)((function e(t){(0,r.Z)(this,e),this.center=new l({color:a.secondaryOutline}),this.fill=new u,this.line=new c,this.vertex=new l({color:a.selected,outlineColor:a.main,hoverColor:a.selected,hoverOutlineColor:a.secondaryOutline}),s(this,t)})),p=new((0,n.Z)((function e(t){(0,r.Z)(this,e),this.reshapeGraphics=new h,this.transformGraphics=new v,s(this,t)})))},34019:function(e,t,i){i.d(t,{N:function(){return o}});var n=i(15671),r=i(43144),o=function(){function e(t){(0,n.Z)(this,e),this.vertexHandle=null,this.excludeFeature=null,this.visualizer=null,this.selfSnappingZ=null,this.drawConstraints=null,this.editGeometryOperations=t.editGeometryOperations,this.elevationInfo=t.elevationInfo,this.pointer=t.pointer,this.vertexHandle=t.vertexHandle,this.excludeFeature=t.excludeFeature,this.feature=t.feature,this.visualizer=t.visualizer,this.selfSnappingZ=t.selfSnappingZ,this.drawConstraints=t.drawConstraints}return(0,r.Z)(e,[{key:"coordinateHelper",get:function(){return this.editGeometryOperations.data.coordinateHelper}},{key:"spatialReference",get:function(){return this.coordinateHelper.spatialReference}}]),e}()},51155:function(e,t,i){i.d(t,{o:function(){return h}});var n=i(15671),r=i(43144),o=i(60136),a=i(29388),s=i(27366),l=i(49861),c=(i(93169),i(32718),i(84936),i(69912)),u=i(85809),h=function(e){(0,o.Z)(i,e);var t=(0,a.Z)(i);function i(e){var r;return(0,n.Z)(this,i),(r=t.call(this,e)).type="move-point",r.allFields.forEach((function(e){e.lockable=!1,e.setActual(null)})),r}return(0,r.Z)(i,[{key:"allFields",get:function(){return[this.longitude,this.latitude,this.x,this.y,this.elevation]}}]),i}((0,i(35647).A)(u.h));(0,s._)([(0,l.Cb)()],h.prototype,"allFields",null),h=(0,s._)([(0,c.j)("esri.views.interactive.tooltip.infos.MovePointTooltipInfo")],h)},6896:function(e,t,i){i.d(t,{K:function(){return v}});var n=i(15671),r=i(43144),o=i(60136),a=i(29388),s=i(27366),l=i(49861),c=(i(93169),i(32718),i(84936),i(69912)),u=i(73816),h=i(85809),v=function(e){(0,o.Z)(i,e);var t=(0,a.Z)(i);function i(e){var r;return(0,n.Z)(this,i),(r=t.call(this,e)).type="selected-vertex",r.area=(0,u.UR)(),r.totalLength=(0,u.i4)(),r.geometryType="polyline",r.allFields.forEach((function(e){e.lockable=!1,e.setActual(null)})),r}return(0,r.Z)(i,[{key:"allFields",get:function(){return[this.longitude,this.latitude,this.x,this.y,this.elevation,"polygon"===this.geometryType?this.area:this.totalLength]}}]),i}((0,i(35647).A)(h.h));(0,s._)([(0,l.Cb)()],v.prototype,"geometryType",void 0),(0,s._)([(0,l.Cb)()],v.prototype,"allFields",null),v=(0,s._)([(0,c.j)("esri.views.interactive.tooltip.infos.SelectedVertexTooltipInfo")],v)},42170:function(e,t,i){i.d(t,{E:function(){return h}});var n=i(15671),r=i(43144),o=i(60136),a=i(29388),s=i(27366),l=i(47898),c=i(49861),u=(i(93169),i(32718),i(84936),i(69912)),h=function(e){(0,o.Z)(i,e);var t=(0,a.Z)(i);function i(e){var r;return(0,n.Z)(this,i),(r=t.call(this,e)).type="translate",r.distance=l.yP,r}return(0,r.Z)(i,[{key:"clear",value:function(){this.distance=l.yP}}]),i}(i(85809).h);(0,s._)([(0,c.Cb)()],h.prototype,"type",void 0),(0,s._)([(0,c.Cb)()],h.prototype,"distance",void 0),h=(0,s._)([(0,u.j)("esri.views.interactive.tooltip.infos.TranslateTooltipInfo")],h)},4914:function(e,t,i){i.d(t,{Cr:function(){return b},FN:function(){return _},KY:function(){return m},Sx:function(){return v},Uy:function(){return d},Z1:function(){return f},_e:function(){return x},qj:function(){return Z},un:function(){return g},xI:function(){return y}});var n,r=i(37762),o=i(47898),a=i(68860),s=i(32035),l=i(12400),c=i(5986),u=i(92975),h=i(25003);function v(e){return p(e,n.Horizontal)}function p(e,t){var i=e.hasZ,s=e.spatialReference,l=(0,h.m)(s),c=0,u=(0,a.j5)(l);if(null==u)return null;var v,p=t===n.Direct?_:Z,d=(0,r.Z)(e.paths);try{for(d.s();!(v=d.n()).done;){var f=v.value;if(!(f.length<2))for(var y=f.length-1,x=0;x<y;++x){var g=f[x];k[0]=g[0],k[1]=g[1],k[2]=i?g[2]:0;var m=f[x+1];G[0]=m[0],G[1]=m[1],G[2]=i?m[2]:0;var b=p(k,G,s);if(null==b)return null;c+=b.value}}}catch(w){d.e(w)}finally{d.f()}return(0,o.yG)(c,u)}function d(e,t){var i=e.spatialReference;return(0,u.fS)(i,t.spatialReference)?(k[0]=e.x,k[1]=e.y,k[2]=e.hasZ?e.z:0,G[0]=t.x,G[1]=t.y,G[2]=t.hasZ?t.z:0,function(e,t,i){var n=w(e,t,i);return null!=n?{direct:(0,o.yG)(n.direct,n.unit),horizontal:(0,o.yG)(n.horizontal,n.unit),vertical:(0,o.yG)(n.vertical,n.unit)}:null}(k,G,i)):null}function f(e,t){var i=e.spatialReference;return(0,u.fS)(i,t.spatialReference)?(k[0]=e.x,k[1]=e.y,k[2]=e.hasZ?e.z:0,G[0]=t.x,G[1]=t.y,G[2]=t.hasZ?t.z:0,_(k,G,i)):null}function y(e,t){var i=e.spatialReference;return(0,u.fS)(i,t.spatialReference)?(k[0]=e.x,k[1]=e.y,k[2]=e.hasZ?e.z:0,G[0]=t.x,G[1]=t.y,G[2]=t.hasZ?t.z:0,Z(k,G,i)):null}function x(e,t){var i=e.spatialReference;return(0,u.fS)(i,t.spatialReference)?(k[0]=e.x,k[1]=e.y,k[2]=e.hasZ?e.z:0,G[0]=t.x,G[1]=t.y,G[2]=t.hasZ?t.z:0,b(k,G,i)):null}function g(e){return null!=e?m(e.hasZ?e.z:0,e.spatialReference):null}function m(e,t){var i=(0,a.y)(t);return null!=i?(0,o.yG)(null!==e&&void 0!==e?e:0,i):null}function _(e,t,i){var r=w(e,t,i,n.Direct);return null!=r?(0,o.yG)(r.direct,r.unit):null}function Z(e,t,i){var r=w(e,t,i,n.Horizontal);return null!=r?(0,o.yG)(r.horizontal,r.unit):null}function b(e,t,i){var r=w(e,t,i,n.Vertical);return null!=r?(0,o.yG)(r.verticalSigned,r.unit):null}function w(e,t,i,r){var o=(0,h.m)(i),l=(0,a.j5)(o);if(null==l)return null;var u=t[2]-e[2];if(r===n.Vertical)return{verticalSigned:u,unit:l};if(!(0,c.S)(e,i,M,o)||!(0,c.S)(t,i,V,o))return null;if(r===n.Direct)return{direct:(0,s.p)(V,M),unit:l};if((0,s.s)(C,e[0],e[1],t[2]),!(0,c.S)(C,i,C,o))return null;var v=(0,s.p)(C,V);return r===n.Horizontal?{horizontal:v,unit:l}:{direct:(0,s.p)(V,M),horizontal:v,vertical:Math.abs(u),unit:l}}!function(e){e[e.Direct=0]="Direct",e[e.Horizontal=1]="Horizontal",e[e.Vertical=2]="Vertical"}(n||(n={}));var k=(0,l.Ue)(),G=(0,l.Ue)(),M=(0,l.Ue)(),V=(0,l.Ue)(),C=(0,l.Ue)()},25003:function(e,t,i){i.d(t,{m:function(){return a}});var n=i(83448),r=i(29691),o=i(92975);function a(e){return(0,o.N$)(e)?(0,o.oR)(e)||(0,o.sS)(e)||(0,o.yW)(e)||(0,n.fY)(e)?r.wY:e:(0,r.rS)(e)}}}]);
//# sourceMappingURL=21412.bc382c47.chunk.js.map