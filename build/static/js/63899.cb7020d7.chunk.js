"use strict";(self.webpackChunkreact_training=self.webpackChunkreact_training||[]).push([[63899],{63899:function(e,t,r){r.d(t,{Z:function(){return rt}});var n=r(1413),o=r(37762),a=r(74165),i=r(15861),l=r(29439),s=r(15671),u=r(43144),c=r(60136),f=r(29388),v=r(27366),p=r(44927),h=r(10064),d=r(54472),m=r(32718),g=r(67426),y=r(66978),x=r(94172),b=r(49861),w=(r(93169),r(84936),r(69912)),A=r(12400),Z=r(53866),S=r(32238),P=r(848),k=r(80885),F=r(45238),R=r(64995),j="Expected location to be a Point instance",E=function(e){(0,c.Z)(r,e);var t=(0,f.Z)(r);function r(){return(0,s.Z)(this,r),t.call(this,"invalid-input:location",j)}return(0,u.Z)(r)}(h.Z),_=r(8623),C=r(50250),M=r(76046),U=r(27474),T=r(69048),N=r(91320),I=r(41414),O=r(11700);var L=null;function G(e){if(0===e.length)return I.bM;var t=(0,I.Ue)([Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,-Number.POSITIVE_INFINITY,-Number.POSITIVE_INFINITY,-Number.POSITIVE_INFINITY]);return(0,I.G1)(t,e),t}function z(e,t){var r=G(e),n=(0,l.Z)(r,6),o=n[0],a=n[1],i=n[2],s=n[3],u=n[4],c=n[5];return new Z.Z({xmin:o,ymin:a,zmin:i,xmax:s,ymax:u,zmax:c,spatialReference:t})}var B=r(32035),q=r(68859);function K(e,t,r,n){if(void 0!==n){(0,p.x9)(e(),"option: geographic",{replacement:"Use mesh `vertexSpace` and spatial reference to control how operations are performed instead.",version:"4.30",warnOnce:!0});var o="local"===t.type;if(!(0,T.zZ)(t)||n===o)return r.isGeographic||r.isWebMercator&&n;e().warnOnce("Specifying the 'geographic' parameter (".concat(n,') for a Mesh vertex space of type "').concat(t.type,'" is not supported. This parameter will be ignored.'))}switch(t.type){case"georeferenced":return r.isGeographic;case"local":return r.isGeographic||r.isWebMercator}}var D=r(66149),V=function(){return m.Z.getLogger("esri.geometry.support.meshUtils.centerAt")};function H(e,t,r){var n,o;if(null!==(n=e.vertexAttributes)&&void 0!==n&&n.position){var a=e.vertexSpace,i=null!==(o=null===r||void 0===r?void 0:r.origin)&&void 0!==o?o:e.anchor,l=K(V,a,i.spatialReference,null===r||void 0===r?void 0:r.geographic);(0,T.zZ)(a)?function(e,t,r){var n=e.vertexSpace;if(!(0,T.zZ)(n))return;var o=Y,a=W;if(!(0,q.K)(t,a,e.spatialReference))return void(0,O.logProjectionError)(V(),t.spatialReference,e.spatialReference,O.loadProjectErrorMessage);if(!(0,q.K)(r,o,e.spatialReference)){var i=e.origin;return o[0]=i.x,o[1]=i.y,o[2]=i.z,void(0,O.logProjectionError)(V(),r.spatialReference,e.spatialReference,O.loadProjectErrorMessage)}var l=(0,B.f)(Q,a,o);n.origin=(0,B.g)((0,A.Ue)(),n.origin,l)}(e,t,i):l?function(e,t,r){var n,o,a=(0,A.al)(r.x,r.y,null!==(n=r.z)&&void 0!==n?n:0),i=(0,D.qk)(e,new C.Z({origin:a}));if(!i)return;var l=(0,A.al)(t.x,t.y,null!==(o=t.z)&&void 0!==o?o:0),s=(0,D.qk)({vertexAttributes:i,spatialReference:e.spatialReference,vertexSpace:new C.Z({origin:l})},new _.Z);if(!s)return;var u=s.position,c=s.normal,f=s.tangent;e.vertexAttributes.position=u,e.vertexAttributes.normal=c,e.vertexAttributes.tangent=f,e.vertexAttributesChanged()}(e,t,i):function(e,t,r){var n=Y,o=W;if((0,q.K)(t,o,e.spatialReference)){if(!(0,q.K)(r,n,e.spatialReference)){var a=e.origin;return n[0]=a.x,n[1]=a.y,n[2]=a.z,void(0,O.logProjectionError)(V(),r.spatialReference,e.spatialReference,O.loadProjectErrorMessage)}(function(e,t,r){if(e)for(var n=0;n<e.length;n+=3)for(var o=0;o<3;o++)e[n+o]+=t[o]-r[o]})(e.vertexAttributes.position,o,n),e.vertexAttributesChanged()}else(0,O.logProjectionError)(V(),t.spatialReference,e.spatialReference,O.loadProjectErrorMessage)}(e,t,i)}}var W=(0,A.Ue)(),Y=(0,A.Ue)(),Q=(0,A.Ue)(),J=r(35995);function $(){return $=(0,i.Z)((0,a.Z)().mark((function e(t,n,o){var i,l,s,u,c,f,v,p;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.source,e.next=3,(0,y.Hl)(Promise.all([r.e(58322),r.e(15010)]).then(r.bind(r,58883)),o);case 3:return l=e.sent,s=l.loadGLTFMesh,e.next=7,ee(i,o);case 7:return u=e.sent,(0,y.k_)(o),(c=s(new P.Z({x:0,y:0,z:0,spatialReference:t.spatialReference}),u.url,{resolveFile:X(u),signal:null===o||void 0===o?void 0:o.signal,expectedType:u.type})).then((function(){return u.dispose()}),(function(){return u.dispose()})),e.next=13,c;case 13:f=e.sent,v=f.vertexAttributes,p=f.components,t.vertexAttributes=v,t.components=p;case 17:case"end":return e.stop()}}),e)}))),$.apply(this,arguments)}function X(e){var t=(0,J.Yd)(e.url);return function(r){var n,o=(0,J.PF)(r,t,t),a=o?o.replace(/^ *\.\//,""):null;return null!==(n=a?e.files.get(a):null)&&void 0!==n?n:r}}function ee(e,t){return te.apply(this,arguments)}function te(){return te=(0,i.Z)((0,a.Z)().mark((function e(t,r){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Array.isArray(t)){e.next=4;break}if(t.length){e.next=3;break}throw new h.Z("mesh-load-external:missing-assets","There must be at least one file to load");case 3:return e.abrupt("return",t[0]instanceof File?ae(t):ie(t,r));case 4:return e.abrupt("return",oe(t));case 5:case"end":return e.stop()}}),e)}))),te.apply(this,arguments)}function re(e,t){return ne.apply(this,arguments)}function ne(){return ne=(0,i.Z)((0,a.Z)().mark((function e(t,r){var n,o,i,l;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.parts,o=t.assetMimeType,i=t.assetName,1!==n.length){e.next=3;break}return e.abrupt("return",new pe(n[0].partUrl));case 3:return e.next=5,t.toBlob(r);case 5:return l=e.sent,e.abrupt("return",((0,y.k_)(r),pe.fromBlob(l,he(i,o))));case 7:case"end":return e.stop()}}),e)}))),ne.apply(this,arguments)}function oe(e){return pe.fromBlob(e,he(e.name,e.type))}function ae(e){return ve(e.map((function(e){return{name:e.name,mimeType:e.type,source:oe(e)}})))}function ie(e,t){return le.apply(this,arguments)}function le(){return le=(0,i.Z)((0,a.Z)().mark((function e(t,r){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,y.OT)(t.map(function(){var e=(0,i.Z)((0,a.Z)().mark((function e(t){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re(t);case 2:return n=e.sent,e.abrupt("return",((0,y.k_)(r),{name:t.assetName,mimeType:t.assetMimeType,source:n}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:if(n=e.sent,!(0,y.Hc)(r)){e.next=5;break}throw n.forEach((function(e){return e.source.dispose()})),(0,y.zE)();case 5:return e.abrupt("return",ve(n));case 6:case"end":return e.stop()}}),e)}))),le.apply(this,arguments)}var se=/^model\/gltf\+json$/,ue=/^model\/gltf-binary$/,ce=/\.gltf$/i,fe=/\.glb$/i;function ve(e){var t,r,n=new Map,a=null,i=(0,o.Z)(e);try{for(i.s();!(r=i.n()).done;){var l=r.value,s=l.name,u=l.mimeType,c=l.source;null===a&&(se.test(u)||ce.test(s)?(a=c.url,t="gltf"):(ue.test(u)||fe.test(s))&&(a=c.url,t="glb")),n.set(s,c.url),c.files.forEach((function(e,t){return n.set(t,e)}))}}catch(f){i.e(f)}finally{i.f()}if(null==a)throw new h.Z("mesh-load-external:missing-files","Missing files to load external mesh source");return new pe(a,(function(){return e.forEach((function(e){return e.source.dispose()}))}),n,t)}var pe=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Map,o=arguments.length>3?arguments[3]:void 0;(0,s.Z)(this,e),this.url=t,this.dispose=r,this.files=n,this.type=o}return(0,u.Z)(e,null,[{key:"fromBlob",value:function(t,r){var n=URL.createObjectURL(t);return new e(n,(function(){return URL.revokeObjectURL(n)}),void 0,r)}}]),e}();function he(e,t){return se.test(t)||ce.test(e)?"gltf":ue.test(t)||ce.test(e)?"glb":void 0}var de=r(11582),me=r(80987),ge=r(17493),ye=function(e){(0,c.Z)(r,e);var t=(0,f.Z)(r);function r(e){var n;return(0,s.Z)(this,r),(n=t.call(this,e)).externalSources=new me.Z,n._explicitDisplaySource=null,n.addHandles((0,x.on)((function(){return n.externalSources}),"after-remove",(function(e){e.item===n._explicitDisplaySource&&(n._explicitDisplaySource=null)}),{sync:!0,onListenerRemove:function(){return n._explicitDisplaySource=null}})),n}return(0,u.Z)(r,[{key:"displaySource",get:function(){var e;return null!==(e=this._explicitDisplaySource)&&void 0!==e?e:this._implicitDisplaySource},set:function(e){if(null!=e&&!(0,ge.NZ)(e))throw new Error("Cannot use this source for display: it is not in a supported format.");this._explicitDisplaySource=e,e&&this.externalSources.every((function(t){return!(0,ge.fV)(t,e)}))&&this.externalSources.add(e)}},{key:"clearSources",value:function(){this.externalSources.removeAll()}},{key:"getExternalSourcesOnService",value:function(e){return this.externalSources.items.filter((function(t){return(0,ge.JG)(t,e)}))}},{key:"_implicitDisplaySource",get:function(){return this.externalSources.find(ge.NZ)}}]),r}(de.j);(0,v._)([(0,b.Cb)()],ye.prototype,"externalSources",void 0),(0,v._)([(0,b.Cb)()],ye.prototype,"displaySource",null),(0,v._)([(0,b.Cb)()],ye.prototype,"_implicitDisplaySource",null),(0,v._)([(0,b.Cb)()],ye.prototype,"_explicitDisplaySource",void 0),ye=(0,v._)([(0,w.j)("esri.geometry.support.meshUtils.Metadata")],ye);var xe=r(21389);var be={position:[-.5,-.5,0,.5,-.5,0,.5,.5,0,-.5,.5,0],normal:[0,0,1,0,0,1,0,0,1,0,0,1],uv:[0,1,1,1,1,0,0,0],faces:[0,1,2,0,2,3],facingAxisOrderSwap:{east:[3,1,2],west:[-3,-1,2],north:[-1,3,2],south:[1,-3,2],up:[1,2,3],down:[1,-2,-3]}};function we(e,t,r){e.isPlane||function(e){for(var t=0;t<e.position.length;t+=3)e.position[t+2]+=.5}(e),function(e,t){if(null!=t){Pe[0]=t[0],Pe[4]=t[1],Pe[8]=t[2];for(var r=0;r<e.position.length;r+=3){for(var n=0;n<3;n++)Se[n]=e.position[r+n];(0,B.t)(Se,Se,Pe);for(var o=0;o<3;o++)e.position[r+o]=Se[o]}if(t[0]!==t[1]||t[1]!==t[2]){Pe[0]=1/t[0],Pe[4]=1/t[1],Pe[8]=1/t[2];for(var a=0;a<e.normal.length;a+=3){for(var i=0;i<3;i++)Se[i]=e.normal[a+i];(0,B.t)(Se,Se,Pe),(0,B.n)(Se,Se);for(var l=0;l<3;l++)e.normal[a+l]=Se[l]}}}}(e,function(e,t,r){var n=(0,D.ur)(t,r);if(null==e&&1===n)return null;if(null==e)return[n,n,n];if("number"==typeof e){var o=e*n;return[o,o,o]}return[null!=e.width?e.width*n:n,null!=e.depth?e.depth*n:n,null!=e.height?e.height*n:n]}(null===r||void 0===r?void 0:r.size,null===r||void 0===r?void 0:r.unit,t.spatialReference));var o=(0,T.G7)(t,r),a=t.spatialReference.isGeographic?(0,T.G7)(t):o,i=(0,D.qk)({vertexAttributes:e,vertexSpace:a,spatialReference:t.spatialReference},o,{allowBufferReuse:!0});return{vertexAttributes:new U.Q((0,n.Z)((0,n.Z)({},i),{},{uv:e.uv})),vertexSpace:o,components:[new R.Z({faces:e.faces,material:(null===r||void 0===r?void 0:r.material)||null})],spatialReference:t.spatialReference}}var Ae={faceDescriptions:[{axis:[0,-1,0],uvOrigin:[0,.625],corners:[[-1,-1],[1,-1],[1,1],[-1,1]]},{axis:[1,0,0],uvOrigin:[.25,.625],corners:[[-1,-1],[1,-1],[1,1],[-1,1]]},{axis:[0,1,0],uvOrigin:[.5,.625],corners:[[1,-1],[-1,-1],[-1,1],[1,1]]},{axis:[-1,0,0],uvOrigin:[.75,.625],corners:[[1,-1],[-1,-1],[-1,1],[1,1]]},{axis:[0,0,1],uvOrigin:[0,.375],corners:[[-1,-1],[1,-1],[1,1],[-1,1]]},{axis:[0,0,-1],uvOrigin:[0,.875],corners:[[-1,1],[1,1],[1,-1],[-1,-1]]}],uvScales:[[0,0],[1,0],[1,1],[0,1]],faceVertexOffsets:[0,1,2,0,2,3]},Ze={south:0,east:1,north:2,west:3,up:4,down:5},Se=(0,A.Ue)(),Pe=(0,xe.Ue)(),ke=r(29303),Fe=r(29134),Re=r(7025),je=r(68700),Ee=r(50894),_e=r(29691),Ce=r(37998),Me=function(){return m.Z.getLogger("esri.geometry.support.meshUtils.rotate")};function Ue(e,t,r){var n,o;if(null!==(n=e.vertexAttributes)&&void 0!==n&&n.position&&0!==t[3]){var a=e.spatialReference,i=e.vertexSpace,s=null!==(o=null===r||void 0===r?void 0:r.origin)&&void 0!==o?o:e.anchor,u=null===r||void 0===r?void 0:r.geographic,c=K(Me,i,a,u);(0,T.QK)(e)?function(e,t,r){var n;null!==(n=e.transform)&&void 0!==n||(e.transform=new M.Z);var o=e.vertexSpace,a=e.transform,i=e.spatialReference,s=(0,l.Z)(o.origin,3),u=s[0],c=s[1],f=s[2],v=new P.Z({x:u,y:c,z:f,spatialReference:i}),p=Ne;if(v.equals(r))(0,B.s)(p,0,0,0);else if(!(0,D.x1)(p,r,e))return void(0,O.logProjectionError)(Me(),r.spatialReference,i,O.loadProjectErrorMessage);(0,je.yY)(Be,(0,F.ZZ)(t),(0,F.WH)(t));var h=(0,Fe.PS)(Ie,Be,A.AG,A.hq,p),d=a.localMatrix,m=(0,Fe.Jp)(Ie,h,d);a.scale=(0,Fe.Q$)((0,A.Ue)(),m),(0,Fe.bA)(m,m,(0,B.i)(Ne,a.scale));var g=a.rotationAxis;a.rotation=(0,F.q_)(m),0===a.rotationAngle&&(a.rotationAxis=g),a.translation=(0,Fe.i0)((0,A.Ue)(),m)}(e,t,s):c?function(e,t,r){var n=e.spatialReference,o=(0,_e.rS)(n),a=ze;if(!(0,q.K)(r,a,o)&&((0,O.logProjectionError)(Me(),r.spatialReference,o,"Falling back to mesh origin"),!(0,q.K)(e.origin,a,o)))return void(0,O.logProjectionError)(Me(),e.origin.spatialReference,o);var i=e.vertexAttributes.position,l=e.vertexAttributes.normal,s=e.vertexAttributes.tangent,u=new Float64Array(i.length),c=null!=l?new Float32Array(l.length):null,f=null!=s?new Float32Array(s.length):null;(0,Ce.B)(o,a,Le,o),(0,ke.xO)(Ge,Le);var v=Oe;(0,B.t)((0,F.ZZ)(Oe),(0,F.ZZ)(t),Ge),v[3]=t[3],!(0,O.projectToPCPF)(i,n,u)||null!=l&&null!=c&&!(0,O.projectNormalToPCPF)(l,i,u,n,c)||null!=s&&null!=f&&!(0,O.projectTangentToPCPF)(s,i,u,n,f)?(0,O.logProjectionError)(Me(),n,o):(Te(u,v,3,a),!(0,O.projectFromPCPF)(u,i,n)||null!=l&&null!=c&&(Te(c,v,3),!(0,O.projectNormalFromPCPF)(c,i,u,n,l))||null!=s&&null!=f&&(Te(f,v,4),!(0,O.projectTangentFromPCPF)(f,i,u,n,s))?(0,O.logProjectionError)(Me(),o,n):e.vertexAttributesChanged())}(e,t,s):function(e,t,r){var n=ze;if(!(0,q.K)(r,n,e.spatialReference)){var o=e.origin;return n[0]=o.x,n[1]=o.y,n[2]=o.z,void(0,O.logProjectionError)(Me(),r.spatialReference,e.spatialReference,O.loadProjectErrorMessage)}Te(e.vertexAttributes.position,t,3,n),Te(e.vertexAttributes.normal,t,3),Te(e.vertexAttributes.tangent,t,4),e.vertexAttributesChanged()}(e,t,s)}}function Te(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:A.AG;if(null!=e){(0,Fe.Us)(Le,(0,F.WH)(t),(0,F.ZZ)(t));for(var o=0;o<e.length;o+=r){for(var a=0;a<3;a++)Ne[a]=e[o+a]-n[a];(0,B.h)(Ne,Ne,Le);for(var i=0;i<3;i++)e[o+i]=Ne[i]+n[i]}}}var Ne=(0,A.Ue)(),Ie=(0,Re.Ue)(),Oe=(0,F.Ue)(),Le=(0,Re.Ue)(),Ge=(0,xe.Ue)(),ze=(0,A.Ue)(),Be=(0,Ee.Ue)(),qe=function(){return m.Z.getLogger("esri.geometry.support.meshUtils.scale")};function Ke(e,t,r){var n,o;if(null!==(n=e.vertexAttributes)&&void 0!==n&&n.position){var a=e.vertexSpace,i=e.spatialReference,s=null!==(o=null===r||void 0===r?void 0:r.origin)&&void 0!==o?o:e.anchor,u=null===r||void 0===r?void 0:r.geographic,c=K(qe,a,i,u);(0,T.QK)(e)?function(e,t,r){var n;null!==(n=e.transform)&&void 0!==n||(e.transform=new M.Z);var o=e.vertexSpace,a=e.transform,i=e.spatialReference,s=(0,l.Z)(o.origin,3),u=s[0],c=s[1],f=s[2],v=new P.Z({x:u,y:c,z:f,spatialReference:i}),p=He;if(v.equals(r))(0,B.s)(p,0,0,0);else if(!(0,D.x1)(p,r,e))return void(0,O.logProjectionError)(qe(),r.spatialReference,i,O.loadProjectErrorMessage);var h=(0,B.s)(We,t,t,t),d=(0,Fe.PS)(Ye,Ee.Wd,A.AG,h,p),m=a.localMatrix,g=(0,Fe.Jp)(Ye,d,m);a.scale=(0,Fe.Q$)((0,A.Ue)(),g),(0,Fe.bA)(g,g,(0,B.i)(He,a.scale));var y=a.rotationAxis;a.rotation=(0,F.q_)(g),0===a.rotationAngle&&(a.rotationAxis=y),a.translation=(0,Fe.i0)((0,A.Ue)(),g)}(e,t,s):c?function(e,t,r){var n=e.spatialReference,o=(0,_e.rS)(n),a=Qe;if(!(0,q.K)(r,a,o)&&((0,O.logProjectionError)(qe(),r.spatialReference,o,"Falling back to mesh origin"),!(0,q.K)(e.origin,a,o)))return void(0,O.logProjectionError)(qe(),e.origin.spatialReference,o);var i=e.vertexAttributes.position,l=e.vertexAttributes.normal,s=e.vertexAttributes.tangent,u=new Float64Array(i.length),c=null!=l?new Float32Array(l.length):null,f=null!=s?new Float32Array(s.length):null;!(0,O.projectToPCPF)(i,n,u)||null!=l&&null!=c&&!(0,O.projectNormalToPCPF)(l,i,u,n,c)||null!=s&&null!=f&&!(0,O.projectTangentToPCPF)(s,i,u,n,f)?(0,O.logProjectionError)(qe(),n,o):(De(u,t,a),!(0,O.projectFromPCPF)(u,i,n)||null!=l&&null!=c&&!(0,O.projectNormalFromPCPF)(c,i,u,n,l)||null!=s&&null!=f&&!(0,O.projectTangentFromPCPF)(f,i,u,n,s)?(0,O.logProjectionError)(qe(),o,n):e.vertexAttributesChanged())}(e,t,s):function(e,t,r){var n=Qe;if(!(0,q.K)(r,n,e.spatialReference)){var o=e.origin;return n[0]=o.x,n[1]=o.y,n[2]=o.z,void(0,O.logProjectionError)(qe(),r.spatialReference,e.spatialReference,O.loadProjectErrorMessage)}De(e.vertexAttributes.position,t,n),e.vertexAttributesChanged()}(e,t,s)}}function De(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:A.AG;if(e)for(var n=0;n<e.length;n+=3){for(var o=0;o<3;o++)He[o]=e[n+o]-r[o];(0,B.j)(He,He,t);for(var a=0;a<3;a++)e[n+a]=He[a]+r[a]}}var Ve,He=(0,A.Ue)(),We=(0,A.Ue)(),Ye=(0,Re.Ue)(),Qe=(0,A.Ue)(),Je="esri.geometry.Mesh";function $e(){return m.Z.getLogger(Je)}var Xe={base:null,key:"type",defaultKeyValue:"georeferenced",typeMap:{georeferenced:_.Z,local:C.Z}},et=Ve=function(e){(0,c.Z)(v,e);var t=(0,f.Z)(v);function v(e){var r;return(0,s.Z)(this,v),(r=t.call(this,e)).components=null,r.vertexSpace=new _.Z,r.transform=null,r.metadata=new ye,r.hasZ=!0,r.hasM=!1,r.vertexAttributes=new U.Q,r.type="mesh",r}return(0,u.Z)(v,[{key:"initialize",value:function(){var e=this;(0===this.metadata.externalSources.length||this.vertexAttributes.position.length)&&(this.loadStatus="loaded"),this.when((function(){e.addHandles((0,x.watch)((function(){var t;return{vertexAttributes:e.vertexAttributes,components:null===(t=e.components)||void 0===t?void 0:t.map((function(e){return e.clone()}))}}),(function(){return e._clearSources()}),{once:!0,sync:!0}))}))}},{key:"hasExtent",get:function(){var e;return this.loaded?this.vertexAttributes.position.length>0&&(!this.components||this.components.length>0):null!=(null===(e=this.metadata.displaySource)||void 0===e?void 0:e.extent)}},{key:"_transformedExtent",get:function(){var e=this.components,t=this.spatialReference,r=this.vertexAttributes,n=this.vertexSpace,o=r.position;return 0===o.length||e&&0===e.length?new Z.Z({xmin:0,ymin:0,zmin:0,xmax:0,ymax:0,zmax:0,spatialReference:t}):(0,T.zZ)(n)?function(e,t,r,n){var o,a=(0,l.Z)(e,6),i=a[0],s=a[1],u=a[2],c=a[3],f=a[4],v=a[5];null!==(o=L)&&void 0!==o||(L=new Float64Array(24));var p=L;return p[0]=i,p[1]=s,p[2]=u,p[3]=i,p[4]=f,p[5]=u,p[6]=c,p[7]=f,p[8]=u,p[9]=c,p[10]=s,p[11]=u,p[12]=i,p[13]=s,p[14]=v,p[15]=i,p[16]=f,p[17]=v,p[18]=c,p[19]=f,p[20]=v,p[21]=c,p[22]=s,p[23]=v,(0,O.project)({positions:p,transform:t,vertexSpace:r,inSpatialReference:n,outSpatialReference:n,outPositions:p}),z(p,n)}(this._untransformedBounds,this.transform,n,t):z(o,t)}},{key:"_untransformedBounds",get:function(){return G(this.vertexAttributes.position)}},{key:"anchor",get:function(){var e=(0,T.rU)(this.vertexSpace,this.spatialReference);if(null!=e)return e;var t=this._transformedExtent,r=t.center,n=t.zmin;return new P.Z({x:r.x,y:r.y,z:n,spatialReference:this.spatialReference})}},{key:"origin",get:function(){var e=(0,T.rU)(this.vertexSpace,this.spatialReference);return null!=e?e:this._transformedExtent.center}},{key:"extent",get:function(){var e,t;return this.loaded||null==(null===(e=this.metadata)||void 0===e||null===(t=e.displaySource)||void 0===t?void 0:t.extent)?this._transformedExtent:this.metadata.displaySource.extent.clone()}},{key:"addComponent",value:function(e){this._checkIfLoaded("addComponent()")&&(this.components||(this.components=[]),this.components.push(R.Z.from(e)),this.notifyChange("components"))}},{key:"removeComponent",value:function(e){if(this._checkIfLoaded("removeComponent()")){if(this.components){var t=this.components.indexOf(e);if(-1!==t)return this.components.splice(t,1),void this.notifyChange("components")}$e().error("removeComponent()","Provided component is not part of the list of components")}}},{key:"rotate",value:function(e,t,r,n){return(0,F.qw)(e,t,r,tt),Ue(this,tt,n),this}},{key:"offset",value:function(e,t,r){if(!this._checkIfLoaded("offset()"))return this;var n=this.vertexSpace,o=this.vertexAttributes,a=null===o||void 0===o?void 0:o.position;if(!a)return this;if((0,T.zZ)(n)){var i=(0,l.Z)(n.origin,3),s=i[0],u=i[1],c=i[2];n.origin=(0,A.al)(s+e,u+t,c+r)}else{for(var f=0;f<a.length;f+=3)a[f]+=e,a[f+1]+=t,a[f+2]+=r;this.vertexAttributesChanged()}return this}},{key:"scale",value:function(e,t){return this._checkIfLoaded("scale()")?(Ke(this,e,t),this):this}},{key:"centerAt",value:function(e,t){return this._checkIfLoaded("centerAt()")?(H(this,e,t),this):this}},{key:"load",value:function(e){var t=this.metadata.displaySource;return t&&this.addResolvingPromise(function(e,t,r){return $.apply(this,arguments)}(this,t,e)),Promise.resolve(this)}},{key:"addExternalSources",value:function(e){this.metadata.externalSources.addMany(e)}},{key:"updateDisplaySource",value:function(e){this.metadata.displaySource=e}},{key:"clone",value:function(){return this.cloneAndModifyVertexAttributes(this.vertexAttributes.clone(),this.vertexSpace.clone())}},{key:"cloneAndModifyVertexAttributes",value:function(e,t){var r,n,o=null;if(this.components){var a=new Map,i=new Map;o=this.components.map((function(e){return e.cloneWithDeduplication(a,i)}))}var l={components:o,spatialReference:this.spatialReference,vertexAttributes:e,vertexSpace:t,transform:null!==(r=null===(n=this.transform)||void 0===n?void 0:n.clone())&&void 0!==r?r:null,metadata:this.metadata.clone()};return new Ve(l)}},{key:"cloneShallow",value:function(){return new Ve({components:this.components,spatialReference:this.spatialReference,vertexAttributes:this.vertexAttributes,vertexSpace:this.vertexSpace.clone(),transform:this.transform,metadata:this.metadata})}},{key:"vertexAttributesChanged",value:function(){this.notifyChange("vertexAttributes")}},{key:"toBinaryGLTF",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(t){var n,o,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([r.e(95477).then(r.bind(r,95477)),this.load(t)]);case 2:return n=e.sent,o=(0,l.Z)(n,1),i=o[0].toBinaryGLTF,(0,y.k_)(t),e.next=8,i(this,t);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"memoryUsage",get:function(){var e=0;if(e+=this.vertexAttributes.memoryUsage,null!=this.components){var t,r=(0,o.Z)(this.components);try{for(r.s();!(t=r.n()).done;){e+=t.value.memoryUsage}}catch(n){r.e(n)}finally{r.f()}}return e}},{key:"_clearSources",value:function(){this.metadata.clearSources()}},{key:"_checkIfLoaded",value:function(e){return!!this.loaded||($e().error(e,"Mesh must be loaded before applying operations"),!1)}}],[{key:"createBox",value:function(e,t){if(!(e instanceof P.Z))return $e().error(".createBox()",j),null;var r=new Ve(we(function(){for(var e=Ae.faceDescriptions,t=Ae.faceVertexOffsets,r=Ae.uvScales,n=4*e.length,a=new Float64Array(3*n),i=new Float32Array(3*n),l=new Float32Array(2*n),s=new Uint32Array(2*e.length*3),u=0,c=0,f=0,v=0,p=0;p<e.length;p++){var h,d=e[p],m=u/3,g=(0,o.Z)(t);try{for(g.s();!(h=g.n()).done;){var y=h.value;s[v++]=m+y}}catch(S){g.e(S)}finally{g.f()}for(var x=d.corners,b=0;b<4;b++){var w=x[b],A=0;l[f++]=.25*r[b][0]+d.uvOrigin[0],l[f++]=d.uvOrigin[1]-.25*r[b][1];for(var Z=0;Z<3;Z++)0!==d.axis[Z]?(a[u++]=.5*d.axis[Z],i[c++]=d.axis[Z]):(a[u++]=.5*w[A++],i[c++]=0)}}return{position:a,normal:i,uv:l,faces:s}}(),e,t));return null!==t&&void 0!==t&&t.imageFace&&"all"!==t.imageFace?function(e,t){for(var r=e.components[0],n=r.faces,o=Ze[t],a=6*o,i=new Array(6),l=new Array(n.length-6),s=0,u=0,c=0;c<n.length;c++)c>=a&&c<a+6?i[s++]=n[c]:l[u++]=n[c];if(null!=e.vertexAttributes.uv){for(var f=new Float32Array(e.vertexAttributes.uv),v=4*o*2,p=[0,1,1,1,1,0,0,0],h=0;h<p.length;h++)f[v+h]=p[h];e.vertexAttributes.uv=f}return e.components=[new R.Z({faces:i,material:r.material}),new R.Z({faces:l})],e}(r,t.imageFace):r}},{key:"createSphere",value:function(e,t){return e instanceof P.Z?new Ve(we(function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=Math.round(8*Math.pow(2,e)),r=2*t,n=(t-1)*(r+1)+2*r,o=new Float64Array(3*n),a=new Float32Array(3*n),i=new Float32Array(2*n),l=new Uint32Array((t-1)*r*2*3),s=0,u=0,c=0,f=0,v=0;v<=t;v++){var p=v/t*Math.PI+.5*Math.PI,h=Math.cos(p),d=Math.sin(p);Se[2]=d;for(var m=0===v||v===t,g=m?r-1:r,y=0;y<=g;y++){var x=y/g*2*Math.PI;Se[0]=-Math.sin(x)*h,Se[1]=Math.cos(x)*h;for(var b=0;b<3;b++)o[s]=.5*Se[b],a[s]=Se[b],++s;i[u++]=(y+(m?.5:0))/r,i[u++]=v/t,0!==v&&y!==r&&(v!==t&&(l[c++]=f,l[c++]=f+1,l[c++]=f-r),1!==v&&(l[c++]=f,l[c++]=f-r,l[c++]=f-r-1)),f++}}return{position:o,normal:a,uv:i,faces:l}}((null===t||void 0===t?void 0:t.densificationFactor)||0),e,t)):($e().error(".createSphere()",j),null)}},{key:"createCylinder",value:function(e,t){return e instanceof P.Z?new Ve(we(function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=5,r=Math.round(16*Math.pow(2,e)),n=(t-1)*(r+1)+2*r,o=new Float64Array(3*n),a=new Float32Array(3*n),i=new Float32Array(2*n),l=new Uint32Array(4*r*3),s=0,u=0,c=0,f=0,v=0,p=0;p<=t;p++)for(var h=0===p||p===t,d=p<=1||p>=t-1,m=2===p||4===p,g=h?r-1:r,y=0;y<=g;y++){var x=y/g*2*Math.PI,b=h?0:.5;Se[0]=b*Math.sin(x),Se[1]=b*-Math.cos(x),Se[2]=p<=2?.5:-.5;for(var w=0;w<3;w++)o[s++]=Se[w],a[u++]=d?2===w?p<=1?1:-1:0:2===w?0:Se[w]/b;i[c++]=(y+(h?.5:0))/r,i[c++]=p<=1?1*p/3:p<=3?1*(p-2)/3+1/3:1*(p-4)/3+2/3,m||0===p||y===r||(p!==t&&(l[f++]=v,l[f++]=v+1,l[f++]=v-r),1!==p&&(l[f++]=v,l[f++]=v-r,l[f++]=v-r-1)),v++}return{position:o,normal:a,uv:i,faces:l}}((null===t||void 0===t?void 0:t.densificationFactor)||0),e,t)):($e().error(".createCylinder()",j),null)}},{key:"createPlane",value:function(e,t){var r;if(!(e instanceof P.Z))return $e().error(".createPlane()",j),null;var o=null!==(r=null===t||void 0===t?void 0:t.facing)&&void 0!==r?r:"up",a=function(e,t){var r="number"==typeof t?t:null!=t?t.width:1,n="number"==typeof t?t:null!=t?t.height:1;switch(e){case"up":case"down":return{width:r,depth:n};case"north":case"south":return{width:r,height:n};case"east":case"west":return{depth:r,height:n}}}(o,null===t||void 0===t?void 0:t.size);return new Ve(we(function(e){for(var t=be.facingAxisOrderSwap[e],r=be.position,n=be.normal,o=new Float64Array(r.length),a=new Float32Array(n.length),i=0,l=0;l<4;l++)for(var s=i,u=0;u<3;u++){var c=t[u],f=Math.abs(c)-1,v=c>=0?1:-1;o[i]=r[s+f]*v,a[i]=n[s+f]*v,i++}return{position:o,normal:a,uv:new Float32Array(be.uv),faces:new Uint32Array(be.faces),isPlane:!0}}(o),e,(0,n.Z)((0,n.Z)({},t),{},{size:a})))}},{key:"createFromPolygon",value:function(e,t){var r;if(!(e instanceof k.Z))return $e().error(".createFromPolygon()","Expected polygon to be a Polygon instance"),null;var n=(0,N.bT)(e);return new Ve({vertexAttributes:new U.Q({position:n.position}),components:[new R.Z({faces:n.faces,shading:"flat",material:null!==(r=null===t||void 0===t?void 0:t.material)&&void 0!==r?r:null})],spatialReference:e.spatialReference,vertexSpace:new _.Z})}},{key:"createFromGLTF",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(t,n,o){var i,l,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t instanceof P.Z){e.next=3;break}throw i=new E,$e().error(".createfromGLTF()",i.message),i;case 3:return e.next=5,(0,y.Hl)(Promise.all([r.e(58322),r.e(15010)]).then(r.bind(r,58883)),o);case 5:return l=e.sent,s=l.loadGLTFMesh,e.t0=Ve,e.next=10,s(t,n,o);case 10:return e.t1=e.sent,e.abrupt("return",new e.t0(e.t1));case 12:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"createFromFiles",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(t,r,o){var i,l;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,p.XV)($e(),"`Mesh.createFromFiles` is deprecated in favor of 'SceneLayer.convertMesh'",{replacement:"SceneLayer.convertMesh",version:"4.29"}),i=function(e){return $e().error(".createFromFiles()",e.message)},t instanceof P.Z){e.next=5;break}throw l=new E,i(l),l;case 5:if(null!==o&&void 0!==o&&o.layer){e.next=7;break}throw new h.Z("invalid:no-layer","SceneLayer required for file to mesh conversion.");case 7:return e.abrupt("return",o.layer.convertMesh(r,(0,n.Z)({location:t},o)));case 8:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"createWithExternalSource",value:function(e,t,r){var n,o,a,i=null!==(n=null===r||void 0===r?void 0:r.extent)&&void 0!==n?n:null,l=e.spatialReference,s=null!==(o=null===r||void 0===r||null===(a=r.transform)||void 0===a?void 0:a.clone())&&void 0!==o?o:new M.Z,u=(0,T.G7)(e,r),c={source:t,extent:i},f=new ye;return f.externalSources.push(c),new Ve({metadata:f,transform:s,vertexSpace:u,spatialReference:l})}},{key:"createIncomplete",value:function(e,t){var r,n,o=e.spatialReference,a=null!==(r=null===t||void 0===t||null===(n=t.transform)||void 0===n?void 0:n.clone())&&void 0!==r?r:new M.Z,i=(0,T.G7)(e,t),l=new Ve({transform:a,vertexSpace:i,spatialReference:o});return l.addResolvingPromise(Promise.reject(new h.Z("mesh-incomplete","Mesh resources are not complete"))),l}}]),v}(d.Z.LoadableMixin((0,g.v)(S.Z)));(0,v._)([(0,b.Cb)({type:[R.Z],json:{write:!0}})],et.prototype,"components",void 0),(0,v._)([(0,b.Cb)({nonNullable:!0,types:Xe,constructOnly:!0,json:{write:!0}})],et.prototype,"vertexSpace",void 0),(0,v._)([(0,b.Cb)({type:M.Z,json:{write:!0}})],et.prototype,"transform",void 0),(0,v._)([(0,b.Cb)({constructOnly:!0})],et.prototype,"metadata",void 0),(0,v._)([(0,b.Cb)()],et.prototype,"hasExtent",null),(0,v._)([(0,b.Cb)()],et.prototype,"_transformedExtent",null),(0,v._)([(0,b.Cb)()],et.prototype,"_untransformedBounds",null),(0,v._)([(0,b.Cb)()],et.prototype,"anchor",null),(0,v._)([(0,b.Cb)()],et.prototype,"origin",null),(0,v._)([(0,b.Cb)({readOnly:!0,json:{read:!1}})],et.prototype,"extent",null),(0,v._)([(0,b.Cb)({readOnly:!0,json:{read:!1,write:!0,default:!0}})],et.prototype,"hasZ",void 0),(0,v._)([(0,b.Cb)({readOnly:!0,json:{read:!1,write:!0,default:!1}})],et.prototype,"hasM",void 0),(0,v._)([(0,b.Cb)({type:U.Q,nonNullable:!0,json:{write:!0}})],et.prototype,"vertexAttributes",void 0),et=Ve=(0,v._)([(0,w.j)(Je)],et);var tt=(0,F.Ue)(),rt=et},76046:function(e,t,r){r.d(t,{Z:function(){return b}});var n,o=r(15671),a=r(43144),i=r(60136),l=r(29388),s=r(27366),u=r(46784),c=r(49861),f=(r(93169),r(32718),r(84936),r(69912)),v=r(29134),p=r(7025),h=r(68700),d=r(50894),m=r(12400),g=r(45238),y=n=function(e){(0,i.Z)(r,e);var t=(0,l.Z)(r);function r(e){var n;return(0,o.Z)(this,r),(n=t.call(this,e)).translation=(0,m.Ue)(),n.rotationAxis=(0,m.nI)(g.up),n.rotationAngle=0,n.scale=(0,m.al)(1,1,1),n}return(0,a.Z)(r,[{key:"rotation",get:function(){return(0,g.uT)(this.rotationAxis,this.rotationAngle)},set:function(e){this.rotationAxis=(0,m.d9)((0,g.ZZ)(e)),this.rotationAngle=(0,g.EU)(e)}},{key:"localMatrix",get:function(){var e=(0,p.Ue)();return(0,h.yY)(x,(0,g.ZZ)(this.rotation),(0,g.WH)(this.rotation)),(0,v.Iw)(e,x,this.translation,this.scale),e}},{key:"localMatrixInverse",get:function(){return(0,v.U_)((0,p.Ue)(),this.localMatrix)}},{key:"equals",value:function(e){return this===e||null!=e&&(0,v.I6)(this.localMatrix,e.localMatrix)}},{key:"clone",value:function(){var e={translation:(0,m.d9)(this.translation),rotationAxis:(0,m.d9)(this.rotationAxis),rotationAngle:this.rotationAngle,scale:(0,m.d9)(this.scale)};return new n(e)}}]),r}(u.wq);(0,s._)([(0,c.Cb)({type:[Number],nonNullable:!0,json:{write:!0}})],y.prototype,"translation",void 0),(0,s._)([(0,c.Cb)({type:[Number],nonNullable:!0,json:{write:!0}})],y.prototype,"rotationAxis",void 0),(0,s._)([(0,c.Cb)({type:Number,nonNullable:!0,json:{write:!0}})],y.prototype,"rotationAngle",void 0),(0,s._)([(0,c.Cb)({type:[Number],nonNullable:!0,json:{write:!0}})],y.prototype,"scale",void 0),(0,s._)([(0,c.Cb)()],y.prototype,"rotation",null),(0,s._)([(0,c.Cb)()],y.prototype,"localMatrix",null),(0,s._)([(0,c.Cb)()],y.prototype,"localMatrixInverse",null),y=n=(0,s._)([(0,f.j)("esri.geometry.support.MeshTransform")],y);var x=(0,d.Ue)(),b=y},17493:function(e,t,r){r.d(t,{CP:function(){return p},JG:function(){return b},LL:function(){return h},NZ:function(){return d},fV:function(){return w},vj:function(){return Z},yT:function(){return P},zE:function(){return S}});var n=r(93433),o=r(74165),a=r(15861),i=r(37762),l=r(15671),s=r(43144),u=r(76200),c=r(63780),f=r(66978),v=r(18277),p=function(){function e(t,r,n){(0,l.Z)(this,e),this.assetName=t,this.assetMimeType=r,this.parts=n}return(0,s.Z)(e,[{key:"equals",value:function(e){return this===e||this.assetName===e.assetName&&this.assetMimeType===e.assetMimeType&&(0,c.fS)(this.parts,e.parts,(function(e,t){return e.equals(t)}))}},{key:"isOnService",value:function(e){return this.parts.every((function(t){return t.isOnService(e)}))}},{key:"makeHash",value:function(){var e,t="",r=(0,i.Z)(this.parts);try{for(r.s();!(e=r.n()).done;){t+=e.value.partHash}}catch(n){r.e(n)}finally{r.f()}return t}},{key:"toBlob",value:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t){var r,n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!==(r=this.parts).length){e.next=3;break}return e.abrupt("return",r[0].toBlob(t));case 3:return e.next=5,Promise.all(r.map((function(e){return e.toBlob(t)})));case 5:return n=e.sent,e.abrupt("return",((0,f.k_)(t),new Blob(n)));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),h=function(){function e(t,r){(0,l.Z)(this,e),this.partUrl=t,this.partHash=r}return(0,s.Z)(e,[{key:"equals",value:function(e){return this===e||this.partUrl===e.partUrl&&this.partHash===e.partHash}},{key:"isOnService",value:function(e){return this.partUrl.startsWith("".concat(e.path,"/assets/"))}},{key:"toBlob",value:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t){var r,n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.Z)(this.partUrl,{responseType:"blob"});case 2:return r=e.sent,n=r.data,e.abrupt("return",((0,f.k_)(t),n));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function d(e){return function(e){if(!e)return!1;if(Array.isArray(e))return e.some(x);return x(e)}(null===e||void 0===e?void 0:e.source)}function m(e){return!!Array.isArray(e)&&e.every((function(e){return e instanceof p}))}var g=/^(model\/gltf\+json)|(model\/gltf-binary)$/,y=/\.(gltf|glb)/i;function x(e){if(e instanceof File){var t=e.type,r=e.name;return g.test(t)||y.test(r)}return g.test(e.assetMimeType)||y.test(e.assetName)}function b(e,t){return!!e&&function(e,t){if(Array.isArray(e)){var r=e;return r.length>0&&r.every((function(e){return A(e,t)}))}return A(e,t)}(e.source,t)}function w(e,t){if(e===t)return!0;var r=e.source,o=t.source;if(r===o)return!0;if(m(r)&&m(o)){if(r.length!==o.length)return!1;for(var a=function(e,t){return e.assetName<t.assetName?-1:e.assetName>t.assetName?1:0},i=(0,n.Z)(r).sort(a),l=(0,n.Z)(o).sort(a),s=0;s<i.length;++s)if(!i[s].equals(l[s]))return!1;return!0}return!1}function A(e,t){return e instanceof p&&e.isOnService(t)}function Z(e,t){var r;return e instanceof File?(0,v.dm)(e,t):null!==(r=(0,v.S0)(e.assetMimeType,t))&&void 0!==r?r:(0,v.Ow)(e.assetName,t)}function S(e){return Array.isArray(e)?e:[e]}function P(e){return!!e.original}},66149:function(e,t,r){r.d(t,{qk:function(){return b},ur:function(){return S},x1:function(){return x}});var n=r(32718),o=r(16889),a=r(68860),i=r(29303),l=r(21389),s=r(29134),u=r(7025),c=r(32035),f=r(12400),v=r(29691),p=r(37998),h=r(68859),d=r(69048),m=r(11186),g=r(11700),y=function(){return n.Z.getLogger("esri.geometry.support.meshUtils.vertexSpaceConversion")};function x(e,t,r){var n=r.vertexSpace,o=r.spatialReference;if("georeferenced"===n.type){var a=e;if(!(0,h.K)(t,a,o))return!1;var i=n.origin;return(0,c.f)(e,a,i),!0}var l=(0,v.rS)(o),u=e;if(!(0,h.K)(t,u,l))return!1;var f=n.origin,d=_;if(!(0,p.B)(o,f,d,l))return!1;var m=(0,s.U_)(_,d);return null!=m&&((0,c.h)(e,u,m),!0)}function b(e,t,r){var n=e.vertexSpace,a=e.transform,l=e.vertexAttributes,f=Z(e.spatialReference,r,P.SOURCE|P.TARGET);if((0,d.vI)(n,t)&&(!a||(0,s.I6)(a.localMatrix,u.Wd))&&(0,o.Po)(f,1)){var h=l.position,x=l.normal,b=l.tangent,S=null===r||void 0===r?void 0:r.allowBufferReuse;return{position:S?h:h.slice(),normal:S?x:null===x||void 0===x?void 0:x.slice(),tangent:S?b:null===b||void 0===b?void 0:b.slice()}}switch(e.vertexSpace.type){case"local":return"local"===t.type?function(e,t,r,n){var o=e.vertexAttributes,a=e.spatialReference,i=e.transform,l=t.origin,u=(0,v.rS)(a);if(!(0,p.B)(a,l,F,u))return(0,g.logProjectionError)(y(),a,u),null;if(i&&(0,s.Jp)(F,F,i.localMatrix),!(0,p.B)(a,r,R,u))return(0,g.logProjectionError)(y(),u,a),null;(0,s.U_)(R,R);var c=(0,s.Jp)(F,R,F);return A(c,a,n,P.SOURCE|P.TARGET),w(o,c)}(e,e.vertexSpace,t.origin,r):function(e,t,r,n){var o=e.spatialReference,a=e.vertexAttributes,i=e.transform,l=t.origin,u=(0,v.rS)(o);if(!(0,p.B)(o,l,F,u))return(0,g.logProjectionError)(y(),o,u),null;i&&(0,s.Jp)(F,F,i.localMatrix),A(F,o,n,P.SOURCE);var f=new Float64Array(a.position.length),h=function(e,t,r,n){(0,m.a)(n,e,t);var o=new Float64Array(e.length);return(0,g.projectFromPCPF)(n,o,r)?o:((0,g.logProjectionError)(y(),(0,v.rS)(r),r),null)}(a.position,F,o,f);if(!h)return null;var d=function(e,t,r,n,o){if(null==r)return null;var a=new Float32Array(r.length);return(0,g.transformNormal)(r,a,n),(0,g.projectNormalFromPCPF)(a,e,t,o,a)?a:((0,g.logProjectionError)(y(),(0,v.rS)(o),o),null)}(h,f,a.normal,F,o);if(a.normal&&!d)return null;var x=function(e,t,r,n,o){if(null==r)return null;var a=new Float32Array(r.length);return(0,g.transformTangent)(r,a,n),(0,g.projectTangentFromPCPF)(a,e,t,o,a)?a:((0,g.logProjectionError)(y(),(0,v.rS)(o),o),null)}(h,f,a.tangent,F,o);if(a.tangent&&!x)return null;if(r){var b=(0,c.k)(E,r);(0,m.b)(h,h,b)}return{position:h,normal:d,tangent:x}}(e,e.vertexSpace,t.origin,r);case"georeferenced":return"local"===t.type?function(e,t,r,n){var o=e.vertexAttributes,a=e.spatialReference,l=e.transform,u=t.origin,c=(0,v.rS)(a);if(!(0,p.B)(a,r,F,c))return(0,g.logProjectionError)(y(),a,c),null;var f=1/Z(a,n,P.TARGET);(0,s.bA)(F,F,[f,f,f]);var h=(0,s.U_)(R,F),d=function(e,t,r){if(!t)return e;if(!r){var n=e.position,o=e.normal,a=e.tangent;return{position:(0,m.b)(new Float64Array(n.length),n,t),tangent:a,normal:o}}var i=w(e,r.localMatrix);return(0,m.b)(i.position,i.position,t),i}(o,u,l),x=d.position,b=d.normal,A=d.tangent,S=new Float64Array(x.length),k=function(e,t,r,n){var o=(0,g.projectToPCPF)(e,t,n);if(!o)return(0,g.logProjectionError)(y(),t,(0,v.rS)(t)),null;var a=new Float64Array(o.length);return(0,m.a)(a,o,r),a}(x,a,h,S);if(!k)return null;var E=(0,i.XL)(j,h),_=function(e,t,r,n,o,a){if(null==e)return null;var i=null!==a&&void 0!==a?a:new Float32Array(e.length);return(0,g.projectNormalToPCPF)(e,t,r,n,i)?((0,m.t)(i,i,o),i):((0,g.logProjectionError)(y(),n,(0,v.rS)(n)),null)}(b,x,S,a,E,b!==o.normal?b:void 0);if(!_&&b)return null;var C=function(e,t,r,n,o,a){if(null==e)return null;var i=null!==a&&void 0!==a?a:new Float32Array(e.length);return(0,g.projectTangentToPCPF)(e,t,r,n,i)?((0,m.t)(i,i,o,4),i):((0,g.logProjectionError)(y(),n,(0,v.rS)(n)),null)}(A,x,S,a,E,A!==o.tangent?A:void 0);return!C&&A?null:{position:k,normal:_,tangent:C}}(e,e.vertexSpace,t.origin,r):function(e,t,r,n){var o=e.vertexAttributes,a=e.transform,i=e.spatialReference,l=t.origin,s=a?w(o,a.localMatrix):o,u=s.position,f=s.normal,v=s.tangent,p=new Float64Array(u.length),h=u;if(l&&(h=(0,m.b)(p,h,l)),r){var d=(0,c.k)(E,r);h=(0,m.b)(p,h,d)}Z(i,n,P.NONE);var g=null===n||void 0===n?void 0:n.allowBufferReuse;return{position:h!==o.position||g?h:h.slice(),normal:f!==o.normal||g?f:null===f||void 0===f?void 0:f.slice(),tangent:v!==o.tangent||g?v:null===v||void 0===v?void 0:v.slice()}}(e,e.vertexSpace,t.origin,r)}}function w(e,t){var r=new Float64Array(e.position.length);(0,m.a)(r,e.position,t);var n=e.normal?new Float32Array(e.normal.length):null,o=e.tangent?new Float32Array(e.tangent.length):null;return n&&e.normal&&(0,g.transformNormal)(e.normal,n,t),o&&e.tangent&&(0,g.transformTangent)(e.tangent,o,t),{position:r,normal:n,tangent:o}}function A(e,t,r,n){var o=Z(t,r,n);1!==o&&(0,s.bA)(e,e,[o,o,o])}function Z(e,t,r){var n=!!(r&P.SOURCE),o=!!(r&P.TARGET),a=null===t||void 0===t?void 0:t.sourceUnit,i=null===t||void 0===t?void 0:t.targetUnit;if(!a&&!i)return 1;var l=S(a,e);!n&&a&&1!==l&&(y().warn("source unit conversion not supported"),l=1);var s=1/S(i,e);return!o&&i&&1!==s&&(y().warn("target unit conversion not supported"),s=1),l*s}function S(e,t){if(null==e)return 1;var r=(0,a.r6)(t);return 1/(0,a.En)(r,"meters",e)}var P,k,F=(0,u.Ue)(),R=(0,u.Ue)(),j=(0,l.Ue)(),E=(0,f.Ue)(),_=(0,u.Ue)();(k=P||(P={}))[k.NONE=0]="NONE",k[k.SOURCE=1]="SOURCE",k[k.TARGET=2]="TARGET"}}]);
//# sourceMappingURL=63899.cb7020d7.chunk.js.map