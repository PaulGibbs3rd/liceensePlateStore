"use strict";(self.webpackChunkreact_training=self.webpackChunkreact_training||[]).push([[2346],{2346:function(e,t,i){i.d(t,{L:function(){return P}});var n=i(15671),l=i(43144),o=i(60136),a=i(29388),r=i(27366),s=i(7138),c=i(91505),u=i(94172),h=i(17842),y=i(49861),b=(i(93169),i(32718),i(84936),i(69912)),f=i(13611),d=i(32035),p=i(12400),g=i(79803),v=i(68859),m=i(74509),_=i(61574),C=i(64575),S=i(90297),k=i(45008),P=function(e){(0,o.Z)(i,e);var t=(0,a.Z)(i);function i(e){var l;return(0,n.Z)(this,i),(l=t.call(this,e)).layer=null,l.interactive=!0,l.selectable=!1,l.grabbable=!0,l.dragging=!1,l.cursor=null,l.consumesClicks=!0,l.events=new c.Z.EventEmitter,l._circleCollisionCache=null,l._graphicSymbolChangedHandle=null,l._originalSymbol=null,l}return(0,l.Z)(i,[{key:"graphic",set:function(e){this._circleCollisionCache=null,this._originalSymbol=e.symbol,this._set("graphic",e),this.attachSymbolChanged()}},{key:"elevationInfo",get:function(){var e=this.graphic.layer,t=e&&"elevationInfo"in e?e.elevationInfo:null,i=(0,m.vu)(this.graphic),n=t?t.offset:0;return new C.Z({mode:i,offset:n})}},{key:"focusedSymbol",set:function(e){e!==this._get("focusedSymbol")&&(this._set("focusedSymbol",e),this._updateGraphicSymbol(),this._circleCollisionCache=null)}},{key:"grabbableForEvent",value:function(){return!0}},{key:"grabbing",set:function(e){e!==this._get("grabbing")&&(this._set("grabbing",e),this._updateGraphicSymbol())}},{key:"hovering",set:function(e){e!==this._get("hovering")&&(this._set("hovering",e),this._updateGraphicSymbol())}},{key:"selected",set:function(e){e!==this._get("selected")&&(this._set("selected",e),this._updateGraphicSymbol(),this.events.emit("select-changed",{action:e?"select":"deselect"}))}},{key:"_focused",get:function(){return this._get("hovering")||this._get("grabbing")}},{key:"destroy",value:function(){this.detachSymbolChanged(),this._resetGraphicSymbol(),this._set("view",null)}},{key:"intersectionDistance",value:function(e){var t=this.graphic;if(!1===t.visible)return null;var i=t.geometry;if(null==i)return null;var n=this._get("focusedSymbol"),l=null!=n?n:t.symbol;return"2d"===this.view.type?this._intersectDistance2D(this.view,e,i,l):this._intersectDistance3D(this.view,e,t)}},{key:"attach",value:function(){this.attachSymbolChanged(),null!=this.layer&&this.layer.add(this.graphic)}},{key:"detach",value:function(){this.detachSymbolChanged(),this._resetGraphicSymbol(),null!=this.layer&&this.layer.remove(this.graphic)}},{key:"attachSymbolChanged",value:function(){var e=this;this.detachSymbolChanged(),this._graphicSymbolChangedHandle=(0,u.watch)((function(){var t;return null===(t=e.graphic)||void 0===t?void 0:t.symbol}),(function(t){null!=t&&t!==e.focusedSymbol&&t!==e._originalSymbol&&(e._originalSymbol=t,e._focused&&null!=e.focusedSymbol&&(e.graphic.symbol=e.focusedSymbol))}),u.sync)}},{key:"detachSymbolChanged",value:function(){null!=this._graphicSymbolChangedHandle&&(this._graphicSymbolChangedHandle.remove(),this._graphicSymbolChangedHandle=null)}},{key:"onElevationChange",value:function(){}},{key:"onViewChange",value:function(){}},{key:"_updateGraphicSymbol",value:function(){this.graphic.symbol=this._focused&&null!=this.focusedSymbol?this.focusedSymbol:this._originalSymbol}},{key:"_resetGraphicSymbol",value:function(){this.graphic.symbol=this._originalSymbol}},{key:"_intersectDistance2D",value:function(e,t,i,n){var l;if(null==(n=n||(0,_.js)(i)))return null;var o=this._circleCollisionCache;if("point"===i.type&&"cim"===n.type&&"CIMPointSymbol"===(null===(l=n.data.symbol)||void 0===l?void 0:l.type)&&n.data.symbol.symbolLayers){var a=(0,S.i)(n),r=a.offsetX,s=a.offsetY,c=a.size,u=(0,h.md)(t,D),y=c/2,b=e.toScreen(i),d=b.x+r,p=b.y+s;return(0,f.bI)(u,[d,p])<y*y?1:null}if("point"!==i.type||"simple-marker"!==n.type)return(0,k.D)(t,i,e)?1:null;if(null==o||!o.originalPoint.equals(i)){var v=i,m=e.spatialReference;if((0,g.canProjectWithoutEngine)(v.spatialReference,m)){var C=(0,g.project)(v,m);o={originalPoint:v.clone(),mapPoint:C,radiusPx:(0,h.F2)(n.size)},this._circleCollisionCache=o}}if(null!=o){var P,w=(0,h.md)(t,D),G=null===(P=e.toScreen)||void 0===P?void 0:P.call(e,o.mapPoint);if(!G)return null;var I=o.radiusPx,x=G.x+(0,h.F2)(n.xoffset),z=G.y-(0,h.F2)(n.yoffset);return(0,f.bI)(w,[x,z])<I*I?1:null}return null}},{key:"_intersectDistance3D",value:function(e,t,i){var n=e.toMap(t,{include:[i]});return n&&(0,v.K)(n,w,e.renderSpatialReference)?(0,d.p)(w,e.state.camera.eye):null}}]),i}(s.default);(0,r._)([(0,y.Cb)({constructOnly:!0,nonNullable:!0})],P.prototype,"graphic",null),(0,r._)([(0,y.Cb)()],P.prototype,"elevationInfo",null),(0,r._)([(0,y.Cb)({constructOnly:!0,nonNullable:!0})],P.prototype,"view",void 0),(0,r._)([(0,y.Cb)({value:null})],P.prototype,"focusedSymbol",null),(0,r._)([(0,y.Cb)({constructOnly:!0})],P.prototype,"layer",void 0),(0,r._)([(0,y.Cb)()],P.prototype,"interactive",void 0),(0,r._)([(0,y.Cb)()],P.prototype,"selectable",void 0),(0,r._)([(0,y.Cb)()],P.prototype,"grabbable",void 0),(0,r._)([(0,y.Cb)({value:!1})],P.prototype,"grabbing",null),(0,r._)([(0,y.Cb)()],P.prototype,"dragging",void 0),(0,r._)([(0,y.Cb)()],P.prototype,"hovering",null),(0,r._)([(0,y.Cb)({value:!1})],P.prototype,"selected",null),(0,r._)([(0,y.Cb)()],P.prototype,"cursor",void 0),P=(0,r._)([(0,b.j)("esri.views.interactive.GraphicManipulator")],P);var w=(0,p.Ue)(),D=(0,h.s1)()},90297:function(e,t,i){i.d(t,{i:function(){return l}});var n=i(17842);function l(e){var t=0,i=0,l=0;return e?("cim"===e.type&&e.data.symbol&&"symbolLayers"in e.data.symbol&&e.data.symbol.symbolLayers&&e.data.symbol.symbolLayers.map((function(e){"CIMVectorMarker"===e.type&&e.anchorPoint&&(Math.abs(e.anchorPoint.x)>t&&(t=e.anchorPoint.x),Math.abs(e.anchorPoint.y)>i&&(i=e.anchorPoint.y),null!=e.size&&e.size>l&&(l=e.size))})),t=(0,n.F2)(t),i=(0,n.F2)(i),l=(0,n.F2)(l),{offsetX:t,offsetY:i,size:l}):{offsetX:t,offsetY:i,size:l}}}}]);
//# sourceMappingURL=2346.89e4d667.chunk.js.map