"use strict";(self.webpackChunkreact_training=self.webpackChunkreact_training||[]).push([[55086],{90193:function(e,t,n){n.d(t,{n:function(){return r}});var i=n(42265),r=function(){return i.Z.respectPrefersReducedMotion&&window.matchMedia("(prefers-reduced-motion: reduce)").matches}},8768:function(e,t,n){function i(){var e=new Float32Array(9);return e[0]=1,e[4]=1,e[8]=1,e}function r(e){var t=new Float32Array(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function o(e,t,n,i,r,o,a,s,l){var u=new Float32Array(9);return u[0]=e,u[1]=t,u[2]=n,u[3]=i,u[4]=r,u[5]=o,u[6]=a,u[7]=s,u[8]=l,u}n.d(t,{Ue:function(){return i},al:function(){return o},d9:function(){return r}});Object.freeze(Object.defineProperty({__proto__:null,clone:r,create:i,createView:function(e,t){return new Float32Array(e,t,9)},fromValues:o},Symbol.toStringTag,{value:"Module"}))},68748:function(e,t,n){n.d(t,{a:function(){return p},z:function(){return v}});var i=n(37762),r=n(15671),o=n(43144),a=n(60136),s=n(29388),l=n(27366),u=n(80987),c=n(60354),d=(n(93169),n(32718),n(49861)),h=(n(84936),n(69912)),p=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e){var i;return(0,r.Z)(this,n),(i=t.call(this,e)).addHandles([i.on("before-add",(function(e){null==e.item&&e.preventDefault()})),i.on("after-add",(function(e){return i._own(e.item)})),i.on("after-remove",(function(e){return i._release(e.item)}))]),i}return(0,o.Z)(n,[{key:"owner",get:function(){return this._get("owner")},set:function(e){e!==this._get("owner")&&(this._releaseAll(),this._set("owner",e),this._ownAll())}},{key:"_ownAll",value:function(){var e,t=(0,i.Z)(this.items);try{for(t.s();!(e=t.n()).done;){var n=e.value;this._own(n)}}catch(r){t.e(r)}finally{t.f()}}},{key:"_releaseAll",value:function(){var e,t=(0,i.Z)(this.items);try{for(t.s();!(e=t.n()).done;){var n=e.value;this._release(n)}}catch(r){t.e(r)}finally{t.f()}}},{key:"_createNewInstance",value:function(e){return this.itemType?new(u.Z.ofType(this.itemType.Type))(e):new u.Z(e)}}]),n}(u.Z);function v(e,t){return{type:e,cast:c.R,set:function(n){var i=(0,c.Z)(n,this._get(t),e);i.owner=this,this._set(t,i)}}}(0,l._)([(0,d.Cb)()],p.prototype,"owner",null),p=(0,l._)([(0,h.j)("esri.core.support.OwningCollection")],p)},37319:function(e,t,n){n.d(t,{J:function(){return d}});var i=n(15671),r=n(43144),o=n(97326),a=n(60136),s=n(29388),l=n(27366),u=n(32718),c=(n(93169),n(84936),n(10064),n(69912)),d=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e){var r;return(0,i.Z)(this,n),(r=t.call(this,e)).addHandles(r.on("before-add",(function(e){null!=e.item&&e.item.parent===r.owner&&(u.Z.getLogger((0,o.Z)(r)).warn("Analysis inside the collection must be unique. Not adding this element again."),e.preventDefault())}))),r}return(0,r.Z)(n,[{key:"_own",value:function(e){e.parent=this.owner}},{key:"_release",value:function(e){e.parent=null}}]),n}(n(68748).a);d=(0,l._)([(0,c.j)("esri.support.AnalysesCollection")],d)},78983:function(e,t,n){n.d(t,{J:function(){return h}});var i=n(15671),r=n(43144),o=n(60136),a=n(29388),s=n(27366),l=n(52639),u=(n(32718),n(25243)),c=(n(84936),n(93169),n(10064),n(42017)),d=n(69912),h=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,r.Z)(n,[{key:"_own",value:function(e){e.layer&&"remove"in e.layer&&e.layer!==this.owner&&e.layer.remove(e),e.layer=this.owner}},{key:"_release",value:function(e){e.layer===this.owner&&(e.layer=null)}}]),n}(n(68748).a);(0,s._)([(0,c.c)({Type:l.Z,ensureType:(0,u.se)(l.Z)})],h.prototype,"itemType",void 0),h=(0,s._)([(0,d.j)("esri.support.GraphicsCollection")],h)},37384:function(e,t,n){n.d(t,{$o:function(){return r},V$:function(){return a},rk:function(){return o}});var i="calcite-mode-";function r(){return getComputedStyle(document.body).getPropertyValue("--esri-calcite-mode-name").replaceAll(/\s|'|"/g,"").startsWith("dark")}function o(){return"".concat(i).concat(r()?"dark":"light")}function a(e){s(e),e.classList.add(o())}function s(e){Array.from(e.classList).forEach((function(t){t.startsWith(i)&&e.classList.remove(t)}))}},76241:function(e,t,n){n.d(t,{JF:function(){return l},WM:function(){return c},mq:function(){return d}});var i,r=n(74165),o=n(15861),a=null,s=new Map;function l(e){return u.apply(this,arguments)}function u(){return u=(0,o.Z)((0,r.Z)().mark((function e(t){var o,l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=null==a,!e.t0){e.next=6;break}return null==i&&(i=n.e(92512).then(n.bind(n,92512))),e.next=5,i;case 5:a=e.sent;case 6:return o=t.view,(l=s.get(o))||(l=new a.default({view:o}),s.set(o,l)),e.next=11,l.initializeWasm();case 11:return e.abrupt("return",l.add3DTilesLayerView(t));case 12:case"end":return e.stop()}}),e)}))),u.apply(this,arguments)}function c(e){return s.get(e)}function d(e){var t=e.view,n=s.get(t);n&&n.remove3DTilesLayerView(e)<1&&(s.delete(t),0===s.size&&(i=null,a=null))}},6003:function(e,t,n){n.d(t,{g:function(){return y}});var i=n(1413),r=n(15671),o=n(43144),a=n(60136),s=n(29388),l=n(27366),u=n(22213),c=n(94172),d=n(49861),h=(n(93169),n(32718),n(84936),n(69912)),p={widthBreakpoint:{getValue:function(e){var t=e.viewSize[0],n=e.breakpoints,i=this.values;return t<=n.xsmall?i.xsmall:t<=n.small?i.small:t<=n.medium?i.medium:t<=n.large?i.large:i.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue:function(e){var t=e.viewSize[1],n=e.breakpoints,i=this.values;return t<=n.xsmall?i.xsmall:t<=n.small?i.small:t<=n.medium?i.medium:t<=n.large?i.large:i.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue:function(e){var t=e.viewSize,n=t[0],i=t[1],r=this.values;return i>=n?r.portrait:r.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},v={xsmall:544,small:768,medium:992,large:1200};function f(e,t){return t?p[e].valueToClassName[t].split(" "):[]}var y=function(e){var t=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){var e;(0,r.Z)(this,n);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).orientation=null,e.widthBreakpoint=null,e.heightBreakpoint=null,e.breakpoints=v,e}return(0,o.Z)(n,[{key:"initialize",value:function(){var e=this;this.addHandles((0,c.watch)((function(){return[e.breakpoints,e.size]}),(function(){return e._updateClassNames()}),c.initial))}},{key:"destroy",value:function(){this.destroyed||this._removeActiveClassNames()}},{key:"breakpoints",set:function(e){if(e!==this._get("breakpoints")){if(!function(e){var t=e;return t&&t.xsmall<t.small&&t.small<t.medium&&t.medium<t.large}(e)){var t=JSON.stringify(v,null,2);console.warn("provided breakpoints are not valid, using defaults:"+t),e=v}this._set("breakpoints",(0,i.Z)({},e))}}},{key:"_updateClassNames",value:function(){if(this.container){var e,t=u.Z.acquire(),n=u.Z.acquire(),i=!1;for(e in p){var r=this[e],o=p[e].getValue({viewSize:this.size,breakpoints:this.breakpoints});r!==o&&(i=!0,this[e]=o,f(e,r).forEach((function(e){return n.push(e)})),f(e,o).forEach((function(e){return t.push(e)})))}i&&(this._applyClassNameChanges(t,n),u.Z.release(t),u.Z.release(n))}}},{key:"_applyClassNameChanges",value:function(e,t){var n=this.container;n&&(t.forEach((function(e){return n.classList.remove(e)})),e.forEach((function(e){return n.classList.add(e)})))}},{key:"_removeActiveClassNames",value:function(){var e,t=this.container;if(t)for(e in p)f(e,this[e]).forEach((function(e){return t.classList.remove(e)}))}}]),n}(e);return(0,l._)([(0,d.Cb)()],t.prototype,"breakpoints",null),(0,l._)([(0,d.Cb)()],t.prototype,"orientation",void 0),(0,l._)([(0,d.Cb)()],t.prototype,"widthBreakpoint",void 0),(0,l._)([(0,d.Cb)()],t.prototype,"heightBreakpoint",void 0),t=(0,l._)([(0,h.j)("esri.views.BreakpointsOwner")],t)}},42047:function(e,t,n){n.d(t,{f:function(){return I}});var i=n(15671),r=n(43144),o=n(97326),a=n(60136),s=n(29388),l=n(27366),u=n(50093),c=n(98928),d=n(32718),h=n(92026),p=n(94172),v=n(99346),f=n(49861),y=(n(93169),n(84936),n(69912)),m=n(74165),g=n(15861),_=n(37762),w=n(7138),b=n(80987),k=n(46634),C=(n(42877),n(88367)),Z=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){var e;return(0,i.Z)(this,n),(e=t.apply(this,arguments)).items=new b.Z,e._watchUpdatingTracking=new k.R,e._callbacks=new Map,e._projector=(0,C.E)(),e._hiddenProjector=(0,C.E)(),e}return(0,r.Z)(n,[{key:"needsRender",get:function(){return this.items.length>0}},{key:"updating",get:function(){var e,t;return null!==(e=null===(t=this._watchUpdatingTracking)||void 0===t?void 0:t.updating)&&void 0!==e&&e}},{key:"initialize",value:function(){var e=this,t=document.createElement("div");t.className="esri-overlay-surface",this._set("surface",t),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),t.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange((function(){return e.items}),(function(t){var n,i=(0,_.Z)(t.added);try{var r=function(){var t=n.value,i=function(){return t.render()};e._callbacks.set(t,i),e._projector.append(e.surface,i)};for(i.s();!(n=i.n()).done;)r()}catch(u){i.e(u)}finally{i.f()}var o,a=(0,_.Z)(t.removed);try{for(a.s();!(o=a.n()).done;){var s=o.value,l=e._projector.detach(e._callbacks.get(s));e.surface.removeChild(l.domNode),e._callbacks.delete(s)}}catch(u){a.e(u)}finally{a.f()}}))}},{key:"addItem",value:function(e){this.items.add(e)}},{key:"removeItem",value:function(e){this.items.remove(e)}},{key:"destroy",value:function(){var e=this;this.items.removeAll(),this._callbacks.forEach((function(t){return e._projector.detach(t)})),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}},{key:"render",value:function(){this._projector.renderNow()}},{key:"computeBoundingRect",value:function(e){var t,n,i=this._hiddenSurface,r=this._hiddenProjector,o=function(){return n=e.render()};r.append(i,o),r.renderNow();var a={left:0,top:0,right:0,bottom:0};if(null!==(t=n)&&void 0!==t&&t.domNode){var s=n.domNode.getBoundingClientRect();a.left=s.left,a.top=s.top,a.right=s.right,a.bottom=s.bottom}for(r.detach(o);i.firstChild;)i.removeChild(i.firstChild);return a}},{key:"overlaps",value:function(e,t){var n=this.computeBoundingRect(e),i=this.computeBoundingRect(t);return Math.max(n.left,i.left)<=Math.min(n.right,i.right)&&Math.max(n.top,i.top)<=Math.min(n.bottom,i.bottom)}},{key:"hasVisibleItems",get:function(){return this.items.some((function(e){return e.visible}))}},{key:"prepare",value:function(){var e=(0,g.Z)((0,m.Z)().mark((function e(){return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,document.fonts.load(this._fontString()).catch((function(){}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"renderCanvas",value:function(e,t){var n=!(null===t||void 0===t||!t.disableDecorations);if(this.items.some((function(e){return e.visible&&!(n&&e.isDecoration)}))){var i=e.getContext("2d");i.save(),i.font=this._fontString(),this.items.forEach((function(e){n&&e.isDecoration||(i.save(),e.renderCanvas(i),i.restore())})),i.restore()}}},{key:"_fontString",value:function(){return"10px ".concat(getComputedStyle(this.surface).fontFamily)}}]),n}(w.default);(0,l._)([(0,f.Cb)({readOnly:!0})],Z.prototype,"surface",void 0),(0,l._)([(0,f.Cb)({readOnly:!0})],Z.prototype,"items",void 0),(0,l._)([(0,f.Cb)({readOnly:!0})],Z.prototype,"needsRender",null),(0,l._)([(0,f.Cb)({readOnly:!0})],Z.prototype,"_watchUpdatingTracking",void 0),(0,l._)([(0,f.Cb)({readOnly:!0})],Z.prototype,"updating",null);var M=Z=(0,l._)([(0,y.j)("esri.views.overlay.ViewOverlay")],Z),x=[0,0];function T(e){var t,n,i=(e.ownerDocument||window.document).defaultView,r=e.getBoundingClientRect();return x[0]=r.left+(null!==(t=null===i||void 0===i?void 0:i.pageXOffset)&&void 0!==t?t:0),x[1]=r.top+(null!==(n=null===i||void 0===i?void 0:i.pageYOffset)&&void 0!==n?n:0),x}function P(e){e&&((0,u.cS)(e),e.parentNode&&e.parentNode.removeChild(e))}var S=16,E=750,I=function(e){var t=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){var e;(0,i.Z)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a)))._freqInfo={freq:S,time:E},e._overlayRenderTaskHandle=null,e.height=0,e.messagesCommon=null,e.overlay=null,e.position=null,e.resizing=!1,e.root=null,e.surface=null,e.suspended=!0,e.ui=null,e.userContent=null,e.width=0,e.widthBreakpoint=null,e.addHandles([(0,p.watch)((function(){return e.cursor}),(function(t){var n=(0,o.Z)(e).surface;n&&n.setAttribute("data-cursor",t)})),(0,p.watch)((function(){return e.navigating}),(function(t){var n=(0,o.Z)(e).surface;n&&n.setAttribute("data-navigating",t.toString())}))]),e}return(0,r.Z)(n,[{key:"initialize",value:function(){var e=this;this.addHandles([(0,p.watch)((function(){return e.ui}),(function(t,n){return e._handleUIChange(t,n)}),p.initial),this.on("focus",(function(){return e.notifyChange("focused")})),this.on("blur",(function(){return e.notifyChange("focused")}))])}},{key:"destroy",value:function(){this.destroyed||(this.ui=(0,h.SC)(this.ui),this.container=null)}},{key:"container",get:function(){var e;return null!==(e=this._get("container"))&&void 0!==e?e:null},set:function(e){var t=this,n=this._get("container"),i=(0,u.L7)(e);if(i||"string"!=typeof e||d.Z.getLogger(this).error("#container","element with id '".concat(e,"' not found")),n!==i){if(this._stopMeasuring(),n&&(n.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay&&(this.overlay.destroy(),this._set("overlay",null)),this.root&&(P(this.root),this._set("root",null)),this.userContent&&((0,u.YD)(this.userContent,n),P(this.userContent),this._set("userContent",null))),!i)return this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),void this._set("container",null);i.classList.add("esri-view");var r=document.createElement("div");r.className="esri-view-user-storage",(0,u.YD)(i,r),i.appendChild(r),this._set("userContent",r);var o=document.createElement("div");o.className="esri-view-root",i.insertBefore(o,i.firstChild),this._set("root",o);var a=document.createElement("div");a.className="esri-view-surface",a.setAttribute("role","application"),a.tabIndex=0,o.appendChild(a),this._set("surface",a);var s=new M;o.appendChild(s.surface),this._set("overlay",s),this.addHandles((0,p.watch)((function(){return s.needsRender}),(function(e){e&&!t._overlayRenderTaskHandle?t._overlayRenderTaskHandle=(0,v.A)({render:function(){var e;return null===(e=t.overlay)||void 0===e?void 0:e.render()}}):t._overlayRenderTaskHandle=(0,h.hw)(t._overlayRenderTaskHandle)}))),this.forceDOMReadyCycle(),this._set("container",i),this._startMeasuring()}}},{key:"focused",get:function(){var e=document.activeElement===this.surface;return document.hasFocus()&&e}},{key:"size",get:function(){return[this.width,this.height]}},{key:"blur",value:function(){var e;null===(e=this.surface)||void 0===e||e.blur()}},{key:"focus",value:function(){var e;null===(e=this.surface)||void 0===e||e.focus()}},{key:"pageToContainer",value:function(e,t,n){var i=this.position;return e-=i?i[0]:0,t-=i?i[1]:0,n?(n[0]=e,n[1]=t):n=[e,t],n}},{key:"containerToPage",value:function(e,t,n){var i=this.position;return e+=i?i[0]:0,t+=i?i[1]:0,n?(n[0]=e,n[1]=t):n=[e,t],n}},{key:"_handleUIChange",value:function(e,t){var n=this;this.removeHandles("ui"),t&&t!==e&&t.destroy(),e&&(e.view=this,this.addHandles((0,p.watch)((function(){return n.root}),(function(t){e.container=t?function(e){var t=document.createElement("div");return e.appendChild(t),t}(t):null}),p.initial),"ui")),this._set("ui",e)}},{key:"_stopMeasuring",value:function(){this.removeHandles("measuring"),this._get("resizing")&&this._set("resizing",!1)}},{key:"_startMeasuring",value:function(){var e=this,t=this._freqInfo;t.freq=S,t.time=E,this.addHandles([(0,c.on)(window,"resize",(function(){t.freq=S,t.time=E})),(0,v.A)({prepare:function(t){var n=e._measure(),i=e._freqInfo;if(i.time+=t.deltaTime,n&&(i.freq=S,e._get("resizing")||e._set("resizing",!0)),!(i.time<i.freq)){i.time=0;var r=e._position();i.freq=r||n?S:Math.min(E,2*i.freq),!n&&i.freq>=512&&e._get("resizing")&&e._set("resizing",!1)}}})],"measuring"),this._measure(),this._position()}},{key:"_measure",value:function(){var e=this.container,t=e?e.clientWidth:0,n=e?e.clientHeight:0;if(0===t||0===n)return this.suspended||this._set("suspended",!0),!1;var i=this.width,r=this.height;return t===i&&n===r?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",t),this._set("height",n),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:i,oldHeight:r,width:t,height:n}),!0)}},{key:"_position",value:function(){var e=this.container,t=this.position,n=e&&T(e);return!!n&&(!t||n[0]!==t[0]||n[1]!==t[1])&&(this._set("position",[n[0],n[1]]),!0)}},{key:"forceDOMReadyCycle",value:function(){}}]),n}(e);return(0,l._)([(0,f.Cb)()],t.prototype,"container",null),(0,l._)([(0,f.Cb)({readOnly:!0})],t.prototype,"focused",null),(0,l._)([(0,f.Cb)({readOnly:!0})],t.prototype,"height",void 0),(0,l._)([(0,f.Cb)()],t.prototype,"messagesCommon",void 0),(0,l._)([(0,f.Cb)({type:M})],t.prototype,"overlay",void 0),(0,l._)([(0,f.Cb)({readOnly:!0})],t.prototype,"position",void 0),(0,l._)([(0,f.Cb)({readOnly:!0})],t.prototype,"resizing",void 0),(0,l._)([(0,f.Cb)({readOnly:!0})],t.prototype,"root",void 0),(0,l._)([(0,f.Cb)({value:null,readOnly:!0})],t.prototype,"size",null),(0,l._)([(0,f.Cb)({readOnly:!0})],t.prototype,"surface",void 0),(0,l._)([(0,f.Cb)({readOnly:!0})],t.prototype,"suspended",void 0),(0,l._)([(0,f.Cb)()],t.prototype,"ui",void 0),(0,l._)([(0,f.Cb)({readOnly:!0})],t.prototype,"userContent",void 0),(0,l._)([(0,f.Cb)({readOnly:!0})],t.prototype,"width",void 0),(0,l._)([(0,f.Cb)()],t.prototype,"widthBreakpoint",void 0),t=(0,l._)([(0,y.j)("esri.views.DOMContainer")],t)}},28435:function(e,t,n){n.d(t,{u:function(){return Z}});var i=n(37762),r=n(74165),o=n(15861),a=n(29439),s=n(15671),l=n(43144),u=n(60136),c=n(29388),d=n(27366),h=n(14921),p=n(44927),v=n(10064),f=n(93169),y=n(32718),m=n(66978),g=n(94172),_=n(49861),w=(n(84936),n(69912)),b=n(1614);function k(e){return null!=e&&"open"in e&&"declaredClass"in e}function C(e){return null!=e&&"declaredClass"in e&&"dockOptions"in e}var Z=function(e){var t=function(e){(0,u.Z)(d,e);var t=(0,c.Z)(d);function d(){var e;return(0,s.Z)(this,d),(e=t.apply(this,arguments))._popupSetupTask=null,e.popup={},e.popupEnabled=!0,e}return(0,l.Z)(d,[{key:"initialize",value:function(){var e=this;this.addHandles([(0,g.watch)((function(){return[e.ui,e.popup]}),(function(t,n){var i=(0,a.Z)(t,2),r=i[0],o=i[1],s="popup";if(n){var l=(0,a.Z)(n,2),u=l[0],c=l[1];u&&k(c)&&(c.view=null,C(c)&&u.remove(c,s))}r&&k(o)&&(o.view=e,C(o)&&r.add(o,{key:s,position:"manual",internal:!0}))}),g.initial),this.on("click",(function(t){e.popup&&e.popupEnabled&&("mouse"!==t.pointerType||0===t.button)&&(k(e.popup)?e.popup.viewModel.handleViewClick(t):t.async((0,o.Z)((0,r.Z)().mark((function n(){return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.setupPopup();case 2:k(e.popup)&&!e.destroyed&&e.ready&&e.popupEnabled&&e.popup.viewModel.handleViewClick(t);case 3:case"end":return n.stop()}}),n)})))))}),b.f.WIDGET)]),(0,g.whenOnce)((function(){return e.ready&&e.popupEnabled&&!e.updating})).then((function(){Promise.all([n.e(27607),n.e(74579),n.e(45276),n.e(4624),n.e(99388),n.e(21993),n.e(67667),n.e(46639),n.e(573),n.e(80423)]).then(n.bind(n,80423))}))}},{key:"destroy",value:function(){this.destroyed||this.closePopup()}},{key:"openPopup",value:function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!k(this.popup)){e.next=2;break}return e.abrupt("return",this.popup.open(t));case 2:return e.prev=2,e.next=5,this.setupPopup();case 5:if(this.popup){e.next=7;break}return e.abrupt("return",void y.Z.getLogger(this).error(new v.Z("view:null-popup","Popup is null and can't be opened")));case 7:this.popup.open(t),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(2);case 12:case"end":return e.stop()}}),e,this,[[2,10]])})));return function(t){return e.apply(this,arguments)}}()},{key:"closePopup",value:function(){var e;null!==(e=this._popupSetupTask)&&void 0!==e&&e.abort(),k(this.popup)&&this.popup.close()}},{key:"fetchPopupFeatures",value:function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t,n){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.when();case 2:return e.t0=this,e.next=5,this._getPopupHits(t,n);case 5:return e.t1=e.sent,e.t2=n,e.abrupt("return",e.t0._popupHitsToFeatures.call(e.t0,e.t1,e.t2));case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"setupPopup",value:function(){var e=(0,o.Z)((0,r.Z)().mark((function e(){var t,i=this;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(t=this._popupSetupTask)&&void 0!==t&&t.abort(),!this.popup||k(this.popup)){e.next=2;break}return e.abrupt("return",(this._popupSetupTask=(0,h.vr)(function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t){var o,a,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n.e(27607),n.e(74579),n.e(45276),n.e(4624),n.e(99388),n.e(21993),n.e(67667),n.e(46639),n.e(573),n.e(80423)]).then(n.bind(n,80423));case 2:if(o=e.sent,a=o.default,(0,m.k_)(t),i.popup&&!k(i.popup)){e.next=6;break}return e.abrupt("return");case 6:delete(s=i.popup).open,delete s.close,i.popup=new a(s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this._popupSetupTask.promise));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_popupHitsToFeatures",value:function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t,n){var o,a,s,l,u,c,d,h,p,v,y,g,_;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.location,s=t.hits,l=[],u=[],c=!1,d=(0,m.CH)(n,null!==(o=(0,f.Z)("popup-view-fetch-timeout"))&&void 0!==o?o:x),h=function(e){var t=new M(e);return u.push(t),l.push(t.promise),t},p=function(e){var t=u.at(-1);return t&&t.layerView===e&&!c?t:h(e)},v=(0,i.Z)(s);try{for(v.s();!(y=v.n()).done;)"graphic"in(g=y.value)?(p(g.layerView).graphics.push(g.graphic),c=!1):(l.push(g.layerView.fetchPopupFeaturesAtLocation(g.mapPoint,d)),c=!0)}catch(r){v.e(r)}finally{v.f()}return u.map((function(e){return e.resolve(d)})),_=(0,m.OT)(l).then((function(e){return e.filter((function(e){return!!e})).flat()})),e.abrupt("return",{pendingFeatures:l,allGraphicsPromise:_,location:a});case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getPopupHits",value:function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t,n){var o,a,s,l,u,c,d,h;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.popupHitTest(t);case 2:o=e.sent,a=o.hits,s=o.location,(0,m.k_)(n),l=[],u=(0,i.Z)(a);try{for(u.s();!(c=u.n()).done;)"graphic"in(d=c.value)?this._isValidPopupGraphic(d.graphic,n)&&(h=this._isValidPopupGraphicsLayerView(d.layerView)?d.layerView:void 0,l.push({graphic:d.graphic,layerView:h})):this._isValidPopupLocationLayerView(d.layerView)&&l.push({mapPoint:d.mapPoint,layerView:d.layerView})}catch(r){u.e(r)}finally{u.f()}return e.abrupt("return",{hits:l,location:s});case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_isValidPopupGraphic",value:function(e,t){return e&&!!e.getEffectivePopupTemplate(null===t||void 0===t?void 0:t.defaultPopupTemplateEnabled)}},{key:"_isValidPopupGraphicsLayerView",value:function(e){return!e||(!("layer"in e)||!e.suspended)&&"fetchPopupFeaturesFromGraphics"in e}},{key:"_isValidPopupLocationLayerView",value:function(e){return(!("layer"in e)||!e.suspended)&&"fetchPopupFeaturesAtLocation"in e}}]),d}(e);return(0,d._)([(0,_.Cb)({cast:function(e){var t=this;return!e||k(e)||"object"==typeof e&&(e.open=function(e){return(0,p.x9)(y.Z.getLogger(t),"view.popup is no longer created by default. view.popup.open() will stop working when the popup isn't created",{replacement:"Use view.openPopup() instead.",version:"4.27"}),t.openPopup(e)},e.close=function(){return(0,p.x9)(y.Z.getLogger(t),"view.popup is no longer created by default. view.popup.close() will stop working when the popup isn't created",{replacement:"Use view.closePopup() instead.",version:"4.27"}),t.closePopup()}),e}})],t.prototype,"popup",void 0),(0,d._)([(0,_.Cb)()],t.prototype,"popupEnabled",void 0),t=(0,d._)([(0,w.j)("esri.views.PopupView")],t),t},M=function(){function e(t){(0,s.Z)(this,e),this.layerView=t,this._resolver=(0,m.hh)(),this.graphics=[]}return(0,l.Z)(e,[{key:"promise",get:function(){return this._resolver.promise}},{key:"resolve",value:function(e){var t,n=this.layerView,i=this.graphics,r=this._resolver;return n?(n.fetchPopupFeaturesFromGraphics(i,e).catch((function(e){return t=e,null})).then((function(e){e?r.resolve(e):r.reject(t)})),r.promise):(r.resolve(i),r.promise)}}]),e}(),x=5e3},91175:function(e,t,n){n.d(t,{Z:function(){return st}});var i=n(74165),r=n(15861),o=n(1413),a=n(15671),s=n(43144),l=n(97326),u=n(88301),c=n(61120),d=n(60136),h=n(29388),p=n(27366),v=n(60762),f=n(62044),y=n(7138),m=n(14921),g=n(80987),_=n(77178),w=n(10064),b=n(91505),k=n(100),C=n(42537),Z=(n(93169),n(54472)),M=n(32718),x=n(92026),T=n(67426),P=n(66978),S=n(94172),E=n(49861),I=(n(84936),n(69912)),D=n(68748),L=n(46634),V=n(53866),A=n(90724),R=n(78952),F=n(92975),z=n(37319),O=n(78983),H=n(6701),N=n(37762),W=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e){var i;return(0,a.Z)(this,n),(i=t.call(this,e)).view=null,i.baseLayerViews=new g.Z,i.referenceLayerViews=new g.Z,i._loadingHandle=(0,S.watch)((function(){var e,t;return null===(e=i.view)||void 0===e||null===(t=e.map)||void 0===t?void 0:t.basemap}),(function(e){e&&e.load().catch((function(){}))}),S.initial),i}return(0,s.Z)(n,[{key:"destroy",value:function(){this._set("view",null),this._loadingHandle&&(this._loadingHandle.remove(),this._loadingHandle=null);var e,t=(0,N.Z)(this.baseLayerViews);try{for(t.s();!(e=t.n()).done;){e.value.destroy()}}catch(r){t.e(r)}finally{t.f()}this.baseLayerViews.length=0;var n,i=(0,N.Z)(this.referenceLayerViews);try{for(i.s();!(n=i.n()).done;){n.value.destroy()}}catch(r){i.e(r)}finally{i.f()}this.referenceLayerViews.length=0}},{key:"suspended",get:function(){return!this.view||this.view.suspended}},{key:"updating",get:function(){var e,t,n;if(null!==(e=this.view)&&void 0!==e&&e.suspended)return!1;var i=null===(t=this.view)||void 0===t||null===(n=t.map)||void 0===n?void 0:n.basemap;return!!i&&!!i.loaded&&(this.baseLayerViews.some((function(e){return e.updating}))||this.referenceLayerViews.some((function(e){return e.updating})))}}]),n}(y.default);(0,p._)([(0,E.Cb)({constructOnly:!0})],W.prototype,"view",void 0),(0,p._)([(0,E.Cb)({readOnly:!0})],W.prototype,"baseLayerViews",void 0),(0,p._)([(0,E.Cb)({readOnly:!0})],W.prototype,"referenceLayerViews",void 0),(0,p._)([(0,E.Cb)({readOnly:!0})],W.prototype,"suspended",null),(0,p._)([(0,E.Cb)({type:Boolean,readOnly:!0})],W.prototype,"updating",null),W=(0,p._)([(0,I.j)("esri.views.BasemapView")],W);var j=n(29439),q=n(77427),U=n(99346),B=n(693),G=n(30219);function K(e){return null!=e&&"object"==typeof e&&"layerViews"in e}var Y=function(){function e(t,n,i){var r=this;(0,a.Z)(this,e),this.layer=t,this.view=n,this.layerViewImporter=i,this._controller=new AbortController,this._deferred=(0,P.hh)(),this._started=!1,this.done=!1,this.promise=this._deferred.promise,(0,P.fu)(this._controller.signal,(function(){var e=new w.Z("cancelled:layerview-create","layerview creation cancelled",{layer:t});r._deferred.reject(e)}))}return(0,s.Z)(e,[{key:"tryRecycle",value:function(e){var t=this;if(!this.done||!this.layerView||!function(e){return"tryRecycleWith"in e}(this.layerView))return null;for(var n=this.layer.type,i=this._controller.signal,r=function(r){var o=e[r];if(o.type!==n)return"continue";var a=t.layerView.tryRecycleWith(o,{signal:i});if(a){e.splice(r,1),t.layer=o;var s=t.layerView,l=s.view;return{v:(t.promise=Promise.race([a.then((function(){return(0,P.k_)(t._controller.signal),o.emit("layerview-destroy",{view:l,layerView:s}),l.emit("layerview-destroy",{view:l,layerView:s}),o.emit("layerview-create",{view:l,layerView:s}),l.emit("layerview-create",{view:l,layerView:s}),s})),new Promise((function(e,n){return(0,P.fu)(t._controller.signal,(function(){return n((0,P.zE)())}))}))]),t.promise)}}},o=0;o<e.length;o++){var a=r(o);if("continue"!==a&&"object"===typeof a)return a.v}return null}},{key:"destroy",value:function(){this._controller.abort();var e=this.layerView;if(e){var t=this.layer,n=this.view;t.emit("layerview-destroy",{view:n,layerView:e}),n.emit("layerview-destroy",{layer:t,layerView:e})}this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null,this._map=null}},{key:"start",value:function(){var e=(0,r.Z)((0,i.Z)().mark((function e(){var t,n,r,o,a,s,l,u,c,d=this;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._started){e.next=2;break}return e.abrupt("return");case 2:return this._started=!0,t=this._controller.signal,n=this.layer,r=this.view,this._map=r.map,e.prev=5,e.next=8,n.load({signal:t});case 8:if(e.t0=n.prefetchResources,!e.t0){e.next=12;break}return e.next=12,n.prefetchResources({signal:t});case 12:if(!$(n)){e.next=18;break}return e.next=15,n.createLayerView(r,{signal:t});case 15:s=e.sent,e.next=24;break;case 18:if(this.layerViewImporter.hasLayerViewModule(n)){e.next=20;break}throw new w.Z("layer:view-not-supported","No layerview implementation was found");case 20:return e.next=22,this.layerViewImporter.importLayerView(n);case 22:u=e.sent,(0,P.k_)(t),s="default"in u?new u.default({layer:n,view:r}):new u({layer:n,view:r});case 24:return c=function(){l=(0,x.hw)(l),s.destroyed||s.destroy(),s.layer=null,s.parent=null,s.view=null,d.done=!0},l=(0,P.fu)(t,c),(0,P.k_)(t),e.prev=26,e.next=29,s.when();case 29:e.next=34;break;case 31:throw e.prev=31,e.t1=e.catch(26),c(),e.t1;case 34:if(null===(o=this._map)||void 0===o||null===(a=o.allLayers)||void 0===a?void 0:a.includes(n)){e.next=37;break}return e.abrupt("return",(c(),void this._deferred.reject(new w.Z("view:no-layerview-for-layer","The layer has been removed from the map",{layer:n}))));case 37:this.layerView=s,n.emit("layerview-create",{view:r,layerView:s}),r.emit("layerview-create",{layer:n,layerView:s}),this.done=!0,this._deferred.resolve(s),e.next=43;break;case 40:e.prev=40,e.t2=e.catch(5),n.emit("layerview-create-error",{view:r,error:e.t2}),r.emit("layerview-create-error",{layer:n,error:e.t2}),this.done=!0,this._deferred.reject(new w.Z("layerview:create-error","layerview creation failed",{layer:n,error:e.t2}));case 43:case"end":return e.stop()}}),e,this,[[5,40],[26,31]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),J=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e){var i;return(0,a.Z)(this,n),(i=t.call(this,e))._layerLayerViewInfoMap=new Map,i._recyclingInfoMap=new Map,i._watchUpdatingTracking=new L.R,i.supportsGround=!0,i._preloadLayerViewModules=function(){var e,t=null===(e=i.view.map)||void 0===e?void 0:e.allLayers;if(t){var n,r=(0,N.Z)(t);try{for(r.s();!(n=r.n()).done;){var o=n.value;i.layerViewImporter.hasLayerViewModule(o)&&i.layerViewImporter.importLayerView(o)}}catch(a){r.e(a)}finally{r.f()}}},i._reschedule=function(){return i.destroyed?Promise.reject():(null==i._workPromise&&(i._workPromise=(0,P.hh)(),i._workPromise.promise.catch((function(){}))),i.removeHandles("reschedule"),i.addHandles((0,U.Os)(i._doWork),"reschedule"),i._workPromise.promise)},i._doWork=function(){var e,t,n;if(!i.destroyed){var r=i.view.map;if(i._map!==r&&(i.clear(),i._map=r),null!=i._workPromise){i.removeHandles("reschedule"),i.removeHandles("collection-change");var o,a=new Set,s=[],u=i.view.ready,c=function e(t){if(null!=t){var n,r=(0,N.Z)(t);try{for(r.s();!(n=r.n()).done;){var o=n.value;if(o){a.add(o);var l=i._layerLayerViewInfoMap.get(o);l&&u?l.start():l||i._recyclingInfoMap.has(o)||s.push(o),"layers"in o&&o.layers&&e(o.layers)}}}catch(c){r.e(c)}finally{r.f()}}},d=(0,N.Z)(i._rootCollectionNames);try{for(d.s();!(o=d.n()).done;){var h=o.value;c((0,B.U2)((0,l.Z)(i),h))}}catch(M){d.e(M)}finally{d.f()}var p,v=(0,N.Z)(i._layerLayerViewInfoMap);try{var f=function(){var e=(0,j.Z)(p.value,2),t=e[0],n=e[1];if(!a.has(t)){i._layerLayerViewInfoMap.delete(n.layer);var r=n.tryRecycle(s);r?(i.notifyChange("updating"),i._recyclingInfoMap.set(n.layer,n),r.then((function(){i.notifyChange("updating"),i._recyclingInfoMap.delete(n.layer),i._layerLayerViewInfoMap.set(n.layer,n),i._reschedule()})).catch((function(){i.notifyChange("updating"),i._recyclingInfoMap.delete(n.layer),n.destroy(),i._reschedule()}))):n.destroy()}};for(v.s();!(p=v.n()).done;)f()}catch(M){v.e(M)}finally{v.f()}var y,m=(0,N.Z)(i._recyclingInfoMap);try{for(m.s();!(y=m.n()).done;){var g=(0,j.Z)(y.value,2),_=g[0],w=g[1];a.has(_)||(i.notifyChange("updating"),i._recyclingInfoMap.delete(w.layer),w.destroy())}}catch(M){m.e(M)}finally{m.f()}for(var b=0,k=s;b<k.length;b++){var C=k[b];i._createLayerView(C)}i._refreshCollections();var Z=[null===r||void 0===r||null===(e=r.ground)||void 0===e?void 0:e.layers,null===r||void 0===r||null===(t=r.basemap)||void 0===t?void 0:t.baseLayers,null===r||void 0===r||null===(n=r.basemap)||void 0===n?void 0:n.referenceLayers,null===r||void 0===r?void 0:r.layers].filter((function(e){return!!e}));a.forEach((function(e){return"layers"in e&&Z.push(e.layers)})),i.addHandles(Z.map((function(e){return i._watchUpdatingTracking.addOnCollectionChange((function(){return e}),i._reschedule)})),"collection-change"),i._workPromise.resolve(),i._workPromise=null}else i.notifyChange("updating")}},i}return(0,s.Z)(n,[{key:"initialize",value:function(){var e=this;this.addHandles([(0,S.on)((function(){var t,n;return null===(t=e.view)||void 0===t||null===(n=t.map)||void 0===n?void 0:n.allLayers}),"change",this._preloadLayerViewModules,{onListenerAdd:this._preloadLayerViewModules}),(0,S.watch)((function(){var t=e.view,n=null===t||void 0===t?void 0:t.map;return[null===n||void 0===n?void 0:n.basemap,null===n||void 0===n?void 0:n.ground,null===n||void 0===n?void 0:n.layers,null===t||void 0===t?void 0:t.ready]}),(function(){return e._reschedule()}),S.syncAndInitial)]),this._preloadLayerViewModules(),this._reschedule()}},{key:"destroy",value:function(){this.clear(),(0,G.O)(this._recyclingInfoMap),(0,G.O)(this._layerLayerViewInfoMap),this._watchUpdatingTracking.destroy(),this._map=null,null!=this._workPromise&&(this._workPromise.reject((0,P.zE)()),this._workPromise=null)}},{key:"_layersToLayerViews",get:function(){var e=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.layers","view.layerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"]];return this.supportsGround&&e.push(["view.map.ground.layers","view.groundView.layerViews"]),new Map(e)}},{key:"_rootCollectionNames",get:function(){return Array.from(this._layersToLayerViews.keys())}},{key:"updating",get:function(){return null!=this._workPromise||this._watchUpdatingTracking.updating||(0,q.oE)(this._layerLayerViewInfoMap,(function(e){return!e.done}))||this._recyclingInfoMap.size>0}},{key:"updatingRemaining",get:function(){var e,t=0,n=(0,N.Z)(this._layerLayerViewInfoMap.values());try{for(n.s();!(e=n.n()).done;){e.value.done||++t}}catch(i){n.e(i)}finally{n.f()}return t}},{key:"clear",value:function(){this.destroyed||((0,G.O)(this._layerLayerViewInfoMap),this._refreshCollections())}},{key:"whenLayerView",value:function(){var e=(0,r.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._reschedule();case 2:if(this._layerLayerViewInfoMap.has(t)){e.next=6;break}if(!this._recyclingInfoMap.has(t)){e.next=5;break}return e.abrupt("return",this._recyclingInfoMap.get(t).promise);case 5:throw new w.Z("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:t});case 6:return e.abrupt("return",this._layerLayerViewInfoMap.get(t).promise);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"isCreatingLayerViewsForLayer",value:function(e,t){var n,i=this;this.commitProperty("updatingRemaining");var r=this._layerLayerViewInfoMap.get(e);if(null===r||void 0===r||!r.done)return!0;var o=r.layerView;return!(!o||!t||o.parent===t)||!!(r.done&&o&&"layers"in e&&null!==(n=e.layers)&&void 0!==n&&n.length)&&e.layers.some((function(e){return i.isCreatingLayerViewsForLayer(e,o)}))}},{key:"_refreshCollections",value:function(){var e,t=(0,N.Z)(this._layersToLayerViews);try{for(t.s();!(e=t.n()).done;){var n=(0,j.Z)(e.value,2),i=n[0],r=n[1];this._populateLayerViewsOwners((0,B.U2)(this,i),(0,B.U2)(this,r),this.view)}}catch(o){t.e(o)}finally{t.f()}this.notifyChange("updating"),this.notifyChange("updatingRemaining")}},{key:"_populateLayerViewsOwners",value:function(e,t,n){if(e&&t){var i,r=0,o=(0,N.Z)(e);try{for(o.s();!(i=o.n()).done;){var a=i.value,s=this._layerLayerViewInfoMap.get(a);if(null!==s&&void 0!==s&&s.layerView){var l=s.layerView;l.layer=a,l.parent=n,t.at(r)!==l&&t.splice(r,0,l),"layers"in a&&K(l)&&this._populateLayerViewsOwners(a.layers,l.layerViews,l),r+=1}}}catch(u){o.e(u)}finally{o.f()}r<t.length&&t.splice(r,t.length)}else t&&t.removeAll()}},{key:"_createLayerView",value:function(e){var t=this;e.load().catch((function(){})),this.layerViewImporter.hasLayerViewModule(e)&&this.layerViewImporter.importLayerView(e);var n=new Y(e,this.view,this.layerViewImporter);n.promise.then((function(){return t._refreshCollections()}),(function(n){var i,r;n&&((0,P.D_)(n)||"cancelled:layerview-create"===n.name)||M.Z.getLogger(t).error("Failed to create layerview for layer title:'".concat(null!==(i=e.title)&&void 0!==i?i:"no title","', id:'").concat(null!==(r=e.id)&&void 0!==r?r:"no id","' of type '").concat(e.type,"'."),{layer:e,error:n}),t._refreshCollections()})),this._layerLayerViewInfoMap.set(e,n),this.view.ready&&n.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining")}}]),n}(y.default);(0,p._)([(0,E.Cb)()],J.prototype,"_workPromise",void 0),(0,p._)([(0,E.Cb)({readOnly:!0})],J.prototype,"_watchUpdatingTracking",void 0),(0,p._)([(0,E.Cb)({readOnly:!0})],J.prototype,"_layersToLayerViews",null),(0,p._)([(0,E.Cb)({readOnly:!0})],J.prototype,"_rootCollectionNames",null),(0,p._)([(0,E.Cb)()],J.prototype,"layerViewImporter",void 0),(0,p._)([(0,E.Cb)()],J.prototype,"supportsGround",void 0),(0,p._)([(0,E.Cb)({readOnly:!0})],J.prototype,"updating",null),(0,p._)([(0,E.Cb)({readOnly:!0})],J.prototype,"updatingRemaining",null),(0,p._)([(0,E.Cb)({constructOnly:!0})],J.prototype,"view",void 0);var X=J=(0,p._)([(0,I.j)("esri.views.LayerViewManager")],J);function $(e){return"createLayerView"in e&&null!=e.createLayerView}var Q=n(17842),ee=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e){var i;return(0,a.Z)(this,n),(i=t.call(this,e)).factor=1.5,i.offset=(0,Q.vW)(0,0),i.position=null,i.size=120,i.maskUrl=null,i.maskEnabled=!0,i.overlayUrl=null,i.overlayEnabled=!0,i.visible=!0,i}return(0,s.Z)(n,[{key:"version",get:function(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}}]),n}(y.default);(0,p._)([(0,E.Cb)({type:Number})],ee.prototype,"factor",void 0),(0,p._)([(0,E.Cb)({nonNullable:!0})],ee.prototype,"offset",void 0),(0,p._)([(0,E.Cb)()],ee.prototype,"position",void 0),(0,p._)([(0,E.Cb)({type:Number,range:{min:0}})],ee.prototype,"size",void 0),(0,p._)([(0,E.Cb)()],ee.prototype,"maskUrl",void 0),(0,p._)([(0,E.Cb)()],ee.prototype,"maskEnabled",void 0),(0,p._)([(0,E.Cb)()],ee.prototype,"overlayUrl",void 0),(0,p._)([(0,E.Cb)()],ee.prototype,"overlayEnabled",void 0),(0,p._)([(0,E.Cb)({readOnly:!0})],ee.prototype,"version",null),(0,p._)([(0,E.Cb)({type:Boolean})],ee.prototype,"visible",void 0);var te=ee=(0,p._)([(0,I.j)("esri.views.Magnifier")],ee),ne=n(93433),ie=n(63780),re=n(60354),oe=n(18442),ae=n(92377),se=n(37933),le=n(21149),ue=n(93027),ce=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e){var i;return(0,a.Z)(this,n),(i=t.call(this,e))._selectionMap=new oe.Z,i._sources=new g.Z,i._trashCan=[],i._layerEditHandles=new g.Z,i._vizTaskId=0,i.showHighlight=!0,i}return(0,s.Z)(n,[{key:"initialize",value:function(){var e=this;this.addHandles([(0,S.watch)((function(){return[e.view,e.showHighlight]}),(function(){return e._refreshVisualization()})),(0,S.on)((function(){return e.sources}),"change",(function(t){var n,i=e._selectionMap,r=(0,N.Z)(t.removed);try{for(r.s();!(n=r.n()).done;){var o=n.value;i.delete(o)}}catch(a){r.e(a)}finally{r.f()}e._refreshListeners(),e._refreshVisualization()}),{onListenerAdd:function(){return e._refreshListeners()}})]);var t=new g.Z;this.view.when().then((function(){e.view.map&&(e.view.map.allLayers.flatten((function(e){return"sublayers"in e&&e.sublayers?e.sublayers:null})).forEach((function(e){((0,ue.Y)(e)&&!(0,se.e9)(e)||(0,se.Hd)(e))&&t.add(e)})),e.sources=t)}))}},{key:"destroy",value:function(){this._layerEditHandles.drain(x.hw)}},{key:"selections",get:function(){return Array.from(this._selectionMap.entries()).map((function(e){var t=(0,j.Z)(e,2),n=t[0],i=t[1];return{layer:n,selection:(0,ne.Z)(i.selection)}}))}},{key:"count",get:function(){var e,t=0,n=(0,N.Z)(this._selectionMap.values());try{for(n.s();!(e=n.n()).done;){t+=e.value.selection.length}}catch(i){n.e(i)}finally{n.f()}return t}},{key:"hasSelection",get:function(){return this.count>0}},{key:"sources",get:function(){return this._sources},set:function(e){(0,re.Z)(e,this._sources)}},{key:"getSelectedFeatures",value:function(){var e=(0,r.Z)((0,i.Z)().mark((function e(t){var n,o,a,s,l,u=arguments;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]?u[1]:{},o=u.length>2&&void 0!==u[2]?u[2]:"layerView",a=this.view,s=this.selections,l=(void 0!==t?s.filter((function(e){return t.includes(e.layer)})):s).filter((function(e){return e.selection.length>0})).map(function(){var e=(0,r.Z)((0,i.Z)().mark((function e(t){var r,s,l,u;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.layer,s=t.selection,null!=(l=(0,se.Hd)(r)?r.parent:r)&&pe(l)){e.next=3;break}return e.abrupt("return",null);case 3:if("layer"!==o){e.next=5;break}return e.abrupt("return",fe(l,s,n));case 5:if(!de(l)){e.next=7;break}return e.abrupt("return",null);case 7:return e.next=9,a.whenLayerView(l).catch((function(){return null}));case 9:return u=e.sent,e.abrupt("return",u?fe(u,s,n):null);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=5,Promise.all(l);case 5:return e.abrupt("return",e.sent.filter((function(e){return null!=e})));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateSelection",value:function(e){var t,n=new Map,i=(0,N.Z)(this._selectionMap);try{for(i.s();!(t=i.n()).done;){var r=(0,j.Z)(t.value,2),a=r[0],s=r[1];n.set(a,(0,ne.Z)(s.selection))}}catch(D){i.e(D)}finally{i.f()}var l,u=!1,c=e.current.concat(e.added),d=(0,N.Z)(c);try{for(d.s();!(l=d.n()).done;){var h=l.value,p=h.sourceLayer,v=h.getObjectId();if(this.sources.includes(p)&&((0,ue.Y)(p)||(0,se.Hd)(p))&&null!==v){var f=(0,q.s1)(n,p,(function(){return[]}));f.includes(v)||(f.push(v),u=!0)}}}catch(D){d.e(D)}finally{d.f()}var y,m=(0,N.Z)(e.removed);try{for(m.s();!(y=m.n()).done;){var g=y.value,_=g.sourceLayer,w=g.getObjectId();if(this.sources.includes(_)&&((0,ue.Y)(_)||(0,se.Hd)(_))&&null!==w){var b=n.get(_),k=null===b||void 0===b?void 0:b.indexOf(w);void 0!==k&&k>=0&&(null!==b&&void 0!==b&&b.splice(k,1),u=!0)}}}catch(D){m.e(D)}finally{m.f()}if(u){var C,Z=this._selectionMap,M=this._trashCan,x=[],T=(0,N.Z)(n);try{for(T.s();!(C=T.n()).done;){var P=(0,j.Z)(C.value,2),S=P[0],E=P[1],I=Z.get(S);void 0!==I&&M.push(I),Z.set(S,{selection:E}),x.push((0,o.Z)({layer:S,selection:E},(0,ie.e5)(void 0!==I?I.selection:[],E)))}}catch(D){T.e(D)}finally{T.f()}this._onSelectionChange(x)}}},{key:"setSelection",value:function(e,t){this._setSelection(e,t)}},{key:"getSelection",value:function(e){var t=this._selectionMap.get(e);return null===t||void 0===t?void 0:t.selection}},{key:"appendToSelection",value:function(e,t){var n,i=this._selectionMap.get(e),r=void 0!==i?(0,ne.Z)(i.selection):[],o=(0,N.Z)(t);try{for(o.s();!(n=o.n()).done;){var a=n.value;r.includes(a)||r.push(a)}}catch(s){o.e(s)}finally{o.f()}this._setSelection(e,r)}},{key:"removeFromSelection",value:function(e,t){var n=this._selectionMap.get(e);if(n){var i,r=[],o=(0,N.Z)(n.selection);try{for(o.s();!(i=o.n()).done;){var a=i.value;t.includes(a)||r.push(a)}}catch(s){o.e(s)}finally{o.f()}this._setSelection(e,r)}}},{key:"toggleInSelection",value:function(e,t){var n=this._selectionMap.get(e);if(n&&0!==n.selection.length){var i=new Set(n.selection),r=new Set(t),o=(0,ae.Sp)(i,r);this._setSelection(e,Array.from(o))}else this._setSelection(e,t)}},{key:"clear",value:function(){var e,t=this._selectionMap.values();(e=this._trashCan).push.apply(e,(0,ne.Z)(t));var n,i=[],r=(0,N.Z)(this._selectionMap.entries());try{for(r.s();!(n=r.n()).done;){var o=(0,j.Z)(n.value,2),a=o[0],s=o[1];i.push({layer:a,added:[],removed:(0,ne.Z)(s.selection),selection:[]})}}catch(l){r.e(l)}finally{r.f()}this._selectionMap.clear(),this._onSelectionChange(i)}},{key:"_onSelectionChange",value:function(e){this._refreshVisualization(),this.emit("selection-change",{view:this.view,changes:e})}},{key:"_refreshVisualization",value:function(){var e=this;if(null!=this.view&&null!=this.sources){for(this._vizTaskId++;this._trashCan.length>0;){var t,n=this._trashCan.pop();null===n||void 0===n||null===(t=n.highlightHandle)||void 0===t||t.remove()}var i,r=this.sources,o=this.view,a=this._selectionMap,s=this.showHighlight,l=this._vizTaskId,u=(0,N.Z)(r);try{var c=function(){var t=i.value,n=a.get(t),r=(0,se.Hd)(t)?t.parent:t;if(null!=r&&pe(r)){if(de(r))return"continue";o.whenLayerView(r).then((function(t){var i;null!==n&&void 0!==n&&null!==(i=n.highlightHandle)&&void 0!==i&&i.remove(),null!=n&&s&&l===e._vizTaskId&&"highlight"in t&&"function"==typeof t.highlight&&n.selection.length>0&&(n.highlightHandle=t.highlight(n.selection,"selection"))})).catch((function(){var e;null===n||void 0===n||null===(e=n.highlightHandle)||void 0===e||e.remove()}))}};for(u.s();!(i=u.n()).done;)c()}catch(d){u.e(d)}finally{u.f()}}}},{key:"_refreshListeners",value:function(){var e=this;this._layerEditHandles.drain(x.hw);var t,n=(0,N.Z)(this.sources);try{var i=function(){var n=t.value,i=(0,se.Hd)(n)?n.parent:n;if(null!=i&&(0,ue.Y)(i)){var r=i.on("edits",(function(t){e._handleEditChanges(t,n)}));e._layerEditHandles.push(r)}};for(n.s();!(t=n.n()).done;)i()}catch(r){n.e(r)}finally{n.f()}}},{key:"_handleEditChanges",value:function(e,t){if(void 0!==e.deletedFeatures&&e.deletedFeatures.length>0&&this._selectionMap.has(t)){var n=e.deletedFeatures.filter((function(e){return null==e.error})).map((function(e){return e.objectId})).filter(ie.pC);this.removeFromSelection(t,n)}}},{key:"_setSelection",value:function(e,t){if(!this.sources.includes(e))throw new Error("Cannot set selection on layer ".concat(e.title," because it is not in 'sources'"));var n=this._selectionMap.get(e);if(void 0===n||!ve(n,{selection:t})){void 0!==n&&this._trashCan.push(n),this._selectionMap.set(e,{selection:(0,ne.Z)(t)});var i=(0,o.Z)({layer:e,selection:(0,ne.Z)(t)},(0,ie.e5)(void 0!==n?n.selection:[],t));this._onSelectionChange([i])}}}]),n}(b.Z.EventedAccessor);(0,p._)([(0,E.Cb)({readOnly:!0,nonNullable:!0})],ce.prototype,"selections",null),(0,p._)([(0,E.Cb)({readOnly:!0,nonNullable:!0})],ce.prototype,"count",null),(0,p._)([(0,E.Cb)({constructOnly:!0,nonNullable:!0})],ce.prototype,"view",void 0),(0,p._)([(0,E.Cb)({readOnly:!0,nonNullable:!0})],ce.prototype,"hasSelection",null),(0,p._)([(0,E.Cb)()],ce.prototype,"showHighlight",void 0),(0,p._)([(0,E.Cb)()],ce.prototype,"sources",null),ce=(0,p._)([(0,I.j)("esri.views.SelectionManager")],ce);var de=function(e){var t;return(0,se.Hd)(e)?!0===(null===(t=e.parent)||void 0===t?void 0:t.isTable):e.isTable},he=function(e){return void 0!==e.layer},pe=function(e){return void 0!==(null===e||void 0===e?void 0:e.when)},ve=function(e,t){if(null==e&&null==t)return!0;if(null!=e&&null==t||null==e&&null!=t)return!1;if(null!=e&&null!=t&&null!=e.selection&&null!=t.selection){var n=(0,ne.Z)(e.selection),i=(0,ne.Z)(t.selection);if(n.length!==i.length)return!1;n.sort(),i.sort();for(var r=0;r<n.length;r++)if(n[r]!==i[r])return!1}return!0},fe=function(){var e=(0,r.Z)((0,i.Z)().mark((function e(t,n){var r,a,s,l,u=arguments;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>2&&void 0!==u[2]?u[2]:{},!he(t)){e.next=13;break}if(void 0!==(s=t)){e.next=7;break}e.t0=null,e.next=10;break;case 7:return e.next=9,s.queryFeatures(new le.Z((0,o.Z)((0,o.Z)({},r),{},{objectIds:n}))).then((function(e){return{data:e,layer:t.layer}}));case 9:e.t0=e.sent;case 10:a=e.t0,e.next=22;break;case 13:if(void 0!==(l=t)){e.next=18;break}e.t1=null,e.next=21;break;case 18:return e.next=20,l.queryFeatures(new le.Z((0,o.Z)((0,o.Z)({},r),{},{objectIds:n}))).then((function(e){return{data:e,layer:l}}));case 20:e.t1=e.sent;case 21:a=e.t1;case 22:return e.abrupt("return",a);case 23:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ye=ce,me=n(51995),ge=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e){var i;return(0,a.Z)(this,n),(i=t.call(this,e)).accentColor=new me.Z([255,127,0]),i.textColor=new me.Z([255,255,255]),i}return(0,s.Z)(n)}((0,n(11582).J)(y.default));(0,p._)([(0,E.Cb)({type:me.Z,nonNullable:!0})],ge.prototype,"accentColor",void 0),(0,p._)([(0,E.Cb)({type:me.Z,nonNullable:!0})],ge.prototype,"textColor",void 0);var _e=ge=(0,p._)([(0,I.j)("esri.views.Theme")],ge),we=n(84702),be=n(1614),ke=n(84057),Ce=n(99034);function Ze(e){return e.visible&&null!=e.getEditableFlag&&e.getEditableFlag(Ce.bH.USER)&&e.getEditableFlag(Ce.bH.MANAGER)}var Me=n(83704),xe=n(16889),Te=n(72612),Pe=function(){function e(){(0,a.Z)(this,e),this._pointerLocations=new Map,this._hoveredManipulators=new Map,this._grabbedManipulators=new Map,this._draggedManipulators=new Map,this._stopDrag=!1,this._revertToNullActiveTool=!1,this._cursor=null}return(0,s.Z)(e,[{key:"cursor",get:function(){return this._cursor}},{key:"hasFocusedManipulators",value:function(){return this._grabbedManipulators.size>0||this._draggedManipulators.size>0}},{key:"handleInputEvent",value:function(e,t){var n=function(){return e.stopPropagation()};switch(e.type){case"pointer-move":Ie(e.pointerType)&&this._pointerLocations.set(e.pointerId,{x:e.x,y:e.y,pointerType:e.pointerType});break;case"drag":this._grabbedManipulators.size>0&&(this._stopDrag=!0),this._stopDrag&&(n(),"end"===e.action&&(this._stopDrag=!1));break;case"pointer-down":if(!De(e))break;var i=(0,Te.vT)(e),r=Ee(i,e.pointerType,t.forEachTool);if(null==r)break;var o=r.manipulator,a=r.tool;null==o||null==a||!o.interactive||o.grabbable&&o.grabbableForEvent(e)||!o.grabbing||o.dragging||this._releaseManipulatorBeforeDragging(o,e,t),null!=o&&null!=a&&o.interactive&&o.grabbable&&o.grabbableForEvent(e)&&!o.grabbing&&(this._grabbedManipulators.set(e.pointerId,{manipulator:o,tool:a,start:i,pointerType:e.pointerType}),1===this._grabbedManipulators.size&&null==t.activeTool&&(this._revertToNullActiveTool=!0,t.setActiveTool(r.tool)),o.grabbing=!0,o.events.emit("grab-changed",{action:"start",pointerType:e.pointerType,screenPoint:i}),n());break;case"pointer-up":this._draggedManipulators.has(e.pointerId)||this._handlePointerEnd(e,t);break;case"pointer-drag":if(!De(e))break;var s=this._grabbedManipulators.get(e.pointerId),l=null===s||void 0===s?void 0:s.manipulator,u=null===s||void 0===s?void 0:s.tool;if(null==l||null==u)break;var c=(0,Te.vT)(e);c.x=(0,xe.uZ)(c.x,0,t.view.width),c.y=(0,xe.uZ)(c.y,0,t.view.height);var d=s.start,h=this._draggedManipulators.get(e.pointerId);switch(e.action){case"start":case"update":"update"!==e.action&&1!==this._grabbedManipulators.size||(l.dragging=!0,h?l.events.emit("drag",{action:"update",start:d,screenPoint:c}):l.events.emit("drag",{action:"start",start:d,screenPoint:c,pointerType:e.pointerType}),this._draggedManipulators.set(e.pointerId,{tool:u,manipulator:l,start:d}));break;case"end":l.dragging=!1,h&&l.events.emit("drag",{action:"end",start:d,screenPoint:c}),this._draggedManipulators.delete(e.pointerId),this._handlePointerEnd(e,t)}n();break;case"immediate-click":var p=(0,Te.vT)(e),v=Ee(p,e.pointerType,t.forEachTool);if(function(e){return!!e.native.shiftKey}(e)||t.forEachTool((function(e){if((null==v||v.tool!==e||e.automaticManipulatorSelection)&&e.manipulators){var t=!1;e.manipulators.forEach((function(e){var n=e.manipulator;n.selected&&(n.selected=!1,t=!0)})),t&&e.onManipulatorSelectionChanged&&e.onManipulatorSelectionChanged()}})),null==v)break;var f=v.manipulator,y=v.tool;if(!f.interactive)break;f.selectable&&y.automaticManipulatorSelection&&(f.selected=!f.selected,y.onManipulatorSelectionChanged&&y.onManipulatorSelectionChanged());var m=e.native.shiftKey;f.events.emit("immediate-click",{screenPoint:p,button:e.button,pointerType:e.pointerType,shiftKey:m,stopPropagation:n}),Le(f,n);break;case"click":var g=(0,Te.vT)(e),_=Ee(g,e.pointerType,t.forEachTool),w=null===_||void 0===_?void 0:_.manipulator;if(null==w||!w.interactive)break;var b=e.native.shiftKey;w.events.emit(e.type,{screenPoint:g,button:e.button,pointerType:e.pointerType,shiftKey:b}),n();break;case"double-click":var k=(0,Te.vT)(e),C=Ee(k,e.pointerType,t.forEachTool),Z=null!=C?C.manipulator:null;if(null==Z||!Z.interactive)break;var M=e.native.shiftKey;Z.events.emit("double-click",{screenPoint:k,button:e.button,pointerType:e.pointerType,shiftKey:M,stopPropagation:n}),Le(Z,n);break;case"immediate-double-click":var x=(0,Te.vT)(e),T=Ee(x,e.pointerType,t.forEachTool),P=null!=T?T.manipulator:null;if(null==P||!P.interactive)break;var S=e.native.shiftKey;P.events.emit("immediate-double-click",{screenPoint:x,button:e.button,pointerType:e.pointerType,shiftKey:S,stopPropagation:n}),Le(P,n)}this._onFocusChange(t.forEachTool)}},{key:"_releaseManipulatorBeforeDragging",value:function(e,t,n){var i=this;e.grabbing=!1,e.events.emit("grab-changed",{action:"end",pointerType:t.pointerType,screenPoint:(0,Te.vT)(t)}),this._grabbedManipulators.forEach((function(t,n){t.manipulator===e&&i._grabbedManipulators.delete(n)})),this._afterManipulatorRelease(n.setActiveTool)}},{key:"_handlePointerEnd",value:function(e,t){var n,i=null===(n=this._grabbedManipulators.get(e.pointerId))||void 0===n?void 0:n.manipulator;null!=i&&i.grabbing&&(i.grabbing=!1,i.events.emit("grab-changed",{action:"end",pointerType:e.pointerType,screenPoint:(0,Te.vT)(e)}),this._grabbedManipulators.delete(e.pointerId),this._afterManipulatorRelease(t.setActiveTool))}},{key:"_onFocusChange",value:function(e){this._updateCursor(),this._updateFocusedManipulatorTools(e)}},{key:"_updateCursor",value:function(){this._grabbedManipulators.size>0?this._cursor=Se(this._grabbedManipulators)||"grabbing":this._hoveredManipulators.size>0?this._cursor=Se(this._hoveredManipulators)||"pointer":this._cursor=null}},{key:"_updateFocusedManipulatorTools",value:function(e){var t=this,n=new Set,i=new Set;this._grabbedManipulators.forEach((function(e){var t=e.tool;n.add(t)})),this._hoveredManipulators.forEach((function(e){var t=e.tool;i.add(t)})),e((function(e){e.hasGrabbedManipulators=n.has(e),e.hasHoveredManipulators=i.has(e);var r=t._grabbedManipulators.values(),o=(0,Me.sE)(r,(function(t){return t.tool===e}));e.firstGrabbedManipulator=null!=o?o.manipulator:null}))}},{key:"clearPointers",value:function(e,t){var n=this,i=t.forEachTool,r=t.setActiveTool,o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=arguments.length>3?arguments[3]:void 0,s=function(t,n){return t===e&&(null==a||a===n)};this._grabbedManipulators.forEach((function(e,t){var i=e.tool,r=e.manipulator,o=e.pointerType;s(i,r)&&(n._grabbedManipulators.delete(t),r.grabbing=!1,r.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:o}))})),this._draggedManipulators.forEach((function(e,t){var i=e.tool,r=e.manipulator;s(i,r)&&(n._draggedManipulators.delete(t),r.dragging=!1,r.events.emit("drag",{action:"cancel"}))})),o&&this._hoveredManipulators.forEach((function(e,t){var i=e.tool,r=e.manipulator;s(i,r)&&(n._hoveredManipulators.delete(t),r.hovering=!1)})),this._afterManipulatorRelease(r),this._onFocusChange(i)}},{key:"updateHoveredStateFromKnownPointers",value:function(e){var t=this;this._pointerLocations.forEach((function(n,i){t._updateHoveredStateForPointerAtScreenPosition((0,Q.vW)(n.x,n.y),i,n.pointerType,e)}))}},{key:"handleHoverEvent",value:function(e,t){"pointer-up"!==e.type&&"immediate-click"!==e.type&&"pointer-move"!==e.type||!Ie(e.pointerType)||this._updateHoveredStateForPointerAtScreenPosition((0,Te.vT)(e),e.pointerId,e.pointerType,t)}},{key:"_updateHoveredStateForPointerAtScreenPosition",value:function(e,t,n,i){var r,o=Ee(e,n,i),a=null===(r=this._hoveredManipulators.get(t))||void 0===r?void 0:r.manipulator;null==o||o.manipulator.interactive||(o=null),null!=o&&a===o.manipulator||(null!=a&&(a.hovering=!1),null!=o?(o.manipulator.hovering=!0,this._hoveredManipulators.set(t,o)):this._hoveredManipulators.delete(t),this._onFocusChange(i))}},{key:"_afterManipulatorRelease",value:function(e){0===this._grabbedManipulators.size&&this._revertToNullActiveTool&&(e(null),this._revertToNullActiveTool=!1)}}]),e}();function Se(e){var t=null;return(0,q.oE)(e,(function(e){var n=e.manipulator;return!(null==n||!n.interactive)&&(n.grabbing&&n.grabCursor?(t=n.grabCursor,!0):!!n.cursor&&(t=n.cursor,!0))})),t}function Ee(e,t,n){var i=null;return n((function(n){if(null==n.manipulators||!Ze(n))return!1;var r=n.manipulators.intersect(e,t);return null!=r&&(i={tool:n,manipulator:r},!0)})),i}function Ie(e){return"mouse"===e}function De(e){return"mouse"!==e.pointerType||0===e.button}function Le(e,t){(null===e||void 0===e?void 0:e.consumesClicks)&&t()}var Ve="attached",Ae="tools",Re=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e){var i;return(0,a.Z)(this,n),(i=t.call(this,e))._updatingHandles=new L.R,i._clock=we.m,i._manipulatorState=new Pe,i.tools=new g.Z,i.cursor=null,i._interacting=!1,i._interactingTimeout=1e3,i._interactingTimeoutHandle=null,i._forEachTool=function(e){var t,n=(0,N.Z)(i.tools.items);try{for(n.s();!(t=n.n()).done;){if(e(t.value))return}}catch(r){n.e(r)}finally{n.f()}},i}return(0,s.Z)(n,[{key:"initialize",value:function(){var e,t=this;this.addHandles([this.view.on(ke.uS,(function(e){t._handleInputEvent(e)}),be.f.TOOL)].concat((0,ne.Z)([(e=this.tools).on("before-add",(function(t){var n=t.item;if(null==n||e.includes(n))return M.Z.getLogger("esri.views.interactive.interactiveToolUtils").warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void t.preventDefault();n.onAdd()})),e.on("after-remove",(function(e){var t=e.item;t.active&&(t.view.activeTool=null),t.destroy()}))]),[this.tools.on("before-add",(function(e){var n=e.item;t._updateToolEditableFlag(n)})),this.tools.on("before-remove",(function(e){var n=e.item;t._manipulatorState.clearPointers(n,t._manipulatorStateEventArgs),t._updateCursor()})),this.tools.on("change",(function(){t._refreshToolWatchers()}))]))}},{key:"destroy",value:function(){this.activeTool=null,this.tools.drain((function(e){return e.destroy()})),this._clearInteractingTimeout(),this._interacting=!1,this._updatingHandles.destroy()}},{key:"_manipulatorStateEventArgs",get:function(){var e=this;return{forEachTool:this._forEachTool,activeTool:this.activeTool,setActiveTool:function(t){e.activeTool=t},view:this.view}}},{key:"activeTool",set:function(e){if(null==e||this.view.ready){if(e!==this.activeTool){var t=this.activeTool;this._set("activeTool",e),null!=t&&t.deactivate(),null!=e&&e.activate(),this._removeIncompleteTools(e);var n,i=(0,N.Z)(this.tools);try{for(i.s();!(n=i.n()).done;){var r=n.value;this._updateToolEditableFlag(r);var o=Ze(r);null!=this.activeTool&&o||this._manipulatorState.clearPointers(r,this._manipulatorStateEventArgs,!o)}}catch(a){i.e(a)}finally{i.f()}this._updateCursor()}}else M.Z.getLogger(this).error("Cannot set active tool while view is not ready.")}},{key:"updating",get:function(){return this._updatingHandles.updating||this.tools.some((function(e){return e.updating}))}},{key:"interacting",get:function(){return this._interacting}},{key:"_clearInteractingTimeout",value:function(){this._interactingTimeoutHandle=(0,x.hw)(this._interactingTimeoutHandle)}},{key:"_startInteractingTimeout",value:function(){var e=this;this._clearInteractingTimeout(),this._interactingTimeoutHandle=this._clock.setTimeout((function(){return e._interacting=!1}),this._interactingTimeout)}},{key:"attach",value:function(){var e,t=this;"3d"===this.view.type?this.addHandles([(0,S.watch)((function(){var e=t.view.state;return"camera"in e&&e.camera}),(function(){return t._forEachManipulator((function(e){return e.onViewChange()}))})),null===(e=this.view.elevationProvider)||void 0===e?void 0:e.on("elevation-change",(function(e){return t._forEachManipulator((function(t){return t.onElevationChange(e)}))}))],Ve):this.addHandles((0,S.watch)((function(){return t.view.extent}),(function(){return t._forEachManipulator((function(e){return e.onViewChange()}))})))}},{key:"detach",value:function(){this.activeTool=null,this.tools.removeAll(),this.removeHandles(Ve),this._clearInteractingTimeout(),this._interacting=!1}},{key:"_forEachManipulator",value:function(e){this._forEachTool((function(t){t.manipulators&&t.manipulators.forEach((function(n){var i=n.manipulator;return e(i,t)}))}))}},{key:"_handleInputEvent",value:function(e){var t=!1,n=(0,o.Z)((0,o.Z)({},e),{},{stopPropagation:function(){t=!0,e.stopPropagation()}});null!=this.activeTool?this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(n):this._forEachTool((function(e){!t&&e.visible&&e.handleInputEvent(n)})),!t&&"key-down"===e.type&&"Escape"===e.key&&this.activeTool&&(e.stopPropagation(),this.activeTool=null),this._manipulatorState.handleInputEvent(n,this._manipulatorStateEventArgs),t||null==this.activeTool||this.activeTool.handleInputEventAfter(n),this._manipulatorState.handleHoverEvent(n,this._forEachTool),this._updateCursor(),"pointer-move"===e.type&&(this._manipulatorState.hasFocusedManipulators()||this.activeTool)&&(this._interacting=!0,this._startInteractingTimeout())}},{key:"_refreshToolWatchers",value:function(){var e=this;this.removeHandles(Ae),this._forEachTool((function(t){if(t instanceof y.default){var n=(0,S.watch)((function(){return[t.cursor,t.visible,t.editable]}),(function(){Ze(t)||e._manipulatorState.clearPointers(t,e._manipulatorStateEventArgs),e._updateCursor()}));e.addHandles(n,Ae)}t.manipulators&&e.addHandles([t.manipulators.on("after-remove",(function(n){e._manipulatorState.clearPointers(t,e._manipulatorStateEventArgs,!0,n.item.manipulator)})),t.manipulators.on("change",(function(){e._manipulatorState.updateHoveredStateFromKnownPointers(e._forEachTool),e._updateCursor()}))],Ae)})),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}},{key:"_updateToolEditableFlag",value:function(e){var t;null===(t=e.setEditableFlag)||void 0===t||t.call(e,Ce.bH.MANAGER,null==this.activeTool||e===this.activeTool)}},{key:"_updateCursor",value:function(){var e=this._manipulatorState.cursor;null==e&&this._forEachTool((function(t){return!(null==t.cursor||!t.visible)&&(e=t.cursor,!0)})),this._get("cursor")!==e&&this._set("cursor",e)}},{key:"_removeIncompleteTools",value:function(e){var t=this;this.tools.filter((function(t){return(null==e||t!==e)&&!t.created&&t.removeIncompleteOnCancel})).forEach((function(e){t.tools.remove(e)}))}},{key:"test",get:function(){}}]),n}(y.default);(0,p._)([(0,E.Cb)({constructOnly:!0,nonNullable:!0})],Re.prototype,"view",void 0),(0,p._)([(0,E.Cb)({value:null})],Re.prototype,"activeTool",null),(0,p._)([(0,E.Cb)({readOnly:!0,type:g.Z})],Re.prototype,"tools",void 0),(0,p._)([(0,E.Cb)({readOnly:!0})],Re.prototype,"cursor",void 0),(0,p._)([(0,E.Cb)({readOnly:!0})],Re.prototype,"updating",null),(0,p._)([(0,E.Cb)()],Re.prototype,"_interacting",void 0),(0,p._)([(0,E.Cb)({readOnly:!0})],Re.prototype,"interacting",null),Re=(0,p._)([(0,I.j)("esri.views.ToolViewManager")],Re);var Fe=n(5977),ze=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(){var e;(0,a.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).devices=new g.Z,e.enabledFocusMode="document",e}return(0,s.Z)(n)}(y.default);(0,p._)([(0,E.Cb)({type:g.Z.ofType(Fe.Z),readOnly:!0})],ze.prototype,"devices",void 0),(0,p._)([(0,E.Cb)({type:["document","view","none"]})],ze.prototype,"enabledFocusMode",void 0);var Oe=ze=(0,p._)([(0,I.j)("esri.views.input.gamepad.GamepadSettings")],ze),He=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(){var e;return(0,a.Z)(this,n),(e=t.apply(this,arguments)).gamepad=new Oe,e}return(0,s.Z)(n)}(y.default);(0,p._)([(0,E.Cb)({readOnly:!0})],He.prototype,"gamepad",void 0);var Ne=He=(0,p._)([(0,I.j)("esri.views.input.Input")],He),We=n(90193),je=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e){var i;return(0,a.Z)(this,n),(i=t.call(this,e)).enabled=!0,i.device=null,i.mode="pan",i.tiltDirection="forward-down",i.velocityFactor=1,i}return(0,s.Z)(n)}(y.default);(0,p._)([(0,E.Cb)({type:Boolean,nonNullable:!0})],je.prototype,"enabled",void 0),(0,p._)([(0,E.Cb)({type:Fe.Z})],je.prototype,"device",void 0),(0,p._)([(0,E.Cb)({type:["pan","zoom"],nonNullable:!0})],je.prototype,"mode",void 0),(0,p._)([(0,E.Cb)({type:["forward-down","forward-up"],nonNullable:!0})],je.prototype,"tiltDirection",void 0),(0,p._)([(0,E.Cb)({type:Number,nonNullable:!0})],je.prototype,"velocityFactor",void 0);var qe=je=(0,p._)([(0,I.j)("esri.views.navigation.gamepad.GamepadSettings")],je),Ue=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e){var i;return(0,a.Z)(this,n),(i=t.call(this,e)).browserTouchPanEnabled=!0,i.gamepad=new qe,i.momentumEnabled=!0,i.mouseWheelZoomEnabled=!0,i}return(0,s.Z)(n,[{key:"effectiveMomentumEnabled",get:function(){return this.momentumEnabled&&!(0,We.n)()}}]),n}(y.default);(0,p._)([(0,E.Cb)({type:Boolean})],Ue.prototype,"browserTouchPanEnabled",void 0),(0,p._)([(0,E.Cb)({type:qe,nonNullable:!0})],Ue.prototype,"gamepad",void 0),(0,p._)([(0,E.Cb)({type:Boolean})],Ue.prototype,"momentumEnabled",void 0),(0,p._)([(0,E.Cb)({type:Boolean})],Ue.prototype,"mouseWheelZoomEnabled",void 0);var Be,Ge=Ue=(0,p._)([(0,I.j)("esri.views.navigation.Navigation")],Ue),Ke=n(5354),Ye=n(50951),Je=n(79803),Xe=null;function $e(e){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,r.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Xe||(Xe=n.e(67387).then(n.bind(n,67387)).then((function(e){return Be=e}))),e.next=3,Xe;case 3:(0,P.k_)(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function et(e,t,n,i){return tt.apply(this,arguments)}function tt(){return tt=(0,r.Z)((0,i.Z)().mark((function e(t,n,r,o){var a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:if(a=t.spatialReference,!(0,Je.isLoaded)()&&!(0,Je.canProjectWithoutEngine)(a,n)){e.next=7;break}e.t0=(0,Je.project)(t,n),e.next=15;break;case 7:if(!Be){e.next=11;break}e.t1=Be.projectGeometry(t,n,r,o),e.next=14;break;case 11:return e.next=13,Promise.race([$e(o),(0,Je.load)(o)]);case 13:e.t1=et(t,n,r,o);case 14:e.t0=e.t1;case 15:return e.abrupt("return",e.t0);case 16:case"end":return e.stop()}}),e)}))),tt.apply(this,arguments)}var nt=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e){var i;return(0,a.Z)(this,n),(i=t.call(this,e)).required={tileInfo:!1,heightModelInfo:!1,extent:!1},i.defaultSpatialReference=null,i.userSpatialReference=null,i.sourcePreloadCount=10,i.priorityCollection=null,i.requiresExtentInSpatialReference=!0,i.suspended=!1,i._projectExtentTask={task:null,input:null,output:null,spatialReference:null},i}return(0,s.Z)(n,[{key:"destroy",value:function(){this._projectExtentTask.task&&(this._projectExtentTask.task=(0,x.IM)(this._projectExtentTask.task)),this._set("map",null)}},{key:"ready",get:function(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}},{key:"heightModelInfoReady",get:function(){return!this._heightModelInfoTask.updating}},{key:"spatialReference",get:function(){var e;return null!==(e=this.userSpatialReference)&&void 0!==e?e:this._spatialReferenceTask.spatialReference}},{key:"extent",get:function(){return this._extentTask.extent}},{key:"heightModelInfo",get:function(){return this._heightModelInfoTask.heightModelInfo}},{key:"vcsWkid",get:function(){return this._heightModelInfoTask.vcsWkid}},{key:"latestVcsWkid",get:function(){return this._heightModelInfoTask.latestVcsWkid}},{key:"viewingMode",get:function(){return null==this.userSpatialReference||this.userSpatialReference.equals(this._spatialReferenceTask.spatialReference)?this._spatialReferenceTask.viewingMode:null}},{key:"tileInfo",get:function(){return this._tileInfoTask.tileInfo}},{key:"mapCollections",get:function(){var e,t,n,i,r=null===(e=this.map)||void 0===e?void 0:e.call(this),o=[];return null!=this.priorityCollection&&o.push(this.priorityCollection),o.push({parent:null===r||void 0===r?void 0:r.basemap,layers:null===r||void 0===r||null===(t=r.basemap)||void 0===t?void 0:t.baseLayers},{layers:null===r||void 0===r?void 0:r.layers},{parent:null===r||void 0===r?void 0:r.ground,layers:null===r||void 0===r||null===(n=r.ground)||void 0===n?void 0:n.layers},{parent:null===r||void 0===r?void 0:r.basemap,layers:null===r||void 0===r||null===(i=r.basemap)||void 0===i?void 0:i.referenceLayers}),o}},{key:"_allLayers",get:function(){return this._collectLayers(this.mapCollections)}},{key:"_spatialReferenceTask",get:function(){var e,t,n;if(this.suspended)return null!==(e=this._get("_spatialReferenceTask"))&&void 0!==e?e:{updating:!1};var i,r=this._allLayers,o=r.layers,a=r.updating,s=null,l=(0,N.Z)(o);try{for(l.s();!(i=l.n()).done;){var u=i.value,c=this._getSupportedSpatialReferences(u);if(c.length>0){var d=this._narrowDownSpatialReferenceCandidates(s,c);null!=d&&(s=d)}if(null!=s&&1===s.length)break}}catch(p){l.e(p)}finally{l.f()}if(a&&(null==s||1!==s.length))return{updating:!0};var h=this._pickSpatialReferenceCandidate(s);return{spatialReference:null!==(t=null===h||void 0===h?void 0:h.spatialReference)&&void 0!==t?t:null,viewingMode:null!==(n=null===h||void 0===h?void 0:h.viewingMode)&&void 0!==n?n:null,updating:!1}}},{key:"_tileInfoTask",get:function(){var e,t,n,i,r,o,a,s;if(!this.required.tileInfo)return null!==(e=this._get("_tileInfoTask"))&&void 0!==e?e:{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};var l=this._collectLayers([{parent:null===(t=this.map)||void 0===t||null===(n=t.call(this))||void 0===n?void 0:n.basemap,layers:null===(i=this.map)||void 0===i||null===(r=i.call(this))||void 0===r||null===(o=r.basemap)||void 0===o?void 0:o.baseLayers},{layers:null===(a=this.map)||void 0===a||null===(s=a.call(this))||void 0===s?void 0:s.layers}]),u=l.layers,c=l.updating;if(u&&u.length>0&&"tileInfo"in u[0]){var d=u[0].tileInfo;return{tileInfo:null!==d&&void 0!==d&&d.spatialReference.equals(this.spatialReference)?d:null,updating:!1}}return{updating:c}}},{key:"_heightModelInfoTask",get:function(){var e,t;if(!this.required.heightModelInfo||this.suspended&&null!==(e=this._get("_heightModelInfoTask"))&&void 0!==e&&e.heightModelInfo)return null!==(t=this._get("_heightModelInfoTask"))&&void 0!==t?t:{updating:!1};var n,i=this._allLayers,r=i.layers,o=i.updating,a=(0,N.Z)(r);try{for(a.s();!(n=a.n()).done;){var s=n.value;if((0,Ke.qC)(s)){var l,u,c=(0,Ke.Ku)(s);if(c)return{heightModelInfo:c,vcsWkid:null===(l=s.spatialReference)||void 0===l?void 0:l.vcsWkid,latestVcsWkid:null===(u=s.spatialReference)||void 0===u?void 0:u.latestVcsWkid,updating:!1}}}}catch(d){a.e(d)}finally{a.f()}return{updating:o}}},{key:"_extentCandidatesTask",get:function(){var e,t=this;if(this.suspended||!this.required.extent)return null!==(e=this._get("_extentCandidatesTask"))&&void 0!==e?e:{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};var n,i=this._allLayers,r=i.updating,o=[],a=(0,N.Z)(i.layers);try{for(a.s();!(n=a.n()).done;){var s,l=n.value,u="fullExtents"in l&&l.fullExtents||(null!=l.fullExtent?[l.fullExtent]:[]),c=this.requiresExtentInSpatialReference?null:u[0],d=null!==(s=u.find((function(e){return e.spatialReference.equals(t.spatialReference)})))&&void 0!==s?s:c;if(d)return{candidates:[{extent:d,layer:l}],updating:!1};if(this._getSupportedSpatialReferences(l).length>0){var h,p=(0,N.Z)(u);try{for(p.s();!(h=p.n()).done;){var v=h.value;o.push({extent:v,layer:l})}}catch(f){p.e(f)}finally{p.f()}}}}catch(f){a.e(f)}finally{a.f()}return{candidates:o,updating:r}}},{key:"_extentTask",get:function(){var e=this,t=this._extentCandidatesTask,n=t.candidates,a=t.updating;if(a)return{updating:a};if(null==n||0===n.length)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};var s=this._pickExtentCandidate(n),l=this.spatialReference;return s.extent.equals(this._projectExtentTask.input)&&l.equals(this._projectExtentTask.spatialReference)?{extent:this._projectExtentTask.output,updating:null!=this._projectExtentTask.task&&!this._projectExtentTask.task.finished}:(null!=this._projectExtentTask.task&&(this._projectExtentTask.task=(0,x.IM)(this._projectExtentTask.task)),this._projectExtentTask={input:s.extent.clone(),output:null,spatialReference:l.clone(),task:(0,m.vr)(function(){var t=(0,r.Z)((0,i.Z)().mark((function t(n){var r;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,et(s.extent,l,"portalItem"in s.layer?s.layer.portalItem:void 0,n);case 3:r=t.sent,e._projectExtentTask=(0,o.Z)((0,o.Z)({},e._projectExtentTask),{},{task:null,output:r}),t.next=12;break;case 7:if(t.prev=7,t.t0=t.catch(0),!(0,P.Hc)(n)){t.next=11;break}return t.abrupt("return");case 11:e._projectExtentTask=(0,o.Z)((0,o.Z)({},e._projectExtentTask),{},{task:null});case 12:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}())},{updating:!0})}},{key:"_narrowDownSpatialReferenceCandidates",value:function(e,t){if(null==e)return t;var n,i=new Array,r=(0,N.Z)(e);try{for(r.s();!(n=r.n()).done;){var o,a=n.value,s=(0,N.Z)(t);try{for(s.s();!(o=s.n()).done;){var l=o.value;if(a.spatialReference.equals(l.spatialReference)){var u=ot(a.viewingMode,l.viewingMode);if(!1!==u){i.push({spatialReference:a.spatialReference,viewingMode:u});break}}}}catch(c){s.e(c)}finally{s.f()}}}catch(c){r.e(c)}finally{r.f()}return i.length>0?i:null}},{key:"_pickSpatialReferenceCandidate",value:function(e){var t=this.defaultSpatialReference;return null==e||e.length<1?t?{spatialReference:t,viewingMode:null}:null:(null!=t&&e.length>1&&e.some((function(e){return e.spatialReference.equals(t)}))&&(e=e.filter((function(e){return e.spatialReference.equals(t)}))),e.length>1&&e.some((function(e){return e.viewingMode!==Ye.JY.Local}))&&(e=e.filter((function(e){return e.viewingMode!==Ye.JY.Local}))),e[0])}},{key:"_getSupportedSpatialReferences",value:function(e){var t="supportedSpatialReferences"in e&&e.supportedSpatialReferences||(e.spatialReference?[e.spatialReference]:[]);if(0===t.length)return[];var n,i=[],r=(0,N.Z)(t);try{for(r.s();!(n=r.n()).done;){var o=n.value,a=this.getSpatialReferenceSupport(o,e);if(null!=a){var s,l,u=null!==(s=a.constraints)&&void 0!==s?s:[{spatialReference:o,viewingMode:null}],c=(0,N.Z)(u);try{for(c.s();!(l=c.n()).done;){var d=l.value,h=d.spatialReference,p=d.viewingMode;this.requiresExtentInSpatialReference&&null!=this.userSpatialReference&&!h.equals(this.userSpatialReference)||i.push({spatialReference:h,viewingMode:p})}}catch(v){c.e(v)}finally{c.f()}}}}catch(v){r.e(v)}finally{r.f()}return i}},{key:"_pickExtentCandidate",value:function(e){var t=this.spatialReference;return e.find((function(e){var n=e.extent;return t.equals(n.spatialReference)}))||e[0]}},{key:"_collectLayers",value:function(e){var t;if("loaded"!==this._loadMaybe(null===(t=this.map)||void 0===t?void 0:t.call(this)))return{layers:[],updating:!0};var n,i=new rt,r=(0,N.Z)(e);try{for(r.s();!(n=r.n()).done;){var o=n.value;if(this._collectCollection(o,i),i.preloading===this.sourcePreloadCount)break}}catch(a){r.e(a)}finally{r.f()}return{layers:i.layers,updating:i.updating}}},{key:"_collectCollection",value:function(e,t){if(e.layers){switch(this._loadMaybe(e.parent)){case"loading":return t.updating=!0,void++t.preloading;case"failed":return}var n,i=(0,N.Z)(e.layers);try{for(i.s();!(n=i.n()).done;){var r=n.value;switch(this._loadMaybe(r)){case"failed":continue;case"loading":t.updating=!0,++t.preloading;break;case"loaded":t.updating||t.layers.push(r),"layers"in r&&this._collectCollection({layers:r.layers},t)}if(t.preloading===this.sourcePreloadCount)break}}catch(o){i.e(o)}finally{i.f()}}}},{key:"_loadMaybe",value:function(e){return e&&"loadStatus"in e&&null!=e.loadStatus?"not-loaded"===e.loadStatus?(e.load().catch((function(e){(0,P.D_)(e)||console.log(e)})),"loading"):e.loadStatus:"loaded"}}]),n}(y.default);(0,p._)([(0,E.Cb)()],nt.prototype,"required",void 0),(0,p._)([(0,E.Cb)({constructOnly:!0})],nt.prototype,"map",void 0),(0,p._)([(0,E.Cb)({constructOnly:!0})],nt.prototype,"getSpatialReferenceSupport",void 0),(0,p._)([(0,E.Cb)()],nt.prototype,"defaultSpatialReference",void 0),(0,p._)([(0,E.Cb)()],nt.prototype,"userSpatialReference",void 0),(0,p._)([(0,E.Cb)()],nt.prototype,"sourcePreloadCount",void 0),(0,p._)([(0,E.Cb)()],nt.prototype,"priorityCollection",void 0),(0,p._)([(0,E.Cb)()],nt.prototype,"requiresExtentInSpatialReference",void 0),(0,p._)([(0,E.Cb)()],nt.prototype,"suspended",void 0),(0,p._)([(0,E.Cb)({readOnly:!0})],nt.prototype,"ready",null),(0,p._)([(0,E.Cb)({readOnly:!0})],nt.prototype,"heightModelInfoReady",null),(0,p._)([(0,E.Cb)({readOnly:!0})],nt.prototype,"spatialReference",null),(0,p._)([(0,E.Cb)({readOnly:!0})],nt.prototype,"extent",null),(0,p._)([(0,E.Cb)({readOnly:!0})],nt.prototype,"heightModelInfo",null),(0,p._)([(0,E.Cb)({readOnly:!0})],nt.prototype,"vcsWkid",null),(0,p._)([(0,E.Cb)({readOnly:!0})],nt.prototype,"latestVcsWkid",null),(0,p._)([(0,E.Cb)({readOnly:!0})],nt.prototype,"viewingMode",null),(0,p._)([(0,E.Cb)({readOnly:!0})],nt.prototype,"tileInfo",null),(0,p._)([(0,E.Cb)({readOnly:!0})],nt.prototype,"mapCollections",null),(0,p._)([(0,E.Cb)({readOnly:!0})],nt.prototype,"_allLayers",null),(0,p._)([(0,E.Cb)({readOnly:!0})],nt.prototype,"_spatialReferenceTask",null),(0,p._)([(0,E.Cb)({readOnly:!0})],nt.prototype,"_tileInfoTask",null),(0,p._)([(0,E.Cb)({readOnly:!0})],nt.prototype,"_heightModelInfoTask",null),(0,p._)([(0,E.Cb)({readOnly:!0})],nt.prototype,"_extentCandidatesTask",null),(0,p._)([(0,E.Cb)()],nt.prototype,"_extentTask",null),(0,p._)([(0,E.Cb)()],nt.prototype,"_projectExtentTask",void 0),nt=(0,p._)([(0,I.j)("esri.views.support.DefaultsFromMap")],nt);var it,rt=(0,s.Z)((function e(){(0,a.Z)(this,e),this.layers=new Array,this.preloading=-1,this.updating=!1}));function ot(e,t){return null!=e?null!=t?e===t&&e:e:t}var at=it=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e){var i;return(0,a.Z)(this,n),(i=t.call(this,e))._userSpatialReference=null,i._cursor=null,i.handles=new k.Z,i.updatingHandles=new L.R,i.allLayerViews=new _.Z({getCollections:function(){var e,t,n;return[null===(e=i.basemapView)||void 0===e?void 0:e.baseLayerViews,null===(t=i.groundView)||void 0===t?void 0:t.layerViews,i.layerViews,null===(n=i.basemapView)||void 0===n?void 0:n.referenceLayerViews]},getChildrenFunction:lt}),i.groundView=null,i.basemapView=null,i.fatalError=null,i.graphics=new O.J,i.analyses=new z.J,i.typeSpecificPreconditionsReady=!0,i.layerViews=new g.Z,i.magnifier=new te,i.padding={left:0,top:0,right:0,bottom:0},i.ready=!1,i.spatialReferenceWarningDelay=1e3,i.supportsGround=!0,i.timeExtent=null,i.type=null,i.scale=null,i.updating=!1,i.initialExtentRequired=!0,i.input=new Ne,i.navigation=new Ge,i.layerViewManager=null,i.analysisViewManager=null,i.isHeightModelInfoRequired=!1,i.width=null,i.height=null,i.resizing=!1,i.suspended=!1,i.viewEvents=new ke.CE((0,l.Z)(i)),i.persistableViewModels=new g.Z,i._isValid=!1,i._readyCycleForced=!1,i._lockedSpatialReference=null,i._userTimeZone=null,i._lockedTimeZone=null,i.theme=null,i.handles.add((0,S.watch)((function(){return i.preconditionsReady}),(function(e){var t,n,r=i.ready;if(e?(i._lockedSpatialReference=i.spatialReference,i._lockedTimeZone=i.timeZone,it.views.add((0,l.Z)(i))):(i._lockedSpatialReference=null,it.views.remove((0,l.Z)(i))),i.notifyChange("spatialReference"),!e&&r)null!==(t=i.toolViewManager)&&void 0!==t&&t.detach(),null!=i.analysisViewManager&&i.analysisViewManager.detach(),null!==(n=i.layerViewManager)&&void 0!==n&&n.clear(),i._teardown();else if(e&&!r){try{i._startup()}catch(ee){return void queueMicrotask((function(){i.fatalError=new w.Z("startup-error",null,ee)}))}null!=i.analysisViewManager&&i.analysisViewManager.attach(),i.toolViewManager.attach()}}),S.sync)),i}return(0,s.Z)(n,[{key:"initialize",value:function(){var e=this;this.addResolvingPromise(Promise.all([this.loadAsyncDependencies(),this.validate()]).then((function(){return e._isValid=!0,(0,S.whenOnce)((function(){return e.ready}))}))),this.basemapView=new W({view:this}),this.layerViewManager=new X({view:this,layerViewImporter:{importLayerView:function(t){return e.importLayerView(t)},hasLayerViewModule:function(t){return e.hasLayerViewModule(t)}},supportsGround:this.supportsGround}),this.toolViewManager=new Re({view:this}),this._setupSpatialReferenceLogger(),this.selectionManager=new ye({view:this}),this.addHandles([(0,S.watch)((function(){return e.initialExtentRequired}),(function(t){return e.defaultsFromMap.required=(0,o.Z)((0,o.Z)({},e.defaultsFromMap.required),{},{extent:t})}),S.syncAndInitial),(0,S.watch)((function(){return e.ready}),(function(t){e.defaultsFromMap&&(e.defaultsFromMap.suspended=t,e.defaultsFromMap.userSpatialReference=t?e.spatialReference:e._userSpatialReference)}),S.sync),(0,S.watch)((function(){return e._userSpatialReference}),(function(t){e.defaultsFromMap&&(e.defaultsFromMap.userSpatialReference=t)}),S.syncAndInitial)])}},{key:"_setupSpatialReferenceLogger",value:function(){var e=this,t=null;this.addHandles([(0,S.watch)((function(){var t;return null===(t=e.defaultsFromMap)||void 0===t?void 0:t.ready}),(function(n){var o,a=(null===(o=e.map)||void 0===o?void 0:o.allLayers.length)>0;if(n&&!e.spatialReference&&a){if(null!=t)return;var s=(0,C.kB)((function(){return t=(0,x.IM)(t)}));t=(0,m.vr)(function(){var n=(0,r.Z)((0,i.Z)().mark((function n(r){return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,(0,P.e4)(e.spatialReferenceWarningDelay,null,r);case 3:n.next=8;break;case 5:return n.prev=5,n.t0=n.catch(0),n.abrupt("return");case 8:return n.prev=8,t=null,n.finish(8);case 11:M.Z.getLogger(e).warn("#spatialReference","no spatial reference could be derived from the currently added map layers");case 12:case"end":return n.stop()}}),n,null,[[0,5,8,11]])})));return function(e){return n.apply(this,arguments)}}()),e.addHandles(s,"spatial-reference-logger-task")}else e.removeHandles("spatial-reference-logger-task")}),{sync:!0})])}},{key:"destroy",value:function(){var e,t;this.destroyed||(it.views.remove(this),this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=(0,x.SC)(this.graphics),this.analyses=(0,x.SC)(this.analyses),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),(0,x.SC)(this.analysisViewManager),this.toolViewManager=(0,x.SC)(this.toolViewManager),this.layerViewManager=(0,x.SC)(this.layerViewManager),this.selectionManager=(0,x.SC)(this.selectionManager),this.basemapView=(0,x.SC)(this.basemapView),null!==(e=this.groundView)&&void 0!==e&&e.destroy(),null!==(t=this.layerViews)&&void 0!==t&&t.forEach((function(e){return e.destroy()})),this.layerViews.length=0,this.invalidate(),this._emitter.clear(),this.handles.destroy(),this.map=(0,x.SC)(this.map),this.updatingHandles.destroy())}},{key:"_startup",value:function(){this._set("ready",!0)}},{key:"_teardown",value:function(){this._set("ready",!1)}},{key:"whenReady",value:function(){return Promise.resolve(this)}},{key:"toMap",value:function(){return M.Z.getLogger(this).error("#toMap()","Not implemented on this instance of View"),null}},{key:"activeTool",get:function(){var e;return null===(e=this.toolViewManager)||void 0===e?void 0:e.activeTool},set:function(e){this.toolViewManager&&(this.toolViewManager.activeTool=e)}},{key:"animation",get:function(){return this._get("animation")},set:function(e){this._set("animation",e)}},{key:"center",get:function(){return null}},{key:"_defaultsFromMapSettings",get:function(){return{}}},{key:"defaultsFromMap",get:function(){var e=this;return new nt((0,o.Z)({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:function(){return e.map},getSpatialReferenceSupport:function(t,n){return e.getSpatialReferenceSupport(t,n)}},this._defaultsFromMapSettings))}},{key:"extent",get:function(){return this._get("extent")},set:function(e){this._set("extent",e)}},{key:"heightModelInfo",get:function(){return this.getDefaultHeightModelInfo()}},{key:"interacting",get:function(){return this.navigating}},{key:"navigating",get:function(){return!1}},{key:"preconditionsReady",get:function(){var e;return!(this.fatalError||!this._isValid||this._readyCycleForced||!this.map||Z.Z.isLoadable(this.map)&&!this.map.loaded||0===this.width||0===this.height||!this.spatialReference||!this._validateSpatialReference(this.spatialReference)||!this._lockedSpatialReference&&(null===(e=this.defaultsFromMap)||void 0===e||!e.ready)||!this.typeSpecificPreconditionsReady)}},{key:"resolution",get:function(){return 0}},{key:"map",set:function(e){var t;e!==this._get("map")&&(null!==(t=e)&&void 0!==t&&t.destroyed&&(M.Z.getLogger(this).warn("#map","The provided map is already destroyed",{map:e}),e=null),Z.Z.isLoadable(e)&&e.load().catch((function(){})),this.constructed&&!this.destroyed&&(this.forceReadyCycle(),this._lockedSpatialReference=null),this._set("map",e))}},{key:"spatialReference",get:function(){var e,t,n=this._userSpatialReference||this._lockedSpatialReference||this.getDefaultSpatialReference()||null;if(n&&null!==(e=this.defaultsFromMap)&&void 0!==e&&null!==(t=e.required)&&void 0!==t&&t.heightModelInfo){var i=n.clone();return i.vcsWkid=this.defaultsFromMap.vcsWkid,i.latestVcsWkid=this.defaultsFromMap.latestVcsWkid,i}return n},set:function(e){var t=!(0,F.fS)(e,this._get("spatialReference"));this._set("_userSpatialReference",e),t&&(this._set("spatialReference",e),this._spatialReferenceChanged(e))}},{key:"_spatialReferenceChanged",value:function(e){}},{key:"stationary",get:function(){return!this.animation&&!this.navigating&&!this.resizing}},{key:"timeZone",get:function(){var e,t,n;return null!==(e=null!==(t=null!==(n=this._userTimeZone)&&void 0!==n?n:this._lockedTimeZone)&&void 0!==t?t:this.getDefaultTimeZone())&&void 0!==e?e:H.By},set:function(e){var t=new Set(["etc/utc","etc/gmt","gmt"]),n=new Set(Intl.supportedValuesOf("timeZone").map((function(e){return e.toLowerCase()})));this._userTimeZone=e,e===H.By||e===H._4||t.has(e.toLowerCase())||n.has(e.toLowerCase())||M.Z.getLogger(this).warn("#timeZone","the parsed value '".concat(e,"' may not be a valid IANA time zone"))}},{key:"tools",get:function(){var e;return null===(e=this.toolViewManager)||void 0===e?void 0:e.tools}},{key:"initialExtent",get:function(){var e;return null===(e=this.defaultsFromMap)||void 0===e?void 0:e.extent}},{key:"cursor",get:function(){var e,t,n;return null!==(e=null!==(t=null===(n=this.toolViewManager)||void 0===n?void 0:n.cursor)&&void 0!==t?t:this._cursor)&&void 0!==e?e:"default"},set:function(e){this._cursor=e,this.notifyChange("cursor")}},{key:"size",get:function(){return[this.width,this.height]}},{key:"effectiveTheme",get:function(){var e;return null!==(e=this.theme)&&void 0!==e?e:new _e}},{key:"whenLayerView",value:function(e){var t,n;return null!==(t=null===(n=this.layerViewManager)||void 0===n?void 0:n.whenLayerView(e))&&void 0!==t?t:Promise.reject()}},{key:"getDefaultSpatialReference",value:function(){var e;return null===(e=this.defaultsFromMap)||void 0===e?void 0:e.spatialReference}},{key:"getDefaultHeightModelInfo",value:function(){var e,t,n;return null!==(e=null!==(t=this.map&&"heightModelInfo"in this.map?this.map.heightModelInfo:void 0)&&void 0!==t?t:null===(n=this.defaultsFromMap)||void 0===n?void 0:n.heightModelInfo)&&void 0!==e?e:null}},{key:"getDefaultTimeZone",value:function(){return null}},{key:"importLayerView",value:function(e){throw new w.Z("importLayerView() not implemented")}},{key:"hasLayerViewModule",value:function(e){return!1}},{key:"validate",value:function(){var e=(0,r.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"loadAsyncDependencies",value:function(){var e=(0,r.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"invalidate",value:function(){this._isValid=!1}},{key:"getSpatialReferenceSupport",value:function(){return{constraints:null}}},{key:"_validateSpatialReference",value:function(e){return null!=this.getSpatialReferenceSupport(e)}},{key:"when",value:function(e,t){return this.isResolved()&&!this.ready&&M.Z.getLogger(this).warn("#when()","Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead."),(0,u.Z)((0,c.Z)(n.prototype),"when",this).call(this,e,t)}},{key:"forceReadyCycle",value:function(){var e=this;this.ready&&((0,S.when)((function(){return e.destroyed||!1===e.preconditionsReady}),(function(){return e._readyCycleForced=!1}),{once:!0}),this._readyCycleForced=!0)}},{key:"addAndActivateTool",value:function(e){this.toolViewManager.tools.add(e),this.activeTool=e}},{key:"tryFatalErrorRecovery",value:function(){this.fatalError=null}}]),n}(b.Z.EventedMixin((0,T.v)(y.default)));at.views=new g.Z,(0,p._)([(0,E.Cb)()],at.prototype,"_userSpatialReference",void 0),(0,p._)([(0,E.Cb)()],at.prototype,"activeTool",null),(0,p._)([(0,E.Cb)({readOnly:!0})],at.prototype,"allLayerViews",void 0),(0,p._)([(0,E.Cb)()],at.prototype,"groundView",void 0),(0,p._)([(0,E.Cb)()],at.prototype,"animation",null),(0,p._)([(0,E.Cb)()],at.prototype,"basemapView",void 0),(0,p._)([(0,E.Cb)()],at.prototype,"center",null),(0,p._)([(0,E.Cb)({readOnly:!0})],at.prototype,"_defaultsFromMapSettings",null),(0,p._)([(0,E.Cb)()],at.prototype,"defaultsFromMap",null),(0,p._)([(0,E.Cb)()],at.prototype,"fatalError",void 0),(0,p._)([(0,E.Cb)({type:V.Z})],at.prototype,"extent",null),(0,p._)([(0,E.Cb)((0,D.z)(O.J,"graphics"))],at.prototype,"graphics",void 0),(0,p._)([(0,E.Cb)((0,D.z)(z.J,"analyses"))],at.prototype,"analyses",void 0),(0,p._)([(0,E.Cb)({readOnly:!0,type:A.Z})],at.prototype,"heightModelInfo",null),(0,p._)([(0,E.Cb)({readOnly:!0})],at.prototype,"interacting",null),(0,p._)([(0,E.Cb)({readOnly:!0})],at.prototype,"navigating",null),(0,p._)([(0,E.Cb)({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_lockedSpatialReference","defaultsFromMap.ready","typeSpecificPreconditionsReady"]})],at.prototype,"preconditionsReady",null),(0,p._)([(0,E.Cb)({readOnly:!0})],at.prototype,"typeSpecificPreconditionsReady",void 0),(0,p._)([(0,E.Cb)({type:g.Z,readOnly:!0})],at.prototype,"layerViews",void 0),(0,p._)([(0,E.Cb)()],at.prototype,"resolution",null),(0,p._)([(0,E.Cb)({type:te})],at.prototype,"magnifier",void 0),(0,p._)([(0,E.Cb)({value:null,type:v.Z})],at.prototype,"map",null),(0,p._)([(0,E.Cb)()],at.prototype,"padding",void 0),(0,p._)([(0,E.Cb)({readOnly:!0})],at.prototype,"ready",void 0),(0,p._)([(0,E.Cb)({type:R.Z})],at.prototype,"spatialReference",null),(0,p._)([(0,E.Cb)()],at.prototype,"spatialReferenceWarningDelay",void 0),(0,p._)([(0,E.Cb)()],at.prototype,"stationary",null),(0,p._)([(0,E.Cb)({readOnly:!0})],at.prototype,"supportsGround",void 0),(0,p._)([(0,E.Cb)({type:f.Z})],at.prototype,"timeExtent",void 0),(0,p._)([(0,E.Cb)({type:String,nonNullable:!0})],at.prototype,"timeZone",null),(0,p._)([(0,E.Cb)()],at.prototype,"tools",null),(0,p._)([(0,E.Cb)()],at.prototype,"toolViewManager",void 0),(0,p._)([(0,E.Cb)({readOnly:!0})],at.prototype,"type",void 0),(0,p._)([(0,E.Cb)({type:Number})],at.prototype,"scale",void 0),(0,p._)([(0,E.Cb)({readOnly:!0})],at.prototype,"updating",void 0),(0,p._)([(0,E.Cb)({readOnly:!0})],at.prototype,"initialExtentRequired",void 0),(0,p._)([(0,E.Cb)({readOnly:!0})],at.prototype,"initialExtent",null),(0,p._)([(0,E.Cb)()],at.prototype,"cursor",null),(0,p._)([(0,E.Cb)({readOnly:!0})],at.prototype,"input",void 0),(0,p._)([(0,E.Cb)({type:Ge,nonNullable:!0})],at.prototype,"navigation",void 0),(0,p._)([(0,E.Cb)()],at.prototype,"layerViewManager",void 0),(0,p._)([(0,E.Cb)()],at.prototype,"analysisViewManager",void 0),(0,p._)([(0,E.Cb)()],at.prototype,"selectionManager",void 0),(0,p._)([(0,E.Cb)()],at.prototype,"width",void 0),(0,p._)([(0,E.Cb)()],at.prototype,"height",void 0),(0,p._)([(0,E.Cb)({readOnly:!0})],at.prototype,"resizing",void 0),(0,p._)([(0,E.Cb)({value:null,readOnly:!0})],at.prototype,"size",null),(0,p._)([(0,E.Cb)({readOnly:!0})],at.prototype,"suspended",void 0),(0,p._)([(0,E.Cb)({readOnly:!0})],at.prototype,"viewEvents",void 0),(0,p._)([(0,E.Cb)({readOnly:!0})],at.prototype,"persistableViewModels",void 0),(0,p._)([(0,E.Cb)()],at.prototype,"_isValid",void 0),(0,p._)([(0,E.Cb)()],at.prototype,"_readyCycleForced",void 0),(0,p._)([(0,E.Cb)()],at.prototype,"_lockedSpatialReference",void 0),(0,p._)([(0,E.Cb)()],at.prototype,"_userTimeZone",void 0),(0,p._)([(0,E.Cb)()],at.prototype,"_lockedTimeZone",void 0),(0,p._)([(0,E.Cb)({type:_e})],at.prototype,"theme",void 0),(0,p._)([(0,E.Cb)({readOnly:!0,type:_e})],at.prototype,"effectiveTheme",null);var st=at=it=(0,p._)([(0,I.j)("esri.views.View")],at);function lt(e){return e.layerViews}},9918:function(e,t,n){n.d(t,{Z:function(){return v}});var i=n(15671),r=n(43144),o=n(60136),a=n(29388),s=n(27366),l=n(10064),u=n(67426),c=n(66978),d=n(49861),h=(n(93169),n(32718),n(84936),n(69912)),p=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(e){var r;return(0,i.Z)(this,n),(r=t.call(this,e)).state="running",r.target=null,r._resolver=null,r}return(0,r.Z)(n,[{key:"initialize",value:function(){this._resolver=(0,c.hh)(),this.addResolvingPromise(this._resolver.promise)}},{key:"done",get:function(){return"finished"===this.state||"stopped"===this.state}},{key:"stop",value:function(){var e;"stopped"!==this.state&&"finished"!==this.state&&(this._set("state","stopped"),null===(e=this._resolver)||void 0===e||e.reject(new l.Z("ViewAnimation stopped")))}},{key:"finish",value:function(){var e;"stopped"!==this.state&&"finished"!==this.state&&(this._set("state","finished"),null===(e=this._resolver)||void 0===e||e.resolve())}},{key:"update",value:function(e,t){t||(t=(0,c.y8)(e)?"waiting-for-target":"running"),this._set("target",e),this._set("state",t)}}]),n}(u.D);(0,s._)([(0,d.Cb)({readOnly:!0})],p.prototype,"done",null),(0,s._)([(0,d.Cb)({readOnly:!0,type:String})],p.prototype,"state",void 0),(0,s._)([(0,d.Cb)()],p.prototype,"target",void 0),p=(0,s._)([(0,h.j)("esri.views.ViewAnimation")],p),(p||(p={})).State={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"};var v=p},64006:function(e,t,n){n.d(t,{FT:function(){return s},Jj:function(){return i},cZ:function(){return f},mE:function(){return r},q8:function(){return D},sl:function(){return k}});var i=function(e){return e*e},r=function(e){return 1-i(1-e)},o=function(e){return e*e*e},a=function(e){return 1-o(1-e)},s=function(e){return e<.5?o(2*e)/2:(a(2*(e-.5))+1)/2},l=function(e){return e*e*e*e},u=function(e){return 1-l(1-e)},c=function(e){return e*e*e*e*e},d=function(e){return 1-c(1-e)},h=function(e){return 1-Math.cos(e*Math.PI/2)},p=function(e){return 1-h(1-e)},v=function(e){return Math.pow(2,10*(e-1))},f=function(e){return 1-v(1-e)},y=function(e){return-(Math.sqrt(1-e*e)-1)},m=function(e){return 1-y(1-e)};function g(e){var t=2*(e-Math.sqrt((e-1)*e)),n=t/2/e;return function(i){return i<n?e*i*i:t*i-t+1}}function _(e,t){return function(n,i){return n<t?t*e(n/t,i):1-e((1-n)/(1-t),i)*(1-t)}}var w=_(g(1),1),b=_(g(1),0),k=_(g(1),.5),C=_(g(2),1),Z=_(g(2),0),M=_(g(2),.5),x=_(g(3),1),T=_(g(3),0),P=_(g(3),.5),S=_(g(4),1),E=_(g(4),0),I=_(g(4),.5),D={linear:function(e){return e},"in-quad":i,"out-quad":r,"in-out-quad":function(e){return e<.5?i(2*e)/2:(r(2*(e-.5))+1)/2},"in-coast-quad":w,"out-coast-quad":b,"in-out-coast-quad":k,"in-cubic":o,"out-cubic":a,"in-out-cubic":s,"in-coast-cubic":C,"out-coast-cubic":Z,"in-out-coast-cubic":M,"in-quart":l,"out-quart":u,"in-out-quart":function(e){return e<.5?l(2*e)/2:(u(2*(e-.5))+1)/2},"in-coast-quart":x,"out-coast-quart":T,"in-out-coast-quart":P,"in-quint":c,"out-quint":d,"in-out-quint":function(e){return e<.5?c(2*e)/2:(d(2*(e-.5))+1)/2},"in-coast-quint":S,"out-coast-quint":E,"in-out-coast-quint":I,"in-sine":h,"out-sine":p,"in-out-sine":function(e){return e<.5?h(2*e)/2:(p(2*(e-.5))+1)/2},"in-expo":v,"out-expo":f,"in-out-expo":function(e){return e<.5?v(2*e)/2:(f(2*(e-.5))+1)/2},"in-circ":y,"out-circ":m,"in-out-circ":function(e){return e<.5?y(2*e)/2:(m(2*(e-.5))+1)/2}}},90973:function(e,t,n){n.d(t,{f:function(){return V}});var i=n(15671),r=n(43144),o=n(38499),a=n(64006),s=n(24204),l=(0,r.Z)((function e(){(0,i.Z)(this,e),this.pan=0,this.rotate=0,this.fov=0,this.sourceZoom=0,this.targetZoom=0})),u=n(20069),c=function(){function e(t){(0,i.Z)(this,e),this._createCamera=t,this.compared=new l,this.segmentStart=0,this.segmentEnd=1,this.settings={desiredScreenFlow:u.h.desiredScreenFlow},this.source=t(),this.target=t()}return(0,r.Z)(e,[{key:"clone",value:function(){var t=new e(this._createCamera);return t.copyFrom(this),t}},{key:"copyFrom",value:function(e){this.update(e.source,e.target,e.settings)}},{key:"update",value:function(e,t,n){this.source!==e&&this.source.copyFrom(e),this.target!==t&&this.target.copyFrom(t),this.source.compareTo(this.target,this.compared),this.settings.desiredScreenFlow=null!=n.desiredScreenFlow?n.desiredScreenFlow:u.h.desiredScreenFlow,this.desiredPixelFlow=this.settings.desiredScreenFlow*this.target.size,this.halfWindowSize=this.target.size/2}},{key:"halfWindowPanAtZoom",value:function(e){var t=this.target.pixelsPerPanAtZoom(e);return this.halfWindowSize/t}},{key:"hasZoom",get:function(){return Math.abs(this.compared.sourceZoom-this.compared.targetZoom)>1e-5}},{key:"hasPan",get:function(){return this.compared.pan>(0,s.bn)()}},{key:"hasFov",get:function(){return Math.abs(this.compared.fov)>(0,s.bn)()}},{key:"hasRotate",get:function(){return this.compared.rotate>(0,s.bn)()}}]),e}(),d=(0,r.Z)((function e(){(0,i.Z)(this,e),this.pan=0,this.rotate=0,this.zoom=0,this.fov=0,this.zoomOffset=0})),h=n(29439),p=n(60136),v=n(29388),f=function(){function e(){(0,i.Z)(this,e),this.segments=new Array}return(0,r.Z)(e,[{key:"time",get:function(){return this.segments.reduce((function(e,t){return(0,o._H)(e+t.time)}),(0,o._H)(0))}},{key:"interpolateComponentsAt",value:function(e,t){e=Math.min(Math.max(e,0),1),e*=this.time;for(var n=0,i=0,r=this.definition,o=this.segments.reduce((function(e,t){return e||t.definition.hasZoom}),!1),a=0;a<this.segments.length;a++){var s=this.segments[a],l=s.definition;if(e<=s.time||a===this.segments.length-1){if(this.segmentInterpolateComponentsAt(s,0===s.time?0:e/s.time,t),r.hasPan&&!isNaN(t.pan)&&isFinite(r.compared.pan)?t.pan=(n+l.compared.pan*t.pan)/r.compared.pan:t.pan=1,r.hasRotate&&!isNaN(t.rotate)&&isFinite(r.compared.rotate)?t.rotate=(i+l.compared.rotate*t.rotate)/r.compared.rotate:t.rotate=1,o&&!isNaN(t.zoom)&&isFinite(l.compared.targetZoom)){var u=l.compared,c=u.sourceZoom,d=u.targetZoom,h=t.zoom*(d-c)+c,p=this.segments[0].definition.compared.sourceZoom,v=this.segments[this.segments.length-1].definition.compared.targetZoom,f=Math.abs(d-p)>Math.abs(c-p)?d:c;t.zoomOffset=f-v,t.zoom=(h-p)/(f-p)}else t.zoom=1;return t}e-=s.time,n+=l.compared.pan,i+=l.compared.rotate}}},{key:"segmentInterpolateComponentsAt",value:function(e,t,n){e.interpolateComponentsAt(t,n)}}]),e}(),y=n(16889),m=function(){function e(t){(0,i.Z)(this,e),t&&this.update(t)}return(0,r.Z)(e,[{key:"time",get:function(){return this._time}},{key:"update",value:function(e){e&&(this.definition?this.definition.copyFrom(e):this.definition=e.clone()),this._updatePrecomputedVariables(),this._updatePixelFlow()}},{key:"_updatePrecomputedVariables",value:function(){var e=this.definition,t=e.compared,n=t.sourceZoom,i=t.targetZoom;this._zoomSign=n>i?1:-1,this._panPixelsAtSource=t.pan*e.source.pixelsPerPanAtZoom(n);var r=(e.source.pixelsPerRotateAtZoom(n)+e.target.pixelsPerRotateAtZoom(i))/2;this._rotatePixels=t.rotate*r}},{key:"_updatePixelFlow",value:function(){var e,t,n,i,r=this.definition.compared.sourceZoom,a=this.definition.compared.targetZoom,s=this.definition,l=s.hasZoom,u=s.hasPan,c=s.hasRotate,d=0,h=0;l&&(u&&(d=(a/r-1)/(-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2*this._panPixelsAtSource)),c&&(h=this._zoomSign*(Math.log(r/a)/Math.LN2)*this.definition.halfWindowSize/this._rotatePixels)),this._zoomPixelFlow=0,this._panPixelFlow=0,this._rotatePixelFlow=0;var p=this.definition.desiredPixelFlow;if(l&&u&&c){var v=d+h+d*h;this._zoomPixelFlow=d*h/v*p,this._panPixelFlow=h/v*p,this._rotatePixelFlow=d/v*p}else if(l&&u){var f=1+d;this._zoomPixelFlow=d/f*p,this._panPixelFlow=1/f*p}else if(l&&c){var y=1+h;this._zoomPixelFlow=h/y*p,this._rotatePixelFlow=1/y*p}else if(u&&c){var m=this._panPixelsAtSource/this._rotatePixels,g=1+m;this._panPixelFlow=m/g*p,this._rotatePixelFlow=1/g*p}else u?this._panPixelFlow=p:l?this._zoomPixelFlow=p:c&&(this._rotatePixelFlow=p);this._time=null!==(e=null!==(t=null!==(n=null!==(i=this.rotateTime)&&void 0!==i?i:this.zoomTime)&&void 0!==n?n:this.panTime)&&void 0!==t?t:this.fovTime)&&void 0!==e?e:(0,o._H)(0)}},{key:"rotateTime",get:function(){return this.definition.hasRotate?(0,o._H)(this._rotatePixels/this._rotatePixelFlow):null}},{key:"zoomTime",get:function(){return this.definition.hasZoom?(0,o._H)(this._zoomSign*(Math.log(this.definition.compared.sourceZoom/this.definition.compared.targetZoom)/Math.LN2)*this.definition.halfWindowSize/this._zoomPixelFlow):null}},{key:"fovTime",get:function(){return this.definition.hasFov?(0,o._H)(Math.abs(this.definition.compared.fov)/g):null}},{key:"panTime",get:function(){if(this.definition.hasPan){if(this.definition.hasZoom){var e=-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2,t=e*this._panPixelsAtSource;return(0,o._H)(Math.log(t*(this._zoomPixelFlow/this._panPixelFlow)+1)/(e*this._zoomPixelFlow))}return(0,o._H)(this._panPixelsAtSource/this._panPixelFlow)}}},{key:"_interpolateComponentsZoom",value:function(e){if(0===e||1===e)return e;if(this.definition.hasZoom){var t=this.definition.compared.sourceZoom,n=this.definition.compared.targetZoom;return(t*Math.pow(t/n,-e)-t)/(n-t)}return e}},{key:"_interpolateComponentsFov",value:function(e){if(0===e)return this.definition.segmentStart;if(1===e)return this.definition.segmentEnd;if(this.definition.hasFov){var t=this.definition,n=t.segmentStart;return n+e*(t.segmentEnd-n)}return this.definition.segmentStart}},{key:"_interpolateComponentsPan",value:function(e){if(0===e||1===e)return e;if(this.definition.hasPan&&this.definition.hasZoom){var t=-1/(this._zoomSign*this.definition.halfWindowSize)*this._zoomPixelFlow;return 1/this._panPixelsAtSource*(this._panPixelFlow*(Math.pow(2,t*e*this._time)-1))/(t*Math.LN2)}return e}},{key:"_interpolateComponentsRotate",value:function(e){return e}},{key:"interpolateComponentsAt",value:function(e,t){e=Math.min(Math.max(e,0),1),t.zoom=this._interpolateComponentsZoom(e),t.pan=this._interpolateComponentsPan(e),t.rotate=this._interpolateComponentsRotate(e),t.zoomOffset=0,t.fov=this._interpolateComponentsFov(e)}}]),e}(),g=(0,y.Vl)(90);function _(e,t,n){var i=t-e.compared.sourceZoom,r=e.halfWindowPanAtZoom(i);return-e.halfWindowSize*(n.ascensionFactor*Math.LN2*e.compared.pan+r)*Math.log(e.compared.sourceZoom/t)/(e.desiredPixelFlow*Math.LN2*r)}function w(e,t,n){var i=1/t,r=Math.log(e.compared.sourceZoom*i),o=1/e.desiredPixelFlow,a=1/Math.LN2,s=t-e.compared.sourceZoom,l=1/s,u=(n.ascensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(s))/e.halfWindowPanAtZoom(1);return e.halfWindowSize*i*o*a*l*u-e.halfWindowSize*r*o*a*l+e.halfWindowSize*r*o*a*u/(s*s)}function b(e,t,n){var i=t-e.compared.sourceZoom,r=1/i,o=1/t,a=Math.log(e.compared.sourceZoom*o),s=(n.ascensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(i))/e.halfWindowPanAtZoom(1);return e.halfWindowSize*r*(-2*r*o*s+2*r*a+2*o-2*a*s/(i*i)-s/(t*t))/(e.desiredPixelFlow*Math.LN2)}function k(e,t){return-e.halfWindowSize*Math.log(e.compared.sourceZoom/t)/(e.desiredPixelFlow*Math.LN2)}function C(e,t){return e.halfWindowSize/(t*e.desiredPixelFlow*Math.LN2)}function Z(e,t){return-e.halfWindowSize/(t*t*e.desiredPixelFlow*Math.LN2)}function M(e,t,n){return e.halfWindowSize*(-e.halfWindowPanAtZoom(t)-n.descensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(e.compared.targetZoom))*Math.log(t/e.compared.targetZoom)/(e.desiredPixelFlow*Math.LN2*e.halfWindowPanAtZoom(-t+e.compared.targetZoom))}function x(e,t,n){var i=Math.log(t/e.compared.targetZoom),r=1/e.desiredPixelFlow,o=1/Math.LN2,a=-t+e.compared.targetZoom,s=1/a,l=(-e.halfWindowPanAtZoom(t)-n.descensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(e.compared.targetZoom))/e.halfWindowPanAtZoom(1);return-e.halfWindowSize*i*r*o*s+e.halfWindowSize*i*r*o*l/(a*a)+e.halfWindowSize*r*o*s*l/t}function T(e,t,n){var i=t-e.compared.targetZoom,r=1/i,o=1/t,a=Math.log(t/e.compared.targetZoom),s=(e.halfWindowPanAtZoom(t)+n.descensionFactor*Math.LN2*e.compared.pan-e.halfWindowPanAtZoom(e.compared.targetZoom))/e.halfWindowPanAtZoom(1);return e.halfWindowSize*r*(-2*r*o*s-2*r*a+2*o+2*a*s/(i*i)-s/(t*t))/(e.desiredPixelFlow*Math.LN2)}function P(e,t){return e.halfWindowSize*Math.log(t/e.compared.targetZoom)/(e.desiredPixelFlow*Math.LN2)}function S(e,t){return e.halfWindowSize/(t*e.desiredPixelFlow*Math.LN2)}function E(e,t){return-e.halfWindowSize/(t*t*e.desiredPixelFlow*Math.LN2)}function I(e,t){var n,i=function(e,t){var n=Math.max(e.compared.sourceZoom,e.compared.targetZoom),i=e.source.zoomAtPixelsPerPan(e.desiredPixelFlow/e.compared.pan)/2;return i<n?null!=t.maximumDistance?n+(t.maximumDistance-n)/2:1.5*n:t.maximumDistance?Math.min(t.maximumDistance,i):i}(e,t),r={ascensionFactor:null!=t.ascensionFactor?t.ascensionFactor:.5,descensionFactor:null!=t.descensionFactor?t.descensionFactor:.5},o=0===r.ascensionFactor,a=0===r.descensionFactor,s=o?k:_,l=o?C:w,u=o?Z:b,c=a?P:M,d=a?S:x,h=a?E:T,p=function(t){return s(e,t,r)+function(e,t,n){return-e.compared.pan*e.halfWindowSize*(n.ascensionFactor+n.descensionFactor-1)/(e.desiredPixelFlow*e.halfWindowPanAtZoom(t))}(e,t,r)+c(e,t,r)},v=function(t){return l(e,t,r)+function(e,t,n){return e.compared.pan*e.halfWindowSize*(n.ascensionFactor+n.descensionFactor-1)/(e.desiredPixelFlow*e.halfWindowPanAtZoom(t*t))}(e,t,r)+d(e,t,r)},f=function(t){return u(e,t,r)+function(e,t,n){return-2*e.compared.pan*e.halfWindowSize*(n.ascensionFactor+n.descensionFactor-1)/(e.desiredPixelFlow*e.halfWindowPanAtZoom(t*t*t))}(e,t,r)+h(e,t,r)},y=p(i),m=function(e){var t=e.compared.sourceZoom-e.compared.targetZoom;if(0===t)return e.compared.pan*e.halfWindowSize/(e.desiredPixelFlow*e.halfWindowPanAtZoom(e.compared.sourceZoom));var n=Math.LN2*e.compared.pan,i=t,r=e.halfWindowPanAtZoom(i),o=e.halfWindowSize*Math.log(e.compared.sourceZoom/e.compared.targetZoom)/(e.desiredPixelFlow*Math.LN2*r);return e.compared.sourceZoom<=e.compared.targetZoom?o*(n-r):o*(n+r)}(e),g=t.maximumIterations||20,I=null!=t.maximumDistance?t.maximumDistance:1/0;for(n=0;n<g;n++){var D,L=null!==(D=t.desiredSlope)&&void 0!==D?D:1e-6,V=v(i);Math.abs(V)>L&&(V+=L);var A=V/f(i);if(isNaN(A)||i>=I&&A<0){if(!isFinite(I))return null;y=p(i=I);break}if((i-=A)<e.compared.sourceZoom||i<e.compared.targetZoom)return null;var R=p(i);if(Math.abs(R-y)/y<=.005)break;y=R}return y>.7*m||i<e.compared.sourceZoom||i<e.compared.targetZoom?null:i}var D=function(e){(0,p.Z)(n,e);var t=(0,v.Z)(n);function n(e,r){var o;return(0,i.Z)(this,n),(o=t.call(this))._preallocSegments=[new m,new m,new m],o._ascensionSegment=null,o._descensionSegment=null,o.update(e,r),o}return(0,r.Z)(n,[{key:"update",value:function(e,t){if(e){this.definition?this.definition.copyFrom(e):this.definition=e.clone();var n=null!==t&&void 0!==t&&t.apex?I(e,t.apex):null;this.segments.length=0,this._ascensionSegment=null,this._descensionSegment=null,n?this._updateWithApex(n,null===t||void 0===t?void 0:t.apex):this._updateWithoutApex()}}},{key:"segmentInterpolateComponentsAt",value:function(e,t,n){e.interpolateComponentsAt(t,n),e===this._ascensionSegment?n.zoom=(0,a.mE)(n.zoom):e===this._descensionSegment&&(n.zoom=(0,a.Jj)(n.zoom))}},{key:"_updateWithApex",value:function(e,t){var n,i=(0,h.Z)(this._preallocSegments,3),r=i[0],o=i[1],a=i[2],s=null!==(n=null===t||void 0===t?void 0:t.ascensionFactor)&&void 0!==n?n:.5,l=Math.min(1-s,null!=(null===t||void 0===t?void 0:t.ascensionFactor)&&null!=t.descensionFactor?t.descensionFactor:.5),u=1-s-l;r.definition?r.definition.copyFrom(this.definition):r.definition=this.definition.clone(),r.definition.compared.targetZoom=e,r.definition.compared.pan=this.definition.compared.pan*s,r.definition.compared.rotate=this.definition.compared.rotate*s,r.definition.segmentEnd=s,r.update(),this._ascensionSegment=r,this.segments.push(r),u>0&&(o.definition?o.definition.copyFrom(this.definition):o.definition=this.definition.clone(),o.definition.copyFrom(this.definition),o.definition.compared.sourceZoom=e,o.definition.compared.targetZoom=e,o.definition.compared.pan=this.definition.compared.pan*u,o.definition.compared.rotate=this.definition.compared.rotate*u,o.definition.segmentStart=r.definition.segmentEnd,o.definition.segmentEnd=r.definition.segmentEnd+u,o.update(),this.segments.push(o)),a.definition?a.definition.copyFrom(this.definition):a.definition=this.definition.clone(),a.definition.compared.sourceZoom=e,a.definition.compared.pan=this.definition.compared.pan*l,a.definition.compared.rotate=this.definition.compared.rotate*l,a.definition.segmentStart=s+u,a.update(),this._descensionSegment=a,this.segments.push(a)}},{key:"_updateWithoutApex",value:function(){var e=(0,h.Z)(this._preallocSegments,1)[0];e.update(this.definition),this.segments.push(e)}}]),n}(f),L=new d,V=function(){function e(t){(0,i.Z)(this,e),this._time=(0,o.HA)(0),this._easing=a.sl,this.definition=new c(t),this.path=new D}return(0,r.Z)(e,[{key:"time",get:function(){return this._time}},{key:"isLinear",get:function(){return 1===this.path.segments.length}},{key:"update",value:function(e,t,n){var i;this.definition.update(e,t,n),this.path.update(this.definition,n),this._time=this._applyTimeSettings((0,o.up)(isFinite(this.path.time)?this.path.time:(0,o._H)(0)),n),this._easing=null!==(i=n.easing)&&void 0!==i?i:this._time>=1e3?a.sl:a.cZ}},{key:"cameraAt",value:function(e,t){e=Math.min(Math.max(0,e),1),e=this._normalizedEasing(e);var n=this.path.interpolateComponentsAt(e,L);t.interpolate(this.definition.source,this.definition.target,n)}},{key:"_normalizedEasing",value:function(e){var t=this._easing(0,this._time),n=this._easing(1,this._time);return(this._easing(e,this._time)-t)/(n-t)}},{key:"_applyTimeSettings",value:function(e,t){var n,i,r=null!=t.speedFactor?t.speedFactor:1,a=null!==(n=t.minDuration)&&void 0!==n?n:u.h.minDuration/r,s=null!==(i=t.maxDuration)&&void 0!==i?i:u.h.maxDuration/r;return null!=t.duration?t.duration:(0,o.HA)(Math.min(Math.max(e/r,a),s))}}]),e}()},20069:function(e,t,n){n.d(t,{O:function(){return a},h:function(){return o}});var i=n(1413),r=n(38499),o={desiredScreenFlow:2,minDuration:(0,r.HA)(500),maxDuration:(0,r.HA)(8e3)},a=(0,i.Z)((0,i.Z)({},o),{},{maxDuration:(0,r.HA)(4e3)})},31822:function(e,t,n){n.d(t,{z:function(){return w}});var i=n(15671),r=n(43144),o=n(93169),a=n(92026),s=n(99346),l=n(5977);function u(e){var t=e.native;return t?{buttons:t.buttons.map((function(e){return e.pressed?e.value||1:0})),axes:t.axes.map((function(t){return function(e,t){var n=Math.abs(e);return n<t?0:Math.sign(e)*(n-t)/(1-t)}(t,e.axisThreshold)}))}:{buttons:[],axes:[]}}var c=function(){function e(t,n){var r=this;(0,i.Z)(this,e),this._element=t,this._input=n,this._hasEventListeners=!1,this._onConnectGamepad=function(e){r._connectGamepad(e.gamepad)},this._onDisconnectGamepad=function(e){var t=e.gamepad,n=t.index,i=r._inputDevices[n];i&&(r._emitGamepadEvent(t,u(i),!1),r._inputDevices.splice(n,1),r._latestUpdate.splice(n,1),r._input.gamepad.devices.remove(i),r.ensurePollingState())},this._frameTask=null,this._latestUpdate=new Array,this._inputDevices=new Array,this._callback=null;var o="getGamepads"in window.navigator,a=window.isSecureContext;this.supported=o&&a,this.supported&&(h((function(e){return r._connectGamepad(e)})),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState())}return(0,r.Z)(e,[{key:"destroy",value:function(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}},{key:"hasEventListeners",set:function(e){this._hasEventListeners!==e&&(this._hasEventListeners=e,this.ensurePollingState())}},{key:"_eventsEnabled",get:function(){return this.supported&&this._inputDevices.length>0&&this._hasEventListeners}},{key:"onEvent",set:function(e){this._callback=e}},{key:"_connectGamepad",value:function(e){var t=new l.Z(e);"unknown"!==t.deviceType&&(this._inputDevices[e.index]=t,this._input.gamepad.devices.add(t)),this.ensurePollingState()}},{key:"ensurePollingState",value:function(){this._eventsEnabled?this._startPolling():this._stopPolling()}},{key:"_startPolling",value:function(){var e=this;null==this._frameTask&&(this._frameTask=(0,s.A)({update:function(){return e._readGamepadState()}}))}},{key:"_stopPolling",value:function(){null!=this._frameTask&&(this._frameTask.remove(),this._frameTask=null,this._latestUpdate=new Array)}},{key:"_readGamepadState",value:function(){var e=this,t=document.hasFocus(),n=this._element.contains(document.activeElement),i="document"===this._input.gamepad.enabledFocusMode&&!t||"view"===this._input.gamepad.enabledFocusMode&&!n;h((function(t){var n=e._inputDevices[t.index];if(n){var r=e._latestUpdate[t.index],o=u(n),a=i||function(e){for(var t=0;t<e.axes.length;t++)if(0!==e.axes[t])return!1;for(var n=0;n<e.buttons.length;n++)if(0!==e.buttons[n])return!1;return!0}(o);if(r){if(r.timestamp===t.timestamp)return;if(!r.active&&a)return;if(function(e,t){if(e.axes.length!==t.axes.length)return!1;if(e.buttons.length!==t.buttons.length)return!1;for(var n=0;n<e.axes.length;n++)if(e.axes[n]!==t.axes[n])return!1;for(var i=0;i<e.buttons.length;i++)if(e.buttons[i]!==t.buttons[i])return!1;return!0}(r.state,o))return}e._emitGamepadEvent(t,o,!a)}}))}},{key:"_emitGamepadEvent",value:function(e,t,n){var i=this._latestUpdate[e.index],r=i&&i.active;if(r||n){var o=!r&&n?"start":r&&n?"update":"end";this._latestUpdate[e.index]={timestamp:e.timestamp,state:t,active:n},this._callback&&this._callback({device:this._inputDevices[e.index],state:t,action:o})}}}]),e}();function d(e){if(!e)return!1;if(!e.connected)return!1;for(var t=0;t<e.axes.length;t++)if(isNaN(e.axes[t]))return!1;return!0}function h(e){for(var t=window.navigator.getGamepads(),n=0;n<t.length;n++){var i=t[n];d(i)&&e(i)}}var p=n(72612),v=(0,o.Z)("edge"),f=(0,o.Z)("chrome"),y=(0,o.Z)("ff"),m=(0,o.Z)("safari"),g="esri-view-surface",_={touchNone:"".concat(g,"--touch-none"),touchPan:"".concat(g,"--touch-pan")},w=function(){function e(t,n){var r=this;(0,i.Z)(this,e),this._input=n,this._active={},this._callback=function(){},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=t,t.getAttribute("tabindex")||t.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new c(t,this._input),this._gamepadSource.onEvent=function(e){return r._callback("gamepad",e)}}return(0,r.Z)(e,[{key:"destroy",value:function(){var e=this;this._callback=function(){},this.activeEvents=null,this._activePointerCaptures.forEach((function(t){e._releasePointerCaptureSafe(t)})),this._gamepadSource=(0,a.SC)(this._gamepadSource),this._activePointerCaptures=null,this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}},{key:"browserTouchPanningEnabled",get:function(){return this._browserTouchPanningEnabled},set:function(e){this._browserTouchPanningEnabled=e,this._updateTouchAction(),this._updateTouchEventHandling()}},{key:"onEventReceived",set:function(e){this._callback=e}},{key:"activeEvents",set:function(e){var t,n=this;for(var i in this._active)if(!e||!e.has(i)){var r=this._active[i];this._element.removeEventListener(b[i],r),delete this._active[i]}e&&e.forEach((function(e){if(!n._active[e]&&b[e]){var t=(n._eventHandlers[e]||n._handleDefault).bind(n,e);n._element.addEventListener(b[e],t),n._active[e]=t}})),this._gamepadSource.hasEventListeners=null!==(t=null===e||void 0===e?void 0:e.has("gamepad"))&&void 0!==t&&t}},{key:"setPointerCapture",value:function(e,t){t?this._setPointerCatpureSafe(e.pointerId):(this._releasePointerCaptureSafe(e.pointerId),this._activePointerCaptures.delete(e.pointerId))}},{key:"_updateTouchAction",value:function(){this._element.classList.remove(this._browserTouchPanningEnabled?_.touchNone:_.touchPan),this._element.classList.add(this._browserTouchPanningEnabled?_.touchPan:_.touchNone)}},{key:"_updateTouchEventHandling",value:function(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}},{key:"_removeTouchAction",value:function(){this._element.classList.remove(_.touchNone),this._element.classList.remove(_.touchPan),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}},{key:"_setPointerCatpureSafe",value:function(e){try{this._element.setPointerCapture(e),this._activePointerCaptures.add(e)}catch(t){}}},{key:"_releasePointerCaptureSafe",value:function(e){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(e))return;this._element.releasePointerCapture(e)}catch(t){}}},{key:"_updateNormalizedPointerLikeEvent",value:function(t,n){var i=(0,p.Eu)(this._element,t);return e.test.disableSubpixelCoordinates&&(i.x=Math.round(i.x),i.y=Math.round(i.y)),n.x=i.x,n.y=i.y,n}},{key:"_handleKey",value:function(e,t){var n=t.key;n&&"key-up"===e&&this._keyDownState.delete(n);var i={native:t,key:n,repeat:!!n&&this._keyDownState.has(n)};n&&"key-down"===e&&this._keyDownState.add(i.key),this._callback(e,i)}},{key:"_handlePointer",value:function(e,t){var n=this._updateNormalizedPointerLikeEvent(t,{native:t,x:0,y:0,pointerType:t.pointerType,button:t.button,buttons:t.buttons,eventId:this._eventId++});this._callback(e,n)}},{key:"_handlePointerPreventDefault",value:function(e,t){var n=this._updateNormalizedPointerLikeEvent(t,{native:t,x:0,y:0,pointerType:t.pointerType,button:t.button,buttons:t.buttons,eventId:this._eventId++});t.preventDefault(),this._callback(e,n)}},{key:"_handleMouseWheel",value:function(e,t){var n=t.deltaY;switch(t.deltaMode){case 0:v&&(n=n/document.documentElement.clientHeight*600);break;case 1:n*=30;break;case 2:n*=900}v?n*=.7:f||m?n*=.6:y&&(n*=1.375);var i=Math.abs(n);if(i>100){n=n/i*200/(1+Math.exp(-.02*(i-100)))}var r=this._updateNormalizedPointerLikeEvent(t,{native:t,x:0,y:0,deltaY:n});this._callback(e,r)}},{key:"_handlePointerCaptureLost",value:function(e,t){this._activePointerCaptures.delete(t.pointerId),this._handleDefault(e,t)}},{key:"_handleDefault",value:function(e,t){var n={native:t};t.preventDefault(),this._callback(e,n)}},{key:"_preventAltKeyDefault",value:function(e){"Alt"===e.key&&e.preventDefault()}},{key:"_preventMultiTouchPanning",value:function(e){e.touches.length>1&&e.preventDefault()}}]),e}();w.test={disableSubpixelCoordinates:!1};var b={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"}},43308:function(e,t,n){n.d(t,{H:function(){return o}});var i=n(15671),r=n(43144),o=function(){function e(t){(0,i.Z)(this,e),this._callbacks=t,this._currentCount=0,this._callbacks.condition||(this._callbacks.condition=function(){return!0})}return(0,r.Z)(e,[{key:"handle",value:function(e){var t=e.data,n=t.pointers.size;switch(t.action){case"start":this._currentCount=n,this._emitStart(e);break;case"added":this._emitEnd(this._previousEvent),this._currentCount=n,this._emitStart(e);break;case"update":this._emitUpdate(e);break;case"removed":this._startEvent&&this._emitEnd(this._previousEvent),this._currentCount=n,this._emitStart(e);break;case"end":this._emitEnd(e),this._currentCount=0}this._previousEvent=e}},{key:"_emitStart",value:function(e){var t,n;this._startEvent=e,(null===(t=(n=this._callbacks).condition)||void 0===t?void 0:t.call(n,this._currentCount,e))&&this._callbacks.start(this._currentCount,e,this._startEvent)}},{key:"_emitUpdate",value:function(e){var t,n;(null===(t=(n=this._callbacks).condition)||void 0===t?void 0:t.call(n,this._currentCount,e))&&this._callbacks.update(this._currentCount,e,this._startEvent)}},{key:"_emitEnd",value:function(e){var t,n;null!==(t=(n=this._callbacks).condition)&&void 0!==t&&t.call(n,this._currentCount,e)&&this._callbacks.end(this._currentCount,e,this._startEvent),this._startEvent=null}}]),e}()},63920:function(e,t,n){var i;n.d(t,{t:function(){return i}}),function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right"}(i||(i={}))},84057:function(e,t,n){n.d(t,{CE:function(){return y},uS:function(){return p}});var i=n(60136),r=n(29388),o=n(15671),a=n(43144),s=n(37762),l=(n(93169),n(42537)),u=n(16889),c=n(17842),d=n(45371),h=n(1614),p=(n(63920),["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"]),v={};function f(e){return!!v[e]}p.forEach((function(e){v[e]=!0}));var y=function(){function e(t){(0,o.Z)(this,e),this._handlers=new Map,this._counter=0,this._handlerCounts=new Map,this.view=t,this.inputManager=null}return(0,a.Z)(e,[{key:"connect",value:function(e){var t=this;e&&this.disconnect(),this.inputManager=e,this._handlers.forEach((function(e,n){var i,r=e.handler,o=e.priority;return null===(i=t.inputManager)||void 0===i?void 0:i.installHandlers(n,[r],o)}))}},{key:"disconnect",value:function(){var e=this;this.inputManager&&this._handlers.forEach((function(t,n){var i;return null===(i=e.inputManager)||void 0===i?void 0:i.uninstallHandlers(n)})),this.inputManager=null}},{key:"destroy",value:function(){this.disconnect(),this._handlers.clear(),this.view=null}},{key:"on",value:function(e,t,n,i){var r,o,a=this,u=Array.isArray(e)?e:e.split(",");if(!function(e){var t,n=(0,s.Z)(e);try{for(n.s();!(t=n.n()).done;)if(!f(t.value))return!1}catch(i){n.e(i)}finally{n.f()}return!0}(u))return u.some(f)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;Array.isArray(t)?o=t:(r=t,o=[]),"function"==typeof n?r=n:i=n,i=null!=i?i:h.f.DEFAULT;var c=this._createUniqueGroupName(),d=new m(this.view,u,o,r);this._handlers.set(c,{handler:d,priority:i});var p,v=(0,s.Z)(u);try{for(v.s();!(p=v.n()).done;){var y=p.value,g=this._handlerCounts.get(y)||0;this._handlerCounts.set(y,g+1)}}catch(_){v.e(_)}finally{v.f()}return this.inputManager&&this.inputManager.installHandlers(c,[d],i),(0,l.kB)((function(){return a._removeHandler(c,u)}))}},{key:"hasHandler",value:function(e){return!!this._handlerCounts.get(e)}},{key:"_removeHandler",value:function(e,t){if(this._handlers.has(e)){this._handlers.delete(e);var n,i=(0,s.Z)(t);try{for(i.s();!(n=i.n()).done;){var r=n.value,o=this._handlerCounts.get(r);void 0===o||(1===o?this._handlerCounts.delete(r):this._handlerCounts.set(r,o-1))}}catch(a){i.e(a)}finally{i.f()}}this.inputManager&&this.inputManager.uninstallHandlers(e)}},{key:"_createUniqueGroupName",value:function(){return this._counter+=1,"viewEvents_".concat(this._counter)}}]),e}(),m=function(e){(0,i.Z)(n,e);var t=(0,r.Z)(n);function n(e,i,r,a){var l;(0,o.Z)(this,n),(l=t.call(this,!0))._latestDragStart=void 0,l.view=e;var u,c=(0,s.Z)(i);try{for(c.s();!(u=c.n()).done;){switch(u.value){case"click":l.registerIncoming("click",r,(function(t){return a(w(e,t))}));break;case"double-click":l.registerIncoming("double-click",r,(function(t){return a(b(e,t))}));break;case"immediate-click":l.registerIncoming("immediate-click",r,(function(t){return a(k(e,t))}));break;case"immediate-double-click":l.registerIncoming("immediate-double-click",r,(function(t){return a(C(e,t))}));break;case"hold":l.registerIncoming("hold",r,(function(t){return a(Z(e,t))}));break;case"drag":l.registerIncoming("drag",r,(function(e){var t=l._wrapDrag(e);t&&a(t)}));break;case"key-down":l.registerIncoming("key-down",r,(function(e){return a(x(e))}));break;case"key-up":l.registerIncoming("key-up",r,(function(e){return a(T(e))}));break;case"pointer-down":l.registerIncoming("pointer-down",r,(function(e){return a(P(e,"pointer-down"))}));break;case"pointer-move":l.registerIncoming("pointer-move",r,(function(e){return a(P(e,"pointer-move"))}));break;case"pointer-up":l.registerIncoming("pointer-up",r,(function(e){return a(P(e,"pointer-up"))}));break;case"pointer-drag":l.registerIncoming("pointer-drag",r,(function(e){return a(S(e))}));break;case"mouse-wheel":l.registerIncoming("mouse-wheel",r,(function(e){return a(E(e))}));break;case"pointer-enter":l.registerIncoming("pointer-enter",r,(function(e){return a(P(e,"pointer-enter"))}));break;case"pointer-leave":l.registerIncoming("pointer-leave",r,(function(e){return a(P(e,"pointer-leave"))}));break;case"gamepad":l.registerIncoming("gamepad",r,(function(e){a(I(e))}));break;case"focus":l.registerIncoming("focus",r,(function(e){a(g(e))}));break;case"blur":l.registerIncoming("blur",r,(function(e){a(_(e))}))}}}catch(d){c.e(d)}finally{c.f()}return l}return(0,a.Z)(n,[{key:"_wrapDrag",value:function(e){var t=e.data,n=t.center,i=n.x,r=n.y,o=t.action,a=t.pointerType,s=t.button;if("start"===o&&(this._latestDragStart=t),this._latestDragStart){var l=t.pointer.native,c=t.buttons,d=e.cancelable,h=e.timestamp,p={x:this._latestDragStart.center.x,y:this._latestDragStart.center.y};return"end"===o&&(this._latestDragStart=void 0),{type:"drag",action:o,x:i,y:r,origin:p,pointerType:a,button:s,buttons:c,radius:t.radius,angle:(0,u.BV)(t.angle),native:l,timestamp:h,cancelable:d,stopPropagation:function(){return e.stopPropagation()},async:function(t){return e.async(t)},preventDefault:function(){return e.preventDefault()}}}}}]),n}(d.a);function g(e){return{type:"focus",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:function(){return e.stopPropagation()},async:function(t){return e.async(t)},preventDefault:function(){return e.preventDefault()}}}function _(e){return{type:"blur",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:function(){return e.stopPropagation()},async:function(t){return e.async(t)},preventDefault:function(){return e.preventDefault()}}}function w(e,t){var n=t.data,i=n.pointerType,r=n.button,o=n.buttons,a=n.x,s=n.y,l=n.native,u=n.eventId,d=t.cancelable;return{type:"click",pointerType:i,button:r,buttons:o,x:a,y:s,native:l,timestamp:t.timestamp,screenPoint:(0,c.vW)(a,s),mapPoint:M(e,a,s),eventId:u,cancelable:d,stopPropagation:function(){return t.stopPropagation()},async:function(e){return t.async(e)},preventDefault:function(){return t.preventDefault()}}}function b(e,t){var n=t.data,i=n.pointerType,r=n.button,o=n.buttons,a=n.x,s=n.y,l=n.native,u=n.eventId,c=t.cancelable;return{type:"double-click",pointerType:i,button:r,buttons:o,x:a,y:s,native:l,timestamp:t.timestamp,mapPoint:M(e,a,s),eventId:u,cancelable:c,stopPropagation:function(){return t.stopPropagation()},async:function(e){return t.async(e)},preventDefault:function(){return t.preventDefault()}}}function k(e,t){var n=t.data,i=n.pointerType,r=n.button,o=n.buttons,a=n.x,s=n.y,l=n.native,u=n.eventId,c=l.pointerId,d=t.cancelable;return{type:"immediate-click",pointerId:c,pointerType:i,button:r,buttons:o,x:a,y:s,native:l,timestamp:t.timestamp,mapPoint:M(e,a,s),eventId:u,cancelable:d,stopPropagation:function(){return t.stopPropagation()},async:function(e){return t.async(e)},preventDefault:function(){return t.preventDefault()}}}function C(e,t){var n=t.data,i=n.pointerType,r=n.button,o=n.buttons,a=n.x,s=n.y,l=n.native,u=n.eventId,c=l.pointerId,d=t.cancelable;return{type:"immediate-double-click",pointerId:c,pointerType:i,button:r,buttons:o,x:a,y:s,native:l,timestamp:t.timestamp,mapPoint:M(e,a,s),eventId:u,cancelable:d,stopPropagation:function(){return t.stopPropagation()},async:function(e){return t.async(e)},preventDefault:function(){return t.preventDefault()}}}function Z(e,t){var n=t.data,i=n.pointerType,r=n.button,o=n.buttons,a=n.x,s=n.y,l=n.native,u=t.cancelable;return{type:"hold",pointerType:i,button:r,buttons:o,x:a,y:s,native:l,timestamp:t.timestamp,mapPoint:M(e,a,s),cancelable:u,stopPropagation:function(){return t.stopPropagation()},async:function(e){return t.async(e)},preventDefault:function(){return t.preventDefault()}}}function M(e,t,n){return e.toMap((0,c.vW)(t,n),{exclude:[]})}function x(e){var t=e.data,n=t.key,i=t.repeat,r=t.native,o=e.cancelable;return{type:"key-down",key:n,repeat:i,native:r,timestamp:e.timestamp,cancelable:o,stopPropagation:function(){return e.stopPropagation()},async:function(t){return e.async(t)},preventDefault:function(){return e.preventDefault()}}}function T(e){var t=e.data,n=t.key,i=t.native,r=e.cancelable;return{type:"key-up",key:n,native:i,timestamp:e.timestamp,cancelable:r,stopPropagation:function(){return e.stopPropagation()},async:function(t){return e.async(t)},preventDefault:function(){return e.preventDefault()}}}function P(e,t){var n=e.data,i=n.x,r=n.y,o=n.button,a=n.buttons,s=n.native,l=n.eventId,u=s.pointerId,c=s.pointerType,d=e.cancelable;return{type:t,x:i,y:r,pointerId:u,pointerType:c,button:o,buttons:a,native:s,timestamp:e.timestamp,eventId:l,cancelable:d,stopPropagation:function(){return e.stopPropagation()},async:function(t){return e.async(t)},preventDefault:function(){return e.preventDefault()}}}function S(e){var t=e.data.currentEvent,n=t.x,i=t.y,r=t.buttons,o=t.native,a=t.eventId,s=e.data.startEvent.button,l=e.data.startEvent.native.pointerId,u=e.data.startEvent.native.pointerType,c=e.data.action,d={x:e.data.startEvent.x,y:e.data.startEvent.y},h=e.cancelable;return{type:"pointer-drag",x:n,y:i,pointerId:l,pointerType:u,button:s,buttons:r,action:c,origin:d,native:o,timestamp:e.timestamp,eventId:a,cancelable:h,stopPropagation:function(){return e.stopPropagation()},async:function(t){return e.async(t)},preventDefault:function(){return e.preventDefault()}}}function E(e){var t=e.cancelable,n=e.data,i=e.timestamp;return{type:"mouse-wheel",x:n.x,y:n.y,deltaY:n.deltaY,native:n.native,timestamp:i,cancelable:t,stopPropagation:function(){return e.stopPropagation()},async:function(t){return e.async(t)},preventDefault:function(){return e.preventDefault()}}}function I(e){var t=e.data,n=t.action,i=t.state,r=t.device,o=e.cancelable;return{type:"gamepad",device:r,timestamp:e.timestamp,action:n,buttons:i.buttons,axes:i.axes,cancelable:o,stopPropagation:function(){return e.stopPropagation()},async:function(t){return e.async(t)},preventDefault:function(){return e.preventDefault()}}}},65638:function(e,t,n){n.d(t,{$:function(){return r}});var i=n(42537);function r(e){var t=function(){return e("visible"===document.visibilityState)};return document.addEventListener("visibilitychange",t),(0,i.kB)((function(){return document.removeEventListener("visibilitychange",t)}))}},5977:function(e,t,n){n.d(t,{Z:function(){return h}});var i=n(15671),r=n(43144),o=n(60136),a=n(29388),s=n(27366),l=n(7138),u=n(49861),c=(n(93169),n(32718),n(84936),n(69912)),d=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(e){var r;return(0,i.Z)(this,n),(r=t.call(this)).nativeIndex=null,r._detectedDeviceType="unknown","standard"===e.mapping?r._detectedDeviceType="standard":p.test(e.id)?r._detectedDeviceType="spacemouse":r._detectedDeviceType="unknown",r.nativeIndex=e.index,r}return(0,r.Z)(n,[{key:"native",get:function(){var e=navigator.getGamepads?navigator.getGamepads():[];return null!=this.nativeIndex&&this.nativeIndex<e.length?e[this.nativeIndex]:null}},{key:"deviceType",get:function(){return this._detectedDeviceType}},{key:"axisThreshold",get:function(){return v[this.deviceType]}}]),n}(l.default);(0,s._)([(0,u.Cb)({nonNullable:!0,readOnly:!0})],d.prototype,"nativeIndex",void 0),(0,s._)([(0,u.Cb)({type:String,readOnly:!0})],d.prototype,"deviceType",null),(0,s._)([(0,u.Cb)({type:Number,readOnly:!0})],d.prototype,"axisThreshold",null);var h=d=(0,s._)([(0,c.j)("esri.views.input.gamepad.GamepadInputDevice")],d),p=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),v={standard:.15,spacemouse:.025,unknown:0}},83659:function(e,t,n){n.d(t,{G:function(){return s}});var i=n(43144),r=n(15671),o=n(60136),a=n(29388),s=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(){var e;return(0,r.Z)(this,n),(e=t.call(this,!0)).registerIncoming("context-menu",(function(e){e.data.native.preventDefault()})),e}return(0,i.Z)(n)}(n(45371).a)},41722:function(e,t,n){function i(e,t){switch(t){case"primary":return"touch"===e.pointerType||0===e.button;case"secondary":return"touch"!==e.pointerType&&2===e.button;case"tertiary":return"touch"!==e.pointerType&&1===e.button}}function r(e,t){if("touch"===e.pointerType)return!1;switch(t){case"primary":return 0===e.button;case"secondary":return 2===e.button;case"tertiary":return 1===e.button}}n.d(t,{b:function(){return r},h:function(){return i}})},33666:function(e,t,n){n.d(t,{n:function(){return v}});var i,r,o=n(15671),a=n(43144),s=n(97326),l=n(60136),u=n(29388),c=n(17842),d=n(38499),h=n(45371),p=n(15646),v=function(e){(0,l.Z)(n,e);var t=(0,u.Z)(n);function n(e){var i;return(0,o.Z)(this,n),(i=t.call(this,!1))._navigationTouch=e,i._startStateModifiers=new Set,i._activePointerMap=new Map,i._isDragging=!1,i._isCurrentDragSuppressed=!1,i._drag=i.registerOutgoing("drag"),i.registerIncoming("pointer-drag",i._handlePointerDrag.bind((0,s.Z)(i))),i.registerIncoming("pointer-up",i._handlePointerUpAndPointerLost.bind((0,s.Z)(i))),i.registerIncoming("pointer-capture-lost",i._handlePointerUpAndPointerLost.bind((0,s.Z)(i))),i.registerIncoming("pointer-cancel",i._handlePointerUpAndPointerLost.bind((0,s.Z)(i))),i}return(0,a.Z)(n,[{key:"_createPayload",value:function(e,t,n,i){return{action:e,pointerType:this._pointerType,button:this._mouseButton,buttons:t.buttons,timestamp:i,pointers:m(this._activePointerMap),pointer:t,angle:n.angle,radius:n.radius,center:n.center}}},{key:"_addPointer",value:function(e){var t=e.native.pointerId,n=y(this._activePointerMap).angle,i={event:e,initialAngle:0,lastAngle:0};this._activePointerMap.set(t,i);var r=g(i,f(this._activePointerMap));i.initialAngle=r,i.lastAngle=r,this._updatePointerAngles(n)}},{key:"_updatePointer",value:function(e){if(!e||null!=e.x||null!=e.y){var t=e.native.pointerId,n=this._activePointerMap.get(t);n?n.event=e:this._addPointer(e)}}},{key:"_removePointer",value:function(e){var t=y(this._activePointerMap).angle;this._activePointerMap.delete(e),this._updatePointerAngles(t)}},{key:"_updatePointerAngles",value:function(e){var t=y(this._activePointerMap);this._activePointerMap.forEach((function(n){n.initialAngle=g(n,t)-e,n.lastAngle=g(n,t)-e}))}},{key:"_emitEvent",value:function(e,t,n){var i=y(this._activePointerMap);this._drag.emit(this._createPayload(e,t,i,n),void 0,this._startStateModifiers)}},{key:"_handlePointerUpAndPointerLost",value:function(e){var t=e.data.native.pointerId,n=(0,d.HA)(e.timestamp);this._activePointerMap.get(t)&&(1===this._activePointerMap.size?(this._updatePointer(e.data),!this._isCurrentDragSuppressed&&this._emitEvent("end",e.data,n),this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._removePointer(t)):(this._removePointer(t),this._emitEvent("removed",e.data,(0,d.HA)(e.timestamp))))}},{key:"_handlePointerDrag",value:function(e){var t=e.data,n=t.currentEvent,i=(0,d.HA)(e.timestamp);switch(t.action){case"start":case"update":this._isDragging?this._activePointerMap.has(n.native.pointerId)?(this._updatePointer(n),!this._isCurrentDragSuppressed&&this._emitEvent("update",n,i)):(this._addPointer(n),this._emitEvent("added",n,i),this._isCurrentDragSuppressed=this._isSuppressed):(this._updatePointer(n),this._pointerType=e.data.startEvent.pointerType,this._mouseButton=e.data.startEvent.button,this._startStateModifiers=e.modifiers,this._isDragging=!0,this._isCurrentDragSuppressed=this._isSuppressed,!this._isCurrentDragSuppressed&&this._emitEvent("start",n,i))}}},{key:"_isSuppressed",get:function(){return!!this._navigationTouch&&!this._navigationTouch.browserTouchPanEnabled&&"touch"===this._pointerType&&1===this._activePointerMap.size}}]),n}(h.a);function f(e){var t=[];return e.forEach((function(e){t.push((0,c.vW)(e.event.x,e.event.y))})),(0,p.y_)(t)}function y(e){var t=f(e),n=0;return e.forEach((function(e){for(var i=g(e,t),r=i-e.lastAngle;r>Math.PI;)r-=2*Math.PI;for(;r<-Math.PI;)r+=2*Math.PI;i=e.lastAngle+r,e.lastAngle=i;var o=i-e.initialAngle;n+=o})),{angle:n/=e.size||1,radius:t.radius,center:t.center}}function m(e){var t=new Map;return e.forEach((function(e,n){return t.set(n,e.event)})),t}function g(e,t){var n=e.event,i=n.x-t.center.x,r=n.y-t.center.y;return Math.atan2(r,i)}(r=i||(i={}))[r.Left=0]="Left",r[r.Middle=1]="Middle",r[r.Right=2]="Right",r[r.Back=3]="Back",r[r.Forward=4]="Forward",r[r.Undefined=-1]="Undefined"},11802:function(e,t,n){n.d(t,{y:function(){return p}});var i=n(15671),r=n(43144),o=n(97326),a=n(88301),s=n(61120),l=n(60136),u=n(29388),c=n(84702),d=n(45371),h=n(15646),p=function(e){(0,l.Z)(n,e);var t=(0,u.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h.Mp.maximumDoubleClickDelay,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h.Mp.maximumDoubleClickDistance,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h.Mp.maximumDoubleTouchDelay,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:h.Mp.maximumDoubleTouchDistance,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:c.m;return(0,i.Z)(this,n),(e=t.call(this,!1))._maximumDoubleClickDelay=r,e._maximumDoubleClickDistance=a,e._maximumDoubleTouchDelay=s,e._maximumDoubleTouchDistance=l,e._clock=u,e._pointerState=new Map,e._immediateDoubleClick=e.registerOutgoing("immediate-double-click"),e.registerIncoming("pointer-down",e._handlePointerDown.bind((0,o.Z)(e))),e.registerIncoming("pointer-up",e._handlePointerUp.bind((0,o.Z)(e))),e}return(0,r.Z)(n,[{key:"onUninstall",value:function(){this._pointerState.forEach((function(e){e.immediateDoubleClick&&e.immediateDoubleClick.timeoutHandle.remove()})),(0,a.Z)((0,s.Z)(n.prototype),"onUninstall",this).call(this)}},{key:"_handlePointerDown",value:function(e){var t=e.data,n=(0,h.au)(t);if(!this._pointerState.has(n)){var i={downButton:t.native.button,x:t.x,y:t.y,immediateDoubleClick:null};this._pointerState.set(n,i),this.startCapturingPointer(t.native)}}},{key:"_handlePointerUp",value:function(e){var t=e.data,n=(0,h.au)(t),i=this._pointerState.get(n);if(i&&i.downButton===t.native.button){var r=i.immediateDoubleClick,o="touch"===e.data.native.pointerType?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;r?(r.timeoutHandle.remove(),(0,h.nk)(r,e.data)>o?this._startImmediateDoubleClick(e,i):(this._immediateDoubleClick.emit(e.data,void 0,r.modifiers),this._removeState(t))):(0,h.nk)(i,e.data)>o?this._removeState(t):this._startImmediateDoubleClick(e,i)}}},{key:"_startImmediateDoubleClick",value:function(e,t){var n=this,i="touch"===e.data.native.pointerType?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay;t.immediateDoubleClick={x:e.data.x,y:e.data.y,modifiers:e.modifiers,timeoutHandle:this._clock.setTimeout((function(){return n._removeState(e.data)}),i)}}},{key:"_removeState",value:function(e){var t=(0,h.au)(e);this._pointerState.delete(t),this.stopCapturingPointer(e.native),this.refreshHasPendingInputs()}}]),n}(d.a)},64544:function(e,t,n){n.d(t,{e:function(){return v}});var i=n(15671),r=n(43144),o=n(97326),a=n(88301),s=n(61120),l=n(60136),u=n(29388),c=n(84702),d=n(92026),h=n(45371),p=n(15646),v=function(e){(0,l.Z)(n,e);var t=(0,u.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p.Mp.maximumClickDelay,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p.Mp.movementUntilMouseDrag,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:p.Mp.movementUntilPenDrag,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:p.Mp.movementUntilTouchDrag,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:p.Mp.holdDelay,d=arguments.length>5&&void 0!==arguments[5]?arguments[5]:c.m;return(0,i.Z)(this,n),(e=t.call(this,!1))._maximumClickDelay=r,e._movementUntilMouseDrag=a,e._movementUntilPenDrag=s,e._movementUntilTouchDrag=l,e._holdDelay=u,e._clock=d,e._pointerState=new Map,e._pointerDrag=e.registerOutgoing("pointer-drag"),e._immediateClick=e.registerOutgoing("immediate-click"),e._pointerHold=e.registerOutgoing("hold"),e.registerIncoming("pointer-down",e._handlePointerDown.bind((0,o.Z)(e))),e.registerIncoming("pointer-up",(function(t){e._handlePointerLoss(t,"pointer-up")})),e.registerIncoming("pointer-capture-lost",(function(t){e._handlePointerLoss(t,"pointer-capture-lost")})),e.registerIncoming("pointer-cancel",(function(t){e._handlePointerLoss(t,"pointer-cancel")})),e._moveHandle=e.registerIncoming("pointer-move",e._handlePointerMove.bind((0,o.Z)(e))),e._moveHandle.pause(),e}return(0,r.Z)(n,[{key:"onUninstall",value:function(){this._pointerState.forEach((function(e){e.holdTimeout=(0,d.hw)(e.holdTimeout)})),(0,a.Z)((0,s.Z)(n.prototype),"onUninstall",this).call(this)}},{key:"_handlePointerDown",value:function(e){var t=this,n=e.data,i=n.native.pointerId,r=null;0===this._pointerState.size&&(r=this._clock.setTimeout((function(){var n=t._pointerState.get(i);if(n){if(!n.isDragging){var r=n.previousEvent;t._pointerHold.emit(r,void 0,e.modifiers),n.holdEmitted=!0}n.holdTimeout=null}}),this._holdDelay));var o={startEvent:n,previousEvent:n,startTimestamp:e.timestamp,isDragging:!1,downButton:n.native.button,holdTimeout:r,modifiers:new Set};this._pointerState.set(i,o),this.startCapturingPointer(n.native),this._moveHandle.resume(),this._pointerState.size>1&&this._startDragging(e)}},{key:"_handlePointerMove",value:function(e){var t=e.data,n=t.native.pointerId,i=this._pointerState.get(n);i&&(i.isDragging?this._pointerDrag.emit(f("update",i,t),void 0,i.modifiers):(0,p.WI)(t,i.startEvent)>this._getDragThreshold(t.native.pointerType)&&this._startDragging(e),i.previousEvent=t)}},{key:"_getDragThreshold",value:function(e){switch(e){case"touch":return this._movementUntilTouchDrag;case"pen":return this._movementUntilPenDrag;default:return this._movementUntilMouseDrag}}},{key:"_startDragging",value:function(e){var t=this,n=e.data,i=n.native.pointerId;this._pointerState.forEach((function(r){null!=r.holdTimeout&&(r.holdTimeout.remove(),r.holdTimeout=null),r.isDragging||(r.modifiers=e.modifiers,r.isDragging=!0,i===r.startEvent.native.pointerId?t._pointerDrag.emit(f("start",r,n)):t._pointerDrag.emit(f("start",r,r.previousEvent),e.timestamp))}))}},{key:"_handlePointerLoss",value:function(e,t){var n=e.data,i=n.native.pointerId,r=this._pointerState.get(i);r&&(null!=r.holdTimeout&&(r.holdTimeout.remove(),r.holdTimeout=null),r.isDragging?this._pointerDrag.emit(f("end",r,"pointer-up"===t?n:r.previousEvent),void 0,r.modifiers):"pointer-up"===t&&r.downButton===n.native.button&&e.timestamp-r.startTimestamp<=this._maximumClickDelay&&!r.holdEmitted&&this._immediateClick.emit(n),this._pointerState.delete(i),this.stopCapturingPointer(n.native),0===this._pointerState.size&&this._moveHandle.pause())}}]),n}(h.a);function f(e,t,n){return{action:e,startEvent:t.startEvent,previousEvent:t.previousEvent,currentEvent:n}}},46525:function(e,t,n){n.d(t,{y:function(){return p}});var i=n(15671),r=n(43144),o=n(97326),a=n(60136),s=n(29388),l=n(84702),u=n(77427),c=n(92026),d=n(45371),h=n(15646),p=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h.Mp.maximumDoubleClickDelay,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h.Mp.maximumDoubleClickDistance,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h.Mp.maximumDoubleTouchDelay,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:h.Mp.maximumDoubleTouchDistance,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:l.m;return(0,i.Z)(this,n),(e=t.call(this,!1))._maximumDoubleClickDelay=r,e._maximumDoubleClickDistance=a,e._maximumDoubleTouchDelay=s,e._maximumDoubleTouchDistance=u,e._clock=c,e._pointerState=new Map,e._click=e.registerOutgoing("click"),e._doubleClick=e.registerOutgoing("double-click"),e.registerIncoming("immediate-click",e._handleImmediateClick.bind((0,o.Z)(e))),e.registerIncoming("pointer-down",e._handlePointerDown.bind((0,o.Z)(e))),e}return(0,r.Z)(n,[{key:"onUninstall",value:function(){this._pointerState.forEach((function(e){return e.doubleClickTimer=(0,c.hw)(e.doubleClickTimer)}))}},{key:"hasPendingInputs",get:function(){return(0,u.oE)(this._pointerState,(function(e){return null!=e.doubleClickTimer}))}},{key:"_clearDoubleClickTimer",value:function(e,t){var n=this._pointerState.get(e);n&&(n.doubleClickTimer=(0,c.hw)(n.doubleClickTimer),t&&this._click.emit(n.event.data,void 0,n.event.modifiers),this._pointerState.delete(e),this.refreshHasPendingInputs())}},{key:"_doubleClickTimeoutExceeded",value:function(e){var t=this._pointerState.get(e);1===t.pointerDownCount&&this._click.emit(t.event.data,void 0,t.event.modifiers),t.doubleClickTimer=null,this._pointerState.delete(e),this.refreshHasPendingInputs()}},{key:"_handleImmediateClick",value:function(e){var t=e.data,n=t.native.pointerType,i=function(e){var t=e.native,n=t.pointerId,i=t.pointerType,r=t.button;return"mouse"===i?"".concat(n,":").concat(r):"".concat(i)}(t);if(this._pointerState.has(i)){var r=this._pointerState.get(i),o=r.event,a=o.data,s=o.modifiers,l="touch"===n?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;(0,h.nk)(a,t)>l?(this._clearDoubleClickTimer(i,!0),this._startClick(e)):(this._clearDoubleClickTimer(i,!1),2===r.pointerDownCount&&this._doubleClick.emit(a,void 0,s))}else this._startClick(e)}},{key:"_handlePointerDown",value:function(e){var t=(0,h.au)(e.data),n=this._pointerState.get(t);n&&(n.pointerDownCount+=1)}},{key:"_startClick",value:function(e){var t=this,n=e.data,i=n.native.pointerType,r=(0,h.au)(n),o="touch"===i?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,a=this._clock.setTimeout((function(){return t._doubleClickTimeoutExceeded(r)}),o);this._pointerState.set(r,{event:e,doubleClickTimer:a,pointerDownCount:1}),this.refreshHasPendingInputs()}}]),n}(d.a)},15646:function(e,t,n){n.d(t,{Mp:function(){return o},WI:function(){return s},au:function(){return u},nk:function(){return a},y_:function(){return l}});var i=n(29439),r=n(17842),o={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500,maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};function a(e,t){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)}function s(e,t){var n=t.x-e.x,i=t.y-e.y;return Math.sqrt(n*n+i*i)}function l(e,t){if(t?(t.radius=0,t.center.x=0,t.center.y=0):t={radius:0,center:(0,r.vW)()},0===e.length)return t;if(1===e.length)return t.center.x=e[0].x,t.center.y=e[0].y,t;if(2===e.length){var n=(0,i.Z)(e,2),o=n[0],a=n[1],s=a.x-o.x,l=a.y-o.y;return t.radius=Math.sqrt(s*s+l*l)/2,t.center.x=(o.x+a.x)/2,t.center.y=(o.y+a.y)/2,t}for(var u=0,c=0,d=0;d<e.length;d++)u+=e[d].x,c+=e[d].y;u/=e.length,c/=e.length;for(var h=e.map((function(e){return e.x-u})),p=e.map((function(e){return e.y-c})),v=0,f=0,y=0,m=0,g=0,_=0,w=0,b=0;b<h.length;b++){var k=h[b],C=p[b],Z=k*k,M=C*C;v+=Z,f+=M,y+=k*C,m+=Z*k,g+=M*C,_+=k*M,w+=C*Z}var x=.5*(m+_),T=.5*(g+w),P=v*f-y*y,S=(x*f-T*y)/P,E=(v*T-y*x)/P,I=(0,r.vW)(S+u,E+c);return{radius:Math.sqrt(S*S+E*E+(v+f)/e.length),center:I}}function u(e){var t=e.native,n=t.pointerId,i=t.button,r=t.pointerType;return"mouse"===r?"".concat(n,":").concat(i):"".concat(r)}},99034:function(e,t,n){var i,r,o;n.d(t,{Q9:function(){return r},bH:function(){return i},jg:function(){return o}}),function(e){e[e.USER=0]="USER",e[e.MANAGER=1]="MANAGER"}(i||(i={})),function(e){e[e.None=0]="None",e[e.Unfocused=1]="Unfocused",e[e.Focused=2]="Focused",e[e.Unselected=4]="Unselected",e[e.Selected=8]="Selected",e[e.All=15]="All"}(r||(r={})),function(e){e[e.None=0]="None",e[e.Custom1=16]="Custom1",e[e.Custom2=32]="Custom2",e[e.Custom3=64]="Custom3",e[e.Custom4=128]="Custom4",e[e.Custom5=256]="Custom5",e[e.Custom6=512]="Custom6",e[e.Custom7=1024]="Custom7",e[e.Custom8=2048]="Custom8",e[e.Custom9=4096]="Custom9",e[e.Custom10=8192]="Custom10",e[e.Custom11=16384]="Custom11",e[e.Custom12=32768]="Custom12",e[e.All=65520]="All"}(o||(o={}))},73320:function(e,t,n){n.d(t,{CY:function(){return a},U_:function(){return s},_r:function(){return l},cm:function(){return o}});var i=n(32035);function r(e){var t=e*e;return e<0&&(t*=-1),t}function o(e){return e.translation[0]=0,e.translation[1]=0,e.translation[2]=0,e.heading=0,e.tilt=0,e}function a(e,t,n){var o=n,a=e.state,s=e.device,l="forward-down"===t.tiltDirection?1:-1;return"standard"===s.deviceType?(o.translation[0]=r(a.axes[0]),o.translation[1]=r(a.axes[1]),o.translation[2]=r(a.buttons[7])-r(a.buttons[6]),o.heading=r(a.axes[2]),o.tilt=r(a.axes[3])):"spacemouse"===s.deviceType&&(o.translation[0]=1.2*r(a.axes[0]),o.translation[1]=1.2*r(a.axes[1]),o.translation[2]=2*-r(a.axes[2]),o.heading=1.2*r(a.axes[5]),o.tilt=1.2*r(a.axes[3])),o.tilt*=l,(0,i.j)(o.translation,o.translation,1),o}function s(e,t){var n=t;return n.translation[0]=e[1]-e[0],n.translation[1]=e[3]-e[2],n.translation[2]=e[4]-e[5],n.heading=e[7]-e[6],n.tilt=e[8]-e[9],n.zoom=e[10]-e[11],n}function l(e){return 0===e.translation[0]&&0===e.translation[1]&&0===e.translation[2]&&0===e.heading&&0===e.tilt&&0===e.zoom}},87770:function(e,t,n){n.d(t,{B:function(){return o}});var i=n(10064),r=n(90316);function o(e){var t=(0,r.h)();return t.available?"3d"===e&&t.majorPerformanceCaveat?new i.Z("webgl:major-performance-caveat-detected","Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist."):t.supportsHighPrecisionFragment?t.supportsVertexShaderSamplers?null:new i.Z("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported."):new i.Z("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported."):new i.Z("webgl:required","WebGL2 is required but not supported.",(new Error).stack)}},72612:function(e,t,n){n.d(t,{Eu:function(){return a},Rw:function(){return l},Sj:function(){return o},s6:function(){return s},vT:function(){return r}});n(93169);var i=n(17842);function r(e){return(0,i.vW)(e.x,e.y)}function o(e){return(0,i.s1)(e.x,e.y)}function a(e,t){var n,r=null===(n=e instanceof HTMLElement?e:e.surface)||void 0===n?void 0:n.getBoundingClientRect();return r?(0,i.vW)(t.clientX-r.left,t.clientY-r.top):(0,i.vW)(0,0)}function s(e,t){return t instanceof Event?a(e,t):r(t)}function l(e){if(e instanceof Event)return!0;if("object"==typeof e&&"type"in e)switch(e.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;default:return!1}return!1}},7796:function(e,t,n){n.d(t,{$3:function(){return f},LI:function(){return h},RZ:function(){return p},TT:function(){return v},cv:function(){return s},uz:function(){return a},v8:function(){return l}});var i=n(1413),r=(n(93169),n(16889));n(51e3);function o(e,t){var n=e||{},i=n.format,o=n.quality,a=n.rotation,s=n.disableDecorations,l=y(e,t.padding),u=function(e,t){var n={x:0,y:0,width:t.width,height:t.height};if(null!==e&&void 0!==e&&e.area){null!=e.area.x&&(n.x=Math.floor(e.area.x)),null!=e.area.y&&(n.y=Math.floor(e.area.y));var i=null!=e.area.width?Math.floor(e.area.width):null,r=null!=e.area.height?Math.floor(e.area.height):null;if(n.width=t.width-n.x,n.height=t.height-n.y,null!=i&&null!=r)n.width=Math.min(n.width,i),n.height=Math.min(n.height,r);else if(null==i&&null!=r){var o=Math.min(n.width,i);n.height=o/n.width*n.height,n.width=o}else if(null!=i&&null==r){var a=Math.min(n.height,r);n.width=a/n.height*n.width,n.height=a}}return function(e,t){var n=Math.floor(Math.max(e.x,0)),i=Math.floor(Math.max(e.y,0)),r={x:n,y:i,width:Math.floor(Math.min(e.width,t.width-n)),height:Math.floor(Math.min(e.height,t.height-i))},o=r.width/r.height,a=e.width/e.height;if(a===o)return r;if(a>o){var s=Math.floor(r.width/a),l=r.height-s;return{x:r.x,y:Math.floor(r.y+l/2),width:r.width,height:s}}var u=Math.floor(r.height*a),c=r.width-u;return{x:Math.floor(r.x+c/2),y:r.y,width:u,height:r.height}}(function(e,t){if(null==(null===t||void 0===t?void 0:t.width)||null==t.height)return e;var n=t.width/t.height,i=e.width/e.height;if(i===n)return e;if(i<n){var r=Math.floor(e.height*n);return e.x-=(r-e.width)/2,e.width=r,e}var o=Math.floor(e.width/n);return e.y-=(o-e.height)/2,e.height=o,e}(n,e),t)}(e,{width:t.width-l.left-l.right,height:t.height-l.top-l.bottom}),c=function(e,t){if(!e)return t;var n=e.width,i=e.height;if(null!=n&&null!=i)return{width:Math.floor(n),height:Math.floor(i)};if(null==n&&null==i)return t;var r=t.width/t.height;return null==i?{width:Math.floor(n),height:Math.floor(n/r)}:{width:Math.floor(i*r),height:Math.floor(i)}}(e,u),d=c.width,h=c.height,p=m(i),v=w[p];return{format:p,quality:(0,r.uZ)(null!=o?o:v,0,100),area:u,width:d,height:h,rotation:a,disableDecorations:!!s,ignoreBackground:!(null===e||void 0===e||!e.ignoreBackground),ignorePadding:!(null===e||void 0===e||!e.ignorePadding)}}function a(e,t){var n,i=o(e,t),r=i.area,a=i.width/r.width,s=y(i,t.padding),l=s.left+s.right,u=s.top+s.bottom,c=t.width-l,d=t.height-u,h=Math.floor(c*a+l),p=Math.floor(d*a+u),v=null!==(n=null===e||void 0===e?void 0:e.layers)&&void 0!==n?n:[],f=i.ignoreBackground,m=i.ignorePadding;return{framebufferWidth:h,framebufferHeight:p,region:{x:Math.floor(r.x*a)+s.left,y:Math.floor(r.y*a)+s.top,width:i.width,height:i.height},format:i.format,quality:i.quality,rotation:i.rotation,pixelRatio:a,layers:v,disableDecorations:i.disableDecorations,ignoreBackground:f,ignorePadding:m,objectAndLayerIdColor:!1}}function s(e,t,n){var i=u(e,n),r=i.ctx,o=i.canvas,a=r.getImageData(0,0,e.width,e.height),s=function(e,t){var n=g[t.format],i=t.quality/100;return e.toDataURL(n,i)}(o,t);return c(o),{dataUrl:s,data:a}}function l(e,t){var n=u(e,t),i=n.ctx,r=n.canvas,o=i.getImageData(0,0,e.width,e.height);return c(r),o}function u(e,t){var n=(null==d&&(d=document.createElement("canvas")),d);t.premultipliedAlpha&&function(e){for(var t=e.data,n=t.length,i=0;i<n;i+=4){var r=t[i+3];if(255!==r&&r>0){var o=255/r;t[i]=t[i]*o,t[i+1]=t[i+1]*o,t[i+2]=t[i+2]*o}}}(e),n.width=e.width,n.height=e.height;var i=n.getContext("2d",{willReadFrequently:!0});return i.putImageData(e,0,0),t.flipY&&function(e){e.save(),e.globalCompositeOperation="copy",e.scale(1,-1),e.translate(0,-e.canvas.height),e.drawImage(e.canvas,0,0),e.restore()}(i),{ctx:i,canvas:n}}function c(e){e.width=0,e.height=0}var d=null;function h(e,t){var n=m(e),i=w[n];return{format:n,quality:(0,r.uZ)(null!=t?t:i,0,100)}}function p(e,t){return t/Math.max(e[0],e[1])}function v(e,t,n){for(var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:e.width-i,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:e.height-r,s=arguments.length>7&&void 0!==arguments[7]&&arguments[7],l=e.data,u=t.width,c=t.height,d=t.data,h=o/u,p=a/c,v=Math.ceil(h/2),f=Math.ceil(p/2),y=e.width,m=0;m<c;m++)for(var g=0;g<u;g++){for(var _=4*(g+(s?c-m-1:m)*u),w=0,b=0,k=0,C=0,Z=0,M=0,x=(m+.5)*p,T=Math.floor(m*p);T<(m+1)*p;T++)for(var P=Math.abs(x-(T+.5))/f,S=(g+.5)*h,E=P*P,I=Math.floor(g*h);I<(g+1)*h;I++){var D=Math.abs(S-(I+.5))/v,L=Math.sqrt(E+D*D);if(!(L>=1)){var V=2*L*L*L-3*L*L+1,A=4*(i+I+(r+T)*y);M+=V*l[A+3],b+=V,!n&&l[A+3]<255&&(V=V*l[A+3]/255),k+=V*l[A],C+=V*l[A+1],Z+=V*l[A+2],w+=V}}d[_]=k/w,d[_+1]=C/w,d[_+2]=Z/w,d[_+3]=M/b}return t}function f(e,t,n){if(!t)return e;var r=e.framebufferWidth,o=e.framebufferHeight,a=e.pixelRatio,s=e.region,l=y(e,n),u=l.left+l.right,c=l.top+l.bottom,d=r-u,h=o-c,p=Math.min(8,Math.min((2048-u)/d,(2048-c)/h));return p<1.5?e:(0,i.Z)((0,i.Z)({},e),{},{framebufferWidth:Math.round(d*p)+u,framebufferHeight:Math.round(h*p)+c,pixelRatio:a*p,resample:{region:{x:Math.round((s.x-l.left)*p)+l.left,y:Math.round((s.y-l.top)*p)+l.top,width:Math.round(s.width*p),height:Math.round(s.height*p)},width:r,height:o}})}function y(e,t){return!t||null!==e&&void 0!==e&&e.ignorePadding?b:t}function m(e){switch(e){case"png":case"jpg":case"jpeg":return e;default:return _}}var g={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},_="png",w={png:100,jpg:98,jpeg:98},b={top:0,right:0,bottom:0,left:0}},93027:function(e,t,n){function i(e){return!!(null!=e&&"object"==typeof e&&"createQuery"in e&&e.createQuery&&"on"in e&&e.on)}n.d(t,{Y:function(){return i}})},33006:function(e,t,n){n.d(t,{Z:function(){return he}});var i=n(15671),r=n(43144),o=n(88301),a=n(61120),s=n(60136),l=n(29388),u=n(27366),c=(n(93169),n(32718),n(94172)),d=n(49861),h=(n(84936),n(69912)),p=n(7138),v=n(50093),f=n(89125);var y="esri-component",m=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(){var e;return(0,i.Z)(this,n),(e=t.apply(this,arguments)).widget=null,e}return(0,r.Z)(n,[{key:"destroy",value:function(){var e;this.node=null,null===(e=this.widget)||void 0===e||e.destroy()}},{key:"id",get:function(){var e,t,n,i;return null!==(e=null!==(t=this._get("id"))&&void 0!==t?t:null===(n=this.widget)||void 0===n?void 0:n.id)&&void 0!==e?e:null===(i=this.node)||void 0===i?void 0:i.id},set:function(e){this._set("id",e)}},{key:"node",set:function(e){var t=this._get("node");e!==t&&(e&&e.classList.add(y),t&&t.classList.remove(y),this._set("node",e))}},{key:"castNode",value:function(e){var t;return null!==(t=this.widget)&&void 0!==t&&t.destroy(),e?"string"==typeof e||function(e){return e&&"nodeType"in e}(e)?(this._set("widget",null),(0,v.L7)(e)):(function(e){return e&&"function"==typeof e.render}(e)&&!e.domNode&&(e.domNode=document.createElement("div")),this._set("widget",e),e.domNode):(this._set("widget",null),null)}}]),n}(p.default);(0,u._)([(0,d.Cb)()],m.prototype,"id",null),(0,u._)([(0,d.Cb)()],m.prototype,"node",null),(0,u._)([(0,f.p)("node")],m.prototype,"castNode",null),(0,u._)([(0,d.Cb)({readOnly:!0})],m.prototype,"widget",void 0);var g=m=(0,u._)([(0,h.j)("esri.views.ui.Component")],m),_=n(1413),w=n(37762),b=n(29439),k=(n(59166),n(63780)),C=n(91505),Z=n(42537),M=n(37384),x=n(80975),T=n(36257),P={left:0,top:0,bottom:0,right:0},S={bottom:30,top:15,right:15,left:15},E="esri-ui",I={ui:E,corner:"".concat(E,"-corner"),innerContainer:"".concat(E,"-inner-container"),manualContainer:"".concat(E,"-manual-container"),cornerContainer:"".concat(E,"-corner-container"),topLeft:"".concat(E,"-top-left"),topRight:"".concat(E,"-top-right"),bottomLeft:"".concat(E,"-bottom-left"),bottomRight:"".concat(E,"-bottom-right")};function D(e){return 0===e?"0":"".concat(e,"px")}function L(e){var t="object"==typeof e&&null!==e&&Object.getPrototypeOf(e);return null!==t&&t!==Object.prototype||!("component"in e||"index"in e||"position"in e)?null:e}function V(e,t){var n=t.top,i=t.bottom,r=t.left,o=t.right;e.style.top=n,e.style.bottom=i,e.style.left=r,e.style.right=o}var A=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(e){var r;return(0,i.Z)(this,n),(r=t.call(this,e))._cornerNameToContainerLookup={},r._positionNameToContainerLookup={},r._components=new Array,r._componentMap=new Map,r._removeWidgetHandleKey=Symbol("componentOnRemoveSymbol"),r._locale=(0,T.Kd)(),r.view=null,r._applyViewPadding=function(){var e=r.container;e&&V(e,r._toPixelPosition(r._getViewPadding()))},r._applyUIPadding=function(){var e=r._innerContainer;e&&V(e,r._toPixelPosition(r.padding))},r._initContainers(),r}return(0,r.Z)(n,[{key:"initialize",value:function(){var e=this;this.addHandles([(0,c.watch)((function(){var t;return[null===(t=e.view)||void 0===t?void 0:t.padding,e.container]}),this._applyViewPadding,c.initial),(0,c.watch)((function(){return e.padding}),this._applyUIPadding,c.initial),(0,c.watch)((function(){return[e.container,e._locale]}),(function(e){var t=(0,b.Z)(e,2),n=t[0],i=t[1];n&&n.setAttribute("lang",i)}),c.initial),(0,T.qe)((function(t){e._locale=t}))])}},{key:"destroy",value:function(){this.container=null;var e,t=(0,w.Z)(this._components);try{for(t.s();!(e=t.n()).done;){e.value.destroy()}}catch(n){t.e(n)}finally{t.f()}this._components.length=0,this._componentMap.clear()}},{key:"container",set:function(e){var t=this._get("container");e!==t&&(e&&(e.classList.add(I.ui),(0,M.V$)(e),this._attachContainers(e)),t&&(t.classList.remove(I.ui),V(t,{top:"",bottom:"",left:"",right:""}),(0,v.cS)(t)),this._set("container",e))}},{key:"height",get:function(){var e,t,n=null!==(e=null===(t=this.view)||void 0===t?void 0:t.height)&&void 0!==e?e:0;if(0===n)return n;var i=this._getViewPadding(),r=i.top,o=i.bottom;return Math.max(n-r-o,0)}},{key:"padding",get:function(){return this._get("padding")},set:function(e){this._overrideIfSome("padding",e)}},{key:"castPadding",value:function(e){return"number"==typeof e?{bottom:e,top:e,right:e,left:e}:(0,_.Z)((0,_.Z)({},S),e)}},{key:"width",get:function(){var e,t,n=null!==(e=null===(t=this.view)||void 0===t?void 0:t.width)&&void 0!==e?e:0;if(0===n)return n;var i=this._getViewPadding(),r=i.left,o=i.right;return Math.max(n-r-o,0)}},{key:"add",value:function(e,t){var n,i,r,o,a,s=this;if(Array.isArray(e))e.forEach((function(e){return s.add(e,t)}));else{var l=L(e);l&&(r=(n=l).index,t=n.position,e=n.component,o=n.key),t&&"object"==typeof t&&(r=(i=t).index,o=i.key,t=i.position,a=i.internal),!e||t&&!this._isValidPosition(t)||this._add(e,t,r,o,a)}}},{key:"remove",value:function(e,t){var n=this;if(e){if(Array.isArray(e))return e.map((function(e){return n.remove(e,t)}));var i=this._find(e);if(i){var r,o;if(this._componentMap.has(i)&&(null===(r=this._componentMap.get(i))||void 0===r?void 0:r.key)!==t)return;var a=this._components.indexOf(i),s=i.node.parentNode;return null!==s&&void 0!==s&&s.removeChild(i.node),this._componentMap.delete(i),null!==(o=i.widget)&&void 0!==o&&o.removeHandlesReference(this._removeWidgetHandleKey),this._components.splice(a,1)[0]}}}},{key:"empty",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{removeInternal:!1};if(Array.isArray(e)){var i,r=(0,w.Z)(e);try{for(r.s();!(i=r.n()).done;){var o=i.value;this.empty(o,n)}}catch(d){r.e(d)}finally{r.f()}}else{var a,s=this._positionNameToContainerLookup[null!==e&&void 0!==e?e:"manual"],l=Array.prototype.slice.call(s.children).map((function(e){return t._findByNode(e)})).filter((function(e){var i,r;return null!=e&&(!(null!==(i=null===(r=t._componentMap.get(e))||void 0===r?void 0:r.internal)&&void 0!==i&&i)||n.removeInternal)})),u=(0,w.Z)(l);try{for(u.s();!(a=u.n()).done;){var c=a.value;this.remove(c)}}catch(d){u.e(d)}finally{u.f()}}}},{key:"move",value:function(e,t){var n=this;if(Array.isArray(e)&&e.forEach((function(e){return n.move(e,t)})),e){var i,r=L(e)||L(t);if(r&&(i=r.index,t=r.position,e=r.component||e),!t||this._isValidPosition(t)){var o=this.remove(e);o&&this.add(o,{position:t,index:i})}}}},{key:"find",value:function(e){if(!e)return null;var t=this._findById(e);return t&&(t.widget||t.node)}},{key:"getComponents",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{includeInternal:!1};return e?Array.isArray(e)?e.flatMap((function(e){return t._getComponentsAtPosition(e,n)})):this._getComponentsAtPosition(e,n):this._components.filter((function(e){var i;return n.includeInternal||!(null!==(i=t._componentMap.get(e))&&void 0!==i&&i.internal)})).map((function(e){var t=e.widget,n=e.node;return null!==t&&void 0!==t?t:n}))}},{key:"getPosition",value:function(e){for(var t in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[t].contains(e))return t;return null}},{key:"_add",value:function(e,t,n,i,r){var o=this;e instanceof g||(e=new g({node:e}));var a=e.widget;null!=a&&a instanceof p.default&&a.addHandles((0,Z.kB)((function(){queueMicrotask((function(){return o.remove(e)}))})),this._removeWidgetHandleKey),this._place({component:e,position:t,index:n}),this._components.push(e),this._componentMap.set(e,{key:i,internal:r})}},{key:"_find",value:function(e){return e?e instanceof g?this._findByComponent(e):"string"==typeof e?this._findById(e):this._findByNode(e.domNode||e):null}},{key:"_getViewPadding",value:function(){var e,t;return null!==(e=null===(t=this.view)||void 0===t?void 0:t.padding)&&void 0!==e?e:P}},{key:"_attachContainers",value:function(e){e.appendChild(this._innerContainer),e.appendChild(this._manualContainer)}},{key:"_initContainers",value:function(){var e=document.createElement("div");e.classList.add(I.innerContainer,I.cornerContainer);var t=document.createElement("div");t.classList.add(I.innerContainer,I.manualContainer);var n=document.createElement("div");n.classList.add(I.topLeft,I.corner),e.appendChild(n);var i=document.createElement("div");i.classList.add(I.topRight,I.corner),e.appendChild(i);var r=document.createElement("div");r.classList.add(I.bottomLeft,I.corner),e.appendChild(r);var o=document.createElement("div");o.classList.add(I.bottomRight,I.corner),e.appendChild(o),this._innerContainer=e,this._manualContainer=t;var a=(0,x.dZ)();this._cornerNameToContainerLookup={"top-left":n,"top-right":i,"bottom-left":r,"bottom-right":o,"top-leading":a?i:n,"top-trailing":a?n:i,"bottom-leading":a?o:r,"bottom-trailing":a?r:o},this._positionNameToContainerLookup=(0,_.Z)({manual:t},this._cornerNameToContainerLookup)}},{key:"_isValidPosition",value:function(e){return!!this._positionNameToContainerLookup[e]}},{key:"_place",value:function(e){var t,n=null!==(t=e.position)&&void 0!==t?t:"manual",i=e.component,r=e.index,o=this._positionNameToContainerLookup[n],a=null!=r&&r>-1;if(function(e){return e&&!e._started&&"function"==typeof e.postMixInProperties&&"function"==typeof e.buildRendering&&"function"==typeof e.postCreate&&"function"==typeof e.startup}(i.widget)&&i.widget.startup(),a){var s=Array.from(o.children);0!==r?r>=s.length?o.appendChild(i.node):(0,v.Vt)(i.node,s[r]):o.firstChild?(0,v.Vt)(i.node,o.firstChild):o.appendChild(i.node)}else o.appendChild(i.node)}},{key:"_toPixelPosition",value:function(e){return{top:D(e.top),left:D(e.left),right:D(e.right),bottom:D(e.bottom)}}},{key:"_findByComponent",value:function(e){var t;return null!==(t=this._components.find((function(t){return t===e})))&&void 0!==t?t:null}},{key:"_findById",value:function(e){var t;return null!==(t=this._components.find((function(t){return t.id===e})))&&void 0!==t?t:null}},{key:"_findByNode",value:function(e){var t;return null!==(t=this._components.find((function(t){return t.node===e})))&&void 0!==t?t:null}},{key:"_getComponentsAtPosition",value:function(e,t){var n=this,i=this._positionNameToContainerLookup[e];return Array.prototype.slice.call(i.children).map((function(e){return n._findByNode(e)})).filter(k.pC).filter((function(e){var i;return t.includeInternal||!(null!==(i=n._componentMap.get(e))&&void 0!==i&&i.internal)})).map((function(e){var t=e.widget,n=e.node;return null!==t&&void 0!==t?t:n}))}}]),n}(C.Z.EventedAccessor);(0,u._)([(0,d.Cb)()],A.prototype,"_locale",void 0),(0,u._)([(0,d.Cb)()],A.prototype,"container",null),(0,u._)([(0,d.Cb)()],A.prototype,"height",null),(0,u._)([(0,d.Cb)({value:S})],A.prototype,"padding",null),(0,u._)([(0,f.p)("padding")],A.prototype,"castPadding",null),(0,u._)([(0,d.Cb)()],A.prototype,"view",void 0),(0,u._)([(0,d.Cb)()],A.prototype,"width",null);var R=A=(0,u._)([(0,h.j)("esri.views.ui.UI")],A),F=n(4942),z=n(33565),O=n(74165),H=n(15861),N=n(14921),W=n(80987),j=n(53866),q=n(78952),U=n(34066),B=n(81753),G=n(76241);function K(e,t){return e&&"copyright"in e&&(!t||"function"==typeof e.originOf&&"user"===e.originOf("copyright"))}function Y(e,t,n){n&&t&&(e.find((function(e){return e.layerView===t&&e.text===n}))||e.push({text:n,layerView:t}))}function J(e){return"bing-maps"===e.type}var X=[],$=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(e){var r;return(0,i.Z)(this,n),(r=t.call(this,e))._clear=function(){r._fetchedAttributionData.clear(),r._pendingAttributions.clear(),r.removeHandles("suspension"),r.notifyChange("state")},r._pendingAttributions=new Set,r._fetchedAttributionData=new Map,r.items=new W.Z,r.view=null,r._allLayerViewsChange=function(e){var t;r.removeHandles("suspension"),r.removeHandles("visible-geometry-changed");var n=null===(t=r.view)||void 0===t?void 0:t.allLayerViews;n&&(r.addHandles(n.map((function(e){return(0,c.watch)((function(){var t;return[e.suspended,null===(t=e.layer)||void 0===t?void 0:t.attributionVisible]}),(function(){return r._updateAttributionItems()}))})).toArray(),"suspension"),n.forEach((function(e){"esri.views.3d.layers.Tiles3DLayerView3D"===e.declaredClass&&r.addHandles(e.on("visible-geometry-changed",(function(){return r._updateAttributionItems()})),"visible-geometry-changed")}))),null!==e&&void 0!==e&&e.removed&&e.removed.forEach((function(e){r._pendingAttributions.delete(e),r._fetchedAttributionData.delete(e)})),r._updateAttributionItems()},r.addHandles([(0,c.on)((function(){var e;return null===(e=r.view)||void 0===e?void 0:e.allLayerViews}),"change",(function(e){return r._allLayerViewsChange(e)}),{onListenerAdd:function(){return r._allLayerViewsChange()},onListenerRemove:r._clear}),(0,c.when)((function(){var e;return!0===(null===(e=r.view)||void 0===e?void 0:e.stationary)}),(function(){return r._updateAttributionItems()}))]),r}return(0,r.Z)(n,[{key:"destroy",value:function(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}},{key:"state",get:function(){var e;return null!==(e=this.view)&&void 0!==e&&e.ready?this._pendingAttributions.size>0?"loading":"ready":"disabled"}},{key:"_updateAttributionItems",value:function(){var e=this,t=this.view,n=null===t||void 0===t?void 0:t.allLayerViews;if(X.length=0,t&&n){n.forEach((function(n){var i,r;if(!n.suspended&&null!==(i=n.layer)&&void 0!==i&&i.attributionVisible){var o=n.layer;if(K(o,"user"))Y(X,n,o.copyright);else if(o.hasAttributionData){if(e._fetchedAttributionData.has(n)){var a=e._fetchedAttributionData.get(n);return void(a?Y(X,n,e._getDynamicAttribution(a,t,o)):K(o)&&Y(X,n,o.copyright))}e._fetchAttributionData(n)}else{var s="portalItem"in o?null===(r=o.portalItem)||void 0===r?void 0:r.accessInformation:void 0;Y(X,n,s||o.copyright)}}}));var i=n.find((function(e){var t;return"integrated-mesh-3dtiles"===(null===(t=e.layer)||void 0===t?void 0:t.type)}));if(this.view&&i){var r=(0,G.WM)(this.view);if(r)for(var o=r.getAttributionText(),a=0;a<o.length;++a)Y(X,i,o[a])}(function(e,t){return e.length!==t.length||e.some((function(e,n){return e.text!==t[n].text}))})(this.items,X)&&(this.items.removeAll(),this.items.addMany(X)),X.length=0,this.notifyChange("state")}else this._clear()}},{key:"_fetchAttributionData",value:function(){var e=(0,H.Z)((0,O.Z)().mark((function e(t){var n,i;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._pendingAttributions.has(t)){e.next=2;break}return e.abrupt("return");case 2:return this._pendingAttributions.add(t),e.next=5,(0,N.q6)(t.layer.fetchAttributionData());case 5:n=e.sent,this._pendingAttributions.has(t)&&(i=n.ok?this._createContributionIndex(n.value,J(t.layer)):null,this._pendingAttributions.delete(t),this._fetchedAttributionData.set(t,i)),this._updateAttributionItems();case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_createContributionIndex",value:function(e,t){var n=e.contributors,i={};if(!n)return i;for(var r=0;r<n.length;r++){var o=n[r],a=o.coverageAreas;if(!a)return;var s,l=(0,w.Z)(a);try{for(l.s();!(s=l.n()).done;)for(var u=s.value,c=u.bbox,d=u.zoomMin-(t&&u.zoomMin?1:0),h=u.zoomMax-(t&&u.zoomMax?1:0),p=new j.Z({xmin:c[1],ymin:c[0],xmax:c[3],ymax:c[2],spatialReference:q.Z.WGS84}),v={extent:(0,B.$)(p),attribution:o.attribution||"",score:null!=u.score?u.score:100,id:r},f=d;f<=h;f++){var y,m;null!==(m=i[y=f])&&void 0!==m||(i[y]=[]),i[f].push(v)}}catch(g){l.e(g)}finally{l.f()}}return i.maxKey=Math.max.apply(null,Object.keys(i)),i}},{key:"_getDynamicAttribution",value:function(e,t,n){var i,r,o,a=t.extent,s=t.scale,l=null!==(i=null===(r=n.tileInfo)||void 0===r?void 0:r.scaleToZoom(s))&&void 0!==i?i:0;if(l=Math.min(null!==(o=e.maxKey)&&void 0!==o?o:0,Math.round(l)),!a||null==l||l<=-1)return"";var u=e[l],c=(0,B.iV)(a.center.clone().normalize(),t.spatialReference),d=new Set;return u?u.filter((function(e){var t=e.id,n=!d.has(t)&&c&&e.extent&&(0,U.aV)(e.extent,c);return n&&d.add(t),n})).sort((function(e,t){return t.score-e.score||e.objectId-t.objectId})).map((function(e){return e.attribution})).join(", "):""}}]),n}(p.default);(0,u._)([(0,d.Cb)({readOnly:!0,type:W.Z})],$.prototype,"items",void 0),(0,u._)([(0,d.Cb)({readOnly:!0})],$.prototype,"state",null),(0,u._)([(0,d.Cb)()],$.prototype,"view",void 0);var Q=$=(0,u._)([(0,h.j)("esri.widgets.Attribution.AttributionViewModel")],$),ee=n(7021),te=n(78088),ne=n(80532),ie=n(67005),re="esri-attribution",oe={base:re,poweredBy:"".concat(re,"__powered-by"),sources:"".concat(re,"__sources"),open:"".concat(re,"--open"),sourcesOpen:"".concat(re,"__sources--open"),link:"".concat(re,"__link")},ae=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(e,r){var o;return(0,i.Z)(this,n),(o=t.call(this,e,r))._isOpen=!1,o._attributionTextOverflowed=!1,o._prevSourceNodeHeight=0,o._resizeObserver=new ResizeObserver((function(e){return e.forEach((function(e){var t=e.target;return o._checkSourceTextOverflow(t)}))})),o.itemDelimiter=" | ",o.messages=null,o.viewModel=new Q,o}return(0,r.Z)(n,[{key:"initialize",value:function(){var e=this;this.addHandles((0,c.on)((function(){var t;return null===(t=e.viewModel)||void 0===t?void 0:t.items}),"change",(function(){return e.scheduleRender()})))}},{key:"destroy",value:function(){var e;null===(e=this._resizeObserver)||void 0===e||e.disconnect()}},{key:"_isInteractive",get:function(){return this._isOpen||this._attributionTextOverflowed}},{key:"attributionText",get:function(){return this.viewModel.items.reduce((function(e,t){return e.includes(t.text)||e.push(t.text),e}),[]).join(this.itemDelimiter)}},{key:"icon",get:function(){return"description"},set:function(e){this._overrideIfSome("icon",e)}},{key:"label",get:function(){var e,t;return null!==(e=null===(t=this.messages)||void 0===t?void 0:t.widgetLabel)&&void 0!==e?e:""},set:function(e){this._overrideIfSome("label",e)}},{key:"view",get:function(){return this.viewModel.view},set:function(e){this.viewModel.view=e}},{key:"render",value:function(){var e=(0,F.Z)({},oe.open,this._isOpen);return(0,ie.u)("div",{bind:this,class:this.classes(oe.base,ee.z.widget,e),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this._renderSourcesNode(),this._renderPoweredBy())}},{key:"_renderPoweredBy",value:function(){return(0,ie.u)("div",{class:oe.poweredBy},"Powered by"," ",(0,ie.u)("a",{class:oe.link,href:"https://www.esri.com/",rel:"noreferrer",target:"_blank"},"Esri"))}},{key:"_renderSourcesNode",value:function(){var e,t=this._isOpen,n=this._isInteractive,i=n?0:void 0,r=this.attributionText,o=(e={},(0,F.Z)(e,oe.sourcesOpen,t),(0,F.Z)(e,ee.z.interactive,n),e);return(0,ie.u)("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes(oe.sources,o),innerHTML:r,tabIndex:i})}},{key:"_afterSourcesNodeCreate",value:function(e){this._prevSourceNodeHeight=e.clientWidth,this._resizeObserver.observe(e)}},{key:"_checkSourceTextOverflow",value:function(e){var t=!1,n=e.clientHeight,i=e.clientWidth,r=e.scrollWidth>i,o=this._attributionTextOverflowed!==r;if(this._attributionTextOverflowed=r,o&&(t=!0),this._isOpen){var a=n<this._prevSourceNodeHeight;this._prevSourceNodeHeight=n,a&&(this._isOpen=!1,t=!0)}t&&this.scheduleRender()}},{key:"_toggleState",value:function(){this._isInteractive&&(this._isOpen=!this._isOpen)}}]),n}(z.Z);(0,u._)([(0,d.Cb)()],ae.prototype,"_isOpen",void 0),(0,u._)([(0,d.Cb)()],ae.prototype,"_isInteractive",null),(0,u._)([(0,d.Cb)()],ae.prototype,"_attributionTextOverflowed",void 0),(0,u._)([(0,d.Cb)()],ae.prototype,"_prevSourceNodeHeight",void 0),(0,u._)([(0,d.Cb)({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],ae.prototype,"attributionText",null),(0,u._)([(0,d.Cb)()],ae.prototype,"icon",null),(0,u._)([(0,d.Cb)()],ae.prototype,"itemDelimiter",void 0),(0,u._)([(0,d.Cb)()],ae.prototype,"label",null),(0,u._)([(0,d.Cb)(),(0,ne.H)("esri/widgets/Attribution/t9n/Attribution")],ae.prototype,"messages",void 0),(0,u._)([(0,d.Cb)()],ae.prototype,"view",null),(0,u._)([(0,d.Cb)({type:Q})],ae.prototype,"viewModel",void 0),(0,u._)([(0,te.h)()],ae.prototype,"_toggleState",null);var se=ae=(0,u._)([(0,h.j)("esri.widgets.Attribution")],ae),le=n(34347),ue=n(717),ce=n(29966);var de=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(e){var r;return(0,i.Z)(this,n),(r=t.call(this,e))._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"},r.components=[],r._updateViewAwareWidgets=function(e){r.components.forEach((function(t){var n=r._find(t),i=null===n||void 0===n?void 0:n.widget;(function(e){return void 0!==(null===e||void 0===e?void 0:e.view)})(i)&&(i.view=e)}))},r._componentsWatcher=function(e,t){r._removeComponents(t),r._addComponents(e),r._adjustPadding(e)},r}return(0,r.Z)(n,[{key:"initialize",value:function(){var e=this;this.addHandles([(0,c.watch)((function(){return e.components}),this._componentsWatcher,c.initial),(0,c.watch)((function(){return e.view}),this._updateViewAwareWidgets,c.initial)])}},{key:"_add",value:function(e,t,i,r,s){var l=e;if("string"==typeof e&&this._defaultPositionLookup[e]){if(this._find(e))return;l=this._createComponent(e)}(0,o.Z)((0,a.Z)(n.prototype),"_add",this).call(this,l,t,i,r,s)}},{key:"_removeComponents",value:function(e){var t=this;e.forEach((function(e){var n=t._find(e);n&&(t.remove(n),n.destroy())}))}},{key:"_adjustPadding",value:function(e){if(!e.includes("attribution")&&!this._isOverridden("padding")){var t=this.padding.top;this.padding=t}}},{key:"_addComponents",value:function(e){var t=this;this.constructed&&e.forEach((function(e){return t.add(t._createComponent(e),t._defaultPositionLookup[e])}))}},{key:"_createComponent",value:function(e){var t=this._createWidget(e);return new g({id:e,node:t})}},{key:"_createWidget",value:function(e){var t=this.view;switch(e){case"attribution":return new se({view:t});case"compass":return new le.default({view:t});case"navigation-toggle":return new ue.default({view:t});case"zoom":return new ce.default({view:t})}}}]),n}(R);(0,u._)([(0,d.Cb)()],de.prototype,"components",void 0);var he=de=(0,u._)([(0,h.j)("esri.views.ui.DefaultUI")],de)},90316:function(e,t,n){n.d(t,{h:function(){return s}});var i,r=n(43144),o=n(15671),a=n(83826);function s(){return i||(i=function(){var e=new l,t=function(e){if("undefined"==typeof WebGL2RenderingContext)return null;var t=document.createElement("canvas");if(!t)return null;var n=(0,a.k)(t,{failIfMajorPerformanceCaveat:!0});if(null==n&&null!=(n=(0,a.k)(t))&&(e.majorPerformanceCaveat=!0),null==n)return n;e.available=!0,e.maxTextureSize=n.getParameter(n.MAX_TEXTURE_SIZE),e.supportsVertexShaderSamplers=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;var i=n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT);return i&&(e.supportsHighPrecisionFragment=i.precision>0),n}(e);return null==t||(e.supportsColorBufferFloat=null!==t.getExtension("EXT_color_buffer_float"),e.supportsColorBufferFloatBlend=null!==t.getExtension("EXT_float_blend"),e.supportsColorBufferHalfFloat=e.supportsColorBufferFloat||null!==t.getExtension("EXT_color_buffer_half_float")),e}()),i}var l=(0,r.Z)((function e(){(0,o.Z)(this,e),this.available=!1,this.majorPerformanceCaveat=!1,this.maxTextureSize=0,this.supportsVertexShaderSamplers=!1,this.supportsHighPrecisionFragment=!1,this.supportsColorBufferFloat=!1,this.supportsColorBufferFloatBlend=!1,this.supportsColorBufferHalfFloat=!1}))},83826:function(e,t,n){function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.getContext("webgl2",t);return n||null}n.d(t,{k:function(){return i}})},34347:function(e,t,n){n.r(t),n.d(t,{default:function(){return x}});var i=n(15671),r=n(43144),o=n(60136),a=n(29388),s=n(27366),l=n(49861),u=n(93169),c=(n(32718),n(84936),n(69912)),d=n(33565),h=n(97326),p=n(7138),v=n(94172),f=n(38499),y=n(37446),m=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(e){var r;return(0,i.Z)(this,n),(r=t.call(this,e)).orientation={x:0,y:0,z:0},r.view=null,r._updateForCamera=r._updateForCamera.bind((0,h.Z)(r)),r._updateForRotation=r._updateForRotation.bind((0,h.Z)(r)),r._updateRotationWatcher=r._updateRotationWatcher.bind((0,h.Z)(r)),r}return(0,r.Z)(n,[{key:"initialize",value:function(){var e=this;this.addHandles((0,v.watch)((function(){return e.view}),this._updateRotationWatcher,v.initial))}},{key:"destroy",value:function(){this.view=null}},{key:"canShowNorth",get:function(){return(0,y.z)(this.view)}},{key:"state",get:function(){var e;return null===(e=this.view)||void 0===e||!e.ready||"2d"===this.view.type&&!this.view.constraints.rotationEnabled?"disabled":this.canShowNorth?"compass":"rotation"}},{key:"reset",value:function(){var e,t;(null===(e=this.view)||void 0===e?void 0:e.ready)&&("2d"===(null===(t=this.view)||void 0===t?void 0:t.type)?this.callGoTo({target:{rotation:0},options:{animationMode:"always",duration:(0,f.HA)((0,u.Z)("mapview-essential-goto-duration"))}}):this.callGoTo({target:{heading:0}}))}},{key:"_updateForRotation",value:function(e){null!=e&&this._set("orientation",{z:e})}},{key:"_updateForCamera",value:function(e){if(e){var t=-e.heading;this._set("orientation",{x:0,y:0,z:t})}}},{key:"_updateRotationWatcher",value:function(e){this.removeAllHandles(),e&&this.addHandles("2d"===e.type?(0,v.watch)((function(){return null===e||void 0===e?void 0:e.rotation}),this._updateForRotation,v.initial):(0,v.watch)((function(){return null===e||void 0===e?void 0:e.camera}),this._updateForCamera,v.initial))}}]),n}((0,n(99505)._)(p.default));(0,s._)([(0,l.Cb)({readOnly:!0})],m.prototype,"canShowNorth",null),(0,s._)([(0,l.Cb)({readOnly:!0})],m.prototype,"orientation",void 0),(0,s._)([(0,l.Cb)({readOnly:!0})],m.prototype,"state",null),(0,s._)([(0,l.Cb)()],m.prototype,"view",void 0);var g=m=(0,s._)([(0,c.j)("esri.widgets.Compass.CompassViewModel")],m),_="esri-compass",w={base:_,iconContainer:"".concat(_,"__icon-container")},b=n(8905),k=n(7021),C=(n(80975),n(80532)),Z=n(67005),M=function(e){(0,o.Z)(s,e);var t=(0,a.Z)(s);function s(e,n){var r;return(0,i.Z)(this,s),(r=t.call(this,e,n)).messages=null,r.viewModel=new g,r._reset=function(){r.viewModel.reset()},r._toRotationTransform=function(e){return{transform:"rotateZ(".concat(e.z,"deg)")}},r}return(0,r.Z)(s,[{key:"loadDependencies",value:function(){return(0,b.h)({button:function(){return Promise.all([n.e(92358),n.e(46895),n.e(54438),n.e(14105),n.e(32275)]).then(n.bind(n,32275))},icon:function(){return Promise.all([n.e(92358),n.e(87474)]).then(n.bind(n,87474))}})}},{key:"goToOverride",get:function(){return this.viewModel.goToOverride},set:function(e){this.viewModel.goToOverride=e}},{key:"icon",get:function(){return"rotation"===this.viewModel.state?"arrow-up":"compass-needle"},set:function(e){this._overrideIfSome("icon",e)}},{key:"label",get:function(){var e,t;return null!==(e=null===(t=this.messages)||void 0===t?void 0:t.widgetLabel)&&void 0!==e?e:""},set:function(e){this._overrideIfSome("label",e)}},{key:"view",get:function(){return this.viewModel.view},set:function(e){this.viewModel.view=e}},{key:"reset",value:function(){return this.viewModel.reset()}},{key:"render",value:function(){var e=this.viewModel,t=e.orientation,n=e.state,i=this.messages;return(0,Z.u)("div",{class:this.classes(w.base,k.z.widget)},(0,Z.u)("calcite-button",{class:k.z.widgetButton,disabled:"disabled"===n,kind:"neutral",label:i.reset,onclick:this._reset,round:!0,scale:"s",title:i.reset},(0,Z.u)("div",{"aria-hidden":"true",class:w.iconContainer,title:i.reset},(0,Z.u)("calcite-icon",{icon:this.icon,styles:this._toRotationTransform(t)}))))}}]),s}(d.Z);(0,s._)([(0,l.Cb)()],M.prototype,"goToOverride",null),(0,s._)([(0,l.Cb)()],M.prototype,"icon",null),(0,s._)([(0,l.Cb)()],M.prototype,"label",null),(0,s._)([(0,l.Cb)(),(0,C.H)("esri/widgets/Compass/t9n/Compass")],M.prototype,"messages",void 0),(0,s._)([(0,l.Cb)()],M.prototype,"view",null),(0,s._)([(0,l.Cb)({type:g})],M.prototype,"viewModel",void 0);var x=M=(0,s._)([(0,c.j)("esri.widgets.Compass")],M)},37446:function(e,t,n){function i(e){var t,n;return(null===e||void 0===e||null===(t=e.spatialReference)||void 0===t?void 0:t.isWebMercator)||(null===e||void 0===e||null===(n=e.spatialReference)||void 0===n?void 0:n.isGeographic)||!1}n.d(t,{z:function(){return i}})},717:function(e,t,n){n.r(t),n.d(t,{default:function(){return C}});var i=n(4942),r=n(15671),o=n(43144),a=n(60136),s=n(29388),l=n(27366),u=n(49861),c=(n(93169),n(32718),n(84936),n(69912)),d=n(33565),h="esri-navigation-toggle",p={base:h,isLayoutHorizontal:"".concat(h,"--horizontal")},v=n(7138),f=n(94172),y=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e){var i;return(0,r.Z)(this,n),(i=t.call(this,e))._navigationMode="pan",i.view=null,i}return(0,o.Z)(n,[{key:"initialize",value:function(){var e=this;this.addHandles((0,f.when)((function(){var t;return null===(t=e.view)||void 0===t?void 0:t.inputManager}),(function(){return e._setNavigationMode()})))}},{key:"destroy",value:function(){this.view=null}},{key:"state",get:function(){var e,t;return null!==(e=this.view)&&void 0!==e&&e.ready&&"3d"===(null===(t=this.view)||void 0===t?void 0:t.type)?"ready":"disabled"}},{key:"navigationMode",get:function(){return this._navigationMode},set:function(e){this._navigationMode=e,this._setNavigationMode()}},{key:"toggle",value:function(){"disabled"!==this.state&&(this.navigationMode="pan"!==this.navigationMode?"pan":"rotate")}},{key:"_setNavigationMode",value:function(){var e,t=null===(e=this.view)||void 0===e?void 0:e.inputManager;t&&(t.primaryDragAction="pan"===this._navigationMode?"pan":"rotate")}}]),n}(v.default);(0,l._)([(0,u.Cb)({readOnly:!0})],y.prototype,"state",null),(0,l._)([(0,u.Cb)()],y.prototype,"_navigationMode",void 0),(0,l._)([(0,u.Cb)()],y.prototype,"view",void 0);var m=y=(0,l._)([(0,c.j)("esri.widgets.NavigationToggle.NavigationToggleViewModel")],y),g=n(8905),_=n(7021),w=(n(80975),n(80532)),b=n(67005),k=function(e){(0,a.Z)(l,e);var t=(0,s.Z)(l);function l(e,n){var i;return(0,r.Z)(this,l),(i=t.call(this,e,n)).messages=null,i.viewModel=new m,i.toggle=function(){return i.viewModel.toggle()},i._panButton=null,i._rotateButton=null,i._toggle=function(){var e,t="pan"===(null===(e=i.viewModel)||void 0===e?void 0:e.navigationMode)?i._rotateButton:i._panButton;null!==t&&void 0!==t&&t.setFocus(),i.toggle()},i}return(0,o.Z)(l,[{key:"loadDependencies",value:function(){return(0,g.h)({button:function(){return Promise.all([n.e(92358),n.e(46895),n.e(54438),n.e(14105),n.e(32275)]).then(n.bind(n,32275))}})}},{key:"icon",get:function(){return"move"},set:function(e){this._overrideIfSome("icon",e)}},{key:"label",get:function(){var e,t;return null!==(e=null===(t=this.messages)||void 0===t?void 0:t.widgetLabel)&&void 0!==e?e:""},set:function(e){this._overrideIfSome("label",e)}},{key:"layout",set:function(e){"horizontal"!==e&&(e="vertical"),this._set("layout",e)}},{key:"view",get:function(){return this.viewModel.view},set:function(e){this.viewModel.view=e}},{key:"render",value:function(){var e,t,n=this,r="disabled"===(null===(e=this.viewModel)||void 0===e?void 0:e.state),o="pan"===(null===(t=this.viewModel)||void 0===t?void 0:t.navigationMode),a=this.messages.toggle;return(0,b.u)("div",{class:this.classes(p.base,_.z.widget,(0,i.Z)({},p.isLayoutHorizontal,"horizontal"===this.layout))},(0,b.u)("calcite-button",{afterCreate:function(e){n._panButton=e},appearance:o?"outline-fill":"solid",class:_.z.widgetButton,disabled:r,iconStart:"move",kind:"neutral",label:a,onclick:this._toggle,tabIndex:o?void 0:-1,title:a}),(0,b.u)("calcite-button",{afterCreate:function(e){n._rotateButton=e},appearance:o?"solid":"outline-fill",class:_.z.widgetButton,disabled:r,iconStart:"rotate",kind:"neutral",label:a,onclick:this._toggle,tabIndex:o?-1:void 0,title:a}))}}]),l}(d.Z);(0,l._)([(0,u.Cb)()],k.prototype,"icon",null),(0,l._)([(0,u.Cb)()],k.prototype,"label",null),(0,l._)([(0,u.Cb)({value:"vertical"})],k.prototype,"layout",null),(0,l._)([(0,u.Cb)(),(0,w.H)("esri/widgets/NavigationToggle/t9n/NavigationToggle")],k.prototype,"messages",void 0),(0,l._)([(0,u.Cb)()],k.prototype,"view",null),(0,l._)([(0,u.Cb)({type:m})],k.prototype,"viewModel",void 0);var C=k=(0,l._)([(0,c.j)("esri.widgets.NavigationToggle")],k)},29966:function(e,t,n){n.r(t),n.d(t,{default:function(){return w}});var i=n(4942),r=n(15671),o=n(43144),a=n(60136),s=n(29388),l=n(27366),u=n(49861),c=(n(93169),n(32718),n(84936),n(69912)),d=n(33565),h=n(8905),p=n(7021),v=(n(80975),n(80532)),f=n(67005),y=n(58266),m="esri-zoom",g="esri-zoom--horizontal",_=function(e){(0,a.Z)(l,e);var t=(0,s.Z)(l);function l(e,n){var i;return(0,r.Z)(this,l),(i=t.call(this,e,n)).messages=null,i.viewModel=new y.Z,i.zoomIn=function(){return i.viewModel.zoomIn()},i.zoomOut=function(){return i.viewModel.zoomOut()},i}return(0,o.Z)(l,[{key:"loadDependencies",value:function(){return(0,h.h)({button:function(){return Promise.all([n.e(92358),n.e(46895),n.e(54438),n.e(14105),n.e(32275)]).then(n.bind(n,32275))}})}},{key:"icon",get:function(){return"magnifying-glass-plus"},set:function(e){this._overrideIfSome("icon",e)}},{key:"label",get:function(){var e,t;return null!==(e=null===(t=this.messages)||void 0===t?void 0:t.widgetLabel)&&void 0!==e?e:""},set:function(e){this._overrideIfSome("label",e)}},{key:"layout",set:function(e){"horizontal"!==e&&(e="vertical"),this._set("layout",e)}},{key:"view",get:function(){return this.viewModel.view},set:function(e){this.viewModel.view=e}},{key:"render",value:function(){var e=(0,i.Z)({},g,"horizontal"===this.layout),t=this.viewModel,n=t.canZoomIn,r=t.canZoomOut,o=this.messages,a=o.zoomIn,s=o.zoomOut;return(0,f.u)("div",{class:this.classes(m,p.z.widget,e)},(0,f.u)("calcite-button",{class:p.z.widgetButton,disabled:!n,iconStart:"plus",kind:"neutral",label:a,onclick:this.zoomIn,title:a}),(0,f.u)("calcite-button",{class:p.z.widgetButton,disabled:!r,iconStart:"minus",kind:"neutral",label:s,onclick:this.zoomOut,title:s}))}}]),l}(d.Z);(0,l._)([(0,u.Cb)()],_.prototype,"icon",null),(0,l._)([(0,u.Cb)()],_.prototype,"label",null),(0,l._)([(0,u.Cb)({value:"vertical"})],_.prototype,"layout",null),(0,l._)([(0,u.Cb)(),(0,v.H)("esri/widgets/Zoom/t9n/Zoom")],_.prototype,"messages",void 0),(0,l._)([(0,u.Cb)()],_.prototype,"view",null),(0,l._)([(0,u.Cb)({type:y.Z})],_.prototype,"viewModel",void 0);var w=_=(0,l._)([(0,c.j)("esri.widgets.Zoom")],_)},58266:function(e,t,n){n.d(t,{Z:function(){return m}});var i=n(15671),r=n(43144),o=n(60136),a=n(29388),s=n(27366),l=n(7138),u=n(66978),c=n(49861),d=(n(93169),n(32718),n(84936),n(69912)),h=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,r.Z)(n,[{key:"canZoomIn",get:function(){var e,t,n;if(!(null===(e=this.view)||void 0===e?void 0:e.ready))return!1;var i=null===(t=this.view)||void 0===t||null===(n=t.constraints)||void 0===n?void 0:n.effectiveMaxScale;return 0===i||this._scale>i}},{key:"canZoomOut",get:function(){var e,t=this.view;if(!(null===t||void 0===t?void 0:t.ready))return!1;var n=null===(e=t.constraints)||void 0===e?void 0:e.effectiveMinScale;return 0===n||this._scale<n}},{key:"_scale",get:function(){var e,t,n,i,r,o=null===(e=this.view)||void 0===e||null===(t=e.animation)||void 0===t?void 0:t.target;return null!==(n=null!==(i=o&&"then"in o||null===o||void 0===o?void 0:o.scale)&&void 0!==i?i:null===(r=this.view)||void 0===r?void 0:r.scale)&&void 0!==n?n:0}}]),n}(l.default);(0,s._)([(0,c.Cb)({readOnly:!0})],h.prototype,"canZoomIn",null),(0,s._)([(0,c.Cb)({readOnly:!0})],h.prototype,"canZoomOut",null),(0,s._)([(0,c.Cb)()],h.prototype,"view",void 0),(0,s._)([(0,c.Cb)()],h.prototype,"_scale",null);var p=h=(0,s._)([(0,d.j)("esri.widgets.Zoom.ZoomConditions2D")],h),v=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,r.Z)(n,[{key:"canZoomIn",get:function(){return!!this.view.ready}},{key:"canZoomOut",get:function(){return!!this.view.ready}}]),n}(l.default);(0,s._)([(0,c.Cb)({readOnly:!0})],v.prototype,"canZoomIn",null),(0,s._)([(0,c.Cb)({readOnly:!0})],v.prototype,"canZoomOut",null),(0,s._)([(0,c.Cb)()],v.prototype,"view",void 0);var f=v=(0,s._)([(0,d.j)("esri.widgets.Zoom.ZoomConditions3D")],v),y=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(e){return(0,i.Z)(this,n),t.call(this,e)}return(0,r.Z)(n,[{key:"destroy",value:function(){this.view=null}},{key:"canZoomIn",get:function(){return null!=this._zoomConditions&&this._zoomConditions.canZoomIn}},{key:"canZoomOut",get:function(){var e;return null!=this._zoomConditions&&(null===(e=this._zoomConditions)||void 0===e?void 0:e.canZoomOut)}},{key:"state",get:function(){var e;return null!==(e=this.view)&&void 0!==e&&e.ready?"ready":"disabled"}},{key:"view",set:function(e){e?"2d"===e.type?this._zoomConditions=new p({view:e}):"3d"===e.type&&(this._zoomConditions=new f({view:e})):this._zoomConditions=null,this._set("view",e)}},{key:"zoomIn",value:function(){if(this.canZoomIn){var e=this.view;"2d"===e.type?e.mapViewNavigation.zoomIn():(0,u.R8)(e.goTo({zoomFactor:2}))}}},{key:"zoomOut",value:function(){if(this.canZoomOut){var e=this.view;"2d"===e.type?e.mapViewNavigation.zoomOut():(0,u.R8)(e.goTo({zoomFactor:.5}))}}}]),n}(l.default);(0,s._)([(0,c.Cb)()],y.prototype,"_zoomConditions",void 0),(0,s._)([(0,c.Cb)()],y.prototype,"canZoomIn",null),(0,s._)([(0,c.Cb)()],y.prototype,"canZoomOut",null),(0,s._)([(0,c.Cb)({readOnly:!0})],y.prototype,"state",null),(0,s._)([(0,c.Cb)()],y.prototype,"view",null);var m=y=(0,s._)([(0,d.j)("esri.widgets.Zoom.ZoomViewModel")],y)},99505:function(e,t,n){n.d(t,{_:function(){return d}});var i=n(15671),r=n(43144),o=n(60136),a=n(29388),s=n(27366),l=n(92026),u=n(49861),c=(n(93169),n(32718),n(84936),n(69912)),d=function(e){var t=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(){var e;(0,i.Z)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).goToOverride=null,e.view=null,e}return(0,r.Z)(n,[{key:"callGoTo",value:function(e){var t=this.view;return(0,l.O3)(t),this.goToOverride?this.goToOverride(t,e):t.goTo(e.target,e.options)}}]),n}(e);return(0,s._)([(0,u.Cb)()],t.prototype,"goToOverride",void 0),(0,s._)([(0,u.Cb)()],t.prototype,"view",void 0),t=(0,s._)([(0,c.j)("esri.widgets.support.GoTo")],t)}},78088:function(e,t,n){n.d(t,{h:function(){return r}});var i=n(80975);function r(){return function(e,t){if(!e[t])throw new TypeError("Cannot auto bind undefined function '".concat(String(t),"'"));return{value:a(e[t])}}}function o(e){var t=null===e||void 0===e?void 0:e.type;return e instanceof KeyboardEvent||"keyup"===t||"keydown"===t||"keypress"===t}function a(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];o(t)?(0,i.pf)(t.key)&&(t.preventDefault(),t.stopPropagation(),t.target.click()):e.call.apply(e,[this,t].concat(r))}}}}]);
//# sourceMappingURL=55086.c6acdc76.chunk.js.map