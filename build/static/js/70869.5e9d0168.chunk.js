"use strict";(self.webpackChunkreact_training=self.webpackChunkreact_training||[]).push([[70869],{18442:function(e,t,r){r.d(t,{Z:function(){return l}});var n=r(15671),i=r(43144),o=r(39052),a=r(56885),l=function(e,t){function r(e){(0,n.Z)(this,r),this._observable=new a.s,this._map=new Map(e)}return(0,i.Z)(r,[{key:"size",get:function(){return(0,o.it)(this._observable),this._map.size}},{key:"clear",value:function(){this._map.size>0&&(this._map.clear(),this._observable.notify())}},{key:"delete",value:function(e){var t=this._map.delete(e);return t&&this._observable.notify(),t}},{key:"entries",value:function(){return(0,o.it)(this._observable),this._map.entries()}},{key:"forEach",value:function(e,t){var r=this;(0,o.it)(this._observable),this._map.forEach((function(n,i){return e.call(t,n,i,r)}),t)}},{key:"get",value:function(e){return(0,o.it)(this._observable),this._map.get(e)}},{key:"has",value:function(e){return(0,o.it)(this._observable),this._map.has(e)}},{key:"keys",value:function(){return(0,o.it)(this._observable),this._map.keys()}},{key:"set",value:function(e,t){return this._map.set(e,t),this._observable.notify(),this}},{key:"values",value:function(){return(0,o.it)(this._observable),this._map.values()}},{key:e,value:function(){return(0,o.it)(this._observable),this._map[Symbol.iterator]()}},{key:t,get:function(){return this._map[Symbol.toStringTag]}}]),r}(Symbol.iterator,Symbol.toStringTag)},76432:function(e,t,r){r.d(t,{t:function(){return s}});var n=r(15671),i=r(43144),o=r(84652),a=r(39052),l=r(56885),u=function(){function e(t,r){(0,n.Z)(this,e),this._observable=new l.s,this._value=t,this._equalityFunction=r}return(0,i.Z)(e,[{key:"value",get:function(){return(0,a.it)(this._observable),this._value},set:function(e){this._equalityFunction(e,this._value)||(this._value=e,this._observable.notify())}},{key:"mutate",value:function(e){e(this._value),this._observable.notify()}}]),e}();function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.y7;return new u(e,t)}},70869:function(e,t,r){r.r(t),r.d(t,{default:function(){return Ie}});var n=r(93433),i=r(1413),o=r(37762),a=r(74165),l=r(15861),u=r(15671),s=r(43144),d=r(97326),p=r(88301),y=r(61120),c=r(60136),f=r(29388),v=r(27366),h=r(76200),b=r(80987),m=r(10064),_=r(77427),g=r(97642),k=r(66978),Z=r(35995),w=r(49861),C=(r(93169),r(32718),r(84936),r(69912)),x=r(30651),F=r(42537),I=r(16054),O=r(18442),T=r(94172),S=r(76432),L=r(25243),j=r(6693),E=r(56811),R=r(70361),q=r(38186),P=r(71486),V=function(e){(0,c.Z)(r,e);var t=(0,f.Z)(r);function r(e){var n;return(0,u.Z)(this,r),(n=t.call(this,e))._layerCache=new I.z(20,(function(e){return e.destroy()})),n._oidToReference=new O.Z,n._layerToReference=new Map,n.layers=new b.Z,n.maximumVisibleSublayers=10,n.opacity=1,n.parent=null,n.persistenceEnabled=!0,n.title="Layers in view",n.type="catalog-dynamic-group",n.visible=!0,n}return(0,s.Z)(r,[{key:"initialize",value:function(){var e=this;this.addHandles([this.layers.on("after-add",(function(t){t.item.parent=e})),this.layers.on("after-remove",(function(e){e.item.parent=null})),(0,T.watch)((function(){return e._orderBy}),(function(){e._updateLayerSortValues(),e._sortAllLayers()}))])}},{key:"load",value:function(e){return this.addResolvingPromise(this.parent.load()),Promise.resolve(this)}},{key:"destroy",value:function(){this._layerCache.destroy(),this._oidToReference.clear(),this._layerToReference.clear()}},{key:"_orderBy",get:function(){var e,t;return this.parent?null!==(e=null===(t=this.parent.orderBy)||void 0===t?void 0:t.find((function(e){return!e.valueExpression&&e.field})))&&void 0!==e?e:new q.Z({field:this.parent.objectIdField}):null}},{key:"_referenceComparator",get:function(){var e=this._orderBy;if(!this.parent||!e)return function(){return 0};var t=this.parent.fieldsIndex.get(e.field),r=(0,P.Lq)(null===t||void 0===t?void 0:t.toJSON().type,"descending"===e.order),n=(0,P.Lq)("esriFieldTypeOID","descending"===e.order);return function(e,t){return r(t.sortValue,e.sortValue)||n(t.objectId,e.objectId)}}},{key:"fullExtent",get:function(){var e,t;return null!==(e=null===(t=this.parent)||void 0===t?void 0:t.fullExtent)&&void 0!==e?e:null}},{key:"updating",get:function(){return(0,_.oE)(this._oidToReference,(function(e){return null!=e.pending}))}},{key:"acquireLayer",value:function(e){var t=this;if(this.destroyed)return(0,F.kB)();var r=this._getLayerReference(e);return r.count++,(0,F.kB)((function(){r.count--,r.count||t._destroyLayerReference(r)}))}},{key:"_getLayerReference",value:function(e){var t=this,r=e.getObjectId();return(0,_.s1)(this._oidToReference,r,(function(){var r=e.getObjectId(),n="".concat(r),i=e.getAttribute(t.parent.itemSourceField),o=new M(e,r,i),a=t._layerCache.pop(n);return a?(t._addLayer(o,a),o):(o.pending=t.parent.createLayerFromFootprint(e).then((function(e){o.count?t._addLayer(o,e):(t.destroyed||t._layerCache.get(n)||t._layerCache.put(n,e),o.layer=null)})).catch((function(){})).finally((function(){o.pending=null})),o)}))}},{key:"_destroyLayerReference",value:function(e){e.layer&&(this._layerToReference.delete(e.layer),this.layers.remove(e.layer),this.destroyed?e.layer.destroy():this._layerCache.put("".concat(e.objectId),e.layer),e.layer=null),this._oidToReference.delete(e.objectId)}},{key:"_addLayer",value:function(e,t){e.layer=t,t.persistenceEnabled=!1,this._layerToReference.set(t,e),this._updateLayerSortValue(e),this.layers.add(t),this._sortAllLayers()}},{key:"_updateLayerSortValues",value:function(){var e,t=(0,o.Z)(this._layerToReference.values());try{for(t.s();!(e=t.n()).done;){var r=e.value;this._updateLayerSortValue(r)}}catch(n){t.e(n)}finally{t.f()}}},{key:"_updateLayerSortValue",value:function(e){this._orderBy&&(e.sortValue=e.footprint.getAttribute(this._orderBy.field))}},{key:"_sortAllLayers",value:function(){var e=this;this.layers.sort((function(t,r){return e._referenceComparator(e._layerToReference.get(t),e._layerToReference.get(r))}))}}]),r}((0,E.M)((0,j.h7)((0,g.R)(x.Z))));(0,v._)([(0,w.Cb)()],V.prototype,"_orderBy",null),(0,v._)([(0,w.Cb)({readOnly:!0})],V.prototype,"_referenceComparator",null),(0,v._)([(0,w.Cb)({type:["show","hide","hide-children"],json:{write:!0}})],V.prototype,"listMode",void 0),(0,v._)([(0,w.Cb)({readOnly:!0})],V.prototype,"fullExtent",null),(0,v._)([(0,w.Cb)({type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}},write:{ignoreOrigin:!0}}})],V.prototype,"id",void 0),(0,v._)([(0,w.Cb)({readOnly:!0})],V.prototype,"layers",void 0),(0,v._)([(0,w.Cb)({type:L.z8,range:{min:0,max:50},json:{write:!0,default:10}})],V.prototype,"maximumVisibleSublayers",void 0),(0,v._)([(0,w.Cb)(R.Oh)],V.prototype,"opacity",void 0),(0,v._)([(0,w.Cb)({clonable:!1})],V.prototype,"parent",void 0),(0,v._)([(0,w.Cb)({type:String,nonNullable:!0,json:{write:{ignoreOrigin:!0,isRequired:!0}}})],V.prototype,"title",void 0),(0,v._)([(0,w.Cb)({json:{read:!1}})],V.prototype,"type",void 0),(0,v._)([(0,w.Cb)({readOnly:!0})],V.prototype,"updating",null),(0,v._)([(0,w.Cb)({type:Boolean,json:{name:"visibility",write:!0}})],V.prototype,"visible",void 0);var B=V=(0,v._)([(0,C.j)("esri.layers.catalog.CatalogDynamicGroupLayer")],V),M=function(){function e(t,r,n){(0,u.Z)(this,e),this.footprint=t,this.objectId=r,this.itemSource=n,this.count=0,this.layer=null,this.sortValue=void 0,this._pending=(0,S.t)(null)}return(0,s.Z)(e,[{key:"pending",get:function(){return this._pending.value},set:function(e){this._pending.value=e}}]),e}(),N=r(44055),A=(r(94931),r(15126),r(98689),r(57823),r(32066),r(49018),r(34999)),D=(r(28189),r(9014),r(40464)),Q=r(84652),U=r(25265),G=r(40934),z=r(7632),J=r(37270),K=r(77748),H=r(85116),Y=r(81085),W=r(61459);var X=function(e){(0,c.Z)(r,e);var t=(0,f.Z)(r);function r(e){var n;return(0,u.Z)(this,r),(n=t.call(this,e)).charts=null,n.editingEnabled=!0,n.elevationInfo=null,n.formTemplate=null,n.labelingInfo=null,n.labelsVisible=!0,n.legendEnabled=!0,n.maxScale=0,n.minScale=0,n.opacity=1,n.parent=null,n.persistenceEnabled=!0,n.popupEnabled=!0,n.popupTemplate=null,n.title="Footprints",n.type="catalog-footprint",n.visible=!0,n}return(0,s.Z)(r,[{key:"load",value:function(e){return this.addResolvingPromise(this._doLoad(e)),Promise.resolve(this)}},{key:"_doLoad",value:function(){var e=(0,l.Z)((0,a.Z)().mark((function e(t){var r=this;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.parent.load(t);case 2:(0,J.YN)(this.renderer,this.fieldsIndex),this.addHandles([this.parent.on("apply-edits",(function(e){return r.emit("apply-edits",e)})),this.parent.on("edits",(function(e){return r.emit("edits",e)})),this.parent.on("refresh",(function(e){return r.emit("refresh",e)}))]);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"apiKey",get:function(){var e;return null===(e=this.parent)||void 0===e?void 0:e.apiKey}},{key:"capabilities",get:function(){var e;return null===(e=this.parent)||void 0===e?void 0:e.capabilities}},{key:"customParameters",get:function(){var e;return null===(e=this.parent)||void 0===e?void 0:e.customParameters}},{key:"dateFieldsTimeZone",get:function(){var e,t;return null!==(e=null===(t=this.parent)||void 0===t?void 0:t.dateFieldsTimeZone)&&void 0!==e?e:null}},{key:"datesInUnknownTimezone",get:function(){var e,t;return null!==(e=null===(t=this.parent)||void 0===t?void 0:t.datesInUnknownTimezone)&&void 0!==e&&e}},{key:"definitionExpression",get:function(){var e;return null===(e=this.parent)||void 0===e?void 0:e.definitionExpression}},{key:"editingInfo",get:function(){var e;return null===(e=this.parent)||void 0===e?void 0:e.editingInfo}},{key:"effectiveCapabilities",get:function(){var e;return null===(e=this.parent)||void 0===e?void 0:e.effectiveCapabilities}},{key:"createQueryVersion",get:function(){var e;return null===(e=this.parent)||void 0===e?void 0:e.createQueryVersion}},{key:"defaultPopupTemplate",get:function(){return this.createPopupTemplate()}},{key:"displayField",get:function(){var e;return null===(e=this.parent)||void 0===e?void 0:e.displayField}},{key:"effectiveEditingEnabled",get:function(){return!1}},{key:"fields",get:function(){var e;return null===(e=this.parent)||void 0===e?void 0:e.fields}},{key:"fieldsIndex",get:function(){var e;return null===(e=this.parent)||void 0===e?void 0:e.fieldsIndex}},{key:"fullExtent",get:function(){var e;return null===(e=this.parent)||void 0===e?void 0:e.fullExtent}},{key:"geometryFieldsInfo",get:function(){var e;return null===(e=this.parent)||void 0===e?void 0:e.geometryFieldsInfo}},{key:"geometryType",get:function(){var e;return null===(e=this.parent)||void 0===e?void 0:e.geometryType}},{key:"globalIdField",get:function(){var e;return null===(e=this.parent)||void 0===e?void 0:e.globalIdField}},{key:"hasM",get:function(){var e,t;return null!==(e=null===(t=this.parent)||void 0===t?void 0:t.hasM)&&void 0!==e&&e}},{key:"hasZ",get:function(){var e,t;return null!==(e=null===(t=this.parent)||void 0===t?void 0:t.hasZ)&&void 0!==e&&e}},{key:"objectIdField",get:function(){var e;return null===(e=this.parent)||void 0===e?void 0:e.objectIdField}},{key:"orderBy",get:function(){var e,t;return null!==(e=null===(t=this.parent)||void 0===t?void 0:t.orderBy)&&void 0!==e?e:null}},{key:"outFields",get:function(){var e;return null===(e=this.parent)||void 0===e?void 0:e.outFields}},{key:"parsedUrl",get:function(){var e,t;return null!==(e=null===(t=this.parent)||void 0===t?void 0:t.parsedUrl)&&void 0!==e?e:null}},{key:"preferredTimeZone",get:function(){var e,t;return null!==(e=null===(t=this.parent)||void 0===t?void 0:t.preferredTimeZone)&&void 0!==e?e:null}},{key:"renderer",get:function(){return this._isOverridden("renderer")?this._get("renderer"):function(){var e=new W.default({style:"solid",color:[0,0,0,0],outline:{style:"solid",color:[96,96,96,.75],width:.75}});return new A.Z({symbol:e})}()},set:function(e){(0,J.YN)(e,this.fieldsIndex),this._set("renderer",e)}},{key:"returnM",get:function(){var e;return null===(e=this.parent)||void 0===e?void 0:e.returnM}},{key:"returnZ",get:function(){var e;return null===(e=this.parent)||void 0===e?void 0:e.returnZ}},{key:"source",get:function(){var e;return null===(e=this.parent)||void 0===e?void 0:e.source}},{key:"timeExtent",get:function(){var e;return null===(e=this.parent)||void 0===e?void 0:e.timeExtent}},{key:"timeInfo",get:function(){var e;return null===(e=this.parent)||void 0===e?void 0:e.timeInfo}},{key:"timeOffset",get:function(){var e;return null===(e=this.parent)||void 0===e?void 0:e.timeOffset}},{key:"typeIdField",get:function(){var e;return null===(e=this.parent)||void 0===e?void 0:e.typeIdField}},{key:"types",get:function(){var e;return null===(e=this.parent)||void 0===e?void 0:e.types}},{key:"useViewTime",get:function(){var e,t;return null===(e=null===(t=this.parent)||void 0===t?void 0:t.useViewTime)||void 0===e||e}},{key:"version",get:function(){var e;return null===(e=this.parent)||void 0===e?void 0:e.version}},{key:"applyEdits",value:function(){var e=(0,l.Z)((0,a.Z)().mark((function e(t,r){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:return e.abrupt("return",this.parent.applyEdits(t,r));case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"createPopupTemplate",value:function(e){var t={fields:this.fields,objectIdField:this.objectIdField,title:this.title};return(0,Y.eZ)(t,e)}},{key:"createQuery",value:function(){var e;return null===(e=this.parent)||void 0===e?void 0:e.createQuery()}},{key:"getField",value:function(e){var t;return null===(t=this.parent)||void 0===t?void 0:t.getField(e)}},{key:"getFieldDomain",value:function(e,t){var r;return null===(r=this.parent)||void 0===r?void 0:r.getFieldDomain(e,t)}},{key:"queryExtent",value:function(){var e=(0,l.Z)((0,a.Z)().mark((function e(t,r){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:return e.abrupt("return",this.parent.queryExtent(t,r));case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"queryFeatures",value:function(){var e=(0,l.Z)((0,a.Z)().mark((function e(t,r){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:return e.abrupt("return",this.parent.queryFeatures(t,r));case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"queryFeatureCount",value:function(){var e=(0,l.Z)((0,a.Z)().mark((function e(t,r){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:return e.abrupt("return",this.parent.queryFeatureCount(t,r));case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"queryObjectIds",value:function(){var e=(0,l.Z)((0,a.Z)().mark((function e(t,r){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:return e.abrupt("return",this.parent.queryObjectIds(t,r));case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()}]),r}((0,E.M)((0,z.b)((0,j.h7)((0,g.R)(x.Z)))));(0,v._)([(0,w.Cb)({readOnly:!0})],X.prototype,"apiKey",null),(0,v._)([(0,w.Cb)({readOnly:!0})],X.prototype,"capabilities",null),(0,v._)([(0,w.Cb)({readOnly:!0})],X.prototype,"customParameters",null),(0,v._)([(0,w.Cb)()],X.prototype,"dateFieldsTimeZone",null),(0,v._)([(0,w.Cb)({readOnly:!0})],X.prototype,"datesInUnknownTimezone",null),(0,v._)([(0,w.Cb)({readOnly:!0})],X.prototype,"definitionExpression",null),(0,v._)([(0,w.Cb)({readOnly:!0})],X.prototype,"editingInfo",null),(0,v._)([(0,w.Cb)({readOnly:!0})],X.prototype,"effectiveCapabilities",null),(0,v._)([(0,w.Cb)({json:{origins:{"web-scene":{write:!1}},write:!0}})],X.prototype,"charts",void 0),(0,v._)([(0,w.Cb)({readOnly:!0})],X.prototype,"createQueryVersion",null),(0,v._)([(0,w.Cb)({readOnly:!0})],X.prototype,"defaultPopupTemplate",null),(0,v._)([(0,w.Cb)()],X.prototype,"displayField",null),(0,v._)([(0,w.Cb)({type:Boolean,nonNullable:!0,json:{name:"enableEditing",write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],X.prototype,"editingEnabled",void 0),(0,v._)([(0,w.Cb)({readOnly:!0})],X.prototype,"effectiveEditingEnabled",null),(0,v._)([(0,w.Cb)(function(){var e=(0,Q.d9)(R.PV);return e.json.origins["web-map"]={read:!1,write:!1},e}())],X.prototype,"elevationInfo",void 0),(0,v._)([(0,w.Cb)({readOnly:!0})],X.prototype,"fields",null),(0,v._)([(0,w.Cb)({readOnly:!0})],X.prototype,"fieldsIndex",null),(0,v._)([(0,w.Cb)({type:G.Z,json:{name:"formInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],X.prototype,"formTemplate",void 0),(0,v._)([(0,w.Cb)({readOnly:!0})],X.prototype,"fullExtent",null),(0,v._)([(0,w.Cb)({readOnly:!0})],X.prototype,"geometryFieldsInfo",null),(0,v._)([(0,w.Cb)({readOnly:!0})],X.prototype,"geometryType",null),(0,v._)([(0,w.Cb)({readOnly:!0})],X.prototype,"globalIdField",null),(0,v._)([(0,w.Cb)({readOnly:!0})],X.prototype,"hasM",null),(0,v._)([(0,w.Cb)({readOnly:!0})],X.prototype,"hasZ",null),(0,v._)([(0,w.Cb)({type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}},write:{ignoreOrigin:!0}}})],X.prototype,"id",void 0),(0,v._)([(0,w.Cb)({type:[K.Z],json:{name:"layerDefinition.drawingInfo.labelingInfo",read:H.r,write:!0}})],X.prototype,"labelingInfo",void 0),(0,v._)([(0,w.Cb)(R.iR)],X.prototype,"labelsVisible",void 0),(0,v._)([(0,w.Cb)(R.rn)],X.prototype,"legendEnabled",void 0),(0,v._)([(0,w.Cb)({type:["show","hide"],json:{write:!0}})],X.prototype,"listMode",void 0),(0,v._)([(0,w.Cb)(function(){var e=(0,Q.d9)(R.u1);return e.json.origins.service.read=!1,e}())],X.prototype,"maxScale",void 0),(0,v._)([(0,w.Cb)(function(){var e=(0,Q.d9)(R.rO);return e.json.origins.service.read=!1,e}())],X.prototype,"minScale",void 0),(0,v._)([(0,w.Cb)({readOnly:!0})],X.prototype,"objectIdField",null),(0,v._)([(0,w.Cb)(R.Oh)],X.prototype,"opacity",void 0),(0,v._)([(0,w.Cb)({readOnly:!0})],X.prototype,"orderBy",null),(0,v._)([(0,w.Cb)({readOnly:!0})],X.prototype,"outFields",null),(0,v._)([(0,w.Cb)({clonable:!1})],X.prototype,"parent",void 0),(0,v._)([(0,w.Cb)({readOnly:!0})],X.prototype,"parsedUrl",null),(0,v._)([(0,w.Cb)(R.C_)],X.prototype,"popupEnabled",void 0),(0,v._)([(0,w.Cb)({type:N.Z,json:{name:"popupInfo",write:!0}})],X.prototype,"popupTemplate",void 0),(0,v._)([(0,w.Cb)({readOnly:!0})],X.prototype,"preferredTimeZone",null),(0,v._)([(0,w.Cb)({types:D.A,json:{origins:{"web-scene":{types:D.o}},name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:function(e,t){return{ignoreOrigin:this.originIdOf(t)<U.s3.PORTAL_ITEM}}}}})],X.prototype,"renderer",null),(0,v._)([(0,w.Cb)({readOnly:!0})],X.prototype,"returnM",null),(0,v._)([(0,w.Cb)({readOnly:!0})],X.prototype,"returnZ",null),(0,v._)([(0,w.Cb)({readOnly:!0})],X.prototype,"source",null),(0,v._)([(0,w.Cb)({readOnly:!0})],X.prototype,"timeExtent",null),(0,v._)([(0,w.Cb)({readOnly:!0})],X.prototype,"timeInfo",null),(0,v._)([(0,w.Cb)({readOnly:!0})],X.prototype,"timeOffset",null),(0,v._)([(0,w.Cb)({type:String,nonNullable:!0,json:{write:{ignoreOrigin:!0,isRequired:!0}}})],X.prototype,"title",void 0),(0,v._)([(0,w.Cb)({json:{read:!1}})],X.prototype,"type",void 0),(0,v._)([(0,w.Cb)({readOnly:!0})],X.prototype,"typeIdField",null),(0,v._)([(0,w.Cb)({readOnly:!0})],X.prototype,"types",null),(0,v._)([(0,w.Cb)({readOnly:!0})],X.prototype,"useViewTime",null),(0,v._)([(0,w.Cb)({type:Boolean,json:{name:"visibility",write:!0}})],X.prototype,"visible",void 0);var $=X=(0,v._)([(0,C.j)("esri.layers.catalog.CatalogFootprintLayer")],X),ee=r(15026),te=r(27961),re=r(11936),ne=r(46671),ie=r(56601),oe=r(62393),ae=r(6061),le=r(9855),ue=r(29598),se=r(71684),de=r(99063),pe=r(62594),ye=r(87165),ce=r(25610),fe=r(19610),ve=r(26704),he=r(7575),be=r(98995),me=r(80139),_e=r(21149),ge=(0,ce.v)();function ke(e){return"object"==typeof e&&null!=e&&"itemId"in e&&"portalUrl"in e}function Ze(e){return"object"==typeof e&&null!=e&&"url"in e}function we(e,t,r,n){var i=e.write({},n);(function(e){if(null==e)return!0;var t=Object.keys(e);return!t.length||1===t.length&&"id"===t[0]})(i)||(t[r]=i)}var Ce=function(e){(0,c.Z)(r,e);var t=(0,f.Z)(r);function r(e){var n;return(0,u.Z)(this,r),(n=t.call(this,e))._portals=new Map,n._layerToFootprint=new WeakMap,n.drawOrderField="cd_draworder",n.dynamicGroupLayer=new B({parent:(0,d.Z)(n)}),n.elevationInfo=null,n.fields=null,n.fieldsIndex=null,n.floorInfo=null,n.footprintLayer=new $({parent:(0,d.Z)(n)}),n.itemNameField="cd_itemname",n.itemSourceField="cd_itemsource",n.itemTypeField="cd_itemtype",n.layers=new b.Z([n.dynamicGroupLayer,n.footprintLayer]),n.maxScaleField="cd_maxscale",n.minScaleField="cd_minscale",n.orderBy=null,n.outFields=null,n.supportedSourceTypes=new Set(["Catalog Layer"]),n.source=new ee.default({layer:(0,d.Z)(n),supportedSourceTypes:n.supportedSourceTypes}),n.type="catalog",n.typeIdField=null,n.types=null,n}return(0,s.Z)(r,[{key:"load",value:function(e){var t=this,r=null!=e?e.signal:null,n=this.loadFromPortal({supportedTypes:["Feature Service"]},e).catch(k.r9).then((0,l.Z)((0,a.Z)().mark((function e(){var n,i,o,l,u;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.url,i=t.source,o=t.portalItem,n){e.next=3;break}throw new m.Z("catalog-layer:missing-url","Catalog layer must be created with a url");case 3:if(null!=t.layerId){e.next=10;break}return e.next=6,t._fetchFirstValidLayerId(r);case 6:if(null!=(l=e.sent)){e.next=9;break}throw new m.Z("catalog-layer:missing-layerId","There is no Catalog Layer in the service",{service:n});case 9:t.layerId=l;case 10:return e.next=12,i.load({signal:r});case 12:(u=i.sourceJSON)&&(t.sourceJSON=u,t.read(u,{origin:"service",portalItem:o,portal:null===o||void 0===o?void 0:o.portal,url:t.parsedUrl}));case 14:case"end":return e.stop()}}),e)})))).then((function(){var e=[t.itemNameField,t.itemSourceField,t.itemTypeField,t.minScaleField,t.maxScaleField],r=e.filter((function(e){return!t.fieldsIndex.has(e)}));if(r.length)throw new m.Z("catalog-layer:missing-fields","There are missing fields to operate properly",{requiredFields:e,missingFields:r})})).then((function(){return(0,pe.nU)(t,"load",e)}));return this.addResolvingPromise(n),Promise.resolve(this)}},{key:"destroy",value:function(){this.footprintLayer.destroy(),this.dynamicGroupLayer.destroy();var e,t=(0,o.Z)(this._portals.values());try{for(t.s();!(e=t.n()).done;){e.value.destroy()}}catch(r){t.e(r)}finally{t.f()}this._portals.clear()}},{key:"createQueryVersion",get:function(){var e;return this.commitProperty("definitionExpression"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("capabilities"),(null!==(e=this._get("createQueryVersion"))&&void 0!==e?e:0)+1}},{key:"editingEnabled",get:function(){return this.loaded&&null!=this.capabilities&&this.capabilities.operations.supportsEditing&&this.userHasEditingPrivileges}},{key:"effectiveEditingEnabled",get:function(){return!1}},{key:"parsedUrl",get:function(){var e=(0,Z.mN)(this.url);return null!=e&&null!=this.layerId&&(e.path=(0,Z.v_)(e.path,this.layerId.toString())),e}},{key:"applyEdits",value:function(){var e=(0,l.Z)((0,a.Z)().mark((function e(t,r){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,pe.Jj)(this,t,r));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"on",value:function(e,t){return(0,p.Z)((0,y.Z)(r.prototype),"on",this).call(this,e,t)}},{key:"createLayerFromFootprint",value:function(){var e=(0,l.Z)((0,a.Z)().mark((function e(t){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._createLayer(t);case 2:return r=e.sent,e.abrupt("return",(this._configureLayer(r,t),this._layerToFootprint.set(r,t),r));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createFootprintFromLayer",value:function(e){var t;return null===(t=this._layerToFootprint.get(e))||void 0===t?void 0:t.clone()}},{key:"createQuery",value:function(){var e,t=new _e.Z,r=null===(e=this.capabilities)||void 0===e?void 0:e.query;t.returnGeometry=!0,r&&(t.compactGeometryEnabled=r.supportsCompactGeometry,t.defaultSpatialReferenceEnabled=r.supportsDefaultSpatialReference),t.outFields=["*"];var n=this.timeOffset,i=this.timeExtent;return t.timeExtent=null!=n&&null!=i?i.offset(-n.value,n.unit):i||null,t.where=this.definitionExpression||"1=1",t}},{key:"getFeatureType",value:function(e){return(0,pe.KL)(this.types,this.typeIdField,e)}},{key:"getField",value:function(e){return this.fieldsIndex.get(e)}},{key:"getFieldDomain",value:function(e,t){var r,n=null===t||void 0===t?void 0:t.feature,i=this.getFeatureType(n);if(i){var o=i.domains&&i.domains[e];if(o&&"inherited"!==o.type)return o}return null===(r=this.getField(e))||void 0===r?void 0:r.domain}},{key:"hasDataChanged",value:function(){var e=(0,l.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,pe.gG)(this));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"queryFeatures",value:function(){var e=(0,l.Z)((0,a.Z)().mark((function e(t,r){var n,i,l,u,s,d;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:return i=e.sent,e.next=5,i.source.queryFeatures(null!==(n=_e.Z.from(t))&&void 0!==n?n:i.createQuery(),r);case 5:if(null!==(l=e.sent)&&void 0!==l&&l.features){u=(0,o.Z)(l.features);try{for(u.s();!(s=u.n()).done;)(d=s.value).layer=d.sourceLayer=i.footprintLayer}catch(a){u.e(a)}finally{u.f()}}return e.abrupt("return",l);case 8:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"queryObjectIds",value:function(){var e=(0,l.Z)((0,a.Z)().mark((function e(t,r){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:return e.abrupt("return",e.sent.source.queryObjectIds(null!==(n=_e.Z.from(t))&&void 0!==n?n:this.createQuery(),r));case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"queryFeatureCount",value:function(){var e=(0,l.Z)((0,a.Z)().mark((function e(t,r){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:return e.abrupt("return",e.sent.source.queryFeatureCount(null!==(n=_e.Z.from(t))&&void 0!==n?n:this.createQuery(),r));case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"queryExtent",value:function(){var e=(0,l.Z)((0,a.Z)().mark((function e(t,r){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:return e.abrupt("return",e.sent.source.queryExtent(null!==(n=_e.Z.from(t))&&void 0!==n?n:this.createQuery(),r));case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"serviceSupportsSpatialReference",value:function(e){return this.loaded&&(0,ve.D)(this,e)}},{key:"read",value:function(e,t){if((0,p.Z)((0,y.Z)(r.prototype),"read",this).call(this,e,t),e){var n=e.footprintLayer,i=e.dynamicGroupLayer;n&&this.footprintLayer.read(n,t),i&&this.dynamicGroupLayer.read(i,t)}}},{key:"_fetchFirstValidLayerId",value:function(){var e=(0,l.Z)((0,a.Z)().mark((function e(t){var r,n,o,l=this;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.Z)(this.url,{query:(0,i.Z)((0,i.Z)({f:"json"},this.customParameters),{},{token:this.apiKey}),responseType:"json",signal:t});case 2:if(n=e.sent,o=n.data,!Array.isArray(null===o||void 0===o?void 0:o.layers)){e.next=6;break}return e.abrupt("return",null===(r=o.layers.find((function(e){var t=e.type;return l.supportedSourceTypes.has(t)})))||void 0===r?void 0:r.id);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_createLayer",value:function(){var e=(0,l.Z)((0,a.Z)().mark((function e(t){var r,n,i,o,l,u,s,d,p,y,c;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.getAttribute(this.itemSourceField)){e.next=3;break}throw new m.Z("catalog-layer:item-source-missing",'The footprint is missing the "'.concat(this.itemSourceField,'" attribute'));case 3:if(!ke(n=JSON.parse(r))){e.next=16;break}return o=n.itemId,l=n.portalUrl,u=(0,me.c_)(l),s=null===(i=this.portalItem)||void 0===i?void 0:i.portal,d=he.Z.getDefault(),y=!0,s&&(0,Z.tm)(l,s.url)?p=s:(0,Z.tm)(l,d.url)?p=d:(p=(0,_.s1)(this._portals,u,(function(){return new he.Z({url:u})})),y=!1),e.next=10,x.Z.fromPortalItem(new be.default({id:o,portal:p}));case 10:if(c=e.sent,e.t0=y,e.t0){e.next=15;break}return e.next=15,xe(c);case 15:return e.abrupt("return",c);case 16:if(!Ze(n)){e.next=18;break}return e.abrupt("return",x.Z.fromArcGISServerUrl({url:n.url}));case 18:return e.next=20,fe.T.UnsupportedLayer();case 20:return e.t1=e.sent,e.abrupt("return",new e.t1);case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_configureLayer",value:function(e,t){var r=t.getAttribute(this.itemNameField);r&&(e.title=r);var n=t.getAttribute(this.maxScaleField);null!=n&&"maxScale"in e&&(e.maxScale=n);var i=t.getAttribute(this.minScaleField);null!=i&&"minScale"in e&&(e.minScale=i)}}]),r}((0,oe.B)((0,ie.o1)((0,j.h7)((0,le.c)((0,de.n)((0,E.M)((0,se.Q)((0,re.Y)((0,ae.q)((0,ue.I)((0,g.R)((0,ne.N)((0,te.V)(x.Z))))))))))))));function xe(e){return Fe.apply(this,arguments)}function Fe(){return(Fe=(0,l.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!("portalItem"in t)||!t.portalItem){e.next=13;break}return e.prev=1,e.next=4,t.load();case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:if(t.portalItem=null,e.t1="group"===t.type,!e.t1){e.next=13;break}return e.next=13,Promise.allSettled([].concat((0,n.Z)(t.layers.map((function(e){return xe(e)}))),(0,n.Z)(t.tables.map((function(e){return xe(e)})))));case 13:case"end":return e.stop()}}),e,null,[[1,6]])})))).apply(this,arguments)}(0,v._)([(0,w.Cb)({readOnly:!0})],Ce.prototype,"createQueryVersion",null),(0,v._)([(0,w.Cb)({readOnly:!0})],Ce.prototype,"drawOrderField",void 0),(0,v._)([(0,w.Cb)({type:B,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:we}}})],Ce.prototype,"dynamicGroupLayer",void 0),(0,v._)([(0,w.Cb)({readOnly:!0})],Ce.prototype,"editingEnabled",null),(0,v._)([(0,w.Cb)({readOnly:!0})],Ce.prototype,"effectiveEditingEnabled",null),(0,v._)([(0,w.Cb)({json:{origins:{"web-scene":{name:"layerDefinition.elevationInfo",read:!1,write:!1}}}})],Ce.prototype,"elevationInfo",void 0),(0,v._)([(0,w.Cb)((0,i.Z)((0,i.Z)({},ge.fields),{},{readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}))],Ce.prototype,"fields",void 0),(0,v._)([(0,w.Cb)(ge.fieldsIndex)],Ce.prototype,"fieldsIndex",void 0),(0,v._)([(0,w.Cb)({json:{origins:{"web-scene":{name:"layerDefinition.floorInfo",read:!1,write:!1}}}})],Ce.prototype,"floorInfo",void 0),(0,v._)([(0,w.Cb)({type:$,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:we}}})],Ce.prototype,"footprintLayer",void 0),(0,v._)([(0,w.Cb)(R.id)],Ce.prototype,"id",void 0),(0,v._)([(0,w.Cb)({readOnly:!0})],Ce.prototype,"itemNameField",void 0),(0,v._)([(0,w.Cb)({readOnly:!0})],Ce.prototype,"itemSourceField",void 0),(0,v._)([(0,w.Cb)({readOnly:!0})],Ce.prototype,"itemTypeField",void 0),(0,v._)([(0,w.Cb)({readOnly:!0})],Ce.prototype,"layers",void 0),(0,v._)([(0,w.Cb)({type:["show","hide","hide-children"]})],Ce.prototype,"listMode",void 0),(0,v._)([(0,w.Cb)({readOnly:!0})],Ce.prototype,"maxScaleField",void 0),(0,v._)([(0,w.Cb)({readOnly:!0})],Ce.prototype,"minScaleField",void 0),(0,v._)([(0,w.Cb)({value:"CatalogLayer",type:["CatalogLayer"]})],Ce.prototype,"operationalLayerType",void 0),(0,v._)([(0,w.Cb)({json:{origins:{"web-scene":{name:"layerDefinition.orderBy",write:!0,read:!0}}}})],Ce.prototype,"orderBy",void 0),(0,v._)([(0,w.Cb)(ge.outFields)],Ce.prototype,"outFields",void 0),(0,v._)([(0,w.Cb)({readOnly:!0})],Ce.prototype,"parsedUrl",null),(0,v._)([(0,w.Cb)({readOnly:!0})],Ce.prototype,"source",void 0),(0,v._)([(0,w.Cb)({json:{read:!1}})],Ce.prototype,"type",void 0),(0,v._)([(0,w.Cb)({type:String})],Ce.prototype,"typeIdField",void 0),(0,v._)([(0,w.Cb)({type:[ye.Z]})],Ce.prototype,"types",void 0);var Ie=Ce=(0,v._)([(0,C.j)("esri.layers.CatalogLayer")],Ce)}}]);
//# sourceMappingURL=70869.5e9d0168.chunk.js.map