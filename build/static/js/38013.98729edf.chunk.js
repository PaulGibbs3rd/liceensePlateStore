"use strict";(self.webpackChunkreact_training=self.webpackChunkreact_training||[]).push([[38013],{82582:function(t,e,i){i.d(e,{D9:function(){return u},DE:function(){return o},dp:function(){return s},o2:function(){return h},yZ:function(){return a}});var n=i(16889),r=i(68860);function a(t,e){var i=e||t.extent,n=t.width,a=(0,r.c9)(null===i||void 0===i?void 0:i.spatialReference);return i&&n?i.width/n*a*r.hd*96:0}function s(t,e){return t/((0,r.c9)(e)*r.hd*96)}function o(t){return t/(96*r.hd)}function u(t,e){var i=t.extent,n=t.width-(t.padding?t.padding.left+t.padding.right:0),r=s(e,i.spatialReference);return i.clone().expand(r*n/i.width)}function h(t,e,i){return function(t,e){return 0===e||(0,n.W8)(t,e)||t<e}(t,e)&&function(t,e){return 0===e||(0,n.W8)(t,e)||t>e}(t,i)}},57682:function(t,e,i){i.r(e),i.d(e,{default:function(){return H}});var n=i(1413),r=i(74165),a=i(15861),s=i(15671),o=i(43144),u=i(60136),h=i(29388),l=i(27366),c=i(32718),d=i(66978),f=i(94172),p=i(49861),g=(i(93169),i(84936),i(69912)),v=i(78983),_=i(90110),y=i(65457),m=i(85992),b=i(83978),k=i(9229),x=i(67581),w=i(21881),Z=i(13107),S=i(32645),R=i(45008),C=function(t){(0,u.Z)(i,t);var e=(0,h.Z)(i);function i(){var t;return(0,s.Z)(this,i),(t=e.apply(this,arguments))._highlightGraphics=new v.J,t._updateHash="",t}return(0,o.Z)(i,[{key:"fetchPopupFeaturesAtLocation",value:function(t,e){return this._popupHighlightHelper.fetchPopupFeaturesAtLocation(t,e)}},{key:"update",value:function(t){var e=this,i="".concat(this.exportImageVersion,"/").concat(t.state.id,"/").concat(t.pixelRatio,"/").concat(t.stationary);this._updateHash!==i&&(this._updateHash=i,this.strategy.update(t).catch((function(t){(0,d.D_)(t)||c.Z.getLogger(e).error(t)})),t.stationary&&this._popupHighlightHelper.updateHighlightedFeatures(t.state.resolution)),this._highlightView.processUpdate(t)}},{key:"attach",value:function(){var t=this,e=this.layer,i=e.imageMaxWidth,n=e.imageMaxHeight,r=e.version,a=r>=10.3,s=r>=10;this._bitmapContainer=new _.c,this.container.addChild(this._bitmapContainer),this._highlightView=new m.Z({view:this.view,graphics:this._highlightGraphics,requestUpdateCallback:function(){return t.requestUpdate()},container:new b.Z(this.view.featuresTilingScheme),defaultPointSymbolEnabled:!1}),this.container.addChild(this._highlightView.container),this._popupHighlightHelper=new S.VF({createFetchPopupFeaturesQueryGeometry:function(e,i){return(0,R.K)(e,i,t.view)},highlightGraphics:this._highlightGraphics,highlightGraphicUpdated:function(e,i){t._highlightView.graphicUpdateHandler({graphic:e,property:i})},layerView:this,updatingHandles:this._updatingHandles}),this.strategy=new k.Z({container:this._bitmapContainer,fetchSource:this.fetchImageBitmap.bind(this),requestUpdate:this.requestUpdate.bind(this),imageMaxWidth:i,imageMaxHeight:n,imageRotationSupported:a,imageNormalizationSupported:s,hidpi:!0}),this.addAttachHandles((0,f.watch)((function(){return t.exportImageVersion}),(function(){return t.requestUpdate()}))),this.requestUpdate()}},{key:"detach",value:function(){this.strategy.destroy(),this.container.removeAllChildren(),this._bitmapContainer.removeAllChildren(),this._highlightView.destroy(),this._popupHighlightHelper.destroy()}},{key:"viewChange",value:function(){}},{key:"moveEnd",value:function(){this.requestUpdate()}},{key:"supportsSpatialReference",value:function(t){return this.layer.serviceSupportsSpatialReference(t)}},{key:"doRefresh",value:function(){var t=(0,a.Z)((0,r.Z)().mark((function t(){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this._updateHash="",this.requestUpdate();case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"isUpdating",value:function(){return this.strategy.updating||this.updateRequested}},{key:"fetchImage",value:function(t,e,i,r){return this.layer.fetchImage(t,e,i,(0,n.Z)({timeExtent:this.timeExtent,floors:this.floors},r))}},{key:"fetchImageBitmap",value:function(t,e,i,r){return this.layer.fetchImageBitmap(t,e,i,(0,n.Z)({timeExtent:this.timeExtent,floors:this.floors},r))}},{key:"highlight",value:function(t){return this._popupHighlightHelper.highlight(t)}}]),i}((0,w.Z)((0,Z.Z)((0,y.y)(x.Z))));(0,l._)([(0,p.Cb)()],C.prototype,"strategy",void 0),(0,l._)([(0,p.Cb)()],C.prototype,"updating",void 0);var H=C=(0,l._)([(0,g.j)("esri.views.2d.layers.MapImageLayerView2D")],C)},39444:function(t,e,i){i.d(e,{K:function(){return I}});var n=i(37762),r=i(15671),a=i(43144),s=i(88301),o=i(61120),u=i(60136),h=i(29388),l=i(92026),c=i(58880),d=i(80613),f=i(97890),p=i(93560),g=i(66759),v=0;function _(t,e){return new f.G((0,g.W)(v++),t,e)}var y={visualVariableColor:null,visualVariableOpacity:null,visualVariableSizeMinMaxValue:null,visualVariableSizeScaleStops:null,visualVariableSizeStops:null,visualVariableSizeUnitValue:null,visualVariableRotation:null,visualVariableSizeOutlineScaleStops:null},m=function(){function t(){(0,r.Z)(this,t),this.instances={fill:_(p.k2.fill,{uniforms:y,optionalAttributes:{zoomRange:!0}}),marker:_(p.k2.marker,{uniforms:y,optionalAttributes:{zoomRange:!0}}),line:_(p.k2.line,{uniforms:y,optionalAttributes:{zoomRange:!0}}),text:_(p.k2.text,{uniforms:y,optionalAttributes:{zoomRange:!0,referenceSymbol:!1,clipAngle:!1}}),complexFill:_(p.k2.complexFill,{uniforms:y,optionalAttributes:{zoomRange:!0}}),texturedLine:_(p.k2.texturedLine,{uniforms:y,optionalAttributes:{zoomRange:!0}})},this._instancesById=Object.values(this.instances).reduce((function(t,e){return t.set(e.instanceId,e),t}),new Map)}return(0,a.Z)(t,[{key:"getInstance",value:function(t){return this._instancesById.get(t)}}]),t}(),b=i(29303),k=i(8768),x=i(30932),w=i(93311),Z=i(91340),S=i(87422),R=i(84319),C=i(44070),H=i(8548),M=i(45412),A=Math.PI/180,V=function(t){(0,u.Z)(i,t);var e=(0,h.Z)(i);function i(t){var n;return(0,r.Z)(this,i),(n=e.call(this))._program=null,n._vao=null,n._vertexBuffer=null,n._indexBuffer=null,n._dvsMat3=(0,k.Ue)(),n._localOrigin={x:0,y:0},n._getBounds=t,n}return(0,a.Z)(i,[{key:"destroy",value:function(){this._vao&&(this._vao.dispose(),this._vao=null,this._vertexBuffer=null,this._indexBuffer=null),this._program=(0,l.M2)(this._program)}},{key:"doRender",value:function(t){var e=t.context,i=this._getBounds();if(!(i.length<1)){this._createShaderProgram(e),this._updateMatricesAndLocalOrigin(t),this._updateBufferData(e,i),e.setBlendingEnabled(!0),e.setDepthTestEnabled(!1),e.setStencilWriteMask(0),e.setStencilTestEnabled(!1),e.setBlendFunction(H.zi.ONE,H.zi.ONE_MINUS_SRC_ALPHA),e.setColorMask(!0,!0,!0,!0);var n=this._program;e.bindVAO(this._vao),e.useProgram(n),n.setUniformMatrix3fv("u_dvsMat3",this._dvsMat3),e.gl.lineWidth(1),e.drawElements(H.MX.LINES,8*i.length,H.g.UNSIGNED_INT,0),e.bindVAO()}}},{key:"_createTransforms",value:function(){return{displayViewScreenMat3:(0,k.Ue)()}}},{key:"_createShaderProgram",value:function(t){if(!this._program){this._program=t.programCache.acquire("precision highp float;\n        uniform mat3 u_dvsMat3;\n\n        attribute vec2 a_position;\n\n        void main() {\n          mediump vec3 pos = u_dvsMat3 * vec3(a_position, 1.0);\n          gl_Position = vec4(pos.xy, 0.0, 1.0);\n        }","precision mediump float;\n      void main() {\n        gl_FragColor = vec4(0.75, 0.0, 0.0, 0.75);\n      }",B().attributes)}}},{key:"_updateMatricesAndLocalOrigin",value:function(t){var e=t.state,i=e.displayMat3,n=e.size,r=e.resolution,a=e.pixelRatio,s=e.rotation,o=e.viewpoint,u=A*s,h=o.targetGeometry,l=h.x,c=h.y,d=(0,Z.or)(l,e.spatialReference);this._localOrigin.x=d,this._localOrigin.y=c;var f=a*n[0],p=a*n[1],g=r*f,v=r*p,_=(0,b.yR)(this._dvsMat3);(0,b.Jp)(_,_,i),(0,b.Iu)(_,_,(0,x.al)(f/2,p/2)),(0,b.bA)(_,_,(0,w.al)(n[0]/g,-p/v,1)),(0,b.U1)(_,_,-u)}},{key:"_updateBufferData",value:function(t,e){var i,r=this._localOrigin,a=r.x,s=r.y,o=8*e.length,u=new Float32Array(o),h=new Uint32Array(8*e.length),l=0,c=0,d=(0,n.Z)(e);try{for(d.s();!(i=d.n()).done;){var f=i.value;f&&(u[2*l]=f[0]-a,u[2*l+1]=f[1]-s,u[2*l+2]=f[0]-a,u[2*l+3]=f[3]-s,u[2*l+4]=f[2]-a,u[2*l+5]=f[3]-s,u[2*l+6]=f[2]-a,u[2*l+7]=f[1]-s,h[c]=l+0,h[c+1]=l+3,h[c+2]=l+3,h[c+3]=l+2,h[c+4]=l+2,h[c+5]=l+1,h[c+6]=l+1,h[c+7]=l+0,l+=4,c+=8)}}catch(g){d.e(g)}finally{d.f()}if(this._vertexBuffer?this._vertexBuffer.setData(u.buffer):this._vertexBuffer=C.f.createVertex(t,H.l1.DYNAMIC_DRAW,u.buffer),this._indexBuffer?this._indexBuffer.setData(h):this._indexBuffer=C.f.createIndex(t,H.l1.DYNAMIC_DRAW,h),!this._vao){var p=B();this._vao=new M.U(t,p.attributes,p.bufferLayouts,{geometry:this._vertexBuffer},this._indexBuffer)}}}]),i}(S.s),B=function(){return(0,R.cM)("bounds",{geometry:[{location:0,name:"a_position",count:2,type:H.g.FLOAT}]})},I=function(t){(0,u.Z)(i,t);var e=(0,h.Z)(i);function i(t){var n;return(0,r.Z)(this,i),(n=e.call(this,t))._instanceStore=new m,n.checkHighlight=function(){return!0},n}return(0,a.Z)(i,[{key:"destroy",value:function(){(0,s.Z)((0,o.Z)(i.prototype),"destroy",this).call(this),this._boundsRenderer=(0,l.SC)(this._boundsRenderer)}},{key:"instanceStore",get:function(){return this._instanceStore}},{key:"enableRenderingBounds",value:function(t){this._boundsRenderer=new V(t),this.requestRender()}},{key:"hasHighlight",get:function(){return this.checkHighlight()}},{key:"onTileData",value:function(t,e){t.onMessage(e),this.contains(t)||this.addChild(t),this.requestRender()}},{key:"_renderChildren",value:function(t,e){t.selection=e;var i,r=(0,n.Z)(this.children);try{for(r.s();!(i=r.n()).done;){var a=i.value;if(a.visible){var s=a.getDisplayList(this._instanceStore,d.gl.STRICT_ORDER);null===s||void 0===s||s.render(t)}}}catch(o){r.e(o)}finally{r.f()}}}]),i}(c.b)},83978:function(t,e,i){i.d(e,{Z:function(){return g}});var n=i(15671),r=i(43144),a=i(88301),s=i(61120),o=i(60136),u=i(29388),h=i(27366),l=(i(32718),i(93169),i(84936),i(10064),i(69912)),c=i(80613),d=i(39444),f=i(39594),p=function(t){(0,o.Z)(i,t);var e=(0,u.Z)(i);function i(){return(0,n.Z)(this,i),e.apply(this,arguments)}return(0,r.Z)(i,[{key:"hasHighlight",get:function(){return this.children.some((function(t){return t.hasData}))}},{key:"renderChildren",value:function(t){var e=this;this.attributeView.update(),t.drawPhase===c.jx.HIGHLIGHT&&this.children.some((function(t){return t.hasData}))&&((0,a.Z)((0,s.Z)(i.prototype),"renderChildren",this).call(this,t),t.context.setColorMask(!0,!0,!0,!0),(0,f.P9)(t,!0,(function(t){e._renderChildren(t,c.Xq.All)})))}}]),i}(d.K),g=p=(0,h._)([(0,l.j)("esri.views.2d.layers.graphics.HighlightGraphicContainer")],p)}}]);
//# sourceMappingURL=38013.98729edf.chunk.js.map