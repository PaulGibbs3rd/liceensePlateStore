"use strict";(self.webpackChunkreact_training=self.webpackChunkreact_training||[]).push([[66244],{63665:function(e,t,n){n.d(t,{Z:function(){return k}});var r=n(15671),i=n(43144),a=n(60136),o=n(29388),l=n(27366),s=n(11582),u=n(49861),c=(n(93169),n(32718),n(84936),n(69912)),p=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(e){var i;return(0,r.Z)(this,n),(i=t.call(this,e)).row=0,i.column=0,i.rows=1,i.columns=1,i}return(0,i.Z)(n,[{key:"equals",value:function(e){return null!=e&&this.row===e.row&&this.rows===e.rows&&this.column===e.column&&this.columns===e.columns}}]),n}(s.j);(0,l._)([(0,u.Cb)({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],p.prototype,"row",void 0),(0,l._)([(0,u.Cb)({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],p.prototype,"column",void 0),(0,l._)([(0,u.Cb)({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],p.prototype,"rows",void 0),(0,l._)([(0,u.Cb)({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],p.prototype,"columns",void 0);var d=p=(0,l._)([(0,c.j)("esri.CameraLayout")],p),f=n(17768),v=n(46784),m=n(16889),y=n(89125),h=n(38511),b=n(31201),g=n(25243),w=n(848),x=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(){var e;(0,r.Z)(this,n);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).position=new w.Z([0,0,0]),e.heading=0,e.tilt=0,e.fov=55,e.layout=new d,e}return(0,i.Z)(n,[{key:"normalizeCtorArgs",value:function(e,t,n,r){if(e&&"object"==typeof e&&("x"in e||Array.isArray(e))){var i={position:e};return null!=t&&(i.heading=t),null!=n&&(i.tilt=n),null!=r&&(i.fov=r),i}return e}},{key:"writePosition",value:function(e,t,n,r){var i=e.clone();i.x=(0,g.q9)(e.x||0),i.y=(0,g.q9)(e.y||0),i.z=e.hasZ?(0,g.q9)(e.z||0):e.z,t[n]=i.write({},r)}},{key:"readPosition",value:function(e,t){var n=new w.Z;return n.read(e,t),n.x=(0,g.q9)(n.x||0),n.y=(0,g.q9)(n.y||0),n.z=n.hasZ?(0,g.q9)(n.z||0):n.z,n}},{key:"equals",value:function(e){return null!=e&&this.tilt===e.tilt&&this.heading===e.heading&&this.fov===e.fov&&this.position.equals(e.position)&&this.layout.equals(e.layout)}}]),n}((0,s.J)(v.wq));(0,l._)([(0,u.Cb)({type:w.Z,json:{write:{isRequired:!0}}})],x.prototype,"position",void 0),(0,l._)([(0,b.c)("position")],x.prototype,"writePosition",null),(0,l._)([(0,h.r)("position")],x.prototype,"readPosition",null),(0,l._)([(0,u.Cb)({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),(0,y.p)((function(e){return f.BV.normalize((0,g.q9)(e))}))],x.prototype,"heading",void 0),(0,l._)([(0,u.Cb)({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),(0,y.p)((function(e){return(0,m.uZ)((0,g.q9)(e),-180,180)}))],x.prototype,"tilt",void 0),(0,l._)([(0,u.Cb)({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],x.prototype,"fov",void 0),(0,l._)([(0,u.Cb)({type:d,nonNullable:!0,json:{read:!1,write:!1}})],x.prototype,"layout",void 0);var k=x=(0,l._)([(0,c.j)("esri.Camera")],x)},36721:function(e,t,n){n.d(t,{Z:function(){return h}});var r,i=n(15671),a=n(43144),o=n(60136),l=n(29388),s=n(27366),u=n(63665),c=n(59486),p=n(46784),d=n(49861),f=n(89125),v=(n(84936),n(93169),n(69912)),m=n(77981),y=r=function(e){(0,o.Z)(n,e);var t=(0,l.Z)(n);function n(e){var r;return(0,i.Z)(this,n),(r=t.call(this,e)).rotation=0,r.scale=0,r.targetGeometry=null,r.camera=null,r}return(0,a.Z)(n,[{key:"castRotation",value:function(e){return(e%=360)<0&&(e+=360),e}},{key:"clone",value:function(){return new r({rotation:this.rotation,scale:this.scale,targetGeometry:null!=this.targetGeometry?this.targetGeometry.clone():null,camera:null!=this.camera?this.camera.clone():null})}}]),n}(p.wq);(0,s._)([(0,d.Cb)({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:b}}}}})],y.prototype,"rotation",void 0),(0,s._)([(0,f.p)("rotation")],y.prototype,"castRotation",null),(0,s._)([(0,d.Cb)({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:b}}}}})],y.prototype,"scale",void 0),(0,s._)([(0,d.Cb)({types:c.qM,json:{read:m.im,write:!0,origins:{"web-scene":{read:m.im,write:{overridePolicy:b}}}}})],y.prototype,"targetGeometry",void 0),(0,s._)([(0,d.Cb)({type:u.Z,json:{write:!0}})],y.prototype,"camera",void 0);var h=y=r=(0,s._)([(0,v.j)("esri.Viewpoint")],y);function b(){return{enabled:!this.camera}}},70116:function(e,t,n){var r;n.d(t,{Y:function(){return r}}),function(e){e[e.KILOBYTES=1024]="KILOBYTES",e[e.MEGABYTES=1048576]="MEGABYTES",e[e.GIGABYTES=1073741824]="GIGABYTES"}(r||(r={}))},18442:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(15671),i=n(43144),a=n(39052),o=n(56885),l=function(e,t){function n(e){(0,r.Z)(this,n),this._observable=new o.s,this._map=new Map(e)}return(0,i.Z)(n,[{key:"size",get:function(){return(0,a.it)(this._observable),this._map.size}},{key:"clear",value:function(){this._map.size>0&&(this._map.clear(),this._observable.notify())}},{key:"delete",value:function(e){var t=this._map.delete(e);return t&&this._observable.notify(),t}},{key:"entries",value:function(){return(0,a.it)(this._observable),this._map.entries()}},{key:"forEach",value:function(e,t){var n=this;(0,a.it)(this._observable),this._map.forEach((function(r,i){return e.call(t,r,i,n)}),t)}},{key:"get",value:function(e){return(0,a.it)(this._observable),this._map.get(e)}},{key:"has",value:function(e){return(0,a.it)(this._observable),this._map.has(e)}},{key:"keys",value:function(){return(0,a.it)(this._observable),this._map.keys()}},{key:"set",value:function(e,t){return this._map.set(e,t),this._observable.notify(),this}},{key:"values",value:function(){return(0,a.it)(this._observable),this._map.values()}},{key:e,value:function(){return(0,a.it)(this._observable),this._map[Symbol.iterator]()}},{key:t,get:function(){return this._map[Symbol.toStringTag]}}]),n}(Symbol.iterator,Symbol.toStringTag)},55364:function(e,t,n){function r(){return[1,0,0,1,0,0]}function i(e){return[e[0],e[1],e[2],e[3],e[4],e[5]]}n.d(t,{Ue:function(){return r},Wd:function(){return a},d9:function(){return i}});var a=[1,0,0,1,0,0];Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:a,clone:i,create:r,createView:function(e,t){return new Float64Array(e,t,6)},fromValues:function(e,t,n,r,i,a){return[e,t,n,r,i,a]}},Symbol.toStringTag,{value:"Module"}))},6644:function(e,t,n){function r(){return[0,0]}function i(e){return[e[0],e[1]]}function a(e,t){return[e,t]}function o(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0],n=Math.min(2,e.length),r=0;r<n;++r)t[r]=e[r];return t}function l(){return[0,0]}function s(){return a(1,1)}function u(){return a(1,0)}function c(){return a(0,1)}n.d(t,{AG:function(){return p},E9:function(){return f},IO:function(){return v},Ue:function(){return r},al:function(){return a},d9:function(){return i},hq:function(){return d},nI:function(){return o}});var p=[0,0],d=s(),f=u(),v=c();Object.freeze(Object.defineProperty({__proto__:null,ONES:d,UNIT_X:f,UNIT_Y:v,ZEROS:p,clone:i,create:r,createView:function(e,t){return new Float64Array(e,t,2)},fromArray:o,fromValues:a,ones:s,unitX:u,unitY:c,zeros:l},Symbol.toStringTag,{value:"Module"}))},50264:function(e,t,n){n.d(t,{Iu:function(){return c},Jp:function(){return l},U1:function(){return s},U_:function(){return o},Us:function(){return p},bA:function(){return u},t8:function(){return a},vc:function(){return f},xJ:function(){return d},yR:function(){return i}});var r=n(24204);function i(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function a(e,t,n,r,i,a,o){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e[4]=a,e[5]=o,e}function o(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],l=t[5],s=n*a-r*i;return s?(s=1/s,e[0]=a*s,e[1]=-r*s,e[2]=-i*s,e[3]=n*s,e[4]=(i*l-a*o)*s,e[5]=(r*o-n*l)*s,e):null}function l(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],l=t[4],s=t[5],u=n[0],c=n[1],p=n[2],d=n[3],f=n[4],v=n[5];return e[0]=r*u+a*c,e[1]=i*u+o*c,e[2]=r*p+a*d,e[3]=i*p+o*d,e[4]=r*f+a*v+l,e[5]=i*f+o*v+s,e}function s(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],l=t[4],s=t[5],u=Math.sin(n),c=Math.cos(n);return e[0]=r*c+a*u,e[1]=i*c+o*u,e[2]=r*-u+a*c,e[3]=i*-u+o*c,e[4]=l,e[5]=s,e}function u(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],l=t[4],s=t[5],u=n[0],c=n[1];return e[0]=r*u,e[1]=i*u,e[2]=a*c,e[3]=o*c,e[4]=l,e[5]=s,e}function c(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],l=t[4],s=t[5],u=n[0],c=n[1];return e[0]=r,e[1]=i,e[2]=a,e[3]=o,e[4]=r*u+a*c+l,e[5]=i*u+o*c+s,e}function p(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=-n,e[3]=r,e[4]=0,e[5]=0,e}function d(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e}function f(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e}function v(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e}var m=l,y=v;Object.freeze(Object.defineProperty({__proto__:null,add:function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e},copy:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},determinant:function(e){return e[0]*e[3]-e[1]*e[2]},equals:function(e,t){var n=e[0],i=e[1],a=e[2],o=e[3],l=e[4],s=e[5],u=t[0],c=t[1],p=t[2],d=t[3],f=t[4],v=t[5],m=(0,r.bn)();return Math.abs(n-u)<=m*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(i-c)<=m*Math.max(1,Math.abs(i),Math.abs(c))&&Math.abs(a-p)<=m*Math.max(1,Math.abs(a),Math.abs(p))&&Math.abs(o-d)<=m*Math.max(1,Math.abs(o),Math.abs(d))&&Math.abs(l-f)<=m*Math.max(1,Math.abs(l),Math.abs(f))&&Math.abs(s-v)<=m*Math.max(1,Math.abs(s),Math.abs(v))},exactEquals:function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]},frob:function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+1)},fromRotation:p,fromScaling:d,fromTranslation:f,identity:i,invert:o,mul:m,multiply:l,multiplyScalar:function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e},multiplyScalarAndAdd:function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e},rotate:s,scale:u,set:a,str:function(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"},sub:y,subtract:v,translate:c},Symbol.toStringTag,{value:"Module"}))},47898:function(e,t,n){n.d(t,{Fp:function(){return p},GJ:function(){return s},M1:function(){return a},MQ:function(){return m},Ww:function(){return y},bA:function(){return d},hw:function(){return f},mE:function(){return c},ne:function(){return l},nn:function(){return u},qF:function(){return h},yG:function(){return o},yP:function(){return v}});var r=n(1413),i=n(68860);function a(e){return{value:e}}function o(e,t){return{type:(0,i.UF)(t),value:e,unit:t}}function l(e,t){return{type:(0,i.UF)(t),value:e,unit:t}}function s(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"arithmetic";return{type:(0,i.UF)(t),value:e,unit:t,rotationType:n}}function u(e,t){var n=c(e,t);return"angle"===e.type?s(n,t,e.rotationType):function(e,t){return{type:(0,i.UF)(t),value:e,unit:t}}(n,t)}function c(e,t){return(0,i.En)(e.value,e.unit,t)}function p(e,t){return null==e?t:null==t||e.value>(0,i.En)(t.value,t.unit,e.unit)?e:t}function d(e,t){return null==e?null:(0,r.Z)((0,r.Z)({},e),{},{value:e.value*t})}function f(e,t,n){if(t===n)return e;switch(n){case"arithmetic":case"geographic":return 90-e}}var v=o(0,"meters"),m=l(0,"square-meters"),y=(s(0,"radians"),s(0,"degrees")),h=s(0,"degrees","geographic")},5163:function(e,t,n){n.d(t,{L4:function(){return T},LO:function(){return d},Qv:function(){return c},Rd:function(){return f},Ud:function(){return h},VG:function(){return p},Wv:function(){return m},Zv:function(){return g},_o:function(){return S},aC:function(){return w},h9:function(){return y},ld:function(){return x},mg:function(){return v},q6:function(){return b},sS:function(){return O},yc:function(){return k}});var r=n(70116),i=n(17768),a=n(16889),o=n(47898),l=n(643),s=n(68860),u=n(6291);function c(e,t,n){return e.units[t][n]}function p(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr";return"".concat((0,u.uf)(t,{minimumFractionDigits:r,maximumFractionDigits:r,signDisplay:t>0?"never":"exceptZero"})," ").concat(c(e,n,i))}function d(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr";return"".concat((0,u.uf)(t,{minimumFractionDigits:r,maximumFractionDigits:r,signDisplay:"exceptZero"})," ").concat(c(e,n,i))}function f(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr",a=(0,s.Y8)(t,n);return p(e,(0,s.En)(t,n,a),a,r,i)}function v(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr",a=(0,s.Y8)(t,n);return d(e,(0,s.En)(t,n,a),a,r,i)}function m(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr",a=(0,s.Dw)(t,n);return p(e,(0,s.En)(t,n,a),a,r,i)}function y(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr",a=(0,s.Dw)(t,n);return d(e,(0,s.En)(t,n,a),a,r,i)}function h(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr",a=(0,s.Q7)(t,n);return p(e,(0,s.En)(t,n,a),a,r,i)}function b(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr",a=(0,s.Q7)(t,n);return d(e,(0,s.En)(t,n,a),a,r,i)}function g(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr",a=(0,s.jl)(t,n);return p(e,(0,s.En)(t,n,a),a,r,i)}function w(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr",a=(0,s.jl)(t,n);return d(e,(0,s.En)(t,n,a),a,r,i)}function x(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr",a=(0,s.ZI)(t,n);return p(e,(0,s.En)(t,n,a),a,r,i)}function k(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr",a=(0,s.LV)(t,n);return p(e,(0,s.En)(t,n,a),a,r,i)}var _=function(e,t){return{style:"unit",unitDisplay:"narrow",unit:"degree",maximumFractionDigits:t,minimumFractionDigits:t,signDisplay:e>0?"never":"exceptZero"}};function T(e,t,n,r,a){var l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:i.BV,c=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],p=l.normalize((0,o.hw)((0,s.En)(e,t,"degrees"),n,r),0,c),d=_(p,null!==a&&void 0!==a?a:2);return p=I(p,d),(0,u.uf)(p,d)}function S(e,t,n,r,i){var a;n!==r&&(e=-e);var o={style:"unit",unitDisplay:"narrow",unit:"degree",maximumFractionDigits:i=null!==(a=i)&&void 0!==a?a:2,minimumFractionDigits:i,signDisplay:"exceptZero"},l=(0,s.En)(e,t,"degrees")%360;return l=I(l,o),(0,u.uf)(l,o)}var C=new Map;function I(e,t){var n=JSON.stringify(t),r=C.get(n);return r||(r=new Intl.NumberFormat("en-US",t),C.set(n,r)),/^[-+]?360\.?0*\xb0?$/.test(r.format(e))?0:e}var Z=["B","kB","MB","GB","TB"];function O(e,t){var n=0===(t=Math.round(t))?0:Math.floor(Math.log(t)/Math.log(r.Y.KILOBYTES));n=(0,a.uZ)(n,0,Z.length-1);var i=(0,u.uf)(t/Math.pow(r.Y.KILOBYTES,n),{maximumFractionDigits:2});return(0,l.gx)(e.units.bytes[Z[n]],{fileSize:i})}},87072:function(e,t,n){function r(e){var t,n=e.layer;return"floorInfo"in n&&null!==(t=n.floorInfo)&&void 0!==t&&t.floorField&&"floors"in e.view?a(e.view.floors,n.floorInfo.floorField):null}function i(e,t){var n;return"floorInfo"in t&&null!==(n=t.floorInfo)&&void 0!==n&&n.floorField?a(e,t.floorInfo.floorField):null}function a(e,t){if(null===e||void 0===e||!e.length)return null;var n=e.filter((function(e){return""!==e})).map((function(e){return"'".concat(e,"'")}));return n.push("''"),"".concat(t," IN (").concat(n.join(","),") OR ").concat(t," IS NULL")}n.d(t,{c:function(){return r},f:function(){return i}})},49022:function(e,t,n){n.d(t,{$7:function(){return p},BW:function(){return b},D$:function(){return T},DJ:function(){return v},Dd:function(){return w},E2:function(){return P},GX:function(){return u},KA:function(){return O},Ks:function(){return L},RK:function(){return l},S7:function(){return Z},SS:function(){return h},Ul:function(){return C},W7:function(){return m},WP:function(){return _},ZI:function(){return S},cW:function(){return x},dg:function(){return c},dh:function(){return s},ip:function(){return f},kL:function(){return I},no:function(){return d},oi:function(){return g},q$:function(){return o},td:function(){return k},yP:function(){return y}});var r=n(1413),i=n(43404),a={esriCentimeters:"centimeters",esriDecimalDegrees:"decimal-degrees",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriPoints:"points",esriUnknownUnits:"unknown",esriYards:"yards"},o=(0,i.w)()(a),l=(0,i.w)()((0,r.Z)((0,r.Z)({},a),{},{esriIntFeet:"international-feet",esriIntInches:"international-inches",esriIntMiles:"international-miles",esriIntNauticalMiles:"international-nautical-miles",esriIntYards:"international-yards"})),s=(0,i.w)()({esriAcres:"international-acres",esriAcresUS:"us-acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-international-feet",esriSquareFeetUS:"square-us-feet",esriSquareInches:"square-international-inches",esriSquareInchesUS:"square-us-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-international-miles",esriSquareMilesUS:"square-us-miles",esriSquareMillimeters:"square-millimeters",esriSquareYards:"square-international-yards",esriSquareYardsUS:"square-us-yards",esriUnknownAreaUnits:"unknown"}),u=(0,i.w)()({esriNAUCentimeters:"centimeters",esriNAUDecimalDegrees:"decimal-degrees",esriNAUDecimeters:"decimeters",esriNAUFeet:"feet",esriNAUInches:"inches",esriNAUKilometers:"kilometers",esriNAUMeters:"meters",esriNAUMiles:"miles",esriNAUMillimeters:"millimeters",esriNAUNauticalMiles:"nautical-miles",esriNAUPoints:"points",esriNAUYards:"yards"}),c=((0,i.w)()({esriNAUDays:"days",esriNAUHours:"hours",esriNAUMinutes:"minutes",esriNAUSeconds:"seconds"}),(0,i.w)()({esriNAUCentimeters:"centimeters",esriNAUDecimalDegrees:"decimal-degrees",esriNAUDecimeters:"decimeters",esriNAUFeet:"feet",esriNAUInches:"inches",esriNAUKilometers:"kilometers",esriNAUMeters:"meters",esriNAUMiles:"miles",esriNAUMillimeters:"millimeters",esriNAUNauticalMiles:"nautical-miles",esriNAUPoints:"points",esriNAUYards:"yards",esriNAUDays:"days",esriNAUHours:"hours",esriNAUMinutes:"minutes",esriNAUSeconds:"seconds",esriNAUKilometersPerHour:"kilometers-per-hour",esriNAUMilesPerHour:"miles-per-hour",esriNAUUnknown:"unknown"})),p=(0,i.w)()({esriDOTComplete:"complete",esriDOTCompleteNoEvents:"complete-no-events",esriDOTFeatureSets:"featuresets",esriDOTInstructionsOnly:"instructions-only",esriDOTStandard:"standard",esriDOTSummaryOnly:"summary-only"}),d=(0,i.w)()({esriNAOutputLineNone:"none",esriNAOutputLineStraight:"straight",esriNAOutputLineTrueShape:"true-shape",esriNAOutputLineTrueShapeWithMeasure:"true-shape-with-measure"}),f=((0,i.w)()({esriNAOutputPolygonNone:"none",esriNAOutputPolygonSimplified:"simplified",esriNAOutputPolygonDetailed:"detailed"}),(0,i.w)()({esriNFSBAllowBacktrack:"allow-backtrack",esriNFSBAtDeadEndsOnly:"at-dead-ends-only",esriNFSBNoBacktrack:"no-backtrack",esriNFSBAtDeadEndsAndIntersections:"at-dead-ends-and-intersections"})),v=((0,i.w)()({esriNATravelDirectionFromFacility:"from-facility",esriNATravelDirectionToFacility:"to-facility"}),(0,i.w)()({esriNATimeOfDayNotUsed:"not-used",esriNATimeOfDayUseAsStartTime:"start",esriNATimeOfDayUseAsEndTime:"end"}),(0,i.w)()({AUTOMOBILE:"automobile",TRUCK:"truck",WALK:"walk",OTHER:"other"})),m=(0,i.w)()({0:"either-side-of-vehicle",1:"right-side-of-vehicle",2:"left-side-of-vehicle",3:"no-u-turn"},{useNumericKeys:!0}),y=(0,i.w)()({0:"stop",1:"waypoint",2:"break"},{useNumericKeys:!0}),h=(0,i.w)()({0:"ok",1:"not-located",2:"network-element-not-located",3:"element-not-traversable",4:"invalid-field-values",5:"not-reached",6:"time-window-violation",7:"not-located-on-closest"},{useNumericKeys:!0}),b=(0,i.w)()({1:"right",2:"left"},{useNumericKeys:!0}),g=(0,i.w)()({0:"restriction",1:"scaled-cost",2:"added-cost"},{useNumericKeys:!0}),w=(0,i.w)()({0:"permit",1:"restrict"},{useNumericKeys:!0}),x=(0,i.w)()({1:"header",50:"arrive",51:"depart",52:"straight",100:"on-ferry",101:"off-ferry",102:"central-fork",103:"roundabout",104:"u-turn",150:"door",151:"stairs",152:"elevator",153:"escalator",154:"pedestrian-ramp",200:"left-fork",201:"left-ramp",202:"clockwise-roundabout",203:"left-handed-u-turn",204:"bear-left",205:"left-turn",206:"sharp-left",207:"left-turn-and-immediate-left-turn",208:"left-turn-and-immediate-right-turn",300:"right-fork",301:"right-ramp",302:"counter-clockwise-roundabout",303:"right-handed-u-turn",304:"bear-right",305:"right-turn",306:"sharp-right",307:"right-turn-and-immediate-left-turn",308:"right-turn-and-immediate-right-turn",400:"up-elevator",401:"up-escalator",402:"up-stairs",500:"down-elevator",501:"down-escalator",502:"down-stairs",1e3:"general-event",1001:"landmark",1002:"time-zone-change",1003:"traffic-event",1004:"scaled-cost-barrier-event",1005:"boundary-crossing",1006:"restriction-violation",1007:"lane"},{useNumericKeys:!0}),k=(0,i.w)()({0:"unknown",1:"segment",2:"maneuver-segment",3:"restriction-violation",4:"scaled-cost-barrier",5:"heavy-traffic",6:"slow-traffic",7:"moderate-traffic"},{useNumericKeys:!0}),_=(0,i.w)()({"NA Campus":"campus","NA Desktop":"desktop","NA Navigation":"navigation"}),T=(0,i.w)()({Kilometers:"kilometers",Miles:"miles",Meters:"meters"},{ignoreUnknown:!1}),S=(0,i.w)()({Minutes:"minutes",TimeAt1KPH:"time-at-1-kph",TravelTime:"travel-time",TruckMinutes:"truck-minutes",TruckTravelTime:"truck-travel-time",WalkTime:"walk-time"},{ignoreUnknown:!1}),C=(0,i.w)()({Kilometers:"kilometers",Miles:"miles",Meters:"meters",Minutes:"minutes",TimeAt1KPH:"time-at-1-kph",TravelTime:"travel-time",TruckMinutes:"truck-minutes",TruckTravelTime:"truck-travel-time",WalkTime:"walk-time"},{ignoreUnknown:!1}),I=(0,i.w)()({"Any Hazmat Prohibited":"any-hazmat-prohibited","Avoid Carpool Roads":"avoid-carpool-roads","Avoid Express Lanes":"avoid-express-lanes","Avoid Ferries":"avoid-ferries","Avoid Gates":"avoid-gates","Avoid Limited Access Roads":"avoid-limited-access-roads","Avoid Private Roads":"avoid-private-roads","Avoid Roads Unsuitable for Pedestrians":"avoid-roads-unsuitable-for-pedestrians","Avoid Stairways":"avoid-stairways","Avoid Toll Roads":"avoid-toll-roads","Avoid Toll Roads for Trucks":"avoid-toll-roads-for-trucks","Avoid Truck Restricted Roads":"avoid-truck-restricted-roads","Avoid Unpaved Roads":"avoid-unpaved-roads","Axle Count Restriction":"axle-count-restriction","Driving a Bus":"driving-a-bus","Driving a Taxi":"driving-a-taxi","Driving a Truck":"driving-a-truck","Driving an Automobile":"driving-an-automobile","Driving an Emergency Vehicle":"driving-an-emergency-vehicle","Height Restriction":"height-restriction","Kingpin to Rear Axle Length Restriction":"kingpin-to-rear-axle-length-restriction","Length Restriction":"length-restriction","Preferred for Pedestrians":"preferred-for-pedestrians","Riding a Motorcycle":"riding-a-motorcycle","Roads Under Construction Prohibited":"roads-under-construction-prohibited","Semi or Tractor with One or More Trailers Prohibited":"semi-or-tractor-with-one-or-more-trailers-prohibited","Single Axle Vehicles Prohibited":"single-axle-vehicles-prohibited","Tandem Axle Vehicles Prohibited":"tandem-axle-vehicles-prohibited","Through Traffic Prohibited":"through-traffic-prohibited","Truck with Trailers Restriction":"truck-with-trailers-restriction","Use Preferred Hazmat Routes":"use-preferred-hazmat-routes","Use Preferred Truck Routes":"use-preferred-truck-routes",Walking:"walking","Weight Restriction":"weight-restriction"},{ignoreUnknown:!1}),Z=(0,i.w)()({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),O=(0,i.w)()({esriGeometryPoint:"point",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"envelope",esriGeometryMultipoint:"multipoint"}),P=(0,i.w)()({esriNAUTCost:"cost",esriNAUTDescriptor:"descriptor",esriNAUTRestriction:"restriction",esriNAUTHierarchy:"hierarchy"}),L=(0,i.w)()({esriDSTAltName:"alt-name",esriDSTArrive:"arrive",esriDSTBranch:"branch",esriDSTCrossStreet:"cross-street",esriDSTCumulativeLength:"cumulative-length",esriDSTDepart:"depart",esriDSTEstimatedArrivalTime:"estimated-arrival-time",esriDSTExit:"exit",esriDSTGeneral:"general",esriDSTLength:"length",esriDSTServiceTime:"service-time",esriDSTStreetName:"street-name",esriDSTSummary:"summary",esriDSTTime:"time",esriDSTTimeWindow:"time-window",esriDSTToward:"toward",esriDSTViolationTime:"violation-time",esriDSTWaitTime:"wait-time"})},86226:function(e,t,n){n.d(t,{$H:function(){return Q},Ck:function(){return J},Dq:function(){return U},EK:function(){return C},H4:function(){return K},Hy:function(){return te},JG:function(){return A},Jp:function(){return z},L2:function(){return H},Rb:function(){return q},Rx:function(){return oe},SI:function(){return X},UZ:function(){return ne},Ue:function(){return L},VS:function(){return V},YQ:function(){return $},bk:function(){return N},dI:function(){return W},gG:function(){return re},j6:function(){return j},ni:function(){return D},o2:function(){return Y},qf:function(){return E},uG:function(){return R},ut:function(){return B}});var r=n(74165),i=n(37762),a=n(15861),o=n(36721),l=n(80987),s=n(16889),u=n(68860),c=n(24204),p=n(50264),d=n(55364),f=n(13611),v=n(6644),m=n(53866),y=n(32238),h=n(848),b=n(79803),g=n(78952),w=n(91340),x=n(92975),k=180/Math.PI;function _(e){return e.wkid?e:e.spatialReference||g.Z.WGS84}function T(e,t){return t.type?(0,f.t8)(e,t.x,t.y):(0,f.JG)(e,t)}function S(e){return(0,u.c9)(e)}function C(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=e.width,i=e.height;if(0!==n){var a=(0,s.Vl)(n),o=Math.abs(Math.cos(a)),l=Math.abs(Math.sin(a));r=e.width*o+e.height*l,i=e.width*l+e.height*o}var u=Math.max(1,t[0]),c=Math.max(1,t[1]);return Math.max(r/u,i/c)*V(e.spatialReference)}function I(e,t,n,r){return Z.apply(this,arguments)}function Z(){return(Z=(0,a.Z)((0,r.Z)().mark((function e(t,n,a,o){var s,u,c,p,d,f,v,g,x,k,_,T,S,C,Z,O,P,L,M,A,D,N,E,U,F,R,j,G,V,q,J,z,B;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:if(!Array.isArray(t)||t.length){e.next=4;break}return e.abrupt("return",null);case 4:if(l.Z.isCollection(t)&&(t=t.toArray()),!Array.isArray(t)||!t.length||"object"!=typeof t[0]){e.next=39;break}if(c=t.every((function(e){return"attributes"in e})),p=t.some((function(e){return!e.geometry})),d=t,!(c&&p&&n&&n.allLayerViews)){e.next=20;break}f=new Map,v=(0,i.Z)(t);try{for(v.s();!(g=v.n()).done;)x=g.value,k=x.layer,_=f.get(k)||[],null!=(T=x.attributes[k.objectIdField])&&_.push(T),f.set(k,_)}catch(r){v.e(r)}finally{v.f()}return S=[],f.forEach((function(e,t){var r=n.allLayerViews.find((function(e){return e.layer.id===t.id}));if(r&&"queryFeatures"in r){var i=t.createQuery();i.objectIds=e,i.returnGeometry=!0,S.push(r.queryFeatures(i))}})),e.next=15,Promise.all(S);case 15:C=e.sent,Z=[],O=(0,i.Z)(C);try{for(O.s();!(P=O.n()).done;)if((L=P.value)&&L.features&&L.features.length){M=(0,i.Z)(L.features);try{for(M.s();!(A=M.n()).done;)null!=(D=A.value).geometry&&Z.push(D.geometry)}catch(r){M.e(r)}finally{M.f()}}}catch(r){O.e(r)}finally{O.f()}d=Z;case 20:N=(0,i.Z)(d),e.prev=21,N.s();case 23:if((E=N.n()).done){e.next=30;break}return U=E.value,e.next=27,I(U,n,a,o);case 27:o=e.sent;case 28:e.next=23;break;case 30:e.next=35;break;case 32:e.prev=32,e.t0=e.catch(21),N.e(e.t0);case 35:return e.prev=35,N.f(),e.finish(35);case 38:return e.abrupt("return",o);case 39:if(!Array.isArray(t)||2!==t.length||"number"!=typeof t[0]||"number"!=typeof t[1]){e.next=43;break}s=new h.Z(t),e.next=61;break;case 43:if(!(t instanceof y.Z)){e.next=47;break}s=t,e.next=61;break;case 47:if(!("geometry"in t)){e.next=61;break}if(!t.geometry){e.next=52;break}s=t.geometry,e.next=61;break;case 52:if(!t.layer){e.next=61;break}if(F=t.layer,R=n.allLayerViews.find((function(e){return e.layer.id===F.id})),!R||!("queryFeatures"in R)){e.next=61;break}return(V=F.createQuery()).objectIds=[t.attributes[F.objectIdField]],V.returnGeometry=!0,e.next=59,R.queryFeatures(V);case 59:q=e.sent,s=null===q||void 0===q||null===(j=q.features)||void 0===j||null===(G=j[0])||void 0===G?void 0:G.geometry;case 61:if(null!=s){e.next=63;break}return e.abrupt("return",null);case 63:e.t1=s.type,e.next="point"===e.t1?66:"extent"===e.t1||"multipoint"===e.t1||"polygon"===e.t1||"polyline"===e.t1?68:70;break;case 66:return u=new m.Z({xmin:s.x,ymin:s.y,xmax:s.x,ymax:s.y,spatialReference:s.spatialReference}),e.abrupt("break",71);case 68:return u=(0,w.wK)(s),e.abrupt("break",71);case 70:u=s.extent;case 71:if(u){e.next=73;break}return e.abrupt("return",null);case 73:if(e.t2=(0,b.isLoaded)()||(0,b.canProjectWithoutEngine)(u.spatialReference,a),e.t2){e.next=77;break}return e.next=77,(0,b.load)();case 77:if(J=(0,b.project)(u,a)){e.next=80;break}return e.abrupt("return",null);case 80:return o?(z=J.center,(B=z.clone()).x=(0,w.it)(z.x,o.center.x,a),B.x!==z.x&&J.centerAt(B),o=o.union(J)):o=J,e.abrupt("return",o);case 82:case"end":return e.stop()}}),e,null,[[21,32,35,38]])})))).apply(this,arguments)}function O(e){if(e&&(!Array.isArray(e)||"number"!=typeof e[0])&&("object"==typeof e||Array.isArray(e)&&"object"==typeof e[0])){var t;if("layer"in e&&null!=(null===(t=e.layer)||void 0===t?void 0:t.minScale)&&null!=e.layer.maxScale){var n=e.layer;return{min:n.minScale,max:n.maxScale}}if(Array.isArray(e)&&e.length&&e.every((function(e){return"layer"in e}))){var r,a=0,o=0,l=(0,i.Z)(e);try{for(l.s();!(r=l.n()).done;){var s=r.value.layer;(null===s||void 0===s?void 0:s.minScale)&&s.maxScale&&(a=s.minScale<a?s.minScale:a,o=s.maxScale>o?s.maxScale:o)}}catch(u){l.e(u)}finally{l.f()}return a&&o?{min:a,max:o}:null}}}function P(e,t){return(0,x.fS)(_(e),t)?e:(0,b.project)(e,t)}function L(e,t){return M.apply(this,arguments)}function M(){return(M=(0,a.Z)((0,r.Z)().mark((function e(t,n){var i,a,l,s,u,c,p,d,f,v,g,k,T,S,Z,L,M,A;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&n){e.next=2;break}return e.abrupt("return",new o.Z({targetGeometry:new h.Z,scale:0,rotation:0}));case 2:if(u=n.spatialReference,c=n.constraints,p=n.padding,d=n.viewpoint,f=n.size,v=[p?f[0]-p.left-p.right:f[0],p?f[1]-p.top-p.bottom:f[1]],g=null,t instanceof o.Z?g=t:t.viewpoint?g=t.viewpoint:t.target&&"esri.Viewpoint"===t.target.declaredClass&&(g=t.target),k=null,null===(i=g)||void 0===i||!i.targetGeometry){e.next=11;break}k=g.targetGeometry,e.next=36;break;case 11:if(!(t instanceof m.Z)){e.next=15;break}k=t,e.next=36;break;case 15:if(!(t instanceof y.Z)){e.next=21;break}return e.next=18,I(t,n,u);case 18:k=e.sent,e.next=36;break;case 21:if(e.t0=t,!e.t0){e.next=36;break}return e.next=25,I(t.center,n,u);case 25:if(e.t2=e.sent,e.t2){e.next=30;break}return e.next=29,I(t.target,n,u);case 29:e.t2=e.sent;case 30:if(e.t1=e.t2,e.t1){e.next=35;break}return e.next=34,I(t,n,u);case 34:e.t1=e.sent;case 35:k=e.t1;case 36:if(!k&&null!==d&&void 0!==d&&d.targetGeometry?k=d.targetGeometry:!k&&n.extent&&(k=n.extent),u||(u=_(n.spatialReference||n.extent||k)),e.t3=(0,b.isLoaded)()||(0,x.fS)(k.spatialReference,u)||(0,b.canProjectWithoutEngine)(k.spatialReference,u),e.t3){e.next=42;break}return e.next=42,(0,b.load)();case 42:return T=P(k,u),S="center"in T?T.center:T,!1!==n.pickClosestTarget&&"point"===S.type&&"point"===(null===(a=d.targetGeometry)||void 0===a?void 0:a.type)&&(S.x=(0,w.it)(S.x,d.targetGeometry.x,S.spatialReference)),Z=0,g?Z=g.rotation:t.hasOwnProperty("rotation")?Z=t.rotation:d&&(Z=d.rotation),L=0,L=null!=(null===(l=g)||void 0===l?void 0:l.targetGeometry)&&"point"===g.targetGeometry.type?g.scale:"scale"in t&&t.scale?t.scale:"zoom"in t&&-1!==t.zoom&&c&&c.effectiveLODs?c.zoomToScale(t.zoom):Array.isArray(k)||"point"===k.type||"extent"===k.type&&0===k.width&&0===k.height?d.scale:C(P(k.extent,u),v,Z),(M=O(null!==(s=t.target)&&void 0!==s?s:t))&&(M.min&&M.min<L?L=M.min:M.max&&M.max>L&&(L=M.max)),A=new o.Z({targetGeometry:S,scale:L,rotation:Z}),e.abrupt("return",(c&&(A=c.fit(A),c.constrainByGeometry(A),c.rotationEnabled||(A.rotation=d.rotation)),A));case 52:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(e,t){var n=e.targetGeometry,r=t.targetGeometry;return n.x=r.x,n.y=r.y,n.spatialReference=r.spatialReference,e.scale=t.scale,e.rotation=t.rotation,e}function D(e,t,n){return n?(0,f.t8)(e,.5*(t[0]-n.right+n.left),.5*(t[1]-n.bottom+n.top)):(0,f.bA)(e,t,.5)}var N=function(){var e=(0,v.Ue)();return function(t,n,r){var i=n.targetGeometry;T(e,i);var a=.5*R(n);return t.xmin=e[0]-a*r[0],t.ymin=e[1]-a*r[1],t.xmax=e[0]+a*r[0],t.ymax=e[1]+a*r[1],t.spatialReference=i.spatialReference,t}}();function E(e,t,n,r,i){var a;return Y(e,t,n.center),e.scale=C(n,r),null!==i&&void 0!==i&&null!==(a=i.constraints)&&void 0!==a&&a.constrain(e),e}var U=function(){var e=(0,v.Ue)();return function(t,n,r){return(0,f.lu)(t,function(e,t){return(0,f.bA)(e,t,.5)}(t,n),D(e,n,r))}}(),F=function(){var e=(0,d.Ue)(),t=(0,v.Ue)();return function(n,r,i,a){var o=R(r),l=G(r);return(0,f.t8)(t,o,o),(0,p.xJ)(e,t),(0,p.U1)(e,e,l),(0,p.Iu)(e,e,U(t,i,a)),(0,p.Iu)(e,e,[0,a.top-a.bottom]),(0,f.t8)(n,e[4],e[5])}}();function R(e){var t;return e.scale*j(null===(t=e.targetGeometry)||void 0===t?void 0:t.spatialReference)}function j(e){return null!=e&&(0,x.JY)(e)?1/(39.37*S(e)*96):1}function G(e){return(0,c.c$)(e.rotation)||0}function V(e){return(0,x.JY)(e)?39.37*S(e)*96:1}var q=function(){var e=(0,v.Ue)(),t=(0,v.Ue)(),n=(0,v.Ue)();return function(r,i,a,o,l,s){return(0,f.tk)(e,i),(0,f.bA)(t,a,.5*s),(0,f.t8)(n,1/o*s,-1/o*s),(0,p.vc)(r,t),l&&(0,p.U1)(r,r,l),(0,p.bA)(r,r,n),(0,p.Iu)(r,r,e),r}}(),J=function(){var e=(0,v.Ue)();return function(t,n,r,i){var a=R(n),o=G(n);return T(e,n.targetGeometry),q(t,e,r,a,o,i)}}(),z=function(){var e=(0,v.Ue)();return function(t,n,r,i){var a=R(n);return T(e,n.targetGeometry),q(t,e,r,a,0,i)}}();function B(e){var t=(0,x.C5)(e);return t?t.valid[1]-t.valid[0]:0}function H(e,t){return Math.round(B(e)/t)}var W=function(){var e=(0,v.Ue)(),t=(0,v.Ue)(),n=[0,0,0];return function(r,i,a){(0,f.$X)(e,r,i),(0,f.Fv)(e,e),(0,f.$X)(t,r,a),(0,f.Fv)(t,t),(0,f.kC)(n,e,t);var o=Math.acos((0,f.AK)(e,t)/((0,f.kE)(e)*(0,f.kE)(t)))*k;return n[2]<0&&(o=-o),isNaN(o)&&(o=0),o}}(),K=function(){var e=(0,v.Ue)();return function(t,n,r,i){var a=t.targetGeometry;return A(t,n),F(e,n,r,i),a.x+=e[0],a.y+=e[1],t}}(),Y=function(e,t,n){A(e,t);var r=e.targetGeometry;return r.x=n.x,r.y=n.y,r.spatialReference=n.spatialReference,e},X=function(){var e=(0,v.Ue)();return function(t,n,r,i,a){a||(a="center"),(0,f.lu)(e,r,i),(0,f.bA)(e,e,.5);var o=e[0],l=e[1];switch(a){case"center":(0,f.t8)(e,0,0);break;case"left":(0,f.t8)(e,-o,0);break;case"top":(0,f.t8)(e,0,l);break;case"right":(0,f.t8)(e,o,0);break;case"bottom":(0,f.t8)(e,0,-l);break;case"top-left":(0,f.t8)(e,-o,l);break;case"bottom-left":(0,f.t8)(e,-o,-l);break;case"top-right":(0,f.t8)(e,o,l);break;case"bottom-right":(0,f.t8)(e,o,-l)}return oe(t,n,e),t}}();function Q(e,t,n){return A(e,t),e.rotation+=n,e}function $(e,t,n){return A(e,t),e.rotation=n,e}var ee=function(){var e=(0,v.Ue)();return function(t,n,r,i,a){return A(t,n),isNaN(r)||0===r||(ie(e,i,n,a),t.scale=n.scale*r,ae(e,e,t,a),oe(t,t,(0,f.t8)(e,e[0]-i[0],i[1]-e[1]))),t}}();function te(e,t,n){return A(e,t),e.scale=n,e}var ne=function(){var e=(0,v.Ue)();return function(t,n,r,i,a,o){return A(t,n),isNaN(r)||0===r||(ie(e,a,n,o),t.scale=n.scale*r,t.rotation+=i,ae(e,e,t,o),oe(t,t,(0,f.t8)(e,e[0]-a[0],a[1]-e[1]))),t}}(),re=function(){var e=(0,v.Ue)(),t=(0,v.Ue)();return function(n,r,i,a,o,l,s){return U(t,l,s),(0,f.IH)(e,o,t),a?ne(n,r,i,a,e,l):ee(n,r,i,e,l)}}(),ie=function(){var e=(0,d.Ue)();return function(t,n,r,i){return(0,f.iu)(t,n,function(e,t,n,r){return J(e,t,n,r),(0,p.U_)(e,e)}(e,r,i,1))}}(),ae=function(){var e=(0,d.Ue)();return function(t,n,r,i){return(0,f.iu)(t,n,J(e,r,i,1))}}(),oe=function(){var e=(0,v.Ue)(),t=(0,d.Ue)();return function(n,r,i){A(n,r);var a=R(r),o=n.targetGeometry;return(0,p.Us)(t,G(r)),(0,p.bA)(t,t,(0,v.al)(a,a)),(0,f.iu)(e,i,t),o.x+=e[0],o.y+=e[1],n}}()},69787:function(e,t,n){function r(e){return e&&"function"==typeof e.highlight}function i(e){return e&&"function"==typeof e.maskOccludee}function a(e,t,n){return null==e||e>=n&&(0===t||e<=t)}function o(e,t){if(t&&e){var n=e.minScale,r=e.maxScale;if(l(n,r))return a(t,n,r)}return!0}function l(e,t){return null!=e&&e>0||null!=t&&t>0}function s(e){return!(null!==e&&void 0!==e&&e.minScale)||!e.maxScale||e.minScale>=e.maxScale}function u(e){return null!=e&&"object"==typeof e&&"createQuery"in e&&"queryFeatures"in e&&"layer"in e&&"view"in e}n.d(t,{Av:function(){return l},Cy:function(){return s},GB:function(){return o},Xi:function(){return u},_1:function(){return i},rs:function(){return a},tl:function(){return r}})},66244:function(e,t,n){n.r(t),n.d(t,{default:function(){return tr}});var r=n(4942),i=n(74165),a=n(15861),o=n(29439),l=n(15671),s=n(43144),u=n(97326),c=n(60136),p=n(29388),d=n(27366),f=(n(59166),n(80987)),v=n(43404),m=n(84652),y=n(94172),h=n(5163),b=n(35995),g=n(49861),w=(n(93169),n(32718),n(69912)),x=n(80139),k=n(23084),_=new v.X({PDF:"pdf",PNG32:"png32",PNG8:"png8",JPG:"jpg",GIF:"gif",EPS:"eps",SVG:"svg",SVGZ:"svgz"}),T=_.fromJSON.bind(_),S=_.toJSON.bind(_),C=n(33565),I=n(7138),Z=(n(84936),function(e){(0,c.Z)(n,e);var t=(0,p.Z)(n);function n(e){var r;return(0,l.Z)(this,n),(r=t.call(this,e)).state="pending",r.url="",r}return(0,s.Z)(n,[{key:"initialize",value:function(){var e=this;this.addHandles((0,y.watch)((function(){return[e.extension,e.name]}),(function(){return e._setFormattedFileName()}),y.initial))}},{key:"_setFormattedFileName",value:function(){this.name&&this.extension&&(this.formattedName=this.count?"".concat(this.name,"(").concat(this.count,")").concat(this.extension):"".concat(this.name,".").concat(this.extension))}}]),n}(I.default));(0,d._)([(0,g.Cb)()],Z.prototype,"count",void 0),(0,d._)([(0,g.Cb)()],Z.prototype,"error",void 0),(0,d._)([(0,g.Cb)()],Z.prototype,"extension",void 0),(0,d._)([(0,g.Cb)()],Z.prototype,"formattedName",void 0),(0,d._)([(0,g.Cb)()],Z.prototype,"name",void 0),(0,d._)([(0,g.Cb)()],Z.prototype,"state",void 0),(0,d._)([(0,g.Cb)()],Z.prototype,"url",void 0);var O,P=Z=(0,d._)([(0,w.j)("esri.widgets.Print.FileLink")],Z),L=n(1413),M=n(37762),A=(n(59486),n(19545)),D=n(76200),N=n(63780),E=n(10064),U=n(54472),F=n(66978),R=n(18442),j=n(17842),G=n(68860),V=n(76969),q=n(36257),J=n(7575),z=n(65694),B=n(25243),H=n(53866),W=n(78952),K=O=function(e){(0,c.Z)(n,e);var t=(0,p.Z)(n);function n(e){var r;return(0,l.Z)(this,n),(r=t.call(this,e)).outSpatialReference=null,r.processExtent=null,r.processSpatialReference=null,r.returnColumnName=!1,r.returnFeatureCollection=!1,r.returnM=!1,r.returnZ=!1,r}return(0,s.Z)(n,null,[{key:"from",value:function(e){return(0,B.TJ)(O,e)}}]),n}(I.default);(0,d._)([(0,g.Cb)({type:W.Z})],K.prototype,"outSpatialReference",void 0),(0,d._)([(0,g.Cb)({type:H.Z})],K.prototype,"processExtent",void 0),(0,d._)([(0,g.Cb)({type:W.Z})],K.prototype,"processSpatialReference",void 0),(0,d._)([(0,g.Cb)({nonNullable:!0})],K.prototype,"returnColumnName",void 0),(0,d._)([(0,g.Cb)({nonNullable:!0})],K.prototype,"returnFeatureCollection",void 0),(0,d._)([(0,g.Cb)({nonNullable:!0})],K.prototype,"returnM",void 0),(0,d._)([(0,g.Cb)({nonNullable:!0})],K.prototype,"returnZ",void 0);var Y=K=O=(0,d._)([(0,w.j)("esri.rest.geoprocessor.GPOptions")],K),X=n(91340),Q=n(83040),$=n(46784),ee=function(e){(0,c.Z)(n,e);var t=(0,p.Z)(n);function n(){var e;return(0,l.Z)(this,n),(e=t.apply(this,arguments)).extent=null,e.height=null,e.href=null,e.opacity=1,e.rotation=0,e.scale=null,e.visible=!0,e.width=null,e}return(0,s.Z)(n)}($.wq);(0,d._)([(0,g.Cb)({type:H.Z})],ee.prototype,"extent",void 0),(0,d._)([(0,g.Cb)()],ee.prototype,"height",void 0),(0,d._)([(0,g.Cb)()],ee.prototype,"href",void 0),(0,d._)([(0,g.Cb)()],ee.prototype,"opacity",void 0),(0,d._)([(0,g.Cb)()],ee.prototype,"rotation",void 0),(0,d._)([(0,g.Cb)()],ee.prototype,"scale",void 0),(0,d._)([(0,g.Cb)()],ee.prototype,"visible",void 0),(0,d._)([(0,g.Cb)()],ee.prototype,"width",void 0);var te=ee=(0,d._)([(0,w.j)("esri.layers.support.MapImage")],ee),ne=n(27135),re=n(49022),ie=function(e){(0,c.Z)(n,e);var t=(0,p.Z)(n);function n(e){var r;return(0,l.Z)(this,n),(r=t.call(this,e)).area=0,r.units=null,r}return(0,s.Z)(n)}($.wq);(0,d._)([(0,g.Cb)({json:{write:!0}})],ie.prototype,"area",void 0),(0,d._)([(0,ne.J)(re.dh)],ie.prototype,"units",void 0);var ae=ie=(0,d._)([(0,w.j)("esri.rest.support.ArealUnit")],ie),oe=function(e){(0,c.Z)(n,e);var t=(0,p.Z)(n);function n(e){var r;return(0,l.Z)(this,n),(r=t.call(this,e)).itemId=null,r.url=null,r}return(0,s.Z)(n)}($.wq);(0,d._)([(0,g.Cb)({type:String,json:{read:{source:"itemID"},write:{target:"itemID"}}})],oe.prototype,"itemId",void 0),(0,d._)([(0,g.Cb)({type:String,json:{write:!0}})],oe.prototype,"url",void 0);var le=oe=(0,d._)([(0,w.j)("esri.rest.support.DataFile")],oe),se=n(49818),ue=function(e){(0,c.Z)(n,e);var t=(0,p.Z)(n);function n(e){var r;return(0,l.Z)(this,n),(r=t.call(this,e)).distance=0,r.units=null,r}return(0,s.Z)(n)}($.wq);(0,d._)([(0,g.Cb)({json:{write:!0}})],ue.prototype,"distance",void 0),(0,d._)([(0,ne.J)(re.RK)],ue.prototype,"units",void 0);var ce=ue=(0,d._)([(0,w.j)("esri.rest.support.LinearUnit")],ue),pe="multi-value-",de=new v.X({GPArealUnit:"areal-unit",GPBoolean:"boolean",GPComposite:"composite",GPDataFile:"data-file",GPDate:"date",GPDouble:"double",GPFeatureRecordSetLayer:"feature-record-set-layer",Field:"field",GPLinearUnit:"linear-unit",GPLong:"long",GPRasterData:"raster-data",GPRasterDataLayer:"raster-data-layer",GPRecordSet:"record-set",GPString:"string",GPValueTable:"value-table","GPMultiValue:GPArealUnit":"".concat(pe,"areal-unit"),"GPMultiValue:GPBoolean":"".concat(pe,"boolean"),"GPMultiValue:GPComposite":"".concat(pe,"composite"),"GPMultiValue:GPDataFile":"".concat(pe,"data-file"),"GPMultiValue:GPDate":"".concat(pe,"date"),"GPMultiValue:GPDouble":"".concat(pe,"double"),"GPMultiValue:GPFeatureRecordSetLayer":"".concat(pe,"feature-record-set-layer"),"GPMultiValue:Field":"".concat(pe,"field"),"GPMultiValue:GPLinearUnit":"".concat(pe,"linear-unit"),"GPMultiValue:GPLong":"".concat(pe,"long"),"GPMultiValue:GPRasterData":"".concat(pe,"raster-data"),"GPMultiValue:GPRasterDataLayer":"".concat(pe,"raster-data-layer"),"GPMultiValue:GPRecordSet":"".concat(pe,"record-set"),"GPMultiValue:GPString":"".concat(pe,"string")}),fe=function(e){(0,c.Z)(n,e);var t=(0,p.Z)(n);function n(e){var r;return(0,l.Z)(this,n),(r=t.call(this,e)).dataType=null,r.paramName=null,r.value=null,r}return(0,s.Z)(n)}($.wq);(0,d._)([(0,ne.J)(de,{ignoreUnknown:!1})],fe.prototype,"dataType",void 0),(0,d._)([(0,g.Cb)()],fe.prototype,"paramName",void 0),(0,d._)([(0,g.Cb)()],fe.prototype,"value",void 0);var ve=fe=(0,d._)([(0,w.j)("esri.rest.support.ParameterValue")],fe),me=function(e){(0,c.Z)(n,e);var t=(0,p.Z)(n);function n(e){var r;return(0,l.Z)(this,n),(r=t.call(this,e)).format=null,r.itemId=null,r.url=null,r}return(0,s.Z)(n)}($.wq);(0,d._)([(0,g.Cb)()],me.prototype,"format",void 0),(0,d._)([(0,g.Cb)({json:{read:{source:"itemID"},write:{target:"itemID"}}})],me.prototype,"itemId",void 0),(0,d._)([(0,g.Cb)()],me.prototype,"url",void 0);var ye=me=(0,d._)([(0,w.j)("esri.rest.support.RasterData")],me);function he(e,t,n,r,i){return be.apply(this,arguments)}function be(){return be=(0,a.Z)((0,i.Z)().mark((function e(t,n,r,a,l){var s,u,c;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={},u={},c=[],e.abrupt("return",(ge(a,c,s),(0,X.aX)(c).then((function(e){var i=r.outSpatialReference,c=r.processExtent,p=r.processSpatialReference,d=r.returnColumnName,f=r.returnFeatureCollection,v=r.returnM,m=r.returnZ,y=(0,k.en)(t).path;for(var h in s){var b=(0,o.Z)(s[h],2),g=b[0],w=b[1];u[h]=e.slice(g,w)}var x=i?i.wkid||i:null,_=p?p.wkid||p:null,T="execute"===n?{returnColumnName:d||void 0,returnFeatureCollection:f||void 0,returnM:v||void 0,returnZ:m||void 0}:null,S=Ze((0,L.Z)((0,L.Z)((0,L.Z)((0,L.Z)({},c?{context:{extent:c,outSR:x,processSR:_}}:{"env:outSR":x,"env:processSR":_}),a),T),{},{f:"json"}),null,u),C=(0,L.Z)((0,L.Z)({},l),{},{query:S});return(0,D.Z)("".concat(y,"/").concat(n),C)}))));case 2:case"end":return e.stop()}}),e)}))),be.apply(this,arguments)}function ge(e,t,n){for(var r in e){var i=e[r];if(i&&"object"==typeof i&&i instanceof se.Z){var a=i.features;n[r]=[t.length,t.length+a.length],a.forEach((function(e){t.push(e.geometry)}))}}}function we(e,t){return xe.apply(this,arguments)}function xe(){return xe=(0,a.Z)((0,i.Z)().mark((function e(t,r){var a,o,l,s,u;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t,e.next="areal-unit"===e.t0?3:"boolean"===e.t0||"double"===e.t0||"long"===e.t0||"string"===e.t0||"value-table"===e.t0?4:"date"===e.t0?5:"data-file"===e.t0?6:"linear-unit"===e.t0?7:"feature-record-set-layer"===e.t0?8:"record-set"===e.t0?20:"raster-data"===e.t0||"raster-data-layer"===e.t0?21:"field"===e.t0?22:23;break;case 3:return e.abrupt("return",ae.fromJSON(r));case 4:return e.abrupt("return",r);case 5:return e.abrupt("return",new Date(r));case 6:return e.abrupt("return",le.fromJSON(r));case 7:return e.abrupt("return",ce.fromJSON(r));case 8:if(!("url"in r)){e.next=10;break}return e.abrupt("return",le.fromJSON(r));case 10:if(!("layerDefinition"in r)){e.next=19;break}return e.next=14,Promise.resolve().then(n.bind(n,64326));case 14:return e.t1=e.sent.default,l=new e.t1,s=r.layerDefinition,u=r.featureSet,e.abrupt("return",(l.read({layerDefinition:s,featureSet:u},{origin:"portal-item"}),l.spatialReference=W.Z.fromJSON(null!==(a=null!==(o=u.spatialReference)&&void 0!==o?o:s.spatialReference)&&void 0!==a?a:s.extent.spatialReference),l));case 19:return e.abrupt("return",se.Z.fromJSON(r));case 20:return e.abrupt("return","url"in r?le.fromJSON(r):se.Z.fromJSON(r));case 21:return e.abrupt("return","mapImage"in r?te.fromJSON(r.mapImage):ye.fromJSON(r));case 22:return e.abrupt("return",Q.Z.fromJSON(r));case 23:case"end":return e.stop()}}),e)}))),xe.apply(this,arguments)}function ke(e){return e.startsWith(pe)}function _e(e){return e.replace(pe,"")}function Te(e,t){return Se.apply(this,arguments)}function Se(){return Se=(0,a.Z)((0,i.Z)().mark((function e(t,n){var r,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=_e(t),a="composite"===r?n.map((function(e){return we(de.fromJSON(e.dataType),e.value)})):n.map((function(e){return we(r,e)})),e.abrupt("return",Promise.all(a));case 2:case"end":return e.stop()}}),e)}))),Se.apply(this,arguments)}function Ce(e){return Ie.apply(this,arguments)}function Ie(){return Ie=(0,a.Z)((0,i.Z)().mark((function e(t){var n,r,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=de.fromJSON(t.dataType),r=t.paramName,!ke(n)){e.next=8;break}return e.next=5,Te(n,t.value);case 5:e.t0=e.sent,e.next=11;break;case 8:return e.next=10,we(n,t.value);case 10:e.t0=e.sent;case 11:return a=e.t0,e.abrupt("return",new ve({dataType:n,paramName:r,value:a}));case 13:case"end":return e.stop()}}),e)}))),Ie.apply(this,arguments)}function Ze(e,t,n){for(var r in e){var i=e[r];Array.isArray(i)?e[r]=JSON.stringify(i.map((function(e){return Ze({item:e},!0).item}))):i instanceof Date&&(e[r]=i.getTime())}return(0,k.cv)(e,t,n)}var Oe,Pe=n(2429);function Le(e,t,n,r){return Me.apply(this,arguments)}function Me(){return Me=(0,a.Z)((0,i.Z)().mark((function e(t,n,r,o){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(r=Y.from(r||{}),he(t,"execute",r,null!==n&&void 0!==n?n:{},o).then(function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t){var n,r,a,o,l;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=t.data,e.next=3,Promise.all(null!==(n=null===(r=l.results)||void 0===r?void 0:r.map(Ce))&&void 0!==n?n:[]);case 3:return e.t0=e.sent,e.t1=null!==(a=null===(o=l.messages)||void 0===o?void 0:o.map((function(e){return Pe.Z.fromJSON(e)})))&&void 0!==a?a:[],e.abrupt("return",{results:e.t0,messages:e.t1});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())));case 1:case"end":return e.stop()}}),e)}))),Me.apply(this,arguments)}var Ae=(0,v.w)()({esriJobCancelled:"job-cancelled",esriJobCancelling:"job-cancelling",esriJobDeleted:"job-deleted",esriJobDeleting:"job-deleting",esriJobTimedOut:"job-timed-out",esriJobExecuting:"job-executing",esriJobFailed:"job-failed",esriJobNew:"job-new",esriJobSubmitted:"job-submitted",esriJobSucceeded:"job-succeeded",esriJobWaiting:"job-waiting"},{ignoreUnknown:!1}),De=Oe=function(e){(0,c.Z)(r,e);var t=(0,p.Z)(r);function r(e){var n;return(0,l.Z)(this,r),(n=t.call(this,e)).jobId=null,n.jobStatus=null,n.messages=null,n.progress=null,n.requestOptions=null,n.sourceUrl=null,n._timer=void 0,n}return(0,s.Z)(r,[{key:"cancelJob",value:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t){var n,r,a,o,l,s,u,c,p,d,f,v;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.jobId,r=this.sourceUrl,a=(0,k.en)(r),o=a.path,l=(0,L.Z)((0,L.Z)((0,L.Z)({},this.requestOptions),t),{},{query:{f:"json"}}),this._clearTimer(),s="".concat(o,"/jobs/").concat(n,"/cancel"),e.next=5,(0,D.Z)(s,l);case 5:return u=e.sent,c=u.data,p=Oe.fromJSON(c),d=p.messages,f=p.jobStatus,v=p.progress,e.abrupt("return",(this.set({messages:d,jobStatus:f,progress:v}),this));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"destroy",value:function(){clearInterval(this._timer)}},{key:"checkJobStatus",value:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t){var n,r,a,o,l,s,u,c,p,d;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,k.en)(this.sourceUrl),r=n.path,a=(0,L.Z)((0,L.Z)((0,L.Z)({},this.requestOptions),t),{},{query:{f:"json"}}),o="".concat(r,"/jobs/").concat(this.jobId),e.next=6,(0,D.Z)(o,a);case 6:return l=e.sent,s=l.data,u=Oe.fromJSON(s),c=u.messages,p=u.jobStatus,d=u.progress,e.abrupt("return",(this.set({messages:c,jobStatus:p,progress:d}),this));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchResultData",value:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t,n,r){var a,o,l,s,u,c,p,d,f,v,m,y,h;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Y.from(n||{}),o=(a=n).returnColumnName,l=a.returnFeatureCollection,s=a.returnM,u=a.returnZ,c=a.outSpatialReference,p=(0,k.en)(this.sourceUrl),d=p.path,f=Ze({returnColumnName:o||null,returnFeatureCollection:l||null,returnM:s||null,returnZ:u||null,outSR:c,returnType:"data",f:"json"},null),v=(0,L.Z)((0,L.Z)((0,L.Z)({},this.requestOptions),r),{},{query:f}),m="".concat(d,"/jobs/").concat(this.jobId,"/results/").concat(t),e.next=14,(0,D.Z)(m,v);case 14:return y=e.sent,h=y.data,e.abrupt("return",Ce(h));case 17:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"fetchResultImage",value:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t,n,r){var a,o,l,s,u,c,p,d;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(0,k.en)(this.sourceUrl),o=a.path,l=(0,L.Z)((0,L.Z)({},n.toJSON()),{},{f:"json"}),s=Ze(l),u=(0,L.Z)((0,L.Z)((0,L.Z)({},this.requestOptions),r),{},{query:s}),c="".concat(o,"/jobs/").concat(this.jobId,"/results/").concat(t),e.next=8,(0,D.Z)(c,u);case 8:return p=e.sent,d=p.data,e.abrupt("return",Ce(d));case 11:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"fetchResultMapImageLayer",value:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(){var t,r,a,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,k.en)(this.sourceUrl),r=t.path,a=r.indexOf("/GPServer/"),o="".concat(r.substring(0,a),"/MapServer/jobs/").concat(this.jobId),e.next=4,Promise.all([n.e(83406),n.e(27607),n.e(8663),n.e(89623),n.e(30453),n.e(19583)]).then(n.bind(n,19583));case 4:return e.t0=e.sent.default,e.t1={url:o},e.abrupt("return",new e.t0(e.t1));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"waitForJobCompletion",value:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(){var t,n,r,a,o,l=this,s=arguments;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:{},n=t.interval,r=void 0===n?1e3:n,a=t.signal,o=t.statusCallback,e.abrupt("return",new Promise((function(e,t){(0,F.fu)(a,(function(){l._clearTimer(),t((0,F.zE)())})),l._clearTimer();var n=setInterval((function(){l._timer||t((0,F.zE)()),l.checkJobStatus(l.requestOptions).then((function(n){var r=n.jobStatus;switch(l.jobStatus=r,r){case"job-succeeded":l._clearTimer(),e(l);break;case"job-submitted":case"job-executing":case"job-waiting":case"job-new":o&&o(l);break;case"job-cancelled":case"job-cancelling":case"job-deleted":case"job-deleting":case"job-timed-out":case"job-failed":l._clearTimer(),t(l)}}))}),r);l._timer=n})));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_clearTimer",value:function(){clearInterval(this._timer),this._timer=void 0}}]),r}($.wq);(0,d._)([(0,g.Cb)()],De.prototype,"jobId",void 0),(0,d._)([(0,ne.J)(Ae,{ignoreUnknown:!1})],De.prototype,"jobStatus",void 0),(0,d._)([(0,g.Cb)({type:[Pe.Z]})],De.prototype,"messages",void 0),(0,d._)([(0,g.Cb)()],De.prototype,"progress",void 0),(0,d._)([(0,g.Cb)()],De.prototype,"requestOptions",void 0),(0,d._)([(0,g.Cb)({json:{write:!0}})],De.prototype,"sourceUrl",void 0);var Ne=De=Oe=(0,d._)([(0,w.j)("esri.rest.support.JobInfo")],De);function Ee(e,t,n,r){return Ue.apply(this,arguments)}function Ue(){return Ue=(0,a.Z)((0,i.Z)().mark((function e(t,n,r,a){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(r=Y.from(r||{}),he(t,"submitJob",r,null!==n&&void 0!==n?n:{},a).then((function(e){var n=e.data,r=Ne.fromJSON(n);return r.sourceUrl=t,r}))));case 1:case"end":return e.stop()}}),e)}))),Ue.apply(this,arguments)}var Fe=n(93433),Re=(n(80885),n(37270)),je=n(87072),Ge=n(56011),Ve=new v.X({MAP_ONLY:"map-only","A3 Landscape":"a3-landscape","A3 Portrait":"a3-portrait","A4 Landscape":"a4-landscape","A4 Portrait":"a4-portrait","Letter ANSI A Landscape":"letter-ansi-a-landscape","Letter ANSI A Portrait":"letter-ansi-a-portrait","Tabloid ANSI B Landscape":"tabloid-ansi-b-landscape","Tabloid ANSI B Portrait":"tabloid-ansi-b-portrait"}),qe=Ve.fromJSON.bind(Ve),Je=Ve.toJSON.bind(Ve),ze=n(51995),Be=n(61459),He=n(14404),We=n(16072),Ke=n(69787);function Ye(e){var t,n,r,i,a,o,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15,s=e.canvas.width,u=e.canvas.height,c=e.getImageData(0,0,s,u).data;e:for(n=u;n--;)for(t=s;t--;)if(c[4*(s*n+t)+3]>l){o=n;break e}if(!o)return null;e:for(t=s;t--;)for(n=o+1;n--;)if(c[4*(s*n+t)+3]>l){a=t;break e}e:for(t=0;t<=a;++t)for(n=o+1;n--;)if(c[4*(s*n+t)+3]>l){r=t;break e}e:for(n=0;n<=o;++n)for(t=r;t<=a;++t)if(c[4*(s*n+t)+3]>l){i=n;break e}return{x:r,y:i,width:a-r,height:o-i}}function Xe(e,t){var n,r,i,a,o,l=null!==(n=null===(r=t.color)||void 0===r?void 0:r.clone())&&void 0!==n?n:new ze.Z([0,255,255]),s=null!==(i=null===(a=t.haloColor)||void 0===a?void 0:a.clone())&&void 0!==i?i:l.clone();switch(e){case"envelope":case"polygon":return l.a*=null!==(o=t.fillOpacity)&&void 0!==o?o:.25,new Be.default({color:l,outline:new He.default({color:s}),style:"solid"});case"polyline":return new He.default({color:s});default:return s.a=1,new We.default({color:s,outline:null})}}function Qe(e,t){var n=e.allLayerViews.items;if(t===e.scale)return n.filter((function(e){return!e.suspended}));var r,i=new Array,a=(0,M.Z)(n);try{for(a.s();!(r=a.n()).done;){var o=r.value,l=o.parent;l&&l!==o.view&&(nt(l)||rt(l))&&!i.includes(l)||o.visible&&o.visibleAtCurrentTimeExtent&&(0,Ke.GB)(o.layer.effectiveScaleRange,t)&&i.push(o)}}catch(s){a.e(s)}finally{a.f()}return i}function $e(e){return"bing-maps"===(null===e||void 0===e?void 0:e.type)}function et(e){return e&&"blendMode"in e&&"effect"in e}function tt(e){return"csv"===(null===e||void 0===e?void 0:e.type)}function nt(e){return"catalog"===e.layer.type}function rt(e){return"group"===e.layer.type}function it(e){var t=e.layer;if(et(t)){var n=t.blendMode;if((!n||"normal"===n)&&(t.effect||"featureEffect"in e&&e.featureEffect))return!0}return!1}var at=n(98995),ot=function(e){(0,c.Z)(n,e);var t=(0,p.Z)(n);function n(e){var r;return(0,l.Z)(this,n),(r=t.call(this,e)).attributionVisible=!0,r.exportOptions={width:800,height:1100,dpi:96},r.forceFeatureAttributes=!1,r.format="png32",r.includeCharts=!1,r.includeTables=!1,r.label=null,r.layout="map-only",r.layoutItem=null,r.layoutOptions=null,r.outScale=0,r.report=null,r.reportItem=null,r.reportOptions=null,r.scalePreserved=!0,r.showLabels=!0,r}return(0,s.Z)(n)}(I.default);(0,d._)([(0,g.Cb)()],ot.prototype,"attributionVisible",void 0),(0,d._)([(0,g.Cb)()],ot.prototype,"exportOptions",void 0),(0,d._)([(0,g.Cb)()],ot.prototype,"forceFeatureAttributes",void 0),(0,d._)([(0,g.Cb)()],ot.prototype,"format",void 0),(0,d._)([(0,g.Cb)()],ot.prototype,"includeCharts",void 0),(0,d._)([(0,g.Cb)()],ot.prototype,"includeTables",void 0),(0,d._)([(0,g.Cb)()],ot.prototype,"label",void 0),(0,d._)([(0,g.Cb)()],ot.prototype,"layout",void 0),(0,d._)([(0,g.Cb)({type:at.default})],ot.prototype,"layoutItem",void 0),(0,d._)([(0,g.Cb)()],ot.prototype,"layoutOptions",void 0),(0,d._)([(0,g.Cb)()],ot.prototype,"outScale",void 0),(0,d._)([(0,g.Cb)()],ot.prototype,"report",void 0),(0,d._)([(0,g.Cb)({type:at.default})],ot.prototype,"reportItem",void 0),(0,d._)([(0,g.Cb)()],ot.prototype,"reportOptions",void 0),(0,d._)([(0,g.Cb)()],ot.prototype,"scalePreserved",void 0),(0,d._)([(0,g.Cb)()],ot.prototype,"showLabels",void 0);var lt=ot=(0,d._)([(0,w.j)("esri.rest.support.PrintTemplate")],ot),st=new v.X({"Attribute List Letter ANSI A Landscape":"attribute-list-letter-ansi-a-landscape","Attribute List Letter ANSI A Portrait":"attribute-list-letter-ansi-a-portrait","Attribute List With Group Letter ANSI A Landscape":"attribute-list-with-group-letter-ansi-a-landscape","Attribute List With Group Letter ANSI A Portrait":"attribute-list-with-group-letter-ansi-a-portrait","Page per Feature Letter ANSI A Landscape":"page-per-feature-letter-ansi-a-landscape","Page per Feature Letter ANSI A Portrait":"page-per-feature-letter-ansi-a-portrait"}),ut=(st.fromJSON.bind(st),st.toJSON.bind(st)),ct={Feet:"ft",Kilometers:"km",Meters:"m",Miles:"mi"},pt=new v.X({esriFeet:"Feet",esriKilometers:"Kilometers",esriMeters:"Meters",esriMiles:"Miles"}),dt=new v.X({esriExecutionTypeSynchronous:"sync",esriExecutionTypeAsynchronous:"async"}),ft=new Map;function vt(e,t,n){return mt.apply(this,arguments)}function mt(){return mt=(0,a.Z)((0,i.Z)().mark((function e(t,n,r){var a,o,l,s,u,c,p,d;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yt(t,r);case 2:return a=e.sent,e.next=5,kt(n,a);case 5:return o=e.sent,e.next=8,bt(t,r);case 8:if(e.t0=e.sent,"sync"!==e.t0){e.next=15;break}return e.next=12,Le(t,o,void 0,r);case 12:return s=e.sent,u=s.results,e.abrupt("return",null===u||void 0===u||null===(l=u[0])||void 0===l?void 0:l.value);case 15:return e.next=17,Ee(t,o,void 0,r);case 17:return c=e.sent,e.next=20,c.waitForJobCompletion({interval:n.updateDelay});case 20:return e.next=22,c.fetchResultData("Output_File",null,r);case 22:return p=e.sent,d=p.value,e.abrupt("return",d);case 25:case"end":return e.stop()}}),e)}))),mt.apply(this,arguments)}function yt(e,t){return ht.apply(this,arguments)}function ht(){return ht=(0,a.Z)((0,i.Z)().mark((function e(t,n){var r,a,o,l;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=Ct(t),l=null!==(r=ft.get(o))&&void 0!==r?r:{gpServerUrl:o,legendLayerNameMap:{},legendLayers:[]},null===(a=l.gpMetadata)||void 0===a){e.next=5;break}e.next=8;break;case 5:return e.next=7,(0,D.Z)(o,(0,k.lA)({f:"json"},n));case 7:l.gpMetadata=e.sent.data;case 8:return l.cimVersion=l.gpMetadata.cimVersion,ft.set(o,l),e.abrupt("return",l);case 11:case"end":return e.stop()}}),e)}))),ht.apply(this,arguments)}function bt(e,t){return gt.apply(this,arguments)}function gt(){return gt=(0,a.Z)((0,i.Z)().mark((function e(t,n){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=hn,e.next=3,yt(t,n);case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)}))),gt.apply(this,arguments)}function wt(e,t){return xt.apply(this,arguments)}function xt(){return xt=(0,a.Z)((0,i.Z)().mark((function e(t,n){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yt(t,n);case 2:return e.abrupt("return",e.sent.gpMetadata.tasks);case 3:case"end":return e.stop()}}),e)}))),xt.apply(this,arguments)}function kt(e,t){return _t.apply(this,arguments)}function _t(){return _t=(0,a.Z)((0,i.Z)().mark((function e(t,n){var r,a,o,l,s,u,c,p,d,f,v,m,y,h,b,g,w,x,k,_,T,C,I,Z,O,P,L,D,N,E,U,F,R;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=n||{is11xService:!1,legendLayerNameMap:{},legendLayers:[]},null==(r=t.template||new lt).showLabels&&(r.showLabels=!0),a=r.exportOptions,l=Je(r.layout),a&&(o={dpi:a.dpi},("map_only"===l.toLowerCase()||""===l)&&(s=a.width,u=a.height,o.outputSize=null!=s&&null!=u?[s,u]:void 0)),(c=r.layoutOptions)&&("Miles"===c.scalebarUnit||"Kilometers"===c.scalebarUnit?(d="Kilometers",f="Miles"):"Meters"!==c.scalebarUnit&&"Feet"!==c.scalebarUnit||(d="Meters",f="Feet"),p={titleText:c.titleText,authorText:c.authorText,copyrightText:c.copyrightText,customTextElements:c.customTextElements,elementOverrides:c.elementOverrides,scaleBarOptions:{metricUnit:pt.toJSON(d),metricLabel:d?ct[d]:void 0,nonMetricUnit:pt.toJSON(f),nonMetricLabel:f?ct[f]:void 0}}),v=null,(null===c||void 0===c?void 0:c.legendLayers)&&(v=c.legendLayers.map((function(e){var t=e.layerId;n.legendLayerNameMap[t]=e.title;var r={id:t};return e.subLayerIds&&(r.subLayerIds=e.subLayerIds),r}))),e.next=12,Tt(t,r,n);case 12:if((m=e.sent).operationalLayers){y=new RegExp("[\\u4E00-\\u9FFF\\u0E00-\\u0E7F\\u0900-\\u097F\\u3040-\\u309F\\u30A0-\\u30FF\\u31F0-\\u31FF]"),h=/[\u0600-\u06FF]/,b=function(e){var t,n=e.text,r=e.font,i=null===r||void 0===r||null===(t=r.family)||void 0===t?void 0:t.toLowerCase();n&&r&&("arial"===i||"arial unicode ms"===i)&&(r.family=y.test(n)?"Arial Unicode MS":"Arial","normal"!==r.style&&h.test(n)&&(r.family="Arial Unicode MS"))},g=(0,M.Z)(m.operationalLayers);try{for(g.s();!(w=g.n()).done;)if(k=w.value,null!==(x=k.featureCollection)&&void 0!==x&&x.layers){_=(0,M.Z)(k.featureCollection.layers);try{for(_.s();!(T=_.n()).done;)if(P=T.value,null!==(C=P.layerDefinition)&&void 0!==C&&null!==(I=C.drawingInfo)&&void 0!==I&&null!==(Z=I.renderer)&&void 0!==Z&&Z.symbol&&"esriTS"===(L=P.layerDefinition.drawingInfo.renderer).symbol.type&&b(L.symbol),null!==(O=P.featureSet)&&void 0!==O&&O.features){D=(0,M.Z)(P.featureSet.features);try{for(D.s();!(N=D.n()).done;)(E=N.value).symbol&&"esriTS"===E.symbol.type&&b(E.symbol)}catch(i){D.e(i)}finally{D.f()}}}catch(i){_.e(i)}finally{_.f()}}}catch(i){g.e(i)}finally{g.f()}}if(t.outSpatialReference&&(m.mapOptions.spatialReference=t.outSpatialReference.toJSON()),Object.assign(m,{exportOptions:o,layoutOptions:p||{}}),Object.assign(m.layoutOptions,{legendOptions:{operationalLayers:null!=v?v:n.legendLayers.slice()}}),n.legendLayers.length=0,ft.set(n.gpServerUrl,n),U={Web_Map_as_JSON:JSON.stringify(m),Format:S(r.format),Layout_Template:l,Layout_Item_ID:void 0,Report_Template:ut(r.report),Report_Item_ID:void 0},!r.layoutItem){e.next=26;break}return delete U.Layout_Template,F=r.layoutItem,e.next=21,F.load();case 21:if(e.t0="public"!==F.access&&A.id,!e.t0){e.next=25;break}return e.next=25,A.id.getCredential(n.gpServerUrl);case 25:U.Layout_Item_ID=JSON.stringify({id:F.id});case 26:if(!r.reportItem){e.next=36;break}return delete U.Report_Template,R=r.reportItem,e.next=31,R.load();case 31:if(e.t1="public"!==R.access&&A.id,!e.t1){e.next=35;break}return e.next=35,A.id.getCredential(n.gpServerUrl);case 35:U.Report_Item_ID=JSON.stringify({id:R.id});case 36:return e.abrupt("return",(t.extraParameters&&Object.assign(U,t.extraParameters),U));case 37:case"end":return e.stop()}}),e)}))),_t.apply(this,arguments)}function Tt(e,t,n){return St.apply(this,arguments)}function St(){return St=(0,a.Z)((0,i.Z)().mark((function e(t,n,r){var a,o,l,s,u,c,p;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.view,l=o.spatialReference,e.next=4,It(o,n,r);case 4:if(e.t0=e.sent,s={operationalLayers:e.t0},e.t1=n.includeTables,!e.t1){e.next=11;break}return e.next=10,en(o);case 10:s.tables=e.sent;case 11:return u=t.extent||r.ssExtent||o.extent,null!==(a=l)&&void 0!==a&&a.isWrappable&&(u=u.clone()._normalize(!0),l=u.spatialReference),s.mapOptions={extent:u&&u.toJSON(),spatialReference:l&&l.toJSON(),showAttribution:n.attributionVisible},r.ssExtent=null,o.background&&(s.background=o.background.toJSON()),o.rotation&&(s.mapOptions.rotation=-o.rotation),n.scalePreserved&&(s.mapOptions.scale=n.outScale||o.scale),null!=o.timeExtent&&(c=null!=o.timeExtent.start?o.timeExtent.start.getTime():null,p=null!=o.timeExtent.end?o.timeExtent.end.getTime():null,s.mapOptions.time=[c,p]),e.abrupt("return",(n.reportOptions&&(s.reportOptions=n.reportOptions),s));case 14:case"end":return e.stop()}}),e)}))),St.apply(this,arguments)}function Ct(e){var t=e,n=t.lastIndexOf("/GPServer/");return n>0&&(t=t.slice(0,n+9)),t}function It(e,t,n){return Zt.apply(this,arguments)}function Zt(){return Zt=(0,a.Z)((0,i.Z)().mark((function e(t,n,r){var a,o,l,s,u,c,p,d,f,v,m,y,h,b;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=[],l={layerView:null,printTemplate:n,view:t},s=0,n.scalePreserved&&(s=n.outScale||t.scale),u=Qe(t,s),c=(0,M.Z)(u),e.prev=5,c.s();case 7:if((p=c.n()).done){e.next=137;break}if(d=p.value,(f=d.layer).loaded&&!("layers"in f)){e.next=12;break}return e.abrupt("continue",135);case 12:if(v=void 0,l.layerView=d,!it(d)){e.next=20;break}return e.next=17,Yt(f,l,r);case 17:e.t0=e.sent,e.next=133;break;case 20:if(!$e(f)){e.next=24;break}e.t1=Ot(f),e.next=132;break;case 24:if(!tt(f)){e.next=30;break}return e.next=27,Mt(f,l,r);case 27:e.t2=e.sent,e.next=131;break;case 30:if("catalog-footprint"!==(null===f||void 0===f?void 0:f.type)){e.next=36;break}return e.next=33,Pt(f,l,r);case 33:e.t3=e.sent,e.next=130;break;case 36:if("feature"!==(null===f||void 0===f?void 0:f.type)){e.next=42;break}return e.next=39,Et(f,l,r);case 39:e.t4=e.sent,e.next=129;break;case 42:if("geojson"!==(null===f||void 0===f?void 0:f.type)){e.next=48;break}return e.next=45,Ft(f,l,r);case 45:e.t5=e.sent,e.next=128;break;case 48:if("graphics"!==(null===f||void 0===f?void 0:f.type)){e.next=54;break}return e.next=51,jt(f,l,r);case 51:e.t6=e.sent,e.next=127;break;case 54:if("imagery"!==(null===f||void 0===f?void 0:f.type)){e.next=58;break}e.t7=Vt(f,r),e.next=126;break;case 58:if("imagery-tile"!==(null===f||void 0===f?void 0:f.type)){e.next=64;break}return e.next=61,qt(f,l,r);case 61:e.t8=e.sent,e.next=125;break;case 64:if("kml"!==(null===f||void 0===f?void 0:f.type)){e.next=70;break}return e.next=67,zt(f,l,r);case 67:e.t9=e.sent,e.next=124;break;case 70:if("map-image"!==(null===f||void 0===f?void 0:f.type)){e.next=74;break}e.t10=Ht(f,l,r),e.next=123;break;case 74:if("map-notes"!==(null===f||void 0===f?void 0:f.type)){e.next=80;break}return e.next=77,Wt(l,r);case 77:e.t11=e.sent,e.next=122;break;case 80:if("open-street-map"!==(null===f||void 0===f?void 0:f.type)){e.next=84;break}e.t12={type:"OpenStreetMap"},e.next=121;break;case 84:if("stream"!==(null===f||void 0===f?void 0:f.type)){e.next=90;break}return e.next=87,Qt(f,l,r);case 87:e.t13=e.sent,e.next=120;break;case 90:if("tile"!==(null===f||void 0===f?void 0:f.type)){e.next=94;break}e.t14=nn(f,r),e.next=119;break;case 94:if("vector-tile"!==(null===f||void 0===f?void 0:f.type)){e.next=100;break}return e.next=97,rn(f,l,r);case 97:e.t15=e.sent,e.next=118;break;case 100:if("web-tile"!==(null===f||void 0===f?void 0:f.type)){e.next=104;break}e.t16=on(f),e.next=117;break;case 104:if("wms"!==(null===f||void 0===f?void 0:f.type)){e.next=108;break}e.t17=ln(f,r),e.next=116;break;case 108:if("wmts"!==(null===f||void 0===f?void 0:f.type)){e.next=112;break}e.t18=sn(f),e.next=115;break;case 112:return e.next=114,Yt(f,l,r);case 114:e.t18=e.sent;case 115:e.t17=e.t18;case 116:e.t16=e.t17;case 117:e.t15=e.t16;case 118:e.t14=e.t15;case 119:e.t13=e.t14;case 120:e.t12=e.t13;case 121:e.t11=e.t12;case 122:e.t10=e.t11;case 123:e.t9=e.t10;case 124:e.t8=e.t9;case 125:e.t7=e.t8;case 126:e.t6=e.t7;case 127:e.t5=e.t6;case 128:e.t4=e.t5;case 129:e.t3=e.t4;case 130:e.t2=e.t3;case 131:e.t1=e.t2;case 132:e.t0=e.t1;case 133:(v=e.t0)&&(Array.isArray(v)?o.push.apply(o,(0,Fe.Z)(v)):(v.id=f.id,v.title=r.legendLayerNameMap[f.id]||f.title,v.opacity=d.fullOpacity,v.minScale=f.minScale||0,v.maxScale=f.maxScale||0,et(f)&&f.blendMode&&"normal"!==f.blendMode&&(v.blendMode=f.blendMode),o.push(v)));case 135:e.next=7;break;case 137:e.next=142;break;case 139:e.prev=139,e.t19=e.catch(5),c.e(e.t19);case 142:return e.prev=142,c.f(),e.finish(142);case 145:if(s){m=(0,M.Z)(o);try{for(m.s();!(y=m.n()).done;)(h=y.value).minScale=0,h.maxScale=0}catch(i){m.e(i)}finally{m.f()}}if(null===(a=t.graphics)||void 0===a||!a.length){e.next=151;break}return e.next=149,Dt(null,t.graphics,n,r);case 149:(b=e.sent)&&o.push(b);case 151:return e.abrupt("return",o);case 152:case"end":return e.stop()}}),e,null,[[5,139,142,145]])}))),Zt.apply(this,arguments)}function Ot(e){return{culture:e.culture,key:e.key,type:"BingMaps"+("aerial"===e.style?"Aerial":"hybrid"===e.style?"Hybrid":"Road")}}function Pt(e,t,n){return Lt.apply(this,arguments)}function Lt(){return Lt=(0,a.Z)((0,i.Z)().mark((function e(t,n,r){var a,o,l,s,u;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.layerView,o=n.printTemplate,!(parseFloat(r.cimVersion)<3.1)){e.next=10;break}return e.t0=Dt,e.t1=t,e.next=6,vn(a);case 6:return e.t2=e.sent,e.t3=o,e.t4=r,e.abrupt("return",(0,e.t0)(e.t1,e.t2,e.t3,e.t4));case 10:return l=t.parent,s={id:(u=yn(l,"web-map")).id,url:u.url,layerType:u.layerType,customParameters:u.customParameters,dynamicGroupLayer:{visibility:!1},footprintLayer:u.footprintLayer,layerDefinition:u.layerDefinition},e.abrupt("return",(un(s,l),s));case 12:case"end":return e.stop()}}),e)}))),Lt.apply(this,arguments)}function Mt(e,t,n){return At.apply(this,arguments)}function At(){return At=(0,a.Z)((0,i.Z)().mark((function e(t,n,r){var a,o,l;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.legendEnabled&&r.legendLayers.push({id:t.id}),a=n.layerView,o=n.printTemplate,a.filter||t.portalItem&&"public"!==t.portalItem.access){e.next=5;break}return l=yn(t,"web-map"),e.abrupt("return",(l.type="CSV",delete l.popupInfo,delete l.layerType,l.showLabels=o.showLabels&&t.labelsVisible,l));case 5:return e.t0=Dt,e.t1=t,e.next=9,vn(a);case 9:return e.t2=e.sent,e.t3=o,e.t4=r,e.abrupt("return",(0,e.t0)(e.t1,e.t2,e.t3,e.t4));case 13:case"end":return e.stop()}}),e)}))),At.apply(this,arguments)}function Dt(e,t,n,r){return Nt.apply(this,arguments)}function Nt(){return Nt=(0,a.Z)((0,i.Z)().mark((function e(t,n,r,a){var o,l,s,u,c,p,d,f,v,m,y,h,b,g,w,x,k,_,T,S,C,I,Z,O,P,L,A,D,N,E,U,F,R,j,G,V,q,J,z,B,H,W,K,Y,X;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s={layerDefinition:{name:"polygonLayer",geometryType:"esriGeometryPolygon",drawingInfo:{renderer:null}},featureSet:{geometryType:"esriGeometryPolygon",features:[]}},u={layerDefinition:{name:"polylineLayer",geometryType:"esriGeometryPolyline",drawingInfo:{renderer:null}},featureSet:{geometryType:"esriGeometryPolyline",features:[]}},c={layerDefinition:{name:"pointLayer",geometryType:"esriGeometryPoint",drawingInfo:{renderer:null}},featureSet:{geometryType:"esriGeometryPoint",features:[]}},p={layerDefinition:{name:"multipointLayer",geometryType:"esriGeometryMultipoint",drawingInfo:{renderer:null}},featureSet:{geometryType:"esriGeometryMultipoint",features:[]}},(d={layerDefinition:{name:"pointLayer",geometryType:"esriGeometryPoint",drawingInfo:{renderer:null}},featureSet:{geometryType:"esriGeometryPoint",features:[]}}).layerDefinition.name="textLayer",delete d.layerDefinition.drawingInfo,t&&("esri.layers.FeatureLayer"===t.declaredClass||"esri.layers.StreamLayer"===t.declaredClass?s.layerDefinition.name=u.layerDefinition.name=c.layerDefinition.name=p.layerDefinition.name=a.legendLayerNameMap[t.id]||t.get("arcgisProps.title")||t.title:"esri.layers.GraphicsLayer"===t.declaredClass&&(n=t.graphics.items),t.renderer&&(f=t.renderer.toJSON(),(v=s.layerDefinition.drawingInfo)&&(v.renderer=f),(m=u.layerDefinition.drawingInfo)&&(m.renderer=f),(y=c.layerDefinition.drawingInfo)&&(y.renderer=f),(h=p.layerDefinition.drawingInfo)&&(h.renderer=f)),r.showLabels&&t.labelsVisible&&"function"==typeof t.write&&(w=yn(t,"web-map"),(x=null===(b=w.layerDefinition)||void 0===b||null===(g=b.drawingInfo)||void 0===g?void 0:g.labelingInfo)&&(l=!0,(k=s.layerDefinition.drawingInfo)&&(k.labelingInfo=x),(_=u.layerDefinition.drawingInfo)&&(_.labelingInfo=x),(T=c.layerDefinition.drawingInfo)&&(T.labelingInfo=x),(S=p.layerDefinition.drawingInfo)&&(S.labelingInfo=x)))),(null===t||void 0===t?void 0:t.renderer)||l||(delete s.layerDefinition.drawingInfo,delete u.layerDefinition.drawingInfo,delete c.layerDefinition.drawingInfo,delete p.layerDefinition.drawingInfo),I=null===t||void 0===t?void 0:t.fieldsIndex,Z=null===t||void 0===t?void 0:t.renderer,!I){e.next=17;break}if(O=new Set,e.t0=l,!e.t0){e.next=10;break}return e.next=10,(0,Re.Mu)(O,t);case 10:if(e.t1=Z&&"function"==typeof Z.collectRequiredFields,!e.t1){e.next=14;break}return e.next=14,Z.collectRequiredFields(O,I);case 14:C=Array.from(O),P=I.fields.map((function(e){return e.toJSON()})),s.layerDefinition.fields=P,u.layerDefinition.fields=P,c.layerDefinition.fields=P,p.layerDefinition.fields=P;case 17:L=null===(o=n)||void 0===o?void 0:o.length,D=0;case 19:if(!(D<L)){e.next=44;break}if(!1===(N=n[D]||n.at(D)).visible||!N.geometry){e.next=41;break}if((A=N.toJSON()).hasOwnProperty("popupTemplate")&&delete A.popupTemplate,null!==(E=A.geometry)&&void 0!==E&&E.z&&delete A.geometry.z,e.t2=A.symbol,!e.t2){e.next=35;break}if(A.symbol.angle||delete A.symbol.angle,!bn(A.symbol)){e.next=34;break}return e.next=31,cn(A.symbol,a);case 31:A.symbol=e.sent,e.next=35;break;case 34:A.symbol.text&&delete A.attributes;case 35:if(r&&r.forceFeatureAttributes||null===(U=C)||void 0===U||!U.length){e.next=40;break}R={},j=(0,M.Z)(C);try{for(j.s();!(G=j.n()).done;)q=G.value,(null===(V=A.attributes)||void 0===V?void 0:V.hasOwnProperty(q))&&(R[q]=A.attributes[q])}catch(i){j.e(i)}finally{j.f()}A.attributes=R;case 40:"polygon"===N.geometry.type?s.featureSet.features.push(A):"polyline"===N.geometry.type?u.featureSet.features.push(A):"point"===N.geometry.type?null!==(F=A.symbol)&&void 0!==F&&F.text?d.featureSet.features.push(A):c.featureSet.features.push(A):"multipoint"===N.geometry.type?p.featureSet.features.push(A):"extent"===N.geometry.type&&(A.geometry=h.fromExtent(N.geometry).toJSON(),s.featureSet.features.push(A));case 41:D++,e.next=19;break;case 44:J=[s,u,p,c,d].filter((function(e){return e.featureSet.features.length>0})),z=(0,M.Z)(J),e.prev=46,z.s();case 48:if((B=z.n()).done){e.next=59;break}if(W=B.value,K=W.featureSet.features.every((function(e){return e.symbol})),K&&(!r||!r.forceFeatureAttributes)){Y=(0,M.Z)(W.featureSet.features);try{for(Y.s();!(X=Y.n()).done;)delete X.value.attributes}catch(i){Y.e(i)}finally{Y.f()}}if(K&&delete W.layerDefinition.drawingInfo,e.t3=null===(H=W.layerDefinition.drawingInfo)||void 0===H?void 0:H.renderer,!e.t3){e.next=57;break}return e.next=57,dn(W.layerDefinition.drawingInfo.renderer,a);case 57:e.next=48;break;case 59:e.next=64;break;case 61:e.prev=61,e.t4=e.catch(46),z.e(e.t4);case 64:return e.prev=64,z.f(),e.finish(64);case 67:return e.abrupt("return",J.length?{featureCollection:{layers:J},showLabels:l}:null);case 68:case"end":return e.stop()}}),e,null,[[46,61,64,67]])}))),Nt.apply(this,arguments)}function Et(e,t,n){return Ut.apply(this,arguments)}function Ut(){return Ut=(0,a.Z)((0,i.Z)().mark((function e(t,n,r){var a,o,l,s,u,c,p,d,f,v,m,y,h,b,g,w,x,k,_,T,S,C,I,Z,O;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=t.renderer,p=parseFloat(r.cimVersion),!("binning"===(null===(a=t.featureReduction)||void 0===a?void 0:a.type)||"cluster"===(null===(o=t.featureReduction)||void 0===o?void 0:o.type)&&p<2.9||"pie-chart"===(null===c||void 0===c?void 0:c.type)||"dot-density"===(null===c||void 0===c?void 0:c.type)&&p<2.6)){e.next=3;break}return e.abrupt("return",Yt(t,n,r));case 3:if(t.legendEnabled&&r.legendLayers.push({id:t.id}),d=n.layerView,f=n.printTemplate,v=n.view,m="feature-layer"!==(null===(l=t.source)||void 0===l?void 0:l.type)&&"ogc-feature"!==(null===(s=t.source)||void 0===s?void 0:s.type),!(d.filter||m||!c||"field"in c&&null!=c.field&&!t.getField(c.field))){e.next=14;break}return e.next=8,vn(d);case 8:return y=e.sent,e.next=11,Dt(t,y,f,r);case 11:u=e.sent,e.next=29;break;case 14:if((u={id:(O=yn(t)).id,title:O.title,url:O.url,layerType:O.layerType,customParameters:O.customParameters,layerDefinition:O.layerDefinition,charts:f.includeCharts?O.charts:void 0}).showLabels=f.showLabels&&t.labelsVisible,un(u,t),e.t0=null!==(h=u.layerDefinition)&&void 0!==h&&null!==(b=h.drawingInfo)&&void 0!==b&&b.renderer,!e.t0){e.next=24;break}return delete u.layerDefinition.minScale,delete u.layerDefinition.maxScale,e.next=23,dn(u.layerDefinition.drawingInfo.renderer,r);case 23:e.t0="visualVariables"in c&&c.visualVariables&&c.visualVariables[0];case 24:if(!e.t0){e.next=27;break}"size"===(T=c.visualVariables[0]).type&&T.maxSize&&"number"!=typeof T.maxSize&&T.minSize&&"number"!=typeof T.minSize&&(S=(0,Ge.getSizeRangeAtScale)(T,v.scale),u.layerDefinition.drawingInfo.renderer.visualVariables[0].minSize=S.minSize,u.layerDefinition.drawingInfo.renderer.visualVariables[0].maxSize=S.maxSize);case 27:(C=(0,je.c)(d))&&(null!==(w=(g=u).layerDefinition)&&void 0!==w||(g.layerDefinition={}),u.layerDefinition.definitionExpression=u.layerDefinition.definitionExpression?"(".concat(u.layerDefinition.definitionExpression,") AND (").concat(C,")"):C),t.gdbVersion&&(null!==(k=(x=u).layerDefinition)&&void 0!==k||(x.layerDefinition={}),u.layerDefinition.gdbVersion=t.gdbVersion),null!==(_=d.hasHighlight)&&void 0!==_&&_.call(d)&&"getHighlightIds"in d&&(Z=d,u.selectionObjectIds=Z.getHighlightIds(),u.selectionSymbol=Xe(t.geometryType,null!==(I=Z.highlightOptions)&&void 0!==I?I:v.highlightOptions));case 29:return e.abrupt("return",u);case 30:case"end":return e.stop()}}),e)}))),Ut.apply(this,arguments)}function Ft(e,t,n){return Rt.apply(this,arguments)}function Rt(){return Rt=(0,a.Z)((0,i.Z)().mark((function e(t,n,r){var a,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("binning"!==(null===(a=t.featureReduction)||void 0===a?void 0:a.type)&&"cluster"!==(null===(o=t.featureReduction)||void 0===o?void 0:o.type)){e.next=2;break}return e.abrupt("return",Yt(t,n,r));case 2:return t.legendEnabled&&r.legendLayers.push({id:t.id}),e.t0=Dt,e.t1=t,e.next=7,vn(n.layerView);case 7:return e.t2=e.sent,e.t3=n.printTemplate,e.t4=r,e.abrupt("return",(0,e.t0)(e.t1,e.t2,e.t3,e.t4));case 11:case"end":return e.stop()}}),e)}))),Rt.apply(this,arguments)}function jt(e,t,n){return Gt.apply(this,arguments)}function Gt(){return Gt=(0,a.Z)((0,i.Z)().mark((function e(t,n,r){var a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.printTemplate,e.abrupt("return",Dt(t,null,a,r));case 2:case"end":return e.stop()}}),e)}))),Gt.apply(this,arguments)}function Vt(e,t){var n,r,i;e.legendEnabled&&t.legendLayers.push({id:e.id});var a,o={layerType:(a=yn(e)).layerType,customParameters:a.customParameters};return o.bandIds=e.bandIds,o.compressionQuality=e.compressionQuality,o.format=e.format,o.interpolation=e.interpolation,(e.mosaicRule||e.definitionExpression)&&(o.mosaicRule=e.exportImageServiceParameters.mosaicRule.toJSON()),e.rasterFunction&&(o.renderingRule=e.rasterFunction.toJSON()),e.renderer&&(null!==(n=o.layerDefinition)&&void 0!==n||(o.layerDefinition={}),null!==(i=(r=o.layerDefinition).drawingInfo)&&void 0!==i||(r.drawingInfo={}),o.layerDefinition.drawingInfo.renderer=e.renderer.toJSON()),un(o,e),o}function qt(e,t,n){return Jt.apply(this,arguments)}function Jt(){return Jt=(0,a.Z)((0,i.Z)().mark((function e(t,n,r){var a,o,l;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("flow"!==(null===(a=t.renderer)||void 0===a?void 0:a.type)){e.next=2;break}return e.abrupt("return",Yt(t,n,r));case 2:return t.legendEnabled&&r.legendLayers.push({id:t.id}),o={bandIds:(l=yn(t)).bandIds,customParameters:l.customParameters,interpolation:l.interpolation,layerDefinition:l.layerDefinition},e.abrupt("return",(o.layerType="ArcGISImageServiceLayer",un(o,t),o));case 5:case"end":return e.stop()}}),e)}))),Jt.apply(this,arguments)}function zt(e,t,n){return Bt.apply(this,arguments)}function Bt(){return Bt=(0,a.Z)((0,i.Z)().mark((function e(t,n,r){var a,o,l,s,u,c;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.printTemplate,t.portalItem&&"public"!==t.portalItem.access){e.next=4;break}return o=yn(t,"web-map"),e.abrupt("return",(o.type="kml",delete o.layerType,o.url=(0,b.Fv)(t.url),o));case 4:return l=[],(s=n.layerView).allVisibleMapImages.forEach((function(e,n){var r={id:"".concat(t.id,"_image").concat(n),type:"image",title:t.id,minScale:t.minScale||0,maxScale:t.maxScale||0,opacity:s.fullOpacity,extent:e.extent};"data:image/png;base64,"===e.href.substr(0,22)?r.imageData=e.href.substr(22):r.url=e.href,l.push(r)})),u=[].concat((0,Fe.Z)(s.allVisiblePoints.items),(0,Fe.Z)(s.allVisiblePolylines.items),(0,Fe.Z)(s.allVisiblePolygons.items)),e.t0=L.Z,e.t1={id:t.id},e.next=11,Dt(null,u,a,r);case 11:return e.t2=e.sent,c=(0,e.t0)(e.t1,e.t2),e.abrupt("return",(l.push(c),l));case 14:case"end":return e.stop()}}),e)}))),Bt.apply(this,arguments)}function Ht(e,t,n){var r,i,a,o,l=t.view,s={id:e.id,subLayerIds:[]},u=[],c=l.scale;return e.sublayers&&e.sublayers.forEach((function e(t){var n=0===c,r=0===t.minScale||c<=t.minScale,i=0===t.maxScale||c>=t.maxScale;if(t.visible&&(n||r&&i))if(t.sublayers)t.sublayers.forEach(e);else{var a=t.toExportImageJSON(),o={id:t.id,name:t.title,layerDefinition:{drawingInfo:a.drawingInfo,definitionExpression:a.definitionExpression,source:a.source}};u.unshift(o),s.subLayerIds.push(t.id)}})),u.length&&(u=u.map((function(e){return{id:e.id,name:e.name,layerDefinition:e.layerDefinition}})),(a={layerType:(o=yn(e)).layerType,customParameters:o.customParameters}).layers=u,a.visibleLayers=null!==(r=e.capabilities)&&void 0!==r&&null!==(i=r.exportMap)&&void 0!==i&&i.supportsDynamicLayers?void 0:s.subLayerIds,e.gdbVersion&&(a.gdbVersion=e.gdbVersion),un(a,e),e.legendEnabled&&n.legendLayers.push(s)),a}function Wt(e,t){return Kt.apply(this,arguments)}function Kt(){return Kt=(0,a.Z)((0,i.Z)().mark((function e(t,n){var r,a,o,l,s,u,c,p,d,f,v,m;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.layerView,a=t.printTemplate,o=[],null==(l=r.layer).featureCollections){e.next=24;break}s=(0,M.Z)(l.featureCollections),e.prev=4,s.s();case 6:if((u=s.n()).done){e.next=14;break}return c=u.value,e.next=10,Dt(c,c.source,a,n);case 10:(p=e.sent)&&o.push.apply(o,(0,Fe.Z)(p.featureCollection.layers));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),s.e(e.t0);case 19:return e.prev=19,s.f(),e.finish(19);case 22:e.next=44;break;case 24:if(null==l.sublayers){e.next=44;break}d=(0,M.Z)(l.sublayers),e.prev=26,d.s();case 28:if((f=d.n()).done){e.next=36;break}return v=f.value,e.next=32,Dt(null,v.graphics,a,n);case 32:(m=e.sent)&&o.push.apply(o,(0,Fe.Z)(m.featureCollection.layers));case 34:e.next=28;break;case 36:e.next=41;break;case 38:e.prev=38,e.t1=e.catch(26),d.e(e.t1);case 41:return e.prev=41,d.f(),e.finish(41);case 44:return e.abrupt("return",{featureCollection:{layers:o}});case 45:case"end":return e.stop()}}),e,null,[[4,16,19,22],[26,38,41,44]])}))),Kt.apply(this,arguments)}function Yt(e,t,n){return Xt.apply(this,arguments)}function Xt(){return Xt=(0,a.Z)((0,i.Z)().mark((function e(t,n,r){var a,o,l,s,u,c,p,d,f,v,m,y;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=n.printTemplate,l=n.view,s={type:"image"},u={format:"png",ignoreBackground:!0,ignorePadding:!0,layers:[t]},0!==l.rotation&&(u.rotation=0),c=r.ssExtent||l.state.extent.clone(),p=96,d=!0,f=!0,o.exportOptions&&(null!=(v=o.exportOptions).dpi&&v.dpi>0&&(p=v.dpi),null!=v.width&&v.width>0&&(d=v.width%2==l.width%2),null!=v.height&&v.height>0&&(f=v.height%2==l.height%2)),"map-only"!==o.layout||!o.scalePreserved||o.outScale&&o.outScale!==l.scale||96!==p||d&&f||!l.state.extent.equals(l.extent)||(u.area={x:0,y:0,width:l.width,height:l.height},d||(u.area.width-=1),f||(u.area.height-=1),r.ssExtent)||(m=l.toMap((0,j.vW)(u.area.width,u.area.height)),c.ymin=m.y,c.xmax=m.x,r.ssExtent=c),s.extent=c.clone()._normalize(!0).toJSON(),e.next=10,l.takeScreenshot(u);case 10:return y=e.sent,e.abrupt("return",(s.imageData=null===(a=(0,b.sJ)(y.dataUrl))||void 0===a?void 0:a.data,s));case 12:case"end":return e.stop()}}),e)}))),Xt.apply(this,arguments)}function Qt(e,t,n){return $t.apply(this,arguments)}function $t(){return $t=(0,a.Z)((0,i.Z)().mark((function e(t,n,r){var a,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.layerView,o=n.printTemplate,t.legendEnabled&&r.legendLayers.push({id:t.id}),e.t0=Dt,e.t1=t,e.next=6,vn(a);case 6:return e.t2=e.sent,e.t3=o,e.t4=r,e.abrupt("return",(0,e.t0)(e.t1,e.t2,e.t3,e.t4));case 10:case"end":return e.stop()}}),e)}))),$t.apply(this,arguments)}function en(e){return tn.apply(this,arguments)}function tn(){return tn=(0,a.Z)((0,i.Z)().mark((function e(t){var n,r,a,o,l,s,u,c,p,d,f,v;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],r=[],a=(0,M.Z)(t.map.allTables);try{for(a.s();!(o=a.n()).done;)"feature"!==(l=o.value).type||l.loaded||r.push(l.load())}catch(i){a.e(i)}finally{a.f()}if(e.t0=r.length,!e.t0){e.next=7;break}return e.next=7,Promise.allSettled(r);case 7:s=(0,M.Z)(t.map.allTables);try{for(s.s();!(u=s.n()).done;)"feature"===(p=u.value).type&&p.loaded&&p.isTable&&"feature-layer"===(null===(c=p.source)||void 0===c?void 0:c.type)&&(un(f={id:(v=yn(p)).id,title:v.title,customParameters:v.customParameters,layerDefinition:{definitionExpression:null===(d=v.layerDefinition)||void 0===d?void 0:d.definitionExpression},url:v.url},p),n.push(f))}catch(i){s.e(i)}finally{s.f()}return e.abrupt("return",n.length?n:void 0);case 10:case"end":return e.stop()}}),e)}))),tn.apply(this,arguments)}function nn(e,t){e.legendEnabled&&t.legendLayers.push({id:e.id});var n,r={layerType:(n=yn(e)).layerType,customParameters:n.customParameters};return un(r,e),r}function rn(e,t,n){return an.apply(this,arguments)}function an(){return an=(0,a.Z)((0,i.Z)().mark((function e(t,n,r){var a,o,l;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.serviceUrl||!t.styleUrl){e.next=5;break}if(a=(0,k.LP)(t.styleUrl,t.apiKey),o=(0,k.LP)(t.serviceUrl,t.apiKey),(a||o)&&"2.1.0"===r.cimVersion){e.next=5;break}return l={type:"VectorTileLayer"},e.abrupt("return",(l.styleUrl=(0,b.Fv)(t.styleUrl),l.token=a,o!==a&&(l.additionalTokens=[{url:t.serviceUrl,token:o}]),l));case 5:return e.abrupt("return",Yt(t,n,r));case 6:case"end":return e.stop()}}),e)}))),an.apply(this,arguments)}function on(e){var t,n={type:"WebTiledLayer",urlTemplate:null===(t=e.urlTemplate)||void 0===t?void 0:t.replace(/\${/g,"{"),credits:e.copyright};return e.subDomains&&e.subDomains.length>0&&(n.subDomains=e.subDomains),n}function ln(e,t){var n,r=[];return e.sublayers&&e.sublayers.forEach((function e(t){t.visible&&(t.sublayers?t.sublayers.forEach(e):t.name&&r.unshift(t.name))})),r.length&&(e.legendEnabled&&t.legendLayers.push({id:e.id,subLayerIds:r}),n={type:"wms",customLayerParameters:e.customLayerParameters,customParameters:e.customParameters,transparentBackground:e.imageTransparency,visibleLayers:r,url:(0,b.Fv)(e.url),version:e.version}),n}function sn(e){var t=e.activeLayer;return{type:"wmts",customLayerParameters:e.customLayerParameters,customParameters:e.customParameters,format:t.imageFormat,layer:t.id,style:t.styleId,tileMatrixSet:t.tileMatrixSetId,url:(0,b.Fv)(e.url)}}function un(e,t){t.url&&(e.url=(0,b.Fv)(e.url||t.url),e.token=(0,k.LP)(e.url,t.apiKey))}function cn(e,t){return pn.apply(this,arguments)}function pn(){return pn=(0,a.Z)((0,i.Z)().mark((function e(t,n){var r,a,o,l,s,u,c,p,d,f,v,m,y,h,b;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.canvas||(n.canvas=document.createElement("canvas")),r=1024,n.canvas.width=r,n.canvas.height=r,a=n.canvas.getContext("2d"),!t.path){e.next=20;break}if((u=new Path2D(t.path)).closePath(),a.fillStyle=Array.isArray(t.color)?"rgba(".concat(t.color[0],",").concat(t.color[1],",").concat(t.color[2],",").concat(t.color[3]/255,")"):"rgb(0,0,0)",a.fill(u),c=Ye(a)){e.next=10;break}return e.abrupt("return",null);case 10:a.clearRect(0,0,r,r),p=(0,j.F2)(t.size)/Math.max(c.width,c.height),a.scale(p,p),f=(d=r/p)/2-c.width/2-c.x,v=d/2-c.height/2-c.y,a.translate(f,v),Array.isArray(t.color)&&a.fill(u),null!==(s=t.outline)&&void 0!==s&&s.width&&Array.isArray(t.outline.color)&&(m=t.outline,a.lineWidth=(0,j.F2)(m.width)/p,a.lineJoin="round",a.strokeStyle="rgba(".concat(m.color[0],",").concat(m.color[1],",").concat(m.color[2],",").concat(m.color[3]/255,")"),a.stroke(u),c.width+=a.lineWidth,c.height+=a.lineWidth),c.width*=p,c.height*=p,y=a.getImageData(r/2-c.width/2,r/2-c.height/2,Math.ceil(c.width),Math.ceil(c.height)),o=y.width,l=y.height,a.canvas.width=o,a.canvas.height=l,a.putImageData(y,0,0),e.next=25;break;case 20:return h="image/svg+xml"===t.contentType?"data:image/svg+xml;base64,"+t.imageData:t.url,e.next=23,(0,D.Z)(h,{responseType:"image"});case 23:b=e.sent.data,o=(0,j.F2)(t.width),l=(0,j.F2)(t.height),a.canvas.width=o,a.canvas.height=l,a.drawImage(b,0,0,a.canvas.width,a.canvas.height);case 25:return e.abrupt("return",{type:"esriPMS",imageData:a.canvas.toDataURL("image/png").substr(22),angle:t.angle,contentType:"image/png",height:p(l),width:p(o),xoffset:t.xoffset,yoffset:t.yoffset});case 26:case"end":return e.stop()}}),e)}))),pn.apply(this,arguments)}function dn(e,t){return fn.apply(this,arguments)}function fn(){return fn=(0,a.Z)((0,i.Z)().mark((function e(t,n){var r,a,o,l,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("simple"!==(r=t.type)||!bn(t.symbol)){e.next=7;break}return e.next=4,cn(t.symbol,n);case 4:t.symbol=e.sent,e.next=35;break;case 7:if("uniqueValue"!==r&&"classBreaks"!==r){e.next=35;break}if(e.t0=bn(t.defaultSymbol),!e.t0){e.next=13;break}return e.next=12,cn(t.defaultSymbol,n);case 12:t.defaultSymbol=e.sent;case 13:if(!(a=t["uniqueValue"===r?"uniqueValueInfos":"classBreakInfos"])){e.next=35;break}o=(0,M.Z)(a),e.prev=16,o.s();case 18:if((l=o.n()).done){e.next=27;break}if(s=l.value,e.t1=bn(s.symbol),!e.t1){e.next=25;break}return e.next=24,cn(s.symbol,n);case 24:s.symbol=e.sent;case 25:e.next=18;break;case 27:e.next=32;break;case 29:e.prev=29,e.t2=e.catch(16),o.e(e.t2);case 32:return e.prev=32,o.f(),e.finish(32);case 35:case"end":return e.stop()}}),e,null,[[16,29,32,35]])}))),fn.apply(this,arguments)}function vn(e){return mn.apply(this,arguments)}function mn(){return mn=(0,a.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.queryFeatures(t.createQuery()).then((function(e){return e.features})));case 1:case"end":return e.stop()}}),e)}))),mn.apply(this,arguments)}function yn(e,t){var n;return null!==(n=e.write({},{ignorePersistenceEnabled:!0,origin:t}))&&void 0!==n?n:{}}function hn(e){var t;return null!==(t=e.gpMetadata)&&void 0!==t&&t.executionType?dt.fromJSON(e.gpMetadata.executionType):"sync"}function bn(e){var t;return e&&(e.path||"image/svg+xml"===e.contentType||(null===(t=e.url)||void 0===t?void 0:t.endsWith(".svg")))}var gn=function(e){(0,c.Z)(n,e);var t=(0,p.Z)(n);function n(e){var r;return(0,l.Z)(this,n),(r=t.call(this,e)).extent=null,r.extraParameters=null,r.outSpatialReference=null,r.template=null,r.updateDelay=1e3,r.view=null,r}return(0,s.Z)(n)}(I.default);(0,d._)([(0,g.Cb)()],gn.prototype,"extent",void 0),(0,d._)([(0,g.Cb)()],gn.prototype,"extraParameters",void 0),(0,d._)([(0,g.Cb)()],gn.prototype,"outSpatialReference",void 0),(0,d._)([(0,g.Cb)()],gn.prototype,"template",void 0),(0,d._)([(0,g.Cb)()],gn.prototype,"updateDelay",void 0),(0,d._)([(0,g.Cb)()],gn.prototype,"view",void 0);var wn=gn=(0,d._)([(0,w.j)("esri.rest.support.PrintParameters")],gn),xn=n(86226),kn=n(1614),_n=n(80975),Tn=n(67005),Sn=function(e){(0,c.Z)(n,e);var t=(0,p.Z)(n);function n(e){var r;return(0,l.Z)(this,n),(r=t.call(this,e)).strokeDash=[],r.strokeWidth=2,r.strokeColor=[0,0,0,1],r.strokeBackgroundColor=[0,0,0,0],r.fillColor=[0,0,0,0],r.backgroundFillColor=[0,0,0,.5],r.visible=!0,r.isDecoration=!1,r.boxWidth=0,r.boxHeight=0,r.backgroundWidth=0,r.backgroundHeight=0,r.padding={left:0,top:0,right:0,bottom:0},r}return(0,s.Z)(n,[{key:"_strokeStyle",get:function(){return"rgba(".concat(this.strokeColor.join(),")")}},{key:"_strokeBackgroundStyle",get:function(){return"rgba(".concat(this.strokeBackgroundColor.join(),")")}},{key:"_fillStyle",get:function(){return"rgba(".concat(this.fillColor.join(),")")}},{key:"_backgroundFillStyle",get:function(){return"rgba(".concat(this.backgroundFillColor.join(),")")}},{key:"render",value:function(){var e,t,n=this.backgroundWidth,r=this.backgroundHeight,i=this.boxWidth,a=this.boxHeight,o=this.padding,l=o.left,s=o.top,u=null!==(e=this.x)&&void 0!==e?e:l+n/2-i/2,c=null!==(t=this.y)&&void 0!==t?t:s+r/2-a/2,p=u+i,d=c+a;return(0,Tn.u)("div",{classes:{"esri-box-overlay-item":!0},styles:{left:"0px",top:"0px",width:"100%",height:"100%",visibility:this.visible?"visible":"hidden"}},(0,Tn.u)("svg",{styles:{width:"100%",height:"100%"}},(0,Tn.u)("path",{d:"M ".concat(l," ").concat(s," L ").concat(n+l," ").concat(s," L ").concat(n+l," ").concat(r+s," L ").concat(l," ").concat(r+s," Z M ").concat(u," ").concat(c," L ").concat(u," ").concat(d," L ").concat(p," ").concat(d," L ").concat(p," ").concat(c," Z"),fill:this._backgroundFillStyle,stroke:this._strokeBackgroundStyle,"stroke-width":this.strokeWidth}),(0,Tn.u)("rect",{fill:this._fillStyle,height:a,stroke:this._strokeStyle,"stroke-dasharray":this.strokeDash.join(" ")||void 0,"stroke-width":this.strokeWidth,width:i,x:u,y:c})))}},{key:"renderCanvas",value:function(){}}]),n}(I.default);(0,d._)([(0,g.Cb)()],Sn.prototype,"strokeDash",void 0),(0,d._)([(0,g.Cb)()],Sn.prototype,"strokeWidth",void 0),(0,d._)([(0,g.Cb)()],Sn.prototype,"strokeColor",void 0),(0,d._)([(0,g.Cb)()],Sn.prototype,"strokeBackgroundColor",void 0),(0,d._)([(0,g.Cb)()],Sn.prototype,"fillColor",void 0),(0,d._)([(0,g.Cb)()],Sn.prototype,"backgroundFillColor",void 0),(0,d._)([(0,g.Cb)()],Sn.prototype,"visible",void 0),(0,d._)([(0,g.Cb)()],Sn.prototype,"isDecoration",void 0),(0,d._)([(0,g.Cb)()],Sn.prototype,"boxWidth",void 0),(0,d._)([(0,g.Cb)()],Sn.prototype,"boxHeight",void 0),(0,d._)([(0,g.Cb)()],Sn.prototype,"backgroundWidth",void 0),(0,d._)([(0,g.Cb)()],Sn.prototype,"backgroundHeight",void 0),(0,d._)([(0,g.Cb)()],Sn.prototype,"x",void 0),(0,d._)([(0,g.Cb)()],Sn.prototype,"y",void 0),(0,d._)([(0,g.Cb)()],Sn.prototype,"padding",void 0),(0,d._)([(0,g.Cb)({readOnly:!0})],Sn.prototype,"_strokeStyle",null),(0,d._)([(0,g.Cb)({readOnly:!0})],Sn.prototype,"_strokeBackgroundStyle",null),(0,d._)([(0,g.Cb)({readOnly:!0})],Sn.prototype,"_fillStyle",null),(0,d._)([(0,g.Cb)({readOnly:!0})],Sn.prototype,"_backgroundFillStyle",null);var Cn=Sn=(0,d._)([(0,w.j)("esri.views.overlay.BoxOverlayItem")],Sn),In=function(e){(0,c.Z)(n,e);var t=(0,p.Z)(n);function n(e){var r;return(0,l.Z)(this,n),(r=t.call(this,e)).description=null,r.format=null,r.label=null,r.layout=null,r.layoutItem=null,r.layoutOptions=null,r.layoutTemplateInfo=null,r}return(0,s.Z)(n)}($.wq);(0,d._)([(0,g.Cb)()],In.prototype,"description",void 0),(0,d._)([(0,g.Cb)({json:{read:T}})],In.prototype,"format",void 0),(0,d._)([(0,g.Cb)()],In.prototype,"label",void 0),(0,d._)([(0,g.Cb)({json:{read:qe}})],In.prototype,"layout",void 0),(0,d._)([(0,g.Cb)({type:at.default})],In.prototype,"layoutItem",void 0),(0,d._)([(0,g.Cb)()],In.prototype,"layoutOptions",void 0),(0,d._)([(0,g.Cb)()],In.prototype,"layoutTemplateInfo",void 0);var Zn=In=(0,d._)([(0,w.j)("esri.widgets.Print.CustomTemplate")],In),On=function(e){(0,c.Z)(n,e);var t=(0,p.Z)(n);function n(e){var r;return(0,l.Z)(this,n),(r=t.call(this,e)).attributionEnabled=!0,r.author=null,r.copyright=null,r.customTextElements=null,r.dpi=96,r.fileName=null,r.forceFeatureAttributes=!1,r.format="pdf",r.height=null,r.includeTables=!0,r.layout="letter-ansi-a-landscape",r.layoutItem=null,r.legendEnabled=!0,r.northArrowEnabled=!1,r.scale=null,r.scaleEnabled=!1,r.title=null,r.width=null,r}return(0,s.Z)(n)}(I.default);(0,d._)([(0,g.Cb)()],On.prototype,"attributionEnabled",void 0),(0,d._)([(0,g.Cb)()],On.prototype,"author",void 0),(0,d._)([(0,g.Cb)()],On.prototype,"copyright",void 0),(0,d._)([(0,g.Cb)()],On.prototype,"customTextElements",void 0),(0,d._)([(0,g.Cb)()],On.prototype,"dpi",void 0),(0,d._)([(0,g.Cb)()],On.prototype,"fileName",void 0),(0,d._)([(0,g.Cb)()],On.prototype,"forceFeatureAttributes",void 0),(0,d._)([(0,g.Cb)()],On.prototype,"format",void 0),(0,d._)([(0,g.Cb)()],On.prototype,"height",void 0),(0,d._)([(0,g.Cb)()],On.prototype,"includeTables",void 0),(0,d._)([(0,g.Cb)()],On.prototype,"layout",void 0),(0,d._)([(0,g.Cb)({type:at.default})],On.prototype,"layoutItem",void 0),(0,d._)([(0,g.Cb)()],On.prototype,"legendEnabled",void 0),(0,d._)([(0,g.Cb)()],On.prototype,"northArrowEnabled",void 0),(0,d._)([(0,g.Cb)()],On.prototype,"scale",void 0),(0,d._)([(0,g.Cb)()],On.prototype,"scaleEnabled",void 0),(0,d._)([(0,g.Cb)()],On.prototype,"title",void 0),(0,d._)([(0,g.Cb)()],On.prototype,"width",void 0);var Pn=On=(0,d._)([(0,w.j)("esri.widgets.Print.TemplateOptions")],On),Ln=new Set(["GISProfessionalStdUT","GISProfessionalAdvUT"]),Mn=/(\/GPServer\/).+/i,An=new v.X({inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers"}),Dn=f.Z.ofType(Zn);function Nn(e){var t,n,r;null!==(t=e.layoutOptions)&&void 0!==t||(e.layoutOptions={}),null!==(r=(n=e.layoutOptions).customTextElements)&&void 0!==r||(n.customTextElements=[]);if(!e.layoutOptions.customTextElements.find((function(e){return"date"in e}))){var i=e.layoutOptions.customTextElements,a=(0,V.p6)(Date.now(),(0,V.Ze)("short-date"));"ar"===(0,q.G3)()&&(a="\u200f"+a),i.push({date:a})}}var En=function(e){(0,c.Z)(n,e);var t=(0,p.Z)(n);function n(e){var r;return(0,l.Z)(this,n),(r=t.call(this,e))._serviceTemplateCustomTextElements=null,r._layoutToTemplateInfo=new R.Z,r._isFreeHand=!1,r._freeHandWidth=0,r._freehandHeight=0,r._asyncPrintTaskUrl=null,r._layoutInfoTaskUrl=null,r.allowedFormats="all",r.allowedLayouts="all",r.browseTemplates=new Dn,r.defaultTemplates=new Dn,r.error=null,r.extraParameters=null,r.includeDefaultTemplates=!0,r.portal=J.Z.getDefault(),r.portalTemplateIds=[],r.showPrintAreaEnabled=!1,r.printServiceUrl=null,r.printTimeout=12e4,r.templatesInfo=null,r.updateDelay=1e3,r.view=null,r.templateCustomTextElements=null,r.templateOptions=new Pn,r}return(0,s.Z)(n,[{key:"initialize",value:function(){var e=this;this.addHandles((0,y.watch)((function(){return e.showPrintAreaEnabled}),(function(t){var n,r;t?e._enablePrintPreview():(e.removeHandles("overlay-handler"),null===(n=e.view)||void 0===n||null===(r=n.overlay)||void 0===r||r.removeItem(e._getOverlayItem()))})))}},{key:"destroy",value:function(){var e;this.removeHandles("overlay-handler"),this.view&&(this._overlayItem&&(null!==(e=this.view.overlay)&&void 0!==e&&e.removeItem(this._overlayItem),this._overlayItem.destroy(),this._overlayItem=null),this.view=null)}},{key:"effectivePrintServiceUrl",get:function(){var e;return null!==(e=this.printServiceUrl)&&void 0!==e?e:null}},{key:"effectiveTemplateCustomTextElements",get:function(){var e=this;if(!this._serviceTemplateCustomTextElements)return{};var t=(0,m.d9)(this._serviceTemplateCustomTextElements);return this.templateCustomTextElements&&Object.keys(this.templateCustomTextElements).forEach((function(n){var r=t[n];if(r){var i,a=null===(i=e.templateCustomTextElements)||void 0===i?void 0:i[n];r.forEach((function(e){var t=(0,o.Z)(Object.entries(e)[0],1)[0];null===a||void 0===a||a.forEach((function(n){var r=(0,o.Z)(Object.entries(n)[0],2),i=r[0],a=r[1];t===i&&(e[t]=a)}))}))}})),Object.freeze(t)}},{key:"layoutTemplateInfo",get:function(){var e,t,n=null!==(e=null===(t=this.templateOptions.layoutItem)||void 0===t?void 0:t.id)&&void 0!==e?e:this.templateOptions.layout;return n?this._layoutToTemplateInfo.get(n):null}},{key:"state",get:function(){var e;return"loading"===this.loadStatus?"initializing":"failed"===this.loadStatus||this.error?"error":"loaded"===this.loadStatus&&null!==(e=this.view)&&void 0!==e&&e.ready?"ready":"disabled"}},{key:"layoutTemplateNorthArrowInfo",get:function(){var e,t;return null!==(e=this.layoutTemplateInfo)&&void 0!==e&&null!==(t=e.layoutOptions)&&void 0!==t&&t.mapSurroundInfos?this.layoutTemplateInfo.layoutOptions.mapSurroundInfos.find((function(e){return"CIMMarkerNorthArrow"===e.type})):null}},{key:"load",value:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t){var n=this;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.addResolvingPromise(this._loadResources(t).catch((function(e){return n.error=e}))),this));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"print",value:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t){var n,r,a,o,l,s,u,c;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.view,r=this.extraParameters,a=this.updateDelay,n){e.next=3;break}throw new E.Z("print:view-required","view is not set");case 3:return Nn(t),o=this._getOverlayItem(),l=t.scalePreserved||!this.showPrintAreaEnabled?void 0:(0,xn.bk)(new H.Z,n.viewpoint,"MAP_ONLY"===t.layout?[t.exportOptions.width,t.exportOptions.height]:[o.boxWidth,o.boxHeight]),s=new wn({view:n,template:t,extent:l,extraParameters:r,updateDelay:a}),e.prev=5,c=!(null===(u=t.layoutItem)||void 0===u||!u.id)&&(this.portalTemplateIds.includes(t.layoutItem.id)||this.browseTemplates.some((function(e){var n,r;return(null===(n=e.layoutItem)||void 0===n?void 0:n.id)===(null===(r=t.layoutItem)||void 0===r?void 0:r.id)}))),e.next=9,vt(c&&this._asyncPrintTaskUrl?this._asyncPrintTaskUrl:this.effectivePrintServiceUrl,s,{timeout:this.printTimeout});case 9:return e.abrupt("return",e.sent);case 12:throw e.prev=12,e.t0=e.catch(5),new E.Z("print:export-error","An error occurred while exporting the web map.",{error:e.t0});case 15:case"end":return e.stop()}}),e,this,[[5,12]])})));return function(t){return e.apply(this,arguments)}}()},{key:"toPrintTemplate",value:function(e){var t=e.attributionEnabled,n=e.author,i=e.copyright,a=e.customTextElements,o=e.dpi,l=e.forceFeatureAttributes,s=e.format,u=e.height,c=e.includeTables,p=e.layout,d=e.layoutItem,f=e.legendEnabled,v=e.northArrowEnabled,m=e.scale,y=e.scaleEnabled,h=e.title,b=e.width;if(!p)throw new E.Z("print:layout-required","layout is not set");var g=new lt({attributionVisible:t,forceFeatureAttributes:l,format:s,includeTables:c,layout:p,layoutItem:d,layoutOptions:{authorText:n||"",copyrightText:i||"",customTextElements:a,titleText:h||""},outScale:null!==m&&void 0!==m?m:0,scalePreserved:y});b&&(g.exportOptions.width=b),u&&(g.exportOptions.height=u),o&&(g.exportOptions.dpi=o),!f&&g.layoutOptions&&(g.layoutOptions.legendLayers=[]);var w=this.layoutTemplateNorthArrowInfo;return w&&w.visible!==v&&g.layoutOptions&&(g.layoutOptions.elementOverrides=(0,r.Z)({},w.name,{visible:v})),g}},{key:"fetchLayoutTemplateInfo",value:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t,n){var r,a,o,l,s,u,c,p,d;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(r=t.layoutItem)&&void 0!==r&&r.id){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this._fetchPortalLayoutTemplateInfo(t.layoutItem,n);case 4:o=e.sent,this._layoutToTemplateInfo.set(t.layoutItem.id,o),t.layoutTemplateInfo=o,l=o.layoutOptions,s=l.hasLegend,u=l.mapSurroundInfos,c=l.customTextElements,p=u.some((function(e){var t=e.type,n=e.visible;return"CIMMarkerNorthArrow"===t&&n})),t.layoutOptions={legend:s,northArrow:p},(d=null!==(a=(0,m.d9)(this._serviceTemplateCustomTextElements))&&void 0!==a?a:{})[t.layoutItem.id]=c,this._serviceTemplateCustomTextElements=Object.freeze(d);case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getLayoutTemplateInfo",value:function(e){return this._layoutToTemplateInfo.get(e)}},{key:"addPortalTemplate",value:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=new Zn({label:t.title,layoutItem:t}),this.browseTemplates.add(n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"removePortalTemplate",value:function(e){var t,n,r,i;null!==(t=e.layoutItem)&&void 0!==t&&t.id&&(null===(n=this.templateOptions.layoutItem)||void 0===n?void 0:n.id)===e.layoutItem.id&&(this.templateOptions.layout=this.defaultTemplates.length||this.browseTemplates.length?null:null===(r=this.templatesInfo)||void 0===r||null===(i=r.layout)||void 0===i?void 0:i.defaultValue,this.templateOptions.layoutItem=null),this._layoutToTemplateInfo.delete(e.layoutItem.id),this.browseTemplates.remove(e)}},{key:"_loadResources",value:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t){var n,r,a,l,s,u,c,p,d,f,v,m,y,h,b,g,w;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=[],!this.printServiceUrl){e.next=7;break}return this._set("effectivePrintServiceUrl",this.printServiceUrl),e.next=5,this._updateLayoutInfoTaskUrl(this.effectivePrintServiceUrl);case 5:e.next=23;break;case 7:if(!this.destroyed){e.next=9;break}return e.abrupt("return");case 9:return e.prev=9,e.next=12,this.portal.load(t);case 12:e.next=17;break;case 14:throw e.prev=14,e.t0=e.catch(9),new E.Z("print:could-not-load-portal","Cannot load print resource information from portal",{error:e.t0,url:this.effectivePrintServiceUrl});case 17:if(!this.portal.helperServices){e.next=23;break}return u=this.portal.helperServices,c=u.asyncPrintTask,p=u.layoutInfoTask,(d=u.printTask)&&(this._set("effectivePrintServiceUrl",d.url),a=null!==(l=null===(s=d.templates)||void 0===s?void 0:s.map((function(e){return Zn.fromJSON(e)})))&&void 0!==l?l:[]),this._asyncPrintTaskUrl=null===c||void 0===c?void 0:c.url,e.next=23,this._updateLayoutInfoTaskUrl((null===p||void 0===p?void 0:p.url)||this.effectivePrintServiceUrl);case 23:if(this.defaultTemplates.addMany(a),null!==(f=null===(n=this.effectivePrintServiceUrl)||void 0===n?void 0:n.toLowerCase().split("/"))&&void 0!==f&&f.includes("gpserver")){e.next=27;break}throw new E.Z("print:invalid-print-service-url","Can't fetch print templates information from provided URL",{url:this.effectivePrintServiceUrl});case 27:return e.next=29,Promise.all([this._getPrintServiceLayouts(t),this._getPrintServiceTemplates(t),this._getPortalCustomTemplates(t)]);case 29:if(v=e.sent,m=(0,o.Z)(v,3),y=m[0],h=m[1],b=m[2],this._processPrintServiceLayouts(y),this._processPrintServiceTemplates(h),this._processPortalTemplates(b),null===(r=this.templateOptions.layoutItem)||void 0===r||!r.id){e.next=41;break}return g=this.templateOptions.layoutItem.id,w=this.defaultTemplates.find((function(e){var t;return(null===(t=e.layoutItem)||void 0===t?void 0:t.id)===g})),w||(w=new Zn({label:this.templateOptions.layoutItem.title,layoutItem:this.templateOptions.layoutItem})),e.next=40,this.fetchLayoutTemplateInfo(w,t);case 40:this.templateOptions.layout=g;case 41:this._updateOverLayItem();case 42:case"end":return e.stop()}}),e,this,[[9,14]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateLayoutInfoTaskUrl",value:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t,n){var r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,wt(t,n);case 4:r=e.sent.find((function(e){return e.includes("Get Layout Templates Info")})),r&&(this._layoutInfoTaskUrl=t.replace(Mn,"$1".concat(encodeURI(r))));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getPortalCustomTemplates",value:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t){var n,r,a,o,l,s,u,c,p,d,f,v;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.printServiceUrl&&this.portal){e.next=2;break}return e.abrupt("return",[]);case 2:if(r=this.portal,a=r.layoutGroupQuery,o=r.user,l=x.HR.test(this.portal.url),s=null===o||void 0===o?void 0:o.userLicenseTypeId,u=s&&Ln.has(s),a&&(!l||u)){e.next=5;break}return e.abrupt("return",[]);case 5:return c=new z.Z({query:a,disableExtraQuery:!0}),e.next=8,this.portal.queryGroups(c,t);case 8:if((p=e.sent).total){e.next=11;break}return e.abrupt("return",[]);case 11:return d=p.results[0],f=new z.Z({num:100,query:"type:Layout",sortField:d.sortField,sortOrder:null!==(n=d.sortOrder)&&void 0!==n?n:void 0}),e.next=15,d.queryItems(f,t);case 15:return v=e.sent.results,e.abrupt("return",v.length?v.map((function(e){return new Zn({label:e.title,layoutItem:e})})):[]);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_fetchPortalLayoutTemplateInfo",value:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t,n){var r,a,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.id,a=this._layoutInfoTaskUrl){e.next=3;break}throw new E.Z("print:invalid-layout-info-task-url","Can't fetch layout template info",{url:a});case 3:if(e.t0="public"!==t.access&&A.id,!e.t0){e.next=7;break}return e.next=7,A.id.getCredential(a);case 7:return o={Layout_Item_ID:JSON.stringify({id:r})},e.next=10,this._fetchLayoutTemplateInfos(o,n);case 10:return e.abrupt("return",e.sent[0]);case 11:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_fetchLayoutTemplateInfos",value:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t,n){var r,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this._layoutInfoTaskUrl){e.next=3;break}throw new E.Z("print:invalid-layout-info-task-url","Can't fetch layout template info",{url:r});case 3:return e.next=5,bt(r);case 5:if(e.t0=e.sent,"async"!==e.t0){e.next=15;break}return e.next=9,Ee(r,t,void 0,n||void 0);case 9:return a=e.sent,e.next=12,a.waitForJobCompletion({interval:1e3});case 12:return e.next=14,a.fetchResultData("Output_JSON");case 14:return e.abrupt("return",e.sent.value);case 15:return e.next=17,Le(r,t,null,n);case 17:return e.abrupt("return",e.sent.results[0].value);case 18:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_processPortalTemplates",value:function(e){if(e){this.defaultTemplates.addMany(e);var t,n=(0,M.Z)(e);try{for(n.s();!(t=n.n()).done;){var r,i=t.value;(null===(r=i.layoutItem)||void 0===r?void 0:r.id)&&this.portalTemplateIds.push(i.layoutItem.id)}}catch(a){n.e(a)}finally{n.f()}}}},{key:"_processPrintServiceTemplates",value:function(e){this._set("templatesInfo",e)}},{key:"_getPrintServiceLayouts",value:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.prev=1,e.next=4,this._fetchLayoutTemplateInfos(void 0,t);case 4:n=e.sent,e.next=9;break;case 7:e.prev=7,e.t0=e.catch(1);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_processPrintServiceLayouts",value:function(e){var t,n={},r=(0,M.Z)(e);try{for(r.s();!(t=r.n()).done;){var i=t.value,a=i.layoutTemplate,o=i.layoutOptions,l=qe(a);this._layoutToTemplateInfo.set(l,i),n[l]=o.customTextElements}}catch(s){r.e(s)}finally{r.f()}this._serviceTemplateCustomTextElements=Object.freeze(n)}},{key:"_getPrintServiceTemplates",value:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t){var n,r,a,o,l;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,D.Z)(this.effectivePrintServiceUrl,(0,L.Z)((0,L.Z)({},t),{},{query:{f:"json"},timeout:this.printTimeout}));case 3:r=e.sent,n=r.data,e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(0),(0,F.D_)(e.t0)?e.t0:new E.Z("print:unavailable-service-info","Can't fetch templates info from service",{error:e.t0});case 10:return a=n.parameters,o=a.find((function(e){return"Format"===e.name})),l=a.find((function(e){return"Layout_Template"===e.name})),e.abrupt("return",{format:this._getFormat(o),layout:this._getLayout(l)});case 12:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_getFormat",value:function(e){var t=this,n="all"===this.allowedFormats?e.choiceList:e.choiceList.filter((function(e){return t.allowedFormats.includes(T(e))})),r=(n.length?n:e.choiceList).map(T).filter(N.pC),i=T(e.defaultValue),a=r.includes(i)?i:r[0];return{choiceList:r,defaultValue:a}}},{key:"_getLayout",value:function(e){var t,n,r=this,i=e.choiceList.filter((function(e){return"map_only"!==e.toLowerCase()})),a="all"===this.allowedLayouts?i:i.filter((function(e){return r.allowedLayouts.includes(qe(e))})),o=(a.length?a:i).map(qe).filter(N.pC),l=qe(e.defaultValue),s=o.includes(l)?l:null!==(t=null!==(n=o.find((function(e){return/(?=.*letter)(?=.*landscape)/i.test(e)})))&&void 0!==n?n:o.find((function(e){return/(?=.*a4)(?=.*landscape)/i.test(e)})))&&void 0!==t?t:o[0];return{choiceList:o,defaultValue:s}}},{key:"_getOverlayItem",value:function(){return this._overlayItem||(this._overlayItem=new Cn({strokeDash:[5],strokeWidth:2,strokeColor:[30,144,255,255]})),this._overlayItem}},{key:"_enablePrintPreview",value:function(){var e,t,n,r=this;if(null!==(e=this.view)&&void 0!==e&&e.overlay){var i=this.templateOptions,a=this._getOverlayItem();this.addHandles([(0,y.watch)((function(){var e,t,n,a;return[i.width,i.height,i.scaleEnabled,i.scale,i.layout,i.layoutItem,null===(e=r.view)||void 0===e?void 0:e.scale,null===(t=r.view)||void 0===t?void 0:t.size,null===(n=r.view)||void 0===n?void 0:n.state.paddedViewState.size,null===(a=r.view)||void 0===a?void 0:a.state.padding]}),(function(){return r._updateOverLayItem()}),y.initial),null===(t=this.view)||void 0===t?void 0:t.on("drag",["Shift"],(function(e){return r._handleDrag(e)}),kn.f.WIDGET),null===(n=this.view)||void 0===n?void 0:n.on("key-down",["Escape"],(function(){return r._resetDrag()}),kn.f.WIDGET)],"overlay-handler"),this.view.overlay.addItem(a)}}},{key:"_updateOverLayItem",value:function(){var e,t;if(this.view){var n=this.templateOptions,r=this._getOverlayItem(),i=null!==(e=null===(t=n.layoutItem)||void 0===t?void 0:t.id)&&void 0!==e?e:n.layout,a=this.view,l=a.spatialReference,s=(0,o.Z)(a.state.paddedViewState.size,2),u=s[0],c=s[1],p=a.state.padding,d=0,f=0;if("MAP_ONLY"===i)null!=n.width&&null!=n.height&&(d=n.width,f=n.height);else if(i){var v,m=null!==(v=this._layoutToTemplateInfo.get(i))&&void 0!==v?v:{},y=m.webMapFrameSize,h=m.pageUnits,b=!1;if(y&&h)if(this._isFreeHand){var g=y[0]/y[1];(d=this._freeHandWidth)>(f=this._freehandHeight)?f=d/g:d=f*g}else{var w=An.fromJSON(h.toLowerCase()),x=l.unit;(0,G.UF)(w)===(0,G.UF)(x)?(d=(0,G.En)(y[0],w,x),f=(0,G.En)(y[1],w,x)):(b=!0,d=y[0],f=y[1])}if(!this._isFreeHand)if(n.scaleEnabled&&n.scale){var k=b?Math.min(u/d,c/f):(0,G.c9)(l)*G.hd*n.dpi;d*=k,f*=k}else if(0===d||0===f)d=u,f=c;else{var _=(u-.1*u)/d,T=(c-.1*c)/f,S=Math.min(_,T);d*=S,f*=S}}var C=n.scaleEnabled,I=n.scale,Z=C&&I?I/this.view.scale:1;r.boxWidth=d*Z||u,r.boxHeight=f*Z||c,p&&(r.padding=p),r.backgroundWidth=null!==u&&void 0!==u?u:0,r.backgroundHeight=null!==c&&void 0!==c?c:0}}},{key:"_resetDrag",value:function(){this._isFreeHand=!1,this._updateOverLayItem()}},{key:"_handleDrag",value:function(e){switch(e.action){case"start":this._start();break;case"update":this._update(e);break;case"end":this._end()}e.stopPropagation()}},{key:"_start",value:function(){this._isFreeHand=!0}},{key:"_update",value:function(e){var t=this._getOverlayItem(),n=e.x,r=e.y,i=e.origin,a=i.x,o=i.y;n>a?(t.x=a,t.boxWidth=n-a):(t.x=n,t.boxWidth=a-n),r>o?(t.y=o,t.boxHeight=r-o):(t.y=r,t.boxHeight=o-r)}},{key:"_end",value:function(){var e=this._getOverlayItem();if(this.view&&null!=e.x&&null!=e.y){var t=this.view,n=t.toMap((0,j.vW)(e.x+.5*e.boxWidth,e.y+.5*e.boxHeight));e.x=null,e.y=null,t.goTo({center:n}),this._freeHandWidth=e.boxWidth,this._freehandHeight=e.boxHeight,"MAP_ONLY"===this.templateOptions.layout&&(this.templateOptions.width=this._freeHandWidth,this.templateOptions.height=this._freehandHeight),this.templateOptions.scale=this.view.scale,this._updateOverLayItem()}}}]),n}(U.Z);(0,d._)([(0,g.Cb)()],En.prototype,"_serviceTemplateCustomTextElements",void 0),(0,d._)([(0,g.Cb)()],En.prototype,"_layoutToTemplateInfo",void 0),(0,d._)([(0,g.Cb)()],En.prototype,"allowedFormats",void 0),(0,d._)([(0,g.Cb)()],En.prototype,"allowedLayouts",void 0),(0,d._)([(0,g.Cb)({type:Dn})],En.prototype,"browseTemplates",void 0),(0,d._)([(0,g.Cb)({type:Dn})],En.prototype,"defaultTemplates",void 0),(0,d._)([(0,g.Cb)()],En.prototype,"error",void 0),(0,d._)([(0,g.Cb)()],En.prototype,"extraParameters",void 0),(0,d._)([(0,g.Cb)()],En.prototype,"includeDefaultTemplates",void 0),(0,d._)([(0,g.Cb)({readOnly:!0})],En.prototype,"effectivePrintServiceUrl",null),(0,d._)([(0,g.Cb)()],En.prototype,"effectiveTemplateCustomTextElements",null),(0,d._)([(0,g.Cb)()],En.prototype,"layoutTemplateInfo",null),(0,d._)([(0,g.Cb)({type:J.Z})],En.prototype,"portal",void 0),(0,d._)([(0,g.Cb)()],En.prototype,"portalTemplateIds",void 0),(0,d._)([(0,g.Cb)()],En.prototype,"showPrintAreaEnabled",void 0),(0,d._)([(0,g.Cb)()],En.prototype,"printServiceUrl",void 0),(0,d._)([(0,g.Cb)()],En.prototype,"printTimeout",void 0),(0,d._)([(0,g.Cb)({readOnly:!0})],En.prototype,"state",null),(0,d._)([(0,g.Cb)({readOnly:!0})],En.prototype,"templatesInfo",void 0),(0,d._)([(0,g.Cb)()],En.prototype,"updateDelay",void 0),(0,d._)([(0,g.Cb)()],En.prototype,"view",void 0),(0,d._)([(0,g.Cb)()],En.prototype,"templateCustomTextElements",void 0),(0,d._)([(0,g.Cb)({type:Pn})],En.prototype,"templateOptions",void 0),(0,d._)([(0,g.Cb)()],En.prototype,"layoutTemplateNorthArrowInfo",null);var Un,Fn=En=(0,d._)([(0,w.j)("esri.widgets.Print.PrintViewModel")],En),Rn=n(8905),jn=n(7021),Gn=n(96919),Vn=n(33095),qn=n(80532),Jn=n(6291),zn=f.Z.ofType(P),Bn="MAP_ONLY";!function(e){e.layout="layoutTab",e.mapOnly="mapOnlyTab",e.export="exportTab"}(Un||(Un={}));var Hn="esri-print",Wn="".concat(Hn,"__advanced-options-button"),Kn={base:Hn,headerTitle:"".concat(Hn,"__header-title"),layoutTabList:"".concat(Hn,"__layout-tab-list"),layoutTab:"".concat(Hn,"__layout-tab"),layoutSection:"".concat(Hn,"__layout-section"),mapOnlySection:"".concat(Hn,"__map-only-section"),panelItemsCentered:"".concat(Hn,"__panel-items--centered"),loader:"".concat(Hn,"__loader"),advancedOptionsButton:Wn,advancedOptionsButtonContainer:"".concat(Wn,"-container"),advancedOptionsButtonTitle:"".concat(Wn,"-title"),advancedOptionsButtonIconOpened:"".concat(Wn,"-icon--opened"),advancedOptionsButtonIconClosed:"".concat(Wn,"-icon--closed"),advancedOptionsButtonIconClosed_RTL:"".concat(Wn,"-icon--closed-rtl"),swapButton:"".concat(Hn,"__swap-button"),printButton:"".concat(Hn,"__export-button"),templateSelectContainer:"".concat(Hn,"__template-select-container"),templateSelectBlock:"".concat(Hn,"__template-select-block"),templateSelectIcon:"".concat(Hn,"__template-select-icon"),formSectionContainer:"".concat(Hn,"__form-section-container"),formCheckboxLabel:"".concat(Hn,"__form-checkbox-label"),advancedOptionsSection:"".concat(Hn,"__advanced-options-section"),advancedOptionsContainer:"".concat(Hn,"__advanced-options-container"),browseTemplateButtonContainer:"".concat(Hn,"__browse-template-button-container"),exportedFilesContainer:"".concat(Hn,"__export-panel-container"),exportedFilesTitle:"".concat(Hn,"__export-title"),exportedFile:"".concat(Hn,"__exported-file"),exportedFileLink:"".concat(Hn,"__exported-file-link"),exportedFileLinkTitle:"".concat(Hn,"__exported-file-link-title"),exportedFilesEmpty:"".concat(Hn,"__exported-files-empty"),printWidgetContainer:"".concat(Hn,"__container"),content:"".concat(Hn,"__content"),panelContainer:"".concat(Hn,"__panel-container"),scaleInfoContainer:"".concat(Hn,"__scale-info-container"),scaleInputContainer:"".concat(Hn,"__scale-input-container"),scaleInput:"".concat(Hn,"__scale-input"),sizeContainer:"".concat(Hn,"__size-container"),panelError:"".concat(Hn,"__panel--error"),exportedFileError:"".concat(Hn,"__exported-file--error"),exportedFileLoader:"".concat(Hn,"__exported-file--loader"),exportSection:"".concat(Hn,"__export-section"),exportSectionCentered:"".concat(Hn,"__export-section--centered"),templateButtonContainer:"".concat(Hn,"__template-button-container"),templateDoneButton:"".concat(Hn,"__template-done-button"),templateSelectFlowItemContainer:"".concat(Hn,"__template-select-flow-item-container"),templateSelectFlowItemContent:"".concat(Hn,"__template-select-flow-item-content"),templateSelectFlowItemListHeading:"".concat(Hn,"__template-select-flow-item-list-heading")};function Yn(e){return(null===e||void 0===e?void 0:e.toUpperCase())===Bn}function Xn(e){var t,n=e.state,r=e.extension;switch(n){case"pending":return"spinner";case"error":return"exclamation-mark-circle";default:return null!==r&&void 0!==r&&null!==(t=r.toLowerCase())&&void 0!==t&&t.includes("pdf")?"file-pdf":"file"}}function Qn(e,t){return!!t&&e.some((function(e){var n;return(null===(n=e.layoutItem)||void 0===n?void 0:n.id)===t||e.layout===t}))}var $n=new v.X({inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers"}),er=function(e){(0,c.Z)(d,e);var t=(0,p.Z)(d);function d(e,n){var r;return(0,l.Z)(this,d),(r=t.call(this,e,n))._activeTabFocusRequested=!1,r._awaitingServerResponse=!1,r._exportedFileNameMap={},r._selectedTab=Un.layout,r._pendingExportScroll=!1,r._rootNode=null,r._selectedLayout=null,r._abortController=null,r._showTemplates=!1,r.browseTemplateButtonOnClick=null,r.exportedLinks=new zn,r.headingLevel=3,r.messagesCommon=null,r.messagesUnits=null,r.viewModel=new Fn,r._onInput=function(e){r._selectedTab===Un.layout?r.templateOptions.title=e.target.value:r._selectedTab===Un.mapOnly&&(r.templateOptions.fileName=e.target.value)},r._removeLink=function(e){var t=e.currentTarget["data-item"];t&&r.exportedLinks.remove(t)},r._handleLinkClick=function(e){var t,n=e.currentTarget["data-item"];if(n&&"ready"===n.state&&n.url){var i=(0,k.LP)(r.viewModel.effectivePrintServiceUrl),a=n.url,o=document.createElement("a");if(o.target="_blank",o.href=a,o.rel="noreferrer",o.download=null!==(t=n.formattedName)&&void 0!==t?t:"",!i)return o.click(),void e.stopPropagation();e.preventDefault();var l=new URL(a);l.searchParams.set("token",i),o.href=l.href,o.click(),o.href=a}},r._focusOnTabChange=r._focusOnTabChange.bind((0,u.Z)(r)),r}return(0,s.Z)(d,[{key:"initialize",value:function(){var e=this;this.addHandles([(0,y.watch)((function(){var t;return[e.templateOptions.format,null===(t=e.viewModel.templatesInfo)||void 0===t?void 0:t.format.defaultValue]}),(function(t){var n=(0,o.Z)(t,2),r=n[0],i=n[1];if(!i||r){if(r&&i&&e.viewModel.templatesInfo&&!e.viewModel.templatesInfo.format.choiceList.includes(r)){var a=e.viewModel.templatesInfo.format.choiceList.find((function(e){return e.toUpperCase().includes("(".concat(r.toUpperCase(),")"))}));e.templateOptions.format=null!==a&&void 0!==a?a:i}}else e.templateOptions.format=i})),(0,y.watch)((function(){var t;return[e.templateOptions.layout,null===(t=e.viewModel.templatesInfo)||void 0===t?void 0:t.layout.defaultValue]}),function(){var t=(0,a.Z)((0,i.Z)().mark((function t(n){var r,a,l,s,u,c,p,d,f,v,y,h,b;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=(0,o.Z)(n,2),a=r[0],l=r[1],e._selectedTab=Yn(a)?Un.mapOnly:Un.layout,e._selectedTab===Un.layout){t.next=3;break}return t.abrupt("return");case 3:if(s=e.includeDefaultTemplates,u=e.viewModel,c=e._selectedLayout,p=u.portalTemplateIds,d=u.browseTemplates,f=u.templatesInfo,v=u.defaultTemplates.filter((function(e){var t=e.layoutItem;return p.includes(null===t||void 0===t?void 0:t.id)})),y=u.defaultTemplates.filter((function(e){var t=e.layoutItem;return!p.includes(null===t||void 0===t?void 0:t.id)})),h=s&&y.length,!a){t.next=8;break}(h?Qn(y,a):null===f||void 0===f?void 0:f.layout.choiceList.includes(a))||Qn(v,a)||Qn(d,a)||(e.templateOptions.layout=null,e.templateOptions.layoutItem=null),t.next=18;break;case 8:if(!c||!((h?Qn(y,c):null===f||void 0===f?void 0:f.layout.choiceList.includes(c))||Qn(v,c)||Qn(d,c))){t.next=13;break}return t.next=11,e._applyTemplate(c);case 11:t.next=14;break;case 13:e.templateOptions.layout=null,e.templateOptions.layoutItem=null;case 14:if(t.t0=e.templateOptions.layout||h||!l,t.t0){t.next=18;break}return t.next=18,e._applyTemplate(l);case 18:e._selectedLayout=e.templateOptions.layout,b=!!e.templateOptions.layout&&e.viewModel.effectiveTemplateCustomTextElements[e.templateOptions.layout],e.templateOptions.customTextElements=b?(0,m.d9)(b):null;case 21:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),(0,y.watch)((function(){return e.templateOptions.dpi}),(function(t){t<=0&&(e.templateOptions.dpi=1)})),(0,y.watch)((function(){var t;return null===(t=e.viewModel.view)||void 0===t?void 0:t.scale}),(function(t){!t||e.templateOptions.scaleEnabled&&e.templateOptions.scale||(e.templateOptions.scale=t)}))]);var t=this.templateOptions,n=t.height,r=t.width;this.templateOptions.width=r||800,this.templateOptions.height=n||1100;var l=setTimeout((function(){e._awaitingServerResponse=!0,e.scheduleRender()}),500);this.viewModel.load().then((function(){clearTimeout(l),e._awaitingServerResponse=!1}))}},{key:"loadDependencies",value:function(){return(0,Rn.h)({action:function(){return Promise.all([n.e(92358),n.e(46895),n.e(65138),n.e(91741)]).then(n.bind(n,6814))},block:function(){return Promise.all([n.e(92358),n.e(46895),n.e(89219),n.e(63839),n.e(65138),n.e(2654),n.e(23635),n.e(4758)]).then(n.bind(n,4758))},button:function(){return Promise.all([n.e(92358),n.e(46895),n.e(54438),n.e(14105),n.e(32275)]).then(n.bind(n,32275))},checkbox:function(){return Promise.all([n.e(92358),n.e(54438),n.e(12424)]).then(n.bind(n,12424))},combobox:function(){return Promise.all([n.e(92358),n.e(46895),n.e(54438),n.e(89219),n.e(1579),n.e(34504),n.e(63017),n.e(70419)]).then(n.bind(n,70419))},"combobox-item":function(){return Promise.all([n.e(92358),n.e(15862)]).then(n.bind(n,15862))},flow:function(){return n.e(53049).then(n.bind(n,53049))},"flow-item":function(){return Promise.all([n.e(92358),n.e(46895),n.e(89219),n.e(63839),n.e(65138),n.e(2654),n.e(23635),n.e(89524),n.e(48926)]).then(n.bind(n,48926))},icon:function(){return Promise.all([n.e(92358),n.e(87474)]).then(n.bind(n,87474))},input:function(){return Promise.all([n.e(92358),n.e(46895),n.e(54438),n.e(8715),n.e(16746)]).then(n.bind(n,75655))},label:function(){return Promise.all([n.e(92358),n.e(35738)]).then(n.bind(n,35738))},list:function(){return Promise.all([n.e(92358),n.e(46895),n.e(54438),n.e(34504),n.e(8715),n.e(38782)]).then(n.bind(n,38782))},"list-item":function(){return Promise.all([n.e(92358),n.e(46895),n.e(65138),n.e(21340)]).then(n.bind(n,67994))},loader:function(){return Promise.all([n.e(92358),n.e(46895),n.e(92382)]).then(n.bind(n,92382))},switch:function(){return Promise.all([n.e(92358),n.e(54438),n.e(40206)]).then(n.bind(n,40206))},chip:function(){return Promise.all([n.e(92358),n.e(46895),n.e(1579),n.e(12386)]).then(n.bind(n,53607))}})}},{key:"destroy",value:function(){this.viewModel.destroy()}},{key:"allowedFormats",get:function(){return this.viewModel.allowedFormats},set:function(e){this.viewModel.allowedFormats=e}},{key:"allowedLayouts",get:function(){return this.viewModel.allowedLayouts},set:function(e){this.viewModel.allowedLayouts=e}},{key:"error",get:function(){return this.viewModel.error}},{key:"extraParameters",get:function(){return this.viewModel.extraParameters},set:function(e){this.viewModel.extraParameters=e}},{key:"icon",get:function(){return"print"},set:function(e){this._overrideIfSome("icon",e)}},{key:"includeDefaultTemplates",get:function(){return this.viewModel.includeDefaultTemplates},set:function(e){this.viewModel.includeDefaultTemplates=e}},{key:"label",get:function(){var e,t;return null!==(e=null===(t=this.messages)||void 0===t?void 0:t.widgetLabel)&&void 0!==e?e:""},set:function(e){this._overrideIfSome("label",e)}},{key:"portal",get:function(){return this.viewModel.portal},set:function(e){this.viewModel.portal=e}},{key:"showPrintAreaEnabled",get:function(){return this.viewModel.showPrintAreaEnabled},set:function(e){this.viewModel.showPrintAreaEnabled=e}},{key:"printServiceUrl",get:function(){return this.viewModel.printServiceUrl},set:function(e){this.viewModel.printServiceUrl=e}},{key:"templateCustomTextElements",get:function(){return this.viewModel.templateCustomTextElements},set:function(e){this.viewModel.templateCustomTextElements=e}},{key:"templateOptions",get:function(){return this.viewModel.templateOptions},set:function(e){this.viewModel.templateOptions=e}},{key:"view",get:function(){return this.viewModel.view},set:function(e){this.viewModel.view=e}},{key:"render",value:function(){var e,t,n,i,a,o,l,s,u,c,p,d,f,v,m=this,y=this.messages,h=this.templateOptions,b=this.viewModel,g=this.view,w=h.attributionEnabled,x=h.author,k=h.copyright,_=h.dpi,T=h.format,C=h.height,I=h.layout,Z=h.legendEnabled,O=h.northArrowEnabled,P=h.scaleEnabled,L=h.scale,M=h.width,A="ready"!==b.state||this._awaitingServerResponse||!I,D=this._renderTitleOrFileNameSection(),N=(0,Tn.u)("div",{class:Kn.formSectionContainer},(0,Tn.u)("calcite-label",null,y.fileFormatTitle,(0,Tn.u)("calcite-combobox",{clearDisabled:!0,label:y.formatDefaultOption,maxItems:6,placeholder:y.formatDefaultOption,selectionMode:"single-persist",onCalciteComboboxChange:function(e){var t=e.target;m.templateOptions.format=t.selectedItems[0].value}},null===(e=b.templatesInfo)||void 0===e||null===(t=e.format)||void 0===t?void 0:t.choiceList.sort().map((function(e,t){return(0,Tn.u)("calcite-combobox-item",{key:"file-format-".concat(t),selected:e===m.templateOptions.format,textLabel:S(e),value:e})}))))),E=(0,Tn.u)("calcite-label",{layout:"inline"},(0,Tn.u)("calcite-switch",{checked:this.showPrintAreaEnabled,onCalciteSwitchChange:function(e){m.showPrintAreaEnabled=!!e.target.checked}}),y.printPreview),U=(0,Tn.u)("div",null,(0,Tn.u)("div",{class:Kn.formSectionContainer},(0,Tn.u)("calcite-label",null,y.template,(0,Tn.u)("div",{class:Kn.templateSelectContainer,onclick:function(){m._showTemplates=!0}},(0,Tn.u)("calcite-block",{class:Kn.templateSelectBlock,description:this._getPageSizeLabel(I),heading:this._getTemplateLabel()}),(0,Tn.u)("calcite-icon",{class:Kn.templateSelectIcon,icon:(0,_n.dZ)()?"chevron-left":"chevron-right",scale:"s"})))),E),F=(0,Tn.u)("div",{class:Kn.formSectionContainer},(0,Tn.u)("calcite-label",null,y.dpi,(0,Tn.u)("calcite-input",{bind:this,"data-input-name":"dpi",min:1,tabIndex:0,type:"number",value:"".concat(_),onCalciteInputInput:this._handleDPIChange}))),R=(0,Tn.u)("div",{class:this.classes(Kn.scaleInfoContainer,Kn.formSectionContainer)},(0,Tn.u)("calcite-label",{layout:"inline"},(0,Tn.u)("calcite-checkbox",{bind:this,checked:P,"data-option-name":"scaleEnabled",tabIndex:0,onCalciteCheckboxChange:this._toggleInputValue}),y.scale),(0,Tn.u)("div",{class:Kn.scaleInputContainer},(0,Tn.u)("calcite-input",{"aria-label":y.scaleLabel,"aria-valuenow":"".concat(L),bind:this,class:Kn.scaleInput,"data-input-name":"scale",disabled:!P,tabIndex:0,type:"number",value:"".concat(L),onCalciteInputInput:this._updateInputValue}),(0,Tn.u)("calcite-button",{appearance:"outline","aria-label":y.reset,bind:this,disabled:!P,iconStart:"refresh",kind:"neutral",onclick:this._resetToCurrentScale,tabIndex:0}))),j=(0,Tn.u)("div",{"aria-labelledby":"".concat(this.id,"__advancedOptionsForLayout"),class:Kn.advancedOptionsContainer,key:"advanced-section-for-layout"},R,null===(n=null===(i=this.viewModel.layoutTemplateInfo)||void 0===i||null===(a=i.layoutOptions)||void 0===a?void 0:a.hasAuthorText)||void 0===n||n?(0,Tn.u)("div",{class:Kn.formSectionContainer,key:"author-info"},(0,Tn.u)("calcite-label",null,y.author,(0,Tn.u)("calcite-input",{bind:this,"data-input-name":"author",tabIndex:0,value:null!==x&&void 0!==x?x:"",onCalciteInputInput:this._updateInputValue}))):null,null===(o=null===(l=this.viewModel.layoutTemplateInfo)||void 0===l||null===(s=l.layoutOptions)||void 0===s?void 0:s.hasCopyrightText)||void 0===o||o?(0,Tn.u)("div",{class:Kn.formSectionContainer,key:"copyright-text"},(0,Tn.u)("calcite-label",null,y.copyright,(0,Tn.u)("calcite-input",{bind:this,"data-input-name":"copyright",tabIndex:0,value:null!==k&&void 0!==k?k:"",onCalciteInputInput:this._updateInputValue}))):null,F,this._renderCustomTextElementSection(),null===(u=null===(c=this.viewModel.layoutTemplateInfo)||void 0===c||null===(p=c.layoutOptions)||void 0===p?void 0:p.hasLegend)||void 0===u||u?(0,Tn.u)("div",{class:Kn.formSectionContainer,key:"legend-info"},(0,Tn.u)("calcite-label",{layout:"inline"},(0,Tn.u)("calcite-checkbox",{bind:this,checked:Z,"data-option-name":"legendEnabled",tabIndex:0,onCalciteCheckboxChange:this._toggleInputValue}),y.legend)):null,this.viewModel.layoutTemplateNorthArrowInfo?(0,Tn.u)("div",{class:Kn.formSectionContainer,key:"north-arrow"},(0,Tn.u)("calcite-label",{layout:"inline"},(0,Tn.u)("calcite-checkbox",{bind:this,checked:O,"data-option-name":"northArrowEnabled",tabIndex:0,onCalciteCheckboxChange:this._toggleInputValue}),y.northArrow)):null),G=(0,Tn.u)("div",{"aria-labelledby":"".concat(this.id,"__advancedOptionsForMapOnly"),class:Kn.advancedOptionsContainer},R,F,(0,Tn.u)("div",{class:Kn.formSectionContainer},(0,Tn.u)("calcite-label",{layout:"inline"},(0,Tn.u)("calcite-checkbox",{bind:this,checked:w,"data-option-name":"attributionEnabled",tabIndex:0,onCalciteCheckboxChange:this._toggleInputValue}),y.attribution)),this._renderCustomTextElementSection()),V=this.exportedLinks.toArray(),q=this._renderExportedLink(V),J=(0,r.Z)({},Kn.exportSectionCentered,!V.length),z=this._selectedTab===Un.layout?(0,Tn.u)("section",{"aria-labelledby":"".concat(this.id,"__layoutTab"),class:Kn.layoutSection,id:"".concat(this.id,"__layoutContent"),key:"esri-print__layoutContent",role:"tabpanel"},(0,Tn.u)("div",{class:Kn.panelContainer},null===(d=null===(f=this.viewModel.layoutTemplateInfo)||void 0===f||null===(v=f.layoutOptions)||void 0===v?void 0:v.hasTitleText)||void 0===d||d?D:null,U,this._selectedTab===Un.layout?N:null,(0,Tn.u)("calcite-block",{"aria-label":y.advancedOptions,class:this.classes(Kn.panelContainer,Kn.advancedOptionsSection),collapsible:!0,disabled:!I,heading:y.advancedOptions,id:"advancedOptionsForLayout",key:"advanced-options-for-layout"},j))):this._selectedTab===Un.mapOnly?(0,Tn.u)("section",{"aria-labelledby":"".concat(this.id,"__mapOnlyTab"),class:Kn.mapOnlySection,id:"".concat(this.id,"__mapOnlyContent"),key:"esri-print__mapOnlyContent",role:"tabpanel"},(0,Tn.u)("div",{class:Kn.panelContainer},D,N,(0,Tn.u)("div",null,(0,Tn.u)("div",{class:this.classes(Kn.sizeContainer,Kn.formSectionContainer)},(0,Tn.u)("calcite-label",null,y.width,(0,Tn.u)("calcite-input",{bind:this,"data-input-name":"width",tabIndex:0,type:"number",value:"".concat(M),onCalciteInputInput:this._updateInputValue})),(0,Tn.u)("calcite-label",null,y.height,(0,Tn.u)("calcite-input",{bind:this,"data-input-name":"height",tabIndex:0,type:"number",value:"".concat(C),onCalciteInputInput:this._updateInputValue})),(0,Tn.u)("button",{"aria-label":y.swap,bind:this,class:this.classes(jn.z.widgetButton,Kn.swapButton,Vn.W.swap),onclick:this._switchInput,tabIndex:0,type:"button"})),E),(0,Tn.u)("calcite-block",{"aria-label":y.advancedOptions,class:this.classes(Kn.panelContainer,Kn.advancedOptionsSection),collapsible:!0,heading:y.advancedOptions,id:"advancedOptionsForMapOnly",key:"advanced-options-for-map-only"},G))):(0,Tn.u)("section",{"aria-labelledby":"".concat(this.id,"__exportTab"),class:this.classes(Kn.exportSection,J),id:"".concat(this.id,"__exportContent"),key:"esri-print__exportContent",role:"tabpanel"},(0,Tn.u)("div",{class:Kn.panelContainer},(0,Tn.u)("div",{afterUpdate:this._scrollExportIntoView,bind:this,class:Kn.exportedFilesContainer},0===V.length?(0,Tn.u)("div",{class:Kn.exportedFilesEmpty},(0,Tn.u)("calcite-icon",{icon:"file",scale:"l"}),(0,Tn.u)("div",null,(0,Tn.u)(Gn.X,{class:Kn.exportedFilesTitle,level:this.headingLevel},y.noExportedFiles),(0,Tn.u)("div",null,y.exportHint))):q))),B=(0,r.Z)({},jn.z.buttonDisabled,A||!I&&!T),H=!g||"2d"!==g.type,W=(0,Tn.u)("div",{class:Kn.panelError},H?y.sceneViewError:y.serviceError),K=V.some((function(e){return"pending"===e.state})),Y=(0,Tn.u)("div",{class:Kn.content,key:"panel"},(0,Tn.u)("div",null,(0,Tn.u)("ul",{bind:this,class:Kn.layoutTabList,onclick:this._toggleLayoutPanel,onkeydown:this._handleLayoutPanelKeyDown,role:"tablist"},(0,Tn.u)("li",{afterCreate:this._focusOnTabChange,afterUpdate:this._focusOnTabChange,"aria-selected":"".concat(this._selectedTab===Un.layout),class:Kn.layoutTab,"data-tab-id":Un.layout,id:"".concat(this.id,"__layoutTab"),role:"tab",tabIndex:0},y.layoutTab),(0,Tn.u)("li",{afterCreate:this._focusOnTabChange,afterUpdate:this._focusOnTabChange,"aria-selected":"".concat(this._selectedTab===Un.mapOnly),class:Kn.layoutTab,"data-tab-id":Un.mapOnly,id:"".concat(this.id,"__mapOnlyTab"),role:"tab",tabIndex:0},y.mapOnlyTab),(0,Tn.u)("li",{afterCreate:this._focusOnTabChange,afterUpdate:this._focusOnTabChange,"aria-selected":"".concat(this._selectedTab===Un.export),class:Kn.layoutTab,"data-tab-id":Un.export,id:"".concat(this.id,"__exportedFilesTab"),role:"tab",tabIndex:0},K?(0,Tn.u)("calcite-loader",{inline:!0,label:"loading",scale:"s"}):null,y.exportsTab)),z),this._selectedTab!==Un.export?(0,Tn.u)("button",{"aria-label":y.exportDescription,bind:this,class:this.classes(Kn.printButton,jn.z.button,B),disabled:A,onclick:this._handlePrintMap,tabIndex:0,type:"button"},y.export):null),X=(0,Tn.u)("calcite-flow",{key:"root-flow"},(0,Tn.u)("calcite-flow-item",{bind:this,key:"root-flow-item"},(0,Tn.u)("div",{class:Kn.printWidgetContainer},(0,Tn.u)("header",{class:Kn.headerTitle},y.export),this.error||H||!g?W:Y)),this._renderChooseTemplateFlowItem()),Q="initializing"===b.state,$=Q?this._renderLoader():X,ee=(0,r.Z)({},Kn.panelItemsCentered,Q);return(0,Tn.u)("div",{bind:this,class:this.classes(Kn.base,jn.z.widget,jn.z.panel,ee)},$)}},{key:"_getPageSizeLabel",value:function(e){if(e){var t=this.viewModel.getLayoutTemplateInfo(e);if(t){var n=$n.fromJSON(t.pageUnits.toLowerCase());return"".concat((0,Jn.uf)(t.pageSize[0])," x ").concat((0,Jn.uf)(t.pageSize[1])," ").concat((0,h.Qv)(this.messagesUnits,n,"abbr"))}}}},{key:"_getTemplateLabel",value:function(){var e,t,n,r,i,a=this.messages,o=this.includeDefaultTemplates,l=this.templateOptions,s=this.viewModel,u=l.layout,c=u?null!==(e=o?s.defaultTemplates.find((function(e){var t=e.layoutItem,n=e.layout;return u===(null===t||void 0===t?void 0:t.id)||u===n})):null)&&void 0!==e?e:s.browseTemplates.find((function(e){var t=e.layoutItem;return u===(null===t||void 0===t?void 0:t.id)})):null;return null!==(t=null!==(n=null!==(r=null===c||void 0===c||null===(i=c.label)||void 0===i?void 0:i.replaceAll("_"," "))&&void 0!==r?r:a[u])&&void 0!==n?n:null===u||void 0===u?void 0:u.replaceAll("_"," "))&&void 0!==t?t:a.selectTemplate}},{key:"_renderChooseTemplateFlowItem",value:function(){var e,t,n,r,i,a,o=this;if(!this._showTemplates)return null;var l=this.includeDefaultTemplates,s=this.messages,u=this.viewModel,c=u.defaultTemplates,p=u.templatesInfo,d=u.browseTemplates,f=u.portalTemplateIds,v=x.HR.test(null===(e=this.portal)||void 0===e?void 0:e.url),m=d.length?d.toArray().sort((function(e,t){var n,r;return(null!==(n=e.label)&&void 0!==n?n:"")>(null!==(r=t.label)&&void 0!==r?r:"")?1:-1})).map((function(e,t){var n,r,i,a,l,c,p=null!==(n=null===(r=e.layoutItem)||void 0===r?void 0:r.id)&&void 0!==n?n:e.layout,d=o._getPageSizeLabel(p),f=p===o.templateOptions.layout;return(0,Tn.u)("calcite-list-item",{description:d,key:"browse-template-".concat(t),label:null!==(i=null===e||void 0===e||null===(a=e.label)||void 0===a?void 0:a.replaceAll("_"," "))&&void 0!==i?i:s.untitled,selected:f,title:null!==(l=e.description)&&void 0!==l?l:"",value:p},!d&&f&&null!==(c=e.layoutItem)&&void 0!==c&&c.id?(0,Tn.u)("calcite-loader",{inline:!0,key:"browse-template-loader-".concat(t),label:"loading",scale:"s",slot:"content-end"}):null,(0,Tn.u)("calcite-action",{icon:"trash",onclick:function(){return u.removePortalTemplate(e)},slot:"actions-end",text:"delete"}))})):null,y=c.length&&l?c.toArray().filter((function(e){var t=e.label,n=e.layoutItem;return!Yn(t)&&f.includes(null===n||void 0===n?void 0:n.id)})).map((function(e,t){var n,r,i,a,l,u,c=null!==(n=null===(r=e.layoutItem)||void 0===r?void 0:r.id)&&void 0!==n?n:e.layout,p=o._getPageSizeLabel(c),d=c===o.templateOptions.layout;return(0,Tn.u)("calcite-list-item",{description:p,key:"portal-template-".concat(c,"-").concat(d),label:null!==(i=null===e||void 0===e||null===(a=e.label)||void 0===a?void 0:a.replaceAll("_"," "))&&void 0!==i?i:s.untitled,selected:d,title:null!==(l=e.description)&&void 0!==l?l:"",value:c},!p&&d&&null!==(u=e.layoutItem)&&void 0!==u&&u.id?(0,Tn.u)("calcite-loader",{inline:!0,key:"portal-template-loader-".concat(t),label:"loading",scale:"s",slot:"content-end"}):null)})):null,h=c.length&&l?c.toArray().filter((function(e){var t=e.label,n=e.layoutItem;return!Yn(t)&&!f.includes(null===n||void 0===n?void 0:n.id)})).sort((function(e,t){var n,r;return(null!==(n=e.label)&&void 0!==n?n:"")>(null!==(r=t.label)&&void 0!==r?r:"")?1:-1})).map((function(e,t){var n,r,i,a,l,u,c=null!==(n=null===(r=e.layoutItem)||void 0===r?void 0:r.id)&&void 0!==n?n:e.layout,p=o._getPageSizeLabel(c),d=c===o.templateOptions.layout;return(0,Tn.u)("calcite-list-item",{description:p,key:"default-template-".concat(t),label:null!==(i=null===e||void 0===e||null===(a=e.label)||void 0===a?void 0:a.replaceAll("_"," "))&&void 0!==i?i:s.untitled,selected:d,title:null!==(l=e.description)&&void 0!==l?l:"",value:c},!p&&d&&null!==(u=e.layoutItem)&&void 0!==u&&u.id?(0,Tn.u)("calcite-loader",{inline:!0,key:"default-template-loader-".concat(t),label:"loading",scale:"s",slot:"content-end"}):null)})):null,b=null===p||void 0===p||null===(t=p.layout)||void 0===t||!t.choiceList.length||l&&null!==h&&void 0!==h&&h.length?null:p.layout.choiceList.map((function(e){var t;return{label:null!==(t=s[e])&&void 0!==t?t:e.replaceAll("_"," "),value:e}})).sort((function(e,t){return e.label>t.label?1:0})).map((function(e,t){var n=e.label,r=e.value;return(0,Tn.u)("calcite-list-item",{description:o._getPageSizeLabel(r),key:"service-template-".concat(t),label:n,selected:r===o.templateOptions.layout,value:r})})),g=(null!==(n=null===m||void 0===m?void 0:m.length)&&void 0!==n?n:0)+(null!==(r=null===y||void 0===y?void 0:y.length)&&void 0!==r?r:0)+(null!==(i=null===h||void 0===h?void 0:h.length)&&void 0!==i?i:0)+(null!==(a=null===b||void 0===b?void 0:b.length)&&void 0!==a?a:0)>15;return(0,Tn.u)("calcite-flow-item",{bind:this,closable:!1,heading:s.chooseTemplate,key:"template-flow-item",onCalciteFlowItemBack:function(e){e.preventDefault(),o._showTemplates=!1}},(0,Tn.u)("div",{class:Kn.templateSelectFlowItemContainer},(0,Tn.u)("div",{class:Kn.templateSelectFlowItemContent},this.browseTemplateButtonOnClick?(0,Tn.u)("calcite-button",{appearance:"outline",class:Kn.browseTemplateButtonContainer,key:"browse-template-button",onclick:this.browseTemplateButtonOnClick},"Browse Templates"):null,(0,Tn.u)("calcite-list",{filterEnabled:g,key:"template-list",selectionMode:"single-persist",onCalciteListChange:function(e){var t=e.target;return o._applyTemplate(t.selectedItems[0].value)}},null!==m&&void 0!==m&&m.length?(0,Tn.u)("div",{key:"my-templates"},(0,Tn.u)("div",{class:Kn.templateSelectFlowItemListHeading},s.myTemplates,(0,Tn.u)("calcite-chip",{appearance:"outline",kind:"neutral",scale:"s",value:s.beta},s.beta)),m):null,null!==y&&void 0!==y&&y.length?(0,Tn.u)("div",{key:"org-templates"},(0,Tn.u)("div",{class:Kn.templateSelectFlowItemListHeading},s.organizationTemplates,v?(0,Tn.u)("calcite-chip",{appearance:"outline",kind:"neutral",scale:"s",value:s.beta},s.beta):null),y):null,null!==m&&void 0!==m&&m.length||null!==y&&void 0!==y&&y.length?null!==h&&void 0!==h&&h.length?(0,Tn.u)("div",{key:"default-templates"},(0,Tn.u)("div",{class:Kn.templateSelectFlowItemListHeading},s.defaultTemplates),h):null:h,null!==m&&void 0!==m&&m.length||null!==y&&void 0!==y&&y.length?null!==b&&void 0!==b&&b.length?(0,Tn.u)("div",{key:"service-templates"},(0,Tn.u)("div",{class:Kn.templateSelectFlowItemListHeading},s.defaultTemplates),b):null:b)),(0,Tn.u)("div",{class:Kn.templateButtonContainer},(0,Tn.u)("calcite-button",{class:Kn.templateDoneButton,onclick:function(){return o._showTemplates=!1}},this.messagesCommon.done))))}},{key:"_renderCustomTextElementSection",value:function(){var e=this,t=this.templateOptions.customTextElements;return t?(0,Tn.u)("div",{class:Kn.formSectionContainer,key:"custom-text-elements"},t.map((function(t,n){var r=(0,o.Z)(Object.entries(t)[0],2),i=r[0],a=r[1];return"date"===i?null:(0,Tn.u)("calcite-label",{key:"custom-text-elements-".concat(i,"-").concat(n)},i,(0,Tn.u)("calcite-input",{bind:e,"data-input-custom":!0,"data-input-name":i,value:null!==a&&void 0!==a?a:"",onCalciteInputInput:e._updateInputValue}))}))):null}},{key:"_applyTemplate",value:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t){var n,r,a,o,l,s,u,c,p,d,f,v,y,h,b,g;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._abortController&&(this._abortController.abort(),this._abortController=null),t){e.next=2;break}return e.abrupt("return");case 2:if(p=null!==(n=this.viewModel.defaultTemplates.find((function(e){var n=e.layoutItem;return t===(null===n||void 0===n?void 0:n.id)})))&&void 0!==n?n:this.viewModel.browseTemplates.find((function(e){var n=e.layoutItem;return t===(null===n||void 0===n?void 0:n.id)}))){e.next=5;break}return e.abrupt("return",(this.templateOptions.layout=t,void(this.templateOptions.layoutItem=null)));case 5:if(d=p.layoutItem,f=null!==(r=p.format)&&void 0!==r?r:this.templateOptions.format,v=null!==(a=null!==(o=null===d||void 0===d?void 0:d.id)&&void 0!==o?o:p.layout)&&void 0!==a?a:this.templateOptions.layout,this.templateOptions.layout=v,p.layoutOptions){e.next=19;break}return e.prev=7,this._abortController=new AbortController,e.next=11,this.viewModel.fetchLayoutTemplateInfo(p,{signal:this._abortController.signal});case 11:e.next=16;break;case 13:return e.prev=13,e.t0=e.catch(7),e.abrupt("return");case 16:return e.prev=16,this._abortController=null,e.finish(16);case 19:y=null!==(l=null===(s=p.layoutOptions)||void 0===s?void 0:s.legend)&&void 0!==l?l:this.templateOptions.legendEnabled,h=null!==(u=null===(c=p.layoutOptions)||void 0===c?void 0:c.northArrow)&&void 0!==u?u:this.templateOptions.northArrowEnabled,b=v?this.viewModel.effectiveTemplateCustomTextElements[v]:null,g=b?(0,m.d9)(b):null,this.templateOptions.set({customTextElements:g,format:f,layout:v,layoutItem:d,legendEnabled:y,northArrowEnabled:h});case 21:case"end":return e.stop()}}),e,this,[[7,13,16,19]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_renderTitleOrFileNameSection",value:function(){var e=this.messages,t=e.title,n=e.fileName,r=e.titlePlaceHolder,i=e.fileNamePlaceHolder,a=this._selectedTab===Un.layout?t:n,o=this._selectedTab===Un.layout?r:i,l=this._selectedTab===Un.layout?this.templateOptions.title:this.templateOptions.fileName;return(0,Tn.u)("div",{class:Kn.formSectionContainer,key:a},(0,Tn.u)("calcite-label",null,a,(0,Tn.u)("calcite-input",{placeholder:o,value:null!==l&&void 0!==l?l:"",onCalciteInputInput:this._onInput})))}},{key:"_focusOnTabChange",value:function(e){if(this._activeTabFocusRequested){var t=e.getAttribute("data-tab-id");("layoutTab"===t&&this._selectedTab===Un.layout||"mapOnlyTab"===t&&this._selectedTab===Un.mapOnly||"exportTab"===t&&this._selectedTab===Un.export)&&(e.focus(),this._activeTabFocusRequested=!1)}}},{key:"_renderLoader",value:function(){var e=(0,r.Z)({},Kn.loader,this._awaitingServerResponse);return(0,Tn.u)("div",{class:this.classes(e),key:"loader"})}},{key:"_createFileLink",value:function(e,t){var n=t||this.messages.untitled,r=e.format.toLowerCase(),i=r.includes("png")?"png":r,a=n+i;return void 0!==this._exportedFileNameMap[a]?this._exportedFileNameMap[a]++:this._exportedFileNameMap[a]=0,new P({name:n,extension:i,count:this._exportedFileNameMap[a]})}},{key:"_resetToCurrentScale",value:function(){var e;this.templateOptions.scale=null===(e=this.viewModel.view)||void 0===e?void 0:e.scale}},{key:"_updateCustomTextElementValue",value:function(e,t,n){e.find((function(e){return(0,o.Z)(Object.entries(e)[0],1)[0]===t}))[t]=n}},{key:"_updateInputValue",value:function(e){var t=e.target,n=t.getAttribute("data-input-name"),r=!!t["data-input-custom"],i=this.templateOptions;if(r)this._updateCustomTextElementValue(i.customTextElements,n,t.value);else{var a;if("number"===t.type){var o=Number(t.value);if(!function(e){return!isNaN(e)&&e>0}(o)){var l=i[n];return void(t.value="".concat(l))}a=o}else a=t.value;i[n]=a}}},{key:"_handleDPIChange",value:function(e){var t=this.templateOptions,n=t.dpi;this._updateInputValue(e);var r=function(e,t,n,r){var i=n/t,a=r/t;return{width:Math.round(e*i),height:Math.round(e*a)}}(t.dpi,n,t.width,t.height),i=r.height,a=r.width;t.height=i,t.width=a}},{key:"_handlePrintMap",value:function(){var e,t=this;this._pendingExportScroll=!0;var n=this.templateOptions,r=this.viewModel.toPrintTemplate(n),i=this._selectedTab===Un.layout?null===(e=r.layoutOptions)||void 0===e?void 0:e.titleText:n.fileName,a=this._createFileLink(r,i);this.exportedLinks.add(a),this.emit("submit",{link:a}),this._selectedTab=Un.export,this.viewModel.print(r).then((function(e){a.set({url:e&&e.url,state:"ready"})})).catch((function(e){a.set({error:e,state:"error"})})).then((function(){t.emit("complete",{link:a}),t.scheduleRender()}))}},{key:"_switchInput",value:function(){var e=[this.templateOptions.height,this.templateOptions.width];this.templateOptions.width=e[0],this.templateOptions.height=e[1]}},{key:"_scrollExportIntoView",value:function(){if(this._pendingExportScroll){this._pendingExportScroll=!1;var e=this._rootNode;if(e){var t=e.clientHeight,n=e.scrollHeight-t;n>0&&(e.scrollTop=n)}}}},{key:"_toggleInputValue",value:function(e){var t=e.target,n=t.getAttribute("data-option-name");this.templateOptions[n]=t.checked,"scaleEnabled"===n&&this._resetToCurrentScale()}},{key:"_renderExportedLink",value:function(e){var t=this,n=this.messages,r=e.map((function(e){var r,i=e.error,a=e.url,o=e.state,l=null!==(r=e.formattedName)&&void 0!==r?r:"",s="error"===o,u="pending"===o,c="ready"===o,p=a||null;p&&(p=(0,b.qg)(p));var d,f=(0,b.D6)(a,location.href);d=u?n.pending:c?n.ready:n.errorMessage;var v=s?"print-task:cim-symbol-unsupported"===(null===i||void 0===i?void 0:i.name)?n.exportWebMapCIMError:n.exportWebMapError:"";return(0,Tn.u)("calcite-list-item",{"aria-label":d,class:Kn.exportedFile,"data-item":e,description:u?n.generatingExport:v||(f?n.ready:n.linkReady),key:l,label:l,title:v,onCalciteListItemSelect:t._handleLinkClick},u?(0,Tn.u)("calcite-loader",{class:Kn.exportedFileLoader,inline:!0,key:"".concat(l,"-loader"),label:n.generatingExport,scale:"m",slot:"content-start"}):(0,Tn.u)("calcite-icon",{icon:Xn(e),key:"".concat(l,"-start-icon"),scale:"s",slot:"content-start"}),c?(0,Tn.u)("calcite-icon",{"aria-label":"".concat(l,". ").concat(n.linkReady),icon:f?"download-to":"launch",key:"".concat(l,"-end-icon"),scale:"s",slot:"content-end"}):null,u?null:(0,Tn.u)("calcite-action",{"aria-label":"".concat(v),"data-item":e,icon:"x",key:"".concat(l,"-action"),onclick:t._removeLink,slot:"actions-end",text:"".concat(v)}))}));return(0,Tn.u)("calcite-list",{filterEnabled:(null===e||void 0===e?void 0:e.length)>10},r)}},{key:"_toggleLayoutPanel",value:function(e){var t=e.target;this._toggleTab(t.getAttribute("data-tab-id"))}},{key:"_toggleTab",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this._selectedTab=e,this._selectedTab===Un.mapOnly)this.templateOptions.layout=Bn,this.templateOptions.layoutItem=null,this.templateOptions.customTextElements=null;else if(this._selectedTab===Un.layout){var n,r,i,a=null!==(n=this._selectedLayout)&&void 0!==n?n:this.includeDefaultTemplates&&this.viewModel.defaultTemplates.length?null:null===(r=this.viewModel.templatesInfo)||void 0===r||null===(i=r.layout)||void 0===i?void 0:i.defaultValue;a?this._applyTemplate(a):(this.templateOptions.layout=null,this.templateOptions.layoutItem=null,this.templateOptions.customTextElements=null)}t&&(this._activeTabFocusRequested=!0)}},{key:"_handleLayoutPanelKeyDown",value:function(e){var t=e.key,n=e.target.getAttribute("data-tab-id");if((0,_n.pf)(t))return this._toggleTab(n),e.preventDefault(),void e.stopPropagation();if("ArrowLeft"===t||"ArrowRight"===t){switch(n){case Un.layout:this._toggleTab("ArrowLeft"===t?Un.export:Un.mapOnly);break;case Un.mapOnly:this._toggleTab("ArrowLeft"===t?Un.layout:Un.export);break;case Un.export:this._toggleTab("ArrowLeft"===t?Un.mapOnly:Un.layout)}e.preventDefault(),e.stopPropagation()}}}]),d}(C.Z);(0,d._)([(0,g.Cb)()],er.prototype,"_showTemplates",void 0),(0,d._)([(0,g.Cb)()],er.prototype,"allowedFormats",null),(0,d._)([(0,g.Cb)()],er.prototype,"allowedLayouts",null),(0,d._)([(0,g.Cb)()],er.prototype,"browseTemplateButtonOnClick",void 0),(0,d._)([(0,g.Cb)()],er.prototype,"error",null),(0,d._)([(0,g.Cb)({type:zn})],er.prototype,"exportedLinks",void 0),(0,d._)([(0,g.Cb)()],er.prototype,"extraParameters",null),(0,d._)([(0,g.Cb)()],er.prototype,"headingLevel",void 0),(0,d._)([(0,g.Cb)()],er.prototype,"icon",null),(0,d._)([(0,g.Cb)()],er.prototype,"includeDefaultTemplates",null),(0,d._)([(0,g.Cb)()],er.prototype,"label",null),(0,d._)([(0,g.Cb)(),(0,qn.H)("esri/widgets/Print/t9n/Print")],er.prototype,"messages",void 0),(0,d._)([(0,g.Cb)(),(0,qn.H)("esri/t9n/common")],er.prototype,"messagesCommon",void 0),(0,d._)([(0,g.Cb)(),(0,qn.H)("esri/core/t9n/Units")],er.prototype,"messagesUnits",void 0),(0,d._)([(0,g.Cb)()],er.prototype,"portal",null),(0,d._)([(0,g.Cb)()],er.prototype,"showPrintAreaEnabled",null),(0,d._)([(0,g.Cb)()],er.prototype,"printServiceUrl",null),(0,d._)([(0,g.Cb)()],er.prototype,"templateCustomTextElements",null),(0,d._)([(0,g.Cb)()],er.prototype,"templateOptions",null),(0,d._)([(0,g.Cb)()],er.prototype,"view",null),(0,d._)([(0,g.Cb)({type:Fn})],er.prototype,"viewModel",void 0);var tr=er=(0,d._)([(0,w.j)("esri.widgets.Print")],er)},96919:function(e,t,n){n.d(t,{M:function(){return d},X:function(){return c}});var r=n(1413),i=n(44925),a=n(16889),o=n(7021),l=n(80975),s=n(67005),u=["level","class"];function c(e,t){var n=e.level,a=e.class,c=(0,i.Z)(e,u),d=p(n);return(0,s.u)("h".concat(d),(0,r.Z)((0,r.Z)({},c),{},{"aria-level":String(d),class:(0,l.Sh)(o.z.heading,a),role:"heading"}),t)}function p(e){return(0,a.uZ)(Math.ceil(e),1,6)}function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return p(e+t)}},33095:function(e,t,n){n.d(t,{W:function(){return r}});var r={checkMark:"esri-icon-check-mark",close:"esri-icon-close",collapse:"esri-icon-collapse",down:"esri-icon-down",downArrow:"esri-icon-down-arrow",dragHorizontal:"esri-icon-drag-horizontal",dragVertical:"esri-icon-drag-vertical",duplicate:"esri-icon-duplicate",expand:"esri-icon-expand",fontFallbackText:"esri-icon-font-fallback-text",forward:"esri-icon-forward",handleVertical:"esri-icon-handle-vertical",icon:"esri-icon",left:"esri-icon-left",loadingIndicator:"esri-icon-loading-indicator",locateCircled:"esri-icon-locate-circled",minus:"esri-icon-minus",noticeTriangle:"esri-icon-notice-triangle",pause:"esri-icon-pause",play:"esri-icon-play",plus:"esri-icon-plus",radioChecked:"esri-icon-radio-checked",radioUnchecked:"esri-icon-radio-unchecked",refresh:"esri-icon-refresh",reverse:"esri-icon-reverse",right:"esri-icon-right",search:"esri-icon-search",swap:"esri-icon-swap",table:"esri-icon-table",trash:"esri-icon-trash",up:"esri-icon-up",upArrow:"esri-icon-up-arrow",upDownArrows:"esri-icon-up-down-arrows",urbanModel:"esri-icon-urban-model",zoomInMagnifyingGlass:"esri-icon-zoom-in-magnifying-glass",zoomToObject:"esri-icon-zoom-to-object"}}}]);
//# sourceMappingURL=66244.708e1457.chunk.js.map