"use strict";(self.webpackChunkreact_training=self.webpackChunkreact_training||[]).push([[5532,87960],{82218:function(e,t,n){n.d(t,{B:function(){return w},a:function(){return m},b:function(){return $},c:function(){return k},d:function(){return j},e:function(){return P},f:function(){return Z},g:function(){return C},h:function(){return R},i:function(){return O},n:function(){return W},r:function(){return z},t:function(){return N},u:function(){return S}});var i=n(37762),r=n(43144),o=n(15671),a=(n(93169),n(32718)),s=n(16889),l=n(21530),u=n(29134),c=n(7025),d=n(32035),f=n(12400),v=n(14320),p=n(85981),h=n(55652),g=n(40885),y=n(40927),_=n(51378),b=function(){return a.Z.getLogger("esri.views.3d.support.geometryUtils.boundedPlane")},w=(0,r.Z)((function e(){(0,o.Z)(this,e),this.plane=(0,h.Ue)(),this.origin=(0,f.Ue)(),this.basis1=(0,f.Ue)(),this.basis2=(0,f.Ue)()}));function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G;return{plane:(0,h.Ue)(e.plane),origin:(0,f.d9)(e.origin),basis1:(0,f.d9)(e.basis1),basis2:(0,f.d9)(e.basis2)}}function k(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m();return Z(e.origin,e.basis1,e.basis2,t)}function Z(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:m();return(0,d.c)(i.origin,e),(0,d.c)(i.basis1,t),(0,d.c)(i.basis2,n),S(i),V(i,"fromValues()"),i}function S(e){(0,h.my)(e.basis2,e.basis1,e.origin,e.plane)}function I(e,t,n){e!==n&&k(e,n);var i=(0,d.j)(_.WM.get(),W(e),t);return(0,d.g)(n.origin,n.origin,i),n.plane[3]-=t,n}function C(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m(),n=(e[2]-e[0])/2,i=(e[3]-e[1])/2;return(0,d.s)(t.origin,e[0]+n,e[1]+i,0),(0,d.s)(t.basis1,n,0,0),(0,d.s)(t.basis2,0,i,0),(0,h.al)(0,0,1,0,t.plane),t}function O(e,t,n){return!!(0,h.BR)(e.plane,t,n)&&L(e,n)}function M(e,t,n){var r=q.get();D(e,t,r,q.get());var o,a=Number.POSITIVE_INFINITY,l=(0,i.Z)(Y);try{for(l.s();!(o=l.n()).done;){var u=U(e,o.value,J.get()),c=_.WM.get();if((0,h.rx)(r,u,c)){var f=(0,d.E)(_.WM.get(),t.origin,c),v=Math.abs((0,s.ZF)((0,d.m)(t.direction,f)));v<a&&(a=v,(0,d.c)(n,c))}}}catch(p){l.e(p)}finally{l.f()}return a===Number.POSITIVE_INFINITY?E(e,t,n):n}function E(e,t,n){if(O(e,t,n))return n;var r=q.get(),o=q.get();D(e,t,r,o);var a,s=Number.POSITIVE_INFINITY,l=(0,i.Z)(Y);try{for(l.s();!(a=l.n()).done;){var u=U(e,a.value,J.get()),c=_.WM.get();if((0,h.dZ)(r,u,c)){var f=(0,g.Jk)(t,c);if(!(0,h.Ac)(o,c))continue;f<s&&(s=f,(0,d.c)(n,c))}}}catch(v){l.e(v)}finally{l.f()}return T(e,t.origin)<s&&x(e,t.origin,n),n}function x(e,t,n){var i=(0,h.nF)(e.plane,t,_.WM.get()),r=(0,p.ct)(A(e,e.basis1),i,-1,1,_.WM.get()),o=(0,p.ct)(A(e,e.basis2),i,-1,1,_.WM.get());return(0,d.f)(n,(0,d.g)(_.WM.get(),r,o),e.origin),n}function H(e,t,n){var i=e.origin,r=e.basis1,o=e.basis2,a=(0,d.f)(_.WM.get(),t,i),s=(0,y.SR)(r,a),l=(0,y.SR)(o,a),u=(0,y.SR)(W(e),a);return(0,d.s)(n,s,l,u)}function T(e,t){var n=H(e,t,_.WM.get()),i=e.basis1,r=e.basis2,o=(0,d.l)(i),a=(0,d.l)(r),s=Math.max(Math.abs(n[0])-o,0),l=Math.max(Math.abs(n[1])-a,0),u=n[2];return s*s+l*l+u*u}function R(e,t){return Math.sqrt(T(e,t))}function P(e,t){return(0,h.Ac)(e.plane,t)&&L(e,t)}function F(e,t){var n=-e.plane[3];return(0,y.SR)(W(e),t)-n}function j(e,t){return(0,d.e)(e.basis1,t.basis1)&&(0,d.e)(e.basis2,t.basis2)&&(0,d.e)(e.origin,t.origin)}function N(e,t,n){return e!==n&&k(e,n),(0,u.U_)(K,t),(0,u.p4)(K,K),(0,d.h)(n.basis1,e.basis1,K),(0,d.h)(n.basis2,e.basis2,K),(0,d.h)((0,h.st)(n.plane),(0,h.st)(e.plane),K),(0,d.h)(n.origin,e.origin,t),(0,h.T5)(n.plane,n.plane,n.origin),n}function z(e,t,n,i){return e!==i&&k(e,i),(0,u.Us)(Q,t,n),(0,d.h)(i.basis1,e.basis1,Q),(0,d.h)(i.basis2,e.basis2,Q),S(i),i}function W(e){return(0,h.st)(e.plane)}function L(e,t){var n=(0,d.f)(_.WM.get(),t,e.origin),i=(0,d.q)(e.basis1),r=(0,d.q)(e.basis2),o=(0,d.m)(e.basis1,n),a=(0,d.m)(e.basis2,n);return-o-i<0&&o-i<0&&-a-r<0&&a-r<0}function A(e,t){var n=J.get();return(0,d.c)(n.origin,e.origin),(0,d.c)(n.vector,t),n}function U(e,t,n){var i=e.basis1,r=e.basis2,o=e.origin,a=(0,d.j)(_.WM.get(),i,t.origin[0]),s=(0,d.j)(_.WM.get(),r,t.origin[1]);(0,d.g)(n.origin,a,s),(0,d.g)(n.origin,n.origin,o);var l=(0,d.j)(_.WM.get(),i,t.direction[0]),u=(0,d.j)(_.WM.get(),r,t.direction[1]);return(0,d.j)(n.vector,(0,d.g)(l,l,u),2),n}function V(e,t){Math.abs((0,d.m)(e.basis1,e.basis2)/((0,d.l)(e.basis1)*(0,d.l)(e.basis2)))>1e-6&&b().warn(t,"Provided basis vectors are not perpendicular"),Math.abs((0,d.m)(e.basis1,W(e)))>1e-6&&b().warn(t,"Basis vectors and plane normal are not perpendicular"),Math.abs(-(0,d.m)(W(e),e.origin)-e.plane[3])>1e-6&&b().warn(t,"Plane offset is not consistent with plane origin")}function D(e,t,n,i){var r=W(e);(0,h.my)(r,t.direction,t.origin,n),(0,h.my)((0,h.st)(n),r,t.origin,i)}var G={plane:(0,h.Ue)(),origin:(0,f.al)(0,0,0),basis1:(0,f.al)(1,0,0),basis2:(0,f.al)(0,1,0)},q=new l.x(h.Ue),J=new l.x(p.Ue),B=(0,f.Ue)(),X=new l.x((function(){return m()})),Y=[{origin:[-1,-1],direction:[1,0]},{origin:[1,-1],direction:[0,1]},{origin:[1,1],direction:[-1,0]},{origin:[-1,1],direction:[0,-1]}],K=(0,c.Ue)(),Q=(0,c.Ue)(),$=Object.freeze(Object.defineProperty({__proto__:null,BoundedPlaneClass:w,altitudeAt:F,axisAt:function(e,t,n,i){return function(e,t,n){switch(t){case v.R.X:(0,d.c)(n,e.basis1),(0,d.n)(n,n);break;case v.R.Y:(0,d.c)(n,e.basis2),(0,d.n)(n,n);break;case v.R.Z:(0,d.c)(n,W(e))}return n}(e,n,i)},closestPoint:E,closestPointOnSilhouette:M,copy:k,copyWithoutVerify:function(e,t){(0,d.c)(t.origin,e.origin),(0,d.c)(t.basis1,e.basis1),(0,d.c)(t.basis2,e.basis2),(0,h.JG)(t.plane,e.plane)},create:m,distance:R,distance2:T,distanceToSilhouette:function(e,t){var n,r=Number.NEGATIVE_INFINITY,o=(0,i.Z)(Y);try{for(o.s();!(n=o.n()).done;){var a=U(e,n.value,J.get()),s=(0,p.Jk)(a,t);s>r&&(r=s)}}catch(l){o.e(l)}finally{o.f()}return Math.sqrt(r)},elevate:I,equals:j,extrusionContainsPoint:P,fromAABoundingRect:C,fromValues:Z,intersectRay:O,intersectRayClosestSilhouette:function(e,t,n){if(O(e,t,n))return n;var i=M(e,t,_.WM.get());return(0,d.g)(n,t.origin,(0,d.j)(_.WM.get(),t.direction,(0,d.p)(t.origin,i)/(0,d.l)(t.direction))),n},normal:W,projectPoint:x,projectPointLocal:H,rotate:z,setAltitudeAt:function(e,t,n,i){var r=F(e,t),o=(0,d.j)(B,W(e),n-r);return(0,d.g)(i,t,o),i},setExtent:function(e,t,n){return C(t,n),I(n,F(e,e.origin),n),n},transform:N,up:G,updateUnboundedPlane:S,wrap:function(e,t,n){var i=X.get();return i.origin=e,i.basis1=t,i.basis2=n,i.plane=(0,h.re)(0,0,0,0),S(i),i}},Symbol.toStringTag,{value:"Module"}))},97942:function(e,t,n){function i(e){var t,n,i=[],o=!1;return function(){for(var a=arguments.length,s=new Array(a),l=0;l<a;l++)s[l]=arguments[l];return o&&t===this&&r(s,i)||(n=e.apply(this,s),t=this,i=s,o=!0),n}}function r(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}n.d(t,{H:function(){return i}})},46798:function(e,t,n){n.d(t,{q:function(){return f}});var i=n(37762),r=n(1413),o=n(15671),a=n(43144),s=n(63780),l=n(42537),u=n(32718),c=n(66978),d=n(70431),f=function(){function e(t,n,a,s){var l=this,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};(0,o.Z)(this,e),this._mainMethod=n,this._transferLists=a,this._listeners=[],this._promise=(0,d.bA)(t,(0,r.Z)((0,r.Z)({},c),{},{schedule:s})).then((function(e){if(void 0===l._thread){l._thread=e,l._promise=null,c.hasInitialize&&l.broadcast({},"initialize");var t,n=(0,i.Z)(l._listeners);try{for(n.s();!(t=n.n()).done;){var r=t.value;l._connectListener(r)}}catch(o){n.e(o)}finally{n.f()}}else e.close()})),this._promise.catch((function(e){return u.Z.getLogger("esri.core.workers.WorkerHandle").error("Failed to initialize ".concat(t," worker: ").concat(e))}))}return(0,a.Z)(e,[{key:"on",value:function(e,t){var n=this,i={removed:!1,eventName:e,callback:t,threadHandle:null};return this._listeners.push(i),this._connectListener(i),(0,l.kB)((function(){i.removed=!0,(0,s.Od)(n._listeners,i),n._thread&&null!=i.threadHandle&&i.threadHandle.remove()}))}},{key:"destroy",value:function(){this._thread&&(this._thread.close(),this._thread=null),this._promise=null,this._listeners.length=0,this._transferLists={}}},{key:"invoke",value:function(e,t){return this.invokeMethod(this._mainMethod,e,t)}},{key:"invokeMethod",value:function(e,t,n){var i=this;if(this._thread){var r=this._transferLists[e],o=r?r(t):[];return this._thread.invoke(e,t,{transferList:o,signal:n})}return this._promise?this._promise.then((function(){return(0,c.k_)(n),i.invokeMethod(e,t,n)})):Promise.reject(null)}},{key:"broadcast",value:function(e,t){var n=this;return this._thread?Promise.all(this._thread.broadcast(t,e)).then((function(){})):this._promise?this._promise.then((function(){return n.broadcast(e,t)})):Promise.reject()}},{key:"promise",get:function(){return this._promise}},{key:"_connectListener",value:function(e){this._thread&&this._thread.on(e.eventName,e.callback).then((function(t){e.removed||(e.threadHandle=t)}))}}]),e}()},85981:function(e,t,n){n.d(t,{AR:function(){return _},Gr:function(){return y},JG:function(){return c},Jk:function(){return v},KU:function(){return h},Ue:function(){return l},al:function(){return d},ct:function(){return g},nF:function(){return p},re:function(){return u},zk:function(){return f}});var i=n(16889),r=n(21530),o=n(32035),a=n(12400),s=n(51378);function l(e){return e?{origin:(0,a.d9)(e.origin),vector:(0,a.d9)(e.vector)}:{origin:(0,a.Ue)(),vector:(0,a.Ue)()}}function u(e,t){var n=m.get();return n.origin=e,n.vector=t,n}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l();return d(e.origin,e.vector,t)}function d(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l();return(0,o.c)(n.origin,e),(0,o.c)(n.vector,t),n}function f(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l();return(0,o.c)(n.origin,e),(0,o.f)(n.vector,t,e),n}function v(e,t){var n=(0,o.f)(s.WM.get(),t,e.origin),r=(0,o.m)(e.vector,n),a=(0,o.m)(e.vector,e.vector),l=(0,i.uZ)(r/a,0,1),u=(0,o.f)(s.WM.get(),(0,o.j)(s.WM.get(),e.vector,l),n);return(0,o.m)(u,u)}function p(e,t,n){return g(e,t,0,1,n)}function h(e,t,n){return(0,o.g)(n,e.origin,(0,o.j)(n,e.vector,t))}function g(e,t,n,r,a){var l=e.vector,u=e.origin,c=(0,o.f)(s.WM.get(),t,u),d=(0,o.m)(l,c)/(0,o.q)(l);return(0,o.j)(a,l,(0,i.uZ)(d,n,r)),(0,o.g)(a,a,e.origin)}function y(e,t){if(b(e,u(t.origin,t.direction),!1,w)){var n=w.tA,i=w.pB,r=w.distance2;if(n>=0&&n<=1)return r;if(n<0)return(0,o.a)(e.origin,i);if(n>1)return(0,o.a)((0,o.g)(s.WM.get(),e.origin,e.vector),i)}return null}function _(e,t,n){return!!b(e,t,!0,w)&&((0,o.c)(n,w.pA),!0)}function b(e,t,n,r){var a=1e-6,l=e.origin,u=(0,o.g)(s.WM.get(),l,e.vector),c=t.origin,d=(0,o.g)(s.WM.get(),c,t.vector),f=s.WM.get(),v=s.WM.get();if(f[0]=l[0]-c[0],f[1]=l[1]-c[1],f[2]=l[2]-c[2],v[0]=d[0]-c[0],v[1]=d[1]-c[1],v[2]=d[2]-c[2],Math.abs(v[0])<a&&Math.abs(v[1])<a&&Math.abs(v[2])<a)return!1;var p=s.WM.get();if(p[0]=u[0]-l[0],p[1]=u[1]-l[1],p[2]=u[2]-l[2],Math.abs(p[0])<a&&Math.abs(p[1])<a&&Math.abs(p[2])<a)return!1;var h=f[0]*v[0]+f[1]*v[1]+f[2]*v[2],g=v[0]*p[0]+v[1]*p[1]+v[2]*p[2],y=f[0]*p[0]+f[1]*p[1]+f[2]*p[2],_=v[0]*v[0]+v[1]*v[1]+v[2]*v[2],b=(p[0]*p[0]+p[1]*p[1]+p[2]*p[2])*_-g*g;if(Math.abs(b)<a)return!1;var w=(h*g-y*_)/b,m=(h+g*w)/_;n&&(w=(0,i.uZ)(w,0,1),m=(0,i.uZ)(m,0,1));var k=s.WM.get(),Z=s.WM.get();return k[0]=l[0]+w*p[0],k[1]=l[1]+w*p[1],k[2]=l[2]+w*p[2],Z[0]=c[0]+m*v[0],Z[1]=c[1]+m*v[1],Z[2]=c[2]+m*v[2],r.tA=w,r.tB=m,r.pA=k,r.pB=Z,r.distance2=(0,o.a)(k,Z),!0}var w={tA:0,tB:0,pA:(0,a.Ue)(),pB:(0,a.Ue)(),distance2:0},m=new r.x((function(){return l()}))},59068:function(e,t,n){n.d(t,{Z:function(){return p}});var i,r=n(15671),o=n(43144),a=n(60136),s=n(29388),l=n(27366),u=n(46784),c=n(49861),d=n(25243),f=(n(84936),n(93169),n(69912)),v=i=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e){var i;return(0,r.Z)(this,n),(i=t.call(this,e)).cols=null,i.level=0,i.levelValue=null,i.origin=null,i.resolution=0,i.rows=null,i.scale=0,i}return(0,o.Z)(n,[{key:"clone",value:function(){return new i({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}}]),n}(u.wq);(0,l._)([(0,c.Cb)({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],v.prototype,"cols",void 0),(0,l._)([(0,c.Cb)({type:d.z8,json:{write:!0}})],v.prototype,"level",void 0),(0,l._)([(0,c.Cb)({type:String,json:{write:!0}})],v.prototype,"levelValue",void 0),(0,l._)([(0,c.Cb)({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],v.prototype,"origin",void 0),(0,l._)([(0,c.Cb)({type:Number,json:{write:!0}})],v.prototype,"resolution",void 0),(0,l._)([(0,c.Cb)({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],v.prototype,"rows",void 0),(0,l._)([(0,c.Cb)({type:Number,json:{write:!0}})],v.prototype,"scale",void 0);var p=v=i=(0,l._)([(0,f.j)("esri.layers.support.LOD")],v)},22824:function(e,t,n){n.d(t,{Z:function(){return O}});var i,r=n(1413),o=n(15671),a=n(43144),s=n(60136),l=n(29388),u=n(27366),c=n(43404),d=n(46784),f=n(68860),v=n(49861),p=n(25243),h=(n(84936),n(93169),n(38511)),g=n(69912),y=n(31201),_=n(848),b=n(78952),w=n(65156),m=n(92975),k=n(81753),Z=n(59068),S=n(87960),I=new c.X({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"}),C=i=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(e){var i;return(0,o.Z)(this,n),(i=t.call(this,e)).dpi=96,i.format=null,i.origin=null,i.size=null,i.spatialReference=null,i}return(0,a.Z)(n,[{key:"isWrappable",get:function(){var e=this.spatialReference,t=this.origin;if(e&&t){var n=(0,m.C5)(e);return e.isWrappable&&!!n&&Math.abs(n.origin[0]-t.x)<=n.dx}return!1}},{key:"readOrigin",value:function(e,t){return _.Z.fromJSON((0,r.Z)({spatialReference:t.spatialReference},e))}},{key:"lods",set:function(e){var t=0,n=0,i=[],r=this._levelToLOD={};e&&(t=-1/0,n=1/0,e.forEach((function(e){i.push(e.scale),t=e.scale>t?e.scale:t,n=e.scale<n?e.scale:n,r[e.level]=e}))),this._set("scales",i),this._set("lods",e),this._initializeUpsampleLevels()}},{key:"readSize",value:function(e,t){return[t.cols,t.rows]}},{key:"writeSize",value:function(e,t){t.cols=e[0],t.rows=e[1]}},{key:"zoomToScale",value:function(e){var t=this.scales;if(e<=0)return t[0];if(e>=t.length-1)return t[t.length-1];var n=Math.floor(e),i=n+1;return t[n]/Math.pow(t[n]/t[i],e-n)}},{key:"scaleToZoom",value:function(e){for(var t=this.scales,n=t.length-1,i=0;i<n;i++){var r=t[i],o=t[i+1];if(r<=e)return i;if(o===e)return i+1;if(r>e&&o<e)return i+Math.log(r/e)/Math.log(r/o)}return i}},{key:"tileAt",value:function(e,t,n,i){var r,o,a=this.lodAt(e);if(!a)return null;if("number"==typeof t)r=t,o=n;else if((0,m.fS)(t.spatialReference,this.spatialReference))r=t.x,o=t.y,i=n;else{var s=(0,k.iV)(t,this.spatialReference);if(null==s)return null;r=s.x,o=s.y,i=n}var l=a.resolution*this.size[0],u=a.resolution*this.size[1];return i||(i=new S.f(null,0,0,0,(0,w.Ue)())),i.level=e,i.row=Math.floor((this.origin.y-o)/u+.001),i.col=Math.floor((r-this.origin.x)/l+.001),this.updateTileInfo(i),i}},{key:"updateTileInfo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.ExtrapolateOptions.NONE,n=this.lodAt(e.level);if(!n&&t===i.ExtrapolateOptions.POWER_OF_TWO){var r=this.lods[this.lods.length-1];r.level<e.level&&(n=r)}if(n){var o=e.level-n.level,a=n.resolution*this.size[0]/Math.pow(2,o),s=n.resolution*this.size[1]/Math.pow(2,o);e.id="".concat(e.level,"/").concat(e.row,"/").concat(e.col),e.extent||(e.extent=(0,w.Ue)()),e.extent[0]=this.origin.x+e.col*a,e.extent[1]=this.origin.y-(e.row+1)*s,e.extent[2]=e.extent[0]+a,e.extent[3]=e.extent[1]+s}}},{key:"upsampleTile",value:function(e){var t=this._upsampleLevels[e.level];return!(!t||-1===t.parentLevel)&&(e.level=t.parentLevel,e.row=Math.floor(e.row/t.factor+.001),e.col=Math.floor(e.col/t.factor+.001),this.updateTileInfo(e),!0)}},{key:"getTileBounds",value:function(e,t){var n=this.lodAt(t.level);if(null==n)return null;var i=n.resolution,r=i*this.size[0],o=i*this.size[1];return e[0]=this.origin.x+t.col*r,e[1]=this.origin.y-(t.row+1)*o,e[2]=e[0]+r,e[3]=e[1]+o,e}},{key:"lodAt",value:function(e){var t,n;return null!==(t=null===(n=this._levelToLOD)||void 0===n?void 0:n[e])&&void 0!==t?t:null}},{key:"clone",value:function(){return i.fromJSON(this.write({}))}},{key:"getCompatibleForVTL",value:function(e){if(this.size[0]!==this.size[1]||256===this.size[0]&&512===e)return null;var t=(512===this.size[0]&&256===e?-1:0)+(this.spatialReference.isGeographic?1:0);if(this.size[0]===e&&0===t)return this;for(var n=[],r=this.lods.length-t,o=0;o<r;o++){var a=o+t,s=a>=0?this.lods[a]:{scale:2*this.lods[0].scale,resolution:2*this.lods[0].resolution},l=s.scale,u=s.resolution;n.push(new Z.Z({level:o,scale:l,resolution:u}))}return new i({size:[e,e],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:n})}},{key:"_initializeUpsampleLevels",value:function(){var e=this.lods;this._upsampleLevels=[];for(var t=null,n=0;n<e.length;n++){var i=e[n];this._upsampleLevels[i.level]={parentLevel:t?t.level:-1,factor:t?t.resolution/i.resolution:0},t=i}}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.resolutionFactor,n=void 0===t?1:t,r=e.scales,o=e.size,a=void 0===o?256:o,s=e.spatialReference,l=void 0===s?b.Z.WebMercator:s,u=e.numLODs,c=void 0===u?24:u;if(!(0,m.JY)(l)){var d=[];if(r)for(var v=0;v<r.length;v++){var p=r[v];d.push(new Z.Z({level:v,scale:p,resolution:p}))}else for(var h=5e-4,g=c-1;g>=0;g--)d.unshift(new Z.Z({level:g,scale:h,resolution:h})),h*=2;return new i({dpi:96,lods:d,origin:new _.Z(0,0,l),size:[a,a],spatialReference:l})}var y=(0,m.C5)(l),w=e.origin?new _.Z({x:e.origin.x,y:e.origin.y,spatialReference:l}):new _.Z(y?{x:y.origin[0],y:y.origin[1],spatialReference:l}:{x:0,y:0,spatialReference:l}),k=96,S=1/(39.37*(0,f.c9)(l)*k),I=[];if(r)for(var C=0;C<r.length;C++){var O=r[C],M=O*S;I.push(new Z.Z({level:C,scale:O,resolution:M}))}else{var E=(0,m.sT)(l)?512/a*591657527.5917094:256/a*591657527.591555,x=Math.ceil(c/n);I.push(new Z.Z({level:0,scale:E,resolution:E*S}));for(var H=1;H<x;H++){var T=E/Math.pow(2,n),R=T*S;I.push(new Z.Z({level:H,scale:T,resolution:R})),E=T}}return new i({dpi:k,lods:I,origin:w,size:[a,a],spatialReference:l})}}]),n}(d.wq);(0,u._)([(0,v.Cb)({type:Number,json:{write:!0}})],C.prototype,"compressionQuality",void 0),(0,u._)([(0,v.Cb)({type:Number,json:{write:!0}})],C.prototype,"dpi",void 0),(0,u._)([(0,v.Cb)({type:String,json:{read:I.read,write:I.write,origins:{"web-scene":{read:!1,write:!1}}}})],C.prototype,"format",void 0),(0,u._)([(0,v.Cb)({readOnly:!0})],C.prototype,"isWrappable",null),(0,u._)([(0,v.Cb)({type:_.Z,json:{write:!0}})],C.prototype,"origin",void 0),(0,u._)([(0,h.r)("origin")],C.prototype,"readOrigin",null),(0,u._)([(0,v.Cb)({type:[Z.Z],value:null,json:{write:!0}})],C.prototype,"lods",null),(0,u._)([(0,v.Cb)({readOnly:!0})],C.prototype,"scales",void 0),(0,u._)([(0,v.Cb)({cast:function(e){return Array.isArray(e)?e:"number"==typeof e?[e,e]:[256,256]}})],C.prototype,"size",void 0),(0,u._)([(0,h.r)("size",["rows","cols"])],C.prototype,"readSize",null),(0,u._)([(0,y.c)("size",{cols:{type:p.z8},rows:{type:p.z8}})],C.prototype,"writeSize",null),(0,u._)([(0,v.Cb)({type:b.Z,json:{write:!0}})],C.prototype,"spatialReference",void 0),function(e){var t;(t=e.ExtrapolateOptions||(e.ExtrapolateOptions={}))[t.NONE=0]="NONE",t[t.POWER_OF_TWO=1]="POWER_OF_TWO"}((C=i=(0,u._)([(0,g.j)("esri.layers.support.TileInfo")],C))||(C={}));var O=C},87960:function(e,t,n){n.d(t,{f:function(){return o}});var i=n(43144),r=n(15671),o=(0,i.Z)((function e(t,n,i,o){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;(0,r.Z)(this,e),this.id=t,this.level=n,this.row=i,this.col=o,this.extent=a}))},13470:function(e,t,n){n.d(t,{C:function(){return l},E:function(){return i}});var i,r,o=n(15671),a=n(43144),s=n(65156),l=function(){function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;(0,o.Z)(this,e),this.lij=[0,0,0],this.extent=(0,s.Ue)(),this.resolution=0,this.loadPriority=0,this.measures={visibility:i.VISIBLE_ON_SURFACE,screenRect:(0,s.Ue)(),distance:0,shouldSplit:!1},this.used=!1,a&&this.acquire(t,n,r,a)}return(0,a.Z)(e,[{key:"acquire",value:function(t,n,i,r){this.tilingScheme=r,this.id=e.id(t,n,i),this.lij[0]=t,this.lij[1]=n,this.lij[2]=i,r.getExtent(t,n,i,this.extent),this.resolution=r.resolutionAtLevel(t)}},{key:"release",value:function(){this.tilingScheme=null}},{key:"getChildren",value:function(t){var n=this.lij[0]+1,i=2*this.lij[1],r=2*this.lij[2];return t?(t[0].acquire(n,i,r,this.tilingScheme),t[1].acquire(n,i+1,r,this.tilingScheme),t[2].acquire(n,i,r+1,this.tilingScheme),t[3].acquire(n,i+1,r+1,this.tilingScheme),t):[new e(n,i,r,this.tilingScheme),new e(n,i+1,r,this.tilingScheme),new e(n,i,r+1,this.tilingScheme),new e(n,i+1,r+1,this.tilingScheme)]}},{key:"copyMeasurementsFrom",value:function(e){this.measures.visibility=e.measures.visibility,this.measures.shouldSplit=e.measures.shouldSplit,this.measures.distance=e.measures.distance,(0,s.JG)(e.measures.screenRect,this.measures.screenRect)}}],[{key:"id",value:function(e,t,n){return"".concat(e,"/").concat(t,"/").concat(n)}}]),e}();(r=i||(i={}))[r.INVISIBLE=0]="INVISIBLE",r[r.VISIBLE_WHEN_EXTENDED=1]="VISIBLE_WHEN_EXTENDED",r[r.VISIBLE_ON_SURFACE=2]="VISIBLE_ON_SURFACE"},36700:function(e,t,n){n.d(t,{x:function(){return d}});var i=n(1413),r=n(15671),o=n(43144),a=n(60136),s=n(29388),l=n(44179),u=n(75691),c=n(61309),d=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e){return(0,r.Z)(this,n),t.call(this,(0,i.Z)((0,i.Z)({},e),{},{constraint:new l.Hk(e.targetPoint)}))}return(0,o.Z)(n,[{key:"hints",get:function(){return[new c.n(this.targetPoint,this.isDraped,this.domain)]}}]),n}(u.a)},5532:function(e,t,n){n.r(t),n.d(t,{FeatureServiceSnappingSource:function(){return re}});var i=n(74165),r=n(15861),o=n(1413),a=n(15671),s=n(43144),l=n(60136),u=n(29388),c=n(27366),d=n(7138),f=n(14921),v=n(42537),p=n(97942),h=n(66978),g=n(94172),y=n(49861),_=(n(93169),n(32718),n(84936),n(69912)),b=n(46634),w=n(37933),m=n(74509),k=n(37762),Z=n(87960),S=n(32035),I=n(12400),C=n(82218);function O(e,t){return(0,C.g)(t.extent,M),(0,C.h)(M,(0,S.s)(E,e.x,e.y,0))}var M=(0,C.a)(),E=(0,I.Ue)(),x=n(69787),H=function(e){(0,l.Z)(n,e);var t=(0,u.Z)(n);function n(e){var i;return(0,a.Z)(this,n),(i=t.call(this,e)).pointOfInterest=null,i}return(0,s.Z)(n,[{key:"tiles",get:function(){var e=this.tilesCoveringView,t=null!=this.pointOfInterest?this.pointOfInterest:this.view.center;return e.sort((function(e,n){return O(t,e)-O(t,n)})),e}},{key:"_scaleEnabled",value:function(){return(0,x.rs)(this.view.scale,this.layer.minScale||0,this.layer.maxScale||0)}},{key:"tilesCoveringView",get:function(){if(!this.view.ready||!this.view.featuresTilingScheme||!this.view.state||null==this.tileInfo)return[];if(!this._scaleEnabled)return[];var e,t=this.view.featuresTilingScheme.getTileCoverage(this.view.state,0),n=t.spans,i=t.lodInfo,r=i.level,o=[],a=(0,k.Z)(n);try{for(a.s();!(e=a.n()).done;)for(var s=e.value,l=s.row,u=s.colFrom,c=s.colTo,d=u;d<=c;d++){var f=i.normalizeCol(d),v=new Z.f(null,r,l,f);this.tileInfo.updateTileInfo(v),o.push(v)}}catch(p){a.e(p)}finally{a.f()}return o}},{key:"tileInfo",get:function(){var e,t;return null!==(e=null===(t=this.view.featuresTilingScheme)||void 0===t?void 0:t.tileInfo)&&void 0!==e?e:null}},{key:"tileSize",get:function(){return null!=this.tileInfo?this.tileInfo.size[0]:256}},{key:"initialize",value:function(){var e=this;this.addHandles((0,g.watch)((function(){var t,n;return null===(t=e.view)||void 0===t||null===(n=t.state)||void 0===n?void 0:n.viewpoint}),(function(){return e.notifyChange("tilesCoveringView")}),g.sync))}}]),n}(d.default);(0,c._)([(0,y.Cb)({readOnly:!0})],H.prototype,"tiles",null),(0,c._)([(0,y.Cb)({readOnly:!0})],H.prototype,"_scaleEnabled",null),(0,c._)([(0,y.Cb)({readOnly:!0})],H.prototype,"tilesCoveringView",null),(0,c._)([(0,y.Cb)({readOnly:!0})],H.prototype,"tileInfo",null),(0,c._)([(0,y.Cb)({readOnly:!0})],H.prototype,"tileSize",null),(0,c._)([(0,y.Cb)({constructOnly:!0})],H.prototype,"view",void 0),(0,c._)([(0,y.Cb)({constructOnly:!0})],H.prototype,"layer",void 0),(0,c._)([(0,y.Cb)()],H.prototype,"pointOfInterest",void 0),H=(0,c._)([(0,_.j)("esri.views.2d.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTiles2D")],H);var T=n(29439),R=n(13470),P=function(e){(0,l.Z)(n,e);var t=(0,u.Z)(n);function n(e){var i;return(0,a.Z)(this,n),(i=t.call(this,e)).pointOfInterest=null,i}return(0,s.Z)(n,[{key:"tiles",get:function(){var e=this.tilesCoveringView,t=this._effectivePointOfInterest;if(null!=t)for(var n=e.map((function(e){return O(t,e)})),i=1;i<n.length;i++)if(n[i-1]>n[i])return e.sort((function(e,n){return O(t,e)-O(t,n)})),e.slice();return e}},{key:"tilesCoveringView",get:function(){var e,t;return this._filterTiles(null===(e=this.view.featureTiles)||void 0===e||null===(t=e.tiles)||void 0===t?void 0:t.toArray()).map(F)}},{key:"tileInfo",get:function(){var e,t,n;return null!==(e=null===(t=this.view.featureTiles)||void 0===t||null===(n=t.tilingScheme)||void 0===n?void 0:n.toTileInfo())&&void 0!==e?e:null}},{key:"tileSize",get:function(){var e,t;return null!==(e=null===(t=this.view.featureTiles)||void 0===t?void 0:t.tileSize)&&void 0!==e?e:256}},{key:"_effectivePointOfInterest",get:function(){var e,t=this.pointOfInterest;return null!=t?t:null===(e=this.view.pointsOfInterest)||void 0===e?void 0:e.focus.location}},{key:"initialize",value:function(){var e=this;this.addHandles((0,g.watch)((function(){return e.view.featureTiles}),(function(t){e.removeHandles(N),t&&e.addHandles(t.addClient(),N)}),g.initial))}},{key:"_filterTiles",value:function(e){return null==e?[]:e.filter((function(e){var t=e.measures;if(t.visibility===R.E.VISIBLE_ON_SURFACE){var n=t.screenRect;return Math.abs(n[3]-n[1])>j}return!1}))}}]),n}(d.default);function F(e){var t=(0,T.Z)(e.lij,3),n=t[0],i=t[1],r=t[2],o=e.extent;return new Z.f("".concat(n,"/").concat(i,"/").concat(r),n,i,r,o)}(0,c._)([(0,y.Cb)({readOnly:!0})],P.prototype,"tiles",null),(0,c._)([(0,y.Cb)({readOnly:!0})],P.prototype,"tilesCoveringView",null),(0,c._)([(0,y.Cb)({readOnly:!0})],P.prototype,"tileInfo",null),(0,c._)([(0,y.Cb)({readOnly:!0})],P.prototype,"tileSize",null),(0,c._)([(0,y.Cb)({constructOnly:!0})],P.prototype,"view",void 0),(0,c._)([(0,y.Cb)()],P.prototype,"pointOfInterest",void 0),(0,c._)([(0,y.Cb)()],P.prototype,"_effectivePointOfInterest",null),P=(0,c._)([(0,_.j)("esri.views.3d.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTiles3D")],P);var j=50,N="feature-tiles",z=n(64674),W=n(52824),L=n(80885),A=n(65156),U=function(e){(0,l.Z)(n,e);var t=(0,u.Z)(n);function n(e){return(0,a.Z)(this,n),t.call(this,e)}return(0,s.Z)(n,[{key:"initialize",value:function(){var e=this,t=setInterval((function(){return e._fetchDebugInfo()}),2e3);this.addHandles((0,v.kB)((function(){return clearInterval(t)})))}},{key:"getTiles",value:function(){var e=this;if(!this._debugInfo)return[];var t=new Map,n=new Map;this._debugInfo.storedTiles.forEach((function(e){t.set(e.data.id,e.featureCount)})),this._debugInfo.pendingTiles.forEach((function(e){t.set(e.data.id,e.featureCount),n.set(e.data.id,e.state)}));var i=function(e){var i,r=n.get(e),o=null!==(i=t.get(e))&&void 0!==i?i:"?";return r?"".concat(r,":").concat(o,"\n").concat(e):"store:".concat(o,"\n").concat(e)},r=new Map;return this._debugInfo.storedTiles.forEach((function(e){r.set(e.data.id,e.data)})),this._debugInfo.pendingTiles.forEach((function(e){r.set(e.data.id,e.data)})),Array.from(r.values()).map((function(t){return{lij:[t.level,t.row,t.col],geometry:L.Z.fromExtent((0,A.HH)(t.extent,e.view.spatialReference)),label:i(t.id)}}))}},{key:"_fetchDebugInfo",value:function(){var e=this;this.handle.getDebugInfo(null).then((function(t){e._debugInfo=t,e.update()}))}}]),n}(n(87287).q);(0,c._)([(0,y.Cb)({constructOnly:!0})],U.prototype,"handle",void 0),U=(0,c._)([(0,_.j)("esri.views.interactive.snapping.featureSources.WorkerTileTreeDebugger")],U);var V=n(93433),D=n(63780),G=n(92026),q=n(46798),J=n(27823),B=n(55946),X=function(e){(0,l.Z)(n,e);var t=(0,u.Z)(n);function n(e){var o;return(0,a.Z)(this,n),(o=t.call(this,e))._updatingHandles=new b.R,o._suspendController=null,o.schedule=null,o.hasZ=!1,o.elevationAlignPointsInFeatures=function(){var e=(0,r.Z)((0,i.Z)().mark((function e(t){var n,r,o,a,s,l,u;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],r=(0,k.Z)(t.pointsInFeatures);try{for(r.s();!(o=r.n()).done;){a=o.value.points,s=(0,k.Z)(a);try{for(s.s();!(l=s.n()).done;)u=l.value.z,n.push(u)}catch(i){s.e(i)}finally{s.f()}}}catch(i){r.e(i)}finally{r.f()}return e.abrupt("return",{elevations:n,drapedObjectIds:new Set,failedObjectIds:new Set});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o.queryForSymbologySnapping=(0,r.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{candidates:[],sourceCandidateIndices:[]});case 1:case"end":return e.stop()}}),e)}))),o.availability=0,o._workerHandleUpdating=!0,o._editId=0,o.updateOutFields=(0,h.Ds)(function(){var e=(0,r.Z)((0,i.Z)().mark((function e(t,n){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o._updatingHandles.addPromise(o._workerHandle.invokeMethod("updateOutFields",(0,V.Z)(t),n));case 2:o._updatingHandles.addPromise(o._workerHandle.invokeMethod("whenNotUpdating",{},n));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),o}return(0,s.Z)(n,[{key:"updating",get:function(){return this._updatingHandles.updating||this._workerHandleUpdating}},{key:"destroy",value:function(){this._suspendController=(0,G.IM)(this._suspendController),this._workerHandle.destroy(),this._updatingHandles.destroy()}},{key:"initialize",value:function(){var e=this;this._workerHandle=new Q(this.schedule,{alignElevation:function(){var t=(0,r.Z)((0,i.Z)().mark((function t(n,r){var o;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=r.signal,t.next=3,e.elevationAlignPointsInFeatures(n.query,o);case 3:return t.t0=t.sent,t.abrupt("return",{result:t.t0});case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),getSymbologyCandidates:function(){var t=(0,r.Z)((0,i.Z)().mark((function t(n,r){var o;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=r.signal,t.next=3,e.queryForSymbologySnapping(n,o);case 3:return t.t0=t.sent,t.abrupt("return",{result:t.t0});case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}),this.addHandles([this._workerHandle.on("notify-updating",(function(t){var n=t.updating;return e._workerHandleUpdating=n})),this._workerHandle.on("notify-availability",(function(t){var n=t.availability;return e._set("availability",n)}))])}},{key:"setup",value:function(){var e=(0,r.Z)((0,i.Z)().mark((function e(t,n){var r,o,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(o=K(t.layer))){e.next=3;break}return e.abrupt("return");case 3:return a={configuration:Y(t.configuration),serviceInfo:o,spatialReference:t.spatialReference.toJSON(),hasZ:this.hasZ,elevationInfo:null===(r=t.layer.elevationInfo)||void 0===r?void 0:r.toJSON()},e.next=6,this._updatingHandles.addPromise(this._workerHandle.invokeMethod("setup",a,n));case 6:this._updatingHandles.addPromise(this._workerHandle.invokeMethod("whenNotUpdating",{},n));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"configure",value:function(){var e=(0,r.Z)((0,i.Z)().mark((function e(t,n){var r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Y(t),e.next=3,this._updatingHandles.addPromise(this._workerHandle.invokeMethod("configure",r,n));case 3:this._updatingHandles.addPromise(this._workerHandle.invokeMethod("whenNotUpdating",{},n));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"refresh",value:function(){var e=(0,r.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._updatingHandles.addPromise(this._workerHandle.invokeMethod("refresh",{},t));case 2:this._updatingHandles.addPromise(this._workerHandle.invokeMethod("whenNotUpdating",{},t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchCandidates",value:function(){var e=(0,r.Z)((0,i.Z)().mark((function e(t,n){var r,a,s,l;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.point,a=t.filter,s=t.coordinateHelper,l=(0,o.Z)((0,o.Z)({},t),{},{point:(0,B.T)(r[0],r[1],r[2],s.spatialReference.toJSON()),filter:null===a||void 0===a?void 0:a.toJSON()}),e.abrupt("return",this._workerHandle.invoke(l,n));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTiles",value:function(){var e=(0,r.Z)((0,i.Z)().mark((function e(t,n){var r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={tiles:t.tiles,tileInfo:null!=t.tileInfo?t.tileInfo.toJSON():null,tileSize:t.tileSize},e.next=3,this._updatingHandles.addPromise(this._workerHandle.invokeMethod("updateTiles",r,n));case 3:this._updatingHandles.addPromise(this._workerHandle.invokeMethod("whenNotUpdating",{},n));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"applyEdits",value:function(){var e=(0,r.Z)((0,i.Z)().mark((function e(t,n){var r,o,a,s,l,u,c,d,f,v;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=this._editId++,d={id:c},e.next=3,this._updatingHandles.addPromise(this._workerHandle.invokeMethod("beginApplyEdits",d,n));case 3:return e.next=5,this._updatingHandles.addPromise((0,h.Hl)(t.result,n));case 5:return f=e.sent,v={id:c,edits:{addedFeatures:null!==(r=null===(o=f.addedFeatures)||void 0===o?void 0:o.map((function(e){return e.objectId})).filter(D.pC))&&void 0!==r?r:[],deletedFeatures:null!==(a=null===(s=f.deletedFeatures)||void 0===s?void 0:s.map((function(e){return{objectId:e.objectId,globalId:e.globalId}})))&&void 0!==a?a:[],updatedFeatures:null!==(l=null===(u=f.updatedFeatures)||void 0===u?void 0:u.map((function(e){return e.objectId})).filter(D.pC))&&void 0!==l?l:[]}},e.next=9,this._updatingHandles.addPromise(this._workerHandle.invokeMethod("endApplyEdits",v,n));case 9:this._updatingHandles.addPromise(this._workerHandle.invokeMethod("whenNotUpdating",{},n));case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getDebugInfo",value:function(e){return this._workerHandle.invokeMethod("getDebugInfo",{},e)}},{key:"notifyElevationSourceChange",value:function(){var e=(0,r.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._workerHandle.invokeMethod("notifyElevationSourceChange",{});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifySymbologyChange",value:function(){var e=(0,r.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._workerHandle.invokeMethod("notifySymbologyChange",{});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setSymbologySnappingSupported",value:function(){var e=(0,r.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._workerHandle.invokeMethod("setSymbologySnappingSupported",t);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setSuspended",value:function(){var e=(0,r.Z)((0,i.Z)().mark((function e(t){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null!==(n=this._suspendController)&&void 0!==n&&n.abort(),this._suspendController=new AbortController,e.next=4,this._workerHandle.invokeMethod("setSuspended",t,this._suspendController.signal);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(d.default);function Y(e){return{filter:null!=e.filter?e.filter.toJSON():null,customParameters:e.customParameters,viewType:e.viewType}}function K(e){var t,n,i;return"multipatch"===e.geometryType||"mesh"===e.geometryType?null:{url:null!==(t=null===(n=e.parsedUrl)||void 0===n?void 0:n.path)&&void 0!==t?t:"",fieldsIndex:e.fieldsIndex.toJSON(),geometryType:J.M.toJSON(e.geometryType),capabilities:e.capabilities,objectIdField:e.objectIdField,globalIdField:e.globalIdField,spatialReference:e.spatialReference.toJSON(),timeInfo:null===(i=e.timeInfo)||void 0===i?void 0:i.toJSON()}}(0,c._)([(0,y.Cb)({constructOnly:!0})],X.prototype,"schedule",void 0),(0,c._)([(0,y.Cb)({constructOnly:!0})],X.prototype,"hasZ",void 0),(0,c._)([(0,y.Cb)({constructOnly:!0})],X.prototype,"elevationAlignPointsInFeatures",void 0),(0,c._)([(0,y.Cb)({constructOnly:!0})],X.prototype,"queryForSymbologySnapping",void 0),(0,c._)([(0,y.Cb)({readOnly:!0})],X.prototype,"updating",null),(0,c._)([(0,y.Cb)({readOnly:!0})],X.prototype,"availability",void 0),(0,c._)([(0,y.Cb)()],X.prototype,"_workerHandleUpdating",void 0),X=(0,c._)([(0,_.j)("esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceSnappingSourceWorkerHandle")],X);var Q=function(e){(0,l.Z)(n,e);var t=(0,u.Z)(n);function n(e,i){return(0,a.Z)(this,n),t.call(this,"FeatureServiceSnappingSourceWorker","fetchCandidates",{},e,{strategy:"dedicated",client:i})}return(0,s.Z)(n)}(q.q),$=n(848),ee=n(59068),te=n(22824),ne=function(e){(0,l.Z)(n,e);var t=(0,u.Z)(n);function n(e){var i;return(0,a.Z)(this,n),(i=t.call(this,e)).pointOfInterest=null,i}return(0,s.Z)(n,[{key:"tiles",get:function(){return[new Z.f("0/0/0",0,0,0,(0,A.al)(-1e8,-1e8,1e8,1e8))]}},{key:"tileInfo",get:function(){return new te.Z({origin:new $.Z({x:-1e8,y:1e8,spatialReference:this.layer.spatialReference}),size:[512,512],lods:[new ee.Z({level:0,scale:1,resolution:390625})],spatialReference:this.layer.spatialReference})}},{key:"tileSize",get:function(){return this.tileInfo.size[0]}}]),n}(d.default);(0,c._)([(0,y.Cb)({readOnly:!0})],ne.prototype,"tiles",null),(0,c._)([(0,y.Cb)({readOnly:!0})],ne.prototype,"tileInfo",null),(0,c._)([(0,y.Cb)({readOnly:!0})],ne.prototype,"tileSize",null),(0,c._)([(0,y.Cb)({constructOnly:!0})],ne.prototype,"layer",void 0),(0,c._)([(0,y.Cb)()],ne.prototype,"pointOfInterest",void 0),ne=(0,c._)([(0,_.j)("esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTilesSimple")],ne);var ie=n(32609),re=function(e){(0,l.Z)(c,e);var t=(0,u.Z)(c);function c(e){var n;return(0,a.Z)(this,c),(n=t.call(this,e))._updatingHandles=new b.R,n._workerHandle=null,n._debug=null,n._memoizedMakeGetGroundElevation=(0,p.H)(W.g),n}return(0,s.Z)(c,[{key:"_updateTilesParameters",get:function(){return{tiles:this._tilesOfInterest.tiles,tileInfo:this._tilesOfInterest.tileInfo,tileSize:this._tilesOfInterest.tileSize}}},{key:"_layerView",get:function(){var e,t=this;return null===(e=this.view)||void 0===e?void 0:e.allLayerViews.find((function(e){return e.layer===t._layer}))}},{key:"_isSuspended",get:function(){var e;return!(!(0,w.e9)(this._layer)||this.layerSource.sublayerSources.some((function(e){return e.enabled&&e.layer.visible})))||!!this.view&&(!1!==(null===(e=this._layerView)||void 0===e?void 0:e.suspended)||!this.layerSource.enabled)}},{key:"updating",get:function(){var e;return(null===(e=this._workerHandle)||void 0===e?void 0:e.updating)||this._updatingHandles.updating}},{key:"_outFields",get:function(){var e,t,n=this.view,i=this._layerView,r=this.layerSource.layer,o=r.fieldsIndex,a=r.timeInfo,s=r.floorInfo,l=r.subtypeField,u=i&&"filter"in i?i.filter:null,c=null!==u&&void 0!==u&&u.where&&"1=1"!==u.where?this._getOrLoadWhereFields(u.where,o):[];if(null!==u&&void 0!==u&&u.timeExtent&&a){var d,f,v,p,h=a.startField,g=a.endField,y=null!==(d=null===(f=o.get(h))||void 0===f?void 0:f.name)&&void 0!==d?d:h,_=null!==(v=null===(p=o.get(g))||void 0===p?void 0:p.name)&&void 0!==v?v:g;y&&c.push(y),_&&c.push(_)}if(null!==n&&void 0!==n&&n.map&&(0,z.n0)(n.map)&&null!==(e=n.map.utilityNetworks)&&void 0!==e&&e.find((function(e){return e.isUtilityLayer(r)}))){var b,w,m=null===(b=r.fieldsIndex.get("assetGroup"))||void 0===b?void 0:b.name,k=null===(w=r.fieldsIndex.get("assetType"))||void 0===w?void 0:w.name;m&&k&&(c.push(m),c.push(k))}if(r&&null!==s&&void 0!==s&&s.floorField&&null!==n&&void 0!==n&&null!==(t=n.floors)&&void 0!==t&&t.length){var Z,S,I=null!==(Z=null===(S=o.get(s.floorField))||void 0===S?void 0:S.name)&&void 0!==Z?Z:s.floorField;I&&c.push(I)}if(l){var C,O,M=null!==(C=null===(O=o.get(l))||void 0===O?void 0:O.name)&&void 0!==C?C:l;M&&c.push(M)}return new Set(c)}},{key:"configuration",get:function(){var e=this.view,t=this._layer,n=t.apiKey,i=t.customParameters,r=null!=e?e.type:"2d";return{filter:this._layer.createQuery(),customParameters:n?(0,o.Z)((0,o.Z)({},i),{},{token:n}):i,viewType:r}}},{key:"availability",get:function(){var e,t;return null!==(e=null===(t=this._workerHandle)||void 0===t?void 0:t.availability)&&void 0!==e?e:0}},{key:"_layer",get:function(){return this.layerSource.layer}},{key:"initialize",value:function(){var e,t=this,n=this.view;if(null==n||n.destroyed)this._tilesOfInterest=new ne({layer:this._layer}),e=this._workerHandle=new X;else switch(n.type){case"2d":this._tilesOfInterest=new H({view:n,layer:this._layer}),e=this._workerHandle=new X;break;case"3d":var o,a=n.resourceController,s=this._layer;this._tilesOfInterest=new P({view:n}),e=this._workerHandle=new X({schedule:function(e){return a.immediate.schedule(e)},hasZ:this._layer.hasZ&&(null===(o=this._layer.returnZ)||void 0===o||o),elevationAlignPointsInFeatures:function(){var e=(0,r.Z)((0,i.Z)().mark((function e(t,r){var o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.whenLayerView(s);case 2:return o=e.sent,e.abrupt("return",((0,h.k_)(r),o.elevationAlignPointsInFeatures(t,r)));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),queryForSymbologySnapping:function(){var e=(0,r.Z)((0,i.Z)().mark((function e(t,r){var o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.whenLayerView(s);case 2:return o=e.sent,e.abrupt("return",((0,h.k_)(r),o.queryForSymbologySnapping(t,r)));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}),this.addHandles([n.elevationProvider.on("elevation-change",(function(t){var n=t.context,i=s.elevationInfo;(0,m.W_)(n,i)&&(0,h.R8)(e.notifyElevationSourceChange())})),(0,g.watch)((function(){return s.elevationInfo}),(function(){return(0,h.R8)(e.notifyElevationSourceChange())}),g.initial),(0,g.watch)((function(){var e,n;return null===(e=t._layerView)||void 0===e||null===(n=e.layer)||void 0===n?void 0:n.renderer}),(function(){return(0,h.R8)(e.notifySymbologyChange())}),g.initial),(0,g.watch)((function(){var e,n;return null!==(e=null===(n=t._layerView)||void 0===n?void 0:n.symbologySnappingSupported)&&void 0!==e&&e}),(function(t){return(0,h.R8)(e.setSymbologySnappingSupported(t))}),g.initial),(0,g.on)((function(){var e;return null===(e=t._layerView)||void 0===e?void 0:e.layer}),["edits","apply-edits","graphic-update"],(function(){return e.notifySymbologyChange()}))])}this.addHandles([(0,v.ed)(e)]),(0,h.R8)(e.setup({layer:this._layer,spatialReference:this.spatialReference,configuration:this.configuration},null)),this._updatingHandles.add((function(){return t._updateTilesParameters}),(function(){return(0,h.R8)(e.updateTiles(t._updateTilesParameters,null))}),g.initial),this.addHandles([(0,g.watch)((function(){return t.configuration}),(function(t){return(0,h.R8)(e.configure(t,null))}),g.sync),(0,g.watch)((function(){return t._outFields}),(function(t){return(0,h.R8)(e.updateOutFields(t))}),g.initial),(0,g.watch)((function(){return t._isSuspended}),(function(t){return(0,h.R8)(e.setSuspended(t))}),g.syncAndInitial)]),null!=n&&this.addHandles((0,g.watch)((function(){return ie.Z.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES}),(function(i){i&&!t._debug?(t._debug=new U({view:n,handle:e}),t.addHandles((0,v.ed)(t._debug),"debug")):!i&&t._debug&&t.removeHandles("debug")}),g.initial)),this.addHandles(this.layerSource.layer.on("apply-edits",(function(t){(0,h.R8)(e.applyEdits(t,null))})))}},{key:"destroy",value:function(){this._updatingHandles.destroy()}},{key:"refresh",value:function(){var e;null===(e=this._workerHandle)||void 0===e||e.refresh(null)}},{key:"fetchCandidates",value:function(){var e=(0,r.Z)((0,i.Z)().mark((function e(t,n){var r,a,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.coordinateHelper,a=t.point,this._tilesOfInterest.pointOfInterest=r.arrayToPoint(a),s=this._memoizedMakeGetGroundElevation(this.view,r.spatialReference),e.next=5,this._workerHandle.fetchCandidates((0,o.Z)({},t),n);case 5:return e.abrupt("return",e.sent.candidates.map((function(e){return(0,W.X)(e,s)})));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getDebugInfo",value:function(e){return this._workerHandle.getDebugInfo(e)}},{key:"_getOrLoadWhereFields",value:function(e,t){var o=this,a=this._whereModule;if(!this._loadWhereModuleTask&&!a){var s=(0,f.vr)((0,r.Z)((0,i.Z)().mark((function e(){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n.e(45026),n.e(54054)]).then(n.bind(n,54054));case 2:return t=e.sent,e.abrupt("return",(o._whereModule=t.WhereClause,o._whereModule));case 4:case"end":return e.stop()}}),e)}))));return this._loadWhereModuleTask=s,this._updatingHandles.addPromise(s.promise),[]}if(!a)return[];try{return a.create(e,t).fieldNames}catch(l){return[]}}}]),c}(d.default);(0,c._)([(0,y.Cb)({constructOnly:!0})],re.prototype,"spatialReference",void 0),(0,c._)([(0,y.Cb)({constructOnly:!0})],re.prototype,"layerSource",void 0),(0,c._)([(0,y.Cb)({constructOnly:!0})],re.prototype,"view",void 0),(0,c._)([(0,y.Cb)()],re.prototype,"_tilesOfInterest",void 0),(0,c._)([(0,y.Cb)({readOnly:!0})],re.prototype,"_updateTilesParameters",null),(0,c._)([(0,y.Cb)()],re.prototype,"_layerView",null),(0,c._)([(0,y.Cb)()],re.prototype,"_isSuspended",null),(0,c._)([(0,y.Cb)({readOnly:!0})],re.prototype,"updating",null),(0,c._)([(0,y.Cb)()],re.prototype,"_outFields",null),(0,c._)([(0,y.Cb)({readOnly:!0})],re.prototype,"configuration",null),(0,c._)([(0,y.Cb)({readOnly:!0})],re.prototype,"availability",null),(0,c._)([(0,y.Cb)()],re.prototype,"_loadWhereModuleTask",void 0),(0,c._)([(0,y.Cb)()],re.prototype,"_whereModule",void 0),re=(0,c._)([(0,_.j)("esri.views.interactive.snapping.featureSources.FeatureServiceSnappingSource")],re)},52824:function(e,t,n){n.d(t,{X:function(){return l},g:function(){return u}});var i=n(38054),r=n(97760),o=n(95905),a=n(36700);function s(e){var t=e.x,n=e.y,r=e.z;return(0,i.al)(t,n,null!==r&&void 0!==r?r:0)}function l(e,t){switch(e.type){case"edge":return e.draped?new r.k({edgeStart:s(e.start),edgeEnd:s(e.end),targetPoint:(0,i.s)(s(e.target)),objectId:e.objectId,getGroundElevation:t}):new o.L({edgeStart:s(e.start),edgeEnd:s(e.end),targetPoint:(0,i.s)(s(e.target)),objectId:e.objectId,isDraped:!1});case"vertex":return new a.x({targetPoint:(0,i.s)(s(e.target)),objectId:e.objectId,isDraped:!1})}}function u(e,t){return null!=e&&"3d"===e.type?function(n,i){return e.elevationProvider.getElevation(n,i,0,t,"ground")}:function(){return null}}},61309:function(e,t,n){n.d(t,{n:function(){return l}});var i=n(15671),r=n(43144),o=n(60136),a=n(29388),s=n(32035),l=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(e,r,o){var a;return(0,i.Z)(this,n),(a=t.call(this,r,o)).point=e,a}return(0,r.Z)(n,[{key:"equals",value:function(e){return e instanceof n&&(0,s.e)(this.point,e.point)}}]),n}(n(55054).r)},87287:function(e,t,n){n.d(t,{q:function(){return Z}});var i=n(15671),r=n(43144),o=n(60136),a=n(29388),s=n(27366),l=n(51995),u=n(52639),c=(n(51508),n(7138)),d=n(80987),f=n(16889),v=n(49861),p=(n(93169),n(32718),n(84936),n(69912)),h=n(62554),g=n(61459),y=n(58009),_=n(87037),b=n(61054),w=n(98351),m=n(21897),k=[[0,179,255],[117,62,128],[0,104,255],[215,189,166],[32,0,193],[98,162,206],[102,112,129],[52,125,0],[142,118,246],[138,83,0],[92,122,255],[122,55,83],[0,142,255],[81,40,179],[0,200,244],[13,24,127],[0,170,147],[19,58,241],[22,44,35]],Z=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(e){var r;return(0,i.Z)(this,n),(r=t.call(this,e)).updating=!1,r.enablePolygons=!0,r.enableLabels=!0,r._polygons=new Map,r._labels=new Map,r._enabled=!0,r}return(0,r.Z)(n,[{key:"initialize",value:function(){this._symbols=k.map((function(e){return new g.default({color:[e[0],e[1],e[2],.6],outline:{color:"black",width:1}})})),this.update()}},{key:"destroy",value:function(){this._enabled=!1,this.clear()}},{key:"enabled",get:function(){return this._enabled},set:function(e){this._enabled!==e&&(this._enabled=e,this.update())}},{key:"update",value:function(){var e=this;if(this._enabled){var t=this.getTiles(),n=new Array,i=new Set((this._labels.size,this._labels.keys()));t.forEach((function(r,o){var a=r.lij.toString();i.delete(a);var s=r.lij[0],c=r.geometry;if(e.enablePolygons&&!e._polygons.has(a)){var v=new u.Z({geometry:c,symbol:e._symbols[s%e._symbols.length]});e._polygons.set(a,v),n.push(v)}if(e.enableLabels){var p=function(e){if(null!=e.label)return e.label;var t=e.lij.toString();return null!=e.loadPriority&&(t+=" (".concat(e.loadPriority,")")),t}(r),g=o/(t.length-1),k=(0,f.t7)(0,200,g),Z=(0,f.t7)(20,6,g)/.75,S=null!=r.loadPriority&&r.loadPriority>=t.length,I=new l.Z([k,S?0:k,S?0:k]),C="3d"===e.view.type?function(){return new h.Z({verticalOffset:new b.Z({screenLength:40/.75}),callout:new w.Z({color:new l.Z("white"),border:new m.Z({color:new l.Z("black")})}),symbolLayers:new d.Z([new _.Z({text:p,halo:{color:"white",size:1/.75},material:{color:I},size:Z})])})}:function(){return new y.Z({text:p,haloColor:"white",haloSize:1/.75,color:I,size:Z})},O=e._labels.get(a);if(O){var M=C();null!=O.symbol&&JSON.stringify(M)===JSON.stringify(O.symbol)||(O.symbol=M)}else{var E=new u.Z({geometry:c.extent.center,symbol:C()});e._labels.set(a,E),n.push(E)}}}));var r=new Array;i.forEach((function(t){var n=e._polygons.get(t);null!=n&&(r.push(n),e._polygons.delete(t));var i=e._labels.get(t);null!=i&&(r.push(i),e._labels.delete(t))})),this.view.graphics.removeMany(r),this.view.graphics.addMany(n)}else this.clear()}},{key:"clear",value:function(){this.view.graphics.removeMany(Array.from(this._polygons.values())),this.view.graphics.removeMany(Array.from(this._labels.values())),this._polygons.clear(),this._labels.clear()}}]),n}(c.default);(0,s._)([(0,v.Cb)({constructOnly:!0})],Z.prototype,"view",void 0),(0,s._)([(0,v.Cb)({readOnly:!0})],Z.prototype,"updating",void 0),(0,s._)([(0,v.Cb)()],Z.prototype,"enabled",null),Z=(0,s._)([(0,p.j)("esri.views.support.TileTreeDebugger")],Z)},32609:function(e,t,n){n.d(t,{Z:function(){return f}});var i=n(43144),r=n(15671),o=n(60136),a=n(29388),s=n(27366),l=n(7138),u=n(49861),c=(n(93169),n(32718),n(84936),n(69912)),d=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(){var e;return(0,r.Z)(this,n),(e=t.apply(this,arguments)).SCHEDULER_LOG_SLOW_TASKS=!1,e.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1,e}return(0,i.Z)(n)}(l.default);(0,s._)([(0,u.Cb)()],d.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0),(0,s._)([(0,u.Cb)()],d.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0);var f=new(d=(0,s._)([(0,c.j)("esri.views.support.debugFlags")],d))}}]);
//# sourceMappingURL=5532.bbdd262b.chunk.js.map