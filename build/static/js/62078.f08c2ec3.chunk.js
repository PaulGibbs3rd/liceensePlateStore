"use strict";(self.webpackChunkreact_training=self.webpackChunkreact_training||[]).push([[62078],{62078:function(e,r,t){t.r(r),t.d(r,{addOrUpdateResources:function(){return f},contentToBlob:function(){return y},fetchResources:function(){return l},getSiblingOfSameType:function(){return g},getSiblingOfSameTypeI:function(){return w},removeAllResources:function(){return m},removeResource:function(){return v},splitPrefixFileNameAndExtension:function(){return Z}});var n=t(37762),a=t(74165),s=t(29439),o=t(15861),u=t(76200),c=t(10064),i=t(35995);function l(e){return p.apply(this,arguments)}function p(){return p=(0,o.Z)((0,a.Z)().mark((function e(r){var t,n,s,o,u,c,l,p,f,d,v,h,m=arguments;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.length>1&&void 0!==m[1]?m[1]:{},n=m.length>2?m[2]:void 0,e.next=4,r.load(n);case 4:return s=(0,i.v_)(r.itemUrl,"resources"),o=t.start,u=void 0===o?1:o,c=t.num,l=void 0===c?10:c,p=t.sortOrder,f=void 0===p?"asc":p,d=t.sortField,v={query:{start:u,num:l,sortOrder:f,sortField:void 0===d?"resource":d,token:r.apiKey},signal:null===n||void 0===n?void 0:n.signal},e.next=16,r.portal.request(s,v);case 16:return h=e.sent,e.abrupt("return",{total:h.total,nextStart:h.nextStart,resources:h.resources.map((function(e){var t=e.created,n=e.size,a=e.resource;return{created:new Date(t),size:n,resource:r.resourceFromPath(a)}}))});case 18:case"end":return e.stop()}}),e)}))),p.apply(this,arguments)}function f(e,r,t,n){return d.apply(this,arguments)}function d(){return d=(0,o.Z)((0,a.Z)().mark((function e(r,t,o,u){var l,p,f,d,v,h,m,x,Z,y,k,g,w,R,P,I,_,q,F,S,O,U,j,T,A,N,z,B,C,D,M;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l=new Map,p=(0,n.Z)(t),e.prev=2,p.s();case 4:if((f=p.n()).done){e.next=13;break}if(d=f.value,v=d.resource,h=d.content,m=d.compress,x=d.access,v.hasPath()){e.next=8;break}throw new c.Z("portal-item-resource-".concat(o,":invalid-path"),"Resource does not have a valid path");case 8:Z=b(v.path),y=(0,s.Z)(Z,2),k=y[0],g=y[1],w="".concat(k,"/").concat(null!==m&&void 0!==m?m:"","/").concat(null!==x&&void 0!==x?x:""),l.has(w)||l.set(w,{prefix:k,compress:m,access:x,files:[]}),l.get(w).files.push({fileName:g,content:h});case 11:e.next=4;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(2),p.e(e.t0);case 18:return e.prev=18,p.f(),e.finish(18);case 21:return e.next=23,r.load(u);case 23:R=(0,i.v_)(r.userItemUrl,"add"===o?"addResources":"updateResources"),P=(0,n.Z)(l.values()),e.prev=25,P.s();case 27:if((I=P.n()).done){e.next=45;break}_=I.value,q=_.prefix,F=_.compress,S=_.access,O=_.files,U=25,j=0;case 31:if(!(j<O.length)){e.next=43;break}T=O.slice(j,j+U),A=new FormData,q&&"."!==q&&A.append("resourcesPrefix",q),F&&A.append("compress","true"),S&&A.append("access",S),N=0,z=(0,n.Z)(T);try{for(z.s();!(B=z.n()).done;)C=B.value,D=C.fileName,M=C.content,A.append("file"+ ++N,M,D)}catch(a){z.e(a)}finally{z.f()}return A.append("f","json"),e.next=40,r.portal.request(R,{method:"post",body:A,signal:null===u||void 0===u?void 0:u.signal});case 40:j+=U,e.next=31;break;case 43:e.next=27;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(25),P.e(e.t1);case 50:return e.prev=50,P.f(),e.finish(50);case 53:case"end":return e.stop()}}),e,null,[[2,15,18,21],[25,47,50,53]])}))),d.apply(this,arguments)}function v(e,r,t){return h.apply(this,arguments)}function h(){return h=(0,o.Z)((0,a.Z)().mark((function e(r,t,n){var s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.hasPath()){e.next=2;break}throw new c.Z("portal-item-resources-remove:invalid-path","Resource does not have a valid path");case 2:return e.next=4,r.load(n);case 4:return s=(0,i.v_)(r.userItemUrl,"removeResources"),e.next=7,r.portal.request(s,{method:"post",query:{resource:t.path},signal:null===n||void 0===n?void 0:n.signal});case 7:t.portalItem=null;case 8:case"end":return e.stop()}}),e)}))),h.apply(this,arguments)}function m(e,r){return x.apply(this,arguments)}function x(){return(x=(0,o.Z)((0,a.Z)().mark((function e(r,t){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.load(t);case 2:return n=(0,i.v_)(r.userItemUrl,"removeResources"),e.abrupt("return",r.portal.request(n,{method:"post",query:{deleteAll:!0},signal:null===t||void 0===t?void 0:t.signal}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(e){var r=e.lastIndexOf("/");return-1===r?[".",e]:[e.slice(0,r),e.slice(r+1)]}function Z(e){var r=function(e){var r=(0,i.Ml)(e);return null==r?[e,""]:[e.slice(0,e.length-r.length-1),".".concat(r)]}(e),t=(0,s.Z)(r,2),n=t[0],a=t[1],o=b(n),u=(0,s.Z)(o,2);return[u[0],u[1],a]}function y(e){return k.apply(this,arguments)}function k(){return(k=(0,o.Z)((0,a.Z)().mark((function e(r){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("blob"!==r.type){e.next=2;break}return e.abrupt("return",r.blob);case 2:if("json"!==r.type){e.next=4;break}return e.abrupt("return",new Blob([r.jsonString],{type:"application/json"}));case 4:return e.next=6,(0,u.Z)(r.url,{responseType:"blob"});case 6:return e.abrupt("return",e.sent.data);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e,r){if(!e.hasPath())return null;var t=Z(e.path),n=(0,s.Z)(t,3),a=n[0],o=n[2];return e.portalItem.resourceFromPath((0,i.v_)(a,r+o))}function w(e,r){if(!e.hasPath())return null;var t=Z(e.path),n=(0,s.Z)(t,3),a=n[0],o=n[2];return e.portalItem.resourceFromPath((0,i.v_)(a,r+o))}}}]);
//# sourceMappingURL=62078.f08c2ec3.chunk.js.map