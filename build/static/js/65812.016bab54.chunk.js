"use strict";(self.webpackChunkreact_training=self.webpackChunkreact_training||[]).push([[65812,14254,53226],{47898:function(e,t,r){r.d(t,{Fp:function(){return d},GJ:function(){return s},M1:function(){return a},MQ:function(){return f},Ww:function(){return g},bA:function(){return h},hw:function(){return p},mE:function(){return c},ne:function(){return o},nn:function(){return u},qF:function(){return y},yG:function(){return l},yP:function(){return v}});var n=r(1413),i=r(68860);function a(e){return{value:e}}function l(e,t){return{type:(0,i.UF)(t),value:e,unit:t}}function o(e,t){return{type:(0,i.UF)(t),value:e,unit:t}}function s(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"arithmetic";return{type:(0,i.UF)(t),value:e,unit:t,rotationType:r}}function u(e,t){var r=c(e,t);return"angle"===e.type?s(r,t,e.rotationType):function(e,t){return{type:(0,i.UF)(t),value:e,unit:t}}(r,t)}function c(e,t){return(0,i.En)(e.value,e.unit,t)}function d(e,t){return null==e?t:null==t||e.value>(0,i.En)(t.value,t.unit,e.unit)?e:t}function h(e,t){return null==e?null:(0,n.Z)((0,n.Z)({},e),{},{value:e.value*t})}function p(e,t,r){if(t===r)return e;switch(r){case"arithmetic":case"geographic":return 90-e}}var v=l(0,"meters"),f=o(0,"square-meters"),g=(s(0,"radians"),s(0,"degrees")),y=s(0,"degrees","geographic")},46634:function(e,t,r){r.d(t,{R:function(){return v}});var n=r(15671),i=r(43144),a=r(60136),l=r(29388),o=r(27366),s=r(7138),u=r(42537),c=r(94172),d=r(99346),h=r(49861),p=r(69912),v=function(e){(0,a.Z)(r,e);var t=(0,l.Z)(r);function r(){var e;return(0,n.Z)(this,r),(e=t.apply(this,arguments)).updating=!1,e._handleId=0,e._scheduleHandleId=0,e._pendingPromises=new Set,e}return(0,i.Z)(r,[{key:"destroy",value:function(){this.removeAll()}},{key:"add",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._installWatch(e,t,r,c.watch)}},{key:"addWhen",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._installWatch(e,t,r,c.when)}},{key:"addOnCollectionChange",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.initial,a=void 0!==i&&i,l=n.final,o=void 0!==l&&l,s=++this._handleId;return this.addHandles([(0,c.on)(e,"after-changes",this._createSyncUpdatingCallback(),c.sync),(0,c.on)(e,"change",t,{onListenerAdd:a?function(e){return t({added:e.toArray(),removed:[]})}:void 0,onListenerRemove:o?function(e){return t({added:[],removed:e.toArray()})}:void 0})],s),(0,u.kB)((function(){return r.removeHandles(s)}))}},{key:"addPromise",value:function(e){var t=this;if(null==e)return e;var r=++this._handleId;this.addHandles((0,u.kB)((function(){t._pendingPromises.delete(e)&&(0!==t._pendingPromises.size||t.hasHandles(f)||t._set("updating",!1))})),r),this._pendingPromises.add(e),this._set("updating",!0);var n=function(){return t.removeHandles(r)};return e.then(n,n),e}},{key:"removeAll",value:function(){this._pendingPromises.clear(),this.removeAllHandles(),this._set("updating",!1)}},{key:"_installWatch",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0,a=++this._handleId;n.sync||this._installSyncUpdatingWatch(e,a);var l=i(e,t,n);return this.addHandles(l,a),(0,u.kB)((function(){return r.removeHandles(a)}))}},{key:"_installSyncUpdatingWatch",value:function(e,t){var r=this._createSyncUpdatingCallback(),n=(0,c.watch)(e,r,{sync:!0,equals:function(){return!1}});return this.addHandles(n,t),n}},{key:"_createSyncUpdatingCallback",value:function(){var e=this;return function(){e.removeHandles(f),++e._scheduleHandleId;var t=e._scheduleHandleId;e._get("updating")||e._set("updating",!0),e.addHandles((0,d.Os)((function(){t===e._scheduleHandleId&&(e._set("updating",e._pendingPromises.size>0),e.removeHandles(f))})),f)}}}]),r}(s.default);(0,o._)([(0,h.Cb)({readOnly:!0})],v.prototype,"updating",void 0),v=(0,o._)([(0,p.j)("esri.core.support.UpdatingHandles")],v);var f=-42},68859:function(e,t,r){r.d(t,{K:function(){return s},U:function(){return u}});var n=r(74165),i=r(15861),a=r(12400),l=r(79803),o=r(50628);function s(e,t,r,n){var i,a;if((0,l.canProjectWithoutEngine)(e.spatialReference,r)){var s;d[0]=e.x,d[1]=e.y;var u=e.z;return d[2]=null!==(s=null!==u&&void 0!==u?u:n)&&void 0!==s?s:0,(0,o.projectBuffer)(d,e.spatialReference,0,t,r,0,1)}var c=(0,l.tryProjectWithZConversion)(e,r);return!!c&&(t[0]=null===c||void 0===c?void 0:c.x,t[1]=null===c||void 0===c?void 0:c.y,t[2]=null!==(i=null!==(a=null===c||void 0===c?void 0:c.z)&&void 0!==a?a:n)&&void 0!==i?i:0,!0)}function u(e,t,r,n,i){return c.apply(this,arguments)}function c(){return c=(0,i.Z)((0,n.Z)().mark((function e(t,r,i,a,o){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l.initializeProjection)(t.spatialReference,i,null,o);case 2:return e.abrupt("return",s(t,r,i,a));case 3:case"end":return e.stop()}}),e)}))),c.apply(this,arguments)}var d=(0,a.Ue)()},5986:function(e,t,r){r.d(t,{S:function(){return a}});r(79803);var n=r(78952),i=r(68859);function a(e,t,r,n,a){return!(null==t||null==n||e.length<2)&&(l.x=e[0],l.y=e[1],l.z=e[2],l.spatialReference=t,(0,i.K)(l,r,n,a))}var l=(0,r(55946).T)(0,0,0,n.Z.WGS84)},55946:function(e,t,r){function n(e,t,r,n){return{x:e,y:t,z:r,hasZ:null!=r,hasM:!1,spatialReference:n,type:"point"}}function i(e,t,r,n,i){e.x=t,e.y=r,e.z=n,e.hasZ=null!=n,e.spatialReference=i}r.d(t,{T:function(){return n},y:function(){return i}})},57858:function(e,t,r){r.d(t,{Q:function(){return u},q:function(){return o}});var n=r(74165),i=r(15861),a=r(19545),l=r(76200);function o(e,t,r){return s.apply(this,arguments)}function s(){return s=(0,i.Z)((0,n.Z)().mark((function e(t,r,i){var o,s,u,c,d,h;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===a.id||void 0===a.id?void 0:a.id.findCredential(t.restUrl)){e.next=3;break}return e.abrupt("return",null);case 3:if("loaded"!==t.loadStatus||""!==r||null===(o=t.user)||void 0===o||!o.sourceJSON||!1!==i){e.next=5;break}return e.abrupt("return",t.user.sourceJSON);case 5:if(s={responseType:"json",query:{f:"json"}},i&&(s.query.returnUserLicenseTypeExtensions=!0),""!==r){e.next=15;break}return e.next=9,(0,l.Z)(t.restUrl+"/community/self",s);case 9:if(!(u=e.sent).data){e.next=14;break}if(null===(c=u.data)||void 0===c||!c.username){e.next=14;break}return e.abrupt("return",c);case 14:case 21:return e.abrupt("return",null);case 15:return e.next=17,(0,l.Z)(t.restUrl+"/community/users/"+r,s);case 17:if(!(d=e.sent).data){e.next=21;break}return h=d.data,e.abrupt("return",h.error?null:h);case 22:case"end":return e.stop()}}),e)}))),s.apply(this,arguments)}function u(e,t,r){return c.apply(this,arguments)}function c(){return c=(0,i.Z)((0,n.Z)().mark((function e(t,r,i){var a,l,s;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(t,r,!0);case 2:return s=e.sent,e.abrupt("return",null!==(a=null===s||void 0===s||null===(l=s.userLicenseTypeExtensions)||void 0===l?void 0:l.includes(i))&&void 0!==a&&a);case 4:case"end":return e.stop()}}),e)}))),c.apply(this,arguments)}},25952:function(e,t,r){r.d(t,{Z:function(){return v}});var n=r(43144),i=r(15671),a=r(60136),l=r(29388),o=r(27366),s=r(43404),u=r(46784),c=r(49861),d=(r(93169),r(32718),r(84936),r(69912)),h=new s.X({startingPoint:"starting-point",barrier:"barrier"}),p=function(e){(0,a.Z)(r,e);var t=(0,l.Z)(r);function r(e){var n;return(0,i.Z)(this,r),(n=t.call(this,e)).globalId=null,n.isFilterBarrier=!1,n.percentAlong=null,n.terminalId=null,n.type=null,n}return(0,n.Z)(r)}(u.wq);(0,o._)([(0,c.Cb)({type:String,json:{write:!0}})],p.prototype,"globalId",void 0),(0,o._)([(0,c.Cb)({type:Boolean,json:{write:!0}})],p.prototype,"isFilterBarrier",void 0),(0,o._)([(0,c.Cb)({type:Number,json:{write:!0}})],p.prototype,"percentAlong",void 0),(0,o._)([(0,c.Cb)({type:Number,json:{write:!0}})],p.prototype,"terminalId",void 0),(0,o._)([(0,c.Cb)({type:h.apiValues,json:{type:h.jsonValues,read:{reader:h.read,source:"traceLocationType"},write:{writer:h.write,target:"traceLocationType"}}})],p.prototype,"type",void 0);var v=p=(0,o._)([(0,d.j)("esri.rest.networks.support.TraceLocation")],p)},53226:function(e,t,r){r.r(t),r.d(t,{default:function(){return b}});var n,i=r(15671),a=r(43144),l=r(60136),o=r(29388),s=r(27366),u=r(46784),c=r(49861),d=r(25243),h=(r(84936),r(93169),r(69912)),p=r(31201),v=r(78952),f=r(18769),g=r(29259),y=r(25952),m=n=function(e){(0,l.Z)(r,e);var t=(0,o.Z)(r);function r(e){var n;return(0,i.Z)(this,r),(n=t.call(this,e)).namedTraceConfigurationGlobalId=null,n.gdbVersion=null,n.traceLocations=[],n.moment=null,n.outSpatialReference=null,n.traceConfiguration=null,n.resultTypes=null,n.traceType=null,n}return(0,a.Z)(r,[{key:"writeOutSR",value:function(e,t,r){if(null!=e){var n=e.wkid;t[r]=JSON.stringify({wkid:n})}}}],[{key:"from",value:function(e){return(0,d.TJ)(n,e)}}]),r}(u.wq);(0,s._)([(0,c.Cb)({type:String,json:{read:{source:"traceConfigurationGlobalId"},write:{target:"traceConfigurationGlobalId"}}})],m.prototype,"namedTraceConfigurationGlobalId",void 0),(0,s._)([(0,c.Cb)({type:String,json:{write:!0}})],m.prototype,"gdbVersion",void 0),(0,s._)([(0,c.Cb)({type:[y.Z],json:{write:!0}})],m.prototype,"traceLocations",void 0),(0,s._)([(0,c.Cb)({type:Date,json:{type:Number,write:{writer:function(e,t){t.moment=e?e.getTime():null}}}})],m.prototype,"moment",void 0),(0,s._)([(0,c.Cb)({type:v.Z,json:{write:{allowNull:!0,target:"outSR"}}})],m.prototype,"outSpatialReference",void 0),(0,s._)([(0,p.c)("outSpatialReference")],m.prototype,"writeOutSR",null),(0,s._)([(0,c.Cb)({type:g.Z,json:{write:!0}})],m.prototype,"traceConfiguration",void 0),(0,s._)([(0,c.Cb)({type:[Object],json:{write:!0}})],m.prototype,"resultTypes",void 0),(0,s._)([(0,c.Cb)({type:f.Fh.apiValues,json:{type:f.Fh.jsonValues,read:f.Fh.read,write:f.Fh.write}})],m.prototype,"traceType",void 0);var b=m=n=(0,s._)([(0,h.j)("esri.rest.networks.support.TraceParameters")],m)},14254:function(e,t,r){r.r(t),r.d(t,{submitTraceJob:function(){return d},trace:function(){return u}});var n=r(74165),i=r(1413),a=r(15861),l=r(76200),o=r(23084),s=r(20039);function u(e,t,r){return c.apply(this,arguments)}function c(){return c=(0,a.Z)((0,n.Z)().mark((function e(t,r,a){var s,u,c,d;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=(0,o.en)(t),(u=r.toJSON()).traceLocations=JSON.stringify(r.traceLocations),r.resultTypes&&(u.resultTypes=JSON.stringify(r.resultTypes)),c=(0,o.lA)(s.query,(0,i.Z)({query:(0,o.cv)((0,i.Z)((0,i.Z)({},u),{},{f:"json"}))},a)),d="".concat(s.path,"/trace"),e.abrupt("return",(0,l.Z)(d,c).then((function(e){return p(e,r.outSpatialReference)})));case 4:case"end":return e.stop()}}),e)}))),c.apply(this,arguments)}function d(e,t,r){return h.apply(this,arguments)}function h(){return h=(0,a.Z)((0,n.Z)().mark((function e(t,r,a){var s,u,c,d,h,p;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=(0,o.en)(t),(u=r.toJSON()).traceLocations=JSON.stringify(r.traceLocations),r.resultTypes&&(u.resultTypes=JSON.stringify(r.resultTypes)),c=(0,o.lA)(s.query,(0,i.Z)({query:(0,o.cv)((0,i.Z)((0,i.Z)({},u),{},{async:!0,f:"json"}))},a)),d="".concat(s.path,"/trace"),e.next=6,(0,l.Z)(d,c);case 6:return h=e.sent,p=h.data,e.abrupt("return",p.statusUrl);case 9:case"end":return e.stop()}}),e)}))),h.apply(this,arguments)}function p(e,t){var r=e.data,n=s.Z.fromJSON(r.traceResults);return n.aggregatedGeometry&&t&&(n.aggregatedGeometry.line&&(n.aggregatedGeometry.line.spatialReference=t.clone()),n.aggregatedGeometry.multipoint&&(n.aggregatedGeometry.multipoint.spatialReference=t.clone()),n.aggregatedGeometry.polygon&&(n.aggregatedGeometry.polygon.spatialReference=t.clone())),n}},74509:function(e,t,r){r.d(t,{AA:function(){return v},Jn:function(){return u},LR:function(){return F},Lt:function(){return h},O3:function(){return _},Ou:function(){return m},RL:function(){return d},Uy:function(){return A},VW:function(){return s},W_:function(){return T},Wb:function(){return C},XH:function(){return f},Zz:function(){return l},ap:function(){return y},fl:function(){return p},fm:function(){return x},jG:function(){return I},kf:function(){return R},mF:function(){return o},tR:function(){return Z},tq:function(){return k},vQ:function(){return b},vu:function(){return c},zx:function(){return w}});var n=r(68860),i=r(88152);function a(e){return e?I:Z}function l(e,t){return null!==t&&void 0!==t&&t.mode?t.mode:a(e).mode}function o(e,t){return null!=t?t:a(e)}function s(e,t){return l(null!=e&&e.hasZ,t)}function u(e,t){return o(null!=e&&!!e.hasZ,t)}function c(e){var t=g(e);return s(e.geometry,t)}function d(e){var t=g(e),r=s(e.geometry,t);return{mode:r,offset:null!=t&&"on-the-ground"!==r?x(t):0,featureExpressionInfo:null===t||void 0===t?void 0:t.featureExpressionInfo}}function h(e){return f(d(e))}function p(e){return f(e)||v(e)}function v(e){var t;return"0"===(null===e||void 0===e||null===(t=e.featureExpressionInfo)||void 0===t?void 0:t.expression)}function f(e){if(!e)return!1;if("on-the-ground"===e.mode)return!1;var t=null!==e&&void 0!==e&&e.featureExpressionInfo?e.featureExpressionInfo.expression:null;return!(!t||"0"===t)}function g(e){return e.layer&&"elevationInfo"in e.layer?e.layer.elevationInfo:null}function y(e,t){if(null===e||void 0===e||!e.offset)return 0;var r=e.offset,i=e.unit;if("decimal-degrees"===i)return 0;var a="unknown"!==i&&i?i:"meters",l=(0,n.y)(t);return l?(0,n.En)(r,a,l):0}function m(e,t,r){var n,i;if(null!==r&&void 0!==r&&r.mode){var a=e.hasZ?e.z:0,l=y(r,e.spatialReference);switch(r.mode){case"absolute-height":return a-l;case"on-the-ground":return 0;case"relative-to-ground":return a-((null!==(n=t.elevationProvider.getElevation(e.x,e.y,a,e.spatialReference,"ground"))&&void 0!==n?n:0)+l);case"relative-to-scene":return a-((null!==(i=t.elevationProvider.getElevation(e.x,e.y,a,e.spatialReference,"scene"))&&void 0!==i?i:0)+l)}}}function b(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return _(e,t.x,t.y,t.hasZ?t.z:0,t.spatialReference,r,n)}function w(e,t,r,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return _(e,t[0],t[1],t.length>2?t[2]:0,r,n,i)}function _(e,t,r,n,i,a){var l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;if(null!=a){var o=null!=l?l.mode:"absolute-height";if("on-the-ground"===o)return 0;var s=k(t,r,n,i,e,a),u=s.absoluteZ;return S(u,t,r,n,i,e,l,o)}}function k(e,t,r,n,i,a){var l=y(a,n);switch(a.mode){case"absolute-height":return{absoluteZ:r+l,elevation:0};case"on-the-ground":var o,s=null!==(o=i.elevationProvider.getElevation(e,t,0,n,"ground"))&&void 0!==o?o:0;return{absoluteZ:s,elevation:s};case"relative-to-ground":var u,c=null!==(u=i.elevationProvider.getElevation(e,t,r,n,"ground"))&&void 0!==u?u:0;return{absoluteZ:r+c+l,elevation:c};case"relative-to-scene":var d,h=null!==(d=i.elevationProvider.getElevation(e,t,r,n,"scene"))&&void 0!==d?d:0;return{absoluteZ:r+h+l,elevation:h}}}function S(e,t,r,n,i,a,l,o){var s,u,c=y(l,i);switch(o){case"absolute-height":return e-c;case"relative-to-ground":return e-((null!==(s=a.elevationProvider.getElevation(t,r,n,i,"ground"))&&void 0!==s?s:0)+c);case"relative-to-scene":return e-((null!==(u=a.elevationProvider.getElevation(t,r,n,i,"scene"))&&void 0!==u?u:0)+c)}}function T(e,t){if(null==t)return!1;var r=t.mode;return null!=r&&("scene"===e&&"relative-to-scene"===r||"ground"===e&&"absolute-height"!==r)}function A(e,t,r){return r&&r.mode!==t?"".concat(e," only support ").concat(t," elevation mode"):null}function C(e,t,r){return(null===r||void 0===r?void 0:r.mode)===t?"".concat(e," do not support ").concat(t," elevation mode"):null}function R(e,t){return null!=(null===t||void 0===t?void 0:t.featureExpressionInfo)&&"0"!==t.featureExpressionInfo.expression?"".concat(e," do not support featureExpressionInfo"):null}function F(e,t){t&&e.warn(".elevationInfo=",t)}function x(e){var t;return(null!==(t=null===e||void 0===e?void 0:e.offset)&&void 0!==t?t:0)*(0,i.Z7)(null===e||void 0===e?void 0:e.unit)}var I={mode:"absolute-height",offset:0},Z={mode:"on-the-ground",offset:null}},69787:function(e,t,r){function n(e){return e&&"function"==typeof e.highlight}function i(e){return e&&"function"==typeof e.maskOccludee}function a(e,t,r){return null==e||e>=r&&(0===t||e<=t)}function l(e,t){if(t&&e){var r=e.minScale,n=e.maxScale;if(o(r,n))return a(t,r,n)}return!0}function o(e,t){return null!=e&&e>0||null!=t&&t>0}function s(e){return!(null!==e&&void 0!==e&&e.minScale)||!e.maxScale||e.minScale>=e.maxScale}function u(e){return null!=e&&"object"==typeof e&&"createQuery"in e&&"queryFeatures"in e&&"layer"in e&&"view"in e}r.d(t,{Av:function(){return o},Cy:function(){return s},GB:function(){return l},Xi:function(){return u},_1:function(){return i},rs:function(){return a},tl:function(){return n}})},72612:function(e,t,r){r.d(t,{Eu:function(){return l},Rw:function(){return s},Sj:function(){return a},s6:function(){return o},vT:function(){return i}});r(93169);var n=r(17842);function i(e){return(0,n.vW)(e.x,e.y)}function a(e){return(0,n.s1)(e.x,e.y)}function l(e,t){var r,i=null===(r=e instanceof HTMLElement?e:e.surface)||void 0===r?void 0:r.getBoundingClientRect();return i?(0,n.vW)(t.clientX-i.left,t.clientY-i.top):(0,n.vW)(0,0)}function o(e,t){return t instanceof Event?l(e,t):i(t)}function s(e){if(e instanceof Event)return!0;if("object"==typeof e&&"type"in e)switch(e.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;default:return!1}return!1}},51021:function(e,t,r){r.r(t),r.d(t,{default:function(){return Ie}});var n=r(37762),i=r(4942),a=r(74165),l=r(15861),o=r(15671),s=r(43144),u=r(97326),c=r(60136),d=r(29388),h=r(27366),p=r(94172),v=r(49861),f=(r(93169),r(32718)),g=(r(84936),r(69912)),y=r(52175),m=r(33565),b=r(8905),w=r(7021),_=r(80975),k=r(80532),S=r(28907),T=r(67005),A=r(93433),C=r(1413),R=r(29439),F=r(19545),x=r(80987),I=r(10064),Z=r(91505),N=r(77981),G=r(41201),M=r(64326),P=r(93655),H=r(37933),B=r(69518),L=r(4141),E=r(7575),O=r(57858),U=r(14254),D=r(25952),V=r(53226),j=(r(59486),r(2170)),W=r(29909),z=r(79803),q=r(78952);function J(e){return"polygon"===e.type||"polyline"===e.type}var Q=function(){function e(){(0,o.Z)(this,e)}return(0,s.Z)(e,[{key:"createBuffer",value:function(e,t,r,n){if(!Array.isArray(e)){var i=q.Z.fromJSON(e.spatialReference);return i.isWGS84||i.isWebMercator?(0,j.geodesicBuffer)(e,t[0],r):(0,j.buffer)(e,t[0],r)}if(e.length>0){var a=q.Z.fromJSON(e[0].spatialReference);return a.isWGS84||a.isWebMercator?(0,j.geodesicBuffer)(e,t,r):(0,j.buffer)(e,t,r,n)}}},{key:"createConvexHull",value:function(e){if(Array.isArray(e)){if(1===e.length&&function(e){return function(e){return e.hasOwnProperty("points")}(e)&&2===e.points.length}(e[0])){var t=(0,j.convexHull)(e[0]);if(J(t))return t}return(0,j.convexHull)(e,!0).filter(J)}var r=(0,j.convexHull)(e);if(J(r))return r}},{key:"calculateArea",value:function(e,t){var r=new q.Z({wkid:e.spatialReference.wkid});return r.isWGS84||r.isWebMercator?parseFloat((0,j.geodesicArea)(e,t).toFixed(2)):parseFloat((0,j.planarArea)(e,t).toFixed(2))}},{key:"mergeAggregatedToGeometries",value:function(e){var t=[],r=e.line,n=e.multipoint,i=e.polygon;return r&&t.push(r),n&&t.push(n),i&&t.push(i),t}},{key:"getPercentageAlong",value:function(e,t,r){var n=e,i=this._createPolyline(e.paths,r.wkid);if("point"===t.type){var a=t.x-.5,l=t.x+.5,o=[[a,t.y-.5],[l,t.y+.5]];n=this._createPolyline(o,t.spatialReference.wkid),n=(0,z.project)(n,r);var s=(0,j.cut)(i,n);if(s.length>0){var u=(0,j.planarLength)(i,"feet");return[(s[0].paths[0][0][0]===i.paths[0][0][0]?(0,j.planarLength)(s[0],"feet"):(0,j.planarLength)(s[1],"feet"))/u]}return[.5]}n=(0,z.project)(t,r);var c=(0,j.cut)(i,n);if(c.length>0){var d=(0,j.planarLength)(i,"feet");return[(0,j.planarLength)(c[0],"feet")/d]}return[.5]}},{key:"projectGeometry",value:function(){var e=(0,l.Z)((0,a.Z)().mark((function e(t,r){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,z.load)();case 2:return e.abrupt("return",(0,z.project)(t,r));case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_createPolyline",value:function(e,t){return new W.Z({hasZ:!1,hasM:!0,paths:e,spatialReference:{wkid:t}})}}]),e}(),X=r(52639),K=r(61459),Y=r(14404),$=r(16072),ee=r(22006),te=r(98173),re=r(40763),ne=[227,27,21,.6],ie=[21,244,21,.6],ae=[{color:[255,0,0,.6],haloOpacity:.9,fillOpacity:.2,hex:"#ff0000"},{color:[255,0,255,.6],haloOpacity:.9,fillOpacity:.2,hex:"#ff00ff"},{color:[217,188,255,.6],haloOpacity:.9,fillOpacity:.2,hex:"#D9BCFF"},{color:[0,255,0,.6],haloOpacity:.9,fillOpacity:.2,hex:"#00ff00"},{color:[255,255,0,.6],haloOpacity:.9,fillOpacity:.2,hex:"#ffff00"},{color:[0,0,255,.6],haloOpacity:.9,fillOpacity:.2,hex:"#0000ff"},{color:[255,165,0,.5],haloOpacity:.9,fillOpacity:.2,hex:"#ffa500"},{color:[0,0,0,.5],haloOpacity:.9,fillOpacity:.2,hex:"#000000"}],le=function(){function e(){(0,o.Z)(this,e),this.highlightColor=[].concat(ae)}return(0,s.Z)(e,[{key:"addCustomColor",value:function(e){this.highlightColor=[].concat(ae),this.highlightColor.some((function(t){return t.hex.toLowerCase()===e.hex.toLowerCase()}))||this.highlightColor.push(e)}},{key:"getFlagGraphic",value:function(e,t,r,n){var i="starting-point"===t?ie:ne;if("polygon"===e.type){var a=e;a.centroid&&(e=a.centroid)}return n?this.makeGraphic(e,i,null===r||void 0===r?void 0:r.attributes,null,n):this.makeGraphic(e,i,null===r||void 0===r?void 0:r.attributes)}},{key:"initializeSketch",value:function(e,t,r){var n=new x.Z;return r.forEach((function(e){return n.add(new ee.Z({layer:e,enabled:!0}))})),new re.Z({layer:t,view:e,snappingOptions:new te.Z({enabled:!0,featureEnabled:!0,featureSources:n})})}},{key:"makeGraphic",value:function(e,t,r,n,i){var a,l=e;switch(e.type){case"multipoint":a=new $.default({color:t,size:12,outline:{color:t,width:0}}),n&&(l=e);break;case"point":a=i||new $.default({color:t,size:12,outline:{color:t,width:0}}),n&&(l=e);break;case"polyline":a=new Y.default({color:t,width:12}),n&&(l=e);break;case"polygon":a=new K.default({color:t,outline:{color:t,width:12}}),n&&(l=e)}return new X.Z({geometry:l,symbol:a,attributes:null!==r&&void 0!==r?r:null})}}]),e}(),oe=r(44055),se=r(16698),ue="utility-network-trace-result-area-".concat(Date.now());function ce(e){return"graphics"===e.type}var de=function(){function e(){(0,o.Z)(this,e),this.traceInformation={},this._geometryHandler=new Q}return(0,s.Z)(e,[{key:"addResultAreaToMap",value:function(e,t){var r=this.createGraphicLayer(t);r&&ce(r)&&r.add(e)}},{key:"changeResultAreaColor",value:function(e,t,r){var n=new K.default({color:t.color,style:"solid",outline:{color:t.color,width:1}}),i=this._findGraphicsByTraceId(e,r);return i&&i.forEach((function(e){e.symbol=n})),n}},{key:"createBuffer",value:function(e,t,r,n){return this._geometryHandler.createBuffer(e,t,r,n)}},{key:"createConvexHull",value:function(e,t,r){var n=this._geometryHandler.createConvexHull(e);return t>0&&n?this.createBuffer(n,[t],r,!1):n}},{key:"createResultAreaGraphic",value:function(e,t,r,n,i,a){var l=new K.default({color:a.color,style:"solid",outline:{color:a.color,width:1}}),o=[];for(var s in t){var u;o.push(new se.Z({fieldName:s,label:"areaStatistic"===s?n.attributeStrings[s]+" ("+(null===(u=i.units[r])||void 0===u?void 0:u.abbr)+")":n.attributeStrings[s]}))}return new X.Z({geometry:e,symbol:l,attributes:t,popupTemplate:new oe.Z({title:t.traceName,content:[{type:"fields",fieldInfos:o}]})})}},{key:"removeResultArea",value:function(e,t){var r=t.findLayerById(ue);if(r&&ce(r)){var n=this._findGraphicsByTraceId(e,t);return n&&r.removeMany(n),n}return null}},{key:"removeAllResultAreaGraphics",value:function(e){if(e){var t=e.findLayerById(ue);t&&ce(t)&&t.removeAll()}}},{key:"createGraphicLayer",value:function(e,t){var r=e.findLayerById(ue);if(r&&ce(r))return r;var n=new P.default({title:null!==t&&void 0!==t?t:ue,listMode:"hide",id:ue});return e.add(n),n}},{key:"_findGraphicsByTraceId",value:function(e,t){var r=t.findLayerById(ue);if(r&&ce(r)){var n=r.graphics.filter((function(t){return t.attributes.traceId===e}));return n.length>0?n.toArray():null}return null}}]),e}();function he(e){return"feature"===e.type}function pe(e,t){return e.url.includes(t)}function ve(e,t){var r;return((null===(r=e.dataElement)||void 0===r?void 0:r.domainNetworks)||[]).some((function(e){return e.subnetworkLayerId===t.layerId}))}var fe=function(){function e(){(0,o.Z)(this,e)}return(0,s.Z)(e,[{key:"getValidUtilityNetworkLayers",value:function(e,t){var r=[];return null!==e&&void 0!==e&&e.allLayers.forEach((function(e){"group"===e.type?r.push.apply(r,(0,A.Z)(e.layers.filter(H.Te).filter((function(e){return he(e)&&t.isUtilityLayer(e)&&!ve(t,e)})).filter((function(e){return pe(e,t.featureServiceUrl)})).toArray())):"subtype-group"===e.type?r.push.apply(r,(0,A.Z)(e.sublayers.filter((function(e){return pe(e,t.featureServiceUrl)})).toArray())):(0,H.Te)(e)&&he(e)&&t.isUtilityLayer(e)&&!ve(t,e)&&pe(e,t.featureServiceUrl)&&r.push(e)})),r}}]),e}(),ge="utility-network-trace-flags-".concat(Date.now()),ye="utility-network-trace-results-".concat(Date.now());function me(e){return be.apply(this,arguments)}function be(){return be=(0,l.Z)((0,a.Z)().mark((function e(t){var r,n,i,l,o,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new M.default({url:t.networkSystemLayers.dirtyAreasLayerUrl}),e.next=3,r.load();case 3:if(n=r.version,!(Number(n)<=11.1)){e.next=13;break}return e.next=7,(0,H.oP)(t.layerUrl);case 7:return l=e.sent,o=new E.Z({url:l}),e.next=11,o.load();case 11:return s=null===o||void 0===o||null===(i=o.user)||void 0===i?void 0:i.username,e.abrupt("return",!!s&&(0,O.Q)(o,s,"utilityNetwork"));case 13:return e.abrupt("return",!0);case 14:case"end":return e.stop()}}),e)}))),be.apply(this,arguments)}var we=function(e){(0,c.Z)(r,e);var t=(0,d.Z)(r);function r(e){var n;return(0,o.Z)(this,r),(n=t.call(this,e))._activeProgress=!1,n._clickHandler=null,n._flags=[],n._flagId=0,n._geometryHandler=null,n._highlightHandler=[],n._resultAreaHandler=null,n._utilityHelper=new fe,n._watchHandler=null,n._validUNLayers=[],n._traceTimeout=6e5,n._sketchViewModel=null,n.traces=[],n.graphicHandler=null,n.defaultGraphicColor={color:[255,255,0,.6],haloOpacity:.9,fillOpacity:.2,hex:"#FFFF00"},n.enableResultArea=!1,n.flags=[],n.gdbVersion="sde.DEFAULT",n.messages=null,n.messagesUnits=null,n.defaultResultAreaProperties={type:"convexhull",distance:10,unit:"meters",areaUnit:"square-meters",color:{color:[255,165,0,.5],haloOpacity:.9,fillOpacity:.2,hex:"#ffa500"},show:!1},n.selectedTraces=[],n.selectOnComplete=!0,n.showGraphicsOnComplete=!0,n.showSelectionAttributes=!0,n.traceResults=[],n.utilityNetwork=null,n}return(0,s.Z)(r,[{key:"initialize",value:function(){var e=this;this._geometryHandler=new Q,this.graphicHandler=new le,this._resultAreaHandler=new de,(0,l.Z)((0,a.Z)().mark((function t(){var r,n,i,l;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([(0,G.ME)("esri/widgets/UtilityNetworkTrace/t9n/UtilityNetworkTrace"),(0,G.ME)("esri/core/t9n/Units")]);case 2:r=t.sent,n=(0,R.Z)(r,2),i=n[0],l=n[1],e.set({messages:i,messagesUnits:l});case 7:case"end":return t.stop()}}),t)})))()}},{key:"destroy",value:function(){this.view=null}},{key:"resultAreaProperties",get:function(){return this.defaultResultAreaProperties},set:function(e){var t=this;this._set("resultAreaProperties",(0,C.Z)((0,C.Z)({},this.defaultResultAreaProperties),e)),this.graphicHandler.addCustomColor(this.resultAreaProperties.color),this.traceResults.forEach((function(r){var n,i=null===(n=r.resultArea)||void 0===n?void 0:n.show;r.resultArea=(0,C.Z)((0,C.Z)({},t.defaultResultAreaProperties),e),t.removeResultAreaFromMap(r),t.enableResultArea&&t.createResultAreaGraphic(r).then((function(n){if(n){var a;r.resultAreaGraphic=n;var l=null!==(a=null===e||void 0===e?void 0:e.show)&&void 0!==a?a:i;r.resultArea&&(r.resultArea.show=l),l&&t.addResultAreaToMap(r,n)}}))}))}},{key:"state",get:function(){var e;return null!==(e=this.view)&&void 0!==e&&e.ready?"ready":"loading"}},{key:"view",get:function(){return this._get("view")},set:function(e){var t=this;e&&"2d"!==e.type&&f.Z.getLogger(this).error(new I.Z("view:invalid-view","SceneView is not supported",{view:e})),this._set("view",e),this.utilityNetwork&&this.reset(),this.utilityNetwork=null,this.loadUtilityNetwork().then((function(e){e&&t.selectTracesOnLoad()}))}},{key:"addFlagByHit",value:function(e,t){var r=this,n=function(e){var t;(null===(t=r.view)||void 0===t?void 0:t.popup)&&(r.view.popupEnabled=e)};return new Promise((function(i,a){var l;n(!1),null!==(l=r._clickHandler)&&void 0!==l&&l.remove(),r._clickHandler=r._sketchViewModel.on("create",(function(l){if("complete"===l.state){var o=r._getGraphicLayer(ge);o&&l.graphic&&o.remove(l.graphic),r.queryFlagByHitTest(l,e,t).then((function(a){var l;n(!0),null!==(l=r._clickHandler)&&void 0!==l&&l.remove(),r.emit("add-flag-complete",{type:e,symbol:t}),i(a)})).catch((function(i){var l;n(!0),null!==(l=r._clickHandler)&&void 0!==l&&l.remove(),r.emit("add-flag-error",{type:e,symbol:t}),a(i)}))}})),r._sketchViewModel.create("point"),r.emit("add-flag",{type:e})}))}},{key:"addFlagsOnLoad",value:function(){var e=(0,l.Z)((0,a.Z)().mark((function e(){var t=this;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this._flags.length>0)){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,(0,p.whenOnce)((function(){return null!=t.view&&!t.view.updating}));case 4:return e.next=6,Promise.all(this.flags.map(function(){var e=(0,l.Z)((0,a.Z)().mark((function e(r){var n,i,l,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.mapPoint){e.next=2;break}return e.abrupt("return",null);case 2:return n=r.type,i=r.mapPoint.clone(),l="barrier"===n?ne:ie,o={graphic:t.graphicHandler.makeGraphic(i,l),state:"complete",tool:"point",toolEventInfo:null,type:"create"},e.prev=3,e.next=6,t.queryFlagByHitTest(o,r.type,null);case 6:return t.emit("add-flag-complete",{type:n}),e.abrupt("return",null);case 10:return e.prev=10,e.t0=e.catch(3),e.abrupt("return",(t.emit("add-flag-error",{type:n}),"barrier"===n?"barrier":"starting-point"));case 13:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}()));case 6:return e.abrupt("return",e.sent.filter((function(e){return!e})));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addResultAreaToMap",value:function(){var e=(0,l.Z)((0,a.Z)().mark((function e(t,r){var n,i,l;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.view){e.next=10;break}if(t.resultArea.show=!0,!r){e.next=5;break}null!==(n=this._resultAreaHandler)&&void 0!==n&&n.addResultAreaToMap(r,this.view.map),this.emit("add-result-area",{graphic:r}),e.next=10;break;case 5:if(!t.results){e.next=10;break}return e.next=8,this.createResultAreaGraphic(t);case 8:(l=e.sent)&&(t.resultAreaGraphic=l,null!==(i=this._resultAreaHandler)&&void 0!==i&&i.addResultAreaToMap(l,this.view.map),this.emit("add-result-area",{graphic:l}));case 10:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"addResultGraphicToView",value:function(){var e=(0,l.Z)((0,a.Z)().mark((function e(t,r){var n,i,l,o,s,u,c,d,h;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.view,i=t.results,!(n&&i&&this.utilityNetwork)){e.next=16;break}e.t0=(0,a.Z)().keys(i.aggregatedGeometry);case 3:if((e.t1=e.t0()).done){e.next=16;break}if(l=e.t1.value,!"line,multipoint,polygon".includes(l)){e.next=14;break}if(o=l,null==(s=i.aggregatedGeometry[o])){e.next=14;break}return s.spatialReference=this.utilityNetwork.spatialReference,t.graphicEnabled=!0,e.next=11,this._geometryHandler.projectGeometry(s,n.spatialReference);case 11:u=e.sent,c={globalid:t.trace.globalId},null!==u&&(h=this.graphicHandler.makeGraphic(u,r.color,c,n.spatialReference),null===(d=this._getGraphicLayer(ye))||void 0===d||d.add(h));case 14:e.next=3;break;case 16:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"addTerminal",value:function(e,t){var r=(0,A.Z)(this._flags);r.forEach((function(r){var n,i;r.globalId===t.globalId&&((null===(n=t.selectedTerminals)||void 0===n?void 0:n.includes(parseInt(e,10)))||null===(i=r.selectedTerminals)||void 0===i||i.push(parseInt(e,10)))})),this._flags=r}},{key:"callTrace",value:function(){var e=(0,l.Z)((0,a.Z)().mark((function e(){var t,r=this;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.traces.filter((function(e){return e.selected})),e.t0=t.length>0,!e.t0){e.next=9;break}return this.traceResults.length>0&&this.traceResults.forEach((function(e){r.removeResultGraphicFromView(e)})),this.traceResults=[],this.removeSelection(),e.next=8,Promise.all(t.map(function(){var e=(0,l.Z)((0,a.Z)().mark((function e(t,i){var l,o,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t,s=new V.default({gdbVersion:r.utilityNetwork?r.utilityNetwork.gdbVersion:r.gdbVersion,moment:null,traceType:o.traceType,traceLocations:r._flags,namedTraceConfigurationGlobalId:o.globalId,traceConfiguration:null,outSpatialReference:null,resultTypes:null}),e.next=3,r.executeTrace(o,null===(l=r.utilityNetwork)||void 0===l?void 0:l.networkServiceUrl,s).then((function(e){if(e.hasOwnProperty("results")){var t=(0,C.Z)({},e);if(null!==t.results){t.resultArea=(0,C.Z)({},r.resultAreaProperties);var a=(0,A.Z)(t.results.elements);t.results.elements.length=0;var l,o=new Map,s=(0,n.Z)(a);try{for(s.s();!(l=s.n()).done;){var u=l.value;o.has(u.globalId)||(o.set(u.globalId,!0),t.results.elements.push(u))}}catch(p){s.e(p)}finally{s.f()}var c=(0,A.Z)(r.traceResults);c.splice(i,0,t),r.traceResults=c,null!==t.results&&(r.selectOnComplete&&r.mergeSelection(!0,t.trace),r.showGraphicsOnComplete&&r.addResultGraphicToView(t,t.graphicColor),r.enableResultArea&&r.createResultAreaGraphic(t).then((function(e){var n;e&&(t.resultAreaGraphic=e,(null===(n=t.resultArea)||void 0===n?void 0:n.show)&&r.addResultAreaToMap(t,t.resultAreaGraphic))})))}else{var d=(0,A.Z)(r.traceResults);d.splice(i,0,e),r.traceResults=d}r._activeProgress=!1}else{r._activeProgress=!1;var h=(0,A.Z)(r.traceResults);h.splice(i,0,e),r.traceResults=h}})).catch((function(e){throw r._activeProgress=!1,e}));case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()));case 8:e.t0=!0;case 9:return e.abrupt("return",e.t0);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"changeResultAreaColor",value:function(e,t){var r;if(e.resultArea){e.resultArea.color=t;var n=null===(r=this._resultAreaHandler)||void 0===r?void 0:r.changeResultAreaColor(e.trace.globalId,t,this.view.map);e.resultAreaGraphic&&(e.resultAreaGraphic.symbol=n)}}},{key:"changeResultGraphicColor",value:function(e,t){var r=(0,A.Z)(this.traceResults);r.length>0&&r.forEach((function(r){r.trace.globalId===t.trace.globalId&&(r.graphicColor=e,r.graphicEnabled=!0)})),this.traceResults=r,this.removeResultGraphicFromView(t),this.addResultGraphicToView(t,e)}},{key:"changeFlagSymbol",value:function(e,t){this._flags.length>0&&this._flags.forEach((function(r){r.type===e&&t&&r.mapGraphic&&(r.mapGraphic.symbol=t)}))}},{key:"checkCanTrace",value:function(){var e={status:!0,issues:[]},t=!1,r=this._flags.some((function(e){return"starting-point"===e.type})),n=this._flags.filter((function(e){return null!==e.allTerminals}));n.length>0&&(t=n.some((function(e){return e.selectedTerminals.length<=0})));var i=[];return r?(i=this.traces.filter((function(e){return e.selected})),i.length<=0?(e.status=!1,e.issues=["noTrace"],t&&(e.status=!1,e.issues=["noTrace","noTerminalSelected"])):t&&(e.status=!1,e.issues=["noTerminalSelected"])):(i=this.traces.filter((function(e){return!0===e.selected})),i.length>0?(e.status=!1,e.issues=["noStart"],t&&(e.status=!1,e.issues=["noStart","noTerminalSelected"])):(e.status=!1,e.issues=["noStart","noTrace"],t&&(e.status=!1,e.issues=["noStart","noTrace","noTerminalSelected"]))),e}},{key:"checkSelectionExist",value:function(){return this._highlightHandler.some((function(e){return e}))}},{key:"clearResult",value:function(e){if(this.view){var t=this.traceResults;if(t.length>0){var r=t.filter((function(t){return t.trace.globalId===e.globalId}));r.length>0&&(this.removeResultGraphicFromView(r[0]),this.removeResultAreaFromMap(r[0])),t=t.filter((function(t){return t.trace.globalId!==e.globalId}))}this.traceResults=t,0===t.length?(this.removeAllResultAreaGraphics(),this.removeSelection(),this.emit("clear-selection",{resultSet:[]})):this.mergeSelection(!1,e)}}},{key:"createResultAreaGeometries",value:function(e,t,r){var i,a,l,o,s,u,c,d,h,p,v,f;if(this.view&&this.resultAreaProperties&&(f="convexhull"===(null===(i=this.resultAreaProperties)||void 0===i?void 0:i.type)?1===t.length&&((0,N.wp)(t[0])||(0,N.aW)(t[0])&&1===t[0].points.length)?null===(a=this._resultAreaHandler)||void 0===a?void 0:a.createBuffer(t,r,null===(l=e.resultArea)||void 0===l?void 0:l.unit,!0):null===(o=this._resultAreaHandler)||void 0===o?void 0:o.createConvexHull(t,null===(s=e.resultArea)||void 0===s?void 0:s.distance,null===(u=e.resultArea)||void 0===u?void 0:u.unit):null===(c=this._resultAreaHandler)||void 0===c?void 0:c.createBuffer(t,r,null===(d=e.resultArea)||void 0===d?void 0:d.unit,!0))){if(!Array.isArray(f)){var g=this.getResultAreaAttributes(e,f);return null===(h=this._resultAreaHandler)||void 0===h?void 0:h.createResultAreaGraphic(f,g,null===(p=e.resultArea)||void 0===p?void 0:p.areaUnit,this.messages,this.messagesUnits,null===(v=e.resultArea)||void 0===v?void 0:v.color)}var y,m=(0,n.Z)(f);try{for(m.s();!(y=m.n()).done;){var b,w,_,k=y.value,S=this.getResultAreaAttributes(e,k),T=null===(b=this._resultAreaHandler)||void 0===b?void 0:b.createResultAreaGraphic(k,S,null===(w=e.resultArea)||void 0===w?void 0:w.areaUnit,this.messages,this.messagesUnits,null===(_=e.resultArea)||void 0===_?void 0:_.color);if(T)return T}}catch(A){m.e(A)}finally{m.f()}}}},{key:"createResultAreaGraphic",value:function(){var e=(0,l.Z)((0,a.Z)().mark((function e(t){var r,n,i,l;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.results){e.next=7;break}return e.next=3,this._createResultAreaInputGeometry(t.results);case 3:if(!((r=e.sent).length>0)){e.next=7;break}return i=Array(r.length).fill(null===(n=t.resultArea)||void 0===n?void 0:n.distance),l=this.createResultAreaGeometries(t,r,i),e.abrupt("return",(this.emit("create-result-area",{graphic:l}),l));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"executeTrace",value:function(e,t,r){var n=this,i=this._processFlags(r.traceLocations);return r.traceLocations=i,(0,U.trace)(t,r,{timeout:this._traceTimeout}).then((function(t){return{trace:e,results:t,selectionEnabled:!1,graphicEnabled:!1,graphicColor:n.defaultGraphicColor,status:"success",date:new Date}})).catch((function(t){return{trace:e,results:null,selectionEnabled:!1,graphicEnabled:!1,graphicColor:n.defaultGraphicColor,status:t.message,date:new Date}}))}},{key:"getResultAreaAttributes",value:function(e,t){var r,n,i,a,l=this.messages,o=[],s=[];this._flags.forEach((function(e){var t,r,n,i,a=(null===(t=e.displayValue)||void 0===t?void 0:t.field)+":"+(null===(r=e.displayValue)||void 0===r?void 0:r.value)+";"+l.attributeStrings.globalid+":"+e.globalId+";"+l.attributeStrings.terminalid+":"+e.terminalId+";"+l.attributeStrings.x+":"+(null===(n=e.mapPoint)||void 0===n?void 0:n.x)+";"+l.attributeStrings.y+":"+(null===(i=e.mapPoint)||void 0===i?void 0:i.y);"starting-point"===e.type?o.push(a):s.push(a)}));var u=this.utilityNetwork?this.utilityNetwork.gdbVersion:this.gdbVersion;return{traceId:e.trace.globalId,traceName:e.trace.title,traceDescription:null!==(r=e.trace.description)&&void 0!==r?r:"",startingPoints:o.toString(),barriers:s.toString(),version:null!==u&&void 0!==u?u:void 0,username:F.id.credentials[0].userId,date:e.date,elementCount:null===(n=e.results)||void 0===n?void 0:n.elements.length,functionResult:JSON.stringify(null===(i=e.results)||void 0===i?void 0:i.globalFunctionResults),areaStatistic:t?this._geometryHandler.calculateArea(t,null===(a=e.resultArea)||void 0===a?void 0:a.areaUnit):0}}},{key:"getValidSources",value:function(){var e,t,r,i,a=[],l=null!==(e=null===(t=this.utilityNetwork)||void 0===t||null===(r=t.dataElement)||void 0===r?void 0:r.domainNetworks)&&void 0!==e?e:[],o=(0,n.Z)(l);try{for(o.s();!(i=o.n()).done;){var s=i.value;a=(a=a.concat(s.junctionSources)).concat(s.edgeSources)}}catch(u){o.e(u)}finally{o.f()}return a}},{key:"groupResultsByNetworkSource",value:function(e){return 0===e.length?[]:this._groupBy(e,"networkSourceId")}},{key:"loadUtilityNetwork",value:function(){var e=(0,l.Z)((0,a.Z)().mark((function e(){var t,r,n,i,l;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.view){e.next=3;break}return e.abrupt("return",null);case 3:return e.next=5,r.when();case 5:if(!this.utilityNetwork){e.next=23;break}if(e.t0=this.utilityNetwork.loaded,e.t0){e.next=10;break}return e.next=10,this.utilityNetwork.load();case 10:if(!(this.utilityNetwork instanceof B.default)){e.next=22;break}return e.prev=11,n=r.map,e.next=15,n.loadAll();case 15:this._loadUNSupportItems(),e.next=21;break;case 18:e.prev=18,e.t1=e.catch(11),this._loadUNSupportItems();case 21:return e.abrupt("return",this.utilityNetwork);case 22:return e.abrupt("return",null);case 23:if(i=r.map,!(l=null===(t=i.utilityNetworks)||void 0===t?void 0:t.at(0))){e.next=44;break}return e.next=27,l.load();case 27:return this.utilityNetwork=l,e.next=30,me(l);case 30:if(e.sent){e.next=32;break}throw new I.Z("utility-network:no-user-type-extension","User type extension not found");case 32:return e.prev=32,e.next=35,i.loadAll();case 35:this._loadUNSupportItems(),e.next=40;break;case 38:e.prev=38,e.t2=e.catch(32);case 40:return e.prev=40,this._loadUNSupportItems(),e.finish(40);case 43:return e.abrupt("return",l);case 44:return e.abrupt("return",null);case 45:case"end":return e.stop()}}),e,this,[[11,18],[32,38,40,43]])})));return function(){return e.apply(this,arguments)}}()},{key:"manageFilterBarrier",value:function(e,t){var r=(0,A.Z)(this._flags);r.forEach((function(r){r.globalId===t.globalId&&"barrier"===t.type&&r.id===t.id&&(r.isFilterBarrier=e)})),this._flags=r}},{key:"mergeSelection",value:function(e,t){var r=[],n=(0,A.Z)(this.traceResults),i=t.globalId;n.forEach((function(t){var n,a,l;i===t.trace.globalId&&(t.selectionEnabled=e),t.selectionEnabled&&null!==(null===(n=t.results)||void 0===n?void 0:n.elements)&&(r=[].concat((0,A.Z)(r),(0,A.Z)(null!==(a=null===(l=t.results)||void 0===l?void 0:l.elements)&&void 0!==a?a:[])))})),this.selectResults((0,A.Z)(new Set(r)))}},{key:"queryFeaturesById",value:function(){var e=(0,l.Z)((0,a.Z)().mark((function e(t){var r,n,i,o,s,u,c;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=this.view)&&this.utilityNetwork){e.next=3;break}return e.abrupt("return",null);case 3:return o=(0,L.Cf)(this.utilityNetwork,t),s={layerUrl:o[0].layerUrl,objectIds:o[0].objectIds,outFields:["*"]},u=null!==(r=null===(n=i.map)||void 0===n?void 0:n.allTables.toArray().filter((function(e){var t;return(null===e||void 0===e||null===(t=e.parsedUrl)||void 0===t?void 0:t.path)===o[0].layerUrl})).filter(H.Te))&&void 0!==r?r:[],this._getUniqueMapLayerViews(i).filter((function(e){var t,r=e.layer;return(null===r||void 0===r||null===(t=r.parsedUrl)||void 0===t?void 0:t.path)===o[0].layerUrl})).forEach((function(e){var t=e.layer;"feature"!==t.type&&"subtype-group"!==t.type||u.push(t)})),e.next=7,Promise.all(u.map(function(){var e=(0,l.Z)((0,a.Z)().mark((function e(t){var r,n,l,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={layers:new x.Z([t]),layerInfos:[s],returnGeometry:!0,outSpatialReference:i.spatialReference},e.next=3,(0,L.n7)(r,!1);case 3:return n=e.sent,l=(0,R.Z)(n,1),o=l[0],e.abrupt("return",o);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 7:return c=e.sent.filter((function(e){return e.featureSet.features.length>0})),e.abrupt("return",c.length>0?c:null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queryFlagByHitTest",value:function(e,t,r){var n=this;return this._lookupFlagByHit(e).then((function(e){if(!n.view)return!1;if(e.length>0){var i=(0,A.Z)(n._flags),a=r;return e.forEach((function(e){var r=e.graphic,l=r.attributes.hasOwnProperty("GLOBALID")?r.attributes.GLOBALID:r.attributes.globalid;if(i.filter((function(e){return e.globalId===l})).length<=0){var o,s=n.graphicHandler.getFlagGraphic(r.attributes.mapPoint,t,r,a);null===(o=n._getGraphicLayer(ge))||void 0===o||o.add(s);var u=n._createFlagProperty(r,t,s);i.push(u)}else if(null!==r.attributes.percentAlong){var c,d=n.graphicHandler.getFlagGraphic(r.attributes.mapPoint,t,r,a);null===(c=n._getGraphicLayer(ge))||void 0===c||c.add(d);var h=n._createFlagProperty(r,t,d);i.push(h)}})),n._flags=i,!0}return!1}))}},{key:"removeResultGraphicFromView",value:function(e){var t,r=this;if(this.view){var n=null===(t=this._getGraphicLayer(ye))||void 0===t?void 0:t.graphics;e.graphicEnabled=!1;var i=null===n||void 0===n?void 0:n.filter((function(t){return t.attributes[t.attributes.hasOwnProperty("GLOBALID")?"GLOBALID":"globalid"]===e.trace.globalId}));null===i||void 0===i||i.forEach((function(e){var t;null===(t=r._getGraphicLayer(ye))||void 0===t||t.remove(e)}))}}},{key:"removeFlag",value:function(e){var t=this._flags.filter((function(t){if(t.id!==e.id)return t}));this._removeGraphic(e),this._flags=t}},{key:"removeAllResultAreaGraphics",value:function(){var e;null===(e=this._resultAreaHandler)||void 0===e||e.removeAllResultAreaGraphics(this.view.map)}},{key:"removeResultAreaFromMap",value:function(e){if(e.resultArea){var t,r;e.resultArea.show=!1;var n=null===(t=this._resultAreaHandler)||void 0===t?void 0:t.removeResultArea(e.trace.globalId,null===(r=this.view)||void 0===r?void 0:r.map);n&&this.emit("remove-result-area",{graphic:n})}}},{key:"removeSelection",value:function(){this._highlightHandler.forEach((function(e){e&&e.remove()})),this._highlightHandler=[]}},{key:"removeTerminal",value:function(e,t){var r=(0,A.Z)(this._flags);r.forEach((function(r){var n;if(r.globalId===t.globalId&&null!==(n=t.selectedTerminals)&&void 0!==n&&n.includes(parseInt(e,10))){var i,a=t.selectedTerminals.indexOf(parseInt(e,10));null===(i=r.selectedTerminals)||void 0===i||i.splice(a,1)}})),this._flags=r}},{key:"removeFlagsOnLoadWatcher",value:function(){this._watchHandler&&null!==this._watchHandler&&this._watchHandler.remove()}},{key:"removeClickHandler",value:function(){this._clickHandler&&(this._sketchViewModel.cancel(),this._clickHandler.remove())}},{key:"reset",value:function(){var e,t;this._flags=[],this.traceResults=[];var r=(0,A.Z)(this.traces);r.forEach((function(e){e.selected=!1})),this.traces=r,this.view&&(null!==(e=this._getGraphicLayer(ye))&&void 0!==e&&e.removeAll(),null!==(t=this._getGraphicLayer(ge))&&void 0!==t&&t.removeAll(),this.removeAllResultAreaGraphics(),this.removeSelection(),this.emit("clear-selection",{resultSet:[]}))}},{key:"selectFeaturesById",value:function(e){var t=this,r=this.view;if(r&&this.utilityNetwork){var n=(0,L.Cf)(this.utilityNetwork,e);this._getUniqueMapLayerViews(r).forEach((function(e){var r,i;(function(e){return"layer"in e})(e)&&(null===(r=e.layer)||void 0===r||null===(i=r.parsedUrl)||void 0===i?void 0:i.path)===n[0].layerUrl&&function(e){return"feature"===e.layer.type||"subtype-group"===e.layer.type}(e)&&t._highlightHandler.push(e.highlight(n[0].objectIds))}))}}},{key:"selectResults",value:function(e){var t=this;if(e.length>0){this.removeSelection();var r=this.groupResultsByNetworkSource(e),n=[];for(var i in r)this.selectFeaturesById(r[i]),n.push(this.queryFeaturesById(r[i]));Promise.all(n).then((function(e){t.emit("select-features",{resultSet:e})}))}else this.removeSelection(),this.emit("clear-selection",{resultSet:[]})}},{key:"selectTraces",value:function(e,t){var r=(0,A.Z)(this.traces);r.forEach((function(r){t===r.globalId&&(r.selected=e)})),this.traces=r}},{key:"selectTracesOnLoad",value:function(){var e,t=this;(null===(e=this.utilityNetwork)||void 0===e?void 0:e.hasOwnProperty("sharedNamedTraceConfigurations"))&&(this.traces=(0,A.Z)(this.utilityNetwork.sharedNamedTraceConfigurations),this.traces.forEach((function(e){e.selected=!1,t.selectedTraces.includes(e.globalId)&&(e.selected=!0)})))}},{key:"zoomToAsset",value:function(e){var t;null===(t=this.view)||void 0===t||t.goTo(e).catch((function(e){return console.error(e)}))}},{key:"_createResultAreaInputGeometry",value:function(){var e=(0,l.Z)((0,a.Z)().mark((function e(t){var r,i,l,o,s,u,c,d,h,p,v,f,g,y;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==t.aggregatedGeometry){e.next=2;break}return e.abrupt("return",this._geometryHandler.mergeAggregatedToGeometries(t.aggregatedGeometry));case 2:for(l in r=this.groupResultsByNetworkSource(t.elements),i=[],r)i.push(this.queryFeaturesById(r[l]));return e.prev=4,e.next=7,Promise.all(i);case 7:o=e.sent,s=[],u=(0,n.Z)(o);try{for(u.s();!(c=u.n()).done;)if(d=c.value){h=(0,n.Z)(d);try{for(h.s();!(p=h.n()).done;){v=p.value,f=(0,n.Z)(v.featureSet.features);try{for(f.s();!(g=f.n()).done;)y=g.value,s.push(y.geometry)}catch(a){f.e(a)}finally{f.f()}}}catch(a){h.e(a)}finally{h.f()}}}catch(a){u.e(a)}finally{u.f()}return e.abrupt("return",s);case 14:return e.prev=14,e.t0=e.catch(4),e.abrupt("return",[]);case 17:case"end":return e.stop()}}),e,this,[[4,14]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_loadUNSupportItems",value:function(){var e;if(this.utilityNetwork){var t=this.view.map,r=this.messages;this._populateOutfields(),this._createGraphicLayer(ge),this._createGraphicLayer(ye),null!==(e=this._resultAreaHandler)&&void 0!==e&&e.createGraphicLayer(t,null===r||void 0===r?void 0:r.alertsStrings.genericResultHeader),this._validUNLayers=this._utilityHelper.getValidUtilityNetworkLayers(t,this.utilityNetwork),this._sketchViewModel=this.graphicHandler.initializeSketch(this.view,this._getGraphicLayer(ge),this._validUNLayers)}}},{key:"_getUniqueMapLayerViews",value:function(e){var t=[];return e.layerViews.filter((function(e){var t=e.layer.type;return"feature"===t||"group"===t||"subtype-group"===t})).toArray().forEach((function(e){switch(e.layer.type){case"group":if(function(e){return void 0!==e.layerViews}(e)){var r,i=(0,n.Z)(e.layerViews);try{for(i.s();!(r=i.n()).done;){var a=r.value;t.push(a)}}catch(l){i.e(l)}finally{i.f()}}break;case"subtype-group":t.push(e);break;default:t.some((function(t){return t.layer.id===e.layer.id}))||t.push(e)}})),t}},{key:"_processFlags",value:function(e){var t=[];return e.forEach((function(e){if(null!==e.selectedTerminals&&e.selectedTerminals.length>0)e.selectedTerminals.forEach((function(r){var n=new D.Z({globalId:e.globalId,percentAlong:e.percentAlong,terminalId:r,type:e.type,isFilterBarrier:e.isFilterBarrier});t.push(n)}));else{var r=new D.Z({globalId:e.globalId,percentAlong:e.percentAlong,type:e.type,isFilterBarrier:e.isFilterBarrier});t.push(r)}})),t}},{key:"_getDisplayField",value:function(e){var t;return"subtype-sublayer"===(null===e||void 0===e||null===(t=e.layer)||void 0===t?void 0:t.type)?this._getDisplayFieldBySublayer(e):this._getDisplayFieldByFeatureLayer(e)}},{key:"_getDisplayFieldBySublayer",value:function(e){var t,r="",n=e.layer;for(var i in t=this._checkParentForData(n,"displayField"),e.attributes){var a,l=i.toLowerCase();l===(null===(a=t)||void 0===a?void 0:a.toLowerCase())?(r=e.attributes[i],"assetgroup"===l||"assettype"===l?r=this._checkSubtype(n,n.subtypeCode):"string"==typeof(r=this._checkDomain(n.fields,i,r))&&(r=this._defaultDisplayField(r,n))):"string"==typeof(r=this._checkDomain(n.fields,i,r))&&(r=this._defaultDisplayField(r,n))}return{field:t,value:r.toString()}}},{key:"_getDisplayFieldByFeatureLayer",value:function(e){var t=e.layer,r=t.displayField,n="";for(var i in e.attributes){var a,l=i.toLowerCase();if(l===(null===(a=r)||void 0===a?void 0:a.toLowerCase()))if(n=e.attributes[i],"assetgroup"===l||"assettype"===l){var o,s,u=e.attributes[t.typeIdField.toUpperCase()];u||(u=e.attributes[t.typeIdField.toLowerCase()]),r=t.typeIdField,n=this._checkSubtype(t,u),""===r&&(t.templates&&t.templates.length>0?(r=null===(o=t.templates[0])||void 0===o?void 0:o.name,n=null===(s=t.templates[0])||void 0===s?void 0:s.name):(r=t.displayField,n=e.attributes[i]))}else"string"==typeof(n=this._checkDomain(t.fields,i,n))&&(n=this._defaultDisplayField(n,t));else"string"==typeof(n=this._checkDomain(t.fields,i,n))&&(n=this._defaultDisplayField(n,t))}return{field:r,value:n?n.toString():""}}},{key:"_checkSubtype",value:function(e,t){var r=t;if("subtype-sublayer"===e.type){var n=this._checkParentForData(e,"subtypes");(null===n||void 0===n?void 0:n.length)>0&&n.forEach((function(e){e.code===t&&(r=e.name)}))}else if(null!=e.types&&e.types.length>0){var i=e.types.filter((function(e){return e.id===t}));i.length>0&&(r=i[0].name)}return r}},{key:"_checkDomain",value:function(e,t,r){var n,i=r,a=e.filter((function(e){return e.name.toLowerCase()===t.toLowerCase()}));if(a.length>0&&function(e){return e instanceof y.Z}(a[0].domain)&&null!==(n=a[0].domain)&&void 0!==n&&n.codedValues){var l=a[0].domain.codedValues.filter((function(e){return e.code===r}));l.length>0&&(i=l[0].name)}return i}},{key:"_checkParentForData",value:function(e,t){var r,n;return null!==(r=null===(n=e.parent)||void 0===n?void 0:n[t])&&void 0!==r?r:null}},{key:"_defaultDisplayField",value:function(e,t){var r;return e.trim()?e:t.templates&&(null===(r=t.templates)||void 0===r?void 0:r.length)>0?t.templates[0].name:t.title}},{key:"_uniqueFlagId",get:function(){return this._flagId++}},{key:"_groupBy",value:function(e,t){return e.reduce((function(e,r){return(e[r[t]]=e[r[t]]||[]).push(r),e}),{})}},{key:"_lookupFlagByHit",value:function(){var e=(0,l.Z)((0,a.Z)().mark((function e(t){var r,n,i,l,o,s,u,c,d,h,p,v,f;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=null===(r=t.graphic)||void 0===r?void 0:r.geometry,i=[],!(n&&(0,N.wp)(n)&&this.view)){e.next=8;break}if(!(l=this.view.toScreen(n))){e.next=8;break}return e.next=6,this.view.hitTest(l,{include:this._validUNLayers});case 6:(o=e.sent)&&o.results.length>0&&(u=o.results.find((function(e){return null!==e.layer})),null!=(null===(s=u.graphic)||void 0===s?void 0:s.geometry)&&("polyline"===u.graphic.geometry.type?(d={terminalId:null,isFilterBarrier:!1,allTerminals:null,selectedTerminals:null,percentAlong:this._geometryHandler.getPercentageAlong(u.graphic.geometry,null===(c=t.graphic)||void 0===c?void 0:c.geometry,u.graphic.geometry.spatialReference),displayValue:this._getDisplayField(u.graphic),mapPoint:u.mapPoint},u.graphic.attributes=(0,C.Z)((0,C.Z)({},u.graphic.attributes),d),i.push(u)):"point"!==u.graphic.geometry.type&&"polygon"!==u.graphic.geometry.type||null===this.utilityNetwork||(p=null===(h=this.utilityNetwork)||void 0===h?void 0:h.getTerminalConfiguration(u.graphic),v=this._getDisplayField(u.graphic),f={terminalId:p?p.terminals[0].id||null:1,isFilterBarrier:!1,allTerminals:null!==p&&void 0!==p?p:null,selectedTerminals:[p?p.terminals[0].id||null:1],percentAlong:null,displayValue:v,mapPoint:u.mapPoint},u.graphic.attributes=(0,C.Z)((0,C.Z)({},u.graphic.attributes),f),i.push(u))));case 8:return e.abrupt("return",i);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_createFlagProperty",value:function(e,t,r){var n=new D.Z;n.terminalId=e.attributes.terminalId,n.isFilterBarrier=e.attributes.isFilterBarrier,n.percentAlong=e.attributes.percentAlong,n.globalId=e.attributes.globalid||e.attributes.GLOBALID,n.type=t;var i=n;return i.details=e,i.mapGraphic=r,i.id=this._uniqueFlagId,i.allTerminals=e.attributes.allTerminals,i.selectedTerminals=e.attributes.selectedTerminals,i.displayValue=e.attributes.displayValue,i.mapPoint=e.attributes.mapPoint,i}},{key:"_populateOutfields",value:function(){var e=(0,l.Z)((0,a.Z)().mark((function e(){var t,r,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=null===(t=this.view)||void 0===t?void 0:t.map,n=this.getValidSources(),null===r||void 0===r||r.layers.forEach((function(e){"group"===e.type?e.layers.forEach((function(e){n.some((function(t){return t.layerId===e.layerId}))&&e.fields.some((function(e){return"assetgroup"===e.name.toLowerCase()}))&&(e.outFields=["assetgroup","assettype","globalid","objectid"])})):n.some((function(t){return t.layerId===e.layerId}))&&e.fields.some((function(e){return"assetgroup"===e.name.toLowerCase()}))&&(e.outFields=["assetgroup","assettype","globalid","objectid"])}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_removeGraphic",value:function(e){var t;null===(t=this._getGraphicLayer(ge))||void 0===t||t.remove(e.mapGraphic)}},{key:"_createGraphicLayer",value:function(e){var t=this.view.map;if(!t.findLayerById(e)){var r=new P.default({title:e,listMode:"hide",id:e});t.add(r)}}},{key:"_getGraphicLayer",value:function(e){var t=this.view.map;if(t){var r=t.findLayerById(e);if(r&&function(e){return"graphics"===e.type}(r))return r}return null}}]),r}(Z.Z.EventedAccessor);(0,h._)([(0,v.Cb)()],we.prototype,"_activeProgress",void 0),(0,h._)([(0,v.Cb)()],we.prototype,"_flags",void 0),(0,h._)([(0,v.Cb)()],we.prototype,"traces",void 0),(0,h._)([(0,v.Cb)()],we.prototype,"defaultGraphicColor",void 0),(0,h._)([(0,v.Cb)()],we.prototype,"enableResultArea",void 0),(0,h._)([(0,v.Cb)()],we.prototype,"flags",void 0),(0,h._)([(0,v.Cb)()],we.prototype,"gdbVersion",void 0),(0,h._)([(0,v.Cb)()],we.prototype,"messages",void 0),(0,h._)([(0,v.Cb)()],we.prototype,"messagesUnits",void 0),(0,h._)([(0,v.Cb)()],we.prototype,"resultAreaProperties",null),(0,h._)([(0,v.Cb)()],we.prototype,"selectedTraces",void 0),(0,h._)([(0,v.Cb)()],we.prototype,"selectOnComplete",void 0),(0,h._)([(0,v.Cb)()],we.prototype,"showGraphicsOnComplete",void 0),(0,h._)([(0,v.Cb)()],we.prototype,"showSelectionAttributes",void 0),(0,h._)([(0,v.Cb)({readOnly:!0})],we.prototype,"state",null),(0,h._)([(0,v.Cb)()],we.prototype,"traceResults",void 0),(0,h._)([(0,v.Cb)()],we.prototype,"utilityNetwork",void 0),(0,h._)([(0,v.Cb)({value:null})],we.prototype,"view",null);var _e=we=(0,h._)([(0,g.j)("esri.widgets.UtilityNetworkTrace.UtilityNetworkTraceViewModel")],we),ke="esri-utility-trace-network",Se={base:ke,loaderContainer:"".concat(ke,"__loader-container"),loader:"".concat(ke,"__loader"),fadeIn:"".concat(ke,"--fade-in"),addButtonContainer:"".concat(ke,"__add-button-container"),noticeContainer:"".concat(ke,"__notice-container"),listContainer:"".concat(ke,"__list-container"),resultsContainer:"".concat(ke,"__results-container"),flow:"".concat(ke,"__flow"),numberInput:"".concat(ke,"__number-input"),clearPrompt:"".concat(ke,"__reset-prompt"),promptDivider:"".concat(ke,"__divider"),paddingTop:"".concat(ke,"__padTop")};function Te(e){return{height:e+"px"}}function Ae(e){return{width:e+"px"}}function Ce(e){return{width:"100%",height:window.getComputedStyle(e).getPropertyValue("max-height")}}function Re(e){return{display:"flex",flexDirection:e}}var Fe=-2147208474,xe=function(e){(0,c.Z)(h,e);var t=(0,d.Z)(h);function h(e,r){var n;return(0,o.Z)(this,h),(n=t.call(this,e,r))._selectToolActive=!1,n._activeTrace=null,n._activeSwatch="",n._traceHeaderForFlow="",n._assetGroupHeader="",n._assetTypeHeader="",n._traceResultsFunctions=[],n._traceResultsAssetGroup=[],n._traceResultsAssetType=[],n._traceResultsIndividual=[],n._showTraceResultFunctions=!1,n._showTraceResultAssetGroup=!1,n._showTraceResultAssetType=!1,n._showIndividualRecords=!1,n._activeTab="input",n._flagViewType="starting-point",n._alertRemoveModal=!1,n._warningNoFlag=!1,n._warningNoTraceSelected=!1,n._warningNoStartAssetFound=!1,n._warningNoBarrierAssetFound=!1,n._warningNoTerminal=!1,n._confirmReset=!1,n._showResultOptions=!1,n._resultObjectIdField="objectid",n._resultDisplayField="objectid",n._resultSortField="objectid",n._resultSortOrder="desc",n._swatchNode=null,n._individualResultNode=null,n._symbolStartFlag=null,n._symbolBarrier=null,n._watchHandler=null,n._loadUNError=!0,n._errorMessage="",n.disabled=!0,n.inputSettings=[],n.messages=null,n.messagesCommon=null,n.messagesUnits=null,n.viewModel=new _e,n._afterComponentCreate=n._afterComponentCreate.bind((0,u.Z)(n)),n}return(0,s.Z)(h,[{key:"initialize",value:function(){var e=this;this._utilityNetworkTraceInitialized(),this.addHandles((0,p.watch)((function(){var t;return null===(t=e.viewModel)||void 0===t?void 0:t.resultAreaProperties}),(function(){return e.scheduleRender()})))}},{key:"defaultGraphicColor",get:function(){return this.viewModel.defaultGraphicColor},set:function(e){this.viewModel.defaultGraphicColor=e}},{key:"flags",get:function(){return this.viewModel.flags},set:function(e){this.viewModel.flags=e}},{key:"gdbVersion",get:function(){return this.viewModel.gdbVersion},set:function(e){this.viewModel.gdbVersion=e}},{key:"icon",get:function(){return"utility-network-trace"},set:function(e){this._overrideIfSome("icon",e)}},{key:"label",get:function(){var e,t;return null!==(e=null===(t=this.messages)||void 0===t?void 0:t.widgetLabel)&&void 0!==e?e:""},set:function(e){this._overrideIfSome("label",e)}},{key:"resultAreaProperties",get:function(){return this.viewModel.resultAreaProperties},set:function(e){this.viewModel.resultAreaProperties=e}},{key:"selectedTraces",get:function(){return this.viewModel.selectedTraces},set:function(e){this.viewModel.selectedTraces=e}},{key:"selectOnComplete",get:function(){return this.viewModel.selectOnComplete},set:function(e){this.viewModel.selectOnComplete=e}},{key:"showGraphicsOnComplete",get:function(){return this.viewModel.showGraphicsOnComplete},set:function(e){this.viewModel.showGraphicsOnComplete=e}},{key:"enableResultArea",get:function(){return this.viewModel.enableResultArea},set:function(e){this.viewModel.enableResultArea=e}},{key:"showSelectionAttributes",get:function(){return this.viewModel.showSelectionAttributes},set:function(e){this.viewModel.showSelectionAttributes=e}},{key:"utilityNetwork",get:function(){return this.viewModel.utilityNetwork},set:function(e){this.viewModel.utilityNetwork=e}},{key:"view",get:function(){return this.viewModel.view},set:function(e){this.viewModel.view=e}},{key:"checkCanTrace",value:function(){var e=(0,l.Z)((0,a.Z)().mark((function e(){var t,r=this;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._confirmReset=!1,!(t=this.viewModel.checkCanTrace()).status){e.next=19;break}return this._warningNoFlag=!1,this._warningNoTraceSelected=!1,this._warningNoTraceSelected=!1,this._warningNoTerminal=!1,this._showTraceResultFunctions=!1,this._showTraceResultAssetGroup=!1,this._showTraceResultAssetType=!1,this._showIndividualRecords=!1,this.switchTab("result"),this.viewModel._activeProgress=!0,this.viewModel.removeAllResultAreaGraphics(),e.next=16,this.viewModel.callTrace();case 16:this.viewModel._activeProgress=!1,e.next=20;break;case 19:t.issues.forEach((function(e){switch(e){case"noStart":r._warningNoFlag=!0;break;case"noTerminalSelected":r._warningNoTerminal=!0;break;default:r._warningNoTraceSelected=!0}}));case 20:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"confirmReset",value:function(){this._confirmReset=!0}},{key:"render",value:function(){var e=this.viewModel.state;this._mixCustomStrings(),this._overrideFlagSymbol();var t="loading"===e?this._renderWarningMessage("noTraceConfig",!1):this._renderUtilityNetworkTrace();return(0,T.u)("div",{class:this.classes(Se.base,w.z.widget,w.z.panel,(0,i.Z)({},w.z.widgetDisabled,this.disabled)),styles:{height:"100%"}},t)}},{key:"loadDependencies",value:function(){return(0,b.h)({action:function(){return Promise.all([r.e(92358),r.e(46895),r.e(65138),r.e(91741)]).then(r.bind(r,6814))},"action-group":function(){return Promise.all([r.e(92358),r.e(46895),r.e(89219),r.e(63839),r.e(65138),r.e(2654),r.e(23635),r.e(70405)]).then(r.bind(r,70405))},"action-pad":function(){return Promise.all([r.e(92358),r.e(46895),r.e(89219),r.e(63839),r.e(65138),r.e(2654),r.e(23635),r.e(11299)]).then(r.bind(r,11299))},block:function(){return Promise.all([r.e(92358),r.e(46895),r.e(89219),r.e(63839),r.e(65138),r.e(2654),r.e(23635),r.e(4758)]).then(r.bind(r,4758))},"block-section":function(){return Promise.all([r.e(92358),r.e(46895),r.e(54438),r.e(93090)]).then(r.bind(r,93090))},button:function(){return Promise.all([r.e(92358),r.e(46895),r.e(54438),r.e(14105),r.e(32275)]).then(r.bind(r,32275))},checkbox:function(){return Promise.all([r.e(92358),r.e(54438),r.e(12424)]).then(r.bind(r,12424))},"color-picker-swatch":function(){return Promise.all([r.e(92358),r.e(97446),r.e(93580)]).then(r.bind(r,93580))},combobox:function(){return Promise.all([r.e(92358),r.e(46895),r.e(54438),r.e(89219),r.e(1579),r.e(34504),r.e(63017),r.e(70419)]).then(r.bind(r,70419))},"combobox-item":function(){return Promise.all([r.e(92358),r.e(15862)]).then(r.bind(r,15862))},flow:function(){return r.e(53049).then(r.bind(r,53049))},"flow-item":function(){return Promise.all([r.e(92358),r.e(46895),r.e(89219),r.e(63839),r.e(65138),r.e(2654),r.e(23635),r.e(89524),r.e(48926)]).then(r.bind(r,48926))},icon:function(){return Promise.all([r.e(92358),r.e(87474)]).then(r.bind(r,87474))},"input-number":function(){return Promise.all([r.e(92358),r.e(46895),r.e(54438),r.e(18135),r.e(77244)]).then(r.bind(r,90460))},label:function(){return Promise.all([r.e(92358),r.e(35738)]).then(r.bind(r,35738))},list:function(){return Promise.all([r.e(92358),r.e(46895),r.e(54438),r.e(34504),r.e(8715),r.e(38782)]).then(r.bind(r,38782))},"list-item":function(){return Promise.all([r.e(92358),r.e(46895),r.e(65138),r.e(21340)]).then(r.bind(r,67994))},loader:function(){return Promise.all([r.e(92358),r.e(46895),r.e(92382)]).then(r.bind(r,92382))},notice:function(){return Promise.all([r.e(92358),r.e(46895),r.e(15669)]).then(r.bind(r,15669))},option:function(){return r.e(19790).then(r.bind(r,19790))},panel:function(){return Promise.all([r.e(92358),r.e(46895),r.e(89219),r.e(63839),r.e(65138),r.e(2654),r.e(23635),r.e(89524),r.e(85026)]).then(r.bind(r,85026))},popover:function(){return Promise.all([r.e(92358),r.e(46895),r.e(89219),r.e(63839),r.e(65138),r.e(2654),r.e(447)]).then(r.bind(r,61580))},scrim:function(){return Promise.all([r.e(92358),r.e(46895),r.e(99174)]).then(r.bind(r,99174))},select:function(){return Promise.all([r.e(92358),r.e(54438),r.e(26369)]).then(r.bind(r,26369))},tab:function(){return Promise.all([r.e(92358),r.e(68266)]).then(r.bind(r,68266))},"tab-nav":function(){return Promise.all([r.e(92358),r.e(46895),r.e(54438),r.e(14105),r.e(74105),r.e(7209)]).then(r.bind(r,7209))},"tab-title":function(){return Promise.all([r.e(92358),r.e(46895),r.e(68073),r.e(73151)]).then(r.bind(r,42006))},tabs:function(){return Promise.all([r.e(92358),r.e(7769)]).then(r.bind(r,7769))},tooltip:function(){return Promise.all([r.e(92358),r.e(89219),r.e(94730)]).then(r.bind(r,94730))}})}},{key:"switchTab",value:function(e){this._activeTab=e}},{key:"switchToFunctions",value:function(e,t){this._traceResultsFunctions=e,this._showTraceResultFunctions=t}},{key:"switchToAssetGroup",value:function(e,t,r){this._traceHeaderForFlow=t,this._traceResultsAssetGroup=e,this._showTraceResultAssetGroup=r}},{key:"switchToAssetType",value:function(e,t,r){this._assetGroupHeader=t,this._traceResultsAssetType=e,this._showTraceResultAssetType=r}},{key:"switchToIndividualRecords",value:function(e,t,r){this._assetTypeHeader=t,this._traceResultsIndividual=e,this._showIndividualRecords=r}},{key:"_renderUtilityNetworkTrace",value:function(){var e=this,t=this.messages,r=this.messagesCommon,n=(0,T.u)("calcite-tabs",{layout:"center",position:"top",styles:Ce(this.container)},(0,T.u)("calcite-tab-nav",{slot:"title-group"},(0,T.u)("calcite-tab-title",{onclick:function(){e.switchTab("input")},selected:"input"===this._activeTab},t.inputsStrings.headerTabInputs),(0,T.u)("calcite-tab-title",{onclick:function(){e.switchTab("result")},selected:"result"===this._activeTab},t.resultsStrings.headerTabResults)),(0,T.u)("calcite-tab",{selected:"input"===this._activeTab},this._renderInputPanel()),(0,T.u)("calcite-tab",{selected:"result"===this._activeTab},this.viewModel._activeProgress?(0,T.u)("calcite-loader",{label:t.alertsStrings.traceExecuting,text:t.alertsStrings.traceExecuting,type:"indeterminate"}):this.viewModel.traceResults.length>0?this._renderResultPanel():this._renderWarningMessage("noTraceExecuted",!1),this._confirmReset?(0,T.u)("calcite-scrim",{key:"prompt"},(0,T.u)("div",{class:Se.clearPrompt},(0,T.u)("h3",{slot:"header"},t.resultsStrings.startOverButton),(0,T.u)("div",{slot:"content"},t.resultsStrings.startOverValidation),(0,T.u)("div",{class:Se.promptDivider}),(0,T.u)("div",{styles:Re("row")},(0,T.u)("calcite-button",{appearance:"outline",onclick:function(){e._confirmReset=!1},slot:"secondary",width:"full"},r.cancel),(0,T.u)("calcite-button",{onclick:function(){e._confirmReset=!1,e.viewModel.reset(),e.switchTab("input")},slot:"primary",width:"full"},r.form.ok)))):null));return 0===this.viewModel.traces.length&&(n=(0,T.u)("calcite-panel",null,this._renderWarningMessage("noTraceConfig",!1))),this._loadUNError||(n=(0,T.u)("calcite-panel",null,this._renderWarningMessage("loadUNError",!1,this._errorMessage))),n}},{key:"_renderInputPanel",value:function(){var e=this,t=this.messages;return(0,T.u)("calcite-flow",{class:Se.flow},(0,T.u)("calcite-flow-item",null,this._warningNoFlag?this._renderWarningMessage("flag",!0):null,this._warningNoTerminal?this._renderWarningMessage("noTerminal",!0):null,this._warningNoTraceSelected?this._renderWarningMessage("trace",!0):null,this._renderTraceSelectorContainer(),this._renderStartFlagsContainer(),this._renderBarriersFlagsContainer(),this._warningNoFlag&&this._warningNoTraceSelected?(0,T.u)("div",{styles:Te(10)}):null,(0,T.u)("calcite-button",{kind:"brand",onclick:function(){e.checkCanTrace()},slot:"footer",width:"full"},t.tracingStrings.runTrace)),this._selectToolActive?this._renderActiveTool():null)}},{key:"_renderResultPanel",value:function(){return(0,T.u)("calcite-flow",{styles:{height:"100%"}},this._renderTraceResults(),this._showTraceResultFunctions?this._renderTraceResultFunctions():null,this._showTraceResultAssetGroup?this._renderTraceResultByAssetGroup():null,this._showTraceResultAssetType?this._renderTraceResultByAssetType():null,this._showIndividualRecords?this._renderTraceResultIndividual():null,this._showIndividualRecords?this._renderTraceResultIndividualPopover():null)}},{key:"_renderStartFlagsContainer",value:function(){var e=this,t=this.messages,r=[],n=[];n=this.viewModel._flags.filter((function(e){return"starting-point"===e.type})),n.forEach((function(t){t.displayValue&&r.push(e._renderFlagRow(t,"start"))}));var i=null;return this._symbolStartFlag&&(i=this._getSymbolIcon(this._symbolStartFlag)),(0,T.u)("calcite-block",{collapsible:!0,heading:t.inputsStrings.headerStartingPoint+" ("+n.length+")",open:!0,overlayPositioning:"fixed"},(0,T.u)("div",{slot:"icon"},i||(0,T.u)("calcite-icon",{icon:"pin",scale:"s"})),(0,T.u)("div",null,t.inputsStrings.startingPointHint),(0,T.u)("div",{class:Se.listContainer},r),this._warningNoStartAssetFound?this._renderWarningMessage("noStartAsset",!0):null,(0,T.u)("div",{class:Se.addButtonContainer},(0,T.u)("calcite-button",{alignment:"center",appearance:"outline",href:"",iconStart:"plus",label:t.inputsStrings.addPointOption,onclick:function(){e._changeCursor("crosshair"),e._flagViewType="starting-point",e._selectToolActive=!0,e._warningNoStartAssetFound=!1,e.viewModel.addFlagByHit("starting-point",e._symbolStartFlag).then((function(t){e._changeCursor("default"),t?e._warningNoFlag=!1:e._warningNoStartAssetFound=!0,e._selectToolActive=!1}))},round:!0})))}},{key:"_renderBarriersFlagsContainer",value:function(){var e=this,t=this.messages,r=[],n=[];n=this.viewModel._flags.filter((function(e){return"barrier"===e.type})),n.forEach((function(t){t.displayValue&&r.push(e._renderFlagRow(t,"barrier"))}));var i=null;return this._symbolBarrier&&(i=this._getSymbolIcon(this._symbolBarrier)),(0,T.u)("calcite-block",{collapsible:!0,heading:t.inputsStrings.headerBarrier+" ("+n.length+")",open:!1,overlayPositioning:"fixed"},(0,T.u)("div",{slot:"icon"},i||(0,T.u)("calcite-icon",{icon:"x-circle-f",scale:"s"})),(0,T.u)("div",null,t.inputsStrings.barrierPointHint),(0,T.u)("div",{class:Se.listContainer},r),this._warningNoBarrierAssetFound?this._renderWarningMessage("noBarrierAsset",!0):null,(0,T.u)("div",{class:Se.addButtonContainer},(0,T.u)("calcite-button",{alignment:"center",appearance:"outline",href:"",iconStart:"plus",kind:"brand",label:t.inputsStrings.addPointOption,onclick:function(){e._changeCursor("crosshair"),e._flagViewType="barrier",e._selectToolActive=!0,e._warningNoBarrierAssetFound=!1,e.viewModel.addFlagByHit("barrier",e._symbolBarrier).then((function(t){e._changeCursor("default"),t||(e._warningNoBarrierAssetFound=!0),e._selectToolActive=!1}))},round:!0})))}},{key:"_renderFlagRow",value:function(e,t){var r,n,i=this,a=this.messages,l=this.messagesCommon,o=[],s=!1;return null!=e.allTerminals&&e.allTerminals.terminals.length>0&&(s=!0,e.allTerminals.terminals.forEach((function(t){var r,n=!1;null!==e&&void 0!==e&&null!==(r=e.selectedTerminals)&&void 0!==r&&r.includes(t.id)&&(n=!0),o.push((0,T.u)("calcite-combobox-item",{key:t.name,selected:n,textLabel:t.name,value:t.id}))}))),(0,T.u)("calcite-block",{collapsible:null!==e.allTerminals||"barrier"===e.type,heading:null!==(r=null===(n=e.displayValue)||void 0===n?void 0:n.value)&&void 0!==r?r:"",key:"pop"+e.globalId+e.type+e.id+t,overlayPositioning:"fixed"},(0,T.u)("calcite-action",{icon:"trash",label:l.remove,onclick:function(){i.viewModel.removeFlag(e)},scale:"s",slot:"header-menu-actions",text:l.remove,textEnabled:!0}),(0,T.u)("calcite-action",{icon:"zoom-to-object",label:a.globalStrings.zoomToFeature,onclick:function(){i.viewModel.zoomToAsset(e.details.geometry)},scale:"s",slot:"header-menu-actions",text:a.globalStrings.zoomToFeature,textEnabled:!0}),"barrier"===e.type?(0,T.u)("calcite-label",{layout:"inline",scale:"s"},(0,T.u)("calcite-checkbox",{checked:e.isFilterBarrier,onclick:function(){i.viewModel.manageFilterBarrier(!e.isFilterBarrier,e)},scale:"s"}),a.inputsStrings.barrierFilter):null,s?(0,T.u)("calcite-combobox",{label:a.globalStrings.selectTerminalPlaceholder,maxItems:0,placeholder:a.globalStrings.selectTerminalPlaceholder,scale:"s",selectionMode:"multiple",onCalciteComboboxChange:function(t){t.target.selectedItems.length>0?(e.selectedTerminals=[],t.target.selectedItems.forEach((function(t){i.viewModel.addTerminal(t.value,e)}))):e.selectedTerminals=[]},onCalciteComboboxChipClose:function(t){t.preventDefault(),i.viewModel.removeTerminal(t.target.value,e)}},o):null)}},{key:"_renderActiveTool",value:function(){var e=this,t=this.messages,r=null;return"starting-point"===this._flagViewType?this._symbolStartFlag&&(r=this._getSymbolIcon(this._symbolStartFlag)):this._symbolBarrier&&(r=this._getSymbolIcon(this._symbolBarrier)),(0,T.u)("calcite-flow-item",{heading:t.inputsStrings.addPointOption,onCalciteFlowItemBack:function(){var t;e.viewModel.removeClickHandler(),null!==(t=e.view)&&void 0!==t&&t.popup&&(e.view.popupEnabled=!0),e._changeCursor("default"),e._selectToolActive=!1}},(0,T.u)("calcite-block",{collapsible:!1,heading:"",open:!0,overlayPositioning:"fixed"},(0,T.u)("div",{styles:{textAlign:"center",padding:"1rem"}},r||(0,T.u)("calcite-icon",{icon:"starting-point"===this._flagViewType?"pin-plus":"x-circle-f"})),(0,T.u)("div",{styles:{textAlign:"center",padding:"1rem"}},t.inputsStrings.addPointHint)))}},{key:"_renderTraceSelectorContainer",value:function(){var e=this,t=this.messages,r=[],n=t.tracingStrings.traceOperation,i=0;return this.viewModel.traces.length>0&&this.viewModel.traces.forEach((function(t){r.push((0,T.u)("calcite-combobox-item",{key:t.globalId,selected:t.selected,textLabel:t.title,value:t.globalId,onCalciteComboboxItemChange:function(t){var r=t.target;e.viewModel.selectTraces(r.selected,r.value),e.viewModel.traces.length>0&&(e._warningNoTraceSelected=!1)}})),t.selected&&i++})),n+=" (".concat(i,")"),(0,T.u)("calcite-block",{collapsible:!0,heading:n,open:!0,overlayPositioning:"fixed"},(0,T.u)("calcite-icon",{icon:"utility-network-trace",scale:"s",slot:"icon"}),(0,T.u)("calcite-combobox",{label:t.inputsStrings.selectTraces,maxItems:0,overlayPositioning:"fixed",placeholder:t.inputsStrings.selectTraces,scale:"s",selectionMode:"multiple"},r))}},{key:"_renderStartOverContainer",value:function(){var e=this,t=this.messages;return(0,T.u)("calcite-button",{kind:"brand",onclick:function(){e.confirmReset()},slot:"footer",width:"full"},t.resultsStrings.startOverButton)}},{key:"_renderWarningMessage",value:function(e,t,r){var n=this,i=this.messages,a=i.alertsStrings.NoRunAlertHeader,l=i.alertsStrings.noResultsInfo;switch(e){case"flag":a=i.alertsStrings.startingPointAlertHeader,l=i.alertsStrings.startingPointAlert;break;case"noTerminal":a=i.alertsStrings.noTerminalDefinedHeader,l=i.alertsStrings.noTerminalDefined;break;case"trace":a=i.alertsStrings.selectTraceAlertHeader,l=i.alertsStrings.selectTraceAlert;break;case"noTraceExecuted":a=i.alertsStrings.NoRunAlertHeader,l=i.alertsStrings.noResultsInfo;break;case"noBarrierAsset":case"noStartAsset":a=i.alertsStrings.noAssetsFoundHeader,l=i.alertsStrings.noAssetFound;break;case"noTraceConfig":a="",l=i.alertsStrings.noTraceSupported;break;default:a=i.alertsStrings.genericErrorHeader,l=r||""}return(0,T.u)("div",{class:Se.noticeContainer,key:e},(0,T.u)("calcite-notice",{closable:t,icon:!0,key:e,kind:"danger",open:!0,scale:"s",width:"auto",onCalciteNoticeClose:function(){switch(e){case"flag":n._warningNoFlag=!1;break;case"noTerminal":n._warningNoTerminal=!1;break;case"trace":n._warningNoTraceSelected=!1;break;case"noStartAsset":n._warningNoStartAssetFound=!1;break;case"noBarrierAsset":n._warningNoBarrierAssetFound=!1}}},(0,T.u)("div",{slot:"title"},a),(0,T.u)("div",{slot:"message"},l)))}},{key:"_renderRemoveTraceContainer",value:function(e){var t=this,r=this.messages;return(0,T.u)("calcite-action",{icon:"trash",label:r.globalStrings.clearResults,onclick:function(){t._alertRemoveModal=!0,t._activeTrace=e.trace},scale:"s",slot:"header-menu-actions",text:r.globalStrings.clearResults,textEnabled:!0})}},{key:"_renderHighlightColorPicker",value:function(e,t,r){var i,a=this,l=this.messages,o=this.viewModel.graphicHandler,s=[],u=new RegExp("^".concat(e.hex,"$"),"i"),c=o.highlightColor.length>ae.length?5:4,d=(0,n.Z)(o.highlightColor);try{var h=function(){var e=i.value;s.push((0,T.u)("calcite-action",{active:u.test(e.hex),key:e.hex,label:l.resultsStrings.graphicColor,onclick:function(){"aggregate"===r?a.viewModel.changeResultGraphicColor(e,t):a.viewModel.changeResultAreaColor(t,e)},scale:"s",text:l.resultsStrings.graphicColor},(0,T.u)("calcite-color-picker-swatch",{active:u.test(e.hex),color:e.hex,scale:"s"})))};for(d.s();!(i=d.n()).done;)h()}catch(p){d.e(p)}finally{d.f()}return(0,T.u)("calcite-action-pad",{expandDisabled:!0,layout:"grid",position:"start"},(0,T.u)("calcite-action-group",{columns:c,layout:"grid"},s))}},{key:"_renderTraceResults",value:function(){var e=this,t=this.messages,r=this.messagesCommon,n=t.resultsStrings.selectFeatures,i=this.viewModel.traceResults,a=[];return i.forEach((function(r,i){var l,o,s,u,c,d,h,p=[],v=[],f=!1,g=!1,y=!1,m="";null!==r.results&&r.results.hasOwnProperty("elements")?(null!==r.results.aggregatedGeometry&&(g=!0),null!==r.results.globalFunctionResults&&r.results.globalFunctionResults.length>0&&((v=r.results.globalFunctionResults).length>0&&(y=!0)),r.results.elements&&r.results.elements.length>0&&((p=r.results.elements).length>0&&(f=!0)),(g||f)&&(m=null===(l=e.messagesUnits.units[null===(o=r.resultArea)||void 0===o?void 0:o.unit])||void 0===l?void 0:l.abbr),a.push((0,T.u)("calcite-block",{collapsible:!0,description:null!==(s=r.trace.description)&&void 0!==s?s:"",heading:r.trace.title,key:"".concat(r.trace.title).concat(i),open:!0,overlayPositioning:"fixed"},e._renderRemoveTraceContainer(r),(0,T.u)("calcite-list",null,y?(0,T.u)("calcite-list-item",{label:t.resultsStrings.functionHeader+" ("+v.length+")",onCalciteListItemSelect:function(){e.switchToFunctions(v,!0)}},(0,T.u)("calcite-icon",{icon:"chevron-right",scale:"s",slot:"content-end"})):null,f&&e.viewModel.showSelectionAttributes?(0,T.u)("calcite-list-item",{key:e.id,label:t.resultsStrings.viewFeatures+" ("+p.length+")",onCalciteListItemSelect:function(){e.switchToAssetGroup(e._groupResultsByAssetGroup(r),r.trace.title+" ("+p.length+")",!0)}},(0,T.u)("calcite-icon",{icon:"chevron-right",scale:"s",slot:"content-end"})):e.viewModel.showSelectionAttributes?(0,T.u)("calcite-label",{layout:"inline",scale:"s"},t.resultsStrings.noSelectionResults):null),f?(0,T.u)("div",{class:Se.paddingTop},(0,T.u)("calcite-label",{layout:"inline",onclick:function(t){t.preventDefault(),t.stopPropagation(),e.viewModel.mergeSelection(!r.selectionEnabled,r.trace)},scale:"s"},(0,T.u)("calcite-checkbox",{checked:r.selectionEnabled,onclick:function(t){t.preventDefault(),t.stopPropagation(),e.viewModel.mergeSelection(!r.selectionEnabled,r.trace)}}),e.viewModel.showSelectionAttributes?n:"".concat(n," (").concat(p.length,")"))):null,g?(0,T.u)("calcite-block-section",{key:"aggregate-".concat(r.trace.title,"-").concat(i),open:r.graphicEnabled,text:t.resultsStrings.highlightTrace,toggleDisplay:"switch",onCalciteBlockSectionToggle:function(t){t.target.open?e.viewModel.changeResultGraphicColor(r.graphicColor,r):e.viewModel.removeResultGraphicFromView(r)}},(0,T.u)("calcite-list",{selectionMode:"none"},(0,T.u)("calcite-list-item",{label:t.resultsStrings.graphicColor,onclick:function(t){var r=t.target;e._swatchNode=r,e._activeSwatch="aggGeom_"+i}},(0,T.u)("calcite-color-picker-swatch",{color:r.graphicColor.hex,scale:"s",slot:"actions-end"})))):null,e.enableResultArea&&(g||f)?(0,T.u)("calcite-block-section",{key:"area-".concat(r.trace.title,"-").concat(i),open:null===(u=r.resultArea)||void 0===u?void 0:u.show,text:t.resultsStrings.resultAreaHeader,toggleDisplay:"switch",onCalciteBlockSectionToggle:function(t){t.target.open?r.resultAreaGraphic?e.viewModel.addResultAreaToMap(r,r.resultAreaGraphic):e.viewModel.addResultAreaToMap(r):e.viewModel.removeResultAreaFromMap(r)}},(0,T.u)("calcite-list",{selectionMode:"none"},(0,T.u)("calcite-list-item",{label:t.resultsStrings.graphicColor,onclick:function(t){var r=t.target;e._swatchNode=r,e._activeSwatch="resultArea_"+i}},(0,T.u)("calcite-color-picker-swatch",{color:null===(c=r.resultArea)||void 0===c?void 0:c.color.hex,scale:"s",slot:"actions-end"}))),(0,T.u)("calcite-list",{selectionMode:"none"},(0,T.u)("calcite-list-item",{label:t.resultsStrings.resultAreaBuffer},(0,T.u)("calcite-input-number",{afterCreate:e._afterComponentCreate,class:Se.numberInput,max:999999,maxLength:999999,min:0,scale:"s",slot:"actions-end",suffixText:m,value:null===(d=r.resultArea)||void 0===d?void 0:d.distance.toString(),onCalciteInputNumberChange:function(t){var n;if(null!==(n=e.view)&&void 0!==n&&n.popup){e.view.popup.visible&&e.view.closePopup();var i=t.target;r.resultArea.distance>=0?(r.resultArea.distance=parseInt(i.value,10),e.viewModel.removeResultAreaFromMap(r),e.viewModel.addResultAreaToMap(r)):(r.resultArea.distance=0,e.viewModel.removeResultAreaFromMap(r),e.viewModel.addResultAreaToMap(r))}}})))):null,(0,T.u)("calcite-popover",{autoClose:!0,closable:!0,label:t.resultsStrings.graphicColor,offsetDistance:0,offsetSkidding:0,open:e._activeSwatch==="aggGeom_"+i||e._activeSwatch==="resultArea_"+i,placement:"auto-start",referenceElement:e._swatchNode,scale:"s",onCalcitePopoverClose:function(){e._swatchNode=null,e._activeSwatch=null}},e._renderHighlightColorPicker(e._activeSwatch==="resultArea_"+i?null===(h=r.resultArea)||void 0===h?void 0:h.color:r.graphicColor,r,e._activeSwatch==="resultArea_"+i?"resultArea":"aggregate"))))):a.push((0,T.u)("calcite-block",{collapsible:!1,heading:r.trace.title,key:"error-"+i,open:!0,overlayPositioning:"fixed"},e._renderRemoveTraceContainer(r),e._renderWarningMessage("noController",!1,r.status)))})),(0,T.u)("calcite-flow-item",{key:"traceResults",styles:{height:"100%"}},a,this._renderStartOverContainer(),this._alertRemoveModal?(0,T.u)("calcite-scrim",{key:"prompt"},(0,T.u)("div",{class:Se.clearPrompt},(0,T.u)("h3",{slot:"header"},t.globalStrings.clearResults),(0,T.u)("div",{slot:"content"},t.alertsStrings.clearResultsAlert),(0,T.u)("div",{class:Se.promptDivider}),(0,T.u)("div",{styles:Re("row")},(0,T.u)("calcite-button",{appearance:"outline",onclick:function(){e._alertRemoveModal=!1},slot:"secondary",width:"full"},r.cancel),(0,T.u)("calcite-button",{onclick:function(){e._activeTrace&&e.viewModel.clearResult(e._activeTrace),e._alertRemoveModal=!1,0===e.viewModel.traceResults.length?e.switchTab("input"):(e._activeTrace=e.viewModel.traceResults[0].trace,e._showTraceResultFunctions=!1,e._showTraceResultAssetGroup=!1,e._showTraceResultAssetType=!1,e._showIndividualRecords=!1)},slot:"primary",width:"full"},r.form.ok)))):null)}},{key:"_renderTraceResultFunctions",value:function(){var e=this,t=this.messages,r=this._traceResultsFunctions,n=[];return r.forEach((function(t){n.push(e._renderResultRowFunctions(t))})),(0,T.u)("calcite-flow-item",{heading:t.resultsStrings.functionHeader,key:"functionResultMultiple",onCalciteFlowItemBack:function(){e.switchToFunctions([],!1)}},n,this._renderStartOverContainer())}},{key:"_renderTraceResultByAssetGroup",value:function(){var e=this,t=this._traceResultsAssetGroup,r=[];for(var n in t){var i=t[n];for(var a in i)r.push(this._renderResultRowAssetGroup(i[a]))}return(0,T.u)("calcite-flow-item",{heading:this._traceHeaderForFlow,key:"assetGroupResultMultiple",onCalciteFlowItemBack:function(){e.switchToAssetGroup([],"",!1)}},(0,T.u)("calcite-list",null,r),this._renderStartOverContainer())}},{key:"_renderTraceResultByAssetType",value:function(){var e=this,t=this._traceResultsAssetType,r=[];for(var n in t)t[n].length>0&&r.push(this._renderResultRowAssetType(t[n]));return(0,T.u)("calcite-flow-item",{heading:this._assetGroupHeader,key:"assetTypeResult",onCalciteFlowItemBack:function(){e.switchToAssetType([],"",!1)}},(0,T.u)("calcite-list",{selectionMode:"none"},r),this._renderStartOverContainer())}},{key:"_renderTraceResultIndividual",value:function(){var e=this,t=this.messages,r=this._traceResultsIndividual;r.sort(this._compare(this._resultSortField,this._resultSortOrder));var n,i,a=[];r.length>0&&(null!==(n=null===(i=r[0].details)||void 0===i?void 0:i.fields.some((function(t){return t.name.toLowerCase()===e._resultDisplayField.toLocaleLowerCase()})))&&void 0!==n&&n||(this._resultDisplayField=this._resultObjectIdField,this._resultSortField=this._resultObjectIdField),r.forEach((function(t){(null===t||void 0===t?void 0:t.details)&&a.push(e._renderResultRowIndividual(t))})),0===a.length&&a.push((0,T.u)("calcite-list-item",{label:t.resultsStrings.noFeaturesInMap})));return(0,T.u)("calcite-flow-item",{heading:this._assetTypeHeader,key:"individualResult",onCalciteFlowItemBack:function(){e._showResultOptions=!1,e.switchToIndividualRecords([],"",!1)}},(0,T.u)("calcite-action",{afterCreate:_.Yo,bind:this,"data-node-ref":"_individualResultNode",icon:"gear",id:"field_options"+this.id,label:t.resultsStrings.displayAttribute,onclick:function(){e._showResultOptions=!0},slot:"header-actions-end",text:t.resultsStrings.displayAttribute}),(0,T.u)("calcite-list",{selectionMode:"none"},a),this._renderStartOverContainer())}},{key:"_renderTraceResultIndividualPopover",value:function(){var e=this,t=this.messages,r=this._traceResultsIndividual,n=[],i=[];return r.length>0&&(r[0].details?r[0].details.fields.forEach((function(t){var r=t.name,a=t.alias;n.push((0,T.u)("calcite-option",{key:"display-".concat(r),label:null!==a&&void 0!==a?a:r,selected:r===e._resultDisplayField,value:r})),i.push((0,T.u)("calcite-option",{key:"sort-".concat(r),label:null!==a&&void 0!==a?a:r,selected:r===e._resultSortField,value:r}))})):(n.push((0,T.u)("calcite-option",{key:"display-".concat(this._resultDisplayField),label:this._resultDisplayField,value:this._resultDisplayField})),i.push((0,T.u)("calcite-option",{key:"sort-".concat(this._resultDisplayField),label:this._resultDisplayField,value:this._resultDisplayField})))),(0,T.u)("calcite-popover",{autoClose:!0,label:t.resultsStrings.displayAttribute,offsetDistance:0,offsetSkidding:0,open:this._showResultOptions,overlayPositioning:"fixed",placement:"left-start",referenceElement:this._individualResultNode,styles:null!==this.domNode?Ae(.75*this.domNode.clientWidth):{width:"75%"}},(0,T.u)("calcite-block",{heading:"",open:!0,overlayPositioning:"fixed"},(0,T.u)("calcite-label",{scale:"s"},t.resultsStrings.displayAttribute,(0,T.u)("calcite-select",{label:t.resultsStrings.displayAttribute,scale:"s",onCalciteSelectChange:function(t){var r=t.target;e._resultDisplayField=r.selectedOption.value,e._showResultOptions=!1}},n)),(0,T.u)("calcite-label",{scale:"s"},t.resultsStrings.sortBy,(0,T.u)("calcite-select",{label:t.resultsStrings.sortBy,scale:"s",onCalciteSelectChange:function(t){var n=t.target;e._resultSortField=n.selectedOption.value,r.sort(e._compare(e._resultSortField,e._resultSortOrder)),e._traceResultsIndividual=r,e._showResultOptions=!1}},i))))}},{key:"_renderResultRowFunctions",value:function(e){return(0,T.u)("calcite-block",{collapsible:!1,heading:e.networkAttributeName+" "+e.functionType+" = "+e.result,overlayPositioning:"fixed"})}},{key:"_renderResultRowAssetGroup",value:function(e){var t=this,r=this._getAssetGroupName(e[0]);return(0,T.u)("calcite-list-item",{label:r+" ("+e.length+")",onCalciteListItemSelect:function(){t.switchToAssetType(t._groupResultsByAssetType(e),r+" ("+e.length+")",!0)}},(0,T.u)("calcite-icon",{icon:"chevron-right",scale:"s",slot:"content-end"}))}},{key:"_renderResultRowAssetType",value:function(e){var t=this,r=this._getAssetTypeName(e[0]);return(0,T.u)("calcite-list-item",{label:r+" ("+e.length+")",onCalciteListItemSelect:function(){t.viewModel.queryFeaturesById(e).then((function(n){if(null!==n&&void 0!==n&&n.length){t._resultObjectIdField=n[0].layer.objectIdField,"objectid"===t._resultDisplayField&&(t._resultDisplayField=n[0].layer.objectIdField),"objectid"===t._resultSortField&&(t._resultSortField=n[0].layer.objectIdField);var i=t._appendAttributes(e,n,"objectId");t.switchToIndividualRecords(i,r+" ("+e.length+")",!0)}else t.switchToIndividualRecords(e,r+" ("+e.length+")",!0)}))}},(0,T.u)("calcite-icon",{icon:"chevron-right",scale:"s",slot:"content-end"}))}},{key:"_renderResultRowIndividual",value:function(e){var t,r,n,i,a,l,o=this,s=this.messages,u="display-".concat(e.objectId,"-nso"),c=s.globalStrings,d=c.nonSpatialObject,h=c.zoomToFeature,p="",v=null;if("date"===(null===(r=v=null===e||void 0===e||null===(t=e.details)||void 0===t?void 0:t.fields.find((function(e){return e.name===o._resultDisplayField})))||void 0===r?void 0:r.type))p=new Date(e.details.attributes[this._resultDisplayField]).toDateString();else if("assetgroup"===this._resultDisplayField.toLowerCase())p=this._getAssetGroupName(e);else if("assettype"===this._resultDisplayField.toLowerCase())p=this._getAssetTypeName(e);else if(null!==(n=v)&&void 0!==n&&n.domain&&function(e){return e instanceof y.Z}(v.domain)){var f=v.domain.codedValues.find((function(t){return t.code===e.details.attributes[o._resultDisplayField]}));p=null===f||void 0===f?void 0:f.name}else p=null!==(i=null===(a=e.details)||void 0===a?void 0:a.attributes[this._resultDisplayField])&&void 0!==i?i:e.objectId;return p&&""!==p&&null!==p?"string"==typeof p&&(p.trim()||(p=s.resultsStrings.noValue)):p=s.resultsStrings.noValue,null!==(null===e||void 0===e||null===(l=e.details)||void 0===l?void 0:l.geometry)?(0,T.u)("calcite-list-item",{label:p,onCalciteListItemSelect:function(){o.viewModel.zoomToAsset(e.details.geometry)}},(0,T.u)("calcite-icon",{icon:"zoom-to-object",scale:"s",slot:"content-end",textLabel:h})):(0,T.u)("calcite-list-item",{label:p},(0,T.u)("calcite-icon",{icon:"table",id:u,scale:"s",slot:"content-end",textLabel:d}),(0,T.u)("calcite-tooltip",{label:d,referenceElement:u},(0,T.u)("span",null,d)))}},{key:"_afterComponentCreate",value:function(e){"value"in e&&null!=e.value&&"setNumberValue"in e&&e.setNumberValue({committing:!1,value:e.value,origin:"direct"})}},{key:"_mixCustomStrings",value:function(){var e=this.messages;this.inputSettings.length>0&&this.inputSettings.forEach((function(t){"starting-point"===t.type&&(e.inputsStrings.headerStartingPoint=t.label,e.inputsStrings.startingPointHint=t.description),"barrier"===t.type&&(e.inputsStrings.headerBarrier=t.label,e.inputsStrings.barrierPointHint=t.description)}))}},{key:"_overrideFlagSymbol",value:function(){var e=this;this.inputSettings.length>0&&this.inputSettings.forEach((function(t){"starting-point"===t.type?e._symbolStartFlag=t.symbol:e._symbolBarrier=t.symbol,e.viewModel.changeFlagSymbol(t.type,t.symbol)}))}},{key:"_utilityNetworkTraceInitialized",value:function(){var e=this;return this.viewModel.loadUtilityNetwork().then((function(t){var r;if(t)return e.viewModel.selectTracesOnLoad(),e._registerWatchers(),e.viewModel.flags.length>0&&e._processFlagOnLoad(),null===(r=e.view)||void 0===r?void 0:r.when().then((function(){e._watchViewState()}));e.disabled=!1})).catch((function(t){var r=e.messages;e._loadUNError=!1,"utility-network:no-user-type-extension"===t.name||t.details.raw.extendedCode===Fe?e._errorMessage=r.alertsStrings.noUserExtension:e._errorMessage=t.message,e.disabled=!1}))}},{key:"_processFlagOnLoad",value:function(){var e,t=this;return null===(e=this.view)||void 0===e?void 0:e.when().then((function(){t._watchHandler=(0,p.when)((function(){var e;return!(null!==(e=t.view)&&void 0!==e&&e.updating)}),(0,l.Z)((0,a.Z)().mark((function e(){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._warningNoFlag=!1,t._warningNoBarrierAssetFound=!1,t._warningNoStartAssetFound=!1,e.next=3,t.viewModel.addFlagsOnLoad();case 3:r=e.sent,t.viewModel.removeFlagsOnLoadWatcher(),r.includes("barrier")&&(t._warningNoBarrierAssetFound=!0),r.includes("starting-point")&&(t._warningNoStartAssetFound=!0),t.disabled=!1,null!==t._watchHandler&&t._watchHandler.remove();case 5:case"end":return e.stop()}}),e)}))))}))}},{key:"_registerWatchers",value:function(){var e=this;this.addHandles([(0,p.watch)((function(){return e.selectedTraces}),(function(){e.viewModel.selectTracesOnLoad(),e.scheduleRender()})),(0,p.watch)((function(){return e.defaultGraphicColor}),(function(){e.viewModel.traceResults.length>0&&e.viewModel.traceResults.forEach((function(t){e.viewModel.changeResultGraphicColor(e.viewModel.defaultGraphicColor,t)})),e.scheduleRender()}))])}},{key:"_groupResultsByAssetGroup",value:function(e){var t,r=[],n=null===(t=e.results)||void 0===t?void 0:t.elements,i=this._groupBy(null!==n&&void 0!==n?n:[],"networkSourceId");for(var a in i)r.push(this._groupBy(i[a],"assetGroupCode"));return r}},{key:"_groupResultsByAssetType",value:function(e){return this._groupBy(e,"assetTypeCode")}},{key:"_appendAttributes",value:function(e,t,r){var n=this,i=[];return e.forEach((function(e){t.forEach((function(t){t.featureSet.features.forEach((function(a){e[r]===a.attributes[n._resultObjectIdField]&&(e.details=a,e.details.fields=t.featureSet.fields,i.push(e))}))}))})),i}},{key:"_getAssetGroupName",value:function(e){var t=e.assetGroupCode.toString(),r=e.assetGroupCode,n=this.viewModel.getValidSources().find((function(t){return t.sourceId===e.networkSourceId}));if(n){var i=n.assetGroups.find((function(e){return e.assetGroupCode===r}));i&&(t=i.assetGroupName)}return t}},{key:"_getAssetTypeName",value:function(e){var t=e.assetTypeCode.toString(),r=e.assetGroupCode,n=this.viewModel.getValidSources().find((function(t){return t.sourceId===e.networkSourceId}));if(n){var i=n.assetGroups.find((function(e){return e.assetGroupCode===r}));if(i){var a=i.assetTypes.find((function(t){return t.assetTypeCode===e.assetTypeCode}));a&&(t=a.assetTypeName)}}return t}},{key:"_compare",value:function(e,t){return function(r,n){var i,a,l,o,s=0,u=null!==(i=null===(a=r.details)||void 0===a?void 0:a.attributes[e])&&void 0!==i?i:r.objectId,c=null!==(l=null===(o=n.details)||void 0===o?void 0:o.attributes[e])&&void 0!==l?l:n.objectId;return isNaN(u)&&(u=u.toLowerCase()),isNaN(c)&&(c=c.toLowerCase()),"desc"===t?u>c?s=1:u<c&&(s=-1):u<c?s=1:u>c&&(s=-1),s}}},{key:"_groupBy",value:function(e,t){return e.reduce((function(e,r){return(e[r[t]]=e[r[t]]||[]).push(r),e}),{})}},{key:"_getSymbolIcon",value:function(e){var t;return"picture-marker"===e.type?(0,T.u)("img",{height:e.height,src:null!==(t=e.url)&&void 0!==t?t:void 0,width:e.width}):null}},{key:"_watchViewState",value:function(){var e=this;this._watchHandler=(0,p.when)((function(){var t;return!(null!==(t=e.view)&&void 0!==t&&t.updating)}),(function(){e.disabled=!1,null!==e._watchHandler&&e._watchHandler.remove()}),{initial:!0})}},{key:"_changeCursor",value:function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",n=null===(e=this.view)||void 0===e||null===(t=e.container)||void 0===t?void 0:t.style;n&&(n.cursor=r)}}]),h}(m.Z);(0,h._)([(0,v.Cb)()],xe.prototype,"_selectToolActive",void 0),(0,h._)([(0,v.Cb)()],xe.prototype,"_activeTrace",void 0),(0,h._)([(0,v.Cb)()],xe.prototype,"_activeSwatch",void 0),(0,h._)([(0,v.Cb)()],xe.prototype,"_traceHeaderForFlow",void 0),(0,h._)([(0,v.Cb)()],xe.prototype,"_assetGroupHeader",void 0),(0,h._)([(0,v.Cb)()],xe.prototype,"_assetTypeHeader",void 0),(0,h._)([(0,v.Cb)()],xe.prototype,"_traceResultsFunctions",void 0),(0,h._)([(0,v.Cb)()],xe.prototype,"_traceResultsAssetGroup",void 0),(0,h._)([(0,v.Cb)()],xe.prototype,"_traceResultsAssetType",void 0),(0,h._)([(0,v.Cb)()],xe.prototype,"_traceResultsIndividual",void 0),(0,h._)([(0,v.Cb)()],xe.prototype,"_showTraceResultFunctions",void 0),(0,h._)([(0,v.Cb)()],xe.prototype,"_showTraceResultAssetGroup",void 0),(0,h._)([(0,v.Cb)()],xe.prototype,"_showTraceResultAssetType",void 0),(0,h._)([(0,v.Cb)()],xe.prototype,"_showIndividualRecords",void 0),(0,h._)([(0,v.Cb)()],xe.prototype,"_activeTab",void 0),(0,h._)([(0,v.Cb)()],xe.prototype,"_alertRemoveModal",void 0),(0,h._)([(0,v.Cb)()],xe.prototype,"_warningNoFlag",void 0),(0,h._)([(0,v.Cb)()],xe.prototype,"_warningNoTraceSelected",void 0),(0,h._)([(0,v.Cb)()],xe.prototype,"_confirmReset",void 0),(0,h._)([(0,v.Cb)()],xe.prototype,"_swatchNode",void 0),(0,h._)([(0,v.Cb)()],xe.prototype,"_errorMessage",void 0),(0,h._)([(0,v.Cb)()],xe.prototype,"defaultGraphicColor",null),(0,h._)([(0,v.Cb)()],xe.prototype,"disabled",void 0),(0,h._)([(0,v.Cb)()],xe.prototype,"flags",null),(0,h._)([(0,v.Cb)()],xe.prototype,"gdbVersion",null),(0,h._)([(0,v.Cb)()],xe.prototype,"icon",null),(0,h._)([(0,v.Cb)()],xe.prototype,"inputSettings",void 0),(0,h._)([(0,v.Cb)()],xe.prototype,"label",null),(0,h._)([(0,v.Cb)(),(0,k.H)("esri/widgets/UtilityNetworkTrace/t9n/UtilityNetworkTrace")],xe.prototype,"messages",void 0),(0,h._)([(0,v.Cb)(),(0,k.H)("esri/t9n/common")],xe.prototype,"messagesCommon",void 0),(0,h._)([(0,v.Cb)(),(0,k.H)("esri/core/t9n/Units")],xe.prototype,"messagesUnits",void 0),(0,h._)([(0,v.Cb)()],xe.prototype,"resultAreaProperties",null),(0,h._)([(0,v.Cb)()],xe.prototype,"selectedTraces",null),(0,h._)([(0,v.Cb)()],xe.prototype,"selectOnComplete",null),(0,h._)([(0,v.Cb)()],xe.prototype,"showGraphicsOnComplete",null),(0,h._)([(0,v.Cb)()],xe.prototype,"enableResultArea",null),(0,h._)([(0,v.Cb)()],xe.prototype,"showSelectionAttributes",null),(0,h._)([(0,v.Cb)()],xe.prototype,"utilityNetwork",null),(0,h._)([(0,v.Cb)()],xe.prototype,"view",null),(0,h._)([(0,S.s)(["add-flag","add-flag-complete","add-flag-error","select-features","clear-selection","add-result-area","remove-result-area","create-result-area"]),(0,v.Cb)({type:_e})],xe.prototype,"viewModel",void 0);var Ie=xe=(0,h._)([(0,g.j)("esri.widgets.UtilityNetworkTrace")],xe)},28907:function(e,t,r){r.d(t,{s:function(){return i}});var n=r(93433);function i(e){return function(t){t.hasOwnProperty("_delegatedEventNames")||(t._delegatedEventNames=t._delegatedEventNames?t._delegatedEventNames.slice():[]);var r=t._delegatedEventNames,i=Array.isArray(e)?e:function(e){return e.split(",").map((function(e){return e.trim()}))}(e);r.push.apply(r,(0,n.Z)(i))}}}}]);
//# sourceMappingURL=65812.016bab54.chunk.js.map