"use strict";(self.webpackChunkreact_training=self.webpackChunkreact_training||[]).push([[67667],{73238:function(e,t,r){r.d(t,{$E:function(){return Q},$R:function(){return k},Bl:function(){return L},FB:function(){return R},I6:function(){return Z},IE:function(){return q},Je:function(){return U},Li:function(){return F},Lm:function(){return j},MP:function(){return $},Ns:function(){return M},Pk:function(){return Y},Pr:function(){return T},Uf:function(){return A},V$:function(){return E},V7:function(){return C},Vs:function(){return b},Wh:function(){return m},ZP:function(){return D},_n:function(){return g},cs:function(){return z},ib:function(){return _},ll:function(){return P},m1:function(){return x},of:function(){return V},ql:function(){return W},sq:function(){return I},wz:function(){return S},xy:function(){return w},zN:function(){return J}});var n=r(1413),o=r(29439),u=r(93433),i=(r(59166),r(63780)),l=r(41644),a=r(84652),s=r(32718),d=r(643),c=r(73813),y=r(39638),p=r(37270),f=r(62734),v=r(83651),h=r(8704),b=function(e){return"field"===(null===e||void 0===e?void 0:e.type)},_=function(e){return"group"===(null===e||void 0===e?void 0:e.type)},C=function(e){return"relationship"===(null===e||void 0===e?void 0:e.type)},m=function(e){return"text"===e.type},g=function(e){return!_(e)&&null!=e.group},F=function(e){return e.reduce((function(e,t){return _(t)?[].concat((0,u.Z)(e),(0,u.Z)(t.inputs)):[].concat((0,u.Z)(e),[t])}),[])},q=function(e){return F(e).filter(b)},x=function(e){return F(e).filter(C)},w=function(e){return null!=e&&(Z(e,"combo-box")||Z(e,"radio-buttons"))},Z=function(e,t){var r;return null!=e&&(null===(r=e.input)||void 0===r?void 0:r.type)===t},A=function(e){return null!=e&&(Z(e,"text-box")||Z(e,"text-area"))},P=function(e){var t=e.domain,r=e.inputType,n=void 0===r?"text-box":r;return"number"===e.dataType&&"text-box"===n&&(!t||"coded-value"!==t.type)},k=function(e){return"items"in e};function I(e){var t=e.attributes,r=e.fieldsIndex,n=e.label,u=e.timeZone;if(!t||"object"!=typeof t)return n;var l=Object.keys(t).filter((function(e){return(0,d.pZ)(n,e)})),a=l.map((function(e){return t[e]})),s=l.map((function(e){return r.get(e)})).filter(i.pC);return function(e,t){return(0,d.gx)((0,d.gx)(e,(function(e){return"{".concat(e.toLowerCase(),"}")})),Object.fromEntries(Object.entries(t).map((function(e){var t=(0,o.Z)(e,2),r=t[0],n=t[1];return[r.toLowerCase(),n]}))))}(n,L({values:a,fields:s,timeZone:u}))}var O="expression/";function V(e){var t=e.split(O),r=(0,o.Z)(t,2),n=r[0],u=r[1];return""===n&&u?u:(s.Z.getLogger("esri.widgets.FeatureForm/featureFormUtils").error("extractExpressionNameFromString:invalid-input","The string ".concat(e," is not a valid expression reference of the form '").concat(O,"/expressionName'")),"")}function E(e){return"".concat(O).concat(e)}function j(e){return"".concat("field/").concat(e)}function T(e){return e.startsWith(O)}function R(e){return e.startsWith("expr/")}function L(e){var t,r=e.fields,o=e.values,u=null!==(t=e.timeZone)&&void 0!==t?t:void 0,i=r.map((function(e,t){var r=o[t];if(e.domain&&"coded-value"===e.domain.type){var i=e.domain.codedValues.find((function(e){return e.code===r}));(null===i||void 0===i?void 0:i.name)&&(r=i.name)}return((0,f.a8)(e)||(0,p.sX)(e))&&(r=(0,v.sx)(e,r,(0,n.Z)({timeZone:u},(0,v.fu)(e)))),[e.name,r]}));return Object.fromEntries(i)}var M,N,D=function(e){var t,r,n,o,u,i,l,a={typeFieldName:null,types:[]};return e?("subtype-sublayer"===e.type?(a.typeFieldName=null===(t=e.parent)||void 0===t?void 0:t.subtypeField,a.types=null!==(r=null===(n=e.parent)||void 0===n?void 0:n.subtypes)&&void 0!==r?r:[]):"subtype-group"===e.type||"feature"===e.type&&null!==(o=e.subtypes)&&void 0!==o&&o.length?(a.typeFieldName=e.subtypeField,a.types=null!==(u=e.subtypes)&&void 0!==u?u:[]):"types"in e&&e.types&&(a.typeFieldName=e.typeIdField,a.types=e.types.map((function(e){return{code:e.id,name:e.name,domains:e.domains}}))),null!=a.typeFieldName&&(a.typeFieldName=null!==(i=null===(l=e.getField(a.typeFieldName))||void 0===l?void 0:l.name)&&void 0!==i?i:a.typeFieldName),a):a},Q=function(e,t){if(!e)return!0;var r=e.operations;switch(t){case"INSERT":return r.supportsAdd;case"UPDATE":case"DELETE":return r.supportsUpdate;default:return!0}};(N=M||(M={})).TOO_SHORT="length-validation-error::too-short",N.TOO_LONG="length-validation-error::too-long";var B={type:"number"},H={type:"number",intlOptions:{notation:"scientific"}};function G(e){return e>=1e7||e<=-1e7}var U=function(e,t,r){var o=e.dataType,u=e.error,i=e.minLength,l=e.value,a=e.required,s=null===t||void 0===t?void 0:t.validationErrors;if(!s||!u)return null;if(a&&null===l)return s.cannotBeNull;if(u===y.V$.VALUE_OUT_OF_RANGE||u===p.M$.OUT_OF_RANGE){var d=e.field,c=e.range,f={type:"date",intlOptions:(0,n.Z)({timeZone:"date"===d.type&&r?r:void 0},(0,v.fu)(d))},b=function(e,t){var r=t.validationErrors;return null!=e.max&&null!=e.min?r.outsideRange:null!=e.max?r.outsideRangeMax:r.outsideRangeMin}(c,t);return(0,h.n)(b,c,{format:{max:"date"===o?f:null!=c.max&&G(c.max)?H:B,min:"date"===o?f:null!=c.min&&G(c.min)?H:B}})}return u===y.V$.INVALID_CODED_VALUE?s.invalidCodedValue:u===p.Gz.INVALID_TYPE?s.invalidType:u===M.TOO_SHORT?(0,h.n)(s.tooShort,{min:i}):(M.TOO_LONG,null)},$=function(e){var t;if(e){var r=e.layer,n=r&&"geometryType"in r?r.geometryType:void 0,o=null===(t=e.geometry)||void 0===t?void 0:t.type;return"polyline"===o||"polyline"===n?"line":"mesh"===o||"mesh"===n||"multipatch"===n?"cube":"multipoint"===o||"multipoint"===n?"point":o||n||"table"}},S=function(e){var t=[];if(e.formTemplate){var r,n=e.formTemplate,o=n.description,u=n.title;null===(r=e.fields)||void 0===r||r.forEach((function(e){var r=u&&(0,d.pZ)(u,e.name),n=o&&(0,d.pZ)(o,e.name);(r||n)&&t.push(e.name)}))}return t};function z(e,t){var r,n,o=null!==t&&void 0!==t?t:"formTemplate"in e&&e.formTemplate;return!!o&&(null!==(r=null===(n=o.elements)||void 0===n?void 0:n.filter(c.fY))&&void 0!==r?r:[]).some((function(t){var r=t.fieldName;return!e.fieldsIndex.get(r)}))}function W(e,t){return null==e||t.onValue!==e&&t.offValue!==e}function J(e,t){var r;switch(t.objectType){case"any":return!0;case"null":return null==e;case"code":return e===(null===(r=t.codedValue)||void 0===r?void 0:r.code);case"range":return null!=e&&null!=t.minValue&&null!=t.maxValue&&+e>=t.minValue&&+e<=t.maxValue;default:return(0,l.Bg)(t.objectType),!1}}function Y(e,t,r){var n,o;if(!e||!("subtypes"in e))return!1;var u=null===(n=e.subtypes)||void 0===n?void 0:n.find((function(e){return e.code===r}));if(!u)return!1;var i=null===(o=e.subtypes)||void 0===o?void 0:o.find((function(e){return e.code===t}));return!(0,a.y7)(u.defaultValues,null===i||void 0===i?void 0:i.defaultValues)&&Object.values(u.defaultValues).some((function(e){return null!=e}))}},67667:function(e,t,r){r.d(t,{Z:function(){return Z}});var n=r(93433),o=r(74165),u=r(15861),i=r(15671),l=r(43144),a=r(97326),s=r(60136),d=r(29388),c=r(27366),y=r(52639),p=r(7138),f=r(63780),v=r(11582),h=r(80987),b=r(79056),_=r(66978),C=r(94172),m=r(49861),g=(r(93169),r(32718),r(69912)),F=r(99086),q=r(45276),x=r(73238),w=function(e){(0,s.Z)(r,e);var t=(0,d.Z)(r);function r(e){var n;return(0,i.Z)(this,r),(n=t.call(this,e))._loaded=!1,n._queryAbortController=null,n._queryPageAbortController=null,n._queryFeatureCountAbortController=null,n.featuresPerPage=10,n.description=null,n.graphic=null,n.layer=null,n.map=null,n.orderByFields=null,n.featureCount=0,n.relationshipId=null,n.showAllEnabled=!1,n.title=null,n._cancelQuery=function(){var e=(0,a.Z)(n)._queryAbortController;e&&e.abort(),n._queryAbortController=null},n._cancelQueryFeatureCount=function(){var e=(0,a.Z)(n)._queryFeatureCountAbortController;e&&e.abort(),n._queryFeatureCountAbortController=null},n._cancelQueryPage=function(){var e=(0,a.Z)(n)._queryPageAbortController;e&&e.abort(),n._queryPageAbortController=null},n._queryController=(0,u.Z)((0,o.Z)().mark((function e(){var t;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n._cancelQuery(),t=new AbortController,n._queryAbortController=t,e.next=5,(0,_.R8)(n._query());case 5:n._queryAbortController===t&&(n._queryAbortController=null);case 6:case"end":return e.stop()}}),e)}))),n._queryFeatureCountController=(0,u.Z)((0,o.Z)().mark((function e(){var t;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n._loaded=!1,n._cancelQueryFeatureCount(),t=new AbortController,n._queryFeatureCountAbortController=t,e.next=5,(0,_.R8)(n._queryFeatureCount());case 5:n._queryFeatureCountAbortController===t&&(n._queryFeatureCountAbortController=null),n._loaded=!0;case 7:case"end":return e.stop()}}),e)}))),n._queryPageController=(0,u.Z)((0,o.Z)().mark((function e(){var t;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new AbortController,n._queryPageAbortController=t,e.next=4,(0,_.R8)(n._queryPage());case 4:n._queryPageAbortController===t&&(n._queryPageAbortController=null);case 5:case"end":return e.stop()}}),e)}))),n._queryDebounced=(0,_.Ds)(n._queryController,100),n._queryFeatureCountDebounced=(0,_.Ds)(n._queryFeatureCountController,100),n._queryPageDebounced=(0,_.Ds)(n._queryPageController,100),n._query=(0,u.Z)((0,o.Z)().mark((function e(){var t,r,u;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=(0,a.Z)(n),r=t._queryAbortController,u=t.relatedFeatures,e.t0=n.featureCount,!e.t0){e.next=15;break}if(n._destroyRelatedFeatureViewModels(),n.featurePage=1,u.destroyAll(),e.t1=n.destroyed,e.t1){e.next=15;break}return e.t2=u,e.t3=n,e.next=12,n._queryRelatedFeatures({signal:null===r||void 0===r?void 0:r.signal});case 12:e.t4=e.sent,e.t5=e.t3._sliceFeatures.call(e.t3,e.t4),e.t2.addMany.call(e.t2,e.t5);case 15:case"end":return e.stop()}}),e)}))),n.addHandles([(0,C.watch)((function(){var e;return[n.displayCount,n.graphic,n.layer,null===(e=n.layer)||void 0===e?void 0:e.loaded,n.map,n.orderByFields,n.relationshipId,n.featuresPerPage,n.showAllEnabled,n.canQuery,n.featureCount]}),(function(){return n._queryDebounced()}),C.initial),(0,C.watch)((function(){return[n.featurePage,n.showAllEnabled]}),(function(){return n._queryPageDebounced()})),(0,C.watch)((function(){return[n.layer,n.relationshipId,n.objectId,n.canQuery]}),(function(){return n._queryFeatureCountDebounced()}))]),n}return(0,l.Z)(r,[{key:"destroy",value:function(){this._destroyRelatedFeatureViewModels(),this.relatedFeatures.destroyAll(),this._cancelQuery(),this._cancelQueryFeatureCount(),this._cancelQueryPage()}},{key:"featurePage",get:function(){return this._get("featurePage")},set:function(e){var t=this.featuresPerPage,r=this.featureCount,n=Math.ceil(r/t)||1;this._set("featurePage",Math.min(Math.max(e,1),n))}},{key:"orderByFieldsFixedCasing",get:function(){var e=this.orderByFields,t=this.relatedLayer;return e&&null!==t&&void 0!==t&&t.loaded?e.map((function(e){var r=e.clone();return r.field=(0,q.k6)(e.field,t),r})):null!==e&&void 0!==e?e:[]}},{key:"supportsCacheHint",get:function(){var e,t,r;return!(null===(e=this.layer)||void 0===e||null===(t=e.capabilities)||void 0===t||null===(r=t.queryRelated)||void 0===r||!r.supportsCacheHint)}},{key:"canLoad",get:function(){return!!this.map&&null!=this.relationshipId&&"number"==typeof this.objectId}},{key:"canQuery",get:function(){var e,t,r=null===(e=this.layer)||void 0===e||null===(t=e.capabilities)||void 0===t?void 0:t.queryRelated;return!!(this.relatedLayer&&this.relationship&&null!=this.relationshipId&&null!=this.objectId&&null!==r&&void 0!==r&&r.supportsCount&&null!==r&&void 0!==r&&r.supportsPagination)}},{key:"itemDescriptionFieldName",get:function(){var e;return(null===(e=this.orderByFieldsFixedCasing[0])||void 0===e?void 0:e.field)||null}},{key:"displayCount",get:function(){return this._get("displayCount")},set:function(e){this._set("displayCount",Math.min(Math.max(e,0),10))}},{key:"objectId",get:function(){var e,t,r;return null!==(e=this.objectIdField&&(null===(t=this.graphic)||void 0===t||null===(r=t.attributes)||void 0===r?void 0:r[this.objectIdField]))&&void 0!==e?e:null}},{key:"objectIdField",get:function(){var e;return(null===(e=this.layer)||void 0===e?void 0:e.objectIdField)||null}},{key:"relatedFeatures",get:function(){return this._get("relatedFeatures")||new h.Z}},{key:"relatedLayer",get:function(){var e,t=this.layer,r=this.map,n=this.relationship;return null!==t&&void 0!==t&&t.loaded&&r&&n&&null!==(e=(0,q.T2)(r,t,n))&&void 0!==e?e:null}},{key:"relationship",get:function(){var e,t,r=this.relationshipId,n=this.layer;return null!=r&&null!==(e=null===n||void 0===n||null===(t=n.relationships)||void 0===t?void 0:t.find((function(e){return e.id===r})))&&void 0!==e?e:null}},{key:"relatedFeatureViewModels",get:function(){return this._get("relatedFeatureViewModels")||new h.Z}},{key:"state",get:function(){var e=this._queryAbortController,t=this._queryFeatureCountAbortController,r=this._queryPageAbortController,n=this.canQuery,o=this._loaded,u=this.canLoad;return t||u&&!o?"loading":e||r?"querying":n?"ready":"disabled"}},{key:"getRelatedFeatureByObjectId",value:function(e){return this.relatedFeatures.find((function(t){return t.getObjectId()===e}))}},{key:"refresh",value:function(){this._queryFeatureCountDebounced()}},{key:"_destroyRelatedFeatureViewModels",value:function(){var e;null===(e=this.relatedFeatureViewModels)||void 0===e||e.destroyAll()}},{key:"_queryFeatureCount",value:function(){var e=(0,u.Z)((0,o.Z)().mark((function e(){var t,r,n,u,i,l,a,s,d,c,y,p,f;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.layer,n=this.relatedLayer,u=this.relationshipId,i=this.objectId,l=this._queryFeatureCountAbortController,a=this.canQuery,s=this.supportsCacheHint,e.next=3,null===r||void 0===r?void 0:r.load();case 3:return e.next=5,null===n||void 0===n?void 0:n.load();case 5:if(a&&r&&n&&null!=i){e.next=7;break}return e.abrupt("return",void this._set("featureCount",0));case 7:return d=n.createQuery(),c=r.historicMoment,y=r.gdbVersion,p=new F.default({cacheHint:s,gdbVersion:y,historicMoment:c,relationshipId:u,returnGeometry:!1,objectIds:[i],where:null!==(t=d.where)&&void 0!==t?t:void 0}),e.next=13,r.queryRelatedFeaturesCount(p,{signal:null===l||void 0===l?void 0:l.signal});case 13:f=e.sent,this._set("featureCount",f[i]||0);case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_sliceFeatures",value:function(e){var t=this.showAllEnabled,r=this.displayCount;return t?e:r?e.slice(0,r):[]}},{key:"_queryPage",value:function(){var e=(0,u.Z)((0,o.Z)().mark((function e(){var t,r,n,u,i;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.relatedFeatures,r=this.featurePage,n=this.showAllEnabled,u=this._queryPageAbortController,i=this.featureCount,e.t0=!n||r<2||!i,e.t0){e.next=8;break}return e.t1=t,e.next=6,this._queryRelatedFeatures({signal:null===u||void 0===u?void 0:u.signal});case 6:e.t2=e.sent,e.t1.addMany.call(e.t1,e.t2);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_queryRelatedFeatures",value:function(){var e=(0,u.Z)((0,o.Z)().mark((function e(t){var r,u,i,l,a,s,d,c,y,p,v,h,b,_,C,m,g,q,w,Z,A,P,k,I,O;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=this.orderByFieldsFixedCasing,l=this.showAllEnabled,a=this.featuresPerPage,s=this.displayCount,d=this.layer,c=this.relationshipId,y=this.featurePage,p=this.featureCount,v=this.relatedLayer,h=this.supportsCacheHint,b=this.canQuery,_=this.objectId,b&&d&&v&&null!=_){e.next=3;break}return e.abrupt("return",[]);case 3:return C=l?((y-1)*a+p)%p:0,m=l?a:s,g=v.objectIdField,q=[].concat((0,n.Z)(i.map((function(e){return e.field}))),(0,n.Z)((0,x.wz)(v)),[g]).filter(f.pC),w=i.map((function(e){return"".concat(e.field," ").concat(e.order)})),Z=v.createQuery(),A=d.historicMoment,P=d.gdbVersion,k=new F.default({orderByFields:w,start:C,num:m,outFields:q,cacheHint:h,historicMoment:A,gdbVersion:P,relationshipId:c,returnGeometry:!1,objectIds:[_],where:null!==(r=Z.where)&&void 0!==r?r:void 0}),e.next=14,d.queryRelatedFeatures(k,{signal:null===t||void 0===t?void 0:t.signal});case 14:return I=e.sent,O=(null===(u=I[_])||void 0===u?void 0:u.features)||[],e.abrupt("return",(O.forEach((function(e){e.sourceLayer=v,e.layer=v})),O));case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}((0,v.J)((0,b.IG)(p.default)));(0,c._)([(0,m.Cb)()],w.prototype,"_loaded",void 0),(0,c._)([(0,m.Cb)()],w.prototype,"_queryAbortController",void 0),(0,c._)([(0,m.Cb)()],w.prototype,"_queryPageAbortController",void 0),(0,c._)([(0,m.Cb)()],w.prototype,"_queryFeatureCountAbortController",void 0),(0,c._)([(0,m.Cb)({value:1})],w.prototype,"featurePage",null),(0,c._)([(0,m.Cb)()],w.prototype,"featuresPerPage",void 0),(0,c._)([(0,m.Cb)({readOnly:!0})],w.prototype,"orderByFieldsFixedCasing",null),(0,c._)([(0,m.Cb)({readOnly:!0})],w.prototype,"supportsCacheHint",null),(0,c._)([(0,m.Cb)({readOnly:!0})],w.prototype,"canLoad",null),(0,c._)([(0,m.Cb)({readOnly:!0})],w.prototype,"canQuery",null),(0,c._)([(0,m.Cb)()],w.prototype,"description",void 0),(0,c._)([(0,m.Cb)({readOnly:!0})],w.prototype,"itemDescriptionFieldName",null),(0,c._)([(0,m.Cb)({value:3})],w.prototype,"displayCount",null),(0,c._)([(0,m.Cb)({type:y.Z})],w.prototype,"graphic",void 0),(0,c._)([(0,m.Cb)()],w.prototype,"layer",void 0),(0,c._)([(0,m.Cb)()],w.prototype,"map",void 0),(0,c._)([(0,m.Cb)({readOnly:!0})],w.prototype,"objectId",null),(0,c._)([(0,m.Cb)({readOnly:!0})],w.prototype,"objectIdField",null),(0,c._)([(0,m.Cb)()],w.prototype,"orderByFields",void 0),(0,c._)([(0,m.Cb)({readOnly:!0})],w.prototype,"relatedFeatures",null),(0,c._)([(0,m.Cb)({readOnly:!0})],w.prototype,"relatedLayer",null),(0,c._)([(0,m.Cb)({readOnly:!0})],w.prototype,"relationship",null),(0,c._)([(0,m.Cb)()],w.prototype,"featureCount",void 0),(0,c._)([(0,m.Cb)({readOnly:!0})],w.prototype,"relatedFeatureViewModels",null),(0,c._)([(0,m.Cb)()],w.prototype,"relationshipId",void 0),(0,c._)([(0,m.Cb)()],w.prototype,"showAllEnabled",void 0),(0,c._)([(0,m.Cb)()],w.prototype,"state",null),(0,c._)([(0,m.Cb)()],w.prototype,"title",void 0);var Z=w=(0,c._)([(0,g.j)("esri.widgets.Feature.FeatureRelationship.FeatureRelationshipViewModel")],w)}}]);
//# sourceMappingURL=67667.78e331c9.chunk.js.map