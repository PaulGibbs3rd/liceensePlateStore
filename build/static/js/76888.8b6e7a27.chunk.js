"use strict";(self.webpackChunkreact_training=self.webpackChunkreact_training||[]).push([[76888],{42388:function(e,t,n){n.d(t,{j:function(){return m}});var r=n(15671),i=n(43144),a=n(60136),u=n(29388),o=n(27366),s=n(7138),l=n(49861),c=(n(93169),n(32718),n(84936),n(69912)),f={visible:"visibleSublayers"},m=function(e){(0,a.Z)(n,e);var t=(0,u.Z)(n);function n(e){var i;return(0,r.Z)(this,n),(i=t.call(this,e)).scale=0,i}return(0,i.Z)(n,[{key:"layer",set:function(e){var t=this;this._get("layer")!==e&&(this._set("layer",e),this.removeHandles("layer"),e&&this.addHandles([e.sublayers.on("change",(function(){return t.notifyChange("visibleSublayers")})),e.on("wms-sublayer-update",(function(e){return t.notifyChange(f[e.propertyName])}))],"layer"))}},{key:"layers",get:function(){return this.visibleSublayers.filter((function(e){return e.name})).map((function(e){return e.name})).join()}},{key:"version",get:function(){this.commitProperty("layers");var e=this.layer;return e&&e.commitProperty("imageTransparency"),(this._get("version")||0)+1}},{key:"visibleSublayers",get:function(){var e=this.layer,t=this.scale,n=null===e||void 0===e?void 0:e.sublayers,r=[];return null!==n&&void 0!==n&&n.forEach((function e(n){var i=n.minScale,a=n.maxScale,u=n.sublayers;n.visible&&(0===t||(0===i||t<=i)&&(0===a||t>=a))&&(u?u.forEach(e):r.push(n))})),r}},{key:"toJSON",value:function(){var e=this.layer,t=this.layers;return{format:e.imageFormat,request:"GetMap",service:"WMS",styles:"",transparent:e.imageTransparency?"TRUE":"FALSE",version:e.version,layers:t}}}]),n}(s.default);(0,o._)([(0,l.Cb)()],m.prototype,"layer",null),(0,o._)([(0,l.Cb)({readOnly:!0})],m.prototype,"layers",null),(0,o._)([(0,l.Cb)({type:Number})],m.prototype,"scale",void 0),(0,o._)([(0,l.Cb)({readOnly:!0})],m.prototype,"version",null),(0,o._)([(0,l.Cb)({readOnly:!0})],m.prototype,"visibleSublayers",null),m=(0,o._)([(0,c.j)("esri.layers.support.ExportWMSImageParameters")],m)},50863:function(e,t,n){n.d(t,{h:function(){return i}});var r=n(45739);function i(e,t,n){if(null==(null===e||void 0===e?void 0:e.timeInfo))return null;var i=e.datesInUnknownTimezone,a=void 0!==i&&i,u=e.timeOffset,o=e.useViewTime,s=e.timeExtent;a&&(s=(0,r.toLocalTimeExtent)(s));var l=o?t&&s?t.intersection(s):t||s:s;return!l||l.isEmpty||l.isAllTime?l:(u&&(l=l.offset(-u.value,u.unit)),a&&(l=(0,r.toUTCTimeExtent)(l)),l.equals(n)?n:l)}},83217:function(e,t,n){n.d(t,{x:function(){return r}});var r=Symbol("WebScene")},45739:function(e,t,n){n.r(t),n.d(t,{getTimeExtentFromLayers:function(){return w},getTimeSliderSettingsFromWebDocument:function(){return E},getTimeSliderSettingsFromWebMap:function(){return k},toLocalTimeExtent:function(){return F},toUTCTimeExtent:function(){return C}});var r=n(93433),i=n(37762),a=n(74165),u=n(15861),o=n(62044),s=n(63780),l=n(44927),c=n(84652),f=n(32718),m=n(86710),p=n(38675),v=n(83217);function d(e){return null!=e&&"object"==typeof e&&v.x in e}function y(e){return void 0!==e.timeInfo}function h(e,t){return b.apply(this,arguments)}function b(){return(b=(0,u.Z)((0,a.Z)().mark((function e(t,n){var r,i,u;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null!==(r=null===(i=t.widgets)||void 0===i||null===(u=i.timeSlider)||void 0===u?void 0:u.fullTimeExtent)&&void 0!==r?r:w(t.allLayers,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e){var t,n=null!==(t=e.numThumbs)&&void 0!==t?t:2,r=e.currentTimeExtent;if(r){var i=r.start,a=r.end;return null!=i&&null!=a&&i.getTime()===a.getTime()?"instant":2===n?"time-window":null==i||0===i.getTime()?"cumulative-from-start":"cumulative-from-end"}return 2===n?"time-window":"cumulative-from-start"}function g(e){var t=e.numStops,n=e.stopInterval,r=e.stops;return r?{dates:(0,c.d9)(r)}:n?{interval:n.clone()}:{count:null!==t&&void 0!==t?t:5}}function w(e,t){return Z.apply(this,arguments)}function Z(){return Z=(0,u.Z)((0,a.Z)().mark((function e(t,n){var l,c,f,m,p,v,d,h,b,x,g,w,Z;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.length){e.next=2;break}return e.abrupt("return",o.Z.allTime);case 2:return e.next=4,Promise.all(t.map((function(e){return e.load({signal:n})})));case 4:if(l=t.filter(y),c=t.filter((function(e){return!y(e)&&null!=e.visibilityTimeExtent})),0!==l.length||0!==c.length){e.next=7;break}return e.abrupt("return",o.Z.allTime);case 7:f=[],m=[],p=(0,i.Z)(l);try{for(p.s();!(v=p.n()).done;)"feature"!==(null===(h=v.value)||void 0===h?void 0:h.type)&&"map-image"!==(null===h||void 0===h?void 0:h.type)||null===(d=h.timeInfo)||void 0===d||!d.hasLiveData?m.push(h):f.push(h)}catch(T){p.e(T)}finally{p.f()}if(b=function(e){return null==e||e.isAllTime},x=[].concat((0,r.Z)(m.map((function(e){var t,n,r=null===(t=e.timeInfo)||void 0===t?void 0:t.fullTimeExtent,i=e.visibilityTimeExtent;return null!==(n=null===r||void 0===r?void 0:r.intersection(i))&&void 0!==n?n:i}))),(0,r.Z)(c.map((function(e){return e.visibilityTimeExtent})))),!x.some(b)){e.next=13;break}return e.abrupt("return",o.Z.allTime);case 13:return g=f.map(function(){var e=(0,u.Z)((0,a.Z)().mark((function e(t){var r,i,u,o,s,l;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchRecomputedExtents({signal:n});case 2:if(e.t2=i=e.sent,e.t1=null===e.t2,e.t1){e.next=6;break}e.t1=void 0===i;case 6:if(!e.t1){e.next=10;break}e.t3=void 0,e.next=11;break;case 10:e.t3=i.timeExtent;case 11:if(e.t4=r=e.t3,e.t0=null!==e.t4,!e.t0){e.next=15;break}e.t0=void 0!==r;case 15:if(!e.t0){e.next=19;break}e.t5=r,e.next=20;break;case 19:e.t5=null===(u=t.timeInfo)||void 0===u?void 0:u.fullTimeExtent;case 20:return s=e.t5,l=t.visibilityTimeExtent,e.abrupt("return",null!==(o=null===s||void 0===s?void 0:s.intersection(l))&&void 0!==o?o:l);case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=16,Promise.allSettled(g);case 16:if(!(w=e.sent.map((function(e){return"fulfilled"===e.status?e.value:null}))).some(b)){e.next=19;break}return e.abrupt("return",o.Z.allTime);case 19:if(0!==(Z=[].concat((0,r.Z)(w),(0,r.Z)(x)).filter(s.pC)).length){e.next=22;break}return e.abrupt("return",o.Z.allTime);case 22:return e.abrupt("return",Z.reduce((function(e,t){return e.union(t)})));case 23:case"end":return e.stop()}}),e)}))),Z.apply(this,arguments)}function T(e,t){var n,r=e.currentTimeExtent;if(!r)return null;var i=r.start,a=r.end,u=null!==(n=null!==i&&void 0!==i?i:a)&&void 0!==n?n:null;switch(t){case"time-window":return new o.Z({start:i,end:a});case"cumulative-from-start":return new o.Z({start:null,end:u});case"cumulative-from-end":return new o.Z({start:u,end:null});case"instant":return new o.Z({start:u,end:u})}}function k(e,t){return S.apply(this,arguments)}function S(){return(S=(0,u.Z)((0,a.Z)().mark((function e(t,n){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,l.XV)(f.Z.getLogger("esri.support.timeUtils.getTimeSliderSettingsFromWebMap"),"`timeUtils.getTimeSliderSettingsFromWebMap` is deprecated in favor of 'timeUtils.getTimeSliderSettingsFromWebDocument'",{replacement:"timeUtils.getTimeSliderSettingsFromWebDocument",version:"4.30",see:"https://developers.arcgis.com/javascript/latest/api-reference/esri-support-timeUtils.html#getTimeSliderSettingsFromWebDocument",warnOnce:!0}),null==t||!(0,p.s)(t)){e.next=7;break}return e.next=4,E(t,n);case 4:e.t0=e.sent,e.next=8;break;case 7:e.t0=null;case 8:return e.abrupt("return",e.t0);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e,t){return _.apply(this,arguments)}function _(){return(_=(0,u.Z)((0,a.Z)().mark((function e(t,n){var r,i,u,o,s,l;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,p.s)(t)||d(t)){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,t.load({signal:n});case 4:if(u=null===t||void 0===t||null===(r=t.widgets)||void 0===r?void 0:r.timeSlider){e.next=7;break}return e.abrupt("return",null);case 7:return e.next=9,h(t,n);case 9:return o=e.sent,s=u.loop,l=x(u),e.abrupt("return",{fullTimeExtent:o,loop:s,mode:l,playRate:null!==(i=u.stopDelay)&&void 0!==i?i:2e3,stops:g(u),timeExtent:T(u,l)});case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e){if(!e)return e;var t=e.start,n=e.end;return new o.Z({start:null!=t?(0,m.Nm)(t,-t.getTimezoneOffset(),"minutes"):t,end:null!=n?(0,m.Nm)(n,-n.getTimezoneOffset(),"minutes"):n})}function F(e){if(!e)return e;var t=e.start,n=e.end;return new o.Z({start:null!=t?(0,m.Nm)(t,t.getTimezoneOffset(),"minutes"):t,end:null!=n?(0,m.Nm)(n,n.getTimezoneOffset(),"minutes"):n})}},13107:function(e,t,n){n.d(t,{Z:function(){return m}});var r=n(15671),i=n(43144),a=n(60136),u=n(29388),o=n(27366),s=n(32718),l=n(66978),c=n(94172),f=(n(93169),n(84936),n(10064),n(69912)),m=function(e){var t=function(e){(0,a.Z)(n,e);var t=(0,u.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"initialize",value:function(){var e=this;this.addHandles((0,c.on)((function(){return e.layer}),"refresh",(function(t){e.doRefresh(t.dataChanged).catch((function(t){(0,l.D_)(t)||s.Z.getLogger(e).error(t)}))})),"RefreshableLayerView")}}]),n}(e);return t=(0,o._)([(0,f.j)("esri.views.layers.RefreshableLayerView")],t)}},29431:function(e,t,n){n.d(t,{Z:function(){return h}});var r=n(74165),i=n(15861),a=n(15671),u=n(43144),o=n(60136),s=n(29388),l=n(27366),c=n(10064),f=n(92026),m=n(66978),p=n(49861),v=(n(93169),n(32718),n(84936),n(69912)),d=n(42388),y=n(50863),h=function(e){var t=function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,a.Z)(this,n),t.apply(this,arguments)}return(0,u.Z)(n,[{key:"initialize",value:function(){this.exportImageParameters=new d.j({layer:this.layer})}},{key:"destroy",value:function(){this.exportImageParameters=(0,f.SC)(this.exportImageParameters)}},{key:"exportImageVersion",get:function(){var e;return null!==(e=this.exportImageParameters)&&void 0!==e&&e.commitProperty("version"),this.commitProperty("timeExtent"),(this._get("exportImageVersion")||0)+1}},{key:"timeExtent",get:function(){var e;return(0,y.h)(this.layer,null===(e=this.view)||void 0===e?void 0:e.timeExtent,this._get("timeExtent"))}},{key:"fetchPopupFeaturesAtLocation",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n){var i,a,u,o,s,l,f,p,v;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=this.layer,t){e.next=3;break}throw new c.Z("wmslayerview:fetchPopupFeatures","Nothing to fetch without area",{layer:i});case 3:if(a=i.popupEnabled){e.next=6;break}throw new c.Z("wmslayerview:fetchPopupFeatures","popupEnabled should be true",{popupEnabled:a});case 6:if(u=this.createFetchPopupFeaturesQuery(t)){e.next=9;break}return e.abrupt("return",[]);case 9:if(o=u.extent,s=u.width,l=u.height,f=u.x,p=u.y,o&&s&&l){e.next=12;break}throw new c.Z("wmslayerview:fetchPopupFeatures","WMSLayer does not support fetching features.",{extent:o,width:s,height:l});case 12:return e.next=14,i.fetchFeatureInfo(o,s,l,f,p);case 14:return v=e.sent,e.abrupt("return",((0,m.k_)(n),v));case 16:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(e);return(0,l._)([(0,p.Cb)()],t.prototype,"exportImageParameters",void 0),(0,l._)([(0,p.Cb)({readOnly:!0})],t.prototype,"exportImageVersion",null),(0,l._)([(0,p.Cb)()],t.prototype,"layer",void 0),(0,l._)([(0,p.Cb)({readOnly:!0})],t.prototype,"timeExtent",null),t=(0,l._)([(0,v.j)("esri.views.layers.WMSLayerView")],t)}}}]);
//# sourceMappingURL=76888.8b6e7a27.chunk.js.map