{"version":3,"file":"static/js/31484.b01c3123.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/views/3d/layers/LayerView3D.js","../node_modules/@arcgis/core/views/3d/layers/LineOfSightLayerView3D.js","../node_modules/@arcgis/core/views/layers/LayerView.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{_ as o}from\"../../../chunks/tslib.es6.js\";import{makeHandle as s}from\"../../../core/handleUtils.js\";import{throwIfAborted as e}from\"../../../core/promiseUtils.js\";import{whenOnce as t}from\"../../../core/reactiveUtils.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/RandomLCG.js\";import{subclass as i}from\"../../../core/accessorSupport/decorators/subclass.js\";import{supportsHeightModelInfo as p,rejectLayerError as a}from\"../../../geometry/support/heightModelInfoUtils.js\";const l=l=>{let n=class extends l{constructor(){super(...arguments),this.slicePlaneEnabled=!1,this.supportsHeightUnitConversion=!1}postscript(){super.postscript(),p(this.layer)&&this.addResolvingPromise(this._validateHeightModelInfo())}async _validateHeightModelInfo(){const o=new AbortController,r=o.signal;this.addHandles(s((()=>o.abort()))),await t((()=>this.view.defaultsFromMap?.heightModelInfoReady),r),e(r);const i=a(this.layer,this.view.heightModelInfo,this.supportsHeightUnitConversion);if(i)throw i}};return o([r()],n.prototype,\"view\",void 0),o([r()],n.prototype,\"slicePlaneEnabled\",void 0),n=o([i(\"esri.views.3d.layers.LayerView3D\")],n),n};export{l as LayerView3D};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{_ as s}from\"../../../chunks/tslib.es6.js\";import{createTask as i}from\"../../../core/asyncUtils.js\";import e from\"../../../core/Error.js\";import{destroyMaybe as a,abortMaybe as t}from\"../../../core/maybe.js\";import{isAborted as r}from\"../../../core/promiseUtils.js\";import{watch as n,syncAndInitial as l}from\"../../../core/reactiveUtils.js\";import{property as o}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as y}from\"../../../core/accessorSupport/decorators/subclass.js\";import{LayerView3D as w}from\"./LayerView3D.js\";import h from\"../../layers/LayerView.js\";const c=\"analysis-view-handles\";let p=class extends(w(h)){constructor(s){super(s),this.type=\"line-of-sight-3d\",this._analysisModule=null}initialize(){this.addHandles(n((()=>this.layer.analysis),(s=>{this._destroyAnalysisView(),null!=s&&this._createAnalysisView(s)}),l),c)}destroy(){this.removeHandles(c),this._destroyAnalysisView()}async whenAnalysisView(){if(null!=this.analysisView)return this.analysisView;if(null!=this._createAnalysisViewTask)return this._createAnalysisViewTask.promise;throw new e(\"layerview:no-analysisview-for-analysis\",\"The analysis has not been set on the LineOfSightLayer of this layer view\")}isUpdating(){return null!=this._createAnalysisViewTask||null!=this.analysisView&&this.analysisView.updating}_createAnalysisView(s){const e=i((async i=>(this.analysisView=await this._createAnalysisViewPromise(s,i),this._createAnalysisViewTask===e&&(this._createAnalysisViewTask=null),this.analysisView)));this._createAnalysisViewTask=e}_destroyAnalysisView(){this.analysisView=a(this.analysisView),this._createAnalysisViewTask=t(this._createAnalysisViewTask)}async _createAnalysisViewPromise(s,i){let a=this._analysisModule;if(null==a){const s=await this._loadAnalysisModule();this._analysisModule=s,a=s}const t=new a.default({analysis:s,view:this.view,parent:this});if(await t.when(),r(i))throw t.destroy(),new e(\"layerview:no-analysisview-for-analysis\",\"The analysis has not been added to the LineOfSightLayer of this layer view\",{analysis:s});return t}_loadAnalysisModule(){return import(\"../analysis/LineOfSightAnalysisView3D.js\")}};s([o()],p.prototype,\"type\",void 0),s([o()],p.prototype,\"layer\",void 0),s([o()],p.prototype,\"analysisView\",void 0),s([o()],p.prototype,\"_createAnalysisViewTask\",void 0),p=s([y(\"esri.views.3d.layers.LineOfSightLayerView3D\")],p);const d=p;export{d as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import t from\"../../core/Accessor.js\";import r from\"../../core/Evented.js\";import{IdentifiableMixin as i}from\"../../core/Identifiable.js\";import s from\"../../core/Logger.js\";import{destroyMaybe as n}from\"../../core/maybe.js\";import{EsriPromiseMixin as l}from\"../../core/Promise.js\";import{property as o}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/RandomLCG.js\";import{subclass as a}from\"../../core/accessorSupport/decorators/subclass.js\";import{UpdatingHandles as p}from\"../../core/support/UpdatingHandles.js\";import{validateScaleRange as d}from\"../support/layerViewUtils.js\";let u=class extends(i(l(r.EventedMixin(t)))){constructor(e){super(e),this._updatingHandles=new p,this.layer=null,this.parent=null}initialize(){this.when().catch((e=>{if(\"layerview:create-error\"!==e.name){const t=this.layer&&this.layer.id||\"no id\",r=this.layer?.title||\"no title\";s.getLogger(this).error(\"#resolve()\",`Failed to resolve layer view (layer title: '${r}', id: '${t}')`,e)}}))}destroy(){this._updatingHandles=n(this._updatingHandles)}get fullOpacity(){return(this.layer?.opacity??1)*(this.parent?.fullOpacity??1)}get suspended(){return this.destroyed||!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){return!this.suspended&&!0===this.layer?.legendEnabled}get updating(){return!(!this._updatingHandles?.updating&&!this.isUpdating())}get updatingProgress(){return this.updating?0:1}get updateSuspended(){return this.suspended}get visible(){return!0===this.layer?.visible}set visible(e){this._overrideIfSome(\"visible\",e)}get visibleAtCurrentScale(){return!0}get visibleAtCurrentTimeExtent(){const e=this.view.timeExtent,t=this.layer?.visibilityTimeExtent;return!e||!t||!e.intersection(t).isEmpty}canResume(){const e=this.layer&&\"effectiveScaleRange\"in this.layer?this.layer.effectiveScaleRange:null;return this.visible&&this.layer?.loaded&&!this.parent?.suspended&&this.view?.ready&&d(e)&&this.visibleAtCurrentScale&&this.visibleAtCurrentTimeExtent||!1}getSuspendInfo(){const e=this.parent?.suspended?this.parent.suspendInfo:{},t=this;t.view?.ready||(e.viewNotReady=!0),this.layer&&this.layer.loaded||(e.layerNotLoaded=!0);const r=this.layer&&\"effectiveScaleRange\"in this.layer?this.layer.effectiveScaleRange:null;return d(r)&&this.visibleAtCurrentScale||(e.outsideScaleRange=!0),this.visibleAtCurrentTimeExtent||(e.outsideVisibilityTimeExtent=!0),this.visible||(e.layerInvisible=!0),e}isUpdating(){return!1}};e([o()],u.prototype,\"view\",void 0),e([o()],u.prototype,\"fullOpacity\",null),e([o()],u.prototype,\"layer\",void 0),e([o()],u.prototype,\"parent\",void 0),e([o({readOnly:!0})],u.prototype,\"suspended\",null),e([o({readOnly:!0})],u.prototype,\"suspendInfo\",null),e([o({readOnly:!0})],u.prototype,\"legendEnabled\",null),e([o({type:Boolean,readOnly:!0})],u.prototype,\"updating\",null),e([o({readOnly:!0})],u.prototype,\"updatingProgress\",null),e([o()],u.prototype,\"updateSuspended\",null),e([o()],u.prototype,\"visible\",null),e([o({readOnly:!0})],u.prototype,\"visibleAtCurrentScale\",null),e([o({readOnly:!0})],u.prototype,\"visibleAtCurrentTimeExtent\",null),u=e([a(\"esri.views.layers.LayerView\")],u);const y=u;export{y as default};\n"],"names":["l","n","_l","_inherits","_super","_createSuper","_this","_classCallCheck","apply","arguments","slicePlaneEnabled","supportsHeightUnitConversion","_createClass","key","value","_get","_getPrototypeOf","prototype","call","p","this","layer","addResolvingPromise","_validateHeightModelInfo","_validateHeightModelInfo2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","o","r","i","_this2","wrap","_context","prev","next","AbortController","signal","addHandles","s","abort","t","_this2$view$defaultsF","view","defaultsFromMap","heightModelInfoReady","e","a","heightModelInfo","stop","c","_w","type","_analysisModule","analysis","_destroyAnalysisView","_createAnalysisView","removeHandles","_whenAnalysisView","analysisView","abrupt","_createAnalysisViewTask","promise","updating","_this3","_ref","_callee2","_context2","_createAnalysisViewPromise","sent","_x","_createAnalysisViewPromise2","_callee3","_s","_context3","_loadAnalysisModule","default","parent","when","destroy","_x2","_x3","w","h","d","y","u","_i","_updatingHandles","catch","name","_this2$layer","id","title","error","concat","get","_this$layer$opacity","_this$layer","_this$parent$fullOpac","_this$parent","opacity","fullOpacity","destroyed","canResume","getSuspendInfo","_this$layer2","suspended","legendEnabled","_this$_updatingHandle","isUpdating","_this$layer3","visible","set","_overrideIfSome","_this$layer4","timeExtent","visibilityTimeExtent","intersection","isEmpty","_this$layer5","_this$parent2","_this$view","effectiveScaleRange","loaded","ready","visibleAtCurrentScale","visibleAtCurrentTimeExtent","_this$parent3","_t$view","suspendInfo","viewNotReady","layerNotLoaded","outsideScaleRange","outsideVisibilityTimeExtent","layerInvisible","readOnly","Boolean"],"sourceRoot":""}