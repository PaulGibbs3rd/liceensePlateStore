{"version":3,"file":"static/js/73725.152685a7.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/core/workers/WorkerHandle.js","../node_modules/@arcgis/core/layers/support/ElevationTileData.js","../node_modules/@arcgis/core/layers/support/LercDecoder.js","../node_modules/@arcgis/core/views/3d/layers/ElevationLayerView3D.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{remove as e}from\"../arrayUtils.js\";import{makeHandle as t}from\"../handleUtils.js\";import s from\"../Logger.js\";import{throwIfAborted as r}from\"../promiseUtils.js\";import{open as i}from\"./workers.js\";class h{constructor(e,t,r,h,o={}){this._mainMethod=t,this._transferLists=r,this._listeners=[],this._promise=i(e,{...o,schedule:h}).then((e=>{if(void 0===this._thread){this._thread=e,this._promise=null,o.hasInitialize&&this.broadcast({},\"initialize\");for(const e of this._listeners)this._connectListener(e)}else e.close()})),this._promise.catch((t=>s.getLogger(\"esri.core.workers.WorkerHandle\").error(`Failed to initialize ${e} worker: ${t}`)))}on(s,r){const i={removed:!1,eventName:s,callback:r,threadHandle:null};return this._listeners.push(i),this._connectListener(i),t((()=>{i.removed=!0,e(this._listeners,i),this._thread&&null!=i.threadHandle&&i.threadHandle.remove()}))}destroy(){this._thread&&(this._thread.close(),this._thread=null),this._promise=null,this._listeners.length=0,this._transferLists={}}invoke(e,t){return this.invokeMethod(this._mainMethod,e,t)}invokeMethod(e,t,s){if(this._thread){const r=this._transferLists[e],i=r?r(t):[];return this._thread.invoke(e,t,{transferList:i,signal:s})}return this._promise?this._promise.then((()=>(r(s),this.invokeMethod(e,t,s)))):Promise.reject(null)}broadcast(e,t){return this._thread?Promise.all(this._thread.broadcast(t,e)).then((()=>{})):this._promise?this._promise.then((()=>this.broadcast(e,t))):Promise.reject()}get promise(){return this._promise}_connectListener(e){this._thread&&this._thread.on(e.eventName,e.callback).then((t=>{e.removed||(e.threadHandle=t)}))}}export{h as WorkerHandle};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nclass a{constructor(a,t,s,e){this._hasNoDataValues=null,this._minValue=null,this._maxValue=null,\"pixelData\"in a?(this.values=a.pixelData,this.width=a.width,this.height=a.height,this.noDataValue=a.noDataValue):(this.values=a,this.width=t,this.height=s,this.noDataValue=e)}get hasNoDataValues(){if(null==this._hasNoDataValues){const a=this.noDataValue;this._hasNoDataValues=this.values.includes(a)}return this._hasNoDataValues}get minValue(){return this._ensureBounds(),this._minValue}get maxValue(){return this._ensureBounds(),this._maxValue}_ensureBounds(){if(null!=this._minValue)return;const{noDataValue:a,values:t}=this;let s=1/0,e=-1/0,i=!0;for(const u of t)u===a?this._hasNoDataValues=!0:(s=u<s?u:s,e=u>e?u:e,i=!1);i?(this._minValue=0,this._maxValue=0):(this._minValue=s,this._maxValue=e>-3e38?e:0)}}export{a as ElevationTileData};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{WorkerHandle as e}from\"../../core/workers/WorkerHandle.js\";class r extends e{constructor(e=null){super(\"LercWorker\",\"_decode\",{_decode:e=>[e.buffer]},e,{strategy:\"dedicated\"}),this.schedule=e,this.ref=0}decode(e,r,t){return e&&0!==e.byteLength?this.invoke({buffer:e,options:r},t):Promise.resolve(null)}release(){--this.ref<=0&&(t.forEach(((e,r)=>{e===this&&t.delete(r)})),this.destroy())}}const t=new Map;function s(e=null){let s=t.get(e);return s||(null!=e?(s=new r((r=>e.immediate.schedule(r))),t.set(e,s)):(s=new r,t.set(null,s))),++s.ref,s}export{s as acquireDecoder};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import r from\"../../../core/Error.js\";import o from\"../../../core/Logger.js\";import{releaseMaybe as t}from\"../../../core/maybe.js\";import{isAborted as i}from\"../../../core/promiseUtils.js\";import{property as s}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/RandomLCG.js\";import{subclass as a}from\"../../../core/accessorSupport/decorators/subclass.js\";import{ElevationTileData as l}from\"../../../layers/support/ElevationTileData.js\";import{acquireDecoder as n}from\"../../../layers/support/LercDecoder.js\";import{LayerView3D as c}from\"./LayerView3D.js\";import{TiledLayerView3D as m}from\"./TiledLayerView3D.js\";import{elevationNoDataValue as p}from\"../terrain/TerrainConst.js\";import{useFetchTileForLayer as d}from\"../terrain/terrainUtils.js\";import y from\"../../layers/LayerView.js\";let h=class extends(m(c(y))){constructor(){super(...arguments),this.type=\"elevation-3d\"}get tileInfo(){return this.layer.tileInfo}initialize(){const e=this.view,o=e.map?.allLayers,t=o&&o.includes(this.layer),i=e.map?.ground?.layers,s=i&&i.includes(this.layer);if(t&&!s){const e=new r(\"layerview:elevation-layer-only\",`3D elevation layer '${this.layer.id}' can only be added to layers in map.ground`);this.addResolvingPromise(Promise.reject(e))}this._lercDecoder=n(e.resourceController),this._addTilingSchemeMatchPromise()}destroy(){this._lercDecoder=t(this._lercDecoder)}async fetchTile(e,r){const t=this.layer;if(d(t)){const s=await t.fetchTile(e[0],e[1],e[2],{noDataValue:p,signal:r.signal});return i(r)?void o.getLogger(this).warnOnce(\"A call to fetchTile resolved even though the request was aborted. fetchTile should not resolve if options.signal.aborted is true.\"):s}const s=this.getTileUrl(e),a=await r.requester.request(s,\"binary\",r),n=await this._lercDecoder.decode(a,{noDataValue:p},r.signal);if(n)return new l(n);throw new Error(\"LERC decoding failed\")}};e([s()],h.prototype,\"layer\",void 0),e([s()],h.prototype,\"tileInfo\",null),h=e([a(\"esri.views.3d.layers.ElevationLayerView3D\")],h);const f=h;export{f as default};\n"],"names":["h","e","t","r","_this","o","arguments","length","undefined","_classCallCheck","this","_mainMethod","_transferLists","_listeners","_promise","i","_objectSpread","schedule","then","_thread","hasInitialize","broadcast","_step","_iterator","_createForOfIteratorHelper","s","n","done","value","_connectListener","err","f","close","catch","error","concat","_createClass","key","_this2","removed","eventName","callback","threadHandle","push","remove","invokeMethod","_this3","invoke","transferList","signal","Promise","reject","_this4","all","get","on","a","_hasNoDataValues","_minValue","_maxValue","values","pixelData","width","height","noDataValue","includes","_ensureBounds","u","_e","_inherits","_super","_createSuper","call","_decode","buffer","strategy","ref","byteLength","options","resolve","forEach","delete","destroy","Map","immediate","set","_m","apply","type","layer","tileInfo","_e$map","_e$map2","_e$map2$ground","view","map","allLayers","ground","layers","id","addResolvingPromise","_lercDecoder","resourceController","_addTilingSchemeMatchPromise","_fetchTile","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_s","wrap","_context","prev","next","d","fetchTile","p","sent","abrupt","warnOnce","getTileUrl","requester","request","decode","l","Error","stop","_x","_x2","m","c","y","prototype"],"sourceRoot":""}