{"version":3,"file":"static/js/39332.2a7ed90b.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/views/2d/layers/WMSLayerView2D.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/Logger.js\";import{destroyMaybe as r}from\"../../../core/maybe.js\";import{isAbortError as i}from\"../../../core/promiseUtils.js\";import{watch as s}from\"../../../core/reactiveUtils.js\";import{property as a}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/RandomLCG.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import n from\"../../../geometry/Extent.js\";import{BitmapContainer as p}from\"../engine/BitmapContainer.js\";import{LayerView2DMixin as m}from\"./LayerView2D.js\";import h from\"./support/ExportStrategy.js\";import c from\"../../layers/LayerView.js\";import d from\"../../layers/RefreshableLayerView.js\";import u from\"../../layers/WMSLayerView.js\";let g=class extends(u(d(m(c)))){constructor(){super(...arguments),this.bitmapContainer=new p}supportsSpatialReference(e){return this.layer.serviceSupportsSpatialReference(e)}update(e){this.strategy.update(e).catch((e=>{i(e)||t.getLogger(this).error(e)}))}attach(){const{layer:e}=this,{imageMaxHeight:t,imageMaxWidth:r}=e;this.bitmapContainer=new p,this.container.addChild(this.bitmapContainer),this.strategy=new h({container:this.bitmapContainer,fetchSource:this.fetchImage.bind(this),requestUpdate:this.requestUpdate.bind(this),imageMaxHeight:t,imageMaxWidth:r,imageRotationSupported:!1,imageNormalizationSupported:!1,hidpi:!1}),this.addAttachHandles(s((()=>this.exportImageVersion),(()=>this.requestUpdate())))}detach(){this.strategy=r(this.strategy),this.container.removeAllChildren()}viewChange(){}moveEnd(){this.requestUpdate()}createFetchPopupFeaturesQuery(e){const{view:t,bitmapContainer:r}=this,{x:i,y:s}=e,{spatialReference:a}=t;let o,p=0,m=0;if(r.children.some((e=>{const{width:t,height:r,resolution:h,x:c,y:d}=e,u=c+h*t,g=d-h*r;return i>=c&&i<=u&&s<=d&&s>=g&&(o=new n({xmin:c,ymin:g,xmax:u,ymax:d,spatialReference:a}),p=t,m=r,!0)})),!o)return null;const h=o.width/p,c=Math.round((i-o.xmin)/h),d=Math.round((o.ymax-s)/h);return{extent:o,width:p,height:m,x:c,y:d}}async doRefresh(){this.requestUpdate()}isUpdating(){return this.strategy.updating||this.updateRequested}fetchImage(e,t,r,i){return this.layer.fetchImageBitmap(e,t,r,{timeExtent:this.timeExtent,...i})}};e([a()],g.prototype,\"strategy\",void 0),e([a()],g.prototype,\"updating\",void 0),g=e([o(\"esri.views.2d.layers.WMSLayerView2D\")],g);const y=g;export{y as default};\n"],"names":["g","_u","_inherits","_super","_createSuper","_this","_classCallCheck","apply","arguments","bitmapContainer","p","_createClass","key","value","e","this","layer","serviceSupportsSpatialReference","_this2","strategy","update","catch","i","t","error","_this3","imageMaxHeight","r","imageMaxWidth","container","addChild","h","fetchSource","fetchImage","bind","requestUpdate","imageRotationSupported","imageNormalizationSupported","hidpi","addAttachHandles","s","exportImageVersion","removeAllChildren","o","view","x","y","a","spatialReference","m","children","some","width","height","resolution","c","d","u","n","xmin","ymin","xmax","ymax","Math","round","extent","_doRefresh","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_context","prev","next","stop","updating","updateRequested","fetchImageBitmap","_objectSpread","timeExtent","prototype"],"sourceRoot":""}