"use strict";(self.webpackChunkreact_training=self.webpackChunkreact_training||[]).push([[60150],{93002:function(e,t,r){r.d(t,{G:function(){return l},w:function(){return c}});var n=r(93433),i=r(74165),a=r(15861),o=r(14921),u=r(80987),s=r(54472);function l(e,t){return p.apply(this,arguments)}function p(){return(p=(0,a.Z)((0,i.Z)().mark((function e(t,r){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.load();case 2:return e.abrupt("return",c(t,r));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function c(e,t){return d.apply(this,arguments)}function d(){return d=(0,a.Z)((0,i.Z)().mark((function e(t,r){var l,p,c;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=[],p=function e(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var p=o[a];null!=p&&(Array.isArray(p)?e.apply(void 0,(0,n.Z)(p)):u.Z.isCollection(p)?p.forEach((function(t){return e(t)})):s.Z.isLoadable(p)&&l.push(p))}},r(p),c=null,e.next=5,(0,o.UI)(l,function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t){var r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,o.q6)(y(t)?t.loadAll():t.load());case 2:!1!==(r=e.sent).ok||c||(c=r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 5:if(!c){e.next=7;break}throw c.error;case 7:return e.abrupt("return",t);case 8:case"end":return e.stop()}}),e)}))),d.apply(this,arguments)}function y(e){return"loadAll"in e&&"function"==typeof e.loadAll}},60150:function(e,t,r){r.r(t),r.d(t,{default:function(){return Ie}});var n=r(37762),i=r(1413),a=r(74165),o=r(15861),u=r(15671),s=r(43144),l=r(97326),p=r(88301),c=r(61120),d=r(60136),y=r(29388),f=r(27366),v=r(11582),h=r(80987),b=r(10064),m=r(93002),g=r(97642),w=r(66978),Z=r(94172),k=r(76672),_=r(35995),C=r(49861),x=(r(93169),r(32718)),F=(r(84936),r(38511)),S=r(69912),I=r(30651),O=r(27961),j=r(11936),E=r(6693),T=r(46671),A=r(56601),L=r(62393),P=r(6061),G=r(29598),q=r(71684),R=r(56811),V=r(99063),D=r(25899),N=r(70361),U=r(62594),M=r(25610),Q=r(37270),H=r(44055),J=r(94931),B=(r(15126),r(98689),r(57823),r(32066),r(49018)),Y=r(34999),z=r(28189),K=(r(9014),r(79056)),X=r(84652),W=r(54472),$=r(18202),ee=r(31201),te=r(47492),re=r(40934),ne=r(12224),ie=r(77748),ae=r(85116),oe=r(21149),ue=r(81085),se=r(61574),le={key:"type",base:B.Z,errorContext:"renderer",typeMap:{simple:Y.Z,"unique-value":z.Z,"class-breaks":J.Z}},pe=(0,M.v)(),ce=(0,te.d)({types:le}),de=0;function ye(e){var t=e.json.write;return"object"==typeof t?t.ignoreOrigin=!0:e.json.write={ignoreOrigin:!0},e}function fe(e){switch(e){case"point":case"multipoint":return se.xA.clone();case"polyline":return se.CJ.clone();case"polygon":case"multipatch":return se.z3.clone();default:return null}}function ve(e,t){var r;return null==e?null:null===(r=t.subtypes)||void 0===r?void 0:r.find((function(t){return t.code===e}))}function he(e,t){var r=null;switch(t.geometryType){case"esriGeometryPoint":case"esriGeometryMultipoint":r="point";break;case"esriGeometryPolyline":r="line";break;case"esriGeometryPolygon":case"esriGeometryMultiPatch":r="polygon";break;default:t.type,r=null}var n={},i=ve(e,t);if(null!=i){var a=i.defaultValues;for(var o in a)n[o]=a[o]}return n[t.subtypeField]=e,new ne.Z({name:"New Feature",drawingTool:r,prototype:{attributes:n}})}var be=function(e){(0,d.Z)(r,e);var t=(0,y.Z)(r);function r(e){var n;return(0,u.Z)(this,r),(n=t.call(this,e)).charts=null,n.editingEnabled=!0,n.fieldOverrides=null,n.fieldsIndex=null,n.formTemplate=null,n.id="".concat(Date.now().toString(16),"-subtype-sublayer-").concat(de++),n.type="subtype-sublayer",n.labelsVisible=!0,n.labelingInfo=null,n.layerType="ArcGISFeatureLayer",n.legendEnabled=!0,n.listMode="show",n.minScale=0,n.maxScale=0,n.opacity=1,n.parent=null,n.popupEnabled=!0,n.popupTemplate=null,n.subtypeCode=null,n.templates=null,n.title=null,n.visible=!0,n}return(0,s.Z)(r,[{key:"load",value:function(e){return(0,Q.YN)(this.renderer,this.fieldsIndex),Promise.resolve(this)}},{key:"capabilities",get:function(){var e;return null===(e=this.parent)||void 0===e?void 0:e.capabilities}},{key:"effectiveCapabilities",get:function(){var e;return null===(e=this.parent)||void 0===e?void 0:e.effectiveCapabilities}},{key:"effectiveEditingEnabled",get:function(){var e=this.parent;return e?e.effectiveEditingEnabled&&this.editingEnabled:this.editingEnabled}},{key:"elevationInfo",get:function(){var e;return null===(e=this.parent)||void 0===e?void 0:e.elevationInfo}},{key:"writeFieldOverrides",value:function(e,t,r){var n,i,a=this.fields,o=this.parent;if(a){i=[];var u=0;a.forEach((function(e){var t,r=e.name,n=e.alias,a=e.editable;if(e.visible){var s=null===o||void 0===o||null===(t=o.fields)||void 0===t?void 0:t.find((function(e){return e.name===r}));if(s){var l={name:r},p=!1;n!==s.alias&&(l.alias=n,p=!0),a!==s.editable&&(l.editable=a,p=!0),i.push(l),p&&u++}}})),0===u&&i.length===a.length&&(i=null)}else i=(0,X.d9)(e);(null===(n=i)||void 0===n?void 0:n.length)&&(0,$.RB)(r,i,t)}},{key:"fields",get:function(){var e=this.parent,t=this.fieldOverrides,r=this.subtypeCode,i=null===e||void 0===e?void 0:e.fields;if(!e||null===i||void 0===i||!i.length)return null;var a,o=e.subtypes,u=e.subtypeField,s=null===o||void 0===o?void 0:o.find((function(e){return e.code===r})),l=null===s||void 0===s?void 0:s.defaultValues,p=null===s||void 0===s?void 0:s.domains,c=[],d=(0,n.Z)(i);try{var y=function(){var e,n,i=a.value.clone(),o=i.name,s=null===t||void 0===t?void 0:t.find((function(e){return e.name===o}));if(i.visible=!t||!!s,s){var d=s.alias,y=s.editable;d&&(i.alias=d),!1===y&&(i.editable=!1)}var f=null!==(e=null===l||void 0===l?void 0:l[o])&&void 0!==e?e:null;i.defaultValue=o===u?r:f;var v=null!==(n=null===p||void 0===p?void 0:p[o])&&void 0!==n?n:null;i.domain=o===u?null:v?"inherited"===v.type?i.domain:v.clone():null,c.push(i)};for(d.s();!(a=d.n()).done;)y()}catch(f){d.e(f)}finally{d.f()}return c}},{key:"floorInfo",get:function(){var e;return null===(e=this.parent)||void 0===e?void 0:e.floorInfo}},{key:"geometryType",get:function(){var e;return null===(e=this.parent)||void 0===e?void 0:e.geometryType}},{key:"effectiveScaleRange",get:function(){return{minScale:this.minScale,maxScale:this.maxScale}}},{key:"objectIdField",get:function(){var e;return this.parent||x.Z.getLogger(this).error(ge("objectIdField")),null===(e=this.parent)||void 0===e?void 0:e.objectIdField}},{key:"defaultPopupTemplate",get:function(){return this.createPopupTemplate()}},{key:"renderer",get:function(){if(this._isOverridden("renderer"))return this._get("renderer");var e=this.parent;return e&&!e.isTable&&"mesh"!==e.geometryType?function(e){return new Y.Z({symbol:fe(e)})}(e.geometryType):null},set:function(e){(0,Q.YN)(e,this.fieldsIndex),this._override("renderer",e)}},{key:"readRendererFromService",value:function(e,t,r){var n,i;if("Table"===t.type)return null;var a,o=null===(n=t.drawingInfo)||void 0===n?void 0:n.renderer,u=ce(o,t,r),s=this.subtypeCode;if(null!=s&&function(e,t){return!!t&&"unique-value"===(null===e||void 0===e?void 0:e.type)&&null!=e.field&&e.field.toLowerCase()===t.toLowerCase()&&!e.field2&&!e.field3&&!e.valueExpression}(u,t.subtypeField)){var l,p=null===(l=u.uniqueValueInfos)||void 0===l?void 0:l.find((function(e){var t=e.value;return(t="number"==typeof t?String(t):t)===String(s)}));p&&(a=new Y.Z({symbol:p.symbol}))}else"simple"!==(null===u||void 0===u?void 0:u.type)||(null===(i=u.visualVariables)||void 0===i?void 0:i.length)||(a=u);return a}},{key:"readRenderer",value:function(e,t,r){var n,i,a,o=null===t||void 0===t||null===(n=t.layerDefinition)||void 0===n||null===(i=n.drawingInfo)||void 0===i?void 0:i.renderer;if(o){var u=null===(a=o.visualVariables)||void 0===a?void 0:a.some((function(e){return"rotationInfo"!==e.type}));return u?void 0:ce(o,t,r)||void 0}}},{key:"spatialReference",get:function(){var e;return null===(e=this.parent)||void 0===e?void 0:e.spatialReference}},{key:"subtypeField",get:function(){var e;return null===(e=this.parent)||void 0===e?void 0:e.subtypeField}},{key:"readTemplatesFromService",value:function(e,t){return[he(this.subtypeCode,t)]}},{key:"readTitleFromService",value:function(e,t){var r=ve(this.subtypeCode,t);return null!=r?r.name:null}},{key:"url",get:function(){var e;return null===(e=this.parent)||void 0===e?void 0:e.url}},{key:"userHasUpdateItemPrivileges",get:function(){var e;return!(null===(e=this.parent)||void 0===e||!e.userHasUpdateItemPrivileges)}},{key:"addAttachment",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,r){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.parent){e.next=3;break}throw ge("addAttachment");case 3:if(t.getAttribute(n.subtypeField)===this.subtypeCode){e.next=5;break}throw new b.Z("subtype-sublayer:addAttachment","The feature provided does not belong to this SubtypeSublayer");case 5:return e.abrupt("return",n.addAttachment(t,r));case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"updateAttachment",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,r,n){var i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=this.parent){e.next=3;break}throw ge("updateAttachment");case 3:if(t.getAttribute(i.subtypeField)===this.subtypeCode){e.next=5;break}throw new b.Z("subtype-sublayer:updateAttachment","The feature provided does not belong to this SubtypeSublayer");case 5:return e.abrupt("return",i.updateAttachment(t,r,n));case 6:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"deleteAttachments",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,r){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.parent){e.next=3;break}throw ge("deleteAttachments");case 3:if(t.getAttribute(n.subtypeField)===this.subtypeCode){e.next=5;break}throw new b.Z("subtype-sublayer:deleteAttachments","The feature provided does not belong to this SubtypeSublayer");case 5:return e.abrupt("return",n.deleteAttachments(t,r));case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"applyEdits",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,r){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.parent){e.next=2;break}throw ge("applyEdits");case 2:return e.abrupt("return",this.parent.applyEdits(t,r));case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"createPopupTemplate",value:function(e){var t=this,r=this.parent,n=this.fields,i=this.title;r&&(t={displayField:r.displayField,editFieldsInfo:r.editFieldsInfo,fields:n,objectIdField:r.objectIdField,title:i});return(0,ue.eZ)(t,e)}},{key:"createQuery",value:function(){if(!this.parent)throw ge("createQuery");var e=(0,U.rP)(this.parent),t="".concat(this.parent.subtypeField,"=").concat(this.subtypeCode);return e.where=(0,k._)(t,this.parent.definitionExpression),e}},{key:"getField",value:function(e){return this.fieldsIndex.get(e)}},{key:"getFieldDomain",value:function(e){return this._getLayerDomain(e)}},{key:"queryAttachments",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,r){var n,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:if((n=e.sent).parent){e.next=5;break}throw ge("queryAttachments");case 5:return i=t.clone(),e.abrupt("return",(i.where=me(i.where,n.parent.subtypeField,n.subtypeCode),n.parent.queryAttachments(t,r)));case 7:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"queryFeatures",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,r){var n,i,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:if((i=e.sent).parent){e.next=5;break}throw ge("queryFeatures");case 5:return o=null!==(n=oe.Z.from(t))&&void 0!==n?n:i.createQuery(),e.abrupt("return",(null!=t&&(o.where=me(o.where,i.parent.subtypeField,i.subtypeCode)),i.parent.queryFeatures(o,r)));case 7:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_getLayerDomain",value:function(e){var t=this.fieldsIndex.get(e);return t?t.domain:null}}]),r}((0,g.R)((0,v.J)((0,K.IG)(W.Z))));(0,f._)([(0,C.Cb)({readOnly:!0,json:{read:!1}})],be.prototype,"capabilities",null),(0,f._)([(0,C.Cb)({readOnly:!0,json:{read:!1}})],be.prototype,"effectiveCapabilities",null),(0,f._)([(0,C.Cb)({json:{write:{ignoreOrigin:!0}}})],be.prototype,"charts",void 0),(0,f._)([(0,C.Cb)({type:Boolean,nonNullable:!0,json:{name:"enableEditing",write:{ignoreOrigin:!0}}})],be.prototype,"editingEnabled",void 0),(0,f._)([(0,C.Cb)({type:Boolean,readOnly:!0})],be.prototype,"effectiveEditingEnabled",null),(0,f._)([(0,C.Cb)({readOnly:!0,json:{read:!1}})],be.prototype,"elevationInfo",null),(0,f._)([(0,C.Cb)({json:{name:"layerDefinition.fieldOverrides",origins:{service:{read:!1}},write:{ignoreOrigin:!0,allowNull:!0}}})],be.prototype,"fieldOverrides",void 0),(0,f._)([(0,ee.c)("fieldOverrides")],be.prototype,"writeFieldOverrides",null),(0,f._)([(0,C.Cb)((0,i.Z)((0,i.Z)({},pe.fields),{},{readOnly:!0,json:{read:!1}}))],be.prototype,"fields",null),(0,f._)([(0,C.Cb)(pe.fieldsIndex)],be.prototype,"fieldsIndex",void 0),(0,f._)([(0,C.Cb)({readOnly:!0,json:{read:!1}})],be.prototype,"floorInfo",null),(0,f._)([(0,C.Cb)({type:re.Z,json:{name:"formInfo",write:{ignoreOrigin:!0}}})],be.prototype,"formTemplate",void 0),(0,f._)([(0,C.Cb)({type:String,clonable:!1,readOnly:!0,json:{origins:{service:{read:!1},"portal-item":{read:!1}},write:{ignoreOrigin:!0}}})],be.prototype,"id",void 0),(0,f._)([(0,C.Cb)({readOnly:!0,json:{read:!1}})],be.prototype,"geometryType",null),(0,f._)([(0,C.Cb)({readOnly:!0,json:{read:!1}})],be.prototype,"type",void 0),(0,f._)([(0,C.Cb)(ye((0,X.d9)(N.iR)))],be.prototype,"labelsVisible",void 0),(0,f._)([(0,C.Cb)({type:[ie.Z],json:{name:"layerDefinition.drawingInfo.labelingInfo",origins:{service:{read:!1}},read:{reader:ae.r},write:{ignoreOrigin:!0}}})],be.prototype,"labelingInfo",void 0),(0,f._)([(0,C.Cb)({type:["ArcGISFeatureLayer"],readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],be.prototype,"layerType",void 0),(0,f._)([(0,C.Cb)(ye((0,X.d9)(N.rn)))],be.prototype,"legendEnabled",void 0),(0,f._)([(0,C.Cb)({type:["show","hide"]})],be.prototype,"listMode",void 0),(0,f._)([(0,C.Cb)(function(){var e=(0,X.d9)(N.rO);return e.json.origins.service.read=!1,ye(e)}())],be.prototype,"minScale",void 0),(0,f._)([(0,C.Cb)(function(){var e=(0,X.d9)(N.u1);return e.json.origins.service.read=!1,ye(e)}())],be.prototype,"maxScale",void 0),(0,f._)([(0,C.Cb)({readOnly:!0})],be.prototype,"effectiveScaleRange",null),(0,f._)([(0,C.Cb)({readOnly:!0,json:{read:!1}})],be.prototype,"objectIdField",null),(0,f._)([(0,C.Cb)({type:Number,range:{min:0,max:1},nonNullable:!0,json:{write:{ignoreOrigin:!0}}})],be.prototype,"opacity",void 0),(0,f._)([(0,C.Cb)({clonable:!1})],be.prototype,"parent",void 0),(0,f._)([(0,C.Cb)(ye((0,X.d9)(N.C_)))],be.prototype,"popupEnabled",void 0),(0,f._)([(0,C.Cb)({type:H.Z,json:{name:"popupInfo",write:{ignoreOrigin:!0}}})],be.prototype,"popupTemplate",void 0),(0,f._)([(0,C.Cb)({readOnly:!0})],be.prototype,"defaultPopupTemplate",null),(0,f._)([(0,C.Cb)({types:le,json:{write:{target:"layerDefinition.drawingInfo.renderer",ignoreOrigin:!0}}})],be.prototype,"renderer",null),(0,f._)([(0,F.r)("service","renderer",["drawingInfo.renderer","subtypeField","type"])],be.prototype,"readRendererFromService",null),(0,f._)([(0,F.r)("renderer",["layerDefinition.drawingInfo.renderer"])],be.prototype,"readRenderer",null),(0,f._)([(0,C.Cb)({readOnly:!0,json:{read:!1}})],be.prototype,"spatialReference",null),(0,f._)([(0,C.Cb)({type:Number,json:{origins:{service:{read:!1}},write:{ignoreOrigin:!0}}})],be.prototype,"subtypeCode",void 0),(0,f._)([(0,C.Cb)({readOnly:!0,json:{read:!1}})],be.prototype,"subtypeField",null),(0,f._)([(0,C.Cb)({type:[ne.Z],json:{name:"layerDefinition.templates",write:{ignoreOrigin:!0}}})],be.prototype,"templates",void 0),(0,f._)([(0,F.r)("service","templates",["geometryType","subtypeField","subtypes","type"])],be.prototype,"readTemplatesFromService",null),(0,f._)([(0,C.Cb)({type:String,json:{write:{ignoreOrigin:!0}}})],be.prototype,"title",void 0),(0,f._)([(0,F.r)("service","title",["subtypes"])],be.prototype,"readTitleFromService",null),(0,f._)([(0,C.Cb)({readOnly:!0,json:{read:!1}})],be.prototype,"url",null),(0,f._)([(0,C.Cb)({readOnly:!0})],be.prototype,"userHasUpdateItemPrivileges",null),(0,f._)([(0,C.Cb)({type:Boolean,nonNullable:!0,json:{name:"visibility",write:{ignoreOrigin:!0}}})],be.prototype,"visible",void 0),be=(0,f._)([(0,S.j)("esri.layers.support.SubtypeSublayer")],be);var me=function(e,t,r){var n=new RegExp("".concat(t,"\\s*=\\s*\\d+")),i="".concat(t,"=").concat(r),a=null!==e&&void 0!==e?e:"";return n.test(a)?a.replace(n,i):(0,k._)(i,a)},ge=function(e){return new b.Z("This sublayer must have a parent SubtypeGroupLayer in order to use ".concat(e))},we=be,Ze=r(57370),ke=r(26704),_e=r(84933),Ce="SubtypeGroupLayer";function xe(e,t){return new b.Z("layer:unsupported","Layer (".concat(e.title,", ").concat(e.id,") of type '").concat(e.declaredClass,"' ").concat(t),{layer:e})}var Fe=(0,M.v)(),Se=function(e){(0,d.Z)(f,e);var t=(0,y.Z)(f);function f(){var e;(0,u.Z)(this,f);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i)))._sublayerLookup=new Map,e.fields=null,e.fieldsIndex=null,e.outFields=null,e.sublayers=new(h.Z.ofType(we)),e.supportedSourceTypes=new Set(["Feature Layer"]),e.timeInfo=null,e.title="Layer",e.type="subtype-group",e._debouncedSaveOperations=(0,w.Ds)(function(){var t=(0,o.Z)((0,a.Z)().mark((function t(n,i,o){var u,s,p;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.e(2224).then(r.bind(r,2224));case 2:u=t.sent,s=u.save,p=u.saveAs,t.t0=n,t.next=t.t0===_e.x.SAVE?8:t.t0===_e.x.SAVE_AS?9:10;break;case 8:return t.abrupt("return",s((0,l.Z)(e),i));case 9:return t.abrupt("return",p((0,l.Z)(e),o,i));case 10:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}()),e.addHandles((0,Z.watch)((function(){return e.sublayers}),(function(t,r){return e._handleSublayersChange(t,r)}),Z.sync)),e}return(0,s.Z)(f,[{key:"destroy",value:function(){var e;null===(e=this.source)||void 0===e||e.destroy()}},{key:"normalizeCtorArgs",value:function(e,t){return"string"==typeof e?(0,i.Z)({url:e},t):e}},{key:"load",value:function(e){var t=this,r=null!=e?e.signal:null,n=this.loadFromPortal({supportedTypes:["Feature Service"]},e).catch(w.r9).then((0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.url){e.next=2;break}throw new b.Z("subtype-grouplayer:missing-url-or-source","SubtypeGroupLayer must be created with either a url or a portal item");case 2:if(null!=t.layerId){e.next=4;break}throw new b.Z("subtype-grouplayer:missing-layerid","layerId is required for a SubtypeGroupLayer created with url");case 4:return e.t0=t,e.next=7,t.createGraphicsSource(r);case 7:return e.t1=e.sent,e.abrupt("return",e.t0._initLayerProperties.call(e.t0,e.t1));case 9:case"end":return e.stop()}}),e)})))).then((function(){return(0,U.nU)(t,"load",e)}));return this.addResolvingPromise(n),Promise.resolve(this)}},{key:"createQueryVersion",get:function(){var e;return this.commitProperty("definitionExpression"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("gdbVersion"),this.commitProperty("historicMoment"),this.commitProperty("returnZ"),this.commitProperty("capabilities"),this.commitProperty("returnM"),(null!==(e=this._get("createQueryVersion"))&&void 0!==e?e:0)+1}},{key:"editingEnabled",get:function(){return this.loaded&&null!=this.capabilities&&this.capabilities.operations.supportsEditing&&this.userHasEditingPrivileges}},{key:"effectiveEditingEnabled",get:function(){return(0,U.sX)(this)}},{key:"parsedUrl",get:function(){var e=(0,_.mN)(this.url);return null!=e&&null!=this.layerId&&(e.path=(0,_.v_)(e.path,this.layerId.toString())),e}},{key:"source",set:function(e){this._get("source")!==e&&this._set("source",e)}},{key:"readTitleFromService",value:function(e,t){var r=t.name;return this.url?(0,D.a7)(this.url,r):r}},{key:"addAttachment",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,r){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,U.JD)(this,t,r,Ce));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"updateAttachment",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,r,n){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,U.Y5)(this,t,r,n,Ce));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"applyEdits",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,r){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,U.Jj)(this,t,r));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"on",value:function(e,t){return(0,p.Z)((0,c.Z)(f.prototype),"on",this).call(this,e,t)}},{key:"createGraphicsSource",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,w.Hl)(Promise.all([r.e(83406),r.e(27607),r.e(8663),r.e(29887),r.e(89623),r.e(91836),r.e(15026)]).then(r.bind(r,15026)),t);case 2:return n=e.sent,i=n.default,e.abrupt("return",new i({layer:this,supportedSourceTypes:this.supportedSourceTypes}).load({signal:t}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createQuery",value:function(){var e=(0,U.rP)(this),t=this.sublayers.map((function(e){return e.subtypeCode}));return e.where=(0,k._)("".concat(this.subtypeField," IN (").concat(t.join(","),")"),this.definitionExpression),e}},{key:"deleteAttachments",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,r){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,U.FV)(this,t,r,Ce));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"fetchRecomputedExtents",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,U.Ci)(this,t,Ce));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"findSublayerForFeature",value:function(e){var t=this.fieldsIndex.get(this.subtypeField),r=e.attributes[t.name];return this.findSublayerForSubtypeCode(r)}},{key:"findSublayerForSubtypeCode",value:function(e){return this._sublayerLookup.get(e)}},{key:"getFieldDomain",value:function(e,t){return this._getLayerDomain(e)}},{key:"getField",value:function(e){return this.fieldsIndex.get(e)}},{key:"loadAll",value:function(){var e=this;return(0,m.G)(this,(function(t){t(e.sublayers)}))}},{key:"queryAttachments",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,r){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,U.SU)(this,t,r,Ce));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"queryFeatures",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,r){var i,o,u,s,l,p,c,d,y;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:return u=e.sent,s=null!==(i=oe.Z.from(t))&&void 0!==i?i:u.createQuery(),(l=null!==(o=s.outFields)&&void 0!==o?o:[]).includes(this.subtypeField)||(l.push(this.subtypeField),s.outFields=l),e.next=8,u.source.queryFeatures(s,r);case 8:if(null!==(p=e.sent)&&void 0!==p&&p.features){c=(0,n.Z)(p.features);try{for(c.s();!(d=c.n()).done;)(y=d.value).layer=y.sourceLayer=this.findSublayerForFeature(y)}catch(a){c.e(a)}finally{c.f()}}return e.abrupt("return",p);case 11:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"queryObjectIds",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,r){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,U.tD)(this,t,r,Ce));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"queryFeatureCount",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,r){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,U.VG)(this,t,r,Ce));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"queryExtent",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,r){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,U.KE)(this,t,r,Ce));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"queryRelatedFeatures",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,r){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,U.kp)(this,t,r,Ce));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"queryRelatedFeaturesCount",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,r){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,U.C9)(this,t,r,Ce));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"save",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._debouncedSaveOperations(_e.x.SAVE,t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"saveAs",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,r){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._debouncedSaveOperations(_e.x.SAVE_AS,r,t));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"write",value:function(e,t){var r,n=t.origin,i=t.layerContainerType,a=t.messages;if(this.isTable){if("web-scene"===n||"web-map"===n&&"tables"!==i)return null!==a&&void 0!==a&&a.push(xe(this,"using a table source cannot be written to web scenes and web maps")),null}else if(this.loaded&&"web-map"===n&&"tables"===i)return null!==a&&void 0!==a&&a.push(xe(this,"using a non-table source cannot be written to tables in web maps")),null;return null!==(r=this.sublayers)&&void 0!==r&&r.length?(0,p.Z)((0,c.Z)(f.prototype),"write",this).call(this,e,t):(null!==a&&void 0!==a&&a.push(new b.Z("web-document-write:invalid-property","Layer (".concat(this.title,", ").concat(this.id,") of type '").concat(this.declaredClass,"' has invalid value for 'sublayers' property. 'sublayers' collection should contain at least one sublayer"),{layer:this})),null)}},{key:"serviceSupportsSpatialReference",value:function(e){return!!this.loaded&&(0,ke.D)(this,e)}},{key:"_getLayerDomain",value:function(e){var t=this.fieldsIndex.get(e);return t?t.domain:null}},{key:"_initLayerProperties",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var r,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._set("source",t),(n=t.sourceJSON)&&(this.sourceJSON=n,this.read(n,{origin:"service",url:this.parsedUrl})),null!==(r=this.subtypes)&&void 0!==r&&r.length){e.next=4;break}throw new b.Z("subtype-grouplayer:missing-subtypes","SubtypeGroupLayer must be created using a layer with subtypes");case 4:this._verifyFields(),(0,Q.UF)(this.timeInfo,this.fieldsIndex);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"hasDataChanged",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,U.gG)(this));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_verifyFields",value:function(){var e,t,r,n=null!==(e=null===(t=this.parsedUrl)||void 0===t?void 0:t.path)&&void 0!==e?e:"undefined";this.objectIdField||console.log("SubtypeGroupLayer: 'objectIdField' property is not defined (url: "+n+")"),this.isTable||-1!==n.search(/\/FeatureServer\//i)||(null===(r=this.fields)||void 0===r?void 0:r.some((function(e){return"geometry"===e.type})))||console.log("SubtypeGroupLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+n+")")}},{key:"_handleSublayersChange",value:function(e,t){var r=this;t&&(t.forEach((function(e){e.parent=null})),this.removeHandles("sublayers-owner"),this._sublayerLookup.clear()),e&&(e.forEach((function(e){e.parent=r,r._sublayerLookup.set(e.subtypeCode,e)})),this.addHandles([e.on("after-add",(function(e){var t=e.item;t.parent=r,r._sublayerLookup.set(t.subtypeCode,t)})),e.on("after-remove",(function(e){var t=e.item;t.parent=null,r._sublayerLookup.delete(t.subtypeCode)}))],"sublayers-owner"))}}]),f}((0,L.B)((0,A.o1)((0,E.h7)((0,V.n)((0,R.M)((0,q.Q)((0,j.Y)((0,P.q)((0,G.I)((0,g.R)((0,T.N)((0,O.V)((0,v.J)(I.Z))))))))))))));(0,f._)([(0,C.Cb)({readOnly:!0})],Se.prototype,"createQueryVersion",null),(0,f._)([(0,C.Cb)({readOnly:!0})],Se.prototype,"editingEnabled",null),(0,f._)([(0,C.Cb)({readOnly:!0})],Se.prototype,"effectiveEditingEnabled",null),(0,f._)([(0,C.Cb)((0,i.Z)((0,i.Z)({},Fe.fields),{},{readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}))],Se.prototype,"fields",void 0),(0,f._)([(0,C.Cb)(Fe.fieldsIndex)],Se.prototype,"fieldsIndex",void 0),(0,f._)([(0,C.Cb)(N.id)],Se.prototype,"id",void 0),(0,f._)([(0,C.Cb)({type:["show","hide","hide-children"],json:{origins:{"portal-item":{read:!1,write:!1}}}})],Se.prototype,"listMode",void 0),(0,f._)([(0,C.Cb)({value:"SubtypeGroupLayer",type:["SubtypeGroupLayer"],json:{origins:{"portal-item":{name:"layerType",write:{enabled:!0,ignoreOrigin:!0}}}}})],Se.prototype,"operationalLayerType",void 0),(0,f._)([(0,C.Cb)(Fe.outFields)],Se.prototype,"outFields",void 0),(0,f._)([(0,C.Cb)({readOnly:!0})],Se.prototype,"parsedUrl",null),(0,f._)([(0,C.Cb)({clonable:!1})],Se.prototype,"source",null),(0,f._)([(0,C.Cb)({type:h.Z.ofType(we),json:{origins:{service:{read:{source:"subtypes",reader:function(e,t,r){var n=e.map((function(e){var n=e.code,i=new we({subtypeCode:n});return i.read(t,r),i}));return new(h.Z.ofType(we))(n)}}}},name:"layers",write:{ignoreOrigin:!0}}})],Se.prototype,"sublayers",void 0),(0,f._)([(0,C.Cb)({type:Ze.Z})],Se.prototype,"timeInfo",void 0),(0,f._)([(0,C.Cb)({json:{origins:{"portal-item":{write:{enabled:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}}}}})],Se.prototype,"title",void 0),(0,f._)([(0,F.r)("service","title",["name"])],Se.prototype,"readTitleFromService",null),(0,f._)([(0,C.Cb)({json:{read:!1}})],Se.prototype,"type",void 0);var Ie=Se=(0,f._)([(0,S.j)("esri.layers.SubtypeGroupLayer")],Se)}}]);
//# sourceMappingURL=60150.87ca62fb.chunk.js.map