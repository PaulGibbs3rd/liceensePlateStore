"use strict";(self.webpackChunkreact_training=self.webpackChunkreact_training||[]).push([[9532],{9532:function(e,t,n){n.r(t),n.d(t,{default:function(){return de}});var r=n(74165),o=n(37762),i=n(15861),u=n(93433),a=n(1413),l=n(15671),s=n(43144),d=n(60136),c=n(29388),p=n(27366),f=n(44055),v=n(76200),y=n(10064),h=n(84652),g=n(32718),b=n(97642),m=n(18202),Z=n(66978),w=n(35995),C=n(49861),_=(n(93169),n(38511)),x=n(69912),I=n(31201),k=n(30651),R=n(27961),P=n(11936),S=n(46671),F=n(6061),T=n(29598),E=n(56811),j=n(81118),q=n(25243),B=n(27135),L=n(46784),V=(n(84936),function(e){(0,d.Z)(n,e);var t=(0,c.Z)(n);function n(e){var r;return(0,l.Z)(this,n),(r=t.call(this,e)).field=null,r.type=null,r}return(0,s.Z)(n,[{key:"clone",value:function(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}}]),n}(L.wq));(0,p._)([(0,C.Cb)({type:String,json:{write:{enabled:!0,isRequired:!0}}})],V.prototype,"field",void 0),(0,p._)([(0,C.Cb)({readOnly:!0,nonNullable:!0,json:{read:!1}})],V.prototype,"type",void 0);var N,A=V=(0,p._)([(0,x.j)("esri.layers.pointCloudFilters.PointCloudFilter")],V),O=N=function(e){(0,d.Z)(n,e);var t=(0,c.Z)(n);function n(e){var r;return(0,l.Z)(this,n),(r=t.call(this,e)).requiredClearBits=null,r.requiredSetBits=null,r.type="bitfield",r}return(0,s.Z)(n,[{key:"clone",value:function(){return new N({field:this.field,requiredClearBits:(0,h.d9)(this.requiredClearBits),requiredSetBits:(0,h.d9)(this.requiredSetBits)})}}]),n}(A);(0,p._)([(0,C.Cb)({type:[q.z8],json:{write:{enabled:!0,overridePolicy:function(){return{enabled:!0,isRequired:!this.requiredSetBits}}}}})],O.prototype,"requiredClearBits",void 0),(0,p._)([(0,C.Cb)({type:[q.z8],json:{write:{enabled:!0,overridePolicy:function(){return{enabled:!0,isRequired:!this.requiredClearBits}}}}})],O.prototype,"requiredSetBits",void 0),(0,p._)([(0,B.J)({pointCloudBitfieldFilter:"bitfield"})],O.prototype,"type",void 0);var z,D=O=N=(0,p._)([(0,x.j)("esri.layers.pointCloudFilters.PointCloudBitfieldFilter")],O),G=z=function(e){(0,d.Z)(n,e);var t=(0,c.Z)(n);function n(e){var r;return(0,l.Z)(this,n),(r=t.call(this,e)).includedReturns=[],r.type="return",r}return(0,s.Z)(n,[{key:"clone",value:function(){return new z({field:this.field,includedReturns:(0,h.d9)(this.includedReturns)})}}]),n}(A);(0,p._)([(0,C.Cb)({type:[["firstOfMany","last","lastOfMany","single"]],json:{write:{enabled:!0,isRequired:!0}}})],G.prototype,"includedReturns",void 0),(0,p._)([(0,B.J)({pointCloudReturnFilter:"return"})],G.prototype,"type",void 0);var K,M=G=z=(0,p._)([(0,x.j)("esri.layers.pointCloudFilters.PointCloudReturnFilter")],G),J=K=function(e){(0,d.Z)(n,e);var t=(0,c.Z)(n);function n(e){var r;return(0,l.Z)(this,n),(r=t.call(this,e)).mode="exclude",r.type="value",r.values=[],r}return(0,s.Z)(n,[{key:"clone",value:function(){return new K({field:this.field,mode:this.mode,values:(0,h.d9)(this.values)})}}]),n}(A);(0,p._)([(0,C.Cb)({type:["exclude","include"],json:{write:{enabled:!0,isRequired:!0}}})],J.prototype,"mode",void 0),(0,p._)([(0,B.J)({pointCloudValueFilter:"value"})],J.prototype,"type",void 0),(0,p._)([(0,C.Cb)({type:[Number],json:{write:{enabled:!0,isRequired:!0}}})],J.prototype,"values",void 0);var U,W={key:"type",base:A,typeMap:{value:J=K=(0,p._)([(0,x.j)("esri.layers.pointCloudFilters.PointCloudValueFilter")],J),bitfield:D,return:M}},$=n(70361),H=n(83040),Q=n(25610),X=n(89860),Y=n(21134),ee=n(2632),te=U=function(e){(0,d.Z)(n,e);var t=(0,c.Z)(n);function n(e){var r;return(0,l.Z)(this,n),(r=t.call(this,e)).type="point-cloud-rgb",r.field=null,r}return(0,s.Z)(n,[{key:"clone",value:function(){return new U((0,a.Z)((0,a.Z)({},this.cloneProperties()),{},{field:(0,h.d9)(this.field)}))}}]),n}(ee.Z);(0,p._)([(0,B.J)({pointCloudRGBRenderer:"point-cloud-rgb"})],te.prototype,"type",void 0),(0,p._)([(0,C.Cb)({type:String,json:{write:!0}})],te.prototype,"field",void 0);var ne=te=U=(0,p._)([(0,x.j)("esri.renderers.PointCloudRGBRenderer")],te),re=n(89431),oe=n(87005),ie={key:"type",base:ee.Z,typeMap:{"point-cloud-class-breaks":Y.Z,"point-cloud-rgb":ne,"point-cloud-stretch":re.Z,"point-cloud-unique-value":oe.Z},errorContext:"renderer"},ue=n(74509),ae=n(81085),le=(0,Q.v)(),se=function(e){(0,d.Z)(n,e);var t=(0,c.Z)(n);function n(){var e;(0,l.Z)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).operationalLayerType="PointCloudLayer",e.popupEnabled=!0,e.popupTemplate=null,e.opacity=1,e.filters=[],e.fields=null,e.fieldsIndex=null,e.outFields=null,e.path=null,e.legendEnabled=!0,e.renderer=null,e.type="point-cloud",e}return(0,s.Z)(n,[{key:"normalizeCtorArgs",value:function(e,t){return"string"==typeof e?(0,a.Z)({url:e},t):e}},{key:"defaultPopupTemplate",get:function(){return this.attributeStorageInfo?this.createPopupTemplate():null}},{key:"getFieldDomain",value:function(e){var t=this.fieldsIndex.get(e);return null!==t&&void 0!==t&&t.domain?t.domain:null}},{key:"readServiceFields",value:function(e,t,n){return Array.isArray(e)?e.map((function(e){var t=new H.Z;return"FieldTypeInteger"===e.type&&((e=(0,h.d9)(e)).type="esriFieldTypeInteger"),t.read(e,n),t})):Array.isArray(t.attributeStorageInfo)?t.attributeStorageInfo.map((function(e){return new H.Z({name:e.name,type:"ELEVATION"===e.name?"double":"integer"})})):null}},{key:"elevationInfo",set:function(e){this._set("elevationInfo",e),this._validateElevationInfo()}},{key:"writeRenderer",value:function(e,t,n,r){(0,m.RB)("layerDefinition.drawingInfo.renderer",e.write({},r),t)}},{key:"load",value:function(e){var t=this,n=null!=e?e.signal:null,r=this.loadFromPortal({supportedTypes:["Scene Service"]},e).catch(Z.r9).then((function(){return t._fetchService(n)}));return this.addResolvingPromise(r),Promise.resolve(this)}},{key:"createPopupTemplate",value:function(e){var t=(0,ae.eZ)(this,e);return t&&(this._formatPopupTemplateReturnsField(t),this._formatPopupTemplateRGBField(t)),t}},{key:"_formatPopupTemplateReturnsField",value:function(e){var t,n=this.fieldsIndex.get("RETURNS");if(n){var r=null===(t=e.fieldInfos)||void 0===t?void 0:t.find((function(e){return e.fieldName===n.name}));if(r){var o=new X.Z({name:"pcl-returns-decoded",title:n.alias||n.name,expression:"\n        var returnValue = $feature.".concat(n.name,';\n        return (returnValue % 16) + " / " + Floor(returnValue / 16);\n      ')});e.expressionInfos=[].concat((0,u.Z)(e.expressionInfos||[]),[o]),r.fieldName="expression/pcl-returns-decoded"}}}},{key:"_formatPopupTemplateRGBField",value:function(e){var t,n=this.fieldsIndex.get("RGB");if(n){var r=null===(t=e.fieldInfos)||void 0===t?void 0:t.find((function(e){return e.fieldName===n.name}));if(r){var o=new X.Z({name:"pcl-rgb-decoded",title:n.alias||n.name,expression:"\n        var rgb = $feature.".concat(n.name,';\n        var red = Floor(rgb / 65536, 0);\n        var green = Floor((rgb - (red * 65536)) / 256,0);\n        var blue = rgb - (red * 65536) - (green * 256);\n\n        return "rgb(" + red + "," + green + "," + blue + ")";\n      ')});e.expressionInfos=[].concat((0,u.Z)(e.expressionInfos||[]),[o]),r.fieldName="expression/pcl-rgb-decoded"}}}},{key:"queryCachedStatistics",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n){var i,u,l,s,d,c,p;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load(n);case 2:if(this.attributeStorageInfo){e.next=4;break}throw new y.Z("scenelayer:no-cached-statistics","Cached statistics are not available for this layer");case 4:if(i=this.fieldsIndex.get(t)){e.next=7;break}throw new y.Z("pointcloudlayer:field-unexisting","Field '".concat(t,"' does not exist on the layer"));case 7:u=(0,o.Z)(this.attributeStorageInfo),e.prev=8,u.s();case 10:if((l=u.n()).done){e.next=17;break}if((s=l.value).name!==i.name){e.next=15;break}return p=(0,w.v_)(null!==(d=null===(c=this.parsedUrl)||void 0===c?void 0:c.path)&&void 0!==d?d:"","./statistics/".concat(s.key)),e.abrupt("return",(0,v.Z)(p,{query:(0,a.Z)((0,a.Z)({f:"json"},this.customParameters),{},{token:this.apiKey}),responseType:"json",signal:n?n.signal:null}).then((function(e){return e.data})));case 15:e.next=10;break;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(8),u.e(e.t0);case 22:return e.prev=22,u.f(),e.finish(22);case 25:throw new y.Z("pointcloudlayer:no-cached-statistics","Cached statistics for this attribute are not available");case 26:case"end":return e.stop()}}),e,this,[[8,19,22,25]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"saveAs",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n){var o=this;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._debouncedSaveOperations(j.xp.SAVE_AS,(0,a.Z)((0,a.Z)({},n),{},{getTypeKeywords:function(){return o._getTypeKeywords()},portalItemLayerType:"point-cloud"}),t));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"save",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var t,n=this;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={getTypeKeywords:function(){return n._getTypeKeywords()},portalItemLayerType:"point-cloud"},e.abrupt("return",this._debouncedSaveOperations(j.xp.SAVE,t));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"validateLayer",value:function(e){if(e.layerType&&"PointCloud"!==e.layerType)throw new y.Z("pointcloudlayer:layer-type-not-supported","PointCloudLayer does not support this layer type",{layerType:e.layerType});if(isNaN(this.version.major)||isNaN(this.version.minor))throw new y.Z("layer:service-version-not-supported","Service version is not supported.",{serviceVersion:this.version.versionString,supportedVersions:"1.x-2.x"});if(this.version.major>2)throw new y.Z("layer:service-version-too-new","Service version is too new.",{serviceVersion:this.version.versionString,supportedVersions:"1.x-2.x"})}},{key:"hasCachedStatistics",value:function(e){return null!=this.attributeStorageInfo&&this.attributeStorageInfo.some((function(t){return t.name===e}))}},{key:"_getTypeKeywords",value:function(){return["PointCloud"]}},{key:"_validateElevationInfo",value:function(){var e=this.elevationInfo;(0,ue.LR)(g.Z.getLogger(this),(0,ue.Uy)("Point cloud layers","absolute-height",e)),(0,ue.LR)(g.Z.getLogger(this),(0,ue.kf)("Point cloud layers",e))}}]),n}((0,j.Vt)((0,P.Y)((0,F.q)((0,T.I)((0,E.M)((0,b.R)((0,S.N)((0,R.V)(k.Z)))))))));(0,p._)([(0,C.Cb)({type:["PointCloudLayer"]})],se.prototype,"operationalLayerType",void 0),(0,p._)([(0,C.Cb)($.C_)],se.prototype,"popupEnabled",void 0),(0,p._)([(0,C.Cb)({type:f.Z,json:{name:"popupInfo",write:!0}})],se.prototype,"popupTemplate",void 0),(0,p._)([(0,C.Cb)({readOnly:!0,json:{read:!1}})],se.prototype,"defaultPopupTemplate",null),(0,p._)([(0,C.Cb)({readOnly:!0,json:{write:!1,read:!1,origins:{"web-document":{write:!1,read:!1}}}})],se.prototype,"opacity",void 0),(0,p._)([(0,C.Cb)({type:["show","hide"]})],se.prototype,"listMode",void 0),(0,p._)([(0,C.Cb)({types:[W],json:{origins:{service:{read:{source:"filters"}}},name:"layerDefinition.filters",write:!0}})],se.prototype,"filters",void 0),(0,p._)([(0,C.Cb)({type:[H.Z]})],se.prototype,"fields",void 0),(0,p._)([(0,C.Cb)(le.fieldsIndex)],se.prototype,"fieldsIndex",void 0),(0,p._)([(0,_.r)("service","fields",["fields","attributeStorageInfo"])],se.prototype,"readServiceFields",null),(0,p._)([(0,C.Cb)(le.outFields)],se.prototype,"outFields",void 0),(0,p._)([(0,C.Cb)({readOnly:!0})],se.prototype,"attributeStorageInfo",void 0),(0,p._)([(0,C.Cb)($.PV)],se.prototype,"elevationInfo",null),(0,p._)([(0,C.Cb)({type:String,json:{origins:{"web-scene":{read:!0,write:!0},"portal-item":{read:!0,write:!0}},read:!1}})],se.prototype,"path",void 0),(0,p._)([(0,C.Cb)($.rn)],se.prototype,"legendEnabled",void 0),(0,p._)([(0,C.Cb)({types:ie,json:{origins:{service:{read:{source:"drawingInfo.renderer"}}},name:"layerDefinition.drawingInfo.renderer",write:{target:{"layerDefinition.drawingInfo.renderer":{types:ie},"layerDefinition.drawingInfo.transparency":{type:Number}}}}})],se.prototype,"renderer",void 0),(0,p._)([(0,I.c)("renderer")],se.prototype,"writeRenderer",null),(0,p._)([(0,C.Cb)({json:{read:!1},readOnly:!0})],se.prototype,"type",void 0);var de=se=(0,p._)([(0,x.j)("esri.layers.PointCloudLayer")],se)},74509:function(e,t,n){n.d(t,{AA:function(){return v},Jn:function(){return s},LR:function(){return P},Lt:function(){return p},O3:function(){return w},Ou:function(){return b},RL:function(){return c},Uy:function(){return I},VW:function(){return l},W_:function(){return x},Wb:function(){return k},XH:function(){return y},Zz:function(){return u},ap:function(){return g},fl:function(){return f},fm:function(){return S},jG:function(){return F},kf:function(){return R},mF:function(){return a},tR:function(){return T},tq:function(){return C},vQ:function(){return m},vu:function(){return d},zx:function(){return Z}});var r=n(68860),o=n(88152);function i(e){return e?F:T}function u(e,t){return null!==t&&void 0!==t&&t.mode?t.mode:i(e).mode}function a(e,t){return null!=t?t:i(e)}function l(e,t){return u(null!=e&&e.hasZ,t)}function s(e,t){return a(null!=e&&!!e.hasZ,t)}function d(e){var t=h(e);return l(e.geometry,t)}function c(e){var t=h(e),n=l(e.geometry,t);return{mode:n,offset:null!=t&&"on-the-ground"!==n?S(t):0,featureExpressionInfo:null===t||void 0===t?void 0:t.featureExpressionInfo}}function p(e){return y(c(e))}function f(e){return y(e)||v(e)}function v(e){var t;return"0"===(null===e||void 0===e||null===(t=e.featureExpressionInfo)||void 0===t?void 0:t.expression)}function y(e){if(!e)return!1;if("on-the-ground"===e.mode)return!1;var t=null!==e&&void 0!==e&&e.featureExpressionInfo?e.featureExpressionInfo.expression:null;return!(!t||"0"===t)}function h(e){return e.layer&&"elevationInfo"in e.layer?e.layer.elevationInfo:null}function g(e,t){if(null===e||void 0===e||!e.offset)return 0;var n=e.offset,o=e.unit;if("decimal-degrees"===o)return 0;var i="unknown"!==o&&o?o:"meters",u=(0,r.y)(t);return u?(0,r.En)(n,i,u):0}function b(e,t,n){var r,o;if(null!==n&&void 0!==n&&n.mode){var i=e.hasZ?e.z:0,u=g(n,e.spatialReference);switch(n.mode){case"absolute-height":return i-u;case"on-the-ground":return 0;case"relative-to-ground":return i-((null!==(r=t.elevationProvider.getElevation(e.x,e.y,i,e.spatialReference,"ground"))&&void 0!==r?r:0)+u);case"relative-to-scene":return i-((null!==(o=t.elevationProvider.getElevation(e.x,e.y,i,e.spatialReference,"scene"))&&void 0!==o?o:0)+u)}}}function m(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return w(e,t.x,t.y,t.hasZ?t.z:0,t.spatialReference,n,r)}function Z(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return w(e,t[0],t[1],t.length>2?t[2]:0,n,r,o)}function w(e,t,n,r,o,i){var u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;if(null!=i){var a=null!=u?u.mode:"absolute-height";if("on-the-ground"===a)return 0;var l=C(t,n,r,o,e,i),s=l.absoluteZ;return _(s,t,n,r,o,e,u,a)}}function C(e,t,n,r,o,i){var u=g(i,r);switch(i.mode){case"absolute-height":return{absoluteZ:n+u,elevation:0};case"on-the-ground":var a,l=null!==(a=o.elevationProvider.getElevation(e,t,0,r,"ground"))&&void 0!==a?a:0;return{absoluteZ:l,elevation:l};case"relative-to-ground":var s,d=null!==(s=o.elevationProvider.getElevation(e,t,n,r,"ground"))&&void 0!==s?s:0;return{absoluteZ:n+d+u,elevation:d};case"relative-to-scene":var c,p=null!==(c=o.elevationProvider.getElevation(e,t,n,r,"scene"))&&void 0!==c?c:0;return{absoluteZ:n+p+u,elevation:p}}}function _(e,t,n,r,o,i,u,a){var l,s,d=g(u,o);switch(a){case"absolute-height":return e-d;case"relative-to-ground":return e-((null!==(l=i.elevationProvider.getElevation(t,n,r,o,"ground"))&&void 0!==l?l:0)+d);case"relative-to-scene":return e-((null!==(s=i.elevationProvider.getElevation(t,n,r,o,"scene"))&&void 0!==s?s:0)+d)}}function x(e,t){if(null==t)return!1;var n=t.mode;return null!=n&&("scene"===e&&"relative-to-scene"===n||"ground"===e&&"absolute-height"!==n)}function I(e,t,n){return n&&n.mode!==t?"".concat(e," only support ").concat(t," elevation mode"):null}function k(e,t,n){return(null===n||void 0===n?void 0:n.mode)===t?"".concat(e," do not support ").concat(t," elevation mode"):null}function R(e,t){return null!=(null===t||void 0===t?void 0:t.featureExpressionInfo)&&"0"!==t.featureExpressionInfo.expression?"".concat(e," do not support featureExpressionInfo"):null}function P(e,t){t&&e.warn(".elevationInfo=",t)}function S(e){var t;return(null!==(t=null===e||void 0===e?void 0:e.offset)&&void 0!==t?t:0)*(0,o.Z7)(null===e||void 0===e?void 0:e.unit)}var F={mode:"absolute-height",offset:0},T={mode:"on-the-ground",offset:null}}}]);
//# sourceMappingURL=9532.ac4c6abc.chunk.js.map