"use strict";(self.webpackChunkreact_training=self.webpackChunkreact_training||[]).push([[13838],{77178:function(e,t,r){r.d(t,{Z:function(){return p}});var n=r(37762),i=r(15671),l=r(43144),o=r(60136),a=r(29388),u=r(27366),s=r(80987),f=(r(14921),r(10064),r(32718),r(3073),r(27088)),y=r(49861),c=r(69912),v=function(e){(0,o.Z)(r,e);var t=(0,a.Z)(r);function r(e){var n;return(0,i.Z)(this,r),(n=t.call(this,e)).getCollections=null,n}return(0,l.Z)(r,[{key:"initialize",value:function(){var e=this;this.addHandles((0,f.EH)((function(){return e._refresh()})))}},{key:"destroy",value:function(){this.getCollections=null}},{key:"_refresh",value:function(){var e=null!=this.getCollections?this.getCollections():null;if(null!=e){var t,r=0,i=(0,n.Z)(e);try{for(i.s();!(t=i.n()).done;){var l=t.value;null!=l&&(r=this._processCollection(r,l))}}catch(o){i.e(o)}finally{i.f()}this.splice(r,this.length)}else this.removeAll()}},{key:"_createNewInstance",value:function(e){return new s.Z(e)}},{key:"_processCollection",value:function(e,t){var r;if(!t)return e;var i,l=null!==(r=this.itemFilterFunction)&&void 0!==r?r:function(e){return!!e},o=(0,n.Z)(t);try{for(o.s();!(i=o.n()).done;){var a=i.value;if(a){if(l(a)){var u=this.indexOf(a,e);u>=0?u!==e&&this.reorder(a,e):this.add(a,e),++e}if(this.getChildrenFunction){var s=this.getChildrenFunction(a);if(Array.isArray(s)){var f,y=(0,n.Z)(s);try{for(y.s();!(f=y.n()).done;){var c=f.value;e=this._processCollection(e,c)}}catch(v){y.e(v)}finally{y.f()}}else e=this._processCollection(e,s)}}}}catch(v){o.e(v)}finally{o.f()}return e}}]),r}(s.Z);(0,u._)([(0,y.Cb)()],v.prototype,"getCollections",void 0),(0,u._)([(0,y.Cb)()],v.prototype,"getChildrenFunction",void 0),(0,u._)([(0,y.Cb)()],v.prototype,"itemFilterFunction",void 0);var p=v=(0,u._)([(0,c.j)("esri.core.CollectionFlattener")],v)},13838:function(e,t,r){r.r(t),r.d(t,{default:function(){return D}});var n,i=r(37762),l=r(74165),o=r(15861),a=r(93433),u=r(1413),s=r(15671),f=r(43144),y=r(88301),c=r(61120),v=r(60136),p=r(29388),d=r(27366),h=(r(59486),r(80987)),b=r(77178),g=r(97642),m=r(66978),C=r(94172),_=r(35995),Z=r(49861),k=(r(93169),r(32718),r(84936),r(38511)),w=r(69912),S=r(31201),x=r(78952),E=r(30651),F=r(6693),I=r(6061),O=r(29598),G=r(71684),P=r(56811),L=r(70361),M=r(97326),j=r(91505),T=r(46784),N=r(54472),A=r(643),R=r(25243),J=r(21857),z=r(53866),K=n=function(e){(0,v.Z)(r,e);var t=(0,p.Z)(r);function r(){var e;(0,s.Z)(this,r);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(e=t.call.apply(t,[this].concat(l))).description=null,e.fullExtent=null,e.id=null,e.networkLink=null,e.parent=null,e.sublayers=null,e.title=null,e.sourceJSON=null,e.layer=null,e.addHandles([(0,C.on)((function(){return e.sublayers}),"after-add",(function(t){var r=t.item;r.parent=(0,M.Z)(e),r.layer=e.layer}),C.sync),(0,C.on)((function(){return e.sublayers}),"after-remove",(function(e){var t=e.item;t.layer=t.parent=null}),C.sync),(0,C.watch)((function(){return e.sublayers}),(function(t,r){if(r){var n,l=(0,i.Z)(r);try{for(l.s();!(n=l.n()).done;){var o=n.value;o.layer=o.parent=null}}catch(f){l.e(f)}finally{l.f()}}if(t){var a,u=(0,i.Z)(t);try{for(u.s();!(a=u.n()).done;){var s=a.value;s.parent=(0,M.Z)(e),s.layer=e.layer}}catch(f){u.e(f)}finally{u.f()}}}),C.sync),(0,C.watch)((function(){return e.layer}),(function(t){if(e.sublayers){var r,n=(0,i.Z)(e.sublayers);try{for(n.s();!(r=n.n()).done;){r.value.layer=t}}catch(l){n.e(l)}finally{n.f()}}}),C.sync)]),e}return(0,f.Z)(r,[{key:"initialize",value:function(){var e=this;(0,C.whenOnce)((function(){return e.networkLink})).then((function(){return(0,C.whenOnce)((function(){return!0===e.visible}))})).then((function(){return e.load()}))}},{key:"load",value:function(e){var t,r,i=this;if(this.networkLink&&!this.networkLink.viewFormat){var l=null!=e?e.signal:null,o=this._fetchService(null!==(t=null===(r=this._get("networkLink"))||void 0===r?void 0:r.href)&&void 0!==t?t:"",l).then((function(e){var t,r=(0,J.lm)(e.sublayers);i.fullExtent=z.Z.fromJSON(r),i.sourceJSON=e;var l=(0,R.se)(h.Z.ofType(n),(0,J.j5)(n,e));i.sublayers?i.sublayers.addMany(l):i.sublayers=l,null!==(t=i.layer)&&void 0!==t&&t.emit("sublayer-update"),i.layer&&i.layer.notifyChange("visibleSublayers")}));return this.addResolvingPromise(o),Promise.resolve(this)}}},{key:"visible",get:function(){return this._get("visible")},set:function(e){this._get("visible")!==e&&(this._set("visible",e),this.layer&&this.layer.notifyChange("visibleSublayers"))}},{key:"readVisible",value:function(e,t){return!!t.visibility}},{key:"_fetchService",value:function(e,t){return(0,J.CS)(e,this.layer.outSpatialReference,this.layer.refreshInterval,t).then((function(e){return(0,J.Cw)(e.data)}))}}]),r}(j.Z.EventedMixin((0,T.eC)(N.Z)));(0,d._)([(0,Z.Cb)()],K.prototype,"description",void 0),(0,d._)([(0,Z.Cb)({type:z.Z})],K.prototype,"fullExtent",void 0),(0,d._)([(0,Z.Cb)()],K.prototype,"id",void 0),(0,d._)([(0,Z.Cb)({readOnly:!0,value:null})],K.prototype,"networkLink",void 0),(0,d._)([(0,Z.Cb)({json:{write:{allowNull:!0}}})],K.prototype,"parent",void 0),(0,d._)([(0,Z.Cb)({type:h.Z.ofType(K),json:{write:{allowNull:!0}}})],K.prototype,"sublayers",void 0),(0,d._)([(0,Z.Cb)({value:null,json:{read:{source:"name",reader:function(e){return(0,A.Cb)(e)}}}})],K.prototype,"title",void 0),(0,d._)([(0,Z.Cb)({value:!0})],K.prototype,"visible",null),(0,d._)([(0,k.r)("visible",["visibility"])],K.prototype,"readVisible",null),(0,d._)([(0,Z.Cb)()],K.prototype,"sourceJSON",void 0),(0,d._)([(0,Z.Cb)()],K.prototype,"layer",void 0);var H=K=n=(0,d._)([(0,w.j)("esri.layers.support.KMLSublayer")],K),Y=["kml","xml"],W=function(e){(0,v.Z)(r,e);var t=(0,p.Z)(r);function r(){var e;(0,s.Z)(this,r);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(e=t.call.apply(t,[this].concat(i)))._visibleFolders=[],e.allSublayers=new b.Z({getCollections:function(){return[e.sublayers]},getChildrenFunction:function(e){return e.sublayers}}),e.outSpatialReference=x.Z.WGS84,e.path=null,e.legendEnabled=!1,e.operationalLayerType="KML",e.sublayers=null,e.type="kml",e.url=null,e}return(0,f.Z)(r,[{key:"initialize",value:function(){var e=this;this.addHandles([(0,C.watch)((function(){return e.sublayers}),(function(t,r){r&&r.forEach((function(e){e.parent=null,e.layer=null})),t&&t.forEach((function(t){t.parent=e,t.layer=e}))}),C.sync),this.on("sublayer-update",(function(){return e.notifyChange("fullExtent")}))])}},{key:"normalizeCtorArgs",value:function(e,t){return"string"==typeof e?(0,u.Z)({url:e},t):e}},{key:"readSublayersFromItemOrWebMap",value:function(e,t){this._visibleFolders=t.visibleFolders}},{key:"readSublayers",value:function(e,t,r){return(0,J.j5)(H,t,r,this._visibleFolders)}},{key:"writeSublayers",value:function(e,t){for(var r=[],n=e.toArray();n.length;){var i=n[0];i.networkLink||(i.visible&&r.push(i.id),i.sublayers&&n.push.apply(n,(0,a.Z)(i.sublayers.toArray()))),n.shift()}t.visibleFolders=r}},{key:"title",get:function(){var e=this._get("title");return e&&"defaults"!==this.originOf("title")?e:this.url?(0,_.vt)(this.url,Y)||"KML":e},set:function(e){this._set("title",e)}},{key:"visibleSublayers",get:function(){var e=this.sublayers,t=[];return e&&e.forEach((function e(r){r.visible&&(t.push(r),r.sublayers&&r.sublayers.forEach(e))})),t}},{key:"fullExtent",get:function(){return this._recomputeFullExtent()}},{key:"load",value:function(e){var t=this,r=null!=e?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["KML"],supportsData:!1},e).catch(m.r9).then((function(){return t._fetchService(r)}))),Promise.resolve(this)}},{key:"destroy",value:function(){(0,y.Z)((0,c.Z)(r.prototype),"destroy",this).call(this),this.allSublayers.destroy()}},{key:"_fetchService",value:function(){var e=(0,o.Z)((0,l.Z)().mark((function e(t){var r,n,i=this;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then((function(){var e;return i.resourceInfo?{ssl:!1,data:i.resourceInfo}:(0,J.CS)(null!==(e=i.url)&&void 0!==e?e:"",i.outSpatialReference,i.refreshInterval,t)}));case 2:r=e.sent,(n=(0,J.Cw)(r.data))&&this.read(n,{origin:"service"});case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_recomputeFullExtent",value:function(){var e=null;null!=this.extent&&(e=this.extent.clone());return function t(r){if(r.sublayers){var n,l=(0,i.Z)(r.sublayers.items);try{for(l.s();!(n=l.n()).done;){var o=n.value;t(o),o.visible&&o.fullExtent&&(null!=e?e.union(o.fullExtent):e=o.fullExtent.clone())}}catch(a){l.e(a)}finally{l.f()}}}(this),e}}]),r}((0,F.h7)((0,G.Q)((0,P.M)((0,I.q)((0,O.I)((0,g.R)(E.Z)))))));(0,d._)([(0,Z.Cb)({readOnly:!0})],W.prototype,"allSublayers",void 0),(0,d._)([(0,Z.Cb)({type:x.Z})],W.prototype,"outSpatialReference",void 0),(0,d._)([(0,Z.Cb)({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],W.prototype,"path",void 0),(0,d._)([(0,Z.Cb)({readOnly:!0,json:{read:!1,write:!1}})],W.prototype,"legendEnabled",void 0),(0,d._)([(0,Z.Cb)({type:["show","hide","hide-children"]})],W.prototype,"listMode",void 0),(0,d._)([(0,Z.Cb)({type:["KML"]})],W.prototype,"operationalLayerType",void 0),(0,d._)([(0,Z.Cb)({})],W.prototype,"resourceInfo",void 0),(0,d._)([(0,Z.Cb)({type:h.Z.ofType(H),json:{write:{ignoreOrigin:!0}}})],W.prototype,"sublayers",void 0),(0,d._)([(0,k.r)(["web-map","portal-item"],"sublayers",["visibleFolders"])],W.prototype,"readSublayersFromItemOrWebMap",null),(0,d._)([(0,k.r)("service","sublayers",["sublayers"])],W.prototype,"readSublayers",null),(0,d._)([(0,S.c)("sublayers")],W.prototype,"writeSublayers",null),(0,d._)([(0,Z.Cb)({readOnly:!0,json:{read:!1}})],W.prototype,"type",void 0),(0,d._)([(0,Z.Cb)({json:{origins:{"web-map":{read:{source:"title"}}},write:{ignoreOrigin:!0}}})],W.prototype,"title",null),(0,d._)([(0,Z.Cb)(L.HQ)],W.prototype,"url",void 0),(0,d._)([(0,Z.Cb)({readOnly:!0})],W.prototype,"visibleSublayers",null),(0,d._)([(0,Z.Cb)({type:z.Z})],W.prototype,"extent",void 0),(0,d._)([(0,Z.Cb)()],W.prototype,"fullExtent",null);var D=W=(0,d._)([(0,w.j)("esri.layers.KMLLayer")],W)},21857:function(e,t,r){r.d(t,{CS:function(){return m},Cw:function(){return g},Yu:function(){return Z},j5:function(){return C},lm:function(){return w}});var n=r(74165),i=r(15861),l=r(37762),o=r(42265),a=r(19545),u=r(44055),s=r(76200),f=r(84652),y=r(35995),c=r(78952),v=r(41414),p=r(376),d=r(9014),h=r(49818),b={esriGeometryPoint:"points",esriGeometryPolyline:"polylines",esriGeometryPolygon:"polygons"};function g(e){var t,r=e.folders||[],n=r.slice(),i=new Map,o=new Map,a=new Map,u=new Map,s=new Map,y={esriGeometryPoint:o,esriGeometryPolyline:a,esriGeometryPolygon:u};((null===(t=e.featureCollection)||void 0===t?void 0:t.layers)||[]).forEach((function(e){var t=(0,f.d9)(e);t.featureSet.features=[];var r=e.featureSet.geometryType;i.set(r,t);var n=e.layerDefinition.objectIdField;"esriGeometryPoint"===r?_(o,n,e.featureSet.features):"esriGeometryPolyline"===r?_(a,n,e.featureSet.features):"esriGeometryPolygon"===r&&_(u,n,e.featureSet.features)})),e.groundOverlays&&e.groundOverlays.forEach((function(e){s.set(e.id,e)})),r.forEach((function(t){t.networkLinkIds.forEach((function(r){var i=function(e,t,r){var n=function(e,t){var r;return t.some((function(t){return t.id===e&&(r=t,!0)})),r}(e,r);return n&&(n.parentFolderId=t,n.networkLink=n),n}(r,t.id,e.networkLinks);i&&n.push(i)}))})),n.forEach((function(e){if(e.featureInfos){e.points=(0,f.d9)(i.get("esriGeometryPoint")),e.polylines=(0,f.d9)(i.get("esriGeometryPolyline")),e.polygons=(0,f.d9)(i.get("esriGeometryPolygon")),e.mapImages=[];var t,r=(0,l.Z)(e.featureInfos);try{for(r.s();!(t=r.n()).done;){var n=t.value;switch(n.type){case"esriGeometryPoint":case"esriGeometryPolyline":case"esriGeometryPolygon":var o,a=y[n.type].get(n.id);a&&(null===(o=e[b[n.type]])||void 0===o||o.featureSet.features.push(a));break;case"GroundOverlay":var u=s.get(n.id);u&&e.mapImages.push(u)}}}catch(c){r.e(c)}finally{r.f()}e.fullExtent=w([e])}}));var c=w(n);return{folders:r,sublayers:n,extent:c}}function m(e,t,r,n){var i=null===a.id||void 0===a.id?void 0:a.id.findCredential(e);e=(0,y.fl)(e,{token:null===i||void 0===i?void 0:i.token});var l=o.Z.kmlServiceUrl;return(0,s.Z)(l,{query:{url:e,model:"simple",folders:"",refresh:0!==r||void 0,outSR:JSON.stringify(t)},responseType:"json",signal:n})}function C(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=[],l={},o=t.sublayers,a=new Set(t.folders.map((function(e){return e.id})));return o.forEach((function(t){var o=new e;if(r?o.read(t,r):o.read(t),n.length&&a.has(o.id)&&(o.visible=n.includes(o.id)),l[t.id]=o,null!=t.parentFolderId&&-1!==t.parentFolderId){var u,s=l[t.parentFolderId];s.sublayers||(s.sublayers=[]),null===(u=s.sublayers)||void 0===u||u.unshift(o)}else i.unshift(o)})),i}function _(e,t,r){r.forEach((function(r){e.set(r.attributes[t],r)}))}function Z(e){return k.apply(this,arguments)}function k(){return(k=(0,i.Z)((0,n.Z)().mark((function e(t){var r,i,o,a,s,f,y,c,v;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=h.Z.fromJSON(t.featureSet).features,i=t.layerDefinition,o=(0,d.i)(i.drawingInfo.renderer),a=u.Z.fromJSON(t.popupInfo),s=[],f=(0,l.Z)(r),e.prev=2,f.s();case 4:if((y=f.n()).done){e.next=12;break}return c=y.value,e.next=8,o.getSymbolAsync(c);case 8:v=e.sent,c.symbol=v,c.popupTemplate=a,c.visible=!0,s.push(c);case 10:e.next=4;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),f.e(e.t0);case 17:return e.prev=17,f.f(),e.finish(17);case 20:return e.abrupt("return",s);case 21:case"end":return e.stop()}}),e,null,[[2,14,17,20]])})))).apply(this,arguments)}function w(e){var t,r=(0,v.Ue)(v.G_),n=(0,v.Ue)(v.G_),i=(0,l.Z)(e);try{for(i.s();!(t=i.n()).done;){var o,a,u,s,f,y,d=t.value;if(null!==(o=d.polygons)&&void 0!==o&&null!==(a=o.featureSet)&&void 0!==a&&a.features){var h,b=(0,l.Z)(d.polygons.featureSet.features);try{for(b.s();!(h=b.n()).done;){var g=h.value;(0,p.Yg)(r,g.geometry),(0,v.TC)(n,r)}}catch(F){b.e(F)}finally{b.f()}}if(null!==(u=d.polylines)&&void 0!==u&&null!==(s=u.featureSet)&&void 0!==s&&s.features){var m,C=(0,l.Z)(d.polylines.featureSet.features);try{for(C.s();!(m=C.n()).done;){var _=m.value;(0,p.Yg)(r,_.geometry),(0,v.TC)(n,r)}}catch(F){C.e(F)}finally{C.f()}}if(null!==(f=d.points)&&void 0!==f&&null!==(y=f.featureSet)&&void 0!==y&&y.features){var Z,k=(0,l.Z)(d.points.featureSet.features);try{for(k.s();!(Z=k.n()).done;){var w=Z.value;(0,p.Yg)(r,w.geometry),(0,v.TC)(n,r)}}catch(F){k.e(F)}finally{k.f()}}if(d.mapImages){var S,x=(0,l.Z)(d.mapImages);try{for(x.s();!(S=x.n()).done;){var E=S.value;(0,p.Yg)(r,E.extent),(0,v.TC)(n,r)}}catch(F){x.e(F)}finally{x.f()}}}}catch(F){i.e(F)}finally{i.f()}return(0,v.fS)(n,v.G_)?void 0:{xmin:n[0],ymin:n[1],zmin:n[2],xmax:n[3],ymax:n[4],zmax:n[5],spatialReference:c.Z.WGS84}}}}]);
//# sourceMappingURL=13838.7063a241.chunk.js.map