"use strict";(self.webpackChunkreact_training=self.webpackChunkreact_training||[]).push([[29955],{78084:function(t,e,i){i.d(e,{Z:function(){return f}});var r,n,s=i(15671),a=i(43144),h=i(93169),o=i(13005);(n=r||(r={}))[n.varint=0]="varint",n[n.fixed64=1]="fixed64",n[n.delimited=2]="delimited",n[n.fixed32=5]="fixed32",n[n.unknown=99]="unknown";var u=4294967296,l=new TextDecoder("utf-8"),c=(0,h.Z)("safari")||(0,h.Z)("ios")?6:(0,h.Z)("ff")?12:32,f=function(){function t(e,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e?e.byteLength:0;(0,s.Z)(this,t),this._tag=0,this._dataType=r.unknown,this._init(e,i,n,a)}return(0,a.Z)(t,[{key:"_init",value:function(t,e,i,r){this._data=t,this._dataView=e,this._pos=i,this._end=r}},{key:"asUnsafe",value:function(){return this}},{key:"clone",value:function(){return new t(this._data,this._dataView,this._pos,this._end)}},{key:"pos",value:function(){return this._pos}},{key:"move",value:function(t){this._pos=t}},{key:"nextTag",value:function(t){for(;;){if(this._pos===this._end)return!1;var e=this._decodeVarint();if(this._tag=e>>3,this._dataType=7&e,!t||t===this._tag)break;this.skip()}return!0}},{key:"next",value:function(){if(this._pos===this._end)return!1;var t=this._decodeVarint();return this._tag=t>>3,this._dataType=7&t,!0}},{key:"empty",value:function(){return this._pos>=this._end}},{key:"tag",value:function(){return this._tag}},{key:"getInt32",value:function(){return this._decodeVarint()}},{key:"getInt64",value:function(){return this._decodeVarint()}},{key:"getUInt32",value:function(){var t=4294967295;if(t=(127&this._data[this._pos])>>>0,this._data[this._pos++]<128)return t;if(t=(t|(127&this._data[this._pos])<<7)>>>0,this._data[this._pos++]<128)return t;if(t=(t|(127&this._data[this._pos])<<14)>>>0,this._data[this._pos++]<128)return t;if(t=(t|(127&this._data[this._pos])<<21)>>>0,this._data[this._pos++]<128)return t;if(t=(t|(15&this._data[this._pos])<<28)>>>0,this._data[this._pos++]<128)return t;throw new Error("Varint overflow")}},{key:"getUInt64",value:function(){return this._decodeVarint()}},{key:"getSInt32",value:function(){var t=this.getUInt32();return t>>>1^-(1&t)}},{key:"getSInt64",value:function(){return this._decodeSVarint()}},{key:"getBool",value:function(){var t=0!==this._data[this._pos];return this._skip(1),t}},{key:"getEnum",value:function(){return this._decodeVarint()}},{key:"getFixed64",value:function(){var t=this._dataView,e=this._pos,i=t.getUint32(e,!0)+t.getUint32(e+4,!0)*u;return this._skip(8),i}},{key:"getSFixed64",value:function(){var t=this._dataView,e=this._pos,i=t.getUint32(e,!0)+t.getInt32(e+4,!0)*u;return this._skip(8),i}},{key:"getDouble",value:function(){var t=this._dataView.getFloat64(this._pos,!0);return this._skip(8),t}},{key:"getFixed32",value:function(){var t=this._dataView.getUint32(this._pos,!0);return this._skip(4),t}},{key:"getSFixed32",value:function(){var t=this._dataView.getInt32(this._pos,!0);return this._skip(4),t}},{key:"getFloat",value:function(){var t=this._dataView.getFloat32(this._pos,!0);return this._skip(4),t}},{key:"getString",value:function(){var t=this._getLength(),e=this._pos,i=this._toString(this._data,e,e+t);return this._skip(t),i}},{key:"getBytes",value:function(){var t=this._getLength(),e=this._pos,i=this._toBytes(this._data,e,e+t);return this._skip(t),i}},{key:"getLength",value:function(){return this._getLengthUnsafe()}},{key:"processMessageWithArgs",value:function(t,e,i,r){var n=this.getMessage(),s=t(n,e,i,r);return n.release(),s}},{key:"processMessage",value:function(t){var e=this.getMessage(),i=t(e);return e.release(),i}},{key:"getMessage",value:function(){var e=this._getLength(),i=t.pool.acquire();return i._init(this._data,this._dataView,this._pos,this._pos+e),this._skip(e),i}},{key:"release",value:function(){t.pool.release(this)}},{key:"dataType",value:function(){return this._dataType}},{key:"skip",value:function(){switch(this._dataType){case r.varint:this._decodeVarint();break;case r.fixed64:this._skip(8);break;case r.delimited:this._skip(this._getLength());break;case r.fixed32:this._skip(4);break;default:throw new Error("Invalid data type!")}}},{key:"skipLen",value:function(t){this._skip(t)}},{key:"_skip",value:function(t){if(this._pos+t>this._end)throw new Error("Attempt to skip past the end of buffer!");this._pos+=t}},{key:"_decodeVarint",value:function(){var t=this._data,e=this._pos,i=0,r=0;if(this._end-e>=10)do{if(i|=127&(r=t[e++]),!(128&r))break;if(i|=(127&(r=t[e++]))<<7,!(128&r))break;if(i|=(127&(r=t[e++]))<<14,!(128&r))break;if(i|=(127&(r=t[e++]))<<21,!(128&r))break;if(i+=268435456*(127&(r=t[e++])),!(128&r))break;if(i+=34359738368*(127&(r=t[e++])),!(128&r))break;if(i+=4398046511104*(127&(r=t[e++])),!(128&r))break;if(i+=562949953421312*(127&(r=t[e++])),!(128&r))break;if(i+=72057594037927940*(127&(r=t[e++])),!(128&r))break;if(i+=0x8000000000000000*(127&(r=t[e++])),!(128&r))break;throw new Error("Varint too long!")}while(0);else{for(var n=1;e!==this._end&&128&(r=t[e]);)++e,i+=(127&r)*n,n*=128;if(e===this._end)throw new Error("Varint overrun!");++e,i+=r*n}return this._pos=e,i}},{key:"_decodeSVarint",value:function(){var t,e=this._data,i=0,r=0,n=1&e[this._pos];if(i|=127&(r=e[this._pos++]),!(128&r))return n?-(i+1)/2:i/2;if(i|=(127&(r=e[this._pos++]))<<7,!(128&r))return n?-(i+1)/2:i/2;if(i|=(127&(r=e[this._pos++]))<<14,!(128&r))return n?-(i+1)/2:i/2;if(i|=(127&(r=e[this._pos++]))<<21,!(128&r))return n?-(i+1)/2:i/2;if(i+=268435456*(127&(r=e[this._pos++])),!(128&r))return n?-(i+1)/2:i/2;if(i+=34359738368*(127&(r=e[this._pos++])),!(128&r))return n?-(i+1)/2:i/2;if(i+=4398046511104*(127&(r=e[this._pos++])),!(128&r))return n?-(i+1)/2:i/2;if(t=BigInt(i),r=e[this._pos++],t+=0x2000000000000n*BigInt(127&r),!(128&r))return Number(n?-(t+1n)/2n:t/2n);if(r=e[this._pos++],t+=0x100000000000000n*BigInt(127&r),!(128&r))return Number(n?-(t+1n)/2n:t/2n);if(r=e[this._pos++],t+=0x8000000000000000n*BigInt(127&r),!(128&r))return Number(n?-(t+1n)/2n:t/2n);throw new Error("Varint too long!")}},{key:"_getLength",value:function(){if(this._dataType!==r.delimited)throw new Error("Not a delimited data type!");return this._decodeVarint()}},{key:"_getLengthUnsafe",value:function(){return this.getUInt32()}},{key:"_toString",value:function(t,e,i){if((i=Math.min(this._end,i))-e>c){var r=t.subarray(e,i);return l.decode(r)}for(var n="",s="",a=e;a<i;++a){var h=t[a];128&h?s+="%"+h.toString(16):(n+=decodeURIComponent(s)+String.fromCharCode(h),s="")}return s.length&&(n+=decodeURIComponent(s)),n}},{key:"_toBytes",value:function(t,e,i){return i=Math.min(this._end,i),new Uint8Array(t.buffer,e,i-e)}}]),t}();f.pool=new o.Z(f,void 0,(function(t){t._data=null,t._dataView=null}))},51750:function(t,e,i){i.d(e,{L:function(){return n},v:function(){return r}});var r=15.5,n=1024},26554:function(t,e,i){i.d(e,{Y:function(){return o},m:function(){return u}});var r=i(37762),n=i(93433),s=i(46228),a=i(16889),h=i(51750);function o(t,e,i){var r=e.style,n=(0,a.fp)(Math.ceil(i)),s=function(t){return"vertical"===t||"horizontal"===t||"cross"===t||"esriSFSCross"===t||"esriSFSVertical"===t||"esriSFSHorizontal"===t}(r)?8*n:16*n,h=2*n;t.width=s,t.height=s;var o=t.getContext("2d");o.strokeStyle="#FFFFFF",o.lineWidth=n,o.beginPath(),"vertical"!==r&&"cross"!==r&&"esriSFSCross"!==r&&"esriSFSVertical"!==r||(o.moveTo(s/2,-h),o.lineTo(s/2,s+h)),"horizontal"!==r&&"cross"!==r&&"esriSFSCross"!==r&&"esriSFSHorizontal"!==r||(o.moveTo(-h,s/2),o.lineTo(s+h,s/2)),"backward-diagonal"!==r&&"diagonal-cross"!==r&&"esriSFSDiagonalCross"!==r&&"esriSFSBackwardDiagonal"!==r||(o.moveTo(-h,-h),o.lineTo(s+h,s+h),o.moveTo(s-h,-h),o.lineTo(s+h,h),o.moveTo(-h,s-h),o.lineTo(h,s+h)),"forward-diagonal"!==r&&"diagonal-cross"!==r&&"esriSFSForwardDiagonal"!==r&&"esriSFSDiagonalCross"!==r||(o.moveTo(s+h,-h),o.lineTo(-h,s+h),o.moveTo(h,-h),o.lineTo(-h,h),o.moveTo(s+h,s-h),o.lineTo(s-h,s+h)),o.stroke();for(var u,l=o.getImageData(0,0,t.width,t.height),c=new Uint8Array(l.data),f=0;f<c.length;f+=4)u=c[f+3]/255,c[f]=c[f]*u,c[f+1]=c[f+1]*u,c[f+2]=c[f+2]*u;return[c,t.width,t.height,n]}function u(t,e){null==t&&(t=[]);var i="Butt"===e,a="Square"===e,o=!i&&!a;t.length%2==1&&(t=[].concat((0,n.Z)(t),(0,n.Z)(t)));var u,l=h.v,c=2*l,f=0,_=(0,r.Z)(t);try{for(_.s();!(u=_.n()).done;){f+=u.value}}catch(T){_.e(T)}finally{_.f()}var p,v=Math.round(f*l),d=new Float32Array(v*c),g=.5*l,y=0,k=0,w=.5,m=!0,S=(0,r.Z)(t);try{for(S.s();!(p=S.n()).done;){var x=p.value;for(y=k,k+=x*l;w<=k;){for(var b=.5;b<c;){var Z=(b-.5)*v+w-.5,I=o?(b-l)*(b-l):Math.abs(b-l);d[Z]=m?i?Math.max(Math.max(y+g-w,I),Math.max(w-k+g,I)):I:o?Math.min((w-y)*(w-y)+I,(w-k)*(w-k)+I):a?Math.min(Math.max(w-y,I),Math.max(k-w,I)):Math.min(Math.max(w-y+g,I),Math.max(k+g-w,I)),b++}w++}m=!m}}catch(T){S.e(T)}finally{S.f()}for(var P=d.length,D=new Uint8Array(4*P),M=0;M<P;++M){var L=(o?Math.sqrt(d[M]):d[M])/l;(0,s.I)(L,D,4*M)}return[D,v,c]}},98067:function(t,e,i){i.d(e,{m:function(){return L}});var r=i(74165),n=i(1413),s=i(15861),a=i(15671),h=i(43144),o=i(92026),u=i(66978),l=i(35995),c=i(70431),f=i(37762),_=i(12233),p=function(){function t(e,i){(0,a.Z)(this,t),this._width=0,this._height=0,this._free=[],this._width=e,this._height=i,this._free.push(new _.Z(0,0,e,i))}return(0,h.Z)(t,[{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}},{key:"allocate",value:function(t,e){if(t>this._width||e>this._height)return new _.Z;for(var i=null,r=-1,n=0;n<this._free.length;++n){var s=this._free[n];t<=s.width&&e<=s.height&&(null===i||s.y<=i.y&&s.x<=i.x)&&(i=s,r=n)}return null===i?new _.Z:(this._free.splice(r,1),i.width<i.height?(i.width>t&&this._free.push(new _.Z(i.x+t,i.y,i.width-t,e)),i.height>e&&this._free.push(new _.Z(i.x,i.y+e,i.width,i.height-e))):(i.width>t&&this._free.push(new _.Z(i.x+t,i.y,i.width-t,i.height)),i.height>e&&this._free.push(new _.Z(i.x,i.y+e,t,i.height-e))),new _.Z(i.x,i.y,t,e))}},{key:"release",value:function(t){for(var e=0;e<this._free.length;++e){var i=this._free[e];if(i.y===t.y&&i.height===t.height&&i.x+i.width===t.x)i.width+=t.width;else if(i.x===t.x&&i.width===t.width&&i.y+i.height===t.y)i.height+=t.height;else if(t.y===i.y&&t.height===i.height&&t.x+t.width===i.x)i.x=t.x,i.width+=t.width;else{if(t.x!==i.x||t.width!==i.width||t.y+t.height!==i.y)continue;i.y=t.y,i.height+=t.height}this._free.splice(e,1),this.release(t)}this._free.push(t)}}]),t}(),v=i(8548),d=i(57808),g=i(52311),y=function(){function t(e,i,r){(0,a.Z)(this,t),this.width=0,this.height=0,this._dirties=[],this._glyphData=[],this._currentPage=0,this._glyphIndex={},this._textures=[],this._rangePromises=new Map,this.width=e,this.height=i,this._glyphSource=r,this._binPack=new p(e-4,i-4),this._glyphData.push(new Uint8Array(e*i)),this._dirties.push(!0),this._textures.push(void 0)}return(0,h.Z)(t,[{key:"getGlyphItems",value:function(t,e){var i,r=this,n=[],s=this._glyphSource,a=new Set,h=(0,f.Z)(e);try{for(h.s();!(i=h.n()).done;){var o=i.value,u=Math.floor(.00390625*o);a.add(u)}}catch(c){h.e(c)}finally{h.f()}var l=[];return a.forEach((function(e){var i=t+e;if(r._rangePromises.has(i))l.push(r._rangePromises.get(i));else{var n=s.getRange(t,e).then((function(){r._rangePromises.delete(i)}),(function(){r._rangePromises.delete(i)}));r._rangePromises.set(i,n),l.push(n)}})),Promise.all(l).then((function(){var i=r._glyphIndex[t];i||(i={},r._glyphIndex[t]=i);var a,h=(0,f.Z)(e);try{for(h.s();!(a=h.n()).done;){var o=a.value,u=i[o];if(u)n[o]={sdf:!0,rect:u.rect,metrics:u.metrics,page:u.page,code:o};else{var l=s.getGlyph(t,o);if(null!==l&&void 0!==l&&l.metrics){var v=l.metrics,d=void 0;if(0===v.width)d=new _.Z(0,0,0,0);else{var g=v.width+6,y=v.height+6,k=g%4?4-g%4:4,w=y%4?4-y%4:4;1===k&&(k=5),1===w&&(w=5),(d=r._binPack.allocate(g+k,y+w)).isEmpty&&(r._dirties[r._currentPage]||(r._glyphData[r._currentPage]=null),r._currentPage=r._glyphData.length,r._glyphData.push(new Uint8Array(r.width*r.height)),r._dirties.push(!0),r._textures.push(void 0),r._binPack=new p(r.width-4,r.height-4),d=r._binPack.allocate(g+k,y+w));var m=r._glyphData[r._currentPage],S=l.bitmap,x=void 0,b=void 0;if(S)for(var Z=0;Z<y;Z++){x=g*Z,b=r.width*(d.y+Z+1)+d.x;for(var I=0;I<g;I++)m[b+I+1]=S.at(x+I)}}i[o]={rect:d,metrics:v,tileIDs:null,page:r._currentPage},n[o]={sdf:!0,rect:d,metrics:v,page:r._currentPage,code:o},r._dirties[r._currentPage]=!0}}}}catch(c){h.e(c)}finally{h.f()}return n}))}},{key:"removeGlyphs",value:function(t){for(var e in this._glyphIndex){var i=this._glyphIndex[e];if(i){var r=void 0;for(var n in i)if((r=i[n]).tileIDs.delete(t),0===r.tileIDs.size){for(var s=this._glyphData[r.page],a=r.rect,h=void 0,o=void 0,u=0;u<a.height;u++)for(h=this.width*(a.y+u)+a.x,o=0;o<a.width;o++)s[h+o]=0;delete i[n],this._dirties[r.page]=!0}}}}},{key:"bind",value:function(t,e,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(!this._textures[i]){var n=new g.X;n.pixelFormat=v.VI.ALPHA,n.wrapMode=v.e8.CLAMP_TO_EDGE,n.width=this.width,n.height=this.height,this._textures[i]=new d.x(t,n,new Uint8Array(this.width*this.height))}var s=this._textures[i];s.setSamplingMode(e),this._dirties[i]&&s.setData(this._glyphData[i]),t.bindTexture(s,r),this._dirties[i]=!1}},{key:"destroy",value:function(){this.dispose()}},{key:"dispose",value:function(){this._glyphData.length=0,this._binPack=null;var t,e=(0,f.Z)(this._textures);try{for(e.s();!(t=e.n()).done;){var i=t.value;i&&i.dispose()}}catch(r){e.e(r)}finally{e.f()}this._textures.length=0}}]),t}(),k=i(29439),w=i(76200),m=i(78084),S=function(){function t(e){if((0,a.Z)(this,t),this._metrics=[],e){for(var i=new Map,r=0;e.next();)if(1===e.tag()){for(var n=e.getMessage();n.next();)if(3===n.tag()){for(var s=n.getMessage(),h=void 0,o=void 0,u=void 0,l=void 0,c=void 0,_=void 0,p=void 0;s.next();)switch(s.tag()){case 1:h=s.getUInt32();break;case 2:o=s.getBytes();break;case 3:u=s.getUInt32();break;case 4:l=s.getUInt32();break;case 5:c=s.getSInt32();break;case 6:_=s.getSInt32();break;case 7:p=s.getUInt32();break;default:s.skip()}if(s.release(),h){var v,d,g=null!==(v=null===(d=o)||void 0===d?void 0:d.length)&&void 0!==v?v:0;this._metrics[h]={width:u,height:l,left:c,top:_,advance:p,startOffset:r,length:g},i.set(h,o),r+=g}}else n.skip();n.release()}else e.skip();var y,w=new Uint8Array(r),m=this._metrics,S=(0,f.Z)(i);try{for(S.s();!(y=S.n()).done;){var x=(0,k.Z)(y.value,2),b=x[0],Z=x[1],I=m[b],P=I.startOffset,D=I.length;if(Z)for(var M=0;M<D;++M)w[P+M]=Z[M]}}catch(L){S.e(L)}finally{S.f()}this._allBitmaps=w}else this._allBitmaps=null}return(0,h.Z)(t,[{key:"getMetrics",value:function(t){return this._metrics[t]}},{key:"getBitmap",value:function(t){if(this._allBitmaps){var e=this._metrics[t];if(void 0!==e){var i=e.startOffset,r=e.length;return 0!==r?new Z(this._allBitmaps,i,r):void 0}}}}]),t}(),x=function(){function t(){(0,a.Z)(this,t),this._ranges=[]}return(0,h.Z)(t,[{key:"ranges",get:function(){return this._ranges}},{key:"getRange",value:function(t){return this._ranges[t]}},{key:"addRange",value:function(t,e){this._ranges[t]=e}}]),t}(),b=function(){function t(e){(0,a.Z)(this,t),this._glyphInfo={},this._baseURL=e}return(0,h.Z)(t,[{key:"getRange",value:function(t,e){var i=this._getFontStack(t);if(i.getRange(e))return Promise.resolve();var r=256*e,n=r+255;if(this._baseURL){var s=this._baseURL.replace("{fontstack}",t).replace("{range}",r+"-"+n);return(0,w.Z)(s,{responseType:"array-buffer"}).then((function(t){i.addRange(e,new S(new m.Z(new Uint8Array(t.data),new DataView(t.data))))})).catch((function(){i.addRange(e,new S)}))}return i.addRange(e,new S),Promise.resolve()}},{key:"getGlyph",value:function(t,e){var i=this._getFontStack(t);if(i){var r=Math.floor(e/256),n=i.getRange(r);return n?{metrics:n.getMetrics(e),bitmap:n.getBitmap(e)}:void 0}}},{key:"_getFontStack",value:function(t){var e=this._glyphInfo[t];return e||(e=this._glyphInfo[t]=new x),e}}]),t}(),Z=function(){function t(e,i,r){(0,a.Z)(this,t),this._array=e,this._start=i,this.length=r}return(0,h.Z)(t,[{key:"at",value:function(t){return 0<=t&&t<this.length?this._array[this._start+t]:void 0}}]),t}(),I=(i(93169),i(26554)),P="dasharray-",D=function(){function t(e,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;(0,a.Z)(this,t),this._size=[],this._mosaicsData=[],this._textures=[],this._dirties=[],this._maxItemSize=0,this._currentPage=0,this._pageWidth=0,this._pageHeight=0,this._mosaicRects={},this.pixelRatio=1,i<=0&&console.error("Sprites mosaic defaultWidth and defaultHeight must be greater than zero!"),this._pageWidth=e,this._pageHeight=i,r>0&&(this._maxItemSize=r),this._binPack=new p(e-4,i-4)}return(0,h.Z)(t,[{key:"destroy",value:function(){this.dispose()}},{key:"dispose",value:function(){this._binPack=null,this._mosaicsData.length=0,this._mosaicRects={};var t,e=(0,f.Z)(this._textures);try{for(e.s();!(t=e.n()).done;){var i=t.value;i&&i.dispose()}}catch(r){e.e(r)}finally{e.f()}this._textures.length=0}},{key:"getWidth",value:function(t){return t>=this._size.length?-1:this._size[t][0]}},{key:"getHeight",value:function(t){return t>=this._size.length?-1:this._size[t][1]}},{key:"getPageSize",value:function(t){return t>=this._size.length?null:this._size[t]}},{key:"setSpriteSource",value:function(t){if(this.dispose(),this.pixelRatio=t.devicePixelRatio,0===this._mosaicsData.length){this._binPack=new p(this._pageWidth-4,this._pageHeight-4);var e=Math.floor(this._pageWidth),i=Math.floor(this._pageHeight),r=new Uint32Array(e*i);this._mosaicsData[0]=r,this._dirties.push(!0),this._size.push([this._pageWidth,this._pageHeight]),this._textures.push(void 0)}this._sprites=t}},{key:"getSpriteItem",value:function(t){var e,i,r,n,s,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],h=this._mosaicRects[t];if(h)return h;if(!this._sprites||"loaded"!==this._sprites.loadStatus)return null;if(t&&t.startsWith(P)?(e=this._rasterizeDash(t),n=(i=(0,k.Z)(e,2))[0],s=i[1],a=!0):n=this._sprites.getSpriteInfo(t),null===(r=n)||void 0===r||!r.width||!n.height||n.width<0||n.height<0)return null;var o=n.width,u=n.height,l=this._allocateImage(o,u),c=(0,k.Z)(l,3),f=c[0],_=c[1],p=c[2];return f.width<=0?null:(this._copy(f,n,_,p,a,s),h={type:"sprite",rect:f,width:o,height:u,sdf:n.sdf,simplePattern:!1,rasterizationScale:n.pixelRatio,page:_},this._mosaicRects[t]=h,h)}},{key:"getSpriteItems",value:function(t){var e,i={},r=(0,f.Z)(t);try{for(r.s();!(e=r.n()).done;){var n=e.value;i[n.name]=this.getSpriteItem(n.name,n.repeat)}}catch(s){r.e(s)}finally{r.f()}return i}},{key:"getMosaicItemPosition",value:function(t,e){var i=this.getSpriteItem(t,e),r=null===i||void 0===i?void 0:i.rect;if(!r)return null;r.width=i.width,r.height=i.height;var n=i.width,s=i.height;return{tl:[r.x+2,r.y+2],br:[r.x+2+n,r.y+2+s],page:i.page}}},{key:"bind",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(!(i>=this._size.length||i>=this._mosaicsData.length)){if(!this._textures[i]){var n=new g.X;n.wrapMode=v.e8.CLAMP_TO_EDGE,n.width=this._size[i][0],n.height=this._size[i][1],this._textures[i]=new d.x(t,n,new Uint8Array(this._mosaicsData[i].buffer))}var s=this._textures[i];s.setSamplingMode(e),this._dirties[i]&&s.setData(new Uint8Array(this._mosaicsData[i].buffer)),t.bindTexture(s,r),this._dirties[i]=!1}}},{key:"_copy",value:function(e,i,r,n,s,a){if(this._sprites&&"loaded"===this._sprites.loadStatus&&!(r>=this._mosaicsData.length)){var h=new Uint32Array(a?a.buffer:this._sprites.image.buffer),o=this._mosaicsData[r],u=a?i.width:this._sprites.width;t._copyBits(h,u,i.x,i.y,o,n[0],e.x+2,e.y+2,i.width,i.height,s),this._dirties[r]=!0}}},{key:"_allocateImage",value:function(t,e){t+=2,e+=2;var i=Math.max(t,e);if(this._maxItemSize&&this._maxItemSize<i){var r=new _.Z(0,0,t,e);return this._mosaicsData.push(new Uint32Array(t*e)),this._dirties.push(!0),this._size.push([t,e]),this._textures.push(void 0),[r,this._mosaicsData.length-1,[t,e]]}var n=t%4?4-t%4:4,s=e%4?4-e%4:4;1===n&&(n=5),1===s&&(s=5);var a=this._binPack.allocate(t+n,e+s);return a.width<=0?(this._dirties[this._currentPage]||(this._mosaicsData[this._currentPage]=null),this._currentPage=this._mosaicsData.length,this._mosaicsData.push(new Uint32Array(this._pageWidth*this._pageHeight)),this._dirties.push(!0),this._size.push([this._pageWidth,this._pageHeight]),this._textures.push(void 0),this._binPack=new p(this._pageWidth-4,this._pageHeight-4),this._allocateImage(t,e)):[a,this._currentPage,[this._pageWidth,this._pageHeight]]}},{key:"_rasterizeDash",value:function(t){var e=t.match(/\[(.*?)\]/);if(!e)return null;var i=e[1].split(",").map(Number),r=t.slice(t.lastIndexOf("-")+1),n=(0,I.m)(i,r),s=(0,k.Z)(n,3),a=s[0];return[{x:0,y:0,width:s[1],height:s[2],sdf:!0,pixelRatio:1},new Uint8Array(a.buffer)]}}],[{key:"_copyBits",value:function(t,e,i,r,n,s,a,h,o,u,l){var c=r*e+i,f=h*s+a;if(l){f-=s;for(var _=-1;_<=u;c=((++_+u)%u+r)*e+i,f+=s)for(var p=-1;p<=o;p++)n[f+p]=t[c+(p+o)%o]}else for(var v=0;v<u;v++){for(var d=0;d<o;d++)n[f+d]=t[c+d];c+=e,f+=s}}}]),t}(),M=i(73828),L=function(){function t(e,i,r,n){(0,a.Z)(this,t),this._layer=e,this._styleRepository=i,this.devicePixelRatio=r,this._sourceDataMaxLOD=n,this._spriteMosaic=null,this._glyphMosaic=null,this._connection=null,this._spriteSourceAbortController=null,this._startOptionsInputSignal=null,this._inputSignalEventListener=null}return(0,h.Z)(t,[{key:"destroy",value:function(){var t,e,i;null!==(t=this._connection)&&void 0!==t&&t.close(),this._connection=null,this._styleRepository=null,this._layer=null,null!==(e=this._spriteMosaic)&&void 0!==e&&e.destroy(),this._spriteMosaic=null,this._glyphMosaic=null,this._spriteSourceAbortController=(0,o.IM)(this._spriteSourceAbortController),this._spriteSourcePromise=null,this._inputSignalEventListener&&null!==(i=this._startOptionsInputSignal)&&void 0!==i&&i.removeEventListener("abort",this._inputSignalEventListener),this._startOptionsInputSignal=null,this._inputSignalEventListener=null}},{key:"spriteMosaic",get:function(){var t=this;return this._spriteSourcePromise.then((function(){return t._spriteMosaic}))}},{key:"glyphMosaic",get:function(){return this._glyphMosaic}},{key:"start",value:function(){var t=(0,s.Z)((0,r.Z)().mark((function t(e){var i,s,a=this;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this._requestSprite(e),i=this._layer.currentStyleInfo.glyphsUrl,s=new b(i?(0,l.fl)(i,(0,n.Z)((0,n.Z)({},this._layer.customParameters),{},{token:this._layer.apiKey})):null),this._glyphMosaic=new y(1024,1024,s),this._broadcastPromise=(0,c.bA)("WorkerTileHandler",{client:this,schedule:e.schedule,signal:e.signal}).then((function(t){var i;if(a._layer&&(null!==(i=a._connection)&&void 0!==i&&i.close(),a._connection=t,a._layer&&!a._connection.closed)){var r=t.broadcast("setStyle",{style:a._layer.currentStyleInfo.style,sourceDataMaxLOD:a._sourceDataMaxLOD},e);Promise.all(r).catch((function(t){return(0,u.H9)(t)}))}}));case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"_requestSprite",value:function(t){var e,i,r=this;null===(e=this._spriteSourceAbortController)||void 0===e||e.abort();var s=new AbortController;this._spriteSourceAbortController=s;var a=null===t||void 0===t?void 0:t.signal;this._inputSignalEventListener&&null!==(i=this._startOptionsInputSignal)&&void 0!==i&&i.removeEventListener("abort",this._inputSignalEventListener),this._startOptionsInputSignal=null,a&&(this._inputSignalEventListener=function(t){return function(){return t.abort()}}(s),a.addEventListener("abort",this._inputSignalEventListener,{once:!0}));var h=s.signal,o=(0,n.Z)((0,n.Z)({},t),{},{signal:h});this._spriteSourcePromise=this._layer.loadSpriteSource(this.devicePixelRatio,o),this._spriteSourcePromise.then((function(t){(0,u.r9)(h),r._spriteMosaic=new D(1024,1024,250),r._spriteMosaic.setSpriteSource(t)}))}},{key:"updateStyle",value:function(){var t=(0,s.Z)((0,r.Z)().mark((function t(e){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._broadcastPromise;case 2:return this._broadcastPromise=Promise.all(this._connection.broadcast("updateStyle",e)),t.abrupt("return",this._broadcastPromise);case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"setSpriteSource",value:function(t){var e=new D(1024,1024,250);return e.setSpriteSource(t),this._spriteMosaic=e,this._spriteSourcePromise=Promise.resolve(t),this._spriteSourceAbortController=null,e}},{key:"setStyle",value:function(){var t=(0,s.Z)((0,r.Z)().mark((function t(e,i,s){var a;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._broadcastPromise;case 2:return this._styleRepository=e,this._sourceDataMaxLOD=s,this._requestSprite(),a=new b(this._layer.currentStyleInfo.glyphsUrl?(0,l.fl)(this._layer.currentStyleInfo.glyphsUrl,(0,n.Z)((0,n.Z)({},this._layer.customParameters),{},{token:this._layer.apiKey})):null),t.abrupt("return",(this._glyphMosaic=new y(1024,1024,a),this._broadcastPromise=Promise.all(this._connection.broadcast("setStyle",{style:i,sourceDataMaxLOD:this._sourceDataMaxLOD})),this._broadcastPromise));case 7:case"end":return t.stop()}}),t,this)})));return function(e,i,r){return t.apply(this,arguments)}}()},{key:"fetchTileData",value:function(){var t=(0,s.Z)((0,r.Z)().mark((function t(e,i){var n;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._getRefKeys(e,i);case 2:return n=t.sent,t.abrupt("return",this._getSourcesData(Object.keys(this._layer.sourceNameToSource),n,i));case 4:case"end":return t.stop()}}),t,this)})));return function(e,i){return t.apply(this,arguments)}}()},{key:"fetchTilePBFs",value:function(){var t=(0,s.Z)((0,r.Z)().mark((function t(e){var i,s,a,h,o,u,l=this;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=Object.keys(this._layer.sourceNameToSource),s={},t.next=4,this._getRefKeys(e,s);case 4:for(a=t.sent,h=[],o=[],u=0;u<a.length;u++)null==a[u].value||null==i[u]?o.push(null):function(){var t=a[u].value,e=l._getTilePayload(t,i[u],s);e.then((function(e){h.push((0,n.Z)((0,n.Z)({},e),{},{key:t}))})),o.push(e)}();return t.abrupt("return",Promise.all(o).then((function(){return h})));case 9:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"parseTileData",value:function(){var t=(0,s.Z)((0,r.Z)().mark((function t(e,i){var s,a,h,o=this;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=e&&e.data){t.next=3;break}return t.abrupt("return",null);case 3:return a=s.sourceName2DataAndRefKey,h=s.transferList,t.abrupt("return",0===Object.keys(a).length?null:this._broadcastPromise.then((function(){return o._connection.invoke("createTileAndParse",{key:e.key.id,sourceName2DataAndRefKey:a,styleLayerUIDs:e.styleLayerUIDs},(0,n.Z)((0,n.Z)({},i),{},{transferList:h}))})));case 5:case"end":return t.stop()}}),t,this)})));return function(e,i){return t.apply(this,arguments)}}()},{key:"getSprites",value:function(){var t=(0,s.Z)((0,r.Z)().mark((function t(e){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._spriteSourcePromise;case 2:return t.abrupt("return",this._spriteMosaic.getSpriteItems(e));case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"getGlyphs",value:function(t){return this._glyphMosaic.getGlyphItems(t.font,t.codePoints)}},{key:"_getTilePayload",value:function(){var t=(0,s.Z)((0,r.Z)().mark((function t(e,i,n){var s,a,h,o,l;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=M.Z.pool.acquire(e.id),a=this._layer.sourceNameToSource[i],h=s.level,o=s.row,l=s.col,M.Z.pool.release(s),t.prev=2,t.next=5,a.requestTile(h,o,l,n);case 5:return t.t0=t.sent,t.t1=i,t.abrupt("return",{protobuff:t.t0,sourceName:t.t1});case 10:if(t.prev=10,t.t2=t.catch(2),!(0,u.D_)(t.t2)){t.next=14;break}throw t.t2;case 14:return t.abrupt("return",{protobuff:null,sourceName:i});case 15:case"end":return t.stop()}}),t,this,[[2,10]])})));return function(e,i,r){return t.apply(this,arguments)}}()},{key:"_getRefKeys",value:function(){var t=(0,s.Z)((0,r.Z)().mark((function t(e,i){var n,s,a,h;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(a in n=this._layer.sourceNameToSource,s=new Array,n)h=n[a].getRefKey(e,i),s.push(h);return t.abrupt("return",(0,u.as)(s));case 3:case"end":return t.stop()}}),t,this)})));return function(e,i){return t.apply(this,arguments)}}()},{key:"_getSourcesData",value:function(t,e,i){for(var r=[],n=0;n<e.length;n++)if(null==e[n].value||null==t[n])r.push(null);else{var s=e[n].value,a=this._getTilePayload(s,t[n],i);r.push(a)}return(0,u.as)(r).then((function(t){for(var i={},r=[],n=0;n<t.length;n++){var s=t[n].value;if(s&&s.protobuff&&s.protobuff.byteLength>0){var a=e[n].value.id;i[s.sourceName]={refKey:a,protobuff:s.protobuff},r.push(s.protobuff)}}return{sourceName2DataAndRefKey:i,transferList:r}}))}}]),t}()},75572:function(t,e,i){i.d(e,{Z:function(){return f}});var r=i(15671),n=i(43144),s=i(88301),a=i(61120),h=i(60136),o=i(29388),u=i(22824),l=i(37995),c=i(73828),f=function(t){(0,h.Z)(i,t);var e=(0,o.Z)(i);function i(){var t;return(0,r.Z)(this,i),(t=e.apply(this,arguments))._fullCacheLodInfos=null,t._levelByScale={},t}return(0,n.Z)(i,[{key:"getTileParentId",value:function(t){var e=c.Z.pool.acquire(t),i=0===e.level?null:c.Z.getId(e.level-1,e.row>>1,e.col>>1,e.world);return c.Z.pool.release(e),i}},{key:"getTileCoverage",value:function(t,e){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=arguments.length>3?arguments[3]:void 0,h=(0,s.Z)((0,a.Z)(i.prototype),"getTileCoverage",this).call(this,t,e,r,n);if(!h)return h;var o=1<<h.lodInfo.level;return h.spans=h.spans.filter((function(t){return t.row>=0&&t.row<o})),h}},{key:"scaleToLevel",value:function(t){if(this._fullCacheLodInfos||this._initializeFullCacheLODs(this._lodInfos),this._levelByScale[t])return this._levelByScale[t];var e,i,r=this._fullCacheLodInfos;if(t>r[0].scale)return r[0].level;for(var n=0;n<r.length-1;n++)if(t>(i=r[n+1]).scale)return(e=r[n]).level+(e.scale-t)/(e.scale-i.scale);return r[r.length-1].level}},{key:"_initializeFullCacheLODs",value:function(t){var e;if(0===t[0].level)e=t.map((function(t){return{level:t.level,resolution:t.resolution,scale:t.scale}}));else{var i=this.tileInfo.size[0],r=this.tileInfo.spatialReference;e=u.Z.create({size:i,spatialReference:r}).lods.map((function(t){return{level:t.level,resolution:t.resolution,scale:t.scale}}))}for(var n=0;n<e.length;n++)this._levelByScale[e[n].scale]=e[n].level;this._fullCacheLodInfos=e}}]),i}(l.Z)}}]);
//# sourceMappingURL=29955.7b11598f.chunk.js.map