"use strict";(self.webpackChunkreact_training=self.webpackChunkreact_training||[]).push([[41421],{41421:function(e,t,i){i.r(t),i.d(t,{default:function(){return de}});var n=i(1413),r=i(15671),s=i(43144),a=i(60136),o=i(29388),l=i(27366),u=i(66978),c=i(49861),p=(i(93169),i(32718)),h=(i(84936),i(69912)),m=i(33565),v=i(74165),d=i(15861),f=i(44927),y=i(94172),g=i(68860),_=i(79803),w=i(77671),b=i(93433),k=i(29439),C=i(37762),L=(i(59486),i(52639)),M=(i(59166),i(51508),i(86950)),Z=i(92026),S=i(5163),A=i(46634),G=i(2170),j=i(15559),x=i(93655),D=i(50951),O=i(85577),T=i(9843),q=i(14813),R=i(74229),U=i(2346),H=i(45900),z=i(84954),V=i(17877),W=i(34019),E=i(80151),I=i(44270),N=i(64674),J=i(41201),B=i(36257),Y=i(848),X=i(61459),K=i(14404),Q=i(58009),$=i(73268),F=i(16072),P=i(29909),ee=i(78952),te=i(80885),ie=1e5,ne=function(e){(0,a.Z)(i,e);var t=(0,o.Z)(i);function i(e){var n;return(0,r.Z)(this,i),(n=t.call(this,e))._drawActive=!1,n._measurementLayer=new x.default({internal:!0,listMode:"hide",visible:!1}),n._manipulatorLayer=new x.default({internal:!0,listMode:"hide",visible:!1}),n._snappingLayer=new x.default({internal:!0,listMode:"hide",visible:!1}),n._updatingHandles=new A.R,n._vertices=[],n.geodesicDistanceThreshold=null,n.measurement=null,n.measurementLabel=null,n}return(0,s.Z)(i,[{key:"initialize",value:function(){var e=this;(0,J.ME)("esri/core/t9n/Units").then((function(t){e.messages=t}));var t=this.view;this._draw=new T.Z({view:t}),t.map.addMany([this._measurementLayer,this._manipulatorLayer,this._snappingLayer]),t.focus(),this._snappingManagerResult=(0,I.u)(t),this.addHandles([(0,B.qe)((0,d.Z)((0,v.Z)().mark((function t(){return(0,v.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,J.ME)("esri/core/t9n/Units");case 2:e.messages=t.sent;case 3:case"end":return t.stop()}}),t)})))),(0,y.watch)((function(){return[e.unit,e.geodesicDistanceThreshold,e.messages]}),(function(){e._updateGraphics()}),y.initial),(0,y.watch)((function(){return[e.view.effectiveTheme.accentColor,e.view.effectiveTheme.textColor]}),(function(){if(e._vertices.length){var t,i=e._vertices.map((function(e){return e.coord})),n=(0,C.Z)(e._vertices);try{for(n.s();!(t=n.n()).done;){t.value.handle.remove()}}catch(r){n.e(r)}finally{n.f()}e._vertices=[],e._measurementLayer.removeAll(),e._manipulatorLayer.removeAll(),e._snappingLayer.removeAll(),e.manipulators.removeAll(),e._updateSketch(i)}})),(0,y.watch)((function(){return e.snappingOptions.featureSources}),(function(t){var i,n=(0,C.Z)(t);try{for(n.s();!(i=n.n()).done;){var r=i.value;r.layer!==e._measurementLayer&&r.layer!==e._manipulatorLayer||(r.enabled=!1)}}catch(s){n.e(s)}finally{n.f()}}),y.initial),this._snappingManagerResult]),(0,N.Ob)(this)}},{key:"destroy",value:function(){var e=this.view.map;this._draw.view=null,this._draw=(0,Z.SC)(this._draw),e.removeMany([this._measurementLayer,this._manipulatorLayer,this._snappingLayer]),this._measurementLayer.removeAll(),this._manipulatorLayer.removeAll(),this._snappingLayer.removeAll(),this._set("measurement",null),this._set("measurementLabel",null),this._measurementLayer=(0,Z.SC)(this._measurementLayer),this._manipulatorLayer=(0,Z.SC)(this._manipulatorLayer),this._snappingLayer=(0,Z.SC)(this._snappingLayer),this._updatingHandles=(0,Z.SC)(this._updatingHandles),this._resetVertices()}},{key:"_snappingManager",get:function(){return this._snappingManagerResult.snappingManager}},{key:"cursor",get:function(){return this._drawActive?"crosshair":null}},{key:"editable",set:function(e){this._set("editable",e),e||this._draw.reset()}},{key:"snappingOptions",get:function(){return this._snappingManager.options}},{key:"updating",get:function(){return this._updatingHandles.updating||this._snappingManager.updating}},{key:"onActivate",value:function(){this._drawActive||0!==this._vertices.length||this._startSketch()}},{key:"onShow",value:function(){this._measurementLayer.visible=!0,this._manipulatorLayer.visible=!0,this._snappingLayer.visible=!0}},{key:"onHide",value:function(){this._measurementLayer.visible=!1,this._manipulatorLayer.visible=!1,this._snappingLayer.visible=!1}},{key:"reset",value:function(){this.manipulators.removeAll(),this._resetVertices(),this._measurementLayer.removeAll(),this._manipulatorLayer.removeAll(),this._set("measurement",null),this._set("measurementLabel",null),this._draw.reset(),this._drawActive=!1}},{key:"_getSnappingContext",value:function(e){return new W.N({elevationInfo:{mode:"on-the-ground",offset:0},pointer:e,editGeometryOperations:new V.c(new z.XE("point",(0,q.Y6)(!1,!1,this.view.spatialReference)),D.JY.Local),visualizer:new O.r(this._snappingLayer)})}},{key:"_resetVertices",value:function(){var e,t=(0,C.Z)(this._vertices);try{for(t.s();!(e=t.n()).done;){e.value.handle.remove()}}catch(i){t.e(i)}finally{t.f()}this._vertices=[]}},{key:"_startSketch",value:function(){var e=this;this._drawActive=!0;var t=this._snappingManager,i=this._draw.create("polyline",{mode:"click",snappingManager:t});i.on(["vertex-add","vertex-update","vertex-remove","cursor-update","undo","redo"],(function(t){return e._updateSketch(t.vertices)})),i.on("draw-complete",(function(){return e._stopSketch()}))}},{key:"_stopSketch",value:function(){if(this._vertices.length<3)return this.reset(),void this._startSketch();this.manipulators.forEach((function(e){e.manipulator.interactive=!0})),this._drawActive=!1,this.finishToolCreation()}},{key:"_updateSketch",value:function(e){var t=this,i=this.view.spatialReference;if(i&&(!re(i)||(0,_.isLoaded)())){for(;this._vertices.length>e.length;){var r=this._vertices.pop(),s=r.handle,a=r.manipulator;s.remove(),this.manipulators.remove(a)}for(var o=function(r){var s=(0,k.Z)(e[r],2),a=s[0],o=s[1],l=new Y.Z({x:a,y:o,spatialReference:i}),u=function(e,t,i){var r=8,s={style:"circle",color:(0,M.G)(t.effectiveTheme.accentColor,.5),outline:{type:"simple-line",width:0}},a=new F.default((0,n.Z)((0,n.Z)({},s),{},{size:r})),o=new F.default((0,n.Z)((0,n.Z)({},s),{},{size:1.5*r})),l=new L.Z({geometry:e,symbol:a});return new U.L({view:t,layer:i,graphic:l,focusedSymbol:o})}(l,t.view,t._manipulatorLayer);t.manipulators.add(u);var c=V.c.fromGeometry(l,D.JY.Local);c.on("vertex-update",(function(e){var i=e.vertices.at(0);i&&(t._vertices[r].coord=[i.pos[0],i.pos[1]],t._updateGraphics())}));var p=(0,R.Xd)(u,(function(e,i,n,r){var s,a=t._getSnappingContext(r),o=t._snappingManager,l=t._updatingHandles,u=(0,E.W)({snappingContext:a,snappingManager:o,updatingHandles:l}).snappingStep;(s=i.next((0,R.Cf)(t.view)).next((function(t){if("start"===t.action){var i=new Y.Z(t.mapStart);e.graphic.geometry=i,c.trySetGeometry(i)}return t}))).next.apply(s,(0,b.Z)(u)).next((0,R.$Q)({operations:c})).next((function(){e.graphic.geometry=c.data.geometry}))}));t._vertices.push({manipulator:u,coord:[a,o],handle:p})},l=this._vertices.length;l<e.length;l++)o(l);if(this._vertices.length){var u=this._vertices.length-1,c=this._vertices[u],p=(0,k.Z)(e[u],2),h=p[0],m=p[1];c.coord[0]===h&&c.coord[1]===m||(c.coord=[h,m],c.manipulator.graphic.geometry=new Y.Z({x:h,y:m,spatialReference:i}));var v=this._drawActive?this._vertices[u].manipulator:null;this.manipulators.forEach((function(e){var t=e.manipulator;t.interactive=null==v||t!==v}))}this._updateGraphics()}}},{key:"_updateGraphics",value:function(){var e;if(this._vertices.length<2)this._measurementLayer.removeAll();else{var t=function(e,t,i){if(2===e.length){var n,r=new P.Z({paths:e,spatialReference:t});if(null!==t&&void 0!==t&&t.isGeographic)if((0,j.Gb)(t))n=(0,j.j2)(r,ie);else{var s=(0,_.project)(r,ee.Z.WGS84),a=(0,j.j2)(s,ie);n=(0,_.project)(a,t)}else if(null!==t&&void 0!==t&&t.isWebMercator)n=(0,G.geodesicDensify)(r,ie,"meters");else if((0,G.planarLength)(r,"meters")>=se(i)){var o=(0,_.project)(r,ee.Z.WGS84),l=(0,j.j2)(o,ie);n=(0,_.project)(l,t)}else n=r;return{measurement:null,fillGeometry:null,outlineGeometry:n}}e.push(e[0]);var u,c,p=new P.Z({paths:[e],spatialReference:t}),h=new te.Z({rings:[e],spatialReference:t}),m=null,v=null;if(null!==t&&void 0!==t&&t.isGeographic)if((0,j.Gb)(t)){if(m=(0,j.j2)(p,ie),v=(0,j.j2)(h,ie),!(v=(0,G.simplify)(v)))return null;u=(0,j.Jf)([p],"meters")[0],c=(0,j.p8)([v],"square-meters")[0]}else{var d=ee.Z.WGS84,f=(0,_.project)(p,d),y=(0,_.project)(h,d);if(m=(0,j.j2)(f,ie),v=(0,j.j2)(y,ie),!(v=(0,G.simplify)(v)))return null;u=(0,j.Jf)([f],"meters")[0],c=(0,j.p8)([v],"square-meters")[0],m=(0,_.project)(m,t),v=(0,_.project)(v,t)}else if(null!==t&&void 0!==t&&t.isWebMercator){if(m=(0,G.geodesicDensify)(p,ie,"meters"),v=(0,G.geodesicDensify)(h,ie,"meters"),!(v=(0,G.simplify)(v)))return null;u=(0,G.geodesicLength)(p,"meters"),c=(0,G.geodesicArea)(v,"square-meters")}else{var g=(0,G.planarLength)(p,"meters");if(g>=se(i)){var w=ee.Z.WGS84,b=(0,_.project)(p,w),k=(0,_.project)(h,w);if(m=(0,j.j2)(b,ie),v=(0,j.j2)(k,ie),!(v=(0,G.simplify)(v)))return null;u=(0,j.Jf)([b],"meters")[0],c=(0,j.p8)([v],"square-meters")[0],m=(0,_.project)(m,t),v=(0,_.project)(v,t)}else{if(m=p,!(v=(0,G.simplify)(h)))return null;u=g,c=(0,G.planarArea)(v,"square-meters")}}return{measurement:{geometry:v,area:c,perimeter:u},fillGeometry:v,outlineGeometry:m}}(this._vertices.map((function(e){return e.coord})),this.view.spatialReference,this.geodesicDistanceThreshold);if(t){var i=t.measurement,n=t.fillGeometry,r=t.outlineGeometry;this._set("measurement",i);var s=i?function(e,t,i){if(!t||!e)return null;var n={area:null,perimeter:null},r=t.area,s=t.perimeter;switch(i){case"metric":n.area=(0,S.ld)(e,r,"square-meters");break;case"imperial":n.area=(0,S.yc)(e,r,"square-meters");break;default:var a=(0,g.En)(r,"square-meters",i);n.area=(0,S.VG)(e,a,i)}var o=function(e){switch(e){case"metric":case"ares":case"hectares":return"metric";case"imperial":case"acres":return"imperial";case"square-inches":return"inches";case"square-feet":return"feet";case"square-yards":return"yards";case"square-miles":return"miles";case"square-us-feet":return"us-feet";case"square-meters":return"meters";case"square-kilometers":return"kilometers";case"square-millimeters":return"millimeters";case"square-centimeters":return"centimeters";case"square-decimeters":return"decimeters";default:return null}}(i);if(o)switch(o){case"metric":n.perimeter=(0,S.Rd)(e,s,"meters");break;case"imperial":n.perimeter=(0,S.Ud)(e,s,"meters");break;default:var l=(0,g.En)(s,"meters",o);n.perimeter=(0,S.VG)(e,l,o)}else n.perimeter="";return n}(this.messages,i,this.unit):null;if(this._set("measurementLabel",s),n||r){var a,o,l,u=this._measurementLayer.graphics,c=3===u.length,p=this.view.effectiveTheme;c?(a=u.at(0),o=u.at(1),l=u.at(2)):(a=new L.Z({symbol:new X.default({color:(0,M.G)(p.accentColor,.3),outline:null})}),o=new L.Z({symbol:new K.default({color:p.accentColor,width:2})}),l=new L.Z({symbol:new Q.Z({color:p.textColor,font:new $.Z({size:14,family:"sans-serif"}),haloColor:(0,M.G)((0,M.mj)(p.textColor,M.K6.Low),.5),haloSize:2})}),u.removeAll(),u.addMany([a,o,l])),a.geometry=n,o.geometry=r,l.geometry=null===n||void 0===n?void 0:n.centroid,l.symbol.text=null!==(e=null===s||void 0===s?void 0:s.area)&&void 0!==e?e:""}}}}}]),i}(H.m);function re(e){if(!e)return!1;var t=e.isGeographic,i=e.isWebMercator,n=e.isWGS84;return t&&!n&&!(0,j.Gb)(e)||!t&&!i}function se(e){return null!==e&&void 0!==e?e:1/0}(0,l._)([(0,c.Cb)()],ne.prototype,"_drawActive",void 0),(0,l._)([(0,c.Cb)({readOnly:!0})],ne.prototype,"cursor",null),(0,l._)([(0,c.Cb)({value:!0})],ne.prototype,"editable",null),(0,l._)([(0,c.Cb)({type:Number})],ne.prototype,"geodesicDistanceThreshold",void 0),(0,l._)([(0,c.Cb)({readOnly:!0})],ne.prototype,"measurement",void 0),(0,l._)([(0,c.Cb)({readOnly:!0})],ne.prototype,"measurementLabel",void 0),(0,l._)([(0,c.Cb)()],ne.prototype,"messages",void 0),(0,l._)([(0,c.Cb)()],ne.prototype,"unit",void 0),(0,l._)([(0,c.Cb)()],ne.prototype,"updating",null),(0,l._)([(0,c.Cb)({constructOnly:!0})],ne.prototype,"view",void 0),ne=(0,l._)([(0,h.j)("esri.widgets.AreaMeasurement2D.AreaMeasurement2DTool")],ne);var ae=function(e){(0,a.Z)(i,e);var t=(0,o.Z)(i);function i(e){var n;return(0,r.Z)(this,i),(n=t.call(this,e)).supportedViewType="2d",n.unsupportedErrorMessage="AreaMeasurement2DViewModel is only supported in 2D views.",n}return(0,s.Z)(i,[{key:"initialize",value:function(){var e=this;this.addHandles([(0,y.watch)((function(){var t;return null===(t=e.view)||void 0===t?void 0:t.spatialReference}),(function(){return e.clear()})),(0,y.watch)((function(){return e.unit}),(function(t){null!=e.tool&&(e.tool.unit=t)}),y.initial),(0,y.watch)((function(){return e.geodesicDistanceThreshold}),(function(t){null!=e.tool&&(e.tool.geodesicDistanceThreshold=t)}),y.initial)])}},{key:"geodesicDistanceThreshold",get:function(){return this._get("geodesicDistanceThreshold")},set:function(e){(0,f.Mr)(p.Z.getLogger(this),"geodesicDistanceThreshold",{version:"4.29",warnOnce:!0}),this._set("geodesicDistanceThreshold",e)}},{key:"measurement",get:function(){return null!=this.tool?this.tool.measurement:null}},{key:"measurementLabel",get:function(){return null!=this.tool?this.tool.measurementLabel:null}},{key:"state",get:function(){var e;return this.disabled||null==this.view||null==this.view.spatialReference?"disabled":null!==(e=this.tool)&&void 0!==e&&e.measurement?this.tool.active?"measuring":"measured":"ready"}},{key:"unit",get:function(){return this._validateUnit(this.defaultUnit)},set:function(e){this._overrideIfSome("unit",this._validateUnit(e))}},{key:"unitOptions",get:function(){return g.fN},set:function(e){this._overrideIfSome("unitOptions",this._validateUnits(e))}},{key:"start",value:function(){var e=(0,d.Z)((0,v.Z)().mark((function e(){var t;return(0,v.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.view,e.t0=null!=t,!e.t0){e.next=9;break}return e.next=5,(0,y.whenOnce)((function(){return t.ready}));case 5:if(e.t1=re(t.spatialReference),!e.t1){e.next=9;break}return e.next=9,(0,_.load)();case 9:this.createTool({interactive:!0});case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"clear",value:function(){this.removeTool()}},{key:"constructTool",value:function(){return new ne({view:this.view,visible:this.visible,geodesicDistanceThreshold:this.geodesicDistanceThreshold,unit:this.unit})}},{key:"_validateUnit",value:function(e){var t=this.unitOptions,i=this.defaultUnit;return null!=e&&t.includes(e)?e:t.includes(i)?i:t.length>0?t[0]:i}},{key:"_validateUnits",value:function(e){if(null==e)return[];var t=e.filter((function(e){return g.fN.includes(e)}));return 0===t.length?g.fN.slice():t}}]),i}(i(32845).V);(0,l._)([(0,c.Cb)(w.Y)],ae.prototype,"defaultUnit",void 0),(0,l._)([(0,c.Cb)()],ae.prototype,"geodesicDistanceThreshold",null),(0,l._)([(0,c.Cb)({readOnly:!0})],ae.prototype,"measurement",null),(0,l._)([(0,c.Cb)({readOnly:!0})],ae.prototype,"measurementLabel",null),(0,l._)([(0,c.Cb)({readOnly:!0})],ae.prototype,"state",null),(0,l._)([(0,c.Cb)({type:String})],ae.prototype,"unit",null),(0,l._)([(0,c.Cb)({type:[String]})],ae.prototype,"unitOptions",null);var oe=ae=(0,l._)([(0,h.j)("esri.widgets.AreaMeasurement2D.AreaMeasurement2DViewModel")],ae),le=i(7021),ue=i(15142),ce=(i(80975),i(80532)),pe=i(67005),he="esri-area-measurement-2d",me={base:he,newMeasurementButton:"".concat(he,"__clear-button")},ve=function(e){(0,a.Z)(i,e);var t=(0,o.Z)(i);function i(e,n){var s;return(0,r.Z)(this,i),(s=t.call(this,e,n)).messages=null,s.messagesUnits=null,s.messagesCommon=null,s.viewModel=new oe,s}return(0,s.Z)(i,[{key:"active",get:function(){return this.viewModel.active}},{key:"icon",get:function(){return"measure-area"},set:function(e){this._overrideIfSome("icon",e)}},{key:"label",get:function(){var e,t;return null!==(e=null===(t=this.messages)||void 0===t?void 0:t.widgetLabel)&&void 0!==e?e:""},set:function(e){this._overrideIfSome("label",e)}},{key:"unit",get:function(){return this.viewModel.unit},set:function(e){this.viewModel.unit=e}},{key:"unitOptions",get:function(){return this.viewModel.unitOptions},set:function(e){this.viewModel.unitOptions=e}},{key:"view",get:function(){return this.viewModel.view},set:function(e){this.viewModel.view=e}},{key:"visible",get:function(){return this.viewModel.visible},set:function(e){this.viewModel.visible=e}},{key:"render",value:function(){var e=this,t=this.messages,i=this.messagesCommon,r=this.messagesUnits,s=this.unit,a=this.unitOptions,o=this.viewModel,l=this.visible,c=o.active,p=o.measurementLabel,h=o.state,m=o.supported;return(0,pe.u)("div",{"aria-label":t.widgetLabel,class:this.classes(me.base,le.z.widget,le.z.panel),key:this,role:"presentation"},l?(0,pe.u)(ue.s,{active:c,measurementItems:[{key:"area",title:null===r||void 0===r?void 0:r.measures.area,value:null===p||void 0===p?void 0:p.area},{key:"perimeter",title:t.perimeter,value:null===p||void 0===p?void 0:p.perimeter}],messages:(0,n.Z)((0,n.Z)({},t),{},{notApplicable:i.notApplicable}),newMeasurementButtonClass:me.newMeasurementButton,state:h,supported:m,unit:s,unitOptions:a,onNewMeasurementClick:function(){(0,u.R8)(o.start())},onUnitChange:function(t){e.unit=t}}):null)}}]),i}(m.Z);(0,l._)([(0,c.Cb)({readOnly:!0})],ve.prototype,"active",null),(0,l._)([(0,c.Cb)()],ve.prototype,"icon",null),(0,l._)([(0,c.Cb)()],ve.prototype,"label",null),(0,l._)([(0,c.Cb)(),(0,ce.H)("esri/widgets/AreaMeasurement2D/t9n/AreaMeasurement2D")],ve.prototype,"messages",void 0),(0,l._)([(0,c.Cb)(),(0,ce.H)("esri/core/t9n/Units")],ve.prototype,"messagesUnits",void 0),(0,l._)([(0,c.Cb)(),(0,ce.H)("esri/t9n/common")],ve.prototype,"messagesCommon",void 0),(0,l._)([(0,c.Cb)()],ve.prototype,"uiStrings",void 0),(0,l._)([(0,c.Cb)()],ve.prototype,"unit",null),(0,l._)([(0,c.Cb)()],ve.prototype,"unitOptions",null),(0,l._)([(0,c.Cb)()],ve.prototype,"view",null),(0,l._)([(0,c.Cb)({type:oe})],ve.prototype,"viewModel",void 0),(0,l._)([(0,c.Cb)({type:Boolean})],ve.prototype,"visible",null);var de=ve=(0,l._)([(0,h.j)("esri.widgets.AreaMeasurement2D")],ve)}}]);
//# sourceMappingURL=41421.6844676c.chunk.js.map