{"version":3,"file":"static/js/80907.125149c8.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/layers/save/groupLayerUtils.js","../node_modules/@arcgis/core/layers/save/utils.js","../node_modules/@arcgis/core/portal/support/jsonContext.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{save as e,saveAs as r}from\"./utils.js\";import{createForItemWrite as t}from\"../../portal/support/jsonContext.js\";import{typeKeyword as o,hasTypeKeyword as a,removeTypeKeyword as s,addTypeKeyword as n}from\"../../portal/support/portalItemUtils.js\";import{saveResources as i}from\"../../webdoc/support/resourceUtils.js\";const u=\"Group Layer\",c=\"group-layer-save\",l=\"group-layer-save-as\",p=o.GROUP_LAYER_MAP;function m(e){return{isValid:\"group\"===e.type,errorMessage:\"Layer.type should be 'group'\"}}function y(e){return{isValid:a(e,p),errorMessage:`Layer.portalItem.typeKeywords should have '${p}'`}}function f(e,r){return{...t(e,\"web-map\",!0),initiator:r}}function v(e){const r=e.layerJSON;return Promise.resolve(r&&Object.keys(r).length?r:null)}async function d(e,r){r.title||=e.title,s(r,o.METADATA),n(r,p)}async function I(r,t){return e({layer:r,itemType:u,validateLayer:m,validateItem:y,createJSONContext:e=>f(e,r),createItemData:v,errorNamePrefix:c,saveResources:async(e,t)=>(r.sourceIsPortalItem||await e.removeAllResources().catch((()=>{})),i(r.resourceReferences,t))},t)}async function g(e,t,o){return r({layer:e,itemType:u,validateLayer:m,createJSONContext:r=>f(r,e),createItemData:v,errorNamePrefix:l,newItem:t,setItemProperties:d,saveResources:(r,t)=>i(e.resourceReferences,t)},o)}export{I as save,g as saveAs};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport e from\"../../core/Error.js\";import{updateOrigins as t}from\"../../core/accessorSupport/originUtils.js\";import r from\"../../portal/Portal.js\";import o from\"../../portal/PortalItem.js\";import{createForItemWrite as a}from\"../../portal/support/jsonContext.js\";import{addTypeKeyword as i,typeKeyword as n}from\"../../portal/support/portalItemUtils.js\";import{validateSaveAPIKey as s}from\"../../webdoc/support/saveAPIKeyUtils.js\";import{evaluateWriteErrors as p}from\"../../webdoc/support/saveUtils.js\";function l(t,r,o){const a=o(t);if(!a.isValid)throw new e(`${r}:invalid-parameters`,a.errorMessage,{layer:t})}async function m(e){const{layer:t,errorNamePrefix:r,validateLayer:o}=e;await t.load(),l(t,r,o)}function c(e,t){return`Layer (title: ${e.title}, id: ${e.id}) of type '${e.declaredClass}' ${t}`}function u(t){const{item:r,errorNamePrefix:o,layer:a,validateItem:i}=t;if(s(r),f(t),i){const t=i(r);if(!t.isValid)throw new e(`${o}:invalid-parameters`,t.errorMessage,{layer:a})}}function f(t){const{item:r,itemType:o,additionalItemType:a,errorNamePrefix:i,layer:n}=t,s=[o];if(a&&s.push(a),!s.includes(r.type)){const t=s.map((e=>`'${e}'`)).join(\", \");throw new e(`${i}:portal-item-wrong-type`,`Portal item type should be one of: \"${t}\"`,{item:r,layer:n})}}function d(t){const{layer:r,errorNamePrefix:o}=t,{portalItem:a}=r;if(!a)throw new e(`${o}:portal-item-not-set`,c(r,\"requires the portalItem property to be set\"));if(!a.loaded)throw new e(`${o}:portal-item-not-loaded`,c(r,\"cannot be saved to a portal item that does not exist or is inaccessible\"));u({...t,item:a})}function y(e){const{newItem:t,itemType:a}=e;let i=o.from(t);return i.id&&(i=i.clone(),i.id=null),i.type??=a,i.portal??=r.getDefault(),u({...e,item:i}),i}function w(e){return a(e,\"portal-item\")}async function I(e,t,r){\"beforeSave\"in e&&\"function\"==typeof e.beforeSave&&await e.beforeSave();const o=e.write({},t);return await Promise.all(t.resources?.pendingOperations??[]),p(t,{errorName:\"layer-write:unsupported\"},r),o}function v(e){i(e,n.JSAPI),e.typeKeywords&&(e.typeKeywords=e.typeKeywords.filter(((e,t,r)=>r.indexOf(e)===t)))}async function P(e,t,r){const o=e.portal;await o.signIn(),await(o.user?.addItem({item:e,data:t,folder:r?.folder}))}async function $(e,r){const{layer:o,createItemData:a,createJSONContext:i,setItemProperties:n,saveResources:s,supplementalUnsupportedErrors:p}=e;await m(e),d(e);const l=o.portalItem,c=i?i(l):w(l),u=await I(o,c,{...r,supplementalUnsupportedErrors:p}),f=await a({layer:o,layerJSON:u},l);return await(n?.(o,l)),v(l),await l.update({data:f}),t(c),await(s?.(l,c)),l}async function j(e,r){const{layer:o,createItemData:a,createJSONContext:i,setItemProperties:n,saveResources:s,supplementalUnsupportedErrors:p}=e;await m(e);const l=y(e),c=i?i(l):w(l),u=await I(o,c,{...r,supplementalUnsupportedErrors:p}),f=await a({layer:o,layerJSON:u},l);return await n(o,l),v(l),await P(l,f,r),o.portalItem=l,t(c),await(s?.(l,c)),l}export{P as addItem,c as createErrorMessage,w as createJSONContextForWrite,d as ensureItemConfig,l as ensureLayerConfig,I as getLayerJSON,y as getPortalItem,$ as save,j as saveAs,v as setCommonItemProperties};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{urlToObject as t}from\"../../core/urlUtils.js\";import r from\"../Portal.js\";function e(t,r){return{...l(t,r),readResourcePaths:[]}}function o(r,e,o){const i=t(r.itemUrl);return{...l(r,e),messages:[],writtenProperties:[],blockedRelativeUrls:[],verifyItemRelativeUrls:i?{rootPath:i.path,writtenUrls:[]}:null,resources:o?{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}:null}}function l(e,o){return{origin:o,url:t(e.itemUrl),portal:e.portal||r.getDefault(),portalItem:e}}export{e as createForItemRead,o as createForItemWrite};\n"],"names":["u","c","l","p","o","m","e","isValid","type","errorMessage","y","a","concat","f","r","_objectSpread","t","initiator","v","layerJSON","Promise","resolve","Object","keys","length","d","_x","_x2","_d","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_context","prev","next","title","s","n","stop","I","_x3","_x4","_I","_callee3","_context3","abrupt","layer","itemType","validateLayer","validateItem","createJSONContext","createItemData","errorNamePrefix","saveResources","_saveResources","_callee2","_context2","t0","sourceIsPortalItem","removeAllResources","catch","i","resourceReferences","_x8","_x9","g","_x5","_x6","_x7","_g","_callee4","_context4","newItem","setItemProperties","_m","load","id","declaredClass","item","additionalItemType","push","includes","map","join","portalItem","loaded","_i","_i$type","_i2","_i2$portal","clone","portal","w","_t$resources$pendingO","_t$resources","beforeSave","write","all","resources","pendingOperations","errorName","typeKeywords","filter","indexOf","P","_P","_o$user","signIn","user","addItem","data","folder","$","_$","supplementalUnsupportedErrors","sent","update","j","_x10","_x11","_j","_callee5","_context5","readResourcePaths","itemUrl","messages","writtenProperties","blockedRelativeUrls","verifyItemRelativeUrls","rootPath","path","writtenUrls","toAdd","toUpdate","toKeep","origin","url"],"sourceRoot":""}