"use strict";(self.webpackChunkreact_training=self.webpackChunkreact_training||[]).push([[20519],{20519:function(e,r,a){a.r(r),a.d(r,{populateGroupLayer:function(){return U},populateOperationalLayers:function(){return v}});var t=a(74165),n=a(37762),i=a(1413),y=a(15861),c=a(80987),u=(a(93169),a(28458)),l=a(19610),o=a(98995);function L(e){return d(e,"notes")}function s(e){return d(e,"markup")}function p(e){return d(e,"route")}function d(e,r){return!(!e.layerType||"ArcGISFeatureLayer"!==e.layerType)&&e.featureCollectionType===r}var S=a(43139),f=a(21371);function v(e,r,a){return I.apply(this,arguments)}function I(){return I=(0,y.Z)((0,t.Z)().mark((function e(r,a,i){var y,c,u,l,o;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return");case 2:return y=a.map((function(e){return x(e,i)})),e.next=5,Promise.allSettled(y);case 5:c=e.sent,u=(0,n.Z)(c);try{for(u.s();!(l=u.n()).done;)"rejected"===(o=l.value).status||o.value&&r.add(o.value)}catch(t){u.e(t)}finally{u.f()}case 8:case"end":return e.stop()}}),e)}))),I.apply(this,arguments)}var T={ArcGISDimensionLayer:"DimensionLayer",ArcGISFeatureLayer:"FeatureLayer",ArcGISImageServiceLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",ArcGISSceneServiceLayer:"SceneLayer",ArcGISTiledElevationServiceLayer:"ElevationLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",BuildingSceneLayer:"BuildingSceneLayer",CatalogLayer:"CatalogLayer",CSV:"CSVLayer",DefaultTileLayer:"TileLayer",GeoJSON:"GeoJSONLayer",GroupLayer:"GroupLayer",IntegratedMesh3DTilesLayer:"IntegratedMesh3DTilesLayer",IntegratedMeshLayer:"IntegratedMeshLayer",KML:"KMLLayer",LineOfSightLayer:"LineOfSightLayer",MediaLayer:"MediaLayer",OGCFeatureLayer:"OGCFeatureLayer",PointCloudLayer:"PointCloudLayer",RasterDataLayer:"UnsupportedLayer",VectorTileLayer:"VectorTileLayer",Voxel:"VoxelLayer",WFS:"WFSLayer",WMS:"WMSLayer",WebTiledLayer:"WebTileLayer"},g={ArcGISTiledElevationServiceLayer:"ElevationLayer",DefaultTileLayer:"ElevationLayer",RasterDataElevationLayer:"UnsupportedLayer"},b={ArcGISFeatureLayer:"FeatureLayer"},G={ArcGISImageServiceLayer:"UnsupportedLayer",ArcGISMapServiceLayer:"UnsupportedLayer",ArcGISSceneServiceLayer:"SceneLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",DefaultTileLayer:"TileLayer",OpenStreetMap:"OpenStreetMapLayer",VectorTileLayer:"VectorTileLayer",WMS:"UnsupportedLayer",WebTiledLayer:"WebTileLayer"},m={ArcGISAnnotationLayer:"UnsupportedLayer",ArcGISDimensionLayer:"UnsupportedLayer",ArcGISFeatureLayer:"FeatureLayer",ArcGISImageServiceLayer:"ImageryLayer",ArcGISImageServiceVectorLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",ArcGISStreamLayer:"StreamLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",BingMapsAerial:"BingMapsLayer",BingMapsHybrid:"BingMapsLayer",BingMapsRoad:"BingMapsLayer",CatalogLayer:"CatalogLayer",CSV:"CSVLayer",DefaultTileLayer:"TileLayer",GeoJSON:"GeoJSONLayer",GeoRSS:"GeoRSSLayer",GroupLayer:"GroupLayer",KML:"KMLLayer",KnowledgeGraphLayer:"KnowledgeGraphLayer",MediaLayer:"MediaLayer",OGCFeatureLayer:"OGCFeatureLayer",OrientedImageryLayer:"OrientedImageryLayer",SubtypeGroupLayer:"SubtypeGroupLayer",VectorTileLayer:"VectorTileLayer",WFS:"WFSLayer",WMS:"WMSLayer",WebTiledLayer:"WebTileLayer"},M={ArcGISFeatureLayer:"FeatureLayer",SubtypeGroupTable:"UnsupportedLayer"},h={ArcGISImageServiceLayer:"ImageryLayer",ArcGISImageServiceVectorLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",BingMapsAerial:"BingMapsLayer",BingMapsHybrid:"BingMapsLayer",BingMapsRoad:"BingMapsLayer",DefaultTileLayer:"TileLayer",OpenStreetMap:"OpenStreetMapLayer",VectorTileLayer:"VectorTileLayer",WMS:"WMSLayer",WebTiledLayer:"WebTileLayer"},k=(0,i.Z)((0,i.Z)({},m),{},{LinkChartLayer:"LinkChartLayer"}),A=(0,i.Z)({},M),w=(0,i.Z)({},h);function x(e,r){return C.apply(this,arguments)}function C(){return C=(0,y.Z)((0,t.Z)().mark((function e(r,a){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Z,e.next=3,W(r,a);case 3:return e.t1=e.sent,e.t2=r,e.t3=a,e.abrupt("return",(0,e.t0)(e.t1,e.t2,e.t3));case 7:case"end":return e.stop()}}),e)}))),C.apply(this,arguments)}function Z(e,r,a){return F.apply(this,arguments)}function F(){return F=(0,y.Z)((0,t.Z)().mark((function e(r,a,n){var i;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=new r).read(a,n.context),e.t0="group"===i.type,!e.t0){e.next=17;break}if("GroupLayer"!==a.layerType){e.next=9;break}return e.next=7,U(i,a,n);case 7:e.next=17;break;case 9:if(!B(a)){e.next=13;break}R(i,a,n.context),e.next=17;break;case 13:if(e.t1=V(a),!e.t1){e.next=17;break}return e.next=17,K(i,a,n.context);case 17:return e.next=19,(0,f.y)(i,n.context);case 19:return e.abrupt("return",i);case 20:case"end":return e.stop()}}),e)}))),F.apply(this,arguments)}function W(e,r){return O.apply(this,arguments)}function O(){return O=(0,y.Z)((0,t.Z)().mark((function e(r,a){var n,i,y,c,d,f,v,I,T,g;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y=a.context,c=D(y),!(d=r.layerType||r.type)&&(null===a||void 0===a?void 0:a.defaultLayerType)&&(d=a.defaultLayerType),f=c[d],v=f?l.T[f]:l.T.UnknownLayer,!B(r)){e.next=20;break}if(I=null===y||void 0===y?void 0:y.portal,!r.itemId){e.next=18;break}return T=new o.default({id:r.itemId,portal:I}),e.next=11,T.load();case 11:return e.next=13,(0,S.selectLayerClassPath)(T,new u.L);case 13:if(e.t0=e.sent.className,e.t0){e.next=16;break}e.t0="UnknownLayer";case 16:g=e.t0,v=l.T[g];case 18:e.next=21;break;case 20:"ArcGISFeatureLayer"===d?L(r)||s(r)?v=l.T.MapNotesLayer:p(r)?v=l.T.RouteLayer:V(r)&&(v=l.T.GroupLayer):null!==(n=r.wmtsInfo)&&void 0!==n&&n.url&&r.wmtsInfo.layerIdentifier?v=l.T.WMTSLayer:"WFS"===d&&"2.0.0"!==(null===(i=r.wfsInfo)||void 0===i?void 0:i.version)&&(v=l.T.UnsupportedLayer);case 21:return e.abrupt("return",v());case 22:case"end":return e.stop()}}),e)}))),O.apply(this,arguments)}function V(e){var r,a,t;return"ArcGISFeatureLayer"===e.layerType&&!B(e)&&(null!==(r=null===(a=e.featureCollection)||void 0===a||null===(t=a.layers)||void 0===t?void 0:t.length)&&void 0!==r?r:0)>1}function B(e){return"Feature Collection"===e.type}function D(e){var r;switch(e.origin){case"web-scene":switch(e.layerContainerType){case"basemap":r=G;break;case"ground":r=g;break;case"tables":r=b;break;default:r=T}break;case"link-chart":switch(e.layerContainerType){case"basemap":r=w;break;case"tables":r=A;break;default:r=k}break;default:switch(e.layerContainerType){case"basemap":r=h;break;case"tables":r=M;break;default:r=m}}return r}function U(e,r,a){return E.apply(this,arguments)}function E(){return E=(0,y.Z)((0,t.Z)().mark((function e(r,a,i){var y,u,l,o;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y=new c.Z,u=v(y,Array.isArray(a.layers)?a.layers:[],i),e.prev=1,e.prev=2,e.next=5,u;case 5:if("group"!==r.type){e.next=7;break}return e.abrupt("return",(r.layers.addMany(y),r));case 7:e.next=15;break;case 9:e.prev=9,e.t0=e.catch(2),r.destroy(),l=(0,n.Z)(y);try{for(l.s();!(o=l.n()).done;)o.value.destroy()}catch(t){l.e(t)}finally{l.f()}throw e.t0;case 15:e.next=20;break;case 17:throw e.prev=17,e.t1=e.catch(1),e.t1;case 20:case"end":return e.stop()}}),e,null,[[1,17],[2,9]])}))),E.apply(this,arguments)}function R(e,r,a){r.itemId&&(e.portalItem=new o.default({id:r.itemId,portal:null===a||void 0===a?void 0:a.portal}),e.when((function(){var t,n,i=function(t){var n,i,y=t.layerId;J(t,e,r,y,a);var c=null===(n=r.featureCollection)||void 0===n||null===(i=n.layers)||void 0===i?void 0:i[y];c&&t.read(c,a)};null!==(t=e.layers)&&void 0!==t&&t.forEach(i),null===(n=e.tables)||void 0===n||n.forEach(i)})))}function K(e,r,a){return N.apply(this,arguments)}function N(){return N=(0,y.Z)((0,t.Z)().mark((function e(r,a,n){var y,c,u,o,L,s;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=l.T.FeatureLayer,e.next=3,c();case 3:u=e.sent,o=a.featureCollection,L=null===o||void 0===o?void 0:o.showLegend,s=null===o||void 0===o||null===(y=o.layers)||void 0===y?void 0:y.map((function(e,t){var y=new u;y.read(e,n);var c=(0,i.Z)((0,i.Z)({},n),{},{ignoreDefaults:!0});return J(y,r,a,t,c),null!=L&&y.read({showLegend:L},c),y})),r.layers.addMany(null!==s&&void 0!==s?s:[]);case 8:case"end":return e.stop()}}),e)}))),N.apply(this,arguments)}function J(e,r,a,t,n){var i,y;e.read({id:"".concat(r.id,"-sublayer-").concat(t),visibility:null===(i=null===(y=a.visibleLayers)||void 0===y?void 0:y.includes(t))||void 0===i||i},n)}}}]);
//# sourceMappingURL=20519.f67b0ab5.chunk.js.map