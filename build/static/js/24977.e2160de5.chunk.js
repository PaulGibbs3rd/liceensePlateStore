"use strict";(self.webpackChunkreact_training=self.webpackChunkreact_training||[]).push([[24977],{58880:function(t,e,i){i.d(e,{b:function(){return w}});var r=i(15671),n=i(43144),s=i(88301),a=i(61120),u=i(60136),l=i(29388),h=i(37762),o=i(10064),d=i(93169),c=i(32718),f=i(94109),v=i(84328),y=i(84319),p=i(8548),_=i(53634),g=i(57808),x=i(52311),k=function(){function t(e,i,n){(0,r.Z)(this,t),this._texture=null,this._lastTexture=null,this._fbos={},this.texelSize=4;var s=e.buffer,a=e.pixelType,u=e.textureOnly,l=(0,y.UK)(a);this.blockIndex=n,this.pixelType=a,this.size=i,this.textureOnly=u,u||(this.data=new l(s)),this._resetRange()}return(0,n.Z)(t,[{key:"destroy",value:function(){var t;for(var e in null===(t=this._texture)||void 0===t||t.dispose(),this._fbos){var i=this._fbos[e];i&&("0"===e&&i.detachColorTexture(),i.dispose()),this._fbos[e]=null}this._texture=null}},{key:"_textureDesc",get:function(){var t=new x.X;return t.wrapMode=p.e8.CLAMP_TO_EDGE,t.samplingMode=p.cw.NEAREST,t.dataType=this.pixelType,t.width=this.size,t.height=this.size,t}},{key:"setData",value:function(t,e,i){var r=(0,v.jL)(t),n=this.data,s=r*this.texelSize+e;!n||s>=n.length||(n[s]=i,this.dirtyStart=Math.min(this.dirtyStart,r),this.dirtyEnd=Math.max(this.dirtyEnd,r))}},{key:"getData",value:function(t,e){if(null==this.data)return null;var i=(0,v.jL)(t)*this.texelSize+e;return!this.data||i>=this.data.length?null:this.data[i]}},{key:"getTexture",value:function(t){var e;return null!==(e=this._texture)&&void 0!==e?e:this._initTexture(t)}},{key:"getFBO",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!this._fbos[e]){var i=0===e?this.getTexture(t):this._textureDesc;this._fbos[e]=new _.X(t,i)}return this._fbos[e]}},{key:"hasDirty",get:function(){var t=this.dirtyStart;return this.dirtyEnd>=t}},{key:"updateTexture",value:function(t,e){try{var i=this.dirtyStart,r=this.dirtyEnd;if(!this.hasDirty)return;(0,d.Z)("esri-2d-update-debug")&&console.debug("Version[".concat(e,"] AttributeStoreView.updateTexture"),{start:i,end:r,firstBytes:new Uint8Array(this.data.buffer.slice(0,16)),block:this}),this._resetRange();var n=this.data.buffer,s=this.getTexture(t),a=(i-i%this.size)/this.size,u=(r-r%this.size)/this.size,l=a,h=this.size,f=u,v=a*this.size*4,p=4*(h+f*this.size)-v,_=(0,y.UK)(this.pixelType),g=new _(n,v*_.BYTES_PER_ELEMENT,p),x=this.size,k=f-l+1;if(k>this.size)return void c.Z.getLogger("esri.views.2d.engine.webgl.AttributeStoreView").error(new o.Z("mapview-webgl","Out-of-bounds index when updating AttributeData"));s.updateData(0,0,l,x,k,g)}catch(b){}}},{key:"update",value:function(t){var e=t.data,i=t.start,r=t.end;if(null!=e&&null!=this.data)for(var n=this.data,s=i*this.texelSize,a=0;a<e.length;a++){var u=1<<a%this.texelSize;t.layout&u&&(n[s+a]=e[a])}this.dirtyStart=Math.min(this.dirtyStart,i),this.dirtyEnd=Math.max(this.dirtyEnd,r)}},{key:"resize",value:function(t,e){var i=this.size;if(this.size=e,this.textureOnly)i!==this.size&&(this._lastTexture=this._texture,this._texture=null);else{var r=(0,y.UK)(this.pixelType);this.destroy(),this.data=new r(t.buffer)}}},{key:"_resetRange",value:function(){this.dirtyStart=2147483647,this.dirtyEnd=0}},{key:"_initTexture",value:function(t){var e,i=new g.x(t,this._textureDesc,null!==(e=this.data)&&void 0!==e?e:void 0);if(null!=this._lastTexture&&this._fbos[0]){var r=this._lastTexture.descriptor.width,n=this._lastTexture.descriptor.height,s=this._lastTexture.descriptor.dataType,a=this._lastTexture.descriptor.pixelFormat,u=this.getFBO(t),l=(0,y.Yw)(s),h=new((0,y.UK)(s))(new ArrayBuffer(r*n*l*this.texelSize)),o=t.getBoundFramebufferObject(),d=t.getViewport(),c=d.x,f=d.y,v=d.width,p=d.height;t.bindFramebuffer(u),u.readPixels(0,0,r,n,a,s,h),i.updateData(0,0,0,2*r,n/2,h),t.setViewport(c,f,v,p),t.bindFramebuffer(o)}return this.destroy(),this._texture=i,this._texture}}]),t}(),b=function(){function t(){(0,r.Z)(this,t),this.size=0,this._pendingAttributeUpdates=[],this._version=0,this._epoch=0,this._locked=!1}return(0,n.Z)(t,[{key:"_initialize",value:function(t){var e=this;if(!t)throw new Error("InternalError: initArgs must be defined");var i=t.blockDescriptors;if(this.size=t.blockSize,(0,d.Z)("esri-2d-update-debug")&&console.debug("AttributeStoreView.initialize",{message:t}),null==this._data)this._data=i.map((function(t,i){return null!=t?new k(t,e.size,i):null}));else for(var r=0;r<this._data.length;r++){var n=this._data[r],s=i[r];null!=s&&(null==n?this._data[r]=new k(s,this.size,r):n.resize(s,this.size))}}},{key:"destroy",value:function(){var t,e,i,r=(0,h.Z)(null!==(e=this._data)&&void 0!==e?e:[]);try{for(r.s();!(i=r.n()).done;){var n=i.value;null===n||void 0===n||n.destroy()}}catch(s){r.e(s)}finally{r.f()}null!==(t=this._defaultTexture)&&void 0!==t&&t.dispose(),this._defaultTexture=null,this._pendingAttributeUpdates=[]}},{key:"isEmpty",value:function(){return null==this._data}},{key:"getBlock",value:function(t){return null==this._data?null:this._data[t]}},{key:"setLabelMinZoom",value:function(t,e){this.setData(t,0,1,e)}},{key:"getLabelMinZoom",value:function(t){return this.getData(t,0,1,255)}},{key:"getFilterFlags",value:function(t){return this.getData(t,0,0,0)}},{key:"getVVSize",value:function(t){return this.getData(t,f.wi.VV,0,0)}},{key:"getData",value:function(t,e,i,r){if(!this._data)return 0;var n=this._data[e];if(null==n)return 0;var s=n.getData(t,i);return null!=s?s:r}},{key:"setData",value:function(t,e,i,r){this._data[e].setData(t,i,r)}},{key:"lockTextureUploads",value:function(){this._locked=!0}},{key:"unlockTextureUploads",value:function(){this._locked=!1,this.update()}},{key:"requestUpdate",value:function(t){this._version=t.version,this._pendingAttributeUpdates.push(t),(0,d.Z)("esri-2d-update-debug")&&console.debug("Version[".concat(this._version,"] AttributeStoreView.requestUpdate"),{message:t})}},{key:"currentEpoch",get:function(){return this._epoch}},{key:"update",value:function(){if(!this._locked){var t=this._pendingAttributeUpdates;this._pendingAttributeUpdates=[];var e,i=(0,h.Z)(t);try{for(i.s();!(e=i.n()).done;){var r=e.value,n=r.blockData,s=r.initArgs,a=r.sendUpdateEpoch,u=r.version;(0,d.Z)("esri-2d-update-debug")&&console.debug("Version[".concat(this._version,"] Epoch[").concat(a,"] AttributeStoreView.applyUpdate")),this._version=u,this._epoch=a,null!=s&&this._initialize(s);for(var l=this._data,o=0;o<n.length;o++){var c=n[o],f=l[o];null!=f&&null!=c&&((0,d.Z)("esri-2d-update-debug")&&console.debug("Version[".concat(this._version,"] CpuBlock[").concat(o,"] AttributeStoreView.update"),{block:c}),f.update(c))}}}catch(v){i.e(v)}finally{i.f()}}}},{key:"getUniforms",value:function(t){return{filterFlags:{texture:this._getTexture(t,f.wi.FilterFlags),unit:f.NY},animation:{texture:this._getTexture(t,f.wi.Animation),unit:f.zZ},gpgpu:{texture:this._getTexture(t,f.wi.GPGPU),unit:f.cz},visualVariableData:{texture:this._getTexture(t,f.wi.VV),unit:f.bm},dataDriven0:{texture:this._getTexture(t,f.wi.DD0),unit:f.j1},dataDriven1:{texture:this._getTexture(t,f.wi.DD1),unit:f.Ly},dataDriven2:{texture:this._getTexture(t,f.wi.DD2),unit:f.ce},size:this.size}}},{key:"_getTexture",value:function(t,e){var i,r=null===(i=this._data)||void 0===i?void 0:i[e];return r?(r.updateTexture(t,this._version),r.getTexture(t)):this._getDefaultTexture(t)}},{key:"_getDefaultTexture",value:function(t){if(null==this._defaultTexture){var e=new x.X;e.wrapMode=p.e8.CLAMP_TO_EDGE,e.samplingMode=p.cw.NEAREST,e.width=1,e.height=1,this._defaultTexture=new g.x(t,e,new Uint8Array(4))}return this._defaultTexture}}]),t}(),w=function(t){(0,u.Z)(i,t);var e=(0,l.Z)(i);function i(t){var n;return(0,r.Z)(this,i),(n=e.call(this,t))._statisticsByLevel=new Map,n.attributeView=new b,n}return(0,n.Z)(i,[{key:"destroy",value:function(){this.children.forEach((function(t){return t.destroy()})),this.removeAllChildren(),this.attributeView.destroy()}},{key:"doRender",value:function(t){t.context.capabilities.enable("textureFloatLinear"),(0,s.Z)((0,a.Z)(i.prototype),"doRender",this).call(this,t)}},{key:"createRenderParams",value:function(t){var e=(0,s.Z)((0,a.Z)(i.prototype),"createRenderParams",this).call(this,t);return e.attributeView=this.attributeView,e.instanceStore=this._instanceStore,e.statisticsByLevel=this._statisticsByLevel,e}}]),i}(i(55067).Z)},55067:function(t,e,i){i.d(e,{Z:function(){return p}});var r=i(37762),n=i(15671),s=i(43144),a=i(88301),u=i(61120),l=i(60136),h=i(29388),o=i(93169),d=i(80613),c=i(86438),f=i(40655),v=i(5086),y=function(t,e){return t.key.level-e.key.level!=0?t.key.level-e.key.level:t.key.row-e.key.row!=0?t.key.row-e.key.row:t.key.col-e.key.col},p=function(t){(0,l.Z)(i,t);var e=(0,h.Z)(i);function i(t){var r;return(0,n.Z)(this,i),(r=e.call(this))._tileInfoView=t,r}return(0,s.Z)(i,[{key:"renderChildren",value:function(t){this.sortChildren(y),this.setStencilReference(t),(0,a.Z)((0,u.Z)(i.prototype),"renderChildren",this).call(this,t)}},{key:"createRenderParams",value:function(t){var e=t.state,r=(0,a.Z)((0,u.Z)(i.prototype),"createRenderParams",this).call(this,t);return r.requiredLevel=this._tileInfoView.getClosestInfoForScale(e.scale).level,r.displayLevel=this._tileInfoView.tileInfo.scaleToZoom(e.scale),r}},{key:"prepareRenderPasses",value:function(t){var e=this,r=(0,a.Z)((0,u.Z)(i.prototype),"prepareRenderPasses",this).call(this,t);return r.push(t.registerRenderPass({name:"stencil",brushes:[f.Z],drawPhase:d.jx.DEBUG|d.jx.MAP|d.jx.HIGHLIGHT|d.jx.LABEL,target:function(){return e.getStencilTarget()}})),(0,o.Z)("esri-tiles-debug")&&r.push(t.registerRenderPass({name:"tileInfo",brushes:[v.Z],drawPhase:d.jx.DEBUG,target:function(){return e.children}})),r}},{key:"getStencilTarget",value:function(){return this.children}},{key:"setStencilReference",value:function(t){var e,i=1,n=(0,r.Z)(this.children);try{for(n.s();!(e=n.n()).done;){e.value.stencilRef=i++}}catch(s){n.e(s)}finally{n.f()}}}]),i}(c.Z)},97890:function(t,e,i){i.d(e,{G:function(){return a}});var r=i(15671),n=i(43144),s=i(66759),a=function(){function t(e,i,n){(0,r.Z)(this,t),this._instanceId=e,this.techniqueRef=i,this._input=n}return(0,n.Z)(t,[{key:"instanceId",get:function(){return(0,s.G)(this._instanceId)}},{key:"createMeshInfo",value:function(t){return{id:(0,s.G)(this._instanceId),techniqueType:this.techniqueRef.type,inputParams:t,optionalAttributes:this._input.optionalAttributes}}},{key:"getInput",value:function(){return this._input}},{key:"setInput",value:function(t){this._input=t}}]),t}()},66759:function(t,e,i){function r(t){return t}function n(t){return t}i.d(e,{G:function(){return r},W:function(){return n}})}}]);
//# sourceMappingURL=24977.e2160de5.chunk.js.map