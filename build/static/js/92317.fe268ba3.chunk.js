(self.webpackChunkreact_training=self.webpackChunkreact_training||[]).push([[92317,69315,7476,50375,42066,69085,8002,50131,40949,69779,8320,54301,68059,92435,17587,52737,66727,93328,17470,52069,66619,50069,44308,71599,2813],{69315:function(e){function t(e){return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}t.keys=function(){return[]},t.resolve=t,t.id=69315,e.exports=t},46634:function(e,t,n){"use strict";n.d(t,{R:function(){return h}});var i=n(15671),r=n(43144),o=n(60136),a=n(29388),s=n(27366),l=n(7138),u=n(42537),c=n(94172),d=n(99346),v=n(49861),p=n(69912),h=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(){var e;return(0,i.Z)(this,n),(e=t.apply(this,arguments)).updating=!1,e._handleId=0,e._scheduleHandleId=0,e._pendingPromises=new Set,e}return(0,r.Z)(n,[{key:"destroy",value:function(){this.removeAll()}},{key:"add",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._installWatch(e,t,n,c.watch)}},{key:"addWhen",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._installWatch(e,t,n,c.when)}},{key:"addOnCollectionChange",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=i.initial,o=void 0!==r&&r,a=i.final,s=void 0!==a&&a,l=++this._handleId;return this.addHandles([(0,c.on)(e,"after-changes",this._createSyncUpdatingCallback(),c.sync),(0,c.on)(e,"change",t,{onListenerAdd:o?function(e){return t({added:e.toArray(),removed:[]})}:void 0,onListenerRemove:s?function(e){return t({added:[],removed:e.toArray()})}:void 0})],l),(0,u.kB)((function(){return n.removeHandles(l)}))}},{key:"addPromise",value:function(e){var t=this;if(null==e)return e;var n=++this._handleId;this.addHandles((0,u.kB)((function(){t._pendingPromises.delete(e)&&(0!==t._pendingPromises.size||t.hasHandles(y)||t._set("updating",!1))})),n),this._pendingPromises.add(e),this._set("updating",!0);var i=function(){return t.removeHandles(n)};return e.then(i,i),e}},{key:"removeAll",value:function(){this._pendingPromises.clear(),this.removeAllHandles(),this._set("updating",!1)}},{key:"_installWatch",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0,o=++this._handleId;i.sync||this._installSyncUpdatingWatch(e,o);var a=r(e,t,i);return this.addHandles(a,o),(0,u.kB)((function(){return n.removeHandles(o)}))}},{key:"_installSyncUpdatingWatch",value:function(e,t){var n=this._createSyncUpdatingCallback(),i=(0,c.watch)(e,n,{sync:!0,equals:function(){return!1}});return this.addHandles(i,t),i}},{key:"_createSyncUpdatingCallback",value:function(){var e=this;return function(){e.removeHandles(y),++e._scheduleHandleId;var t=e._scheduleHandleId;e._get("updating")||e._set("updating",!0),e.addHandles((0,d.Os)((function(){t===e._scheduleHandleId&&(e._set("updating",e._pendingPromises.size>0),e.removeHandles(y))})),y)}}}]),n}(l.default);(0,s._)([(0,v.Cb)({readOnly:!0})],h.prototype,"updating",void 0),h=(0,s._)([(0,p.j)("esri.core.support.UpdatingHandles")],h);var y=-42},57858:function(e,t,n){"use strict";n.d(t,{Q:function(){return u},q:function(){return s}});var i=n(74165),r=n(15861),o=n(19545),a=n(76200);function s(e,t,n){return l.apply(this,arguments)}function l(){return l=(0,r.Z)((0,i.Z)().mark((function e(t,n,r){var s,l,u,c,d,v;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===o.id||void 0===o.id?void 0:o.id.findCredential(t.restUrl)){e.next=3;break}return e.abrupt("return",null);case 3:if("loaded"!==t.loadStatus||""!==n||null===(s=t.user)||void 0===s||!s.sourceJSON||!1!==r){e.next=5;break}return e.abrupt("return",t.user.sourceJSON);case 5:if(l={responseType:"json",query:{f:"json"}},r&&(l.query.returnUserLicenseTypeExtensions=!0),""!==n){e.next=15;break}return e.next=9,(0,a.Z)(t.restUrl+"/community/self",l);case 9:if(!(u=e.sent).data){e.next=14;break}if(null===(c=u.data)||void 0===c||!c.username){e.next=14;break}return e.abrupt("return",c);case 14:case 21:return e.abrupt("return",null);case 15:return e.next=17,(0,a.Z)(t.restUrl+"/community/users/"+n,l);case 17:if(!(d=e.sent).data){e.next=21;break}return v=d.data,e.abrupt("return",v.error?null:v);case 22:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)}function u(e,t,n){return c.apply(this,arguments)}function c(){return c=(0,r.Z)((0,i.Z)().mark((function e(t,n,r){var o,a,l;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(t,n,!0);case 2:return l=e.sent,e.abrupt("return",null!==(o=null===l||void 0===l||null===(a=l.userLicenseTypeExtensions)||void 0===a?void 0:a.includes(r))&&void 0!==o&&o);case 4:case"end":return e.stop()}}),e)}))),c.apply(this,arguments)}},9906:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return I}});var i=n(15671),r=n(43144),o=n(60136),a=n(29388),s=n(27366),l=n(49861),u=(n(93169),n(32718)),c=(n(84936),n(69912)),d=n(33565),v=n(8905),p=(n(80975),n(80532)),h=n(67005),y=n(74165),f=n(15861),_=(n(59166),n(7138)),g=n(80987),k=n(10064),w=n(94172),x=n(46634),m=n(37933),b=n(7575),C=n(57858),E=n(36257),Z=n(41201),N=-2147208940,V=-2147217146,T=-2147220947,S=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(e){var r;return(0,i.Z)(this,n),(r=t.call(this,e))._activeOperationDidSucceed=!1,r._initialValidationsFinished=!1,r._dirtyAreasLayer=null,r._serverVersion=null,r._updatingHandles=new x.R,r._validConstructProperties=!1,r.executionError="",r.extentToValidate="current",r.loadErrors=new g.Z,r}return(0,r.Z)(n,[{key:"initialize",value:function(){var e=this,t=function(){var t=(0,f.Z)((0,y.Z)().mark((function t(){return(0,y.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=e.messages,t.t0){t.next=5;break}return t.next=4,(0,Z.ME)("esri/widgets/UtilityNetworkValidateTopology/t9n/UtilityNetworkValidateTopology");case 4:e.messages=t.sent;case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t().then((function(){e.view||(e.view=null),e.utilityNetwork||(e.utilityNetwork=null),e.addHandles([(0,w.watch)((function(){return[e.view,e.utilityNetwork]}),(0,f.Z)((0,y.Z)().mark((function t(){var n,i,r,o,a,s;return(0,y.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.loadErrors,o=e.messages.info,a=o.noUtilityNetwork,s=o.noView,e._initialValidationsFinished=!1,r.removeAll(),e._validConstructProperties=!0,e._dirtyAreasLayer=null,e._serverVersion=null,"utility"!==(null===(n=e.utilityNetwork)||void 0===n?void 0:n.type)&&(e.loadErrors.push(a),u.Z.getLogger(e).error(new k.Z("utilityNetworkValidateTopology:missing-property",a)),e._validConstructProperties=!1),"2d"!==(null===(i=e.view)||void 0===i?void 0:i.type)&&(e.loadErrors.push(s),u.Z.getLogger(e).error(new k.Z("utilityNetworkValidateTopology:missing-property",s)),e._validConstructProperties=!1),t.t0=e._validConstructProperties,!t.t0){t.next=16;break}if(t.t1=e.utilityNetwork.loaded,t.t1){t.next=14;break}return t.next=14,e.utilityNetwork.load().catch((function(t){u.Z.getLogger(e).error(t),e._validConstructProperties=!1}));case 14:return t.next=16,e._setDirtyAreasLayer();case 16:if(t.t2=e._validConstructProperties,!t.t2){t.next=20;break}return t.next=20,e._validateNetworkExtension();case 20:case"end":return t.stop()}}),t)}))),w.initial),(0,w.on)((function(){var t,n;return null===(t=e.view)||void 0===t||null===(n=t.map)||void 0===n?void 0:n.layers}),"change",(0,f.Z)((0,y.Z)().mark((function t(){var n,i,r;return(0,y.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.loadErrors,i=e.messages.info.noUtilityNetwork,r=n.find((function(e){return e===i})),e._initialValidationsFinished=!1,t.t0=r,t.t0){t.next=9;break}return n.removeAll(),t.next=7,e._validateNetworkExtension();case 7:return t.next=9,e._setDirtyAreasLayer();case 9:e._initialValidationsFinished=!0;case 10:case"end":return t.stop()}}),t)})))),(0,E.qe)(t)])}))}},{key:"destroy",value:function(){this._updatingHandles.destroy()}},{key:"state",get:function(){return this.loadErrors.length||!this._validConstructProperties?"disabled":this.executionError?"failed":this._updatingHandles.updating?"executing":this._activeOperationDidSucceed?"success":this._initialValidationsFinished?"ready":"loading"}},{key:"utilityNetwork",set:function(e){this._get("utilityNetwork")!==e&&this._set("utilityNetwork",e)}},{key:"view",set:function(e){this._get("view")!==e&&this._set("view",e)}},{key:"validateTopology",value:function(){var e=(0,f.Z)((0,y.Z)().mark((function e(){var t,n,i,r,o,a,s=this;return(0,y.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=this.messages.info,i=n.cannotAcquireVersionLock,r=n.noDirtyAreasInExtent,o=this.utilityNetwork,a=this.view,this.loadErrors.length||(this._activeOperationDidSucceed=!1,this._set("executionError",""),this._updatingHandles.addPromise(null===o||void 0===o?void 0:o.validateTopology({validateArea:"current"===this.extentToValidate?a.extent.clone():o.fullExtent.clone(),outSpatialReference:(null===(t=a.spatialReference)||void 0===t?void 0:t.clone())||null}).then((function(){s._activeOperationDidSucceed=!0}),(function(e){var t,n="Error: "+e;if(e instanceof k.Z&&null!==(t=e.details)&&void 0!==t&&t.raw)switch(e.details.raw.extendedCode){case N:n=r;break;case V:case T:n=i;break;default:n=e.details.message}s._set("executionError",n)}))));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_setDirtyAreasLayer",value:function(){var e=(0,f.Z)((0,y.Z)().mark((function e(){var t,n,i,r,o=this;return(0,y.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=this.messages.info.noDirtyAreasLayer,r=null===(t=this.view)||void 0===t?void 0:t.map.allLayers.items.filter((function(e){return(0,m.Te)(e)})).find((function(e){var t,n;return(null===(t=e.parsedUrl)||void 0===t?void 0:t.path)===(null===(n=o.utilityNetwork)||void 0===n?void 0:n.networkSystemLayers.dirtyAreasLayerUrl)})),!r){e.next=9;break}return this._dirtyAreasLayer=r,e.next=5,this._dirtyAreasLayer.load();case 5:this._serverVersion=null!==(n=this._dirtyAreasLayer.version)&&void 0!==n?n:0,this._validConstructProperties=!0,e.next=10;break;case 9:this.loadErrors.push(i),u.Z.getLogger(this).error(new k.Z("utilityNetworkValidateTopology:missing-layer",i)),this._validConstructProperties=!1;case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_validateNetworkExtension",value:function(){var e=(0,f.Z)((0,y.Z)().mark((function e(){var t,n,i,r,o,a,s,l,c,d;return(0,y.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.messages.info,r=i.noAdvancedEditingUserTypeExtension,o=i.noUtilityNetworkServiceUserTypeExtension,e.next=5,(0,m.oP)(this.utilityNetwork.layerUrl);case 5:return a=e.sent,s=new b.Z({url:a}),e.next=9,s.load();case 9:return l=null!==(t=null===(n=s.user)||void 0===n?void 0:n.username)&&void 0!==t?t:"",c=Number(this._serverVersion)<=11.1?"utilityNetwork":"advediting",e.next=12,(0,C.Q)(s,l,c);case 12:if(e.sent){e.next=15;break}d=Number(this._serverVersion)<=11.1?o:r,this.loadErrors.push(d),u.Z.getLogger(this).error(new k.Z("utilityNetworkValidateTopology:no-user-type-extension",d)),this._validConstructProperties=!1;case 15:this._initialValidationsFinished=!0;case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(_.default);(0,s._)([(0,l.Cb)()],S.prototype,"_initialValidationsFinished",void 0),(0,s._)([(0,l.Cb)()],S.prototype,"_dirtyAreasLayer",void 0),(0,s._)([(0,l.Cb)()],S.prototype,"_validConstructProperties",void 0),(0,s._)([(0,l.Cb)({readOnly:!0})],S.prototype,"executionError",void 0),(0,s._)([(0,l.Cb)()],S.prototype,"extentToValidate",void 0),(0,s._)([(0,l.Cb)()],S.prototype,"loadErrors",void 0),(0,s._)([(0,l.Cb)()],S.prototype,"messages",void 0),(0,s._)([(0,l.Cb)({readOnly:!0})],S.prototype,"state",null),(0,s._)([(0,l.Cb)()],S.prototype,"utilityNetwork",null),(0,s._)([(0,l.Cb)()],S.prototype,"view",null);var L=S=(0,s._)([(0,c.j)("esri.widgets.UtilityNetworkValidateTopology.UtilityNetworkValidateTopologyViewModel")],S),A="esri-un-validate-topology",P={container:"".concat(A,"__container"),content:"".concat(A,"__content"),controlsContainer:"".concat(A,"__controls-container"),statusIconError:"".concat(A,"__status-icon-error"),statusIconSuccess:"".concat(A,"__status-icon-success"),statusIconContainer:"".concat(A,"__status-icon-container")},U=function(e){(0,o.Z)(s,e);var t=(0,a.Z)(s);function s(e,n){var r;return(0,i.Z)(this,s),(r=t.call(this,e,n)).messages=null,r.viewModel=new L,r}return(0,r.Z)(s,[{key:"loadDependencies",value:function(){return(0,v.h)({action:function(){return Promise.all([n.e(92358),n.e(46895),n.e(65138),n.e(91741)]).then(n.bind(n,6814))},block:function(){return Promise.all([n.e(92358),n.e(46895),n.e(89219),n.e(63839),n.e(65138),n.e(2654),n.e(23635),n.e(4758)]).then(n.bind(n,4758))},icon:function(){return Promise.all([n.e(92358),n.e(87474)]).then(n.bind(n,87474))},notice:function(){return Promise.all([n.e(92358),n.e(46895),n.e(15669)]).then(n.bind(n,15669))},option:function(){return n.e(19790).then(n.bind(n,19790))},select:function(){return Promise.all([n.e(92358),n.e(54438),n.e(26369)]).then(n.bind(n,26369))},tooltip:function(){return Promise.all([n.e(92358),n.e(89219),n.e(94730)]).then(n.bind(n,94730))}})}},{key:"extentToValidate",get:function(){return this.viewModel.extentToValidate},set:function(e){this.viewModel.extentToValidate=e}},{key:"icon",get:function(){return"check-circle"},set:function(e){this._overrideIfSome("icon",e)}},{key:"label",get:function(){var e,t;return null!==(e=null===(t=this.messages)||void 0===t?void 0:t.label)&&void 0!==e?e:""},set:function(e){this._overrideIfSome("label",e)}},{key:"utilityNetwork",get:function(){return this.viewModel.utilityNetwork},set:function(e){this.viewModel.utilityNetwork=e}},{key:"view",get:function(){return this.viewModel.view},set:function(e){this.viewModel.view=e}},{key:"render",value:function(){return"disabled"===this.viewModel.state?(0,h.u)("div",{class:P.container},(0,h.u)("calcite-block",{class:P.content,collapsible:!1,heading:this.label,open:!0},this._renderLoadErrorStatusIcon(),this._renderLoadErrorsNotices())):(0,h.u)("div",{class:P.container},(0,h.u)("calcite-block",{class:P.content,collapsible:!0,heading:this.label,open:!1},this._renderStatusIcon(),this._renderValidateTopologyAction(),this._renderControls()))}},{key:"_extentOptionSelectChange",value:function(e){this.extentToValidate=e.target.value}},{key:"_getLoadErrorMessagesAsNotices",value:function(e,t){return(0,h.u)("calcite-notice",{closable:!1,key:"error-notice-"+t,kind:"warning",open:!0,scale:"s"},(0,h.u)("div",{slot:"message"},e))}},{key:"_handleValidateTopologyAction",value:function(){this.viewModel.validateTopology().catch((function(){}))}},{key:"_renderControls",value:function(){return"failed"===this.viewModel.state?(0,h.u)("div",{class:P.controlsContainer},this._renderExtentOptionSelect(),this._renderStatusNotice()):this._renderExtentOptionSelect()}},{key:"_renderExtentOptionSelect",value:function(){var e=this.messages,t=this.viewModel;return(0,h.u)("div",{key:"selectExtentDiv"},(0,h.u)("calcite-select",{bind:this,disabled:"loading"===t.state||"executing"===t.state,label:e.input.extentToValidate,onCalciteSelectChange:this._extentOptionSelectChange},(0,h.u)("calcite-option",{value:"current"},e.input.currentExtent),(0,h.u)("calcite-option",{value:"entire"},e.input.entireExtent)))}},{key:"_renderLoadErrorsNotices",value:function(){var e=this.viewModel;return(0,h.u)("div",{class:P.controlsContainer,key:"loadErrorsDiv"},e.loadErrors.items.map(this._getLoadErrorMessagesAsNotices))}},{key:"_renderLoadErrorStatusIcon",value:function(){return(0,h.u)("div",{class:P.statusIconContainer,key:"statusDiv",slot:"control"},(0,h.u)("calcite-icon",{class:P.statusIconError,icon:"exclamation-mark-triangle",scale:"s"}))}},{key:"_renderStatusIcon",value:function(){var e=this.messages,t=this.viewModel,n="".concat(this.id,"-validation-status-action"),i="".concat(this.id,"-error-status-icon"),r="".concat(this.id,"-success-status-icon");return"executing"===t.state?(0,h.u)("div",{key:"statusDivExecuting",slot:"control"},(0,h.u)("calcite-action",{id:n,loading:!0,text:e.status.executing}),(0,h.u)("calcite-tooltip",{referenceElement:n},(0,h.u)("span",null,e.status.executing))):"success"===t.state?(0,h.u)("div",{afterCreate:function(e){setTimeout((function(){e.innerHTML=""}),3500)},class:P.statusIconContainer,key:"statusDivSuccess",slot:"control"},(0,h.u)("calcite-icon",{class:P.statusIconSuccess,icon:"check-circle",id:r,scale:"s"}),(0,h.u)("calcite-tooltip",{referenceElement:r},(0,h.u)("span",null,e.status.success))):"failed"===t.state?(0,h.u)("div",{class:P.statusIconContainer,key:"statusDivFailed",slot:"control"},(0,h.u)("calcite-icon",{class:P.statusIconError,icon:"exclamation-mark-triangle",id:i,scale:"s"}),(0,h.u)("calcite-tooltip",{referenceElement:i},(0,h.u)("span",null,t.executionError))):(0,h.u)("div",{class:P.statusIconContainer,key:"statusDiv",slot:"control"})}},{key:"_renderStatusNotice",value:function(){var e=this.viewModel;return(0,h.u)("div",{key:"executionErrorDiv"},(0,h.u)("calcite-notice",{closable:!0,kind:"warning",open:!0,scale:"s"},(0,h.u)("div",{slot:"message"},e.executionError)))}},{key:"_renderValidateTopologyAction",value:function(){var e=this.messages,t=this.viewModel,n="".concat(this.id,"-validation-action");return(0,h.u)("div",{key:"actionDiv",slot:"control"},(0,h.u)("calcite-action",{bind:this,disabled:"executing"===t.state,icon:"play-f",id:n,loading:"loading"===t.state,onclick:this._handleValidateTopologyAction,text:e.input.validateTopology}),(0,h.u)("calcite-tooltip",{referenceElement:n},(0,h.u)("span",null,"loading"===t.state?e.status.loading:e.input.validateTopology)))}}]),s}(d.Z);(0,s._)([(0,l.Cb)()],U.prototype,"extentToValidate",null),(0,s._)([(0,l.Cb)()],U.prototype,"icon",null),(0,s._)([(0,l.Cb)()],U.prototype,"label",null),(0,s._)([(0,l.Cb)(),(0,p.H)("esri/widgets/UtilityNetworkValidateTopology/t9n/UtilityNetworkValidateTopology")],U.prototype,"messages",void 0),(0,s._)([(0,l.Cb)()],U.prototype,"utilityNetwork",null),(0,s._)([(0,l.Cb)()],U.prototype,"view",null),(0,s._)([(0,l.Cb)({type:L})],U.prototype,"viewModel",void 0);var I=U=(0,s._)([(0,c.j)("esri.widgets.UtilityNetworkValidateTopology")],U)}}]);
//# sourceMappingURL=92317.fe268ba3.chunk.js.map