"use strict";(self.webpackChunkreact_training=self.webpackChunkreact_training||[]).push([[24390],{24390:function(t,e,i){i.d(e,{$:function(){return Xe},A:function(){return de},B:function(){return pe},C:function(){return zt},D:function(){return ge},E:function(){return Ee},F:function(){return ee},G:function(){return Ye},H:function(){return G},I:function(){return U},J:function(){return Jt},K:function(){return E},L:function(){return ii},M:function(){return et},N:function(){return ie},O:function(){return st},P:function(){return p},Q:function(){return z},R:function(){return Ue},S:function(){return je},T:function(){return ni},U:function(){return x},V:function(){return O},W:function(){return Pt},X:function(){return Y},Y:function(){return T},Z:function(){return S},_:function(){return X},a:function(){return y},a0:function(){return w},a1:function(){return At},a2:function(){return kt},a3:function(){return Mt},a4:function(){return Ct},a5:function(){return Ot},a6:function(){return jt},a7:function(){return Tt},a8:function(){return St},a9:function(){return Et},aA:function(){return yt},aB:function(){return lt},aC:function(){return ut},aD:function(){return De},aE:function(){return nt},aF:function(){return Dt},aG:function(){return _t},aH:function(){return Vt},aI:function(){return Pe},aJ:function(){return le},aK:function(){return L},aL:function(){return Ze},aM:function(){return ct},aN:function(){return Bt},aO:function(){return bt},aP:function(){return ue},aQ:function(){return Ft},aa:function(){return b},ab:function(){return xt},ac:function(){return $},ad:function(){return tt},ae:function(){return Q},af:function(){return at},ag:function(){return j},ah:function(){return dt},ai:function(){return it},aj:function(){return ht},ak:function(){return pt},al:function(){return H},am:function(){return N},an:function(){return I},ao:function(){return Ne},ap:function(){return A},aq:function(){return wt},ar:function(){return Zt},as:function(){return vt},at:function(){return q},au:function(){return gt},av:function(){return oe},aw:function(){return Gt},ax:function(){return Ge},ay:function(){return ze},az:function(){return we},b:function(){return g},c:function(){return _e},d:function(){return Ut},e:function(){return We},f:function(){return he},g:function(){return ti},h:function(){return rt},i:function(){return C},j:function(){return f},k:function(){return Z},l:function(){return mt},m:function(){return Rt},n:function(){return ft},o:function(){return me},p:function(){return _},q:function(){return m},r:function(){return B},s:function(){return $e},t:function(){return ne},u:function(){return Be},v:function(){return Fe},w:function(){return ei},x:function(){return ae},y:function(){return ve},z:function(){return ce}});var n=i(82963),r=i(88301),s=i(61120),a=i(74165),o=i(93433),l=i(97326),u=i(60136),h=i(29388),c=i(15671),d=i(43144),v=i(27366),p=function(){function t(e){(0,c.Z)(this,t),Object.defineProperty(this,"_value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._value=e}return(0,d.Z)(t,[{key:"value",get:function(){return this._value/100}},{key:"percent",get:function(){return this._value}},{key:"toString",value:function(){return this._value+"%"}},{key:"interpolate",value:function(t,e){return t+this.value*(e-t)}}],[{key:"normalize",value:function(e,i,n){return e instanceof t?e:new t(i===n?0:100*Math.min(Math.max(1/(n-i)*(e-i),0),1))}}]),t}();function f(t){return new p(t)}var g=f(0),y=f(100),_=f(50);function m(t){return Number(t)!==t}function b(t){if(null!=t&&!Z(t)){var e=Number(t);return m(e)&&x(t)&&""!=t?b(t.replace(/[^0-9.\-]+/g,"")):e}return t}function k(t){if(D(t))return new Date(t);if(Z(t))return new Date(t);var e=Number(t);return Z(e)?new Date(e):new Date(t)}function w(t){if(m(t))return"NaN";if(t===1/0)return"Infinity";if(t===-1/0)return"-Infinity";if(0===t&&1/t==-1/0)return"-0";var e=t<0;t=Math.abs(t);var i,n=/^([0-9]+)(?:\.([0-9]+))?(?:e[\+\-]([0-9]+))?$/.exec(""+t),r=n[1],s=n[2]||"";if(void 0===n[3])i=""===s?r:r+"."+s;else{var a=+n[3];if(t<1)i="0."+P("0",a-1)+r+s;else{var o=a-s.length;i=0===o?r+s:o<0?r+s.slice(0,o)+"."+s.slice(o):r+s+P("0",o)}}return e?"-"+i:i}function P(t,e){return new Array(e+1).join(t)}function D(t){return"[object Date]"===function(t){return{}.toString.call(t)}(t)}function x(t){return"string"==typeof t}function Z(t){return"number"==typeof t&&Number(t)==t}function O(t){return"object"==typeof t&&null!==t}var T="__\xa7\xa7\xa7__",S="__\xa7\xa7\xa7\xa7__";function j(t,e){for(var i=t.length,n=0;n<i;++n)if(t[n]===e)return n;return-1}function E(t,e){for(var i=t.length,n=new Array(i),r=0;r<i;++r)n[r]=e(t[r],r);return n}function C(t,e){for(var i=t.length,n=0;n<i;++n)e(t[n],n)}function M(t,e){for(var i=t.length;i>0;)e(t[--i],i)}function A(t,e){for(var i=t.length,n=0;n<i&&e(t[n],n);++n);}function B(t,e){for(var i=!1,n=0;;){if(-1===(n=t.indexOf(e,n)))return i;i=!0,t.splice(n,1)}}function H(t,e){var i=t.indexOf(e);return-1!==i&&(t.splice(i,1),!0)}function L(t,e,i){var n=j(t,e);-1!==n&&F(t,n),t.push(e)}function I(t,e){-1===t.indexOf(e)&&t.push(e)}function N(t){for(var e=t.length,i=new Array(e),n=0;n<e;++n)i[n]=t[n];return i}function R(t,e,i){t.splice(e,0,i)}function F(t,e){t.splice(e,1)}function W(t,e){for(var i=t.length,n=0;n<i;++n)if(e(t[n],n))return n;return-1}function U(t,e){var i=W(t,e);if(-1!==i)return t[i]}function V(t,e){for(var i=0,n=t.length,r=!1;i<n;){var s=i+n>>1,a=e(t[s]);a<0?i=s+1:0===a?(r=!0,i=s+1):n=s}return{found:r,index:r?i-1:i}}function K(t,e){for(var i=0,n=t.length,r=!1;i<n;){var s=i+n>>1,a=e(t[s]);a<0?i=s+1:0===a?(r=!0,n=s):n=s}return{found:r,index:i}}function z(t,e){for(var i=t.length;i>0;)e(t[--i])||t.splice(i,1)}function G(t){return Object.keys(t)}function Y(t){return Object.assign({},t)}function X(t,e){G(t).forEach((function(i){e(i,t[i])}))}function $(t,e){for(var i in t)if(J(t,i)&&!e(i,t[i]))break}function J(t,e){return{}.hasOwnProperty.call(t,e)}var q=function(){function t(){(0,c.Z)(this,t),Object.defineProperty(this,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._disposed=!1}return(0,d.Z)(t,[{key:"isDisposed",value:function(){return this._disposed}},{key:"dispose",value:function(){this._disposed||(this._disposed=!0,this._dispose())}}]),t}(),Q=function(){function t(e){(0,c.Z)(this,t),Object.defineProperty(this,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_dispose",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._disposed=!1,this._dispose=e}return(0,d.Z)(t,[{key:"isDisposed",value:function(){return this._disposed}},{key:"dispose",value:function(){this._disposed||(this._disposed=!0,this._dispose())}}]),t}(),tt=function(t){(0,u.Z)(i,t);var e=(0,h.Z)(i);function i(){var t;return(0,c.Z)(this,i),t=e.apply(this,arguments),Object.defineProperty((0,l.Z)(t),"_disposers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),t}return(0,d.Z)(i,[{key:"_dispose",value:function(){C(this._disposers,(function(t){t.dispose()}))}}]),i}(q),et=function(t){(0,u.Z)(i,t);var e=(0,h.Z)(i);function i(t){var n;return(0,c.Z)(this,i),n=e.call(this),Object.defineProperty((0,l.Z)(n),"_disposers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),n._disposers=t,n}return(0,d.Z)(i,[{key:"_dispose",value:function(){C(this._disposers,(function(t){t.dispose()}))}},{key:"disposers",get:function(){return this._disposers}}]),i}(q),it=function(t){(0,u.Z)(i,t);var e=(0,h.Z)(i);function i(){var t;return(0,c.Z)(this,i),t=e.apply(this,arguments),Object.defineProperty((0,l.Z)(t),"_counter",{enumerable:!0,configurable:!0,writable:!0,value:0}),t}return(0,d.Z)(i,[{key:"increment",value:function(){var t=this;return++this._counter,new Q((function(){--t._counter,0===t._counter&&t.dispose()}))}}]),i}(Q);function nt(t){t.parentNode&&t.parentNode.removeChild(t)}function rt(t,e,i,n){return t.addEventListener(e,i,n||!1),new Q((function(){t.removeEventListener(e,i,n||!1)}))}function st(t){return rt(window,"resize",(function(e){t()}))}function at(t){switch(t){case"touchevents":return window.hasOwnProperty("TouchEvent");case"pointerevents":return window.hasOwnProperty("PointerEvent");case"mouseevents":return window.hasOwnProperty("MouseEvent");case"wheelevents":return window.hasOwnProperty("WheelEvent");case"keyboardevents":return window.hasOwnProperty("KeyboardEvent")}return!1}function ot(t){return t.pointerId||0}function lt(){if(document.activeElement&&document.activeElement!=document.body)if(document.activeElement.blur)document.activeElement.blur();else{var t=document.createElement("button");t.style.position="fixed",t.style.top="0px",t.style.left="-10000px",document.body.appendChild(t),t.focus(),t.blur(),document.body.removeChild(t)}}function ut(t){t&&t.focus()}function ht(t){if(at("pointerevents"))return t;if(at("touchevents"))switch(t){case"pointerover":case"pointerdown":return"touchstart";case"pointerout":case"pointerleave":case"pointerup":return"touchend";case"pointermove":return"touchmove";case"click":return"click";case"dblclick":return"dblclick"}else if(at("mouseevents"))switch(t){case"pointerover":return"mouseover";case"pointerout":return"mouseout";case"pointerleave":return"mouseleave";case"pointerdown":return"mousedown";case"pointermove":return"mousemove";case"pointerup":return"mouseup";case"click":return"click";case"dblclick":return"dblclick"}return t}function ct(t){if("undefined"!=typeof Touch&&t instanceof Touch)return!0;if("undefined"!=typeof PointerEvent&&t instanceof PointerEvent&&null!=t.pointerType)switch(t.pointerType){case"touch":case"pen":case 2:return!0;case"mouse":case 4:return!1;default:return!(t instanceof MouseEvent)}else if(null!=t.type&&t.type.match(/^mouse/))return!1;return!0}function dt(t,e,i){t.style[e]=i}function vt(t,e){return t.style[e]}function pt(t){if(t.composedPath){var e=t.composedPath();return 0===e.length?null:e[0]}return t.target}function ft(t,e){return t.target&&function(t,e){for(var i=e;;){if(t===i)return!0;if(null===i.parentNode){if(null==i.host)return!1;i=i.host}else i=i.parentNode}}(e.root.dom,t.target)}function gt(t,e){t.style.pointerEvents=e?"auto":"none"}function yt(t){if(void 0!==t.key)return t.key;switch(t.keyCode){case 9:return"Tab";case 13:return"Enter";case 16:return"Shift";case 17:return"Control";case 27:return"Escape";case 32:return" ";case 37:return"ArrowLeft";case 38:return"ArrowUp";case 39:return"ArrowRight";case 40:return"ArrowDown";case 46:return"Delete"}return""+t.keyCode}function _t(){return/apple/i.test(navigator.vendor)&&"ontouchend"in document?1:void 0}function mt(t,e){return Z(t)?t:null!=t&&Z(t.value)&&Z(e)?e*t.value:0}function bt(t){var e=(""+t).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return e?Math.max(0,(e[1]?e[1].length:0)-(e[2]?+e[2]:0)):0}function kt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"0";return"string"!=typeof t&&(t=t.toString()),e>t.length?Array(e-t.length+1).join(i)+t:t}function wt(t){return function(t){return t.replace(/^[\s]*/,"")}(function(t){return t.replace(/[\s]*$/,"")}(t))}function Pt(t){return t.replace(/\/(date|number|duration)$/i,"")}function Dt(t){return t?t.replace(/<[^>]*>/g,""):t}function xt(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}function Zt(t){var e=/[\u0590-\u05FF\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]/,i=/([^\u0627\u0623\u062f\u0630\u0631\u0632\u0648]*[\u0627\u0623\u062f\u0630\u0631\u0632\u0648])/gi,n=t.split(/(\s+)/),r=[];return n.forEach((function(t){if(t.match(/^\s+$/))(t=" ")&&(t="  "),r.push(t);else if(e.test(t)){var n=t.split(i).filter((function(t){return""!==t}));r=r.concat(n)}else r=r.concat((0,o.Z)(t))})),r}function Ot(t){var e=new Date(t.getFullYear(),0,0),i=t.getTime()-e.getTime()+60*(e.getTimezoneOffset()-t.getTimezoneOffset())*1e3,n=864e5;return Math.floor(i/n)}function Tt(t){var e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate())),i=e.getUTCDay()||7;e.setUTCDate(e.getUTCDate()+4-i);var n=new Date(Date.UTC(e.getUTCFullYear(),0,1));return Math.ceil(((e.getTime()-n.getTime())/864e5+1)/7)}function St(t){var e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate())),i=e.getUTCDay()||7;return e.setUTCDate(e.getUTCDate()+4-i),new Date(Date.UTC(e.getUTCFullYear(),0,1)).getFullYear()}function jt(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=Tt(new Date(t.getFullYear(),t.getMonth(),1),e),n=Tt(t,e);return 1==n&&(n=53),n-i+1}function Et(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=new Date(e,0,4,0,0,0,0);return n&&r.setUTCFullYear(e),7*t+i-((r.getDay()||7)+3)}function Ct(t,e){return t>12?t-=12:0===t&&(t=12),null!=e?t+(e-1):t}function Mt(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4?arguments[4]:void 0;if(n)return e?"Coordinated Universal Time":"UTC";if(r){var s=t.toLocaleString("en-US",{timeZone:r});return wt(t.toLocaleString("en-US",{timeZone:r,timeZoneName:e?"long":"short"}).substr(s.length))}var a=t.toLocaleString("UTC"),o=t.toLocaleString("UTC",{timeZoneName:e?"long":"short"}).substr(a.length);return!1===i&&(o=o.replace(/ (standard|daylight|summer|winter) /i," ")),wt(o)}function At(t){var e=new Date(Date.UTC(2012,0,1,0,0,0,0)),i=new Date(e.toLocaleString("en-US",{timeZone:"UTC"}));return(new Date(e.toLocaleString("en-US",{timeZone:t})).getTime()-i.getTime())/6e4*-1}function Bt(t){return t.charAt(0).toUpperCase()+t.slice(1)}function Ht(t){var e,i,n,r=t.h,s=t.s,a=t.l;if(0==s)e=i=n=a;else{var o=function(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t},l=a<.5?a*(1+s):a+s-a*s,u=2*a-l;e=o(u,l,r+1/3),i=o(u,l,r),n=o(u,l,r-1/3)}return{r:Math.round(255*e),g:Math.round(255*i),b:Math.round(255*n)}}function Lt(t){var e=t.r/255,i=t.g/255,n=t.b/255,r=Math.max(e,i,n),s=Math.min(e,i,n),a=0,o=0,l=(r+s)/2;if(r===s)a=o=0;else{var u=r-s;switch(o=l>.5?u/(2-r-s):u/(r+s),r){case e:a=(i-n)/u+(i<n?6:0);break;case i:a=(n-e)/u+2;break;case n:a=(e-i)/u+4}a/=6}return{h:a,s:o,l:l}}function It(t,e){var i=e>0?255-t:t;return Math.round(i*e)}function Nt(t){return(299*t.r+587*t.g+114*t.b)/1e3>=128}function Rt(t,e){return t||(t=[]),[].concat((0,o.Z)(t),(0,o.Z)(e)).filter((function(t,e,i){return i.indexOf(t)===e}))}function Ft(t,e){return!!e&&t.left==e.left&&t.right==e.right&&t.top==e.top&&t.bottom==e.bottom}function Wt(t){return"#"===t[0]&&(t=t.substr(1)),3==t.length&&(t=t[0].repeat(2)+t[1].repeat(2)+t[2].repeat(2)),parseInt(t,16)}function Ut(t){return zt.fromAny(t)}var Vt,Kt,zt=function(){function t(e){(0,c.Z)(this,t),Object.defineProperty(this,"_hex",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._hex=0|e}return(0,d.Z)(t,[{key:"hex",get:function(){return this._hex}},{key:"r",get:function(){return this._hex>>>16}},{key:"g",get:function(){return this._hex>>8&255}},{key:"b",get:function(){return 255&this._hex}},{key:"toCSS",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return"rgba("+this.r+", "+this.g+", "+this.b+", "+t+")"}},{key:"toCSSHex",value:function(){return"#"+kt(this.r.toString(16),2)+kt(this.g.toString(16),2)+kt(this.b.toString(16),2)}},{key:"toHSL",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return Lt({r:this.r,g:this.g,b:this.b,a:t})}},{key:"toString",value:function(){return this.toCSSHex()}}],[{key:"fromHSL",value:function(t,e,i){var n=Ht({h:t,s:e,l:i});return this.fromRGB(n.r,n.g,n.b)}},{key:"fromHex",value:function(e){return new t(e)}},{key:"fromRGB",value:function(e,i,n){return new t((0|n)+(i<<8)+(e<<16))}},{key:"fromString",value:function(e){return new t(Wt(e))}},{key:"fromCSS",value:function(e){return new t(function(t){var e=(t=t.replace(/[ ]/g,"")).match(/^rgb\(([0-9]*),([0-9]*),([0-9]*)\)/i);if(e)e.push("1");else if(!(e=t.match(/^rgba\(([0-9]*),([0-9]*),([0-9]*),([.0-9]*)\)/i)))return 0;for(var i="",n=1;n<=3;n++){var r=parseInt(e[n]).toString(16);1==r.length&&(r="0"+r),i+=r}return Wt(i)}(e))}},{key:"fromAny",value:function(e){if(x(e)){if("#"==e[0])return t.fromString(e);if("rgb"==e.substr(0,3))return t.fromCSS(e)}else{if(Z(e))return t.fromHex(e);if(e instanceof t)return t.fromHex(e.hex)}throw new Error("Unknown color syntax: "+e)}},{key:"alternative",value:function(t,e,i){var n=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{r:255,g:255,b:255},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{r:255,g:255,b:255},n=e,r=i;return Nt(i)&&(n=i,r=e),Nt(t)?r:n}({r:t.r,g:t.g,b:t.b},e?{r:e.r,g:e.g,b:e.b}:void 0,i?{r:i.r,g:i.g,b:i.b}:void 0);return this.fromRGB(n.r,n.g,n.b)}},{key:"interpolate",value:function(e,i,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"rgb";if("hsl"==r){var s=i.toHSL(),a=n.toHSL();return t.fromHSL(Xt(e,s.h,a.h),Xt(e,s.s,a.s),Xt(e,s.l,a.l))}return t.fromRGB(Xt(e,i.r,n.r),Xt(e,i.g,n.g),Xt(e,i.b,n.b))}},{key:"lighten",value:function(e,i){var n=function(t,e){return t?{r:Math.max(0,Math.min(255,t.r+It(t.r,e))),g:Math.max(0,Math.min(255,t.g+It(t.g,e))),b:Math.max(0,Math.min(255,t.b+It(t.b,e))),a:t.a}:t}({r:e.r,g:e.g,b:e.b},i);return t.fromRGB(n.r,n.g,n.b)}},{key:"brighten",value:function(e,i){var n=function(t,e){if(t){var i=It(Math.min(Math.max(t.r,t.g,t.b),230),e);return{r:Math.max(0,Math.min(255,Math.round(t.r+i))),g:Math.max(0,Math.min(255,Math.round(t.g+i))),b:Math.max(0,Math.min(255,Math.round(t.b+i))),a:t.a}}return t}({r:e.r,g:e.g,b:e.b},i);return t.fromRGB(n.r,n.g,n.b)}},{key:"saturate",value:function(e,i){var n=function(t,e){if(void 0===t||1==e)return t;var i=Lt(t);return i.s=e,Ht(i)}({r:e.r,g:e.g,b:e.b},i);return t.fromRGB(n.r,n.g,n.b)}}]),t}(),Gt=function(){function t(){(0,c.Z)(this,t),Object.defineProperty(this,"_listeners",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_killed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_disabled",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_iterating",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_enabled",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._listeners=[],this._killed=[],this._disabled={},this._iterating=0,this._enabled=!0,this._disposed=!1}return(0,d.Z)(t,[{key:"isDisposed",value:function(){return this._disposed}},{key:"dispose",value:function(){if(!this._disposed){this._disposed=!0;var t=this._listeners;this._iterating=1,this._listeners=null,this._disabled=null;try{C(t,(function(t){t.disposer.dispose()}))}finally{this._killed=null,this._iterating=null}}}},{key:"hasListeners",value:function(){return 0!==this._listeners.length}},{key:"hasListenersByType",value:function(t){return function(t,e){for(var i=t.length,n=0;n<i;++n)if(e(t[n]))return!0;return!1}(this._listeners,(function(e){return(null===e.type||e.type===t)&&!e.killed}))}},{key:"enable",value:function(){this._enabled=!0}},{key:"disable",value:function(){this._enabled=!1}},{key:"enableType",value:function(t){delete this._disabled[t]}},{key:"disableType",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0;this._disabled[t]=e}},{key:"_removeListener",value:function(t){if(0===this._iterating){var e=this._listeners.indexOf(t);if(-1===e)throw new Error("Invalid state: could not remove listener");this._listeners.splice(e,1)}else this._killed.push(t)}},{key:"_removeExistingListener",value:function(t,e,i,n){if(this._disposed)throw new Error("EventDispatcher is disposed");this._eachListener((function(r){r.once!==t||r.type!==e||void 0!==i&&r.callback!==i||r.context!==n||r.disposer.dispose()}))}},{key:"isEnabled",value:function(t){if(this._disposed)throw new Error("EventDispatcher is disposed");return this._enabled&&this._listeners.length>0&&this.hasListenersByType(t)&&void 0===this._disabled[t]}},{key:"removeType",value:function(t){if(this._disposed)throw new Error("EventDispatcher is disposed");this._eachListener((function(e){e.type===t&&e.disposer.dispose()}))}},{key:"has",value:function(t,e,i){return-1!==W(this._listeners,(function(n){return!0!==n.once&&n.type===t&&(void 0===e||n.callback===e)&&n.context===i}))}},{key:"_shouldDispatch",value:function(t){if(this._disposed)throw new Error("EventDispatcher is disposed");var e=this._disabled[t];return Z(e)?(e<=1?delete this._disabled[t]:--this._disabled[t],!1):this._enabled}},{key:"_eachListener",value:function(t){var e=this;++this._iterating;try{C(this._listeners,t)}finally{--this._iterating,0===this._iterating&&0!==this._killed.length&&(C(this._killed,(function(t){e._removeListener(t)})),this._killed.length=0)}}},{key:"dispatch",value:function(t,e){this._shouldDispatch(t)&&this._eachListener((function(i){i.killed||null!==i.type&&i.type!==t||i.dispatch(t,e)}))}},{key:"_on",value:function(t,e,i,n,r,s){var a=this;if(this._disposed)throw new Error("EventDispatcher is disposed");this._removeExistingListener(t,e,i,n);var o={type:e,callback:i,context:n,shouldClone:r,dispatch:s,killed:!1,once:t,disposer:new Q((function(){o.killed=!0,a._removeListener(o)}))};return this._listeners.push(o),o}},{key:"onAll",value:function(t,e){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this._on(!1,null,t,e,i,(function(i,n){return t.call(e,n)})).disposer}},{key:"on",value:function(t,e,i){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return this._on(!1,t,e,i,n,(function(t,n){return e.call(i,n)})).disposer}},{key:"once",value:function(t,e,i){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=this._on(!0,t,e,i,n,(function(t,n){r.disposer.dispose(),e.call(i,n)}));return r.disposer}},{key:"off",value:function(t,e,i){this._removeExistingListener(!1,t,e,i)}},{key:"copyFrom",value:function(t){var e=this;if(this._disposed)throw new Error("EventDispatcher is disposed");if(t===this)throw new Error("Cannot copyFrom the same TargetedEventDispatcher");var i=[];return C(t._listeners,(function(t){!t.killed&&t.shouldClone&&(null===t.type?i.push(e.onAll(t.callback,t.context)):t.once?i.push(e.once(t.type,t.callback,t.context)):i.push(e.on(t.type,t.callback,t.context)))})),new et(i)}}]),t}();function Yt(t){return(0,v.b)(this,void 0,void 0,(0,a.Z)().mark((function e(){var i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t){e.next=5;break}return i=[],X(t,(function(t,e){i.push(e.waitForStop())})),e.next=5,Promise.all(i);case 5:case"end":return e.stop()}}),e)})))}function Xt(t,e,i){return e+t*(i-e)}function $t(t,e,i){return t>=1?i:e}function Jt(t,e,i){return new p(Xt(t,e.percent,i.percent))}function qt(t,e,i){return zt.interpolate(t,e,i)}function Qt(t,e){return"number"==typeof t&&"number"==typeof e?Xt:t instanceof p&&e instanceof p?Jt:t instanceof zt&&e instanceof zt?qt:$t}function te(t,e){if(!(t>=0&&t<e))throw new Error("Index out of bounds: "+t)}(Kt=Vt||(Vt={}))[Kt.Stopped=0]="Stopped",Kt[Kt.Playing=1]="Playing",Kt[Kt.Paused=2]="Paused";var ee=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];(0,c.Z)(this,e),Object.defineProperty(this,"_values",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:new Gt}),this._values=t}return(0,d.Z)(e,[{key:"values",get:function(){return this._values}},{key:"contains",value:function(t){return-1!==this._values.indexOf(t)}},{key:"removeValue",value:function(t){for(var e=0,i=this._values.length;e<i;)this._values[e]===t?(this.removeIndex(e),--i):++e}},{key:"indexOf",value:function(t){return j(this._values,t)}},{key:"length",get:function(){return this._values.length}},{key:"hasIndex",value:function(t){return t>=0&&t<this._values.length}},{key:"getIndex",value:function(t){return this._values[t]}},{key:"_onPush",value:function(t){this.events.isEnabled("push")&&this.events.dispatch("push",{type:"push",target:this,newValue:t})}},{key:"_onInsertIndex",value:function(t,e){this.events.isEnabled("insertIndex")&&this.events.dispatch("insertIndex",{type:"insertIndex",target:this,index:t,newValue:e})}},{key:"_onSetIndex",value:function(t,e,i){this.events.isEnabled("setIndex")&&this.events.dispatch("setIndex",{type:"setIndex",target:this,index:t,oldValue:e,newValue:i})}},{key:"_onRemoveIndex",value:function(t,e){this.events.isEnabled("removeIndex")&&this.events.dispatch("removeIndex",{type:"removeIndex",target:this,index:t,oldValue:e})}},{key:"_onMoveIndex",value:function(t,e,i){this.events.isEnabled("moveIndex")&&this.events.dispatch("moveIndex",{type:"moveIndex",target:this,oldIndex:t,newIndex:e,value:i})}},{key:"_onClear",value:function(t){this.events.isEnabled("clear")&&this.events.dispatch("clear",{type:"clear",target:this,oldValues:t})}},{key:"setIndex",value:function(t,e){te(t,this._values.length);var i=this._values[t];return i!==e&&(this._values[t]=e,this._onSetIndex(t,i,e)),i}},{key:"insertIndex",value:function(t,e){return te(t,this._values.length+1),R(this._values,t,e),this._onInsertIndex(t,e),e}},{key:"swap",value:function(t,e){var i=this._values.length;if(te(t,i),te(e,i),t!==e){var n=this._values[t],r=this._values[e];this._values[t]=r,this._onSetIndex(t,n,r),this._values[e]=n,this._onSetIndex(e,r,n)}}},{key:"removeIndex",value:function(t){te(t,this._values.length);var e=this._values[t];return F(this._values,t),this._onRemoveIndex(t,e),e}},{key:"moveValue",value:function(t,e){var i=this.indexOf(t);if(-1!==i)if(F(this._values,i),null==e){var n=this._values.length;this._values.push(t),this._onMoveIndex(i,n,t)}else R(this._values,e,t),this._onMoveIndex(i,e,t);else null==e?(this._values.push(t),this._onPush(t)):(R(this._values,e,t),this._onInsertIndex(e,t));return t}},{key:"push",value:function(t){return this._values.push(t),this._onPush(t),t}},{key:"unshift",value:function(t){return this.insertIndex(0,t),t}},{key:"pushAll",value:function(t){var e=this;C(t,(function(t){e.push(t)}))}},{key:"copyFrom",value:function(t){this.pushAll(t._values)}},{key:"pop",value:function(){return this._values.length-1<0?void 0:this.removeIndex(this._values.length-1)}},{key:"shift",value:function(){return this._values.length?this.removeIndex(0):void 0}},{key:"setAll",value:function(t){var e=this,i=this._values;this._values=[],this._onClear(i),C(t,(function(t){e._values.push(t),e._onPush(t)}))}},{key:"clear",value:function(){this.setAll([])}},{key:t,value:(0,a.Z)().mark((function t(){var e,i;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=this._values.length,i=0;case 2:if(!(i<e)){t.next=8;break}return t.next=5,this._values[i];case 5:++i,t.next=2;break;case 8:case"end":return t.stop()}}),t,this)}))},{key:"each",value:function(t){C(this._values,t)}},{key:"eachReverse",value:function(t){M(this._values,t)}}]),e}(Symbol.iterator),ie=function(t){(0,u.Z)(i,t);var e=(0,h.Z)(i);function i(){var t;return(0,c.Z)(this,i),t=e.apply(this,arguments),Object.defineProperty((0,l.Z)(t),"autoDispose",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty((0,l.Z)(t),"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),t}return(0,d.Z)(i,[{key:"_onSetIndex",value:function(t,e,n){this.autoDispose&&e.dispose(),(0,r.Z)((0,s.Z)(i.prototype),"_onSetIndex",this).call(this,t,e,n)}},{key:"_onRemoveIndex",value:function(t,e){this.autoDispose&&e.dispose(),(0,r.Z)((0,s.Z)(i.prototype),"_onRemoveIndex",this).call(this,t,e)}},{key:"_onClear",value:function(t){this.autoDispose&&C(t,(function(t){t.dispose()})),(0,r.Z)((0,s.Z)(i.prototype),"_onClear",this).call(this,t)}},{key:"isDisposed",value:function(){return this._disposed}},{key:"dispose",value:function(){this._disposed||(this._disposed=!0,this.autoDispose&&C(this._values,(function(t){t.dispose()})))}}]),i}(ee),ne=function(t){(0,u.Z)(i,t);var e=(0,h.Z)(i);function i(t,n){var r;return(0,c.Z)(this,i),r=e.call(this),Object.defineProperty((0,l.Z)(r),"template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty((0,l.Z)(r),"make",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),r.template=t,r.make=n,r}return(0,d.Z)(i)}(ie),re=function(t){(0,u.Z)(i,t);var e=(0,h.Z)(i);function i(t){var n;return(0,c.Z)(this,i),n=e.call(this),Object.defineProperty((0,l.Z)(n),"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty((0,l.Z)(n),"_container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty((0,l.Z)(n),"_events",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),n._container=t,n._events=n.events.onAll((function(t){if("clear"===t.type)C(t.oldValues,(function(t){n._onRemoved(t)}));else if("push"===t.type)n._onInserted(t.newValue);else if("setIndex"===t.type)n._onRemoved(t.oldValue),n._onInserted(t.newValue,t.index);else if("insertIndex"===t.type)n._onInserted(t.newValue,t.index);else if("removeIndex"===t.type)n._onRemoved(t.oldValue);else{if("moveIndex"!==t.type)throw new Error("Unknown IListEvent type");n._onRemoved(t.value),n._onInserted(t.value,t.newIndex)}})),n}return(0,d.Z)(i,[{key:"_onInserted",value:function(t,e){t._setParent(this._container,!0);var i=this._container._childrenDisplay;void 0===e?i.addChild(t._display):i.addChildAt(t._display,e)}},{key:"_onRemoved",value:function(t){this._container._childrenDisplay.removeChild(t._display),this._container.markDirtyBounds(),this._container.markDirty()}},{key:"isDisposed",value:function(){return this._disposed}},{key:"dispose",value:function(){this._disposed||(this._disposed=!0,this._events.dispose(),C(this.values,(function(t){t.dispose()})))}}]),i}(ee),se=Math.PI,ae=se/180,oe=180/se;function le(t,e,i){if(!Z(e)||e<=0)return Math.round(t);var n=Math.pow(10,e);return Math.round(t*n)/n}function ue(t,e){if(!Z(e)||e<=0)return Math.ceil(t);var i=Math.pow(10,e);return Math.ceil(t*i)/i}function he(t,e,i){return Math.min(Math.max(t,e),i)}function ce(t){return Math.sin(ae*t)}function de(t){return Math.cos(ae*t)}function ve(t){return(t%=360)<0&&(t+=360),t}function pe(t,e,i,n,r){var s=Number.MAX_VALUE,a=Number.MAX_VALUE,o=-Number.MAX_VALUE,l=-Number.MAX_VALUE,u=[];u.push(fe(r,i)),u.push(fe(r,n));for(var h=Math.min(90*Math.floor(i/90),90*Math.floor(n/90)),c=Math.max(90*Math.ceil(i/90),90*Math.ceil(n/90)),d=h;d<=c;d+=90)d>=i&&d<=n&&u.push(fe(r,d));for(var v=0;v<u.length;v++){var p=u[v];p.x<s&&(s=p.x),p.y<a&&(a=p.y),p.x>o&&(o=p.x),p.y>l&&(l=p.y)}return{left:t+s,top:e+a,right:t+o,bottom:e+l}}function fe(t,e){return{x:t*de(e),y:t*ce(e)}}function ge(t){var e=t.length;if(e>0){var i=t[0],n=i.left,r=i.top,s=i.right,a=i.bottom;if(e>1)for(var o=1;o<e;o++)i=t[o],n=Math.min(i.left,n),s=Math.max(i.right,s),r=Math.min(i.top,r),a=Math.max(i.bottom,a);return{left:n,right:s,top:r,bottom:a}}return{left:0,right:0,top:0,bottom:0}}function ye(t){return t}function _e(t){return t*t*t}function me(t){return function(e){return 1-t(1-e)}}var be=function(){function t(e,i){var n=this;(0,c.Z)(this,t),Object.defineProperty(this,"_entity",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_userSettings",{enumerable:!0,configurable:!0,writable:!0,value:{}}),this._entity=e,this._settings=i,X(i,(function(t){n._userSettings[t]=!0}))}return(0,d.Z)(t,[{key:"get",value:function(t,e){var i=this._settings[t];return void 0!==i?i:e}},{key:"setRaw",value:function(t,e){this._settings[t]=e}},{key:"set",value:function(t,e){this._userSettings[t]=!0,this.setRaw(t,e)}},{key:"remove",value:function(t){delete this._userSettings[t],delete this._settings[t]}},{key:"setAll",value:function(t){var e=this;G(t).forEach((function(i){e.set(i,t[i])}))}},{key:"_eachSetting",value:function(t){X(this._settings,t)}},{key:"apply",value:function(){var t=this,e={stateAnimationEasing:!0,stateAnimationDuration:!0},i=this._entity.states.lookup("default");this._eachSetting((function(n,r){e[n]||(e[n]=!0,t!==i&&(n in i._settings||(i._settings[n]=t._entity.get(n))),t._entity.set(n,r))}))}},{key:"applyAnimate",value:function(t){var e=this;null==t&&(t=this._settings.stateAnimationDuration),null==t&&(t=this.get("stateAnimationDuration",this._entity.get("stateAnimationDuration",0)));var i=this._settings.stateAnimationEasing;null==i&&(i=this.get("stateAnimationEasing",this._entity.get("stateAnimationEasing",_e)));var n=this._entity.states.lookup("default"),r={stateAnimationEasing:!0,stateAnimationDuration:!0},s={};return this._eachSetting((function(a,o){if(!r[a]){r[a]=!0,e!=n&&(a in n._settings||(n._settings[a]=e._entity.get(a)));var l=e._entity.animate({key:a,to:o,duration:t,easing:i});l&&(s[a]=l)}})),s}}]),t}(),ke=function(){function t(e){(0,c.Z)(this,t),Object.defineProperty(this,"_states",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_entity",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._entity=e}return(0,d.Z)(t,[{key:"lookup",value:function(t){return this._states[t]}},{key:"create",value:function(t,e){var i=this._states[t];if(i)return i.setAll(e),i;var n=new be(this._entity,e);return this._states[t]=n,n}},{key:"remove",value:function(t){delete this._states[t]}},{key:"apply",value:function(t){var e=this._states[t];e&&e.apply(),this._entity._applyState(t)}},{key:"applyAnimate",value:function(t,e){var i,n=this._states[t];return n&&(i=n.applyAnimate(e)),this._entity._applyStateAnimated(t,e),i}}]),t}(),we=new((0,d.Z)((function t(){(0,c.Z)(this,t),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:"5.9.10"}),Object.defineProperty(this,"licenses",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"entitiesById",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"rootElements",{enumerable:!0,configurable:!0,writable:!0,value:[]})})));function Pe(t){we.licenses.push(t)}function De(t,e){return t===e?0:t<e?-1:1}function xe(t,e,i){for(var n=t.length,r=e.length,s=Math.min(n,r),a=0;a<s;++a){var o=i(t[a],e[a]);if(0!==o)return o}return De(n,r)}function Ze(t,e){return t===e?0:t<e?-1:1}var Oe=function(){function t(e){(0,c.Z)(this,t),Object.defineProperty(this,"_entity",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_callbacks",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_disabled",{enumerable:!0,configurable:!0,writable:!0,value:{}}),this._entity=e}return(0,d.Z)(t,[{key:"add",value:function(t,e){var i=this,n=this._callbacks[t];return void 0===n&&(n=this._callbacks[t]=[]),n.push(e),this._entity._markDirtyKey(t),new Q((function(){H(n,e)&&i._entity._markDirtyKey(t)}))}},{key:"remove",value:function(t){var e=this._callbacks[t];void 0!==e&&(delete this._callbacks[t],0!==e.length&&this._entity._markDirtyKey(t))}},{key:"enable",value:function(t){this._disabled[t]&&(delete this._disabled[t],this._entity._markDirtyKey(t))}},{key:"disable",value:function(t){this._disabled[t]||(this._disabled[t]=!0,this._entity._markDirtyKey(t))}},{key:"fold",value:function(t,e){if(!this._disabled[t]){var i=this._callbacks[t];if(void 0!==i)for(var n=0,r=i.length;n<r;++n)e=i[n](e,this._entity,t)}return e}}]),t}(),Te=function(){function t(e,i,n,r,s,a,o){(0,c.Z)(this,t),Object.defineProperty(this,"_animation",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_from",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_to",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_duration",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_easing",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_loops",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_interpolate",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_oldTime",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_time",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_stopped",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_playing",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:new Gt}),this._animation=e,this._from=i,this._to=n,this._duration=r,this._easing=s,this._loops=a,this._interpolate=Qt(i,n),this._oldTime=o}return(0,d.Z)(t,[{key:"to",get:function(){return this._to}},{key:"from",get:function(){return this._from}},{key:"playing",get:function(){return this._playing}},{key:"stopped",get:function(){return this._stopped}},{key:"stop",value:function(){this._stopped||(this._stopped=!0,this._playing=!1,this.events.isEnabled("stopped")&&this.events.dispatch("stopped",{type:"stopped",target:this}))}},{key:"pause",value:function(){this._playing=!1,this._oldTime=null}},{key:"play",value:function(){this._stopped||this._playing||(this._playing=!0,this._animation._startAnimation())}},{key:"percentage",get:function(){return this._time/this._duration}},{key:"waitForStop",value:function(){var t=this;return new Promise((function(e,i){if(t._stopped)e();else var n=t.events.on("stopped",(function(){n.dispose(),e()}))}))}},{key:"_checkEnded",value:function(){return!(this._loops>1)||(--this._loops,!1)}},{key:"_run",value:function(t){null!==this._oldTime&&(this._time+=t-this._oldTime,this._time>this._duration&&(this._time=this._duration)),this._oldTime=t}},{key:"_reset",value:function(t){this._oldTime=t,this._time=0}},{key:"_value",value:function(t){return this._interpolate(this._easing(t),this._from,this._to)}}]),t}(),Se=0,je=function(){function t(e){(0,c.Z)(this,t),Object.defineProperty(this,"uid",{enumerable:!0,configurable:!0,writable:!0,value:++Se}),Object.defineProperty(this,"_settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_privateSettings",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_settingEvents",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_privateSettingEvents",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_prevSettings",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_prevPrivateSettings",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_animatingSettings",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_animatingPrivateSettings",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_userProperties",{enumerable:!0,configurable:!0,writable:!0,value:{}}),this._settings=e}return(0,d.Z)(t,[{key:"_checkDirty",value:function(){var t=this;G(this._settings).forEach((function(e){t._userProperties[e]=!0,t._markDirtyKey(e)}))}},{key:"resetUserSettings",value:function(){this._userProperties={}}},{key:"_runAnimation",value:function(t){var e=this,i=Vt.Stopped;if(!this.isDisposed()){var n=!1,r=!1;X(this._animatingSettings,(function(i,s){if(s.stopped)e._stopAnimation(i);else if(s.playing){s._run(t);var a=s.percentage;a>=1?s._checkEnded()?e.set(i,s._value(1)):(n=!0,s._reset(t),e._set(i,s._value(1))):(n=!0,e._set(i,s._value(a)))}else r=!0})),X(this._animatingPrivateSettings,(function(i,s){if(s.stopped)e._stopAnimationPrivate(i);else if(s.playing){s._run(t);var a=s.percentage;a>=1?s._checkEnded()?e.setPrivate(i,s._value(1)):(n=!0,s._reset(t),e._setPrivate(i,s._value(1))):(n=!0,e._setPrivate(i,s._value(a)))}else r=!0})),n?i=Vt.Playing:r&&(i=Vt.Paused)}return i}},{key:"_markDirtyKey",value:function(t){this.markDirty()}},{key:"_markDirtyPrivateKey",value:function(t){this.markDirty()}},{key:"on",value:function(t,e){var i=this,n=this._settingEvents[t];return void 0===n&&(n=this._settingEvents[t]=[]),n.push(e),new Q((function(){H(n,e),0===n.length&&delete i._settingEvents[t]}))}},{key:"off",value:function(t,e){var i=this._settingEvents[t];void 0!==i&&void 0!==e?H(i,e):delete this._settingEvents[t]}},{key:"onPrivate",value:function(t,e){var i=this,n=this._privateSettingEvents[t];return void 0===n&&(n=this._privateSettingEvents[t]=[]),n.push(e),new Q((function(){H(n,e),0===n.length&&delete i._privateSettingEvents[t]}))}},{key:"offPrivate",value:function(t,e){var i=this._privateSettingEvents[t];void 0!==i&&void 0!==e?H(i,e):delete this._privateSettingEvents[t]}},{key:"getRaw",value:function(t,e){var i=this._settings[t];return void 0!==i?i:e}},{key:"has",value:function(t){return t in this._settings}},{key:"get",value:function(t,e){return this.getRaw(t,e)}},{key:"_sendKeyEvent",value:function(t,e){var i=this,n=this._settingEvents[t];void 0!==n&&C(n,(function(n){n(e,i,t)}))}},{key:"_sendPrivateKeyEvent",value:function(t,e){var i=this,n=this._privateSettingEvents[t];void 0!==n&&C(n,(function(n){n(e,i,t)}))}},{key:"_setRaw",value:function(t,e,i){this._prevSettings[t]=e,this._sendKeyEvent(t,i)}},{key:"setRaw",value:function(t,e){var i=this._settings[t];this._settings[t]=e,i!==e&&this._setRaw(t,i,e)}},{key:"_set",value:function(t,e){var i=this._settings[t];this._settings[t]=e,i!==e&&(this._setRaw(t,i,e),this._markDirtyKey(t))}},{key:"_stopAnimation",value:function(t){var e=this._animatingSettings[t];e&&(delete this._animatingSettings[t],e.stop())}},{key:"set",value:function(t,e){return this._set(t,e),this._stopAnimation(t),e}},{key:"remove",value:function(t){t in this._settings&&(this._prevSettings[t]=this._settings[t],delete this._settings[t],this._sendKeyEvent(t,void 0),this._markDirtyKey(t)),this._stopAnimation(t)}},{key:"removeAll",value:function(){var t=this;C(G(this._settings),(function(e){t.remove(e)}))}},{key:"getPrivate",value:function(t,e){var i=this._privateSettings[t];return void 0!==i?i:e}},{key:"_setPrivateRaw",value:function(t,e,i){this._prevPrivateSettings[t]=e,this._sendPrivateKeyEvent(t,i)}},{key:"setPrivateRaw",value:function(t,e){var i=this._privateSettings[t];this._privateSettings[t]=e,i!==e&&this._setPrivateRaw(t,i,e)}},{key:"_setPrivate",value:function(t,e){var i=this._privateSettings[t];this._privateSettings[t]=e,i!==e&&(this._setPrivateRaw(t,i,e),this._markDirtyPrivateKey(t))}},{key:"_stopAnimationPrivate",value:function(t){var e=this._animatingPrivateSettings[t];e&&(e.stop(),delete this._animatingPrivateSettings[t])}},{key:"setPrivate",value:function(t,e){return this._setPrivate(t,e),this._stopAnimationPrivate(t),e}},{key:"removePrivate",value:function(t){t in this._privateSettings&&(this._prevPrivateSettings[t]=this._privateSettings[t],delete this._privateSettings[t],this._markDirtyPrivateKey(t)),this._stopAnimationPrivate(t)}},{key:"setAll",value:function(t){var e=this;X(t,(function(t,i){e.set(t,i)}))}},{key:"animate",value:function(t){var e=t.key,i=t.to,n=t.duration||0,r=t.loops||1,s=void 0===t.from?this.get(e):t.from,a=void 0===t.easing?ye:t.easing;if(0===n)this.set(e,i);else{if(void 0!==s&&s!==i){this.set(e,s);var o=this._animatingSettings[e]=new Te(this,s,i,n,a,r,this._animationTime());return this._startAnimation(),o}this.set(e,i)}var l=new Te(this,s,i,n,a,r,null);return l.stop(),l}},{key:"animatePrivate",value:function(t){var e=t.key,i=t.to,n=t.duration||0,r=t.loops||1,s=void 0===t.from?this.getPrivate(e):t.from,a=void 0===t.easing?ye:t.easing;if(0===n)this.setPrivate(e,i);else{if(void 0!==s&&s!==i){this.setPrivate(e,s);var o=this._animatingPrivateSettings[e]=new Te(this,s,i,n,a,r,this._animationTime());return this._startAnimation(),o}this.setPrivate(e,i)}var l=new Te(this,s,i,n,a,r,null);return l.stop(),l}},{key:"_dispose",value:function(){}},{key:"isDisposed",value:function(){return this._disposed}},{key:"dispose",value:function(){this._disposed||(this._disposed=!0,this._dispose())}}]),t}(),Ee=function(t){(0,u.Z)(i,t);var e=(0,h.Z)(i);function i(t,r,s){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];if((0,c.Z)(this,i),a=e.call(this,r),Object.defineProperty((0,l.Z)(a),"_root",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty((0,l.Z)(a),"_user_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty((0,l.Z)(a),"states",{enumerable:!0,configurable:!0,writable:!0,value:new ke((0,l.Z)(a))}),Object.defineProperty((0,l.Z)(a),"adapters",{enumerable:!0,configurable:!0,writable:!0,value:new Oe((0,l.Z)(a))}),Object.defineProperty((0,l.Z)(a),"events",{enumerable:!0,configurable:!0,writable:!0,value:a._createEvents()}),Object.defineProperty((0,l.Z)(a),"_userPrivateProperties",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty((0,l.Z)(a),"_dirty",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty((0,l.Z)(a),"_dirtyPrivate",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty((0,l.Z)(a),"_template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty((0,l.Z)(a),"_templates",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty((0,l.Z)(a),"_internalTemplates",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty((0,l.Z)(a),"_defaultThemes",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty((0,l.Z)(a),"_templateDisposers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty((0,l.Z)(a),"_disposers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty((0,l.Z)(a),"_runSetup",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty((0,l.Z)(a),"_disposerProperties",{enumerable:!0,configurable:!0,writable:!0,value:{}}),!s)throw new Error("You cannot use `new Class()`, instead use `Class.new()`");return a._root=t,a._internalTemplates=o,r.id&&a._registerId(r.id),(0,n.Z)(a)}return(0,d.Z)(i,[{key:"_afterNew",value:function(){var t=this;this._checkDirty();var e=!1,i=this._template;i&&(e=!0,i._setObjectTemplate(this)),C(this._internalTemplates,(function(i){e=!0,i._setObjectTemplate(t)})),e&&this._applyTemplates(!1),this.states.create("default",{}),this._setDefaults()}},{key:"_afterNewApplyThemes",value:function(){var t=this;this._checkDirty();var e=this._template;e&&e._setObjectTemplate(this),C(this._internalTemplates,(function(e){e._setObjectTemplate(t)})),this.states.create("default",{}),this._setDefaults(),this._applyThemes()}},{key:"_createEvents",value:function(){return new Gt}},{key:"classNames",get:function(){return this.constructor.classNames}},{key:"className",get:function(){return this.constructor.className}},{key:"_setDefaults",value:function(){}},{key:"_setDefaultFn",value:function(t,e){var i=this.get(t);if(i)return i;var n=e();return this.set(t,n),n}},{key:"_setDefault",value:function(t,e){this.has(t)||(0,r.Z)((0,s.Z)(i.prototype),"set",this).call(this,t,e)}},{key:"_setRawDefault",value:function(t,e){this.has(t)||(0,r.Z)((0,s.Z)(i.prototype),"setRaw",this).call(this,t,e)}},{key:"_clearDirty",value:function(){var t=this;G(this._dirty).forEach((function(e){t._dirty[e]=!1})),G(this._dirtyPrivate).forEach((function(e){t._dirtyPrivate[e]=!1}))}},{key:"isDirty",value:function(t){return!!this._dirty[t]}},{key:"isPrivateDirty",value:function(t){return!!this._dirtyPrivate[t]}},{key:"_markDirtyKey",value:function(t){this._dirty[t]=!0,(0,r.Z)((0,s.Z)(i.prototype),"_markDirtyKey",this).call(this,t)}},{key:"_markDirtyPrivateKey",value:function(t){this._dirtyPrivate[t]=!0,(0,r.Z)((0,s.Z)(i.prototype),"_markDirtyKey",this).call(this,t)}},{key:"isType",value:function(t){return-1!==this.classNames.indexOf(t)}},{key:"_pushPropertyDisposer",value:function(t,e){var i=this._disposerProperties[t];return void 0===i&&(i=this._disposerProperties[t]=[]),i.push(e),e}},{key:"_disposeProperty",value:function(t){var e=this._disposerProperties[t];void 0!==e&&(C(e,(function(t){t.dispose()})),delete this._disposerProperties[t])}},{key:"template",get:function(){return this._template},set:function(t){var e=this._template;e!==t&&(this._template=t,e&&e._removeObjectTemplate(this),t&&t._setObjectTemplate(this),this._applyTemplates())}},{key:"markDirty",value:function(){this._root._addDirtyEntity(this)}},{key:"_startAnimation",value:function(){this._root._addAnimation(this)}},{key:"_animationTime",value:function(){return this._root.animationTime}},{key:"_applyState",value:function(t){}},{key:"_applyStateAnimated",value:function(t,e){}},{key:"get",value:function(t,e){var i=this.adapters.fold(t,this._settings[t]);return void 0!==i?i:e}},{key:"isUserSetting",value:function(t){return this._userProperties[t]||!1}},{key:"set",value:function(t,e){return this._userProperties[t]=!0,(0,r.Z)((0,s.Z)(i.prototype),"set",this).call(this,t,e)}},{key:"setRaw",value:function(t,e){this._userProperties[t]=!0,(0,r.Z)((0,s.Z)(i.prototype),"setRaw",this).call(this,t,e)}},{key:"_setSoft",value:function(t,e){return this._userProperties[t]?e:(0,r.Z)((0,s.Z)(i.prototype),"set",this).call(this,t,e)}},{key:"remove",value:function(t){delete this._userProperties[t],this._removeTemplateProperty(t)}},{key:"setPrivate",value:function(t,e){return this._userPrivateProperties[t]=!0,(0,r.Z)((0,s.Z)(i.prototype),"setPrivate",this).call(this,t,e)}},{key:"setPrivateRaw",value:function(t,e){this._userPrivateProperties[t]=!0,(0,r.Z)((0,s.Z)(i.prototype),"setPrivateRaw",this).call(this,t,e)}},{key:"removePrivate",value:function(t){delete this._userPrivateProperties[t],this._removeTemplatePrivateProperty(t)}},{key:"_setTemplateProperty",value:function(t,e,n){this._userProperties[e]||t===this._findTemplateByKey(e)&&(0,r.Z)((0,s.Z)(i.prototype),"set",this).call(this,e,n)}},{key:"_setTemplatePrivateProperty",value:function(t,e,n){this._userPrivateProperties[e]||t===this._findTemplateByPrivateKey(e)&&(0,r.Z)((0,s.Z)(i.prototype),"setPrivate",this).call(this,e,n)}},{key:"_removeTemplateProperty",value:function(t){if(!this._userProperties[t]){var e=this._findTemplateByKey(t);e?(0,r.Z)((0,s.Z)(i.prototype),"set",this).call(this,t,e._settings[t]):(0,r.Z)((0,s.Z)(i.prototype),"remove",this).call(this,t)}}},{key:"_removeTemplatePrivateProperty",value:function(t){if(!this._userPrivateProperties[t]){var e=this._findTemplateByPrivateKey(t);e?(0,r.Z)((0,s.Z)(i.prototype),"setPrivate",this).call(this,t,e._privateSettings[t]):(0,r.Z)((0,s.Z)(i.prototype),"removePrivate",this).call(this,t)}}},{key:"_walkParents",value:function(t){t(this._root._rootContainer),t(this)}},{key:"_applyStateByKey",value:function(t){var e=this.states.create(t,{}),i={};this._eachTemplate((function(n){var r=n.states.lookup(t);r&&r._apply(e,i)})),X(e._settings,(function(t){i[t]||e._userSettings[t]||e.remove(t)}))}},{key:"_applyTemplate",value:function(t,e){var n=this;this._templateDisposers.push(t._apply(this,e)),X(t._settings,(function(t,a){e.settings[t]||n._userProperties[t]||(e.settings[t]=!0,(0,r.Z)((0,s.Z)(i.prototype),"set",n).call(n,t,a))})),X(t._privateSettings,(function(t,a){e.privateSettings[t]||n._userPrivateProperties[t]||(e.privateSettings[t]=!0,(0,r.Z)((0,s.Z)(i.prototype),"setPrivate",n).call(n,t,a))})),this._runSetup&&t.setup&&(this._runSetup=!1,t.setup(this))}},{key:"_findStaticTemplate",value:function(t){if(this._template&&t(this._template))return this._template}},{key:"_eachTemplate",value:function(t){this._findStaticTemplate((function(e){return t(e),!1})),M(this._internalTemplates,t),C(this._templates,t)}},{key:"_applyTemplates",value:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e&&this._disposeTemplates();var n={settings:{},privateSettings:{},states:{}};this._eachTemplate((function(e){t._applyTemplate(e,n)})),e&&(X(this._settings,(function(e){t._userProperties[e]||n.settings[e]||(0,r.Z)((0,s.Z)(i.prototype),"remove",t).call(t,e)})),X(this._privateSettings,(function(e){t._userPrivateProperties[e]||n.privateSettings[e]||(0,r.Z)((0,s.Z)(i.prototype),"removePrivate",t).call(t,e)})))}},{key:"_findTemplate",value:function(t){var e=this._findStaticTemplate(t);if(void 0===e){var i=function(t,e){var i=function(t,e){for(var i=t.length;i>0;)if(e(t[--i],i))return i;return-1}(t,e);if(-1!==i)return t[i]}(this._internalTemplates,t);return void 0===i?U(this._templates,t):i}return e}},{key:"_findTemplateByKey",value:function(t){return this._findTemplate((function(e){return t in e._settings}))}},{key:"_findTemplateByPrivateKey",value:function(t){return this._findTemplate((function(e){return t in e._privateSettings}))}},{key:"_disposeTemplates",value:function(){C(this._templateDisposers,(function(t){t.dispose()})),this._templateDisposers.length=0}},{key:"_removeTemplates",value:function(){var t=this;C(this._templates,(function(e){e._removeObjectTemplate(t)})),this._templates.length=0}},{key:"_applyThemes",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=!1,n=[],r=[],s=new Set,a=this.get("themeTagsSelf");return a&&C(a,(function(t){s.add(t)})),this._walkParents((function(e){e===t._root._rootContainer&&(i=!0),e._defaultThemes.length>0&&n.push(e._defaultThemes);var a=e.get("themes");a&&r.push(a);var o=e.get("themeTags");o&&C(o,(function(t){s.add(t)}))})),r=n.concat(r),this._removeTemplates(),(i||e)&&M(this.classNames,(function(e){var i=[];C(r,(function(t){C(t,(function(t){var n=t._lookupRules(e);n&&M(n,(function(t){if(t.tags.every((function(t){return s.has(t)}))){var e=K(i,(function(e){var i=De(t.tags.length,e.tags.length);return 0===i?xe(t.tags,e.tags,De):i}));i.splice(e.index,0,t)}}))}))})),C(i,(function(e){t._templates.push(e.template),e.template._setObjectTemplate(t)}))})),this._applyTemplates(),(i||e)&&(this._runSetup=!1),i||e}},{key:"_changed",value:function(){}},{key:"_beforeChanged",value:function(){if(this.isDirty("id")){var t=this.get("id");t&&this._registerId(t);var e=this._prevSettings.id;e&&delete we.entitiesById[e]}}},{key:"_registerId",value:function(t){if(we.entitiesById[t]&&we.entitiesById[t]!==this)throw new Error('An entity with id "'+t+'" already exists.');we.entitiesById[t]=this}},{key:"_afterChanged",value:function(){}},{key:"addDisposer",value:function(t){return this._disposers.push(t),t}},{key:"_dispose",value:function(){var t=this;(0,r.Z)((0,s.Z)(i.prototype),"_dispose",this).call(this);var e=this._template;e&&e._removeObjectTemplate(this),C(this._internalTemplates,(function(e){e._removeObjectTemplate(t)})),this._removeTemplates(),this._disposeTemplates(),this.events.dispose(),this._disposers.forEach((function(t){t.dispose()})),X(this._disposerProperties,(function(t,e){C(e,(function(t){t.dispose()}))}));var n=this.get("id");n&&delete we.entitiesById[n]}},{key:"setTimeout",value:function(t){function e(e,i){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t,e){var i=this,n=setTimeout((function(){i.removeDispose(r),t()}),e),r=new Q((function(){clearTimeout(n)}));return this._disposers.push(r),r}))},{key:"removeDispose",value:function(t){if(!this.isDisposed()){var e=j(this._disposers,t);e>-1&&this._disposers.splice(e,1)}t.dispose()}},{key:"hasTag",value:function(t){return-1!==j(this.get("themeTags",[]),t)}},{key:"addTag",value:function(t){if(!this.hasTag(t)){var e=this.get("themeTags",[]);e.push(t),this.set("themeTags",e)}}},{key:"removeTag",value:function(t){if(this.hasTag(t)){var e=this.get("themeTags",[]);B(e,t),this.set("themeTags",e)}}},{key:"_t",value:function(t,e){for(var i,n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];return(i=this._root.language).translate.apply(i,[t,e].concat(r))}},{key:"root",get:function(){return this._root}}],[{key:"new",value:function(t,e,i){var n=new this(t,e,!0);return n._template=i,n._afterNew(),n}},{key:"_new",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=new this(t,e,!0,i);return n._afterNew(),n}}]),i}(je);Object.defineProperty(Ee,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Entity"}),Object.defineProperty(Ee,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:["Entity"]});var Ce=function(){function t(e,i,n){(0,c.Z)(this,t),Object.defineProperty(this,"_settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._name=e,this._template=i,this._settings=n}return(0,d.Z)(t,[{key:"get",value:function(t,e){var i=this._settings[t];return void 0!==i?i:e}},{key:"set",value:function(t,e){this._settings[t]=e,this._template._stateChanged(this._name)}},{key:"remove",value:function(t){delete this._settings[t],this._template._stateChanged(this._name)}},{key:"setAll",value:function(t){var e=this;G(t).forEach((function(i){e._settings[i]=t[i]})),this._template._stateChanged(this._name)}},{key:"_apply",value:function(t,e){X(this._settings,(function(i,n){e[i]||t._userSettings[i]||(e[i]=!0,t.setRaw(i,n))}))}}]),t}(),Me=function(){function t(e){(0,c.Z)(this,t),Object.defineProperty(this,"_template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_states",{enumerable:!0,configurable:!0,writable:!0,value:{}}),this._template=e}return(0,d.Z)(t,[{key:"lookup",value:function(t){return this._states[t]}},{key:"create",value:function(t,e){var i=this._states[t];if(i)return i.setAll(e),i;var n=new Ce(t,this._template,e);return this._states[t]=n,this._template._stateChanged(t),n}},{key:"remove",value:function(t){delete this._states[t],this._template._stateChanged(t)}},{key:"_apply",value:function(t,e){X(this._states,(function(i,n){var r=e.states[i];null==r&&(r=e.states[i]={});var s=t.states.create(i,{});n._apply(s,r)}))}}]),t}(),Ae=function(){function t(){(0,c.Z)(this,t),Object.defineProperty(this,"_callbacks",{enumerable:!0,configurable:!0,writable:!0,value:{}})}return(0,d.Z)(t,[{key:"add",value:function(t,e){var i=this,n=this._callbacks[t];return void 0===n&&(n=this._callbacks[t]=[]),n.push(e),new Q((function(){H(n,e),0===n.length&&delete i._callbacks[t]}))}},{key:"remove",value:function(t){void 0!==this._callbacks[t]&&delete this._callbacks[t]}},{key:"_apply",value:function(t){var e=[];return X(this._callbacks,(function(i,n){C(n,(function(n){e.push(t.adapters.add(i,n))}))})),new et(e)}}]),t}(),Be=function(){function t(e,i){if((0,c.Z)(this,t),Object.defineProperty(this,"_settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_privateSettings",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_settingEvents",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_privateSettingEvents",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_entities",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"states",{enumerable:!0,configurable:!0,writable:!0,value:new Me(this)}),Object.defineProperty(this,"adapters",{enumerable:!0,configurable:!0,writable:!0,value:new Ae}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:new Gt}),Object.defineProperty(this,"setup",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),!i)throw new Error("You cannot use `new Class()`, instead use `Class.new()`");this._settings=e}return(0,d.Z)(t,[{key:"entities",get:function(){return this._entities}},{key:"get",value:function(t,e){var i=this._settings[t];return void 0!==i?i:e}},{key:"setRaw",value:function(t,e){this._settings[t]=e}},{key:"set",value:function(t,e){var i=this;this._settings[t]!==e&&(this.setRaw(t,e),this._entities.forEach((function(n){n._setTemplateProperty(i,t,e)})))}},{key:"remove",value:function(t){t in this._settings&&(delete this._settings[t],this._entities.forEach((function(e){e._removeTemplateProperty(t)})))}},{key:"removeAll",value:function(){var t=this;X(this._settings,(function(e,i){t.remove(e)}))}},{key:"getPrivate",value:function(t,e){var i=this._privateSettings[t];return void 0!==i?i:e}},{key:"setPrivateRaw",value:function(t,e){return this._privateSettings[t]=e,e}},{key:"setPrivate",value:function(t,e){var i=this;return this._privateSettings[t]!==e&&(this.setPrivateRaw(t,e),this._entities.forEach((function(n){n._setTemplatePrivateProperty(i,t,e)}))),e}},{key:"removePrivate",value:function(t){t in this._privateSettings&&(delete this._privateSettings[t],this._entities.forEach((function(e){e._removeTemplatePrivateProperty(t)})))}},{key:"setAll",value:function(t){var e=this;X(t,(function(t,i){e.set(t,i)}))}},{key:"on",value:function(t,e){var i=this,n=this._settingEvents[t];return void 0===n&&(n=this._settingEvents[t]=[]),n.push(e),new Q((function(){H(n,e),0===n.length&&delete i._settingEvents[t]}))}},{key:"onPrivate",value:function(t,e){var i=this,n=this._privateSettingEvents[t];return void 0===n&&(n=this._privateSettingEvents[t]=[]),n.push(e),new Q((function(){H(n,e),0===n.length&&delete i._privateSettingEvents[t]}))}},{key:"_apply",value:function(t,e){var i=[];return X(this._settingEvents,(function(e,n){C(n,(function(n){i.push(t.on(e,n))}))})),X(this._privateSettingEvents,(function(e,n){C(n,(function(n){i.push(t.onPrivate(e,n))}))})),this.states._apply(t,e),i.push(this.adapters._apply(t)),i.push(t.events.copyFrom(this.events)),new et(i)}},{key:"_setObjectTemplate",value:function(t){this._entities.push(t)}},{key:"_removeObjectTemplate",value:function(t){B(this._entities,t)}},{key:"_stateChanged",value:function(t){this._entities.forEach((function(e){e._applyStateByKey(t)}))}}],[{key:"new",value:function(e){return new t(e,!0)}}]),t}(),He=function(t){(0,u.Z)(i,t);var e=(0,h.Z)(i);function i(t){var n;return(0,c.Z)(this,i),n=e.call(this),Object.defineProperty((0,l.Z)(n),"_sprite",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty((0,l.Z)(n),"_rendererDisposers",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty((0,l.Z)(n),"_dispatchParents",{enumerable:!0,configurable:!0,writable:!0,value:!0}),n._sprite=t,n}return(0,d.Z)(i,[{key:"_makePointerEvent",value:function(t,e){return{type:t,originalEvent:e.event,point:e.point,simulated:e.simulated,native:e.native,target:this._sprite}}},{key:"_onRenderer",value:function(t,e){var i=this;this._sprite.set("interactive",!0),this._sprite._display.interactive=!0;var n=this._rendererDisposers[t];if(void 0===n){var r=this._sprite._display.on(t,(function(t){e.call(i,t)}));n=this._rendererDisposers[t]=new it((function(){delete i._rendererDisposers[t],r.dispose()}))}return n.increment()}},{key:"_on",value:function(t,e,n,a,o,l){var u=(0,r.Z)((0,s.Z)(i.prototype),"_on",this).call(this,t,e,n,a,o,l),h=i.RENDERER_EVENTS[e];return void 0!==h&&(u.disposer=new et([u.disposer,this._onRenderer(e,h)])),u}},{key:"stopParentDispatch",value:function(){this._dispatchParents=!1}},{key:"dispatchParents",value:function(t,e){var i=this._dispatchParents;this._dispatchParents=!0;try{this.dispatch(t,e),this._dispatchParents&&this._sprite.parent&&this._sprite.parent.events.dispatchParents(t,e)}finally{this._dispatchParents=i}}}]),i}(Gt);Object.defineProperty(He,"RENDERER_EVENTS",{enumerable:!0,configurable:!0,writable:!0,value:{click:function(t){this.isEnabled("click")&&!this._sprite.isDragging()&&this._sprite._hasDown()&&!this._sprite._hasMoved(this._makePointerEvent("click",t))&&this.dispatch("click",this._makePointerEvent("click",t))},rightclick:function(t){this.isEnabled("rightclick")&&this.dispatch("rightclick",this._makePointerEvent("rightclick",t))},middleclick:function(t){this.isEnabled("middleclick")&&this.dispatch("middleclick",this._makePointerEvent("middleclick",t))},dblclick:function(t){this.dispatchParents("dblclick",this._makePointerEvent("dblclick",t))},pointerover:function(t){var e=this._sprite,i=!0;if(e.getPrivate("trustBounds")){e._getBounds();var n=e.globalBounds();if(e.isType("Graphics")){var r=e.get("strokeWidth",1)/2;r>=1&&(n.left-=r,n.right+=r,n.top-=r,n.bottom+=r)}(function(t,e){return t.x>=e.left&&t.y>=e.top&&t.x<=e.right&&t.y<=e.bottom})(t.point,n)||(i=!1,e._root._renderer.removeHovering(e._display))}i&&this.isEnabled("pointerover")&&this.dispatch("pointerover",this._makePointerEvent("pointerover",t))},pointerout:function(t){this.isEnabled("pointerout")&&this.dispatch("pointerout",this._makePointerEvent("pointerout",t))},pointerdown:function(t){this.dispatchParents("pointerdown",this._makePointerEvent("pointerdown",t))},pointerup:function(t){this.isEnabled("pointerup")&&this.dispatch("pointerup",this._makePointerEvent("pointerup",t))},globalpointerup:function(t){this.isEnabled("globalpointerup")&&this.dispatch("globalpointerup",this._makePointerEvent("globalpointerup",t))},globalpointermove:function(t){this.isEnabled("globalpointermove")&&this.dispatch("globalpointermove",this._makePointerEvent("globalpointermove",t))},wheel:function(t){this.dispatchParents("wheel",{type:"wheel",target:this._sprite,originalEvent:t.event,point:t.point})}}});var Le=function(t){(0,u.Z)(i,t);var e=(0,h.Z)(i);function i(){var t;return(0,c.Z)(this,i),t=e.apply(this,arguments),Object.defineProperty((0,l.Z)(t),"_adjustedLocalBounds",{enumerable:!0,configurable:!0,writable:!0,value:{left:0,right:0,top:0,bottom:0}}),Object.defineProperty((0,l.Z)(t),"_localBounds",{enumerable:!0,configurable:!0,writable:!0,value:{left:0,right:0,top:0,bottom:0}}),Object.defineProperty((0,l.Z)(t),"_parent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty((0,l.Z)(t),"_dataItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty((0,l.Z)(t),"_templateField",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty((0,l.Z)(t),"_sizeDirty",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty((0,l.Z)(t),"_isDragging",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty((0,l.Z)(t),"_dragEvent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty((0,l.Z)(t),"_dragPoint",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty((0,l.Z)(t),"_isHidden",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty((0,l.Z)(t),"_isShowing",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty((0,l.Z)(t),"_isHiding",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty((0,l.Z)(t),"_isDown",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty((0,l.Z)(t),"_downPoint",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty((0,l.Z)(t),"_downPoints",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty((0,l.Z)(t),"_toggleDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty((0,l.Z)(t),"_dragDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty((0,l.Z)(t),"_tooltipDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty((0,l.Z)(t),"_hoverDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty((0,l.Z)(t),"_focusDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty((0,l.Z)(t),"_tooltipMoveDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty((0,l.Z)(t),"_tooltipPointerDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty((0,l.Z)(t),"_statesHandled",{enumerable:!0,configurable:!0,writable:!0,value:!1}),t}return(0,d.Z)(i,[{key:"_afterNew",value:function(){this.setPrivateRaw("visible",!0),(0,r.Z)((0,s.Z)(i.prototype),"_afterNew",this).call(this)}},{key:"markDirtyKey",value:function(t){this._markDirtyKey(t)}},{key:"_markDirtyKey",value:function(t){(0,r.Z)((0,s.Z)(i.prototype),"_markDirtyKey",this).call(this,t),"x"!=t&&"y"!=t&&"dx"!=t&&"dy"!=t||(this.markDirtyBounds(),this._addPercentagePositionChildren(),this.markDirtyPosition())}},{key:"_markDirtyPrivateKey",value:function(t){(0,r.Z)((0,s.Z)(i.prototype),"_markDirtyPrivateKey",this).call(this,t),"x"!=t&&"y"!=t||this.markDirtyPosition()}},{key:"_removeTemplateField",value:function(){this._templateField&&this._templateField._removeObjectTemplate(this)}},{key:"_createEvents",value:function(){return new He(this)}},{key:"_processTemplateField",value:function(){var t,e=this.get("templateField");if(e){var i=this.dataItem;if(i){var n=i.dataContext;n&&((t=n[e])instanceof Be||!t||(t=Be.new(t)))}}this._templateField!==t&&(this._removeTemplateField(),this._templateField=t,t&&t._setObjectTemplate(this),this._applyTemplates())}},{key:"_setDataItem",value:function(t){var e=this._dataItem;this._dataItem=t,this._processTemplateField();var i="dataitemchanged";t!=e&&this.events.isEnabled(i)&&this.events.dispatch(i,{type:i,target:this,oldDataItem:e,newDataItem:t})}},{key:"dataItem",get:function(){if(this._dataItem)return this._dataItem;for(var t=this._parent;t;){if(t._dataItem)return t._dataItem;t=t._parent}},set:function(t){this._setDataItem(t)}},{key:"_addPercentageSizeChildren",value:function(){var t=this.parent;t&&(this.get("width")instanceof p||this.get("height")instanceof p?I(t._percentageSizeChildren,this):H(t._percentageSizeChildren,this))}},{key:"_addPercentagePositionChildren",value:function(){var t=this.parent;t&&(this.get("x")instanceof p||this.get("y")instanceof p?I(t._percentagePositionChildren,this):H(t._percentagePositionChildren,this))}},{key:"markDirtyPosition",value:function(){this._root._addDirtyPosition(this)}},{key:"updatePivotPoint",value:function(){var t=this._localBounds;if(t){var e=this.get("centerX");null!=e&&(this._display.pivot.x=t.left+mt(e,t.right-t.left));var i=this.get("centerY");null!=i&&(this._display.pivot.y=t.top+mt(i,t.bottom-t.top))}}},{key:"_beforeChanged",value:function(){var t=this;if((0,r.Z)((0,s.Z)(i.prototype),"_beforeChanged",this).call(this),this._handleStates(),this.isDirty("tooltip")){var e=this._prevSettings.tooltip;e&&e.dispose()}if((this.isDirty("layer")||this.isDirty("layerMargin"))&&(this._display.setLayer(this.get("layer"),this.get("layerMargin")),this.markDirtyLayer()),this.isDirty("tooltipPosition")){var n=this._tooltipMoveDp;n&&(n.dispose(),this._tooltipMoveDp=void 0);var a=this._tooltipPointerDp;a&&(a.dispose(),this._tooltipPointerDp=void 0),"pointer"==this.get("tooltipPosition")&&(this.isHover()&&(this._tooltipMoveDp=this.events.on("globalpointermove",(function(e){t.showTooltip(e.point)}))),this._tooltipPointerDp=new et([this.events.on("pointerover",(function(){t._tooltipMoveDp=t.events.on("globalpointermove",(function(e){t.showTooltip(e.point)}))})),this.events.on("pointerout",(function(){var e=t._tooltipMoveDp;e&&(e.dispose(),t._tooltipMoveDp=void 0)}))]))}}},{key:"_handleStates",value:function(){this._statesHandled||(this.isDirty("active")&&(this.get("active")?(this.states.applyAnimate("active"),this.set("ariaChecked",!0)):(this.isHidden()||this.states.applyAnimate("default"),this.set("ariaChecked",!1)),this.markDirtyAccessibility()),this.isDirty("disabled")&&(this.get("disabled")?(this.states.applyAnimate("disabled"),this.set("ariaChecked",!1)):(this.isHidden()||this.states.applyAnimate("default"),this.set("ariaChecked",!0)),this.markDirtyAccessibility()),this._statesHandled=!0)}},{key:"_changed",value:function(){var t=this;(0,r.Z)((0,s.Z)(i.prototype),"_changed",this).call(this);var e=this._display,n=this.events;if(this.isDirty("draggable")){var a=this.get("draggable");a?(this.set("interactive",!0),this._dragDp=new et([n.on("pointerdown",(function(e){t.dragStart(e)})),n.on("globalpointermove",(function(e){t.dragMove(e)})),n.on("globalpointerup",(function(e){t.dragStop(e)}))])):this._dragDp&&(this._dragDp.dispose(),this._dragDp=void 0),e.cancelTouch=!!a}if(this.isDirty("tooltipText")||this.isDirty("tooltipHTML")||this.isDirty("showTooltipOn")){var o=this.get("tooltipText"),l=this.get("tooltipHTML"),u=this.get("showTooltipOn","hover");this._tooltipDp&&(this._tooltipDp.dispose(),this._tooltipDp=void 0),(o||l)&&("click"==u?(this._tooltipDp=new et([n.on("click",(function(){t.setTimeout((function(){return t.showTooltip()}),10)})),rt(document,"click",(function(e){t.hideTooltip()}))]),this._disposers.push(this._tooltipDp)):"always"==u||(this._tooltipDp=new et([n.on("pointerover",(function(){t.showTooltip()})),n.on("pointerout",(function(){t.hideTooltip()}))]),this._disposers.push(this._tooltipDp)))}if(this.isDirty("toggleKey")){var h=this.get("toggleKey");h&&"none"!=h?this._toggleDp=n.on("click",(function(){t._isDragging||t.set(h,!t.get(h))})):this._toggleDp&&(this._toggleDp.dispose(),this._toggleDp=void 0)}if(this.isDirty("opacity")&&(e.alpha=Math.max(0,this.get("opacity",1)),this.get("focusable")&&this.markDirtyAccessibility()),this.isDirty("rotation")&&(this.markDirtyBounds(),e.angle=this.get("rotation",0)),this.isDirty("scale")&&(this.markDirtyBounds(),e.scale=this.get("scale",0)),(this.isDirty("centerX")||this.isDirty("centerY"))&&(this.markDirtyBounds(),this.updatePivotPoint()),(this.isDirty("visible")||this.isPrivateDirty("visible")||this.isDirty("forceHidden"))&&(this.get("visible")&&this.getPrivate("visible")&&!this.get("forceHidden")?e.visible=!0:(e.visible=!1,this.hideTooltip()),this.markDirtyBounds(),this.get("focusable")&&this.markDirtyAccessibility()),this.isDirty("width")||this.isDirty("height")){this.markDirtyBounds(),this._addPercentageSizeChildren();var c=this.parent;c&&(this.isDirty("width")&&this.get("width")instanceof p||this.isDirty("height")&&this.get("height")instanceof p)&&(c.markDirty(),c._prevWidth=0),this._sizeDirty=!0}if((this.isDirty("maxWidth")||this.isDirty("maxHeight")||this.isPrivateDirty("width")||this.isPrivateDirty("height")||this.isDirty("minWidth")||this.isDirty("minHeight")||this.isPrivateDirty("maxWidth")||this.isPrivateDirty("maxHeight")||this.isPrivateDirty("minWidth")||this.isPrivateDirty("minHeight")||this.isDirty("marginLeft")||this.isDirty("marginTop")||this.isDirty("marginRight")||this.isDirty("marginBottom"))&&(this.markDirtyBounds(),this._sizeDirty=!0),this._sizeDirty&&this._updateSize(),this.isDirty("wheelable")){var d=this.get("wheelable");d&&this.set("interactive",!0),e.wheelable=!!d}(this.isDirty("tabindexOrder")||this.isDirty("focusableGroup"))&&(this.get("focusable")?this._root._registerTabindexOrder(this):this._root._unregisterTabindexOrder(this)),this.isDirty("filter")&&(e.filter=this.get("filter"));var v=this.get("filter","");if(this.isDirty("blur")){var f=this.get("blur",0);0!=f&&(v+=" blur("+f+"px)")}if(this.isDirty("saturate")){var g=this.get("saturate",1);1!=g&&(v+=" saturate("+g+")")}if(this.isDirty("brightness")){var y=this.get("brightness",1);1!=y&&(v+=" brightness("+y+")")}if(this.isDirty("contrast")){var _=this.get("contrast",1);1!=_&&(v+=" contrast("+_+")")}if(this.isDirty("sepia")){var m=this.get("sepia",0);0!=m&&(v+=" sepia("+m+")")}if(this.isDirty("hue")){var b=this.get("hue",0);0!=b&&(v+=" hue-rotate("+b+"deg)")}if(this.isDirty("invert")){var k=this.get("invert",0);0!=k&&(v+=" invert("+k+")")}if(v&&(e.filter=v),this.isDirty("cursorOverStyle")&&(e.cursorOverStyle=this.get("cursorOverStyle")),this.isDirty("hoverOnFocus")&&(this.get("hoverOnFocus")?this._focusDp=new et([n.on("focus",(function(){t.showTooltip()})),n.on("blur",(function(){t.hideTooltip()}))]):this._focusDp&&(this._focusDp.dispose(),this._focusDp=void 0)),this.isDirty("focusable")&&(this.get("focusable")?this._root._registerTabindexOrder(this):this._root._unregisterTabindexOrder(this),this.markDirtyAccessibility()),this.isPrivateDirty("focusable")&&this.markDirtyAccessibility(),(this.isDirty("role")||this.isDirty("ariaLive")||this.isDirty("ariaChecked")||this.isDirty("ariaHidden")||this.isDirty("ariaOrientation")||this.isDirty("ariaValueNow")||this.isDirty("ariaValueMin")||this.isDirty("ariaValueMax")||this.isDirty("ariaValueText")||this.isDirty("ariaLabel")||this.isDirty("ariaControls"))&&this.markDirtyAccessibility(),this.isDirty("exportable")&&(e.exportable=this.get("exportable")),this.isDirty("interactive")){var w=this.events;this.get("interactive")&&!w.isDisposed()?this._hoverDp=new et([w.on("click",(function(e){ct(e.originalEvent)&&(t.getPrivate("touchHovering")||t.setTimeout((function(){t._handleOver(),(t.get("tooltipText")||t.get("tooltipHTML"))&&t.showTooltip(),t.setPrivateRaw("touchHovering",!0),t.events.dispatch("pointerover",{type:"pointerover",target:e.target,originalEvent:e.originalEvent,point:e.point,simulated:e.simulated})}),10))})),w.on("globalpointerup",(function(e){ct(e.originalEvent)&&t.getPrivate("touchHovering")&&(t._handleOut(),(t.get("tooltipText")||t.get("tooltipHTML"))&&t.hideTooltip(),t.setPrivateRaw("touchHovering",!1),t.events.dispatch("pointerout",{type:"pointerout",target:e.target,originalEvent:e.originalEvent,point:e.point,simulated:e.simulated})),t._isDown&&t._handleUp(e)})),w.on("pointerover",(function(){t._handleOver()})),w.on("pointerout",(function(){t._handleOut()})),w.on("pointerdown",(function(e){t._handleDown(e)}))]):(this._display.interactive=!1,this._hoverDp&&(this._hoverDp.dispose(),this._hoverDp=void 0))}this.isDirty("forceInactive")&&(this._display.inactive=this.get("forceInactive",null)),"always"==this.get("showTooltipOn")&&this._display.visible&&this.showTooltip()}},{key:"dragStart",value:function(t){this._dragEvent=t,this.events.stopParentDispatch()}},{key:"dragStop",value:function(t){if(this._dragEvent=void 0,this._dragPoint=void 0,this.events.stopParentDispatch(),this._isDragging){this._isDragging=!1;var e="dragstop";this.events.isEnabled(e)&&this.events.dispatch(e,{type:e,target:this,originalEvent:t.originalEvent,point:t.point,simulated:t.simulated})}}},{key:"_handleOver",value:function(){this.isHidden()||(this.get("active")&&this.states.lookup("hoverActive")?this.states.applyAnimate("hoverActive"):this.get("disabled")&&this.states.lookup("hoverDisabled")?this.states.applyAnimate("hoverDisabled"):this.states.applyAnimate("hover"),this.get("draggable")&&this._isDown&&this.states.lookup("down")&&this.states.applyAnimate("down"))}},{key:"_handleOut",value:function(){this.isHidden()||(this.get("active")&&this.states.lookup("active")?this.states.applyAnimate("active"):this.get("disabled")&&this.states.lookup("disabled")?this.states.applyAnimate("disabled"):(this.states.lookup("hover")||this.states.lookup("hoverActive"))&&this.states.applyAnimate("default"),this.get("draggable")&&this._isDown&&this.states.lookup("down")&&this.states.applyAnimate("down"))}},{key:"_handleUp",value:function(t){if(!this.isHidden()){this.get("active")&&this.states.lookup("active")?this.states.applyAnimate("active"):this.get("disabled")&&this.states.lookup("disabled")?this.states.applyAnimate("disabled"):this.states.lookup("down")&&(this.isHover()?this.states.applyAnimate("hover"):this.states.applyAnimate("default")),this._downPoint=void 0;var e=ot(t.originalEvent);delete this._downPoints[e],0==G(this._downPoints).length&&(this._isDown=!1)}}},{key:"_hasMoved",value:function(t){var e=ot(t.originalEvent),i=this._downPoints[e];if(i){var n=Math.abs(i.x-t.point.x),r=Math.abs(i.y-t.point.y);return n>5||r>5}return!1}},{key:"_hasDown",value:function(){return G(this._downPoints).length>0}},{key:"_handleDown",value:function(t){var e=this.parent;if(e&&!this.get("draggable")&&e._handleDown(t),this.get("interactive")&&!this.isHidden()){this.states.lookup("down")&&this.states.applyAnimate("down"),this._downPoint={x:t.point.x,y:t.point.y},this._isDown=!0;var i=ot(t.originalEvent);this._downPoints[i]={x:t.point.x,y:t.point.y}}}},{key:"dragMove",value:function(t){var e=this._dragEvent;if(e){if(e.simulated&&!t.simulated)return!0;for(var i=0,n=this.parent,r=1;null!=n;)i+=n.get("rotation",0),(n=n.parent)&&(r*=n.get("scale",1));var s=(t.point.x-e.point.x)/r,a=(t.point.y-e.point.y)/r,o=this.events;if(e.simulated&&!this._isDragging){this._isDragging=!0,this._dragEvent=t,this._dragPoint={x:this.x(),y:this.y()};var l="dragstart";o.isEnabled(l)&&o.dispatch(l,{type:l,target:this,originalEvent:t.originalEvent,point:t.point,simulated:t.simulated})}if(this._isDragging){var u=this._dragPoint;this.set("x",u.x+s*de(i)+a*ce(i)),this.set("y",u.y+a*de(i)-s*ce(i));var h="dragged";o.isEnabled(h)&&o.dispatch(h,{type:h,target:this,originalEvent:t.originalEvent,point:t.point,simulated:t.simulated})}else if(Math.hypot(s,a)>5){this._isDragging=!0,this._dragEvent=t,this._dragPoint={x:this.x(),y:this.y()};var c="dragstart";o.isEnabled(c)&&o.dispatch(c,{type:c,target:this,originalEvent:t.originalEvent,point:t.point,simulated:t.simulated})}}}},{key:"_updateSize",value:function(){}},{key:"_getBounds",value:function(){this._localBounds=this._display.getLocalBounds()}},{key:"depth",value:function(){for(var t=this.parent,e=0;;){if(!t)return e;++e,t=t.parent}}},{key:"markDirtySize",value:function(){this._sizeDirty=!0,this.markDirty()}},{key:"markDirtyBounds",value:function(){var t=this._display;if(this.get("isMeasured")){this._root._addDirtyBounds(this),t.isMeasured=!0,t.invalidateBounds();var e=this.parent;e&&"absolute"!=this.get("position")&&(null==e.get("width")||null==e.get("height")||e.get("layout"))&&e.markDirtyBounds(),this.get("focusable")&&this.isFocus()&&this.markDirtyAccessibility()}}},{key:"markDirtyAccessibility",value:function(){this._root._invalidateAccessibility(this)}},{key:"markDirtyLayer",value:function(){this._display.markDirtyLayer(!0)}},{key:"markDirty",value:function(){(0,r.Z)((0,s.Z)(i.prototype),"markDirty",this).call(this),this.markDirtyLayer()}},{key:"_updateBounds",value:function(){var t,e=this._adjustedLocalBounds;if(this.get("visible")&&this.getPrivate("visible")&&!this.get("forceHidden")?(this._getBounds(),this._fixMinBounds(this._localBounds),this.updatePivotPoint(),this._adjustedLocalBounds=this._display.getAdjustedBounds(this._localBounds),t=this._adjustedLocalBounds):(t={left:0,right:0,top:0,bottom:0},this._localBounds=t,this._adjustedLocalBounds=t),!e||e.left!==t.left||e.top!==t.top||e.right!==t.right||e.bottom!==t.bottom){var i="boundschanged";this.events.isEnabled(i)&&this.events.dispatch(i,{type:i,target:this}),this.parent&&(this.parent.markDirty(),this.parent.markDirtyBounds()),this.getPrivate("showingTooltip")&&this.showTooltip()}}},{key:"_fixMinBounds",value:function(t){var e=this.get("minWidth",this.getPrivate("minWidth")),i=this.get("minHeight",this.getPrivate("minHeight"));Z(e)&&t.right-t.left<e&&(t.right=t.left+e),Z(i)&&t.bottom-t.top<i&&(t.bottom=t.top+i);var n=this.getPrivate("width"),r=this.getPrivate("height");Z(n)&&(n>0?t.right=t.left+n:t.left=t.right+n),Z(r)&&(r>0?t.bottom=t.top+r:t.top=t.bottom+r)}},{key:"_removeParent",value:function(t){t&&(t.children.removeValue(this),H(t._percentageSizeChildren,this),H(t._percentagePositionChildren,this))}},{key:"_clearDirty",value:function(){(0,r.Z)((0,s.Z)(i.prototype),"_clearDirty",this).call(this),this._sizeDirty=!1,this._statesHandled=!1}},{key:"hover",value:function(){this.showTooltip(),this._handleOver()}},{key:"unhover",value:function(){this.hideTooltip(),this._handleOut()}},{key:"showTooltip",value:function(t){var e=this.getTooltip(),i=this.get("tooltipText"),n=this.get("tooltipHTML");if((i||n)&&e){var r=this.get("tooltipPosition"),s=this.getPrivate("tooltipTarget",this);"fixed"!=r&&t||(this._display._setMatrix(),t=this.toGlobal(s._getTooltipPoint())),e.set("pointTo",t),e.set("tooltipTarget",s),e.get("x")||e.set("x",t.x),e.get("y")||e.set("y",t.y),i&&e.label.set("text",i),n&&e.label.set("html",n);var a=this.dataItem;if(a&&e.label._setDataItem(a),"always"==this.get("showTooltipOn")&&(t.x<0||t.x>this._root.width()||t.y<0||t.y>this._root.height()))return void this.hideTooltip();e.label.text.markDirtyText();var o=e.show();return this.setPrivateRaw("showingTooltip",!0),o}}},{key:"hideTooltip",value:function(){var t=this.getTooltip();if(t&&(t.get("tooltipTarget")==this.getPrivate("tooltipTarget",this)||this.get("tooltip")==t)){var e=t.get("keepTargetHover")&&0==t.get("stateAnimationDuration",0)?400:void 0,i=t.hide(e);return this.setPrivateRaw("showingTooltip",!1),i}}},{key:"_getTooltipPoint",value:function(){var t=this._localBounds;if(t){var e=0,i=0;return this.get("isMeasured")?(e=t.left+mt(this.get("tooltipX",0),t.right-t.left),i=t.top+mt(this.get("tooltipY",0),t.bottom-t.top)):(e=mt(this.get("tooltipX",0),this.width()),i=mt(this.get("tooltipY",0),this.height())),{x:e,y:i}}return{x:0,y:0}}},{key:"getTooltip",value:function(){var t=this.get("tooltip");if(t)return t;var e=this.parent;return e?e.getTooltip():void 0}},{key:"_updatePosition",value:function(){var t=this.parent,e=this.get("dx",0),i=this.get("dy",0),n=this.get("x"),r=this.getPrivate("x"),s=0,a=0,o=this.get("position");n instanceof p&&(n=t?t.innerWidth()*n.value+t.get("paddingLeft",0):0),Z(n)?s=n+e:null!=r?s=r:t&&"relative"==o&&(s=t.get("paddingLeft",0)+e);var l=this.get("y"),u=this.getPrivate("y");l instanceof p&&(l=t?t.innerHeight()*l.value+t.get("paddingTop",0):0),Z(l)?a=l+i:null!=u?a=u:t&&"relative"==o&&(a=t.get("paddingTop",0)+i);var h=this._display;if(h.x!=s||h.y!=a){h.invalidateBounds(),h.x=s,h.y=a;var c="positionchanged";this.events.isEnabled(c)&&this.events.dispatch(c,{type:c,target:this})}this.getPrivate("showingTooltip")&&this.showTooltip()}},{key:"x",value:function(){var t=this.get("x"),e=this.getPrivate("x"),i=this.parent;return i?t instanceof p?mt(t,i.innerWidth())+i.get("paddingLeft",0):Z(t)?t:null!=e?e:i.get("paddingLeft",this._display.x):this._display.x}},{key:"y",value:function(){var t=this.getPrivate("y");if(null!=t)return t;var e=this.get("y"),i=this.parent;return i?e instanceof p?mt(e,i.innerHeight())+i.get("paddingTop",0):Z(e)?e:null!=t?t:i.get("paddingTop",this._display.y):this._display.y}},{key:"_dispose",value:function(){(0,r.Z)((0,s.Z)(i.prototype),"_dispose",this).call(this),this._display.dispose(),this._removeTemplateField(),this._removeParent(this.parent),this._root._removeFocusElement(this);var t=this.get("tooltip");t&&t.dispose(),this.markDirty()}},{key:"adjustedLocalBounds",value:function(){return this._fixMinBounds(this._adjustedLocalBounds),this._adjustedLocalBounds}},{key:"localBounds",value:function(){return this._localBounds}},{key:"bounds",value:function(){var t=this._adjustedLocalBounds,e=this.x(),i=this.y();return{left:t.left+e,right:t.right+e,top:t.top+i,bottom:t.bottom+i}}},{key:"globalBounds",value:function(){var t=this.localBounds(),e=this.toGlobal({x:t.left,y:t.top}),i=this.toGlobal({x:t.right,y:t.top}),n=this.toGlobal({x:t.right,y:t.bottom}),r=this.toGlobal({x:t.left,y:t.bottom});return{left:Math.min(e.x,i.x,n.x,r.x),top:Math.min(e.y,i.y,n.y,r.y),right:Math.max(e.x,i.x,n.x,r.x),bottom:Math.max(e.y,i.y,n.y,r.y)}}},{key:"_onShow",value:function(t){}},{key:"_onHide",value:function(t){}},{key:"appear",value:function(t,e){return(0,v.b)(this,void 0,void 0,(0,a.Z)().mark((function i(){var n=this;return(0,a.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,this.hide(0);case 2:return i.abrupt("return",e?new Promise((function(i,r){n.setTimeout((function(){i(n.show(t))}),e)})):this.show(t));case 3:case"end":return i.stop()}}),i,this)})))}},{key:"show",value:function(t){return(0,v.b)(this,void 0,void 0,(0,a.Z)().mark((function e(){var i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._isShowing){e.next=6;break}return this._isHidden=!1,this._isShowing=!0,this._isHiding=!1,this.states.lookup("default").get("visible")&&this.set("visible",!0),this._onShow(t),i=this.states.applyAnimate("default",t),e.next=5,Yt(i);case 5:this._isShowing=!1;case 6:case"end":return e.stop()}}),e,this)})))}},{key:"hide",value:function(t){return(0,v.b)(this,void 0,void 0,(0,a.Z)().mark((function e(){var i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._isHiding||this._isHidden){e.next=8;break}return this._isHiding=!0,this._isShowing=!1,this.states.lookup("hidden")||this.states.create("hidden",{opacity:0,visible:!1}),this._isHidden=!0,this._onHide(t),i=this.states.applyAnimate("hidden",t),e.next=7,Yt(i);case 7:this._isHiding=!1;case 8:case"end":return e.stop()}}),e,this)})))}},{key:"isHidden",value:function(){return this._isHidden}},{key:"isShowing",value:function(){return this._isShowing}},{key:"isHiding",value:function(){return this._isHiding}},{key:"isHover",value:function(){return this._display.hovering()}},{key:"isFocus",value:function(){return this._root.focused(this)}},{key:"isDragging",value:function(){return this._isDragging}},{key:"isVisible",value:function(){return!(!this.get("visible")||!this.getPrivate("visible")||this.get("forceHidden"))}},{key:"isVisibleDeep",value:function(){return this._parent?this._parent.isVisibleDeep()&&this.isVisible():this.isVisible()}},{key:"compositeOpacity",value:function(){var t=this.get("opacity",1);return this._parent?this._parent.compositeOpacity()*t:t}},{key:"compositeScale",value:function(){var t=this.get("scale",1);return this._parent?this._parent.compositeScale()*t:t}},{key:"compositeRotation",value:function(){var t=this.get("rotation",0);return this._parent?this._parent.compositeRotation()+t:t}},{key:"width",value:function(){var t=this.get("width"),e=this.get("maxWidth",this.getPrivate("maxWidth")),i=this.get("minWidth",this.getPrivate("minWidth")),n=this.getPrivate("width"),r=0;if(Z(n))r=n;else if(null==t)this._adjustedLocalBounds&&(r=this._adjustedLocalBounds.right-this._adjustedLocalBounds.left);else if(t instanceof p){var s=this.parent;r=s?s.innerWidth()*t.value:this._root.width()*t.value}else Z(t)&&(r=t);return Z(i)&&(r=Math.max(i,r)),Z(e)&&(r=Math.min(e,r)),r}},{key:"maxWidth",value:function(){var t=this.get("maxWidth",this.getPrivate("maxWidth"));if(Z(t))return t;var e=this.get("width");if(Z(e))return e;var i=this.parent;return i?i.innerWidth():this._root.width()}},{key:"maxHeight",value:function(){var t=this.get("maxHeight",this.getPrivate("maxHeight"));if(Z(t))return t;var e=this.get("height");if(Z(e))return e;var i=this.parent;return i?i.innerHeight():this._root.height()}},{key:"height",value:function(){var t=this.get("height"),e=this.get("maxHeight",this.getPrivate("maxHeight")),i=this.get("minHeight",this.getPrivate("minHeight")),n=this.getPrivate("height"),r=0;if(Z(n))r=n;else if(null==t)this._adjustedLocalBounds&&(r=this._adjustedLocalBounds.bottom-this._adjustedLocalBounds.top);else if(t instanceof p){var s=this.parent;r=s?s.innerHeight()*t.value:this._root.height()*t.value}else Z(t)&&(r=t);return Z(i)&&(r=Math.max(i,r)),Z(e)&&(r=Math.min(e,r)),r}},{key:"_findStaticTemplate",value:function(t){return this._templateField&&t(this._templateField)?this._templateField:(0,r.Z)((0,s.Z)(i.prototype),"_findStaticTemplate",this).call(this,t)}},{key:"_walkParents",value:function(t){this._parent&&this._walkParent(t)}},{key:"_walkParent",value:function(t){this._parent&&this._parent._walkParent(t),t(this)}},{key:"parent",get:function(){return this._parent}},{key:"_setParent",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this._parent;t!==i&&(this.markDirtyBounds(),t.markDirty(),this._parent=t,e&&(this._removeParent(i),t&&(this._addPercentageSizeChildren(),this._addPercentagePositionChildren())),this.markDirtyPosition(),this._applyThemes())}},{key:"getNumberFormatter",value:function(){return this.get("numberFormatter",this._root.numberFormatter)}},{key:"getDateFormatter",value:function(){return this.get("dateFormatter",this._root.dateFormatter)}},{key:"getDurationFormatter",value:function(){return this.get("durationFormatter",this._root.durationFormatter)}},{key:"toGlobal",value:function(t){return this._display.toGlobal(t)}},{key:"toLocal",value:function(t){return this._display.toLocal(t)}},{key:"_getDownPoint",value:function(){var t=this._getDownPointId();if(t)return this._downPoints[t]}},{key:"_getDownPointId",value:function(){if(this._downPoints)return function(t,e){return G(t).sort(e)}(this._downPoints,(function(t,e){return t>e?1:t<e?-1:0}))[0]}},{key:"toFront",value:function(){var t=this.parent;t&&t.children.moveValue(this,t.children.length-1)}},{key:"toBack",value:function(){var t=this.parent;t&&t.children.moveValue(this,0)}}]),i}(Ee);Object.defineProperty(Le,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Sprite"}),Object.defineProperty(Le,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Ee.classNames.concat([Le.className])});var Ie=function(t){(0,u.Z)(i,t);var e=(0,h.Z)(i);function i(){var t;return(0,c.Z)(this,i),t=e.apply(this,arguments),Object.defineProperty((0,l.Z)(t),"_display",{enumerable:!0,configurable:!0,writable:!0,value:t._root._renderer.makeGraphics()}),Object.defineProperty((0,l.Z)(t),"_backgroundDisplay",{enumerable:!0,configurable:!0,writable:!0,value:t._root._renderer.makeGraphics()}),Object.defineProperty((0,l.Z)(t),"_clear",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty((0,l.Z)(t),"_pattern",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),t}return(0,d.Z)(i,[{key:"_afterNew",value:function(){(0,r.Z)((0,s.Z)(i.prototype),"_afterNewApplyThemes",this).call(this)}},{key:"pattern",get:function(){return this._pattern}},{key:"_draw",value:function(){}},{key:"_beforeChanged",value:function(){(0,r.Z)((0,s.Z)(i.prototype),"_beforeChanged",this).call(this),(this.isDirty("repetition")||this.isDirty("width")||this.isDirty("height")||this.isDirty("rotation")||this.isDirty("strokeWidth")||this.isDirty("strokeDasharray")||this.isDirty("strokeDashoffset")||this.isDirty("colorOpacity")||this.isDirty("fillOpacity"))&&(this._clear=!0),this._checkDirtyFill()}},{key:"_checkDirtyFill",value:function(){(this.isDirty("color")||this.isDirty("fill"))&&(this._clear=!0)}},{key:"_changed",value:function(){if((0,r.Z)((0,s.Z)(i.prototype),"_changed",this).call(this),this._clear){var t=this.get("repetition",""),e=this.get("width",100),n=this.get("height",100),a=this.get("fill"),o=this.get("fillOpacity",1),l=this._backgroundDisplay,u=this._display;u.clear(),l.clear(),a&&o>0&&(l.beginFill(a,o),l.drawRect(0,0,e,n),l.endFill()),u.angle=this.get("rotation",0),this._draw(),this._pattern=this._root._renderer.createPattern(u,l,t,e,n)}this._clear=!1}}]),i}(Ee);Object.defineProperty(Ie,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Pattern"}),Object.defineProperty(Ie,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Ee.classNames.concat([Ie.className])});var Ne,Re=function(t){(0,u.Z)(i,t);var e=(0,h.Z)(i);function i(){var t;return(0,c.Z)(this,i),t=e.apply(this,arguments),Object.defineProperty((0,l.Z)(t),"_image",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),t}return(0,d.Z)(i,[{key:"_beforeChanged",value:function(){(0,r.Z)((0,s.Z)(i.prototype),"_beforeChanged",this).call(this),this._clear=!0,this.isDirty("src")&&this._load();var t=this.get("canvas");t&&(this.set("width",t.width),this.set("height",t.height))}},{key:"_draw",value:function(){(0,r.Z)((0,s.Z)(i.prototype),"_draw",this).call(this);var t=this._image;if(t){var e=this.get("width",100),n=this.get("height",100),a=this.get("fit","image"),o=0,l=0;"pattern"==a?(o=e,l=n):(o=t.width,l=t.height,"image"==a&&(this.set("width",o),this.set("height",l)));var u=0,h=0;this.get("centered",!0)&&(u=e/2-o/2,h=n/2-l/2),this._display.image(t,o,l,u,h)}var c=this.get("canvas");c&&this._display.image(c,c.width,c.height,0,0)}},{key:"_load",value:function(){var t=this,e=this.get("src");if(e){var i=new Image;i.src=e,i.decode().then((function(){t._image=i,t._draw(),t.events.isEnabled("loaded")&&t.events.dispatch("loaded",{type:"loaded",target:t})})).catch((function(t){}))}}}]),i}(Ie);Object.defineProperty(Re,"className",{enumerable:!0,configurable:!0,writable:!0,value:"PicturePattern"}),Object.defineProperty(Re,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Ie.classNames.concat([Re.className])}),function(t){t.ADD="lighter",t.COLOR="color",t.COLOR_BURN="color-burn",t.COLOR_DODGE="color-dodge",t.DARKEN="darken",t.DIFFERENCE="difference",t.DST_OVER="destination-over",t.EXCLUSION="exclusion",t.HARD_LIGHT="hard-light",t.HUE="hue",t.LIGHTEN="lighten",t.LUMINOSITY="luminosity",t.MULTIPLY="multiply",t.NORMAL="source-over",t.OVERLAY="overlay",t.SATURATION="saturation",t.SCREEN="screen",t.SOFT_LIGHT="soft-light",t.SRC_ATOP="source-atop",t.XOR="xor"}(Ne||(Ne={}));var Fe=["fill","fillOpacity","stroke","strokeWidth","strokeOpacity","fillPattern","strokePattern","fillGradient","strokeGradient","strokeDasharray","strokeDashoffset","shadowBlur","shadowColor","shadowOpacity","shadowOffsetX","shadowOffsetY","blur","sepia","invert","brightness","hue","contrast","saturate"],We=function(t){(0,u.Z)(i,t);var e=(0,h.Z)(i);function i(){var t;return(0,c.Z)(this,i),t=e.apply(this,arguments),Object.defineProperty((0,l.Z)(t),"_display",{enumerable:!0,configurable:!0,writable:!0,value:t._root._renderer.makeGraphics()}),Object.defineProperty((0,l.Z)(t),"_clear",{enumerable:!0,configurable:!0,writable:!0,value:!1}),t}return(0,d.Z)(i,[{key:"_beforeChanged",value:function(){var t=this;if((0,r.Z)((0,s.Z)(i.prototype),"_beforeChanged",this).call(this),(this.isDirty("draw")||this.isDirty("svgPath"))&&this.markDirtyBounds(),(this.isDirty("fill")||this.isDirty("stroke")||this.isDirty("visible")||this.isDirty("forceHidden")||this.isDirty("scale")||this.isDirty("fillGradient")||this.isDirty("strokeGradient")||this.isDirty("fillPattern")||this.isDirty("strokePattern")||this.isDirty("fillOpacity")||this.isDirty("strokeOpacity")||this.isDirty("strokeWidth")||this.isDirty("draw")||this.isDirty("blendMode")||this.isDirty("strokeDasharray")||this.isDirty("strokeDashoffset")||this.isDirty("svgPath")||this.isDirty("lineJoin")||this.isDirty("shadowColor")||this.isDirty("shadowBlur")||this.isDirty("shadowOffsetX")||this.isDirty("shadowOffsetY"))&&(this._clear=!0),this._display.crisp=this.get("crisp",!1),this.isDirty("fillGradient")){var e=this.get("fillGradient");if(e){this._display.isMeasured=!0;var n=e.get("target");n&&(this._disposers.push(n.events.on("boundschanged",(function(){t._markDirtyKey("fill")}))),this._disposers.push(n.events.on("positionchanged",(function(){t._markDirtyKey("fill")}))))}}if(this.isDirty("strokeGradient")){var a=this.get("strokeGradient");if(a){this._display.isMeasured=!0;var o=a.get("target");o&&(this._disposers.push(o.events.on("boundschanged",(function(){t._markDirtyKey("stroke")}))),this._disposers.push(o.events.on("positionchanged",(function(){t._markDirtyKey("stroke")}))))}}}},{key:"_changed",value:function(){if((0,r.Z)((0,s.Z)(i.prototype),"_changed",this).call(this),this._clear){this.markDirtyBounds(),this.markDirtyLayer(),this._display.clear();var t=this.get("strokeDasharray");Z(t)&&(t=t<.5?[0]:[t]),this._display.setLineDash(t);var e=this.get("strokeDashoffset");e&&this._display.setLineDashOffset(e);var n=this.get("blendMode",Ne.NORMAL);this._display.blendMode=n;var a=this.get("draw");a&&"function"==typeof a&&a(this._display,this);var o=this.get("svgPath");null!=o&&this._display.svgPath(o)}}},{key:"_afterChanged",value:function(){var t=this;if((0,r.Z)((0,s.Z)(i.prototype),"_afterChanged",this).call(this),this._clear){var e=this.get("fill"),n=this.get("fillGradient"),a=this.get("fillPattern"),o=this.get("fillOpacity"),l=this.get("stroke"),u=this.get("strokeGradient"),h=this.get("strokePattern"),c=this.get("shadowColor"),d=this.get("shadowBlur"),v=this.get("shadowOffsetX"),p=this.get("shadowOffsetY"),f=this.get("shadowOpacity");if(c&&(d||v||p)&&this._display.shadow(c,d,v,p,f),e&&!n&&(this._display.beginFill(e,o),this._display.endFill()),n){if(e){var g=n.get("stops",[]);g.length&&C(g,(function(t){t.color&&!t.colorInherited||!e||(t.color=e,t.colorInherited=!0),(null==t.opacity||t.opacityInherited)&&(t.opacity=o,t.opacityInherited=!0)}))}var y=n.getFill(this);y&&(this._display.beginFill(y,o),this._display.endFill())}if(a){var _=a.pattern;_&&(this._display.beginFill(_,o),this._display.endFill(),a instanceof Re&&a.events.once("loaded",(function(){t._clear=!0,t.markDirty()})))}if(l||u||h){var m=this.get("strokeOpacity"),b=this.get("strokeWidth",1);this.get("nonScalingStroke")&&(b/=this.get("scale",1)),this.get("crisp")&&(b/=this._root._renderer.resolution);var k=this.get("lineJoin");if(l&&!u&&(this._display.lineStyle(b,l,m,k),this._display.endStroke()),u){var w=u.get("stops",[]);w.length&&C(w,(function(t){t.color&&!t.colorInherited||!l||(t.color=l,t.colorInherited=!0),(null==t.opacity||t.opacityInherited)&&(t.opacity=m,t.opacityInherited=!0)}));var P=u.getFill(this);P&&(this._display.lineStyle(b,P,m,k),this._display.endStroke())}if(h){var D=h.pattern;D&&(this._display.lineStyle(b,D,m,k),this._display.endStroke(),h instanceof Re&&h.events.once("loaded",(function(){t._clear=!0,t.markDirty()})))}}this.getPrivate("showingTooltip")&&this.showTooltip()}this._clear=!1}}]),i}(Le);Object.defineProperty(We,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Graphics"}),Object.defineProperty(We,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Le.classNames.concat([We.className])});var Ue=function(t){(0,u.Z)(i,t);var e=(0,h.Z)(i);function i(){return(0,c.Z)(this,i),e.apply(this,arguments)}return(0,d.Z)(i,[{key:"_afterNew",value:function(){(0,r.Z)((0,s.Z)(i.prototype),"_afterNew",this).call(this),this._display.isMeasured=!0,this.setPrivateRaw("trustBounds",!0)}},{key:"_beforeChanged",value:function(){(0,r.Z)((0,s.Z)(i.prototype),"_beforeChanged",this).call(this),(this.isDirty("width")||this.isDirty("height")||this.isPrivateDirty("width")||this.isPrivateDirty("height"))&&(this._clear=!0)}},{key:"_changed",value:function(){(0,r.Z)((0,s.Z)(i.prototype),"_changed",this).call(this),this._clear&&!this.get("draw")&&this._draw()}},{key:"_draw",value:function(){this._display.drawRect(0,0,this.width(),this.height())}},{key:"_updateSize",value:function(){this.markDirty(),this._clear=!0}}]),i}(We);function Ve(t,e){t.get("reverseChildren",!1)?t.children.eachReverse(e):t.children.each(e)}Object.defineProperty(Ue,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Rectangle"}),Object.defineProperty(Ue,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:We.classNames.concat([Ue.className])});var Ke=function(t){(0,u.Z)(i,t);var e=(0,h.Z)(i);function i(){return(0,c.Z)(this,i),e.apply(this,arguments)}return(0,d.Z)(i)}(Ee);Object.defineProperty(Ke,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Layout"}),Object.defineProperty(Ke,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Ee.classNames.concat([Ke.className])});var ze=function(t){(0,u.Z)(i,t);var e=(0,h.Z)(i);function i(){return(0,c.Z)(this,i),e.apply(this,arguments)}return(0,d.Z)(i,[{key:"updateContainer",value:function(t){var e=t.get("paddingLeft",0),i=t.innerWidth(),n=0;Ve(t,(function(t){if(t.isVisible()&&"relative"==t.get("position")){var e=t.get("width");if(e instanceof p){n+=e.value;var r=i*e.value,s=t.get("minWidth",t.getPrivate("minWidth",-1/0));s>r&&(i-=s,n-=e.value);var a=t.get("maxWidth",t.getPrivate("maxWidth",1/0));r>a&&(i-=a,n-=e.value)}else Z(e)||(e=t.width()),i-=e+t.get("marginLeft",0)+t.get("marginRight",0)}})),(i<=0||i==1/0)&&(i=.1),Ve(t,(function(t){if(t.isVisible()&&"relative"==t.get("position")){var e=t.get("width");if(e instanceof p){var r=i*e.value/n-t.get("marginLeft",0)-t.get("marginRight",0),s=t.get("minWidth",t.getPrivate("minWidth",-1/0)),a=t.get("maxWidth",t.getPrivate("maxWidth",1/0));r=Math.min(Math.max(s,r),a),t.setPrivate("width",r)}else t._prevSettings.width instanceof p&&t.setPrivate("width",void 0)}}));var r=e;Ve(t,(function(t){if("relative"==t.get("position"))if(t.isVisible()){var e=t.adjustedLocalBounds(),i=t.get("marginLeft",0),n=t.get("marginRight",0),s=t.get("maxWidth"),a=e.left,o=e.right;s&&o-a>s&&(o=a+s);var l=r+i-a;t.setPrivate("x",l),r=l+o+n}else t.setPrivate("x",void 0)}))}}]),i}(Ke);Object.defineProperty(ze,"className",{enumerable:!0,configurable:!0,writable:!0,value:"HorizontalLayout"}),Object.defineProperty(ze,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Ke.classNames.concat([ze.className])});var Ge=function(t){(0,u.Z)(i,t);var e=(0,h.Z)(i);function i(){return(0,c.Z)(this,i),e.apply(this,arguments)}return(0,d.Z)(i,[{key:"updateContainer",value:function(t){var e=t.get("paddingTop",0),i=t.innerHeight(),n=0;Ve(t,(function(t){if(t.isVisible()&&"relative"==t.get("position")){var e=t.get("height");if(e instanceof p){n+=e.value;var r=i*e.value,s=t.get("minHeight",t.getPrivate("minHeight",-1/0));s>r&&(i-=s,n-=e.value);var a=t.get("maxHeight",t.getPrivate("maxHeight",1/0));r>a&&(i-=a,n-=e.value)}else Z(e)||(e=t.height()),i-=e+t.get("marginTop",0)+t.get("marginBottom",0)}})),(i<=0||i==1/0)&&(i=.1),Ve(t,(function(t){if(t.isVisible()&&"relative"==t.get("position")){var e=t.get("height");if(e instanceof p){var r=i*e.value/n-t.get("marginTop",0)-t.get("marginBottom",0),s=t.get("minHeight",t.getPrivate("minHeight",-1/0)),a=t.get("maxHeight",t.getPrivate("maxHeight",1/0));r=Math.min(Math.max(s,r),a),t.setPrivate("height",r)}else t._prevSettings.height instanceof p&&t.setPrivate("height",void 0)}}));var r=e;Ve(t,(function(t){if("relative"==t.get("position"))if(t.isVisible()){var e=t.adjustedLocalBounds(),i=t.get("marginTop",0),n=e.top,s=e.bottom,a=t.get("maxHeight");a&&s-n>a&&(s=n+a);var o=t.get("marginBottom",0),l=r+i-n;t.setPrivate("y",l),r=l+s+o}else t.setPrivate("y",void 0)}))}}]),i}(Ke);Object.defineProperty(Ge,"className",{enumerable:!0,configurable:!0,writable:!0,value:"VerticalLayout"}),Object.defineProperty(Ge,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Ke.classNames.concat([Ge.className])});var Ye=function(t){(0,u.Z)(i,t);var e=(0,h.Z)(i);function i(){return(0,c.Z)(this,i),e.apply(this,arguments)}return(0,d.Z)(i,[{key:"_afterNew",value:function(){this._setRawDefault("maxColumns",Number.MAX_VALUE),(0,r.Z)((0,s.Z)(i.prototype),"_afterNew",this).call(this)}},{key:"updateContainer",value:function(t){var e=t.get("paddingLeft",0),i=t.get("paddingRight",0),n=t.get("paddingTop",0),r=t.maxWidth()-e-i,s=r,a=1;Ve(t,(function(t){if(t.get("visible")&&t.getPrivate("visible")&&!t.get("forceHidden")&&"absolute"!=t.get("position")){var e=t.width();e<s&&(s=e),e>a&&(a=e)}})),s=he(s,1,r),a=he(a,1,r);var o=1;o=this.get("fixedWidthGrid")?r/a:r/s,o=Math.max(1,Math.floor(o)),o=Math.min(this.get("maxColumns",Number.MAX_VALUE),o);var l=this.getColumnWidths(t,o,a,r),u=n,h=0,c=0;o=l.length;var d=e;Ve(t,(function(t){if("relative"==t.get("position")&&t.isVisible()){var i=t.get("marginTop",0),n=t.get("marginBottom",0),r=t.adjustedLocalBounds(),s=t.get("marginLeft",0),a=t.get("marginRight",0),v=d+s-r.left,p=u+i-r.top;t.setPrivate("x",v),t.setPrivate("y",p),d+=l[h]+a,c=Math.max(c,t.height()+i+n),++h>=o&&(h=0,d=e,u+=c)}}))}},{key:"getColumnWidths",value:function(t,e,i,n){var r=this,s=0,a=[],o=0;return Ve(t,(function(n){var s=n.adjustedLocalBounds();"absolute"!=n.get("position")&&n.isVisible()&&(r.get("fixedWidthGrid")?a[o]=i:a[o]=Math.max(0|a[o],s.right-s.left+n.get("marginLeft",0)+n.get("marginRight",0)),o<t.children.length-1&&(++o==e&&(o=0)))})),C(a,(function(t){s+=t})),s>n?e>2?(e-=1,this.getColumnWidths(t,e,i,n)):[n]:a}}]),i}(Ke);Object.defineProperty(Ye,"className",{enumerable:!0,configurable:!0,writable:!0,value:"GridLayout"}),Object.defineProperty(Ye,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Ke.classNames.concat([Ye.className])});var Xe=function(){function t(){(0,c.Z)(this,t)}return(0,d.Z)(t,null,[{key:"escape",value:function(t){return t.replace(/\[\[/g,this.prefix+"1").replace(/([^\/\]]{1})\]\]/g,"$1"+this.prefix+"2").replace(/\]\]/g,this.prefix+"2").replace(/\{\{/g,this.prefix+"3").replace(/\}\}/g,this.prefix+"4").replace(/\'\'/g,this.prefix+"5")}},{key:"unescape",value:function(t){return t.replace(new RegExp(this.prefix+"1","g"),"[[").replace(new RegExp(this.prefix+"2","g"),"]]").replace(new RegExp(this.prefix+"3","g"),"{{").replace(new RegExp(this.prefix+"4","g"),"}}").replace(new RegExp(this.prefix+"5","g"),"''")}},{key:"cleanUp",value:function(t){return t.replace(/\[\[/g,"[").replace(/\]\]/g,"]").replace(/\{\{/g,"{").replace(/\}\}/g,"}").replace(/\'\'/g,"'")}},{key:"chunk",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=[];t=this.escape(t);for(var r=e?t.split("'"):[t],s=0;s<r.length;s++){var a=r[s];if(""!==a)if(s%2==0)for(var o=(a=(a=a.replace(/\]\[/g,"]"+T+"[")).replace(/\[\]/g,"[ ]")).split(/[\[\]]+/),l=0;l<o.length;l++){var u=this.cleanUp(this.unescape(o[l]));u!==T&&""!==u&&(l%2==0?n.push({type:"value",text:u}):n.push({type:i?"value":"format",text:"["+u+"]"}))}else for(var h=a.split(/[\[\]]+/),c=0;c<h.length;c++){var d=this.cleanUp(this.unescape(h[c]));""!==d&&(c%2==0?n.push({type:"text",text:d}):this.isImage(d)?n.push({type:"image",text:"["+d+"]"}):n.push({type:"format",text:"["+d+"]"}))}}return n}},{key:"isImage",value:function(t){return!!t.match(/img[ ]?:/)}},{key:"getTextStyle",value:function(t){var e={};if(""==t||"[ ]"==t)return{};var i=t.match(/('[^']*')|("[^"]*")/gi);if(i)for(var n=0;n<i.length;n++)t=t.replace(i[n],i[n].replace(/['"]*/g,"").replace(/[ ]+/g,"+"));var r=t.match(/([\w\-]*:[\s]?[^;\s\]]*)|(\#[\w]{1,6})|([\w\-]+)|(\/)/gi);if(!r)return{};for(var s=0;s<r.length;s++)if(r[s].match(/^(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)$/i))e.fontWeight=r[s];else if(r[s].match(/^(underline|line-through)$/i))e.textDecoration=r[s];else if("/"==r[s]);else if(r[s].match(/:/)){var a=r[s].replace("+"," ").split(/:[ ]*/);e[a[0]]=a[1]}else e.fill=zt.fromString(r[s]);return e}}]),t}();function $e(t,e){if(null!=e){e=""+e;var i,n=(e=Xe.escape(e)).match(/\{([^}]+)\}/g);if(n)for(i=0;i<n.length;i++){var r=Je(t,n[i].replace(/\{([^}]+)\}/,"$1"));null==r&&(r=""),e=e.split(n[i]).join(r)}e=Xe.unescape(e)}else e="";return e}function Je(t,e,i){for(var n,r,s=t.dataItem,a=[],o=/(format[a-zA-Z]*)\((.*)\)|([^.]+)/g;null!==(r=o.exec(e));)if(r[3]){a.push({prop:r[3]});var l=t.getDateFormatter().get("dateFields",[]),u=t.getNumberFormatter().get("numericFields",[]),h=t.getDurationFormatter().get("durationFields",[]);-1!==l.indexOf(r[3])?a.push({method:"formatDate",params:[]}):-1!==u.indexOf(r[3])?a.push({method:"formatNumber",params:[]}):-1!==h.indexOf(r[3])&&a.push({method:"formatDuration",params:[]})}else{var c=[];if(""!=wt(r[2]))for(var d=void 0,v=/'([^']*)'|"([^"]*)"|([0-9\-]+)/g;null!==(d=v.exec(r[2]));)c.push(d[1]||d[2]||d[3]);a.push({method:r[1],params:c})}if(s){(null==(n=Qe(t,a,s._settings))||O(n))&&(n=Qe(t,a,s));var p=s.dataContext;null==n&&p&&(null==(n=Qe(t,a,p))&&(n=Qe(t,[{prop:e}],p)),null==n&&p.dataContext&&(n=Qe(t,a,p.dataContext))),null==n&&s.component&&s.component.dataItem!==s&&(n=Je(s.component,e))}return null==n&&(n=Qe(t,a,t)),null==n&&t.parent&&(n=Je(t.parent,e)),n}function qe(t,e){var i=t.getPrivate("customData");if(O(i))return i[e]}function Qe(t,e,i,n){for(var r=i,s=!1,a=0,o=e.length;a<o;a++){var l=e[a];if(l.prop){if(r instanceof Le){var u=r.get(l.prop);null==u&&(u=r.getPrivate(l.prop)),null==u&&(u=qe(r,l.prop)),null==u&&(u=r[l.prop]),r=u}else if(r.get){var h=r.get(l.prop);null==h&&(h=r[l.prop]),r=h}else r=r[l.prop];if(null==r)return}else switch(l.method){case"formatNumber":var c=b(r);null!=c&&(r=t.getNumberFormatter().format(c,l.params[0]||void 0),s=!0);break;case"formatDate":var d=k(r);if(!D(d)||m(d.getTime()))return;null!=d&&(r=t.getDateFormatter().format(d,l.params[0]||void 0),s=!0);break;case"formatDuration":var v=b(r);null!=v&&(r=t.getDurationFormatter().format(v,l.params[0]||void 0,l.params[1]||void 0),s=!0);break;case"urlEncode":case"encodeURIComponent":r=encodeURIComponent(r);break;default:r[l.method]&&r[l.method].apply(i,l.params)}}if(!s){var p=[{method:"",params:n}];Z(r)?(p[0].method="formatNumber",p[0].params=""):D(r)&&(p[0].method="formatDate",p[0].params=""),p[0].method&&(r=Qe(t,p,r))}return r}Object.defineProperty(Xe,"prefix",{enumerable:!0,configurable:!0,writable:!0,value:"__amcharts__"});var ti=function(t){(0,u.Z)(i,t);var e=(0,h.Z)(i);function i(){var t;return(0,c.Z)(this,i),t=e.apply(this,arguments),Object.defineProperty((0,l.Z)(t),"_display",{enumerable:!0,configurable:!0,writable:!0,value:t._root._renderer.makeContainer()}),Object.defineProperty((0,l.Z)(t),"_childrenDisplay",{enumerable:!0,configurable:!0,writable:!0,value:t._root._renderer.makeContainer()}),Object.defineProperty((0,l.Z)(t),"children",{enumerable:!0,configurable:!0,writable:!0,value:new re((0,l.Z)(t))}),Object.defineProperty((0,l.Z)(t),"_percentageSizeChildren",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty((0,l.Z)(t),"_percentagePositionChildren",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty((0,l.Z)(t),"_prevWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty((0,l.Z)(t),"_prevHeight",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty((0,l.Z)(t),"_contentWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty((0,l.Z)(t),"_contentHeight",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty((0,l.Z)(t),"_contentMask",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty((0,l.Z)(t),"_vsbd0",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty((0,l.Z)(t),"_vsbd1",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),t}return(0,d.Z)(i,[{key:"_afterNew",value:function(){(0,r.Z)((0,s.Z)(i.prototype),"_afterNew",this).call(this),this._display.addChild(this._childrenDisplay)}},{key:"_dispose",value:function(){M(this.allChildren(),(function(t){t.dispose()})),this.getPrivate("htmlElement")&&this._root._removeHTMLContent(this),(0,r.Z)((0,s.Z)(i.prototype),"_dispose",this).call(this)}},{key:"_changed",value:function(){if((0,r.Z)((0,s.Z)(i.prototype),"_changed",this).call(this),this.isDirty("interactiveChildren")&&(this._display.interactiveChildren=this.get("interactiveChildren",!1)),this.isDirty("layout")&&(this._prevWidth=0,this._prevHeight=0,this.markDirtyBounds(),this._prevSettings.layout&&this.children.each((function(t){t.removePrivate("x"),t.removePrivate("y")}))),(this.isDirty("paddingTop")||this.isDirty("paddingBottom")||this.isDirty("paddingLeft")||this.isDirty("paddingRight"))&&this.children.each((function(t){t.markDirtyPosition()})),this.isDirty("maskContent")){var t=this._childrenDisplay,e=this._contentMask;this.get("maskContent")?e||(e=Ue.new(this._root,{x:-.5,y:-.5,width:this.width()+1,height:this.height()+1}),this._contentMask=e,t.addChildAt(e._display,0),t.mask=e._display):e&&(t.removeChild(e._display),t.mask=null,e.dispose(),this._contentMask=void 0)}}},{key:"_updateSize",value:function(){(0,r.Z)((0,s.Z)(i.prototype),"_updateSize",this).call(this),C(this._percentageSizeChildren,(function(t){t._updateSize()})),C(this._percentagePositionChildren,(function(t){t.markDirtyPosition(),t._updateSize()})),this.updateBackground()}},{key:"updateBackground",value:function(){var t=this.get("background"),e=this._localBounds;if(e&&!this.isHidden()){var i=e.left,n=e.top,r=e.right-i,s=e.bottom-n,a=this.get("maxWidth"),o=this.get("maxHeight");o&&s>o&&(s=o),a&&r>a&&(r=a);var l=this.width(),u=this.height();t&&(t.setAll({width:r,height:s,x:i,y:n}),this._display.interactive&&(t._display.interactive=!0));var h=this._contentMask;h&&h.setAll({width:l+1,height:u+1});var c=this.get("verticalScrollbar");if(c){c.set("height",u),c.set("x",l-c.width()-c.get("marginRight",0)),c.set("end",c.get("start",0)+u/this._contentHeight);var d=c.get("background");d&&d.setAll({width:c.width(),height:u});var v=!0;this._contentHeight<=u&&(v=!1),c.setPrivate("visible",v)}}}},{key:"_applyThemes",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return!!(0,r.Z)((0,s.Z)(i.prototype),"_applyThemes",this).call(this,t)&&(this.eachChildren((function(e){e._applyThemes(t)})),!0)}},{key:"_applyState",value:function(t){(0,r.Z)((0,s.Z)(i.prototype),"_applyState",this).call(this,t),this.get("setStateOnChildren")&&this.eachChildren((function(e){e.states.apply(t)}))}},{key:"_applyStateAnimated",value:function(t,e){(0,r.Z)((0,s.Z)(i.prototype),"_applyStateAnimated",this).call(this,t,e),this.get("setStateOnChildren")&&this.eachChildren((function(i){i.states.applyAnimate(t,e)}))}},{key:"innerWidth",value:function(){return this.width()-this.get("paddingRight",0)-this.get("paddingLeft",0)}},{key:"innerHeight",value:function(){return this.height()-this.get("paddingTop",0)-this.get("paddingBottom",0)}},{key:"_getBounds",value:function(){var t=this.get("width"),e=this.get("height"),i=this.getPrivate("width"),n=this.getPrivate("height"),r={left:0,top:0,right:this.width(),bottom:this.height()},s=this.get("layout"),a=!1,o=!1;if((s instanceof ze||s instanceof Ye)&&(a=!0),s instanceof Ge&&(o=!0),null==t&&null==i||null==e&&null==n||this.get("verticalScrollbar")){var l=Number.MAX_VALUE,u=l,h=-l,c=l,d=-l,v=this.get("paddingLeft",0),p=this.get("paddingTop",0),f=this.get("paddingRight",0),g=this.get("paddingBottom",0);this.children.each((function(t){if("absolute"!=t.get("position")&&t.get("isMeasured")){var e=t.adjustedLocalBounds(),i=t.x(),n=t.y(),r=i+e.left,s=i+e.right,l=n+e.top,v=n+e.bottom;a&&(r-=t.get("marginLeft",0),s+=t.get("marginRight",0)),o&&(l-=t.get("marginTop",0),v+=t.get("marginBottom",0)),r<u&&(u=r),s>h&&(h=s),l<c&&(c=l),v>d&&(d=v)}})),u==l&&(u=0),h==-l&&(h=0),c==l&&(c=0),d==-l&&(d=0),r.left=u-v,r.top=c-p,r.right=h+f,r.bottom=d+g;var y=this.get("minWidth");Z(y)&&y>0&&r.right-r.left<y&&(r.right>=y?r.left=r.right-y:r.right=r.left+y);var _=this.get("minHeight");Z(_)&&_>0&&r.bottom-r.top<_&&(r.bottom>=_?r.top=r.bottom-_:r.bottom=r.top+_)}this._contentWidth=r.right-r.left,this._contentHeight=r.bottom-r.top,Z(t)&&(r.left=0,r.right=t),Z(i)&&(r.left=0,r.right=i),Z(e)&&(r.top=0,r.bottom=e),Z(n)&&(r.top=0,r.bottom=n),this._localBounds=r}},{key:"_updateBounds",value:function(){var t=this.get("layout");t&&t.updateContainer(this),(0,r.Z)((0,s.Z)(i.prototype),"_updateBounds",this).call(this),this.updateBackground()}},{key:"markDirty",value:function(){(0,r.Z)((0,s.Z)(i.prototype),"markDirty",this).call(this),this._root._addDirtyParent(this)}},{key:"_prepareChildren",value:function(){var t=this.innerWidth(),e=this.innerHeight();if(t!=this._prevWidth||e!=this._prevHeight){var i=this.get("layout"),n=!1,r=!1;i&&((i instanceof ze||i instanceof Ye)&&(n=!0),i instanceof Ge&&(r=!0)),C(this._percentageSizeChildren,(function(i){if(!n){var s=i.get("width");s instanceof p&&i.setPrivate("width",s.value*t)}if(!r){var a=i.get("height");a instanceof p&&i.setPrivate("height",a.value*e)}})),C(this._percentagePositionChildren,(function(t){t.markDirtyPosition(),t.markDirtyBounds()})),this._prevWidth=t,this._prevHeight=e,this._sizeDirty=!0,this.updateBackground()}this._handleStates()}},{key:"_updateHTMLContent",value:function(){var t=this.get("html");t&&""!==t?this._root._setHTMLContent(this,$e(this,this.get("html",""))):this._root._removeHTMLContent(this),this._root._positionHTMLElement(this)}},{key:"_updateChildren",value:function(){var t=this;if(this.isDirty("html")&&this._updateHTMLContent(),this.isDirty("verticalScrollbar")){var e=this.get("verticalScrollbar");if(e){e._setParent(this),e.startGrip.setPrivate("visible",!1),e.endGrip.setPrivate("visible",!1),this.set("maskContent",!0),this.set("paddingRight",e.width()+e.get("marginRight",0)+e.get("marginLeft",0));var i=this.get("background");i||(i=this.set("background",Ue.new(this._root,{themeTags:["background"],fillOpacity:0,fill:this._root.interfaceColors.get("alternativeBackground")}))),this._vsbd0=this.events.on("wheel",(function(i){var n=i.originalEvent;if(ft(n,t)){n.preventDefault();var r=n.deltaY/5e3,s=e.get("start",0),a=e.get("end",1);s+r<=0&&(r=-s),a+r>=1&&(r=1-a),s+r>=0&&a+r<=1&&(e.set("start",s+r),e.set("end",a+r))}})),this._disposers.push(this._vsbd0),this._vsbd1=e.events.on("rangechanged",(function(){var i=t._contentHeight,n=t._childrenDisplay,r=t._contentMask;n.y=-e.get("start",0)*i,n.markDirtyLayer(),r&&(r._display.y=-n.y,n.mask=r._display)})),this._disposers.push(this._vsbd1),this._display.addChild(e._display)}else{var n=this._prevSettings.verticalScrollbar;n&&(this._display.removeChild(n._display),this._vsbd0&&this._vsbd0.dispose(),this._vsbd1&&this._vsbd1.dispose(),this._childrenDisplay.y=0,this.setPrivate("height",void 0),this.set("maskContent",!1),this.set("paddingRight",void 0))}}if(this.isDirty("background")){var r=this._prevSettings.background;r&&this._display.removeChild(r._display);var s=this.get("background");s instanceof Le&&(s.set("isMeasured",!1),s._setParent(this),this._display.addChildAt(s._display,0))}if(this.isDirty("mask")){var a=this.get("mask"),o=this._prevSettings.mask;if(o&&(this._display.removeChild(o._display),o!=a&&o.dispose()),a){var l=a.parent;l&&l.children.removeValue(a),a._setParent(this),this._display.addChildAt(a._display,0),this._childrenDisplay.mask=a._display}}}},{key:"_processTemplateField",value:function(){(0,r.Z)((0,s.Z)(i.prototype),"_processTemplateField",this).call(this),this.children.each((function(t){t._processTemplateField()}))}},{key:"walkChildren",value:function(t){this.children.each((function(e){e instanceof i&&e.walkChildren(t),t(e)}))}},{key:"eachChildren",value:function(t){var e=this.get("background");e&&t(e);var i=this.get("verticalScrollbar");i&&t(i);var n=this.get("mask");n&&t(n),this.children.values.forEach((function(e){t(e)}))}},{key:"allChildren",value:function(){var t=[];return this.eachChildren((function(e){t.push(e)})),t}},{key:"_setDataItem",value:function(t){var e=t!==this._dataItem;(0,r.Z)((0,s.Z)(i.prototype),"_setDataItem",this).call(this,t);var n=this.get("html","");n&&""!==n&&e&&this._root._setHTMLContent(this,$e(this,n))}}]),i}(Le);Object.defineProperty(ti,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Container"}),Object.defineProperty(ti,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Le.classNames.concat([ti.className])});var ei=function(t){(0,u.Z)(i,t);var e=(0,h.Z)(i);function i(){var t;return(0,c.Z)(this,i),t=e.apply(this,arguments),Object.defineProperty((0,l.Z)(t),"textStyle",{enumerable:!0,configurable:!0,writable:!0,value:t._root._renderer.makeTextStyle()}),Object.defineProperty((0,l.Z)(t),"_display",{enumerable:!0,configurable:!0,writable:!0,value:t._root._renderer.makeText("",t.textStyle)}),Object.defineProperty((0,l.Z)(t),"_textStyles",{enumerable:!0,configurable:!0,writable:!0,value:["textAlign","fontFamily","fontSize","fontStyle","fontWeight","fontStyle","fontVariant","textDecoration","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","shadowOpacity","lineHeight","baselineRatio","direction","textBaseline","oversizedBehavior","breakWords","ellipsis","minScale","maxChars"]}),Object.defineProperty((0,l.Z)(t),"_originalScale",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),t}return(0,d.Z)(i,[{key:"_updateBounds",value:function(){if(this.get("text"))(0,r.Z)((0,s.Z)(i.prototype),"_updateBounds",this).call(this);else{this._adjustedLocalBounds={left:0,right:0,top:0,bottom:0}}}},{key:"_changed",value:function(){var t=this;(0,r.Z)((0,s.Z)(i.prototype),"_changed",this).call(this),this._display.clear();var e=this.textStyle;if(this.isDirty("opacity")){var n=this.get("opacity",1);this._display.alpha=n}if((this.isDirty("text")||this.isDirty("populateText"))&&(this._display.text=this._getText(),this.markDirtyBounds(),"tooltip"==this.get("role")&&this._root.updateTooltip(this)),this.isPrivateDirty("tooltipElement")&&this.getPrivate("tooltipElement")&&this._disposers.push(new Q((function(){t._root._removeTooltipElement(t)}))),this.isDirty("width")&&(e.wordWrapWidth=this.width(),this.markDirtyBounds()),this.isDirty("oversizedBehavior")&&(e.oversizedBehavior=this.get("oversizedBehavior","none"),this.markDirtyBounds()),this.isDirty("breakWords")&&(e.breakWords=this.get("breakWords",!1),this.markDirtyBounds()),this.isDirty("ellipsis")&&(e.ellipsis=this.get("ellipsis"),this.markDirtyBounds()),this.isDirty("ignoreFormatting")&&(e.ignoreFormatting=this.get("ignoreFormatting",!1),this.markDirtyBounds()),this.isDirty("minScale")&&(e.minScale=this.get("minScale",0),this.markDirtyBounds()),this.isDirty("fill")){var a=this.get("fill");a&&(e.fill=a)}if(this.isDirty("fillOpacity")){var o=this.get("fillOpacity",1);o&&(e.fillOpacity=o)}(this.isDirty("maxWidth")||this.isPrivateDirty("maxWidth"))&&(e.maxWidth=this.get("maxWidth",this.getPrivate("maxWidth")),this.markDirtyBounds()),(this.isDirty("maxHeight")||this.isPrivateDirty("maxHeight"))&&(e.maxHeight=this.get("maxHeight",this.getPrivate("maxHeight")),this.markDirtyBounds()),C(this._textStyles,(function(i){t._dirty[i]&&(e[i]=t.get(i),t.markDirtyBounds())})),e.fontSize=this.get("fontSize"),e.fontFamily=this.get("fontFamily"),this._display.style=e,this.isDirty("role")&&"tooltip"==this.get("role")&&this._root.updateTooltip(this)}},{key:"_getText",value:function(){var t=this.get("text","");return this.get("maxChars")&&(t=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"...";if(t.length>e){for(var r=e-1;r>=0&&t.charAt(r).match(/\w/);)r--;return r>=0&&0==i?t.substring(0,r+1)+"...":t.substring(0,e)+n}return t}(t,this.get("maxChars",1e8),this.get("breakWords"),this.get("ellipsis"))),this.get("populateText")?$e(this,t):t}},{key:"_getAccessibleText",value:function(){var t=this.get("ariaLabel");return void 0!==t?this.get("populateText")?$e(this,t):t:this._getText()}},{key:"markDirtyText",value:function(){this._display.text=this._getText(),"tooltip"==this.get("role")&&this._root.updateTooltip(this),this.markDirtyBounds(),this.markDirty()}},{key:"_setDataItem",value:function(t){(0,r.Z)((0,s.Z)(i.prototype),"_setDataItem",this).call(this,t),this.get("populateText")&&this.markDirtyText()}},{key:"getNumberFormatter",value:function(){return this.parent?this.parent.getNumberFormatter():(0,r.Z)((0,s.Z)(i.prototype),"getNumberFormatter",this).call(this)}},{key:"getDateFormatter",value:function(){return this.parent?this.parent.getDateFormatter():(0,r.Z)((0,s.Z)(i.prototype),"getDateFormatter",this).call(this)}},{key:"getDurationFormatter",value:function(){return this.parent?this.parent.getDurationFormatter():(0,r.Z)((0,s.Z)(i.prototype),"getDurationFormatter",this).call(this)}}]),i}(Le);Object.defineProperty(ei,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Text"}),Object.defineProperty(ei,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Le.classNames.concat([ei.className])});var ii=function(t){(0,u.Z)(i,t);var e=(0,h.Z)(i);function i(){var t;return(0,c.Z)(this,i),t=e.apply(this,arguments),Object.defineProperty((0,l.Z)(t),"_text",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty((0,l.Z)(t),"_textKeys",{enumerable:!0,configurable:!0,writable:!0,value:["text","fill","fillOpacity","textAlign","fontFamily","fontSize","fontStyle","fontWeight","fontStyle","fontVariant","textDecoration","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","shadowOpacity","lineHeight","baselineRatio","direction","textBaseline","oversizedBehavior","breakWords","ellipsis","minScale","populateText","role","ignoreFormatting","maxChars","ariaLabel"]}),t}return(0,d.Z)(i,[{key:"text",get:function(){return this._text}},{key:"_afterNew",value:function(){var t=this;(0,r.Z)((0,s.Z)(i.prototype),"_afterNew",this).call(this),this._makeText(),C(this._textKeys,(function(e){var i=t.get(e);null!=i&&t._text.set(e,i)})),""!==this.get("html","")&&this._text.set("text",""),this.onPrivate("maxWidth",(function(){t._setMaxDimentions()})),this.onPrivate("maxHeight",(function(){t._setMaxDimentions()}))}},{key:"_makeText",value:function(){this._text=this.children.push(ei.new(this._root,{}))}},{key:"_updateChildren",value:function(){var t=this;(0,r.Z)((0,s.Z)(i.prototype),"_updateChildren",this).call(this);var e=this._text;if(C(this._textKeys,(function(e){t._text.set(e,t.get(e))})),(this.isDirty("maxWidth")||this.isDirty("maxHeight")||this.isDirty("rotation"))&&this._setMaxDimentions(),""!==this.get("html","")?e.set("text",""):(e.set("text",this.get("text")),this._maybeUpdateHTMLColor()),this.isDirty("fill")&&this._maybeUpdateHTMLColor(),this.isDirty("textAlign")||this.isDirty("width")){var n,a=this.get("textAlign");null!=this.get("width")?n="right"==a?y:"center"==a?_:0:"left"==a||"start"==a?n=this.get("paddingLeft",0):"right"!=a&&"end"!=a||(n=-this.get("paddingRight",0)),e.set("x",n)}var o=this.get("background");o&&o.setPrivate("visible",e._display.textVisible)}},{key:"_maybeUpdateHTMLColor",value:function(){var t=this.getPrivate("htmlElement");t&&this.get("fill")&&(t.style.color=this.get("fill").toCSSHex())}},{key:"_setMaxDimentions",value:function(){var t=this.get("rotation"),e=90==t||270==t||-90==t,i=this._text,n=this.get("maxWidth",this.getPrivate("maxWidth",1/0));Z(n)?i.set(e?"maxHeight":"maxWidth",n-this.get("paddingLeft",0)-this.get("paddingRight",0)):i.set(e?"maxHeight":"maxWidth",void 0);var r=this.get("maxHeight",this.getPrivate("maxHeight",1/0));Z(r)?i.set(e?"maxWidth":"maxHeight",r-this.get("paddingTop",0)-this.get("paddingBottom",0)):i.set(e?"maxWidth":"maxHeight",void 0),this.root.events.once("frameended",(function(){i.markDirtyBounds()}))}},{key:"_setDataItem",value:function(t){(0,r.Z)((0,s.Z)(i.prototype),"_setDataItem",this).call(this,t),this._markDirtyKey("text");var e=this._text;e.get("populateText")&&e.markDirtyText();var n=this.get("html");n&&""!==n&&this._updateHTMLContent()}},{key:"getText",value:function(){return this._text._getText()}},{key:"getAccessibleText",value:function(){return this._text._getAccessibleText()}}]),i}(ti);Object.defineProperty(ii,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Label"}),Object.defineProperty(ii,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:ti.classNames.concat([ii.className])});var ni=function(){function t(e,i){if((0,c.Z)(this,t),Object.defineProperty(this,"_root",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_rules",{enumerable:!0,configurable:!0,writable:!0,value:{}}),this._root=e,!i)throw new Error("You cannot use `new Class()`, instead use `Class.new()`")}return(0,d.Z)(t,[{key:"setupDefaultRules",value:function(){}},{key:"_lookupRules",value:function(t){return this._rules[t]}},{key:"ruleRaw",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=this._rules[t];i||(i=this._rules[t]=[]),e.sort(De);var n=V(i,(function(t){var i=De(t.tags.length,e.length);return 0===i?xe(t.tags,e,De):i})),r=n.index,s=n.found;if(s)return i[r].template;var a=Be.new({});return i.splice(r,0,{tags:e,template:a}),a}},{key:"rule",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return this.ruleRaw(t,e)}}],[{key:"new",value:function(t){var e=new this(t,!0);return e.setupDefaultRules(),e}}]),t}()}}]);
//# sourceMappingURL=24390.45ea358c.chunk.js.map