"use strict";(self.webpackChunkreact_training=self.webpackChunkreact_training||[]).push([[45276],{62734:function(e,r,n){n.d(r,{$8:function(){return l},a8:function(){return o}});var t=n(1413),i=n(76969),a=n(37270),u=(n(819),n(23037),n(6701));new Set(["integer","small-integer"]);function o(e){return(0,a.y2)(e)||(0,a.UQ)(e)||(0,a.ig)(e)}function l(e,r){var n,a,o,l=null!==r&&void 0!==r?r:{},f=l.format,s=l.timeZoneOptions,c=l.fieldType;if(s&&(a=(n=(0,u.Np)(s.layerTimeZone,s.datesInUnknownTimezone,s.viewTimeZone,(0,i.Ze)(f||"short-date-short-time"),c)).timeZone,o=n.timeZoneName),"string"==typeof e&&isNaN(Date.parse("time-only"===c?"1970-01-01T".concat(e,"Z"):e)))return e;switch(c){case"date-only":var d=(0,i.Ze)(f||"short-date");return"string"==typeof e?(0,i.o8)(e,(0,t.Z)({},d)):(0,i.p6)(e,(0,t.Z)((0,t.Z)({},d),{},{timeZone:u.pt}));case"time-only":var p=(0,i.Ze)(f||"short-time");return"string"==typeof e?(0,i.LJ)(e,p):(0,i.p6)(e,(0,t.Z)((0,t.Z)({},p),{},{timeZone:u.pt}));case"timestamp-offset":if(!a&&"string"==typeof e&&new Date(e).toISOString()!==e)return e;var y=f||s?(0,i.Ze)(f||"short-date-short-time"):void 0,v=y?(0,t.Z)((0,t.Z)({},y),{},{timeZone:a,timeZoneName:o}):void 0;return"string"==typeof e?(0,i.i$)(e,v):(0,i.p6)(e,v);default:var m=f||s?(0,i.Ze)(f||"short-date-short-time"):void 0;return(0,i.p6)("string"==typeof e?new Date(e):e,m?(0,t.Z)((0,t.Z)({},m),{},{timeZone:a,timeZoneName:o}):void 0)}}},45276:function(e,r,n){n.d(r,{EB:function(){return K},Hs:function(){return V},JD:function(){return A},K7:function(){return ne},M3:function(){return W},Ns:function(){return pe},Qu:function(){return $},Rd:function(){return M},S$:function(){return S},T2:function(){return ye},Tj:function(){return B},Um:function(){return Q},Xh:function(){return ue},_R:function(){return X},ar:function(){return z},iJ:function(){return U},k6:function(){return R},l$:function(){return L},oM:function(){return le},or:function(){return q},qD:function(){return Y},s5:function(){return de},tJ:function(){return J},uI:function(){return re},vD:function(){return E},wi:function(){return he}});var t=n(74165),i=n(93433),a=n(37762),u=n(1413),o=n(15861),l=n(32718),f=n(643),s=n(76969),c=n(6291),d=n(37270),p=n(37933),y=n(62734),v=n(819),m=n(6701),h=function(){return l.Z.getLogger("esri.widgets.Feature.support.featureUtils")},b=/href=(""|'')/gi,g=/(\{([^{\r\n]+)\})/g,Z=/'/g,I=/^\s*expression\//i,T=/(\n)/gi,w=/[\u00A0-\u9999<>&]/gim,x=/href\s*=\s*(?:"([^"]+)"|'([^']+)')/gi,N=/^(?:mailto:|tel:)/,F="relationships/",k=(0,s.Ze)("short-date-short-time");function L(e){var r;if(null!=e)return null!==(r=e.sourceLayer||e.layer)&&void 0!==r?r:void 0}function E(e){return C.apply(this,arguments)}function C(){return(C=(0,o.Z)((0,t.Z)().mark((function e(r){var n,i,a;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.type,i=r.value,a=r.event,e.prev=1,e.abrupt("return","function"==typeof i?i(a):i);case 5:return e.prev=5,e.t0=e.catch(1),e.abrupt("return",void h().error("error",'An error occurred when calling the "'.concat(n,'" function'),{error:e.t0,graphic:a.graphic,value:i}));case 8:case"end":return e.stop()}}),e,null,[[1,5]])})))).apply(this,arguments)}function q(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(e)return!N.test(e.trim().toLowerCase())}function M(e){return!!e&&I.test(e)}function A(e,r){var n=function(e,r){if(r&&M(r)&&e){var n=r.replace(I,"").toLowerCase();return e.find((function(e){return e.name.toLowerCase()===n}))}}(r,null===e||void 0===e?void 0:e.fieldName);return n?n.title||null:e?e.label||e.fieldName:null}function R(e,r){var n=j(r,e);return n?n.name:e}function U(e,r){return e&&e.map((function(e){return R(e,r)}))}function j(e,r){var n;return e&&"function"==typeof e.getField&&r&&null!==(n=e.getField(r))&&void 0!==n?n:null}function D(e){return"".concat(e).trim()}function S(e){var r=e.attributes,n=e.globalAttributes,t=e.layer,i=e.text,a=e.expressionAttributes,o=e.fieldInfoMap;return i?z({formattedAttributes:n,template:_(i,(0,u.Z)((0,u.Z)((0,u.Z)({},n),a),r),t),fieldInfoMap:o}):""}function z(e){var r=e.formattedAttributes,n=e.template,t=e.fieldInfoMap;return D(function(e){return e.replaceAll(b,"")}((0,f.gx)((0,f.gx)(n,(function(e){return function(e,r){var n=r.get(e.toLowerCase());return"{".concat((null===n||void 0===n?void 0:n.fieldName)||e,"}")}(e,t)})),r)))}function O(e,r){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],t=r[e];if("string"==typeof t){var i="%27",a=(n?encodeURIComponent(t):t).replaceAll(Z,i);r[e]=a}}function G(e,r,n){var t=(r=D(r))&&"{"!==r[0];return(0,f.gx)(e,function(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=(0,u.Z)({},e);return Object.keys(n).forEach((function(e){return O(e,n,r)})),n}(n,t||!1))}function $(e,r){return e.replaceAll(g,(function(e,n,t){var i=j(r,t);return i?"{".concat(i.name,"}"):n}))}function _(e,r,n){var t=$(e,n);return t?t.replaceAll(x,(function(e,n,t){return G(e,n||t,r)})):t}function Q(e){return function(e){return null!=e&&"object"==typeof e&&"fieldsIndex"in e&&"geometryType"in e&&"getField"in e&&"load"in e&&"loaded"in e&&"objectIdField"in e&&"spatialReference"in e&&"type"in e&&("feature"===e.type||"scene"===e.type||"sublayer"===e.type)&&"when"in e}(e)&&function(e){return null!=e&&"object"==typeof e&&"createQuery"in e&&"queryFeatureCount"in e&&"queryObjectIds"in e&&"queryRelatedFeatures"in e&&"queryRelatedFeaturesCount"in e&&"relationships"in e}(e)}function J(e){return!!e&&"object"==typeof e&&"sourceLayer"in e&&Q(e.sourceLayer)}function H(e,r){var n=r.fieldInfos,t=r.fieldName,i=r.preventPlacesFormatting,a=r.layer,o=r.timeZone,l=X(n,t),f=j(a,t);if(l&&!(0,d.Ec)(t)){var s,p=null===f||void 0===f?void 0:f.type,v=null===(s=l.format)||void 0===s?void 0:s.dateFormat;if("date"===p||"date-only"===p||"time-only"===p||"timestamp-offset"===p||v)return(0,y.$8)(e,{format:v,fieldType:p,timeZoneOptions:{layerTimeZone:a&&"preferredTimeZone"in a?a.preferredTimeZone:null,viewTimeZone:o,datesInUnknownTimezone:!(!a||!("datesInUnknownTimezone"in a))&&!!a.datesInUnknownTimezone}})}var m=null===l||void 0===l?void 0:l.format;return"string"==typeof e&&(0,d.Ec)(t)&&m?function(e,r){return e=e.trim(),/\d{2}-\d{2}/.test(e)?e:e.includes(",")?P(e,",",", ",r):e.includes(";")?P(e,";","; ",r):e.includes(" ")?P(e," "," ",r):(0,c.uf)(Number(e),(0,c.sh)(r))}(e,m):"string"==typeof(e=function(e,r){if("string"==typeof e&&r&&null==r.dateFormat&&(null!=r.places||null!=r.digitSeparator)){var n=Number(e);if(!isNaN(n))return n}return e}(e,m))||null==e||null==m?Y(e):(0,c.uf)(e,i?(0,u.Z)((0,u.Z)({},(0,c.sh)(m)),{},{minimumFractionDigits:0,maximumFractionDigits:20}):(0,c.sh)(m))}function P(e,r,n,t){return e.trim().split(r).map((function(e){return(0,c.uf)(Number(e),(0,c.sh)(t))})).join(n)}function X(e,r){if(null!==e&&void 0!==e&&e.length&&r)return e.find((function(e){var n;return(null===(n=e.fieldName)||void 0===n?void 0:n.toLowerCase())===r.toLowerCase()}))}function B(e,r,n,t){var i=e.creatorField,a=e.creationDateField,o=e.editorField,l=e.editDateField;if(r){var f=(0,m.Np)(t&&"preferredTimeZone"in t?t.preferredTimeZone:null,!(!t||!("datesInUnknownTimezone"in t))&&!!t.datesInUnknownTimezone,n,k,"date"),c=(0,u.Z)((0,u.Z)({},k),f),d=r[l];if("number"==typeof d){var p=r[o];return{type:"edit",date:(0,s.p6)(d,c),user:p}}var y=r[a];if("number"==typeof y){var v=r[i];return{type:"create",date:(0,s.p6)(y,c),user:v}}return null}}function K(e,r){var n=new Map;if(!e)return n;var t,i=(0,a.Z)(e);try{for(i.s();!(t=i.n()).done;){var u=t.value;if(u.fieldName){var o=R(u.fieldName,r);u.fieldName=o,n.set(o.toLowerCase(),u)}}}catch(l){i.e(l)}finally{i.f()}return n}function V(e){var r=[];if(!e)return r;var n=e.fieldInfos,t=e.content;return n&&r.push.apply(r,(0,i.Z)(n)),t&&Array.isArray(t)?(t.forEach((function(e){if("fields"===e.type){var n=null===e||void 0===e?void 0:e.fieldInfos;n&&r.push.apply(r,(0,i.Z)(n))}})),r):r}function W(e){return e.replaceAll(w,(function(e){return"&#".concat(e.charCodeAt(0),";")}))}function Y(e){return"string"==typeof e?e.replaceAll(T,'<br class="esri-text-new-line" />'):e}function ee(e){var r,n=e.value,t=e.fieldName,i=e.fieldInfos,a=e.fieldInfoMap,u=e.layer,o=e.graphic,l=e.timeZone;if(null==n)return"";var f=function(e){var r=e.fieldName,n=e.value,t=e.graphic,i=e.layer;if(le(r))return null;if(!i||"function"!=typeof i.getFieldDomain)return null;var a=t&&i.getFieldDomain(r,{feature:t});return a&&"coded-value"===a.type?a.getName(n):null}({fieldName:t,value:n,graphic:o,layer:u});if(f)return f;var s=function(e){var r=e.fieldName,n=e.graphic,t=e.layer;if(le(r))return null;if(!t||"function"!=typeof t.getFeatureType)return null;var i=t.typeIdField;if(!i||r!==i)return null;var a=t.getFeatureType(n);return a?a.name:null}({fieldName:t,graphic:o,layer:u});if(s)return s;if(a.get(t.toLowerCase()))return H(n,{fieldInfos:i||Array.from(a.values()),fieldName:t,layer:u,timeZone:l});var c=null===u||void 0===u||null===(r=u.fieldsIndex)||void 0===r?void 0:r.get(t);return c&&((0,y.a8)(c)||(0,d.sX)(c))?(0,y.$8)(n,{fieldType:c.type,timeZoneOptions:{layerTimeZone:u&&"preferredTimeZone"in u?u.preferredTimeZone:null,viewTimeZone:l,datesInUnknownTimezone:!(!u||!("datesInUnknownTimezone"in u))&&!!u.datesInUnknownTimezone}}):Y(n)}function re(e){var r=e.fieldInfos,n=e.attributes,t=e.layer,i=e.graphic,a=e.fieldInfoMap,u=e.relatedInfos,o=e.timeZone,l={};return null!==u&&void 0!==u&&u.forEach((function(e){return function(e){var r,n,t=e.attributes,i=e.relatedInfo,a=e.fieldInfoMap,u=e.fieldInfos,o=e.layer,l=e.timeZone;t&&i&&(null!==(r=i.relatedFeatures)&&void 0!==r&&r.forEach((function(e){return fe({attributes:t,graphic:e,relatedInfo:i,fieldInfoMap:a,fieldInfos:u,layer:o,timeZone:l})})),null===(n=i.relatedStatsFeatures)||void 0===n||n.forEach((function(e){return fe({attributes:t,graphic:e,relatedInfo:i,fieldInfoMap:a,fieldInfos:u,layer:o,timeZone:l})})))}({attributes:l,relatedInfo:e,fieldInfoMap:a,fieldInfos:r,layer:t,timeZone:o})})),n&&Object.keys(n).forEach((function(e){var u=n[e];l[e]=ee({fieldName:e,fieldInfos:r,fieldInfoMap:a,layer:t,value:u,graphic:i,timeZone:o})})),l}function ne(e,r){return te.apply(this,arguments)}function te(){return(te=(0,o.Z)((0,t.Z)().mark((function e(r,n){var i,a,u,o,l,f,s,c,d,y,v,m;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=r.layer,o=r.graphic,l=r.outFields,f=r.objectIds,s=r.returnGeometry,c=r.spatialReference,"number"==typeof(d=f[0])||"string"==typeof d){e.next=4;break}return"Could not query required fields for the specified feature. The feature's ID is invalid.",y={layer:u,graphic:o,objectId:d,requiredFields:l},e.abrupt("return",(h().warn("Could not query required fields for the specified feature. The feature's ID is invalid.",y),null));case 4:if(null!==(i=(0,p.S1)(u))&&void 0!==i&&null!==(a=i.operations)&&void 0!==a&&a.supportsQuery){e.next=7;break}return"The specified layer cannot be queried. The following fields will not be available.",v={layer:u,graphic:o,requiredFields:l,returnGeometry:s},e.abrupt("return",(h().warn("The specified layer cannot be queried. The following fields will not be available.",v),null));case 7:return(m=u.createQuery()).objectIds=f,m.outFields=null!==l&&void 0!==l&&l.length?l:[u.objectIdField],m.returnGeometry=!!s,m.returnZ=!!s,m.returnM=!!s,m.outSpatialReference=c,e.next=11,u.queryFeatures(m,n);case 11:return e.abrupt("return",e.sent.features[0]);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ie(e){return ae.apply(this,arguments)}function ae(){return(ae=(0,o.Z)((0,t.Z)().mark((function e(r){var n,i,a;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(n=r.expressionInfos)&&void 0!==n&&n.length){e.next=2;break}return e.abrupt("return",!1);case 2:return e.next=4,(0,v.LC)();case 4:return i=e.sent,a=i.arcadeUtils.hasGeometryFunctions,e.abrupt("return",a(r));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ue(e,r){return oe.apply(this,arguments)}function oe(){return(oe=(0,o.Z)((0,t.Z)().mark((function e(r,n){var a,o,l,f,s,c,p,y,v,m,h,b;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r.graphic,o=r.popupTemplate,l=r.layer,f=r.spatialReference,l&&o){e.next=3;break}return e.abrupt("return");case 3:if(e.t0="function"==typeof l.load,!e.t0){e.next=7;break}return e.next=7,l.load(n);case 7:if(a.attributes){e.next=9;break}return e.abrupt("return");case 9:if(s=l.objectIdField,null!=(c=a.attributes[s])){e.next=12;break}return e.abrupt("return");case 12:return p=[c],e.next=15,o.getRequiredFields(l.fieldsIndex);case 15:if(y=e.sent,v=(0,d.R9)(y,a),m=v?[]:y.includes(s)?y:[].concat((0,i.Z)(y),[s]),e.t1=o.returnGeometry,e.t1){e.next=23;break}return e.next=22,ie(o);case 22:e.t1=e.sent;case 23:if(h=e.t1,!v||h){e.next=26;break}return e.abrupt("return");case 26:return e.next=28,ne({layer:l,graphic:a,outFields:m,objectIds:p,returnGeometry:h,spatialReference:f},n);case 28:(b=e.sent)&&(b.geometry&&(a.geometry=b.geometry),b.attributes&&(a.attributes=(0,u.Z)((0,u.Z)({},a.attributes),b.attributes)));case 30:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function le(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return!!e&&e.includes(F)}function fe(e){var r=e.attributes,n=e.graphic,t=e.relatedInfo,i=e.fieldInfos,a=e.fieldInfoMap,u=e.layer,o=e.timeZone;r&&n&&t&&Object.keys(n.attributes).forEach((function(e){var l=function(e){return e?"".concat(F).concat(e.layerId,"/").concat(e.fieldName):""}({layerId:t.relation.id.toString(),fieldName:e}),f=n.attributes[e];r[l]=ee({fieldName:l,fieldInfos:i,fieldInfoMap:a,layer:u,value:f,graphic:n,timeZone:o})}))}var se=function(e){if(!e)return!1;var r=e.toUpperCase();return r.includes("CURRENT_TIMESTAMP")||r.includes("CURRENT_DATE")||r.includes("CURRENT_TIME")},ce=function(e){var r,n,t=e.layer,i=e.method,a=e.query,u=e.definitionExpression;if(null!==(r=t.capabilities)&&void 0!==r&&null!==(n=r.query)&&void 0!==n&&n.supportsCacheHint&&"attachments"!==i){var o=null!=a.where?a.where:null,l=null!=a.geometry?a.geometry:null;se(u)||se(o)||"extent"===(null===l||void 0===l?void 0:l.type)||"tile"===a.resultType||(a.cacheHint=!0)}},de=function(e){var r,n=e.query,t=e.layer,i=e.method;ce({layer:t,method:i,query:n,definitionExpression:"".concat(t.definitionExpression," ").concat(null!==(r=t.serviceDefinitionExpression)&&void 0!==r?r:"")})},pe=function(e){var r,n=e.queryPayload,t=e.layer,i=e.method;ce({layer:t,method:i,query:n,definitionExpression:"".concat(t.definitionExpression," ").concat(null!==(r=t.serviceDefinitionExpression)&&void 0!==r?r:"")})};function ye(e,r,n){var t,i;return e&&r&&n?"sublayer"===r.type?me({layers:null===(t=r.layer)||void 0===t?void 0:t.sublayers,map:e,relatedLayer:r,relationship:n})||me({layers:null===(i=r.layer)||void 0===i?void 0:i.subtables,map:e,relatedLayer:r,relationship:n}):me({layers:e.allLayers,map:e,relatedLayer:r,relationship:n})||me({layers:e.allTables,map:e,relatedLayer:r,relationship:n}):null}function ve(e,r){return null===e||void 0===e?void 0:e.allTables.find((function(e){var n;return"feature"===e.type&&e.layerId===r.id&&e.url===(null===(n=r.layer)||void 0===n?void 0:n.url)}))}function me(e){var r=e.map,n=e.relationship,t=e.relationship.relatedTableId,i=e.relatedLayer,u=e.layers;if(!u)return null;var o,l=(0,a.Z)(u);try{for(l.s();!(o=l.n()).done;){var f,s=o.value;if("map-image"!==s.type){if(Q(s))if("sublayer"!==i.type){var c="scene"===i.type&&i.associatedLayer?i.associatedLayer.url:i.url;if(!c)return null;if("sublayer"!==s.type){if(s!==i&&s.url===c&&s.layerId===t)return s}else if(s!==i&&(null===(f=s.layer)||void 0===f?void 0:f.url)===c&&s.id===t)return s.isTable?ve(r,s):s}else if(s!==i&&s.id===t)return s.isTable?ve(r,s):s}else{var d=me({layers:s.sublayers,map:r,relatedLayer:i,relationship:n})||me({layers:s.subtables,map:r,relatedLayer:i,relationship:n});if(d)return d}}}catch(p){l.e(p)}finally{l.f()}return null}function he(e){var r=e.getObjectId();return null!=r?"oid:".concat(r):"uid:".concat(e.uid)}}}]);
//# sourceMappingURL=45276.2db390d1.chunk.js.map