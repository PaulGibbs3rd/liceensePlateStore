{"version":3,"file":"static/js/7199.ea9e5f93.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/libs/vxl/enums.js","../node_modules/@arcgis/core/libs/vxl/VxlModule.js","../node_modules/@arcgis/core/layers/VoxelWasmPerSceneView.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nvar e,i,t,n,a,o;!function(e){e[e.Binary=0]=\"Binary\",e[e.JSON=1]=\"JSON\"}(e||(e={})),function(e){e[e.TreeIndex=0]=\"TreeIndex\",e[e.TreeStats=1]=\"TreeStats\",e[e.TreeData=2]=\"TreeData\",e[e.BrickBundles=3]=\"BrickBundles\",e[e.Section=4]=\"Section\",e[e.VariableStats=5]=\"VariableStats\"}(i||(i={})),function(e){e[e.None=1]=\"None\",e[e.Front=2]=\"Front\",e[e.Back=3]=\"Back\"}(t||(t={})),function(e){e[e.Low=0]=\"Low\",e[e.Medium=1]=\"Medium\",e[e.High=2]=\"High\"}(n||(n={})),function(e){e[e.None=0]=\"None\",e[e.StaticSections=1]=\"StaticSections\",e[e.Slices=2]=\"Slices\",e[e.DynamicSections=4]=\"DynamicSections\",e[e.GhostShell=8]=\"GhostShell\",e[e.Isosurface=16]=\"Isosurface\",e[e.Quality=32]=\"Quality\",e[e.SunLocation=64]=\"SunLocation\",e[e.StaticSectionSelection=128]=\"StaticSectionSelection\",e[e.ExaggerationAndOffset=256]=\"ExaggerationAndOffset\",e[e.CurrentTime=512]=\"CurrentTime\",e[e.CurrentVariable=1024]=\"CurrentVariable\",e[e.DeleteIsosurface=2048]=\"DeleteIsosurface\",e[e.ContainerVisibility=4096]=\"ContainerVisibility\",e[e.RenderMode=8192]=\"RenderMode\",e[e.Optimization=16384]=\"Optimization\",e[e.VariableStyles=32768]=\"VariableStyles\",e[e.VolumeStyles=65536]=\"VolumeStyles\",e[e.AnalysisSlice=131072]=\"AnalysisSlice\"}(a||(a={})),function(e){e[e.Isosurfaces=0]=\"Isosurfaces\",e[e.DynamicSections=1]=\"DynamicSections\",e[e.StaticSections=2]=\"StaticSections\"}(o||(o={}));export{o as ContainerType,a as UpdateFlags,i as VoxelRequestType,t as WasmCullMode,n as WasmRenderingQuality,e as WasmResponseType};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{getAssetUrl as t}from\"../../assets.js\";function e(t){return new Promise((e=>import(\"../../chunks/vxlLayer.js\").then((t=>t.v)).then((({default:n})=>{const r=n({locateFile:i,preinitializedWebGLContext:t,onRuntimeInitialized:()=>e(r)})})))).catch((t=>{throw t}))}function i(e){return t(`esri/libs/vxl/${e}`)}export{e as loadVoxelWASM};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import t from\"../Graphic.js\";import s from\"../request.js\";import has from\"../core/has.js\";import r from\"../core/Logger.js\";import{isAbortError as i}from\"../core/promiseUtils.js\";import{watch as a,initial as n}from\"../core/reactiveUtils.js\";import{convertTime as o}from\"../core/timeUtils.js\";import{property as l}from\"../core/accessorSupport/decorators/property.js\";import\"../core/RandomLCG.js\";import{subclass as h}from\"../core/accessorSupport/decorators/subclass.js\";import{p as d}from\"../chunks/vec32.js\";import{create as u}from\"../core/libs/gl-matrix-2/factories/vec3f64.js\";import{renderSRFromViewSR as _}from\"../geometry/support/coordinateSystem.js\";import{PointIndex as c,PlaneIndex as m}from\"../geometry/support/frustum.js\";import{WasmCullMode as g,VoxelRequestType as f,UpdateFlags as p,ContainerType as x}from\"../libs/vxl/enums.js\";import{loadVoxelWASM as y}from\"../libs/vxl/VxlModule.js\";import{ViewingMode as v}from\"../views/ViewingMode.js\";import{VoxelTarget as b}from\"../views/3d/layers/i3s/Intersector.js\";import{Frustum as w}from\"../views/3d/state/Frustum.js\";import{RenderCoordsHelper as T}from\"../views/3d/support/RenderCoordsHelper.js\";import{SyncRenderPlugin as R}from\"../views/3d/webgl-engine/effects/RenderPlugin.js\";import{newIntersectorResult as L}from\"../views/3d/webgl-engine/lib/Intersector.js\";import{IntersectorType as V,StoreResults as E}from\"../views/3d/webgl-engine/lib/IntersectorInterfaces.js\";import{RenderFeature as C}from\"../views/3d/webgl-engine/lib/RenderFeature.js\";import{RenderSlot as F}from\"../views/3d/webgl-engine/lib/RenderSlot.js\";import{CompareFunction as S,Face as P,StencilOperation as I}from\"../views/webgl/enums.js\";var U;!function(e){e[e.Lifetime=1]=\"Lifetime\",e[e.RequestResponse=2]=\"RequestResponse\",e[e.Rendering=3]=\"Rendering\",e[e.Error=4]=\"Error\"}(U||(U={}));let k=class extends R{constructor(e){super(e),this._halfIntTexturesAvailable=!1,this._textureFloatLinearAvailable=!1,this._havePreparedWithAllLayers=!1,this._renderPluginContext=null,this._vxlPromise=null,this._vxl=null,this._pluginIsActive=!1,this._moreToLoad=!1,this._viewportWidth=-1,this._viewportHeight=-1,this._newLayers=[],this._layers=new Map,this._rctx=null,this._renderTargetToRestore=null,this._lastFrameWasStationary=!1,this._wasmMemBlockSizes=[512,1024,2048,4096,8192,16384,32768,65536],this._wasmMemBlocks=new Map,this._dbgFlags=new Set,this._captureFrustum=!1,this._frustum=null,this._frustumRenderableId=-1,this._renderCoordsHelper=null,this.produces=new Map([[F.VOXEL,()=>!!this._vxl&&\"local\"===this.view.viewingMode]]),this.type=V.VOXEL,this.slicePlaneEnabled=!0,this.isGround=!1,this.layerUid=[]}_dbg(e,t){this._dbgFlags.has(e)&&(e===U.Error?r.getLogger(this).error(t):r.getLogger(this).warn(t))}_removeRenderPlugin(){this._pluginIsActive&&this.view._stage&&(this._dbg(U.Lifetime,\"--removeRenderPlugin--\"),this.view._stage.removeRenderPlugin(this)),this._pluginIsActive=!1}initialize(){this._dbg(U.Lifetime,\"--initialize--\");for(const e of this._wasmMemBlockSizes)this._wasmMemBlocks.set(e,0);this.addHandles([a((()=>this.view.ready),(e=>{e&&\"local\"===this.view.viewingMode?(this._dbg(U.Lifetime,\"view ready status changed to ready on a local view, calling addRenderPlugin\"),this.view._stage.addRenderPlugin(this),this._pluginIsActive=!0):(this._dbg(U.Lifetime,\"view ready status changed, not ready or not a local view!\"),this._removeRenderPlugin())}),n),a((()=>this.view?.qualityProfile),(e=>{this._dbg(U.Rendering,\"qualityProfile changed to \"+e),this._vxl&&this._vxl.set_quality(this._toWasmQuality(e))}),n),a((()=>this.view?.timeExtent),(()=>{if(this._vxl){const e=this._getTimeArgs(this.view?.timeExtent);this._dbg(U.Rendering,\"sceneView timeExtent changed to useTime=\"+e.hasTime+\" st=\"+e.startTime+\" et=\"+e.endTime),this._vxl.set_scene_time_extent(e.startTime,e.endTime,e.hasTime),this._renderPluginContext.requestRender()}}),n),a((()=>this.view?.stationary),(e=>{this._vxl&&e&&!this._lastFrameWasStationary&&this._renderPluginContext.requestRender()}))])}initializeRenderContext(e){this._dbg(U.Lifetime,\"--initializeRenderContext--\");const t=e.renderContext.rctx;this._renderPluginContext=e,this._rctx=e.renderContext.rctx,this._halfIntTexturesAvailable=!!this._rctx.capabilities.textureNorm16,this._textureFloatLinearAvailable=this._rctx.capabilities.textureFloatLinear,this._initializeWasm(t.gl)}uninitializeRenderContext(){this._renderPluginContext=null,this._rctx=null,this._dbg(U.Lifetime,\"--uninitializeRenderContext--\")}_restoreFramebuffer(){if(!this._renderTargetToRestore)return;const e=this._renderTargetToRestore.fbo;if(!!!this._rctx)return void this._dbg(U.Error,\"no context in restoreFramebuffer!\");this._rctx.bindFramebuffer(e,!0);const t=this._renderTargetToRestore.viewport;this._rctx.setViewport(t.x,t.y,t.width,t.height)}_bindPreviousDepthToSlot(e,t){const s=!!this._rctx,r=!!this._renderTargetToRestore;if(!s||!r)return 0;const i=this._renderTargetToRestore.fbo.depthStencilTexture;return i?(0===t?this._rctx.bindTexture(null,e,!0):this._rctx.bindTexture(i,e,!0),1):(this._dbg(U.Error,\"no depth/stencil texture exists!\"),0)}_modifyResourceCount(e,t,s){if(!this._rctx)return void this._dbg(U.Error,\"modifyAllocation callback has no rendering context!\");const r=e;1===s?this._rctx.instanceCounter.increment(r,t):this._rctx.instanceCounter.decrement(r,t)}_setBlendState(e,t,s,r){this._rctx?(this._rctx.setBlendingEnabled(1===e),this._rctx.setBlendFunction(t,s),this._rctx.setBlendEquation(r)):this._dbg(U.Error,\"setBlendState callback has no rendering context!\")}_setFrontFace(e){this._rctx?this._rctx.setFrontFace(e):this._dbg(U.Error,\"setFrontFace callback has no rendering context!\")}_setDepthStencilStateFunction(e,t,s){this._rctx?(this._rctx.setDepthFunction(s),this._rctx.setDepthTestEnabled(1===e),this._rctx.setDepthWriteEnabled(1===t),this._rctx.setStencilTestEnabled(!1),this._rctx.setStencilFunction(S.ALWAYS,0,255),this._rctx.setStencilOpSeparate(P.FRONT,I.KEEP,I.INCR,I.KEEP),this._rctx.setStencilOpSeparate(P.BACK,I.KEEP,I.DECR,I.KEEP)):this._dbg(U.Error,\"setDepthStencilStateFunction callback has no rendering context!\")}_setRasterizerState(e){if(this._rctx)switch(e){case g.None:this._rctx.setFaceCullingEnabled(!1);break;case g.Back:this._rctx.setCullFace(P.BACK),this._rctx.setFaceCullingEnabled(!0);break;case g.Front:this._rctx.setCullFace(P.FRONT),this._rctx.setFaceCullingEnabled(!0)}else this._dbg(U.Error,\"setRasterizerState callback has no rendering context!\")}_setViewport(e,t,s,r){this._rctx?this._rctx.setViewport(e,t,s,r):this._dbg(U.Error,\"setViewport callback has no rendering context!\")}_updateMemoryUsage(){this._layers.forEach(((e,t)=>{if(e.needMemoryUsageUpdate){const s=this._vxl.estimate_memory_usage(t);s>=0&&(e.needMemoryUsageUpdate=!1,e.layerView.setUsedMemory(s))}}))}_syncRequestsResponses(){this._layers.forEach(((e,t)=>{const r=[];e.responses.forEach(((s,i)=>{r.push(i),this._dbg(U.RequestResponse,\"responding for requestID:\"+i+\" size:\"+s.size),this._vxl.respond(t,i,s),s.requestType!==f.TreeIndex&&s.requestType!==f.Section||(e.needMemoryUsageUpdate=!0)}));const a=e.responses;for(const s of r)a.delete(s);const n=this._vxl.get_new_requests(t),o=e.abortController.signal;for(const l in n){e.outstandingRequestCount+=1,1===e.outstandingRequestCount&&e.layerView.updatingFlagChanged();const t=n[l],r={responseType:\"array-buffer\",signal:o,query:{...e.layerView.layer.customParameters,token:e.layerView.layer.apiKey}};this._dbg(U.RequestResponse,\"making requestID:\"+l+\" url:\"+t.url),s(t.url,r).then((s=>{e.outstandingRequestCount-=1,0===e.outstandingRequestCount&&e.layerView.updatingFlagChanged(),this._dbg(U.RequestResponse,\"have response for requestID:\"+l);let r=0;if(s.data.byteLength>0){r=this._vxl._malloc(s.data.byteLength);const e=new Uint8Array(this._vxl.HEAPU8.buffer,r,s.data.byteLength),t=new Uint8Array(s.data);for(let r=0;r<s.data.byteLength;++r)e[r]=t[r]}a.set(+l,{responseType:t.responseType,ptr:r,size:s.data.byteLength,success:!0,requestType:t.requestType})})).catch((s=>{e.outstandingRequestCount-=1,0===e.outstandingRequestCount&&e.layerView.updatingFlagChanged(),i(s)||(this._dbg(U.Error,`requestID:${l} failed, error=${s.toString()}`),a.set(+l,{responseType:t.responseType,ptr:0,size:0,success:!1,requestType:t.requestType}))}))}}))}updateWasmCamera(e){this._vxl.set_projection_matrix.apply(this._vxl,e.projectionMatrix),this._vxl.set_view_matrix.apply(this._vxl,e.viewMatrix),this._vxl.set_near_far(e.near,e.far)}isUpdating(e){if(!this._vxl&&this._vxlPromise)return!0;const t=this._layers.get(e);return!!t&&t.outstandingRequestCount>0}getLayerTimes(e){const t=[];return this._layers.forEach(((s,r)=>{if(s.layerView.wasmLayerId===e.wasmLayerId){const s=this._vxl.get_layer_epoch_times(r,e.layer.currentVariableId);for(let e=0;e<s.length;++e)t.push(s[e])}})),t}getCurrentLayerTimeIndex(e){let t=0;return this._layers.forEach(((s,r)=>{s.layerView.wasmLayerId===e.wasmLayerId&&(t=this._vxl.get_layer_current_time_id(r))})),t}setEnabled(e,t){this._layers.forEach(((s,r)=>{s.layerView.wasmLayerId===e.wasmLayerId&&(this._vxl.set_enabled(r,t),s.needMemoryUsageUpdate=!0,this._renderPluginContext.requestRender())}))}setIsInScaleRange(e,t){const s=this._layers.get(e.wasmLayerId);s&&t!==s.isInScaleRange&&(s.isInScaleRange=t,this._vxl.set_is_in_scale_range(e.wasmLayerId,t),s.needMemoryUsageUpdate=!t,this._renderPluginContext.requestRender())}setStaticSections(e,t){const s={mask:p.StaticSections,staticSections:t};return this._doMaskedUIUpdate(e,s,!0)}setCurrentVariable(e,t){const s={mask:p.CurrentVariable,currentVariable:t};return this._doMaskedUIUpdate(e,s,!0)}setRenderMode(e,t){const s={mask:p.RenderMode,renderMode:t};return this._doMaskedUIUpdate(e,s,!0)}setVerticalExaggerationAndOffset(e,t,s,r){const i={mask:p.ExaggerationAndOffset,volStyleDesc:{volumeId:t,verticalExaggeration:s,verticalOffset:r}};return this._doMaskedUIUpdate(e,i,!0)}setVariableStyles(e,t){const s={mask:p.VariableStyles,variableStyles:t};return this._doMaskedUIUpdate(e,s,!0)}setVolumeStyles(e,t){const s={mask:p.VolumeStyles,volumeStyles:t};return this._doMaskedUIUpdate(e,s,!0)}setEnableDynamicSections(e,t){const s={mask:p.ContainerVisibility,containerIsVisible:t,container:x.DynamicSections};return this._doMaskedUIUpdate(e,s,!0)}setEnableIsosurfaces(e,t){const s={mask:p.ContainerVisibility,containerIsVisible:t,container:x.Isosurfaces};return this._doMaskedUIUpdate(e,s,!0)}setEnableSections(e,t){const s={mask:p.ContainerVisibility,containerIsVisible:t,container:x.StaticSections};return this._doMaskedUIUpdate(e,s,!0)}setAnalysisSlice(e,t,s,r){const i={mask:p.AnalysisSlice,analysisSlice:{point:s,normal:r,enabled:t}};return this._doMaskedUIUpdate(e,i,!0)}updateLayerTimeProperties(e){if(!this._vxl)return;const t=this._layers.get(e.wasmLayerId);if(t){const s=t.layerView.layer;let r=0;s.timeOffset&&(r=o(s.timeOffset.value,s.timeOffset.unit,\"seconds\"));const i=this._getTimeArgs(s.timeExtent);this._vxl.set_layer_time_properties(e.wasmLayerId,i.startTime,i.endTime,i.hasTime,s.useViewTime,r),this._renderPluginContext.requestRender()}}_doMaskedUIUpdate(e,t,s){if(!this._vxl)return!1;let r=!1;return this._layers.forEach(((s,i)=>{if(s.layerView.wasmLayerId===e.wasmLayerId){const e={str:JSON.stringify(t),byteCount:0,ptr:0,isReusable:!1};this._allocateBlock(e)&&(r=1===this._vxl.handle_masked_ui_update(i,e.ptr,e.byteCount),e.isReusable||this._vxl._free(e.ptr))}})),r&&s&&this._renderPluginContext.requestRender(),r}_addTriangleToWasmBuffer(e,t,s,r,i){return e[3*t]=s[0],e[3*t+1]=s[1],e[3*t+2]=s[2],e[3*(t+=1)]=r[0],e[3*t+1]=r[1],e[3*t+2]=r[2],e[3*(t+=1)]=i[0],e[3*t+1]=i[1],e[3*t+2]=i[2],t+=1}_addNormalToWasmBuffer(e,t,s){return e[3*t]=s[0],e[3*t+1]=s[1],e[3*t+2]=s[2],t+=1}_doCaptureFrustum(){if(!this._vxl)return;const e=36,t=e/3,s=this._vxl._malloc(3*e*Float32Array.BYTES_PER_ELEMENT),r=new Float32Array(this._vxl.HEAPF32.buffer,s,3*e),i=this._vxl._malloc(3*t*Float32Array.BYTES_PER_ELEMENT),a=new Float32Array(this._vxl.HEAPF32.buffer,i,e),n=this._frustum.points[c.NEAR_BOTTOM_LEFT],o=this._frustum.points[c.NEAR_BOTTOM_RIGHT],l=this._frustum.points[c.NEAR_TOP_RIGHT],h=this._frustum.points[c.NEAR_TOP_LEFT],d=this._frustum.points[c.FAR_BOTTOM_LEFT],u=this._frustum.points[c.FAR_BOTTOM_RIGHT],_=this._frustum.points[c.FAR_TOP_RIGHT],g=this._frustum.points[c.FAR_TOP_LEFT];let f=0,p=0;const x=this._frustum.planes[m.NEAR];f=this._addTriangleToWasmBuffer(r,f,l,o,n),p=this._addNormalToWasmBuffer(a,p,x),f=this._addTriangleToWasmBuffer(r,f,n,h,l),p=this._addNormalToWasmBuffer(a,p,x);const y=this._frustum.planes[m.FAR];f=this._addTriangleToWasmBuffer(r,f,d,u,_),p=this._addNormalToWasmBuffer(a,p,y),f=this._addTriangleToWasmBuffer(r,f,_,g,d),p=this._addNormalToWasmBuffer(a,p,y);const v=this._frustum.planes[m.TOP];f=this._addTriangleToWasmBuffer(r,f,_,l,h),p=this._addNormalToWasmBuffer(a,p,v),f=this._addTriangleToWasmBuffer(r,f,h,g,_),p=this._addNormalToWasmBuffer(a,p,v);const b=this._frustum.planes[m.BOTTOM];f=this._addTriangleToWasmBuffer(r,f,n,o,u),p=this._addNormalToWasmBuffer(a,p,b),f=this._addTriangleToWasmBuffer(r,f,u,d,n),p=this._addNormalToWasmBuffer(a,p,b);const w=this._frustum.planes[m.LEFT];f=this._addTriangleToWasmBuffer(r,f,h,n,d),p=this._addNormalToWasmBuffer(a,p,w),f=this._addTriangleToWasmBuffer(r,f,d,g,h),p=this._addNormalToWasmBuffer(a,p,w);const T=this._frustum.planes[m.RIGHT];f=this._addTriangleToWasmBuffer(r,f,l,_,u),p=this._addNormalToWasmBuffer(a,p,T),f=this._addTriangleToWasmBuffer(r,f,u,o,l),p=this._addNormalToWasmBuffer(a,p,T),-1!==this._frustumRenderableId&&this._vxl.remove_generic_mesh(this._frustumRenderableId),this._frustumRenderableId=this._vxl.add_generic_mesh(s,3*e,i,e,255,0,0,64),this._vxl._free(s),this._vxl._free(i),this._captureFrustum=!1,this._renderPluginContext.requestRender()}captureFrustum(){null===this._renderCoordsHelper&&(this._renderCoordsHelper=T.create(v.Local,_(!1,this.view.spatialReference))),null===this._frustum&&(this._frustum=new w(this._renderCoordsHelper)),this._captureFrustum=!0,null!==this._renderPluginContext&&this._renderPluginContext.requestRender()}toggleFullVolumeExtentDraw(e){this._vxl&&this._layers.forEach(((t,s)=>{t.layerView.wasmLayerId===e.wasmLayerId&&(this._vxl.toggle_full_volume_extent_draw(s),this._renderPluginContext.requestRender())}))}addVoxelLayer(e){if(!this._vxl){const t={layerView:e,resolveCallback:null,rejectCallback:null},s=new Promise(((e,s)=>{t.resolveCallback=e,t.rejectCallback=s}));return this._newLayers.push(t),s}const t=this._addVoxelLayer(e);return t<0?Promise.reject(-1):Promise.resolve(t)}removeVoxelLayer(e){if(!this._vxl){const t=this._newLayers.findIndex((t=>e.uid===t.layerView.uid));t>=0&&(this._newLayers[t].resolveCallback(-1),this._newLayers.splice(t,1));const s=this._newLayers.length;return 0===s&&(this._dbg(U.Lifetime,\" no voxel layers left after removing a layer, removing RenderPlugin and destroying\"),this.destroy()),s}let t=-1;this._layers.forEach(((s,r)=>{if(s.layerView.wasmLayerId===e.wasmLayerId){t=r,s.abortController.abort(),this._vxl.remove_layer(t);const i=this.layerUid.indexOf(e.layer.uid);-1!==i&&this.layerUid.splice(i,1)}})),t>=0&&this._layers.delete(t);const s=this._layers.size;return 0===s&&(this._dbg(U.Lifetime,\" no voxel layers left after removing a layer, removing RenderPlugin and destroying\"),this.destroy()),s}_getBlockSize(e){for(const t of this._wasmMemBlockSizes)if(e<t)return t;return-1}_allocateBlock(e){e.byteCount=this._vxl.lengthBytesUTF8(e.str)+1;const t=this._getBlockSize(e.byteCount);return t<0?(e.isReusable=!1,e.ptr=this._vxl._malloc(e.byteCount)):(e.isReusable=!0,e.ptr=this._wasmMemBlocks.get(t),0===e.ptr&&(e.ptr=this._vxl._malloc(t),this._wasmMemBlocks.set(t,e.ptr))),0!==e.ptr&&(this._vxl.stringToUTF8(e.str,e.ptr,e.byteCount),!0)}_getTimeArgs(e){let t=-Number.MAX_VALUE,s=Number.MAX_VALUE,r=!1;return null!=e&&(e.isAllTime?r=!0:(null!=e.start&&(r=!0,t=e.start.getTime()/1e3),null!=e.end&&(r=!0,s=e.end.getTime()/1e3))),{startTime:t,endTime:s,hasTime:r}}_addVoxelLayer(e){const t=e.layer;let s=-1;const i=t.getConfiguration();if(i.length<1)return-1;const a={str:i,byteCount:0,ptr:0,isReusable:!1};if(!this._allocateBlock(a))return-1;const n=this._getTimeArgs(t.timeExtent),l=this.view.spatialReference.isWGS84&&t.spatialReference.isWGS84?111319.49079327357:1;let h=0;if(t.timeOffset&&(h=o(t.timeOffset.value,t.timeOffset.unit,\"seconds\")),s=this._vxl.add_layer(t.serviceRoot,a.ptr,a.byteCount,l,l,n.startTime,n.endTime,n.hasTime,t.useViewTime,h,this._toWasmQuality(this.view.qualityProfile)),a.isReusable||this._vxl._free(a.ptr),s>=0){t.test?.constantUpscaling&&(this._setUpscalingLimits(0,.25,.25),this._setUpscalingLimits(1,.5,.5),this._setUpscalingLimits(2,.75,.75));const i=new AbortController;if(this._layers.set(s,{layerView:e,responses:new Map,outstandingRequestCount:0,abortController:i,needMemoryUsageUpdate:!1,isInScaleRange:!0}),this.layerUid.push(e.layer.uid),!this._halfIntTexturesAvailable||has(\"mac\")){const t=[];let s=\"\";for(const r of e.layer.variables)\"Int16\"!==r.renderingFormat.type&&\"UInt16\"!==r.renderingFormat.type||(t.push(r.name),r.id===e.layer.currentVariableId&&(s=r.name));\"\"!==s&&r.getLogger(this).error(\"#addVoxelLayer_error()\",e.layer,`The voxel layer '${e.layer.title}' cannot render the current variable '${s}' in this browser`),t.length>0&&r.getLogger(this).warn(\"#addVoxelLayer_warning()\",e.layer,`The voxel layer '${e.layer.title}' cannot render the variables '${t.toString()}' in this browser`)}if(!this._textureFloatLinearAvailable){const t=[];let s=\"\";for(const r of e.layer.variables)\"Float32\"===r.renderingFormat.type&&(t.push(r.name),r.id===e.layer.currentVariableId&&(s=r.name));\"\"!==s&&r.getLogger(this).error(\"#addVoxelLayer_error()\",e.layer,`The voxel layer '${e.layer.title}' cannot render the current variable '${s}' in this browser`),t.length>0&&r.getLogger(this).warn(\"#addVoxelLayer_warning()\",e.layer,`The voxel layer '${e.layer.title}' cannot render the variables '${t.toString()}' in this browser`)}return has(\"esri-mobile\")&&r.getLogger(this).warnOnce(\"Mobile support differs across devices. Voxel layer might not display as expected.\"),s}return-1}prepareRender(e){if(!this._vxl)return;const t=e.bindParameters.camera.viewForward,s=e.bindParameters.camera.eye;this._vxl.update_camera_pos_and_direction(s[0],s[1],s[2],t[0],t[1],t[2]);const r=this._vxl.cull();this._dbg(U.RequestResponse,\"missingResourceCount=\"+r),this._moreToLoad=r>0,this._havePreparedWithAllLayers=0===this._newLayers.length,this._updateMemoryUsage()}renderNode(e){if(!this._vxl)return;for(const s of this._newLayers){const e=this._addVoxelLayer(s.layerView);-1===e?s.rejectCallback(-1):s.resolveCallback(e)}if(this._newLayers=[],0===this._layers.size)return void this._dbg(U.Error,\"No voxel layers but RenderPlugin instance is being asked to render!\");this._lastFrameWasStationary=this.view.stationary,this._syncRequestsResponses(),this._beforeDraw(),this._vxl.begin_color_frame(!this.view._stage.renderer.isFeatureEnabled(C.HighResolutionVoxel),e.bindParameters.lighting.mainLight.direction[0],e.bindParameters.lighting.mainLight.direction[1],e.bindParameters.lighting.mainLight.direction[2]);const t=this._renderTargetToRestore.viewport;t.width===this._viewportWidth&&t.height===this._viewportHeight||(this._viewportWidth=t.width,this._viewportHeight=t.height,this._vxl.set_viewport(t.width,t.height),this._layers.forEach((e=>{e.needMemoryUsageUpdate=!0}))),0===t.x&&0===t.y||this._dbg(U.Error,\"Unsupported viewport parameters detected!\"),this.updateWasmCamera(e.bindParameters.camera),this._captureFrustum&&(this._frustum.update(e.bindParameters.camera),this._doCaptureFrustum()),this._vxl.draw(),this._afterDraw(),(this._moreToLoad||!this._havePreparedWithAllLayers&&this._layers.size>0)&&this._renderPluginContext.requestRender()}destroy(){this._dbg(U.Lifetime,\"--destroy--\"),this._removeRenderPlugin(),this._vxl&&(this._layers.forEach((e=>{e.abortController.abort()})),this._wasmMemBlocks.forEach((e=>{0!==e&&this._vxl._free(e)})),this._vxl.uninitialize_voxel_wasm(),this._vxl=null)}_initializeWasm(e){return this._vxl?Promise.resolve():(this._vxlPromise||(this._vxlPromise=y(e).then((e=>{if(this._vxl=e,this._vxlPromise=null,this._newLayers.length<=0)return this._dbg(U.Lifetime,\" no voxel layers left after WASM downloaded, removing RenderPlugin and destroying\"),void this.destroy();const t=this._getTimeArgs(this.view?.timeExtent),s=this._vxl.addFunction(this._restoreFramebuffer.bind(this),\"v\"),r=this._vxl.addFunction(this._setBlendState.bind(this),\"viiii\"),i=this._vxl.addFunction(this._setFrontFace.bind(this),\"vi\"),a=this._vxl.addFunction(this._setRasterizerState.bind(this),\"vi\"),n=this._vxl.addFunction(this._setDepthStencilStateFunction.bind(this),\"viii\"),o=this._vxl.addFunction(this._setViewport.bind(this),\"viiii\"),l=this._vxl.addFunction(this._bindPreviousDepthToSlot.bind(this),\"iii\"),h=this._vxl.addFunction(this._modifyResourceCount.bind(this),\"viii\"),d=this._halfIntTexturesAvailable&&!has(\"mac\"),u=this._textureFloatLinearAvailable;this._vxl.initialize_voxel_wasm(s,r,i,a,n,o,l,h,t.startTime,t.endTime,t.hasTime,d,u),this._renderPluginContext&&this._renderPluginContext.requestRender()})).catch((()=>{for(const e of this._newLayers)e.rejectCallback(-2);this._dbg(U.Error,\" WASM failed to download, removing RenderPlugin and destroying\"),this.destroy()}))),this._vxlPromise)}pickDepth(e,t,s){if(!this._vxl||!this._rctx||0===this._layers.size)return null;const r=s.viewport[3]-t;if(e<0||e>s.viewport[2]||t<0||t>s.viewport[3])return this._dbg(U.Error,`[js] pickDepth: outOfRange, screenXY=[${e.toFixed(0)}, ${r.toFixed(0)}]]`),null;this._beforeDraw();const i=s.viewForward,a=s.eye;this._vxl.update_camera_pos_and_direction(a[0],a[1],a[2],i[0],i[1],i[2]),this.updateWasmCamera(s),this._vxl.begin_frame();const n=this._vxl.pick_depth(e,r);if(this._afterDraw(),n.success){return n.distanceToCamera}return null}pickObject(e,t,s,r){if(!this._vxl||!this._rctx||0===this._layers.size)return null;const i=Math.round(e),a=Math.round(t);if(i<0||i>s.viewport[2]||a<0||a>s.viewport[3])return this._dbg(U.Error,`[js] pickObject: outOfRange, screenXY=[${i}, ${a}], vp=[${s.viewport.toString()}]`),null;this._beforeDraw();const n=s.viewForward,o=s.eye;this._vxl.update_camera_pos_and_direction(o[0],o[1],o[2],n[0],n[1],n[2]),this.updateWasmCamera(s),this._vxl.begin_frame();let l=null;if(0===r.length)l=this._vxl.pick_object(i,a,0,0);else{const e={str:JSON.stringify({layerIds:r}),byteCount:0,ptr:0,isReusable:!1};this._allocateBlock(e)&&(l=this._vxl.pick_object(i,a,e.ptr,e.byteCount),e.isReusable||this._vxl._free(e.ptr))}return this._afterDraw(),l}_beforeDraw(){this._renderTargetToRestore={fbo:this._rctx.getBoundFramebufferObject(),viewport:this._rctx.getViewport()},this._rctx.setPolygonOffsetFillEnabled(!1),this._rctx.setScissorTestEnabled(!1),this._rctx.setColorMask(!0,!0,!0,!0)}_afterDraw(){this._renderTargetToRestore.fbo=null,this._rctx.externalTextureUnitUpdate(this._vxl.get_texture_units_bound_in_frame(),this._vxl.get_active_texture_unit()),this._rctx.externalVertexArrayObjectUpdate(),this._rctx.externalVertexBufferUpdate(),this._rctx.externalProgramUpdate()}intersect(e,t,s,r,i){if(!this._vxl||!this._rctx||0===this._layers.size||!e.options.selectionMode||e.options.isFiltered)return;if(null==i||i[0]<0||i[0]>e.camera.viewport[2]||i[1]<0||i[1]>e.camera.viewport[3])return this._dbg(U.Error,`[js] VoxelWasmPerScene.intersect: outOfRange, screenXY=[${i[0].toFixed(0)}, ${i[1].toFixed(0)}]`),null;const a=[];this._layers.forEach((t=>{e.options.filteredLayerUids.includes(t.layerView.layer.uid)&&a.push(t.layerView.wasmLayerId)}));const n=this.pickObject(i[0],i[1],e.camera,a);if(null==n||-1===n.layerId)return;const o=this._layers.get(n.layerId);if(o){const t=o.layerView.layer.uid,i=n.distanceToCamera/d(s,r),a=u();a[0]=n.worldX,a[1]=n.worldY,a[2]=n.worldZ;const l={};if(null!=n.continuousValue&&null!=n.continuousValueUnits?l[\"Voxel.ServiceValue\"]=`${n.continuousValue.toLocaleString()} ${n.continuousValueUnits}`:null!=n.uniqueValueLabel&&null!=n.uniqueValue?l[\"Voxel.ServiceValue\"]=`${n.uniqueValueLabel} (${n.uniqueValue})`:null!=n.uniqueValue&&(l[\"Voxel.ServiceValue\"]=`${n.uniqueValue}`),l[\"Voxel.ServiceVariableLabel\"]=n.variableLabel,l[\"Voxel.Position\"]=n.voxelSpacePosition,null!=n.epochTime&&null!=n.nativeTime&&null!=n.nativeTimeUnits){const e=new Date(n.epochTime);l[\"Voxel.ServiceLocalTime\"]=e.toString(),l[\"Voxel.ServiceNativeTime\"]=`${n.nativeTime.toLocaleString()} ${n.nativeTimeUnits}`}null!=n.depth&&null!=n.depthUnits&&(l[\"Voxel.ServiceDepth\"]=`${n.depth.toLocaleString()} ${n.depthUnits}`);const h=n.faceNormal;l[\"Voxel.WorldPosition\"]=`[${a[0]}, ${a[1]}, ${a[2]}]`;const _=e=>{const s=new b(a,t,(()=>this._createVoxelGraphic(o.layerView.layer,l)));e.set(this.type,s,i,h)},c=e.results,m=e.options.store===E.ALL;if((null==c.min.dist||i<c.min.dist)&&_(c.min),(null==c.max.dist||i>c.max.dist)&&_(c.max),m){const t=L(e.ray);_(t),e.results.all.push(t)}}}_createVoxelGraphic(e,s){return new t({layer:e,sourceLayer:e,attributes:s})}_toWasmQuality(e){switch(e){case\"low\":return 0;case\"medium\":return 1;case\"high\":return 2}}_setUpscalingLimits(e,t,s){this._vxl&&this._vxl.set_upscaling_limits(e,t,s)}};e([l({constructOnly:!0})],k.prototype,\"view\",void 0),k=e([h(\"esri.layers.VoxelWasmPerSceneView\")],k);const B=k;export{B as default};\n"],"names":["e","i","t","n","a","o","Binary","JSON","TreeIndex","TreeStats","TreeData","BrickBundles","Section","VariableStats","None","Front","Back","Low","Medium","High","StaticSections","Slices","DynamicSections","GhostShell","Isosurface","Quality","SunLocation","StaticSectionSelection","ExaggerationAndOffset","CurrentTime","CurrentVariable","DeleteIsosurface","ContainerVisibility","RenderMode","Optimization","VariableStyles","VolumeStyles","AnalysisSlice","Isosurfaces","concat","U","Lifetime","RequestResponse","Rendering","Error","k","_R","_inherits","_super","_createSuper","_this","_classCallCheck","call","_halfIntTexturesAvailable","_textureFloatLinearAvailable","_havePreparedWithAllLayers","_renderPluginContext","_vxlPromise","_vxl","_pluginIsActive","_moreToLoad","_viewportWidth","_viewportHeight","_newLayers","_layers","Map","_rctx","_renderTargetToRestore","_lastFrameWasStationary","_wasmMemBlockSizes","_wasmMemBlocks","_dbgFlags","Set","_captureFrustum","_frustum","_frustumRenderableId","_renderCoordsHelper","produces","F","view","viewingMode","type","V","slicePlaneEnabled","isGround","layerUid","_createClass","key","value","this","has","r","error","warn","_stage","_dbg","removeRenderPlugin","_this2","_step","_iterator","_createForOfIteratorHelper","s","done","set","err","f","addHandles","ready","addRenderPlugin","_removeRenderPlugin","_this2$view","qualityProfile","set_quality","_toWasmQuality","_this2$view2","timeExtent","_this2$view3","_getTimeArgs","hasTime","startTime","endTime","set_scene_time_extent","requestRender","_this2$view4","stationary","renderContext","rctx","capabilities","textureNorm16","textureFloatLinear","_initializeWasm","gl","fbo","bindFramebuffer","viewport","setViewport","x","y","width","height","depthStencilTexture","bindTexture","instanceCounter","increment","decrement","setBlendingEnabled","setBlendFunction","setBlendEquation","setFrontFace","setDepthFunction","setDepthTestEnabled","setDepthWriteEnabled","setStencilTestEnabled","setStencilFunction","S","setStencilOpSeparate","P","I","g","setFaceCullingEnabled","setCullFace","_this3","forEach","needMemoryUsageUpdate","estimate_memory_usage","layerView","setUsedMemory","_this4","responses","push","size","respond","requestType","_i","_r","length","delete","get_new_requests","abortController","signal","_loop","l","outstandingRequestCount","updatingFlagChanged","responseType","query","_objectSpread","layer","customParameters","token","apiKey","url","then","data","byteLength","_malloc","Uint8Array","HEAPU8","buffer","ptr","success","catch","toString","set_projection_matrix","apply","projectionMatrix","set_view_matrix","viewMatrix","set_near_far","near","far","get","_this5","wasmLayerId","get_layer_epoch_times","currentVariableId","_this6","get_layer_current_time_id","_this7","set_enabled","isInScaleRange","set_is_in_scale_range","mask","p","staticSections","_doMaskedUIUpdate","currentVariable","renderMode","volStyleDesc","volumeId","verticalExaggeration","verticalOffset","variableStyles","volumeStyles","containerIsVisible","container","analysisSlice","point","normal","enabled","timeOffset","unit","set_layer_time_properties","useViewTime","_this8","str","stringify","byteCount","isReusable","_allocateBlock","handle_masked_ui_update","_free","Float32Array","BYTES_PER_ELEMENT","HEAPF32","points","c","h","d","u","_","planes","m","_addTriangleToWasmBuffer","_addNormalToWasmBuffer","v","b","w","T","remove_generic_mesh","add_generic_mesh","spatialReference","_this9","toggle_full_volume_extent_draw","resolveCallback","rejectCallback","Promise","_addVoxelLayer","reject","resolve","_this10","findIndex","uid","splice","destroy","abort","remove_layer","indexOf","_step2","_iterator2","lengthBytesUTF8","_getBlockSize","stringToUTF8","Number","MAX_VALUE","isAllTime","start","getTime","end","getConfiguration","isWGS84","add_layer","serviceRoot","_t$test","test","constantUpscaling","_setUpscalingLimits","AbortController","_step3","_iterator3","variables","renderingFormat","name","id","title","_step4","_iterator4","warnOnce","bindParameters","camera","viewForward","eye","update_camera_pos_and_direction","cull","_updateMemoryUsage","_step5","_iterator5","_syncRequestsResponses","_beforeDraw","begin_color_frame","renderer","isFeatureEnabled","C","lighting","mainLight","direction","set_viewport","updateWasmCamera","update","_doCaptureFrustum","draw","_afterDraw","_this11","uninitialize_voxel_wasm","_this12","_ref","default","locateFile","preinitializedWebGLContext","onRuntimeInitialized","_this12$view","addFunction","_restoreFramebuffer","bind","_setBlendState","_setFrontFace","_setRasterizerState","_setDepthStencilStateFunction","_setViewport","_bindPreviousDepthToSlot","_modifyResourceCount","initialize_voxel_wasm","_step6","_iterator6","toFixed","begin_frame","pick_depth","distanceToCamera","Math","round","pick_object","layerIds","getBoundFramebufferObject","getViewport","setPolygonOffsetFillEnabled","setScissorTestEnabled","setColorMask","externalTextureUnitUpdate","get_texture_units_bound_in_frame","get_active_texture_unit","externalVertexArrayObjectUpdate","externalVertexBufferUpdate","externalProgramUpdate","_this13","options","selectionMode","isFiltered","filteredLayerUids","includes","pickObject","layerId","worldX","worldY","worldZ","continuousValue","continuousValueUnits","toLocaleString","uniqueValueLabel","uniqueValue","variableLabel","voxelSpacePosition","epochTime","nativeTime","nativeTimeUnits","Date","depth","depthUnits","faceNormal","_createVoxelGraphic","results","store","E","min","dist","max","L","ray","all","sourceLayer","attributes","set_upscaling_limits","R","constructOnly","prototype","B"],"sourceRoot":""}