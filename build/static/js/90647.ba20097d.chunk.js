"use strict";(self.webpackChunkreact_training=self.webpackChunkreact_training||[]).push([[90647],{68859:function(e,n,t){t.d(n,{K:function(){return c},U:function(){return l}});var r=t(74165),a=t(15861),i=t(12400),u=t(79803),o=t(50628);function c(e,n,t,r){var a,i;if((0,u.canProjectWithoutEngine)(e.spatialReference,t)){var c;f[0]=e.x,f[1]=e.y;var l=e.z;return f[2]=null!==(c=null!==l&&void 0!==l?l:r)&&void 0!==c?c:0,(0,o.projectBuffer)(f,e.spatialReference,0,n,t,0,1)}var s=(0,u.tryProjectWithZConversion)(e,t);return!!s&&(n[0]=null===s||void 0===s?void 0:s.x,n[1]=null===s||void 0===s?void 0:s.y,n[2]=null!==(a=null!==(i=null===s||void 0===s?void 0:s.z)&&void 0!==i?i:r)&&void 0!==a?a:0,!0)}function l(e,n,t,r,a){return s.apply(this,arguments)}function s(){return s=(0,a.Z)((0,r.Z)().mark((function e(n,t,a,i,o){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.initializeProjection)(n.spatialReference,a,null,o);case 2:return e.abrupt("return",c(n,t,a,i));case 3:case"end":return e.stop()}}),e)}))),s.apply(this,arguments)}var f=(0,i.Ue)()},5986:function(e,n,t){t.d(n,{S:function(){return i}});t(79803);var r=t(78952),a=t(68859);function i(e,n,t,r,i){return!(null==n||null==r||e.length<2)&&(u.x=e[0],u.y=e[1],u.z=e[2],u.spatialReference=n,(0,a.K)(u,t,r,i))}var u=(0,t(55946).T)(0,0,0,r.Z.WGS84)},82582:function(e,n,t){t.d(n,{D9:function(){return c},DE:function(){return o},dp:function(){return u},o2:function(){return l},yZ:function(){return i}});var r=t(16889),a=t(68860);function i(e,n){var t=n||e.extent,r=e.width,i=(0,a.c9)(null===t||void 0===t?void 0:t.spatialReference);return t&&r?t.width/r*i*a.hd*96:0}function u(e,n){return e/((0,a.c9)(n)*a.hd*96)}function o(e){return e/(96*a.hd)}function c(e,n){var t=e.extent,r=e.width-(e.padding?e.padding.left+e.padding.right:0),a=u(n,t.spatialReference);return t.clone().expand(a*r/t.width)}function l(e,n,t){return function(e,n){return 0===n||(0,r.W8)(e,n)||e<n}(e,n)&&function(e,n){return 0===n||(0,r.W8)(e,n)||e>n}(e,t)}},55946:function(e,n,t){function r(e,n,t,r){return{x:e,y:n,z:t,hasZ:null!=t,hasM:!1,spatialReference:r,type:"point"}}function a(e,n,t,r,a){e.x=n,e.y=t,e.z=r,e.hasZ=null!=r,e.spatialReference=a}t.d(n,{T:function(){return r},y:function(){return a}})},87532:function(e,n,t){t.d(n,{dP:function(){return s},lM:function(){return c},wH:function(){return l}});var r=t(32035),a=t(12400),i=t(83448),u=t(65156),o=t(88153);function c(e,n,t,r){return null!=e.renderCoordsHelper.fromRenderCoords(n.eye,d,r)&&(0,u.BD)(t,d)}function l(e,n){var t;return e.elevationProvider&&null!==(t=e.elevationProvider.getElevation(n[0],n[1],n[2],e.renderCoordsHelper.spatialReference,"ground"))&&void 0!==t?t:0}function s(e,n,t,a){var u=e.state.camera.clone();n&&t&&a&&(u.eye=n,u.center=t,u.up=a),function(e,n,t){var a=p[e.viewingMode];a||((a=(0,o.Z8)(e.state.viewingMode)).options.backfacesTerrain=!e.state.isGlobal,a.options.invisibleTerrain=!0,p[e.viewingMode]=a);var u=e.state.isGlobal;return!(!e.sceneIntersectionHelper.intersectRay(n,a,t)||f(e,n.origin,t))||!(!e.renderCoordsHelper.intersectManifold(n,0,t)||f(e,n.origin,t))||!!u&&function(e,n,t){var a=(0,r.m)(e.origin,e.origin)-t*t,i=a>0?Math.sqrt(a)/3:1;return(0,r.j)(n,e.direction,i/(0,r.l)(e.direction)),(0,r.g)(n,n,e.origin),!0}(n,t,(0,i.Iu)(e.spatialReference).radius)}(e,u.ray,v)||(0,r.c)(v,u.center);var c=e.state.constraints,l=c.minimumPoiDistance;if((0,r.a)(u.eye,v)<l){var s=c.collision.enabled;(0,r.c)(h,u.viewForward),(0,r.j)(h,h,l),s?u.eye=(0,r.f)(d,v,h):(0,r.g)(v,u.eye,h);var m=e.renderCoordsHelper,x=m.getAltitude(u.eye),y=c.collision.elevationMargin;s&&x<y&&((0,r.f)(h,v,u.eye),u.eye=m.setAltitude(d,y,u.eye),(0,r.g)(v,u.eye,h))}return u.center=v,u}function f(e,n,t){if(!e.state.isGlobal||!e.stateManager.constraintsManager)return!1;var a=l(e,n),i=e.stateManager.constraintsManager.nearFarHeuristic.compute(n,t,e.renderDataExtent,a,m).far,u=i*i;return(0,r.a)(n,t)>u}var p={},d=(0,a.Ue)(),v=(0,a.Ue)(),h=(0,a.Ue)(),m={near:0,far:0}},60084:function(e,n,t){t.d(n,{Q8:function(){return Q},ZN:function(){return Ne},t_:function(){return ge},Xt:function(){return de},n3:function(){return le},gL:function(){return xe},Hm:function(){return me},UI:function(){return ve},Ic:function(){return Oe},S9:function(){return De},P$:function(){return Re},h5:function(){return ue},kE:function(){return ce},l0:function(){return fe},_U:function(){return pe},sO:function(){return qe},HH:function(){return _e},EO:function(){return Je}});var r=t(29439),a=t(74165),i=t(1413),u=t(15861),o=t(63665),c=t(17768),l=t(32718),s=t(16889),f=t(66978),p=t(32035),d=t(12400),v=t(83448),h=t(848),m=t(79803),x=t(78952),y=t(68859),g=t(5629),b=t(5986),Z=t(29691),w=t(92975),k=t(72619);var M=t(50951),R=t(87532),S=t(29134),T=t(7025),z=t(53866),U=t(71917),C=(0,d.al)(0,1,0),G=(0,d.al)(0,0,1),j=(0,T.Ue)(),P=(0,d.Ue)(),V=(0,d.Ue)();function A(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:(0,U.d)(),a=r.direction,i=r.up;return(0,S.QO)(j,-(0,s.Vl)(n)),(0,S.lM)(j,j,(0,s.Vl)(t)),(0,p.h)(a,G,j),(0,p.j)(a,a,-1),(0,p.h)(i,C,j),r}function E(e,n,t,r,a){var i=e.renderSpatialReference,u=e.map&&e.spatialReference||n.spatialReference;return(0,y.K)(n,P,i),(0,y.K)(n,V,i),P[0]-=t/2,V[0]+=t/2,P[1]-=r/2,V[1]+=r/2,(0,b.S)(P,i,P,u),(0,b.S)(V,i,V,u),a?(a.xmin=P[0],a.ymin=P[1],a.xmax=V[0],a.ymax=V[1],a.spatialReference=u):a=new z.Z(P[0],P[1],V[0],V[1],u),a}var O=Object.freeze(Object.defineProperty({__proto__:null,directionToHeadingTilt:function(e,n,t,r){return(0,U.t)(n,t,r,G,C)},eyeForCenterWithHeadingTilt:function(e,n,t,r){var a=A(e,t,r),i=(0,d.Ue)();return(0,p.j)(i,a.direction,-n),(0,p.g)(i,i,e),{up:a.up,eye:i,heading:t,tilt:r}},eyeTiltToLookAtTilt:function(e){return(0,s.Vl)(e)},headingTiltToDirectionUp:A,lookAtTiltToEyeTilt:function(e){return(0,s.BV)(e)},toExtent:E},Symbol.toStringTag,{value:"Module"})),B=t(81753),D=t(696),_=(0,d.al)(0,0,1),I=(0,p.n)((0,d.Ue)(),(0,d.al)(1,1,1)),H=new c.pE(-180,180),W=(0,T.Ue)(),F=(0,d.Ue)(),K=(0,d.Ue)();function L(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:(0,U.d)();(0,p.b)(F,e,_),0===(0,p.m)(F,F)&&(0,p.b)(F,e,I),(0,S.Us)(W,-(0,s.Vl)(n),e),(0,S.U1)(W,W,-(0,s.Vl)(t),F);var a=r.up,i=r.direction;return(0,p.b)(a,F,e),(0,p.n)(a,a),(0,p.h)(a,a,W),(0,p.n)(i,e),(0,p.k)(i,i),(0,p.h)(i,i,W),r}function q(e){var n=e[1];e[1]=-e[2],e[2]=n}function J(e,n){var t=L(n,e.heading,e.tilt);return e.up=t.up,e}function N(e,n,t,r,a){var i,u,o,l,f=n.latitude,p=(0,v.Iu)(e.spatialReference).radius,d=n.longitude,h=(0,D.Be)(f,t,p)/2;i=d-h,u=d+h;var m=(0,s.Vl)(f),y=(1+Math.sin(m))/(1-Math.sin(m)),g=(y+1)*Math.tan(r/p/2),b=g*g;function Z(e){var n=Math.PI/2;return(e=c.c5.normalize(e,-n))>n&&(e=Math.PI-e),e}if(l=(o=1.5*Math.PI-2*Math.atan(.5*(g+Math.sqrt(4*y+b))))+r/p,o=Z(o),(l=Z(l))<o){var w=l;l=o,o=w}if(o=Math.max((0,s.BV)(o),-90),l=Math.min((0,s.BV)(l),90),(u=H.monotonic(i,u))-i>180){var k=(u-i-180)/2;i+=k,u-=k}var M=e.spatialReference&&e.spatialReference.isGeographic?e.spatialReference:x.Z.WGS84;return a?(a.xmin=i,a.ymin=o,a.xmax=u,a.ymax=l,a.spatialReference=M):a=new z.Z(i,o,u,l,M),e.spatialReference&&e.spatialReference.isWebMercator&&(0,B.$)(a,!1,a),a}var Q,X=Object.freeze(Object.defineProperty({__proto__:null,directionToHeadingTilt:function(e,n,t,r){var a=F,i=K;return(0,p.n)(a,e),(0,p.b)(K,a,_),0===(0,p.m)(K,K)&&(0,p.b)(K,a,I),(0,p.b)(i,K,a),(0,U.t)(n,t,r,a,i)},eyeForCenterWithHeadingTilt:function(e,n,t,r){var a={eye:(0,d.Ue)(),up:null,tilt:r,heading:t},i=F;i[0]=e[0],i[1]=e[2],i[2]=-e[1];var u,o=n,c=(0,s.Vl)(t),l=(0,s.Vl)(r),f=Math.sin(c),v=Math.cos(c),h=Math.sin(l),m=Math.cos(l),x=(0,p.l)(i);if(Math.abs(l)<1e-8)u=o+x;else{var y=x/h,g=(0,s.Kt)(o/y),b=Math.PI-l-g;u=y*Math.sin(b)}var Z=m*o,w=o*o*(h*h),k=v*v*w,M=u-Z,R=M*M,S=k*(k+R-i[1]*i[1]);if(S<0)return(0,p.j)(a.eye,i,u/x),a.tilt=0,J(a,e);var T,z=Math.sqrt(S),U=i[1]*M,C=k+R;if(T=v>0?-z+U:z+U,Math.abs(C)<1e-8)return x<1e-8?(a.eye[0]=0,a.eye[1]=0,a.eye[2]=o):(0,p.j)(a.eye,i,u/x),a.tilt=0,q(a.eye),J(a,e);a.eye[1]=T/C;var G=f*f*w,j=h*o,P=v*j*a.eye[1],V=a.eye[1]*a.eye[1],A=1-V,E=Math.sqrt(A),O=k*V+G-2*P*E*M+A*R;return Math.abs(O)<1e-8?((0,p.j)(a.eye,i,u/x),a.tilt=0,q(a.eye),J(a,e)):(a.eye[0]=(A*(u*i[0]-Z*i[0])-j*E*(i[0]*a.eye[1]*v+i[2]*f))/O,a.eye[2]=(A*(u*i[2]-Z*i[2])-j*E*(i[2]*a.eye[1]*v-i[0]*f))/O,(0,p.j)(a.eye,a.eye,u),q(a.eye),J(a,e))},eyeTiltToLookAtTilt:function(e,n,t){var r=(0,s.Vl)(e),a=(0,p.l)(n);return(0,s.Kt)(t/(a/Math.sin(r)))+r},headingTiltToDirectionUp:L,lookAtTiltToEyeTilt:function(e,n,t){var r=(0,p.l)(n),a=Math.sqrt(t*t+r*r-2*t*r*Math.cos(Math.PI-e)),i=(0,s.Kt)(t/(a/Math.sin(e)));return(0,s.BV)(e-i)},toExtent:N},Symbol.toStringTag,{value:"Module"})),Y=t(77648),$=t(92028),ee=function(){return l.Z.getLogger("esri.views.3d.support.cameraUtils")},ne=(0,d.Ue)(),te={heading:0,tilt:0},re=(0,d.Ue)(),ae=new c.pE(-20037508.342788905,20037508.342788905),ie=new c.pE(-180,180);function ue(e){var n;return null!==(n=e.spatialReference)&&void 0!==n?n:x.Z.WGS84}function oe(e){return"global"===e.viewingMode?X:O}function ce(e,n,t,r,a){return oe(e).headingTiltToDirectionUp(n,t,r,a)}function le(e,n){if(null==n)return null;var t=e.renderSpatialReference,r=oe(e).headingTiltToDirectionUp,a=(0,d.Ue)();if(!(0,y.K)(n.position,a,t))return null;var i=r(a,n.heading,n.tilt);(0,p.j)(i.direction,i.direction,e.state.camera.distance),(0,p.g)(i.direction,i.direction,a);var u=(0,R.dP)(e,a,i.direction,i.up);return u.fov=(0,s.Vl)(n.fov),u.row=n.layout.row,u.rows=n.layout.rows,u.column=n.layout.column,u.columns=n.layout.columns,u}!function(e){e[e.LOCKED=0]="LOCKED",e[e.ADJUST=1]="ADJUST"}(Q||(Q={}));var se=(0,d.Ue)();function fe(e,n,t){var r=e.renderSpatialReference,a=ge(e,n.eye,n.viewForward,n.up,te),i=ue(e);return(0,b.S)(n.eye,r,se,i)||(i=x.Z.WGS84,(0,b.S)(n.eye,r,se,i)),null==t?t=new o.Z(new h.Z(se,i),a.heading,a.tilt,(0,s.BV)(n.fov)):(t.position.x=se[0],t.position.y=se[1],t.position.z=se[2],t.position.spatialReference=i,t.heading=a.heading,t.tilt=a.tilt,t.fov=(0,s.BV)(n.fov)),t.layout.row=n.row,t.layout.rows=n.rows,t.layout.column=n.column,t.layout.columns=n.columns,t}function pe(e,n,t){var r=e.state.camera,a=r.width/2/r.pixelRatio;return e.renderCoordsHelper.viewingMode===M.JY.Global&&null!=t&&(n*=Math.cos((0,s.Vl)(t))),a/(96*39.37/(n/=e.renderCoordsHelper.unitInMeters))/Math.tan(r.fovX/2)}function de(e,n,t){var r=e.state.camera,a=n*Math.tan(r.fovX/2),i=96*39.37/(r.width/2/r.pixelRatio/a);return e.renderCoordsHelper.viewingMode===M.JY.Global&&null!=t&&(i/=Math.cos((0,s.Vl)(t))),i*e.renderCoordsHelper.unitInMeters}function ve(e,n,t,r,a,i){return he.apply(this,arguments)}function he(){return(he=(0,u.Z)((0,a.Z)().mark((function e(n,t,r,i,u,o){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",xe(n,t,pe(n,r,t.latitude),i,u,o));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function me(e,n,t,r,a,i){return Fe(e,Re(e,r.heading,r.tilt,n,t,a),r.fov,i)}function xe(e,n,t,r,a,i){return ye.apply(this,arguments)}function ye(){return(ye=(0,u.Z)((0,a.Z)().mark((function e(n,t,r,i,u,o){var c;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se(n,i.heading,i.tilt,t,r,u,o);case 2:return c=e.sent,e.abrupt("return",((0,f.k_)(o),Ke(n,c,i.fov,o)));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ge(e,n,t,r,a){return oe(e).directionToHeadingTilt(n,t,r,a)}function be(e,n){var t;return!!(e.basemapTerrain&&e.renderCoordsHelper.fromRenderCoords(n,re,e.spatialReference)&&e.elevationProvider&&(null!==(t=(0,Y.KO)(e.elevationProvider,re))&&void 0!==t?t:0)>re[2]-1)}function Ze(e,n,t){return we.apply(this,arguments)}function we(){return(we=(0,u.Z)((0,a.Z)().mark((function e(n,t,i){var u,o,c,l,s,p,d,v,h;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!be(n,t)){e.next=2;break}return e.abrupt("return",!0);case 2:if(o=n.elevationProvider,c=n.spatialReference,l=n.renderCoordsHelper,null!=o&&l.fromRenderCoords(t,re,c)){e.next=5;break}return e.abrupt("return",!1);case 5:return s=(0,r.Z)(re,3),p=s[0],d=s[1],v=s[2],e.next=11,o.queryElevation(p,d,v,c,"ground",i);case 11:if(e.t1=u=e.sent,e.t0=null!==e.t1,!e.t0){e.next=15;break}e.t0=void 0!==u;case 15:if(!e.t0){e.next=19;break}e.t2=u,e.next=20;break;case 19:e.t2=0;case 20:return h=e.t2,e.abrupt("return",((0,f.k_)(i),h>v-1));case 22:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ke(e,n,t){return Me.apply(this,arguments)}function Me(){return(Me=(0,u.Z)((0,a.Z)().mark((function e(n,t,r){var i,u,o,c,l,s,v;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=(0,d.Ue)(),null!=t){e.next=3;break}return e.abrupt("return",(0,p.c)(i,n.state.camera.center));case 3:if(!(t instanceof h.Z)){e.next=14;break}return u=n.renderSpatialReference,o=n.basemapTerrain,c=n.elevationProvider,l=t.spatialReference,e.next=7,(0,y.U)(t,i,u,0,{signal:r});case 7:if((0,f.k_)(r),null!=t.z||null==o||null==c){e.next=13;break}return e.next=11,c.queryElevation(t.x,t.y,null!==(s=t.z)&&void 0!==s?s:0,l,"ground",r);case 11:v=e.sent,(0,f.k_)(r),null!=v&&n.renderCoordsHelper.setAltitude(i,v);case 13:return e.abrupt("return",i);case 14:return e.abrupt("return",(0,p.c)(i,t));case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Re(e,n,t,r,a,i){return ze(e,n,t,r instanceof h.Z?r:null,function(e,n){var t=(0,d.Ue)();if(null==n)return(0,p.c)(t,e.state.camera.center);if(n instanceof h.Z){if(!(0,y.K)(n,t,e.renderSpatialReference))return null;var r=e.basemapTerrain,a=e.elevationProvider;if(null==n.z&&null!=r&&null!=a){var i=(0,Y.KO)(a,n);null!=i&&e.renderCoordsHelper.setAltitude(t,i)}return t}return(0,p.c)(t,n)}(e,r),a,i)}function Se(e,n,t,r,a,i,u){return Te.apply(this,arguments)}function Te(){return(Te=(0,u.Z)((0,a.Z)().mark((function e(n,t,r,i,u,o,c){var l,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=i instanceof h.Z?i:null,e.next=3,ke(n,i,c);case 3:return s=e.sent,e.abrupt("return",((0,f.k_)(c),Ue(n,t,r,l,s,u,o,c)));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ze(e,n,t,r,a,i,u){if(null==a)return null;if(!r&&(r=new h.Z({spatialReference:ue(e)}),!(0,g.f)(a,e.renderSpatialReference,r)))return null;var o=Ge(e,n,t,a,i,u);if(je(e,t,u)&&be(e,o.eye)){var c=Pe(e,t,a,i);return ze(e,n,c.tilt,r,a,i,c.mode)}return Ve(o,a)}function Ue(e,n,t,r,a,i,u,o){return Ce.apply(this,arguments)}function Ce(){return(Ce=(0,u.Z)((0,a.Z)().mark((function e(n,t,r,i,u,o,c,l){var s,p,d,v;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i,e.t0){e.next=8;break}return i=new h.Z({spatialReference:ue(n)}),e.next=5,(0,g.A)(u,n.renderSpatialReference,i,{signal:l});case 5:if(e.t1=e.sent,e.t1){e.next=8;break}i=null;case 8:if((0,f.k_)(l),s=Ge(n,t,r,u,o,c),e.t2=je(n,r,c),!e.t2){e.next=15;break}return e.next=14,Ze(n,s.eye,l);case 14:e.t2=e.sent;case 15:if(!e.t2){e.next=19;break}return(0,f.k_)(l),p=Pe(n,r,u,o),d=p.tilt,v=p.mode,e.abrupt("return",Ue(n,t,d,i,u,o,v,l));case 19:return e.abrupt("return",Ve(s,u));case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ge(e,n,t,r,a,i){var u=function(e,n,t,r,a,i){var u=0;return i===Q.ADJUST&&function(e,n,t){var r=e.pointsOfInterest.centerOnSurfaceFrequent.distance;if(Math.log(t/r)/Math.LN2>8)return!0;var a=n,i=e.pointsOfInterest.centerOnSurfaceFrequent.renderLocation;return(0,p.p)(a,i)/(Math.tan(.5*e.state.camera.fov)*r)>5}(e,r,a)?(n=0,u=function(e,n,t,r){var a=We(e,r,n,t);if(!e.state.constraints.tilt)return a;var i=e.state.constraints.tilt(n);i.max=Math.min(i.max,.5*Math.PI);var u=i.min*(1-Ie)+i.max*Ie;return Math.min(a,u)}(e,a,t,r)):u=We(e,r,a,t),u=e.state.constraints.clampTilt(a,u),{heading:n,tilt:t=He(e,r,a,u)}}(e,n,t,r,a=Math.max(a,e.state.constraints.minimumPoiDistance),i);return(0,oe(e).eyeForCenterWithHeadingTilt)(r,a,u.heading,u.tilt)}function je(e,n,t){var r=e.map.ground.navigationConstraint;return t===Q.ADJUST&&"global"===e.viewingMode&&n>0&&(null==r||"stay-above"===r.type)}function Pe(e,n,t,r){var a=He(e,t,r,function(e,n,t,r){var a=We(e,r,n,t);if(!e.state.constraints.tilt)return a;var i=e.state.constraints.tilt(n);return a=Math.min(a,.5*Math.PI),i.min*(1-Ie)+a*Ie}(e,r,n,t));return{tilt:a,mode:n-a<1?Q.LOCKED:Q.ADJUST}}function Ve(e,n){return(0,i.Z)((0,i.Z)({},e),{},{center:(0,d.d9)(n)})}function Ae(e,n){var t=e.state,r=e.spatialReference,a=n.spatialReference;return t.isGlobal&&(0,$.D)(a,M.JY.Global)||t.isLocal&&r.equals(a)}function Ee(e,n){var t,r,a;if(e.state.isGlobal){var i=new h.Z(n.xmin,n.ymin,n.spatialReference),u=new h.Z(n.xmax,n.ymax,n.spatialReference),o=n.spatialReference.isGeographic?ie:ae;t=new h.Z({x:o.center(i.x,u.x),y:(u.y+i.y)/2,z:null!=n.zmax&&null!=n.zmin?(n.zmax+n.zmin)/2:void 0,spatialReference:n.spatialReference});var c=(0,v.Iu)(n.spatialReference),l=(0,D.Nf)(t,i,u);r=l.lon,a=l.lat,o.diff(i.x,u.x)>o.range/2&&(r+=c.halfCircumference),r=Math.min(r,c.halfCircumference),a=Math.min(a,c.halfCircumference)}else{var s,f=null!==(s=e.renderSpatialReference)&&void 0!==s?s:n.spatialReference;f.equals(n.spatialReference)||(n=(0,m.project)(n,f)),r=n.xmax-n.xmin,a=n.ymax-n.ymin;var p=null!=n.zmax&&null!=n.zmin?(n.zmax+n.zmin)/2:void 0;t=new h.Z({x:n.xmin+.5*r,y:n.ymin+.5*a,z:p,spatialReference:f})}var d=null!=n.zmax&&null!=n.zmin?n.zmax-n.zmin:0,x=e.state.camera,y=1/Math.tan(x.fovX/2),g=1/Math.tan(x.fovY/2),b=1/Math.tan(x.fov/2);return{center:t,distance:Math.max(.5*r*y,.5*a*g,.5*d*b)/1}}function Oe(e,n,t,r,a,i){return Be.apply(this,arguments)}function Be(){return(Be=(0,u.Z)((0,a.Z)().mark((function e(n,t,r,i,u,o){var c,l,s,p,d;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Ae(n,t)){e.next=4;break}e.t0=t,e.next=7;break;case 4:return e.next=6,(0,m.projectWithZConversion)(t,n.spatialReference,{signal:o});case 6:e.t0=e.sent;case 7:return c=e.t0,(0,f.k_)(o),l=Ee(n,c),s=l.center,p=l.distance,e.next=14,Se(n,r,i,s,p,u,o);case 14:return d=e.sent,e.abrupt("return",((0,f.k_)(o),Ke(n,d,n.camera.fov,o)));case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function De(e,n,t,r,a,i){var u;try{u=Ae(e,n)?n:(0,m.project)(n,e.spatialReference)}catch(l){return null}var o=Ee(e,u),c=Re(e,t,r,o.center,o.distance,a);return null==c?null:Fe(e,c,e.camera.fov,i)}function _e(e,n,t){var r=e.renderSpatialReference,a=new h.Z({spatialReference:ue(e)});if(!(0,g.f)(t,r,a))return null;var i=Math.tan(n.fovX/2),u=Math.tan(n.fovY/2),o=(0,p.F)(n.eye,t),c=2*o*i*1,l=2*o*u*1;return"global"===e.viewingMode?N(e,a,c,l):E(e,a,c,l)}var Ie=.7;function He(e,n,t,r){return oe(e).lookAtTiltToEyeTilt(r,n,t)}function We(e,n,t,r){return oe(e).eyeTiltToLookAtTilt(r,n,t)}function Fe(e,n,t,r){var a;if(null==n)return null;var i=e.renderSpatialReference,u=new h.Z({spatialReference:ue(e)});return(0,g.f)(n.eye,i,u)?(null!==(a=r)&&void 0!==a||(r=new o.Z),r.position=u,r.heading=n.heading,r.tilt=n.tilt,r.fov=t,r):null}function Ke(e,n,t,r){return Le.apply(this,arguments)}function Le(){return(Le=(0,u.Z)((0,a.Z)().mark((function e(n,t,r,i){var u,c;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=n.renderSpatialReference,c=new h.Z({spatialReference:ue(n)}),e.next=3,(0,g.A)(t.eye,u,c,{signal:i});case 3:return(0,f.k_)(i),e.abrupt("return",new o.Z(c,t.heading,t.tilt,r));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qe(e,n){var t,r=null===(t=e.basemapTerrain)||void 0===t?void 0:t.tilingScheme;if(r)return r.levelAtScale(n);ee().error("#scaleToZoom()","Cannot compute zoom from scale without a tiling scheme")}function Je(e,n){var t,r=null===(t=e.basemapTerrain)||void 0===t?void 0:t.tilingScheme;if(r)return r.scaleAtLevel(n);ee().error("#zoomToScale()","Cannot compute scale from zoom without a tiling scheme")}function Ne(e,n){var t=e.renderSpatialReference,r=function(e){return(0,w.fS)(e,Z.HQ)||(0,w.BZ)(e)?{wkid:k.W.GCSMARS2000}:(0,w.fS)(e,Z.VY)||(0,w.V2)(e)?{wkid:k.W.GCSMOON2000}:x.Z.WGS84}(t),a=null;try{(0,b.S)(n.center,t,ne,r)&&(a=ne[1])}catch(i){}return de(e,n.distance,a)}},71917:function(e,n,t){t.d(n,{d:function(){return c},t:function(){return l}});var r=t(16889),a=t(32035),i=t(12400),u=(0,i.Ue)(),o=(0,i.Ue)();function c(){return{direction:(0,i.Ue)(),up:(0,i.Ue)()}}function l(e,n,t,i,c){var l=(0,a.n)(u,e),s=(0,a.m)(l,i),f=s>0;(s=Math.abs(s))>.99&&((s=Math.abs((0,a.m)(n,i)))<.99?((0,a.c)(l,n),f&&(0,a.j)(l,l,-1)):l=null);var p=0;if(l){(0,a.j)(o,i,(0,a.m)(i,l)),(0,a.f)(l,l,o);var d=(0,a.m)(l,c)/((0,a.l)(l)*(0,a.l)(c));(0,a.b)(o,l,c),p=((0,a.m)(o,i)>0?1:-1)*(0,r.BV)((0,r.ZF)(d))}var v=(0,r.BV)((0,r.ZF)(-(0,a.m)(i,e)/(0,a.l)(e)));return t?(t.heading=p,t.tilt=v,t):{heading:p,tilt:v}}},696:function(e,n,t){t.d(n,{Be:function(){return c},Nf:function(){return o},Sk:function(){return l},dF:function(){return s}});var r=t(16889),a=t(83448),i=t(848);function u(e,n,t){if(null==n.longitude||null==n.latitude||null==t.longitude||null==t.latitude)throw new Error("Invalid points: no lon/lat");return function(e,n,t,a,i){var u=(0,r.Vl)(t),o=(0,r.Vl)(i),c=u-o,l=(0,r.Vl)(n)-(0,r.Vl)(a),s=Math.sin(c/2),f=Math.sin(l/2),p=2*(0,r.Kt)(Math.sqrt(s*s+Math.cos(u)*Math.cos(o)*f*f))*e;return Math.round(1e4*p)/1e4}(e,n.longitude,n.latitude,t.longitude,t.latitude)}function o(e,n,t){var r=n.spatialReference,o=(0,a.Iu)(r),c=new i.Z(n.x,e.y,r),l=new i.Z(t.x,e.y,r),s=new i.Z(e.x,n.y,r),f=new i.Z(e.x,t.y,r);return{lon:u(o.radius,c,l),lat:u(o.radius,s,f)}}function c(e,n,t){var a=n/t,i=(0,r.Vl)(e),u=Math.sin(a/2),o=Math.cos(i),c=2*(0,r.Kt)(Math.sqrt(u*u/(o*o)));return(0,r.BV)(c)}function l(e,n){var t=e/15;return n||(t=Math.round(t)),t}function s(e,n){var t=null===e||void 0===e?void 0:e[0];if(null==t)return null;n||(n={hours:0,minutes:0,seconds:0}),n.hours=l(t,!0);var r=n.hours%1;n.hours-=r,n.minutes=60*r;var a=n.minutes%1;return n.minutes-=a,n.seconds=Math.round(60*a),n}},90647:function(e,n,t){t.r(n),t.d(n,{create:function(){return N},fromCamera:function(){return J},toCameraAsync:function(){return I},toCameraSync:function(){return _}});var r=t(29439),a=t(37762),i=t(74165),u=t(43144),o=t(15671),c=t(15861),l=t(63665),s=(t(59486),t(52639)),f=t(36721),p=t(14921),d=(t(93169),t(17768)),v=t(10064),h=t(66978),m=t(29303),x=t(21389),y=t(7025),g=t(32035),b=t(12400),Z=t(79803),w=t(37998),k=t(68859),M=t(5629),R=t(5986),S=t(41414),T=t(65156),z=t(95773),U=t(82582),C=t(87532),G=t(60084),j=t(77648),P=t(848),V=t(53866),A=t(78952),E=t(32238),O=t(77577);function B(e){return 360-d.BV.normalize(e)}function D(e){return d.BV.normalize(360-e)}function _(e,n,t){var r=n.camera;if(null!=r)return function(e,n){var t,r=e.position;try{t=(0,Z.tryProjectWithZConversion)(r,n)}catch(u){return null}if(!t)return null;var a=e.clone();return a.position=t.clone(),a}(r,(0,G.h5)(e));var a=n.targetGeometry;if(null==a)return null;var i=K(e,n.rotation,t),u=i.camera,o=i.mode;if("point"===a.type)return function(e,n,t,r,a){var i,u=e.spatialReference;try{i=(0,Z.tryProjectWithZConversion)(t.clone(),u)}catch(c){return null}if(!i)return null;var o=null!=n.scale?(0,G._U)(e,n.scale,i.latitude):e.state.camera.distance;return(0,G.Hm)(e,i,o,r,a)}(e,n,a,u,o);var c=a.extent;return null==c?null:(0,G.S9)(e,c,u.heading,u.tilt,o)}function I(e,n,t,r){return H.apply(this,arguments)}function H(){return(H=(0,c.Z)((0,i.Z)().mark((function e(n,t,r,a){var u,o,c,l,s,f;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(u=t.camera)){e.next=3;break}return e.abrupt("return",W(u,(0,G.h5)(n),a));case 3:if(null!=(o=t.targetGeometry)){e.next=6;break}throw new Error("Viewpoint has no targetGeometry!");case 6:if(c=K(n,t.rotation,r),l=c.camera,s=c.mode,"point"!==o.type){e.next=9;break}return e.abrupt("return",L(n,t,o,l,s,a));case 9:if(null!=(f=o.extent)){e.next=12;break}throw new Error("Target geometry has no extent!");case 12:return e.abrupt("return",(0,G.Ic)(n,f,l.heading,l.tilt,s,a));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(e,n,t){return F.apply(this,arguments)}function F(){return(F=(0,c.Z)((0,i.Z)().mark((function e(n,t,r){var a,u,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.position,e.next=3,(0,Z.projectWithZConversion)(a,t,{signal:r});case 3:return u=e.sent,(0,h.k_)(r),o=n.clone(),e.abrupt("return",(o.position=u.clone(),o));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K(e,n,t){var r=(0,G.l0)(e,e.state.camera),a=G.Q8.ADJUST;return null!=n&&(r.heading=B(n),a=G.Q8.LOCKED),null!=t&&(r.tilt=t),{camera:r,mode:a}}function L(e,n,t,r,a,i){return q.apply(this,arguments)}function q(){return(q=(0,c.Z)((0,i.Z)().mark((function e(n,t,r,a,u,o){var c,l,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=n.spatialReference,e.next=3,(0,Z.projectWithZConversion)(r.clone(),c,{signal:o});case 3:return l=e.sent,(0,h.k_)(o),s=null!=t.scale?(0,G._U)(n,t.scale,l.latitude):n.state.camera.distance,e.abrupt("return",(0,G.gL)(n,l,s,a,u,o));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return null==t&&(t=new f.Z),ee(e,null,n.clone(),t)}function N(e,n,t){return Q.apply(this,arguments)}function Q(){return(Q=(0,c.Z)((0,i.Z)().mark((function e(n,t,r){var a,u,o,c,s,p,d,h,m;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=Me(n,t)){e.next=3;break}throw new v.Z("viewpointutils-create:no-target","Missing target for creating viewpoint");case 3:if(u=new l.Z({fov:n.camera.fov}),o=new f.Z({camera:u}),!(a.target instanceof f.Z)){e.next=10;break}return e.t0=Re,e.next=8,oe(n,a.target,a,r,o);case 8:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 10:if(!(a.target instanceof l.Z)){e.next=16;break}return e.t2=Re,e.next=14,le(n,a.target,r,o);case 14:return e.t3=e.sent,e.abrupt("return",(0,e.t2)(e.t3));case 16:if(c=null!=a.scale||null!=a.zoom,!(a.target instanceof V.Z)){e.next=31;break}if(s=a.target.xmin===a.target.xmax||a.target.ymin===a.target.ymax,e.t4=Re,!c&&!s){e.next=26;break}return e.next=23,de(n,a,a.target.center,u,r,o);case 23:e.t5=e.sent,e.next=29;break;case 26:return e.next=28,ge(n,a,a.target,u,r,o);case 28:e.t5=e.sent;case 29:return e.t6=e.t5,e.abrupt("return",(0,e.t4)(e.t6));case 31:return p=new Te,d=c?Y(n,a):void 0,e.next=34,ie(n,a.target,d,p,r);case 34:if(!isFinite(p.boundingBox[0])){e.next=47;break}if((0,S.be)(p.boundingBox,ze),Oe.x=ze[0],Oe.y=ze[1],Oe.z=ze[2],Oe.spatialReference=n.spatialReference,isFinite(Oe.z)&&p.hasZ?h=(0,S.wp)(p.boundingBox):(Oe.z=void 0,h=(0,T.wp)((0,S.y8)(p.boundingBox,je))),!c&&!h){e.next=41;break}return e.t7=Re,e.next=39,de(n,a,Oe,u,r,o);case 39:return e.t8=e.sent,e.abrupt("return",(0,e.t7)(e.t8));case 41:return m=Se(n,p.screenSpaceObjects),e.t9=Re,e.next=45,we(n,a,Oe,p.boundingBox,m,u,r,o);case 45:return e.t10=e.sent,e.abrupt("return",(0,e.t9)(e.t10));case 47:if(!a.position){e.next=55;break}return e.t12=Re,e.next=51,he(n,a,u,o,r);case 51:e.t13=e.sent,e.t11=(0,e.t12)(e.t13),e.next=60;break;case 55:return e.t14=Re,e.next=58,xe(n,a,u,r,o);case 58:e.t15=e.sent,e.t11=(0,e.t14)(e.t15);case 60:return e.abrupt("return",e.t11);case 61:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(e,n){return null==n.scale&&null!=n.zoom?(0,G.EO)(e,n.zoom):n.scale}function Y(e,n){var t=X(e,n);return t?(0,U.DE)(t):void 0}function $(e,n){var t=!1;return null!=n.heading?(e.heading=n.heading,t=!0):null!=n.rotation&&(e.heading=B(n.rotation),t=!0),null!=n.tilt&&(e.tilt=n.tilt,t=!0),null!=n.fov&&(e.fov=n.fov),t}function ee(e,n,t,r){var a,i=e.spatialReference||A.Z.WGS84;if(null!==(a=n)&&void 0!==a||(n=(0,G.n3)(e,t)),null==n)return r;var u=new P.Z({spatialReference:i});if(!(0,M.f)(n.center,e.renderSpatialReference,u))return r;r.targetGeometry=u;var o=u.latitude;return r.scale=null!=o?(0,G.Xt)(e,n.distance,o):(0,G.ZN)(e,n),r.rotation=D(t.heading),r.camera=t,r}function ne(e,n,t,r){return te.apply(this,arguments)}function te(){return(te=(0,c.Z)((0,i.Z)().mark((function e(n,t,u,o){var c,l,s,f,p,d,h,m,x,y,g,b,w,k,M,R,T,z,U,C,G;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=function(){return new v.Z("viewpointutils:invalid-geometry","The target is missing a valid geometry")},t){e.next=3;break}throw l();case 3:if("mesh"===t.type&&(t=t.extent),s=n.basemapTerrain.spatialReference,t.hasZ||!n.basemapTerrain){e.next=24;break}e.t0=t.type,e.next="point"===e.t0?9:"multipoint"===e.t0||"polyline"===e.t0?11:"extent"===e.t0?13:"polygon"===e.t0?15:16;break;case 9:return p=t,e.abrupt("break",16);case 11:return p=null===(c=t.extent)||void 0===c?void 0:c.center,e.abrupt("break",16);case 13:return p=t.center,e.abrupt("break",16);case 15:p=t.centroid;case 16:if(null==p||!s||!n.elevationProvider){e.next=23;break}return e.next=19,(0,Z.projectWithZConversion)(p,s,{signal:o});case 19:p=e.sent,ze[2]=null!==(f=(0,j.KO)(n.elevationProvider,p))&&void 0!==f?f:0,e.next=24;break;case 23:ze[2]=0;case 24:if(d=Be[t.type],h=new Array,d(t,t.hasZ?function(e){h.push([e[0],e[1],e[2]])}:function(e){h.push([e[0],e[1]])},ze),0!==h.length){e.next=27;break}throw l();case 27:return m=t.spatialReference,x=n.spatialReference,e.next=31,(0,Z.projectWithZConversion)(new O.Z({spatialReference:m,hasZ:t.hasZ,hasM:!1,points:h}),x,{signal:o});case 31:if(y=e.sent,t.hasZ&&(u.hasZ=!0),t.hasZ){g=(0,a.Z)(y.points);try{for(g.s();!(b=g.n()).done;)w=(0,r.Z)(b.value,3),k=w[0],M=w[1],R=w[2],ze[0]=k,ze[1]=M,ze[2]=R,(0,S.pp)(u.boundingBox,ze)}catch(i){g.e(i)}finally{g.f()}}else{T=(0,a.Z)(y.points);try{for(T.s();!(z=T.n()).done;)U=(0,r.Z)(z.value,2),C=U[0],G=U[1],ze[0]=C,ze[1]=G,(0,S.pp)(u.boundingBox,ze)}catch(i){T.e(i)}finally{T.f()}}case 33:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function re(e,n,t,r,a){return ae.apply(this,arguments)}function ae(){return(ae=(0,c.Z)((0,i.Z)().mark((function e(n,t,r,a,u){var o,c,l,s,f,d;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,p.q6)(n.whenViewForGraphic(t));case 2:if(!1!==(o=e.sent).ok&&null!=o.value&&"whenGraphicBounds"in o.value){e.next=7;break}return e.next=6,ne(n,t.geometry,a,u);case 6:return e.abrupt("return",void e.sent);case 7:return c=o.value,e.next=10,(0,p.q6)(c.whenGraphicBounds(t,{minDemResolution:r}));case 10:if(!1!==(l=e.sent).ok&&l.value){e.next=15;break}return e.next=14,ne(n,t.geometry,a,u);case 14:return e.abrupt("return",void e.sent);case 15:s=l.value,f=s.screenSpaceObjects,d=s.boundingBox,(0,S.TC)(a.boundingBox,d),f&&f.forEach((function(e){a.screenSpaceObjects.push(e)})),isFinite(d[2])&&(a.hasZ=!0);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ie(e,n,t,r,a){return ue.apply(this,arguments)}function ue(){return(ue=(0,c.Z)((0,i.Z)().mark((function e(n,t,r,a,u){var o,c,l;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Array.isArray(t)||2!==t.length){e.next=10;break}if(c=t[0],l=t[1],"number"!=typeof c||"number"!=typeof l){e.next=10;break}return Oe.x=c,Oe.y=l,Oe.z=void 0,Oe.spatialReference=null!==(o=n.spatialReference)&&void 0!==o&&o.isGeographic?n.spatialReference:A.Z.WGS84,e.next=9,ne(n,Oe,a,u);case 9:return e.abrupt("return",void e.sent);case 10:if(!t||!("map"in t)||"function"!=typeof t.map){e.next=15;break}return e.next=13,Promise.allSettled(t.map((function(e){return ie(n,e,r,a,u)})));case 13:case 18:e.next=24;break;case 15:if(!(t instanceof E.Z)){e.next=20;break}return e.next=18,ne(n,t,a,u);case 20:if(e.t0=t instanceof s.Z,!e.t0){e.next=24;break}return e.next=24,re(n,t,r,a,u);case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oe(e,n,t,r,a){return ce.apply(this,arguments)}function ce(){return(ce=(0,c.Z)((0,i.Z)().mark((function e(n,t,r,a,u){var o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.camera){e.next=2;break}return e.abrupt("return",le(n,t.camera,a,u));case 2:return u.scale=t.scale,u.rotation=t.rotation,u.targetGeometry=null!=t.targetGeometry?t.targetGeometry.clone():null,u.camera=null,null!=r.heading?u.rotation=D(r.heading):null!=r.rotation&&(u.rotation=r.rotation),null!=(o=X(n,r))&&(u.scale=o),e.next=7,I(n,u,r.tilt,a);case 7:return u.camera=e.sent,e.abrupt("return",u);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function le(e,n,t,r){return se.apply(this,arguments)}function se(){return(se=(0,c.Z)((0,i.Z)().mark((function e(n,t,r,a){var u,o,c;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=n.spatialReference,e.next=3,(0,Z.projectWithZConversion)(t.position,u,{signal:r});case 3:return o=e.sent,c=t.clone(),e.abrupt("return",(c.position=o,ee(n,null,c,a)));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fe(e,n,t,r,a,i,u){return pe.apply(this,arguments)}function pe(){return(pe=(0,c.Z)((0,i.Z)().mark((function e(n,t,r,a,u,o,c){var l;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=n.renderSpatialReference,e.next=3,(0,k.U)(t,Ae,l,0,{signal:c});case 3:return e.next=5,(0,k.U)(r,Ve,l,0,{signal:c});case 5:return o.targetGeometry=new P.Z(t),u.position=new P.Z(r),(0,g.f)(Pe,Ae,Ve),(0,G.t_)(n,Ve,Pe,a.up,u),o.scale=(0,G.Xt)(n,(0,g.p)(Ve,Ae),o.targetGeometry.latitude),o.rotation=D(u.heading),o.camera=u,e.abrupt("return",o);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function de(e,n,t,r,a,i){return ve.apply(this,arguments)}function ve(){return(ve=(0,c.Z)((0,i.Z)().mark((function e(n,t,r,a,u,o){var c,l,s,f,p;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o.targetGeometry=r.clone(),c=(0,C.dP)(n),!t.position){e.next=4;break}return e.abrupt("return",fe(n,o.targetGeometry,t.position,c,a,o,u));case 4:if(t.zoomFactor&&(l=c.distance/t.zoomFactor,s=(0,g.j)(ze,c.viewForward,-l),c.eye=(0,g.g)(ze,c.center,s),o.scale=(0,G.Xt)(n,l,r.latitude)),(0,G.l0)(n,c,a),f=$(a,t)?G.Q8.LOCKED:G.Q8.ADJUST,t.zoomFactor){e.next=19;break}if(null!=(p=X(n,t))){e.next=15;break}return e.next=12,(0,k.U)(r,ze,n.renderSpatialReference,0,{signal:u});case 12:(0,z.g8)(c.frustum,ze)?o.scale=(0,G.Xt)(n,(0,g.p)(c.eye,ze),r.latitude):o.scale=(0,G.ZN)(n,c),e.next=16;break;case 15:o.scale=p;case 16:return e.next=18,(0,G.UI)(n,o.targetGeometry,o.scale,a,f,u);case 18:o.camera=e.sent;case 19:return e.abrupt("return",o);case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function he(e,n,t,r,a){return me.apply(this,arguments)}function me(){return(me=(0,c.Z)((0,i.Z)().mark((function e(n,t,r,a,u){var o,c,l,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=(0,C.dP)(n),(0,g.c)(Pe,o.viewForward),(0,G.t_)(n,o.eye,Pe,o.up,Ee),c=n.spatialReference,!(l=t.position)){e.next=10;break}return e.next=6,(0,Z.projectWithZConversion)(l,c,{signal:u});case 6:s=e.sent,r.position=s,e.next=11;break;case 10:r.position=new P.Z;case 11:return e.abrupt("return",(r.heading=null!=t.heading?t.heading:Ee.heading,r.tilt=null!=t.tilt?t.tilt:Ee.tilt,ee(n,null,r,a)));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xe(e,n,t,r,a){return ye.apply(this,arguments)}function ye(){return(ye=(0,c.Z)((0,i.Z)().mark((function e(n,t,r,a,u){var o,c,l,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==t.heading&&null==t.rotation&&null==t.scale&&null==t.tilt&&null==t.zoom&&null==t.zoomFactor){e.next=3;break}return o=(0,C.dP)(n),c=n.spatialReference,l=n.renderSpatialReference,s=new P.Z({spatialReference:c}),e.abrupt("return",(0,M.f)(o.center,l,s)?de(n,t,s,r,a,u):u);case 3:return e.abrupt("return",(u.scale=n.scale,u.camera=n.camera.clone(),$(u.camera,t),u));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ge(e,n,t,r,a,i){return be.apply(this,arguments)}function be(){return(be=(0,c.Z)((0,i.Z)().mark((function e(n,t,r,a,u,o){var c,l;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.targetGeometry=r.clone(),c=(0,C.dP)(n),(0,G.l0)(n,c,a),l=$(a,t)?G.Q8.LOCKED:G.Q8.ADJUST,e.next=6,(0,G.Ic)(n,r,a.heading,a.tilt,l,u);case 6:return o.camera=e.sent,e.abrupt("return",o);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ze(e,n,t,r,a){var i=0;null!=t.z?i=t.z:e.basemapTerrain&&e.elevationProvider&&(i=(0,j.KO)(e.elevationProvider,t)),(0,g.s)(ze,t.x,t.y,i),(0,w.B)(e.spatialReference,ze,Ue,e.renderSpatialReference),(0,m.xO)(Ce,Ue),(0,m.p4)(Ce,Ce),(0,S.cS)(Ge);for(var u=[[0,1,2],[3,1,2],[0,4,2],[3,4,2],[0,1,5],[3,1,5],[0,4,5],[3,4,5]],o=0;o<u.length;o++){var c=u[o],l=r[c[2]];isFinite(l)||(l=i),(0,g.s)(ze,r[c[0]],r[c[1]],l),(0,R.S)(ze,e.spatialReference,ze,e.renderSpatialReference),(0,S.pp)(Ge,(0,g.t)(ze,ze,Ce))}var s=(0,S.bf)(Ge),f=(0,S.Cb)(Ge),p=(0,S.Ye)(Ge),d=1/Math.tan(n.fovX/2),v=1/Math.tan(n.fovY/2),h=.5*Math.sqrt(s*s+p*p)*Math.max(v,d)+.5*f,x=.5*f*v+.5*Math.max(s,p);return Math.max(h,x)/a}function we(e,n,t,r,a,i,u,o){return ke.apply(this,arguments)}function ke(){return(ke=(0,c.Z)((0,i.Z)().mark((function e(n,t,r,a,u,o,c,l){var s,f,p;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l.targetGeometry=r.clone(),s=(0,C.dP)(n),f=Ze(n,s,r,a,u),(0,G.l0)(n,s,o),p=$(o,t)?G.Q8.LOCKED:G.Q8.ADJUST,l.scale=(0,G.Xt)(n,f,l.targetGeometry.latitude),e.next=7,(0,G.UI)(n,l.targetGeometry,l.scale,o,p,c);case 7:return l.camera=e.sent,e.abrupt("return",l);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Me(e,n){if(!n||!e.spatialReference)return null;var t={target:void 0};return"declaredClass"in n||Array.isArray(n)?t.target=n:(Object.assign(t,n),!t.target&&"center"in n&&n.center&&(t.target=n.center)),t}function Re(e){return null!=(null===e||void 0===e?void 0:e.camera)&&(e.rotation=D(e.camera.heading)),e}function Se(e,n){if(!n.length)return.66;for(var t=Number.NEGATIVE_INFINITY,r=0;r<n.length;r++){var a=n[r].screenSpaceBoundingRect;t=Math.max(t,Math.abs(a[0]),Math.abs(a[1]),Math.abs(a[2]),Math.abs(a[3]))}return.66-t/Math.min(e.width,e.height)*2}var Te=(0,u.Z)((function e(){(0,o.Z)(this,e),this.hasZ=!1,this.boundingBox=(0,S.cS)(),this.screenSpaceObjects=new Array})),ze=(0,b.Ue)(),Ue=(0,y.Ue)(),Ce=(0,x.Ue)(),Ge=(0,S.Ue)(),je=(0,T.Ue)(),Pe=(0,b.Ue)(),Ve=(0,b.Ue)(),Ae=(0,b.Ue)(),Ee={heading:0,tilt:0},Oe=new P.Z,Be={point:function(e,n,t){t[0]=e.x,t[1]=e.y,null!=e.z&&(t[2]=e.z),n(t)},polygon:function(e,n,t){for(var r=e.hasZ,a=0;a<e.rings.length;a++)for(var i=e.rings[a],u=0;u<i.length;u++)t[0]=i[u][0],t[1]=i[u][1],r&&(t[2]=i[u][2]),n(t)},polyline:function(e,n,t){for(var r=e.hasZ,a=0;a<e.paths.length;a++)for(var i=e.paths[a],u=0;u<i.length;u++)t[0]=i[u][0],t[1]=i[u][1],r&&(t[2]=i[u][2]),n(t)},multipoint:function(e,n,t){for(var r=e.points,a=e.hasZ,i=0;i<r.length;i++)t[0]=r[i][0],t[1]=r[i][1],a&&(t[2]=r[i][2]),n(t)},extent:function(e,n,t){null!=e.zmin&&null!=e.zmax?(n((0,g.s)(t,e.xmin,e.ymin,e.zmin)),n((0,g.s)(t,e.xmax,e.ymin,e.zmin)),n((0,g.s)(t,e.xmin,e.ymax,e.zmin)),n((0,g.s)(t,e.xmax,e.ymax,e.zmin)),n((0,g.s)(t,e.xmin,e.ymin,e.zmax)),n((0,g.s)(t,e.xmax,e.ymin,e.zmax)),n((0,g.s)(t,e.xmin,e.ymax,e.zmax)),n((0,g.s)(t,e.xmax,e.ymax,e.zmax))):(n((0,g.s)(t,e.xmin,e.ymin,t[2])),n((0,g.s)(t,e.xmax,e.ymin,t[2])),n((0,g.s)(t,e.xmin,e.ymax,t[2])),n((0,g.s)(t,e.xmax,e.ymax,t[2])))}}}}]);
//# sourceMappingURL=90647.ba20097d.chunk.js.map