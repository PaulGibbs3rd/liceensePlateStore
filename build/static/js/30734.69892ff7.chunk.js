"use strict";(self.webpackChunkreact_training=self.webpackChunkreact_training||[]).push([[30734],{45028:function(e,t,n){n.d(t,{C:function(){return _},b:function(){return w}});var r,o,i,a,l,s,c,u=n(30168),f=n(37081),d=n(33280),p=n(94951),v=n(14801),h=n(48655),g=n(137),m=n(15226),y=n(18607),O=n(26461),x=n(116),b=n(41012),S=n(95276),C=n(98634),P=n(64201),T=n(25920),A=n(4760);function w(e){var t=new P.kG,n=t.vertex,w=t.fragment,_=t.attributes,z=t.varyings;(0,b.Sv)(n,e),t.include(p.w,e),t.include(h.c,e),t.include(y.k,e),t.include(v.R,e),_.add(A.T.POSITION,"vec3"),e.vvColor&&_.add(A.T.COLORFEATUREATTRIBUTE,"float"),z.add("vColor","vec4"),z.add("vpos","vec3");var E=e.multipassEnabled&&e.output===f.H_.Color;E&&z.add("depth","float"),n.uniforms.add(new S.N("eColor",(function(e){return e.color}))),n.code.add((0,C.H)(r||(r=(0,u.Z)(["\n    void main(void) {\n      vpos = position;\n      forwardNormalizedVertexColor();\n      forwardObjectAndLayerIdColor();\n\n      ","\n      ","\n      gl_Position = transformPosition(proj, view, vpos);\n    }\n  "])),e.hasVertexColors?"vColor *= eColor;":e.vvColor?"vColor = eColor * interpolateVVColor(colorFeatureAttribute);":"vColor = eColor;",E?"depth = (view * vec4(vpos, 1.0)).z;":"")),t.include(d.f5,e),E&&t.include(m.l,e),w.include(x.Y);var Z=e.output===f.H_.Highlight;return Z&&t.include(g.bA,e),e.transparencyPassType===T.A.ColorAlpha&&(t.outputs.add("fragColor","vec4",0),t.outputs.add("fragAlpha","float",1)),w.code.add((0,C.H)(o||(o=(0,u.Z)(["\n  void main() {\n    discardBySlice(vpos);\n    ","\n    vec4 fColor = vColor;\n\n    ","\n\n    if (fColor.a < ",") {\n      discard;\n    }\n\n    ","\n    ",";\n    ","\n  }\n  "])),E?"terrainDepthTest(depth);":"",e.output===f.H_.ObjectAndLayerIdColor?(0,C.H)(i||(i=(0,u.Z)(["fColor.a = 1.0;"]))):"",C.H.float(O.b),e.output===f.H_.Color?(0,C.H)(a||(a=(0,u.Z)(["fragColor = highlightSlice(fColor, vpos); ",""])),e.transparencyPassType===T.A.ColorAlpha?(0,C.H)(l||(l=(0,u.Z)(["\n                  fragColor = premultiplyAlpha(fragColor);\n                  fragAlpha = fragColor.a;"]))):""):"",Z?(0,C.H)(s||(s=(0,u.Z)(["outputHighlight();"]))):"",e.output===f.H_.ObjectAndLayerIdColor?(0,C.H)(c||(c=(0,u.Z)(["outputObjectAndLayerIdColor();"]))):"")),t}var _=Object.freeze(Object.defineProperty({__proto__:null,build:w},Symbol.toStringTag,{value:"Module"}))},83544:function(e,t,n){n.d(t,{H:function(){return te},b:function(){return J},c:function(){return K}});var r,o,i,a,l,s,c,u,f,d,p,v,h,g,m,y,O,x,b,S,C,P=n(30168),T=n(13611),A=n(6644),w=n(86361),_=n(37081),z=n(33280),E=n(14801),Z=n(28156),D=n(81879),R=n(50913),H=n(55616),I=n(137),j=n(18607),V=n(26461),F=n(116),U=n(78980),N=n(62993),L=n(41012),M=n(82999),k=n(95276),B=n(58406),G=n(98634),W=n(64201),q=n(19253),Y=n(25920),X=n(4760);function J(e){var t=new W.kG,n=e.signedDistanceFieldEnabled;if(t.include(D.R,e),t.include(z.f5,e),e.occlusionPass)return t.include(R.R,e),t;var A=t.vertex,J=t.fragment;t.include(N.cK),J.include(U.n),J.include(F.Y),t.include(j.k,e),t.include(E.R,e),t.include(H.P),t.varyings.add("vcolor","vec4"),t.varyings.add("vtc","vec2"),t.varyings.add("vsize","vec2"),t.varyings.add("voccluded","float"),A.uniforms.add(new k.N("viewport",(function(e,t){return t.camera.fullViewport})),new M.A("screenOffset",(function(e,t){return(0,T.t8)(ee,2*e.screenOffset[0]*t.camera.pixelRatio,2*e.screenOffset[1]*t.camera.pixelRatio)})),new M.A("anchorPosition",(function(e){return K(e)})),new k.N("materialColor",(function(e){return e.color}))),(0,L.ZI)(A),n&&(A.uniforms.add(new k.N("outlineColor",(function(e){return e.outlineColor}))),J.uniforms.add(new k.N("outlineColor",(function(e){return Q(e)?e.outlineColor:w.AG})),new B.p("outlineSize",(function(e){return Q(e)?e.outlineSize:0})))),e.pixelSnappingEnabled&&A.include(Z.H),e.hasScreenSizePerspective&&((0,N.ww)(A),(0,N.m8)(A)),e.debugDrawLabelBorder&&t.varyings.add("debugBorderCoords","vec4"),t.attributes.add(X.T.UV0,"vec2"),t.attributes.add(X.T.COLOR,"vec4"),t.attributes.add(X.T.SIZE,"vec2"),t.attributes.add(X.T.FEATUREATTRIBUTE,"vec4"),A.code.add((0,G.H)(r||(r=(0,P.Z)(["\n    void main(void) {\n      ProjectHUDAux projectAux;\n      vec4 posProj = projectPositionHUD(projectAux);\n      forwardObjectAndLayerIdColor();\n\n      if (rejectBySlice(projectAux.posModel)) {\n        // Project outside of clip plane\n        gl_Position = vec4(1e038, 1e038, 1e038, 1.0);\n        return;\n      }\n      vec2 inputSize;\n      ","\n\n      ","\n\n      vec2 combinedSize = inputSize * pixelRatio;\n      vec4 quadOffset = vec4(0.0);\n      bool visible = testHUDVisibility(posProj);\n      voccluded = visible ? 0.0 : 1.0;\n    "])),e.hasScreenSizePerspective?(0,G.H)(o||(o=(0,P.Z)(["\n            inputSize = screenSizePerspectiveScaleVec2(size, projectAux.absCosAngle, projectAux.distanceToCamera, screenSizePerspective);\n            vec2 screenOffsetScaled = screenSizePerspectiveScaleVec2(screenOffset, projectAux.absCosAngle, projectAux.distanceToCamera, screenSizePerspectiveAlignment);\n         "]))):(0,G.H)(i||(i=(0,P.Z)(["\n            inputSize = size;\n            vec2 screenOffsetScaled = screenOffset;"]))),e.vvSize?"inputSize *= vvScale(featureAttribute).xx;":""));var $=(0,G.H)(a||(a=(0,P.Z)(["vec2 uv01 = floor(uv0);\nvec2 uv = uv0 - uv01;\nquadOffset.xy = ((uv01 - anchorPosition) * 2.0 * combinedSize + screenOffsetScaled) / viewport.zw * posProj.w;"]))),te=e.pixelSnappingEnabled?n?(0,G.H)(l||(l=(0,P.Z)(["posProj = alignToPixelOrigin(posProj, viewport.zw) + quadOffset;"]))):(0,G.H)(s||(s=(0,P.Z)(["posProj += quadOffset;\nif (inputSize.x == size.x) {\nposProj = alignToPixelOrigin(posProj, viewport.zw);\n}"]))):(0,G.H)(c||(c=(0,P.Z)(["posProj += quadOffset;"])));A.code.add((0,G.H)(u||(u=(0,P.Z)(["\n    ","\n    ","\n    ","\n\n    ","\n\n    bool alphaDiscard = vcolor.a < ",";\n    ",'\n    if (alphaDiscard) {\n      // "early discard" if both symbol color (= fill) and outline color (if applicable) are transparent\n      gl_Position = vec4(1e38, 1e38, 1e38, 1.0);\n      return;\n    } else {\n      ',"\n      gl_Position = posProj;\n    }\n\n    vtc = uv;\n\n    ","\n    vsize = inputSize;\n    ","\n  }\n  "])),e.occlusionTestEnabled?"if (visible) {":"",$,e.vvColor?"vcolor = interpolateVVColor(featureAttribute.y) * materialColor;":"vcolor = color / 255.0 * materialColor;",e.output===_.H_.ObjectAndLayerIdColor?(0,G.H)(f||(f=(0,P.Z)(["vcolor.a = 1.0;"]))):"",G.H.float(V.b),n?"alphaDiscard = alphaDiscard && outlineColor.a < ".concat(G.H.float(V.b),";"):"",te,e.debugDrawLabelBorder?"debugBorderCoords = vec4(uv01, 1.5 / combinedSize);":"",e.occlusionTestEnabled?(0,G.H)(d||(d=(0,P.Z)(["} else { vtc = vec2(0.0);\n      ",""])),e.debugDrawLabelBorder?"debugBorderCoords = vec4(0.5, 0.5, 1.5 / combinedSize);}":"}"):"")),J.uniforms.add(new q.A("tex",(function(e){return e.texture})));var ne=e.debugDrawLabelBorder?(0,G.H)(p||(p=(0,P.Z)(["(isBorder > 0.0 ? 0.0 : ",")"])),G.H.float(V.F)):G.H.float(V.F),re=(0,G.H)(v||(v=(0,P.Z)(["\n    ","\n\n    ","\n\n    ","\n\n    // Draw debug border with transparency, so that original texels along border are still partially visible\n    ","\n  "])),e.debugDrawLabelBorder?(0,G.H)(h||(h=(0,P.Z)(["\n      float isBorder = float(any(lessThan(debugBorderCoords.xy, debugBorderCoords.zw)) || any(greaterThan(debugBorderCoords.xy, 1.0 - debugBorderCoords.zw)));"]))):"",e.sampleSignedDistanceFieldTexelCenter?(0,G.H)(g||(g=(0,P.Z)(["\n      // Attempt to sample texel centers to avoid that thin cross outlines\n      // disappear with large symbol sizes.\n      // see: https://devtopia.esri.com/WebGIS/arcgis-js-api/issues/7058#issuecomment-603041\n      float txSize = float(textureSize(tex, 0).x);\n      float texelSize = 1.0 / txSize;\n\n      // Calculate how much we have to add/subtract to/from each texel to reach the size of an onscreen pixel\n      vec2 scaleFactor = (vsize - txSize) * texelSize;\n      vec2 samplePos = vtc + (vec2(1.0, -1.0) * texelSize) * scaleFactor;\n      "]))):(0,G.H)(m||(m=(0,P.Z)(["\n      vec2 samplePos = vtc;\n      "]))),n?(0,G.H)(y||(y=(0,P.Z)(["\n      vec4 fillPixelColor = vcolor;\n\n      // Get distance and map it into [-0.5, 0.5]\n      float d = rgba2float(texture(tex, samplePos)) - 0.5;\n\n      // Distance in output units (i.e. pixels)\n      float dist = d * vsize.x;\n\n      // Create smooth transition from the icon into its outline\n      float fillAlphaFactor = clamp(0.5 - dist, 0.0, 1.0);\n      fillPixelColor.a *= fillAlphaFactor;\n\n      if (outlineSize > 0.25) {\n        vec4 outlinePixelColor = outlineColor;\n        float clampedOutlineSize = min(outlineSize, 0.5*vsize.x);\n\n        // Create smooth transition around outline\n        float outlineAlphaFactor = clamp(0.5 - (abs(dist) - 0.5*clampedOutlineSize), 0.0, 1.0);\n        outlinePixelColor.a *= outlineAlphaFactor;\n\n        if (\n          outlineAlphaFactor + fillAlphaFactor < "," ||\n          fillPixelColor.a + outlinePixelColor.a < ","\n        ) {\n          discard;\n        }\n\n        // perform un-premultiplied over operator (see https://en.wikipedia.org/wiki/Alpha_compositing#Description)\n        float compositeAlpha = outlinePixelColor.a + fillPixelColor.a * (1.0 - outlinePixelColor.a);\n        vec3 compositeColor = vec3(outlinePixelColor) * outlinePixelColor.a +\n          vec3(fillPixelColor) * fillPixelColor.a * (1.0 - outlinePixelColor.a);\n\n        fragColor = vec4(compositeColor, compositeAlpha);\n      } else {\n        if (fillAlphaFactor < ",") {\n          discard;\n        }\n\n        fragColor = premultiplyAlpha(fillPixelColor);\n      }\n\n      // visualize SDF:\n      // fragColor = vec4(clamp(-dist/vsize.x*2.0, 0.0, 1.0), clamp(dist/vsize.x*2.0, 0.0, 1.0), 0.0, 1.0);\n      "])),ne,G.H.float(V.b),ne):(0,G.H)(O||(O=(0,P.Z)(["\n          vec4 texColor = texture(tex, vtc, -0.5);\n          if (texColor.a < ",") {\n            discard;\n          }\n          fragColor = texColor * premultiplyAlpha(vcolor);\n          "])),ne),e.debugDrawLabelBorder?(0,G.H)(x||(x=(0,P.Z)(["fragColor = mix(fragColor, vec4(1.0, 0.0, 1.0, 1.0), isBorder * 0.5);"]))):"");switch(e.output){case _.H_.Color:e.transparencyPassType===Y.A.ColorAlpha&&(t.outputs.add("fragColor","vec4",0),t.outputs.add("fragAlpha","float",1)),J.code.add((0,G.H)(b||(b=(0,P.Z)(["\n        void main() {\n          ","\n          ","\n          ","\n        }"])),re,e.transparencyPassType===Y.A.FrontFace?"fragColor.rgb /= fragColor.a;":"",e.transparencyPassType===Y.A.ColorAlpha?"fragAlpha = fragColor.a;":""));break;case _.H_.ObjectAndLayerIdColor:J.code.add((0,G.H)(S||(S=(0,P.Z)(["\n        void main() {\n          ","\n          outputObjectAndLayerIdColor();\n        }"])),re));break;case _.H_.Highlight:J.constants.add("occludedHighlightFlag","vec4",I.Wj),J.constants.add("unoccludedHighlightFlag","vec4",I.ck),J.code.add((0,G.H)(C||(C=(0,P.Z)(["\n        void main() {\n          ","\n          if (voccluded == 1.0) {\n            fragColor = occludedHighlightFlag;\n          } else {\n            fragColor = unoccludedHighlightFlag;\n          }\n        }"])),re))}return t}function Q(e){return e.outlineColor[3]>0&&e.outlineSize>0}function K(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ee;return e.textureIsSignedDistanceField?$(e.anchorPosition,e.distanceFieldBoundingBox,t):(0,T.JG)(t,e.anchorPosition),t}function $(e,t,n){null!=t?(0,T.t8)(n,e[0]*(t[2]-t[0])+t[0],e[1]*(t[3]-t[1])+t[1]):(0,T.t8)(n,0,0)}var ee=(0,A.Ue)(),te=Object.freeze(Object.defineProperty({__proto__:null,build:J,calculateAnchorPosForRendering:K},Symbol.toStringTag,{value:"Module"}))},8623:function(e,t,n){n.d(t,{Z:function(){return v}});var r=n(43144),o=n(15671),i=n(60136),a=n(29388),l=n(27366),s=n(11582),c=n(46784),u=n(49861),f=(n(93169),n(32718),n(84936),n(27135)),d=n(69912),p=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(e){var r;return(0,o.Z)(this,n),(r=t.call(this,e)).type="georeferenced",r.origin=null,r}return(0,r.Z)(n)}((0,s.J)(c.wq));(0,l._)([(0,f.J)({georeferenced:"georeferenced"},{readOnly:!0})],p.prototype,"type",void 0),(0,l._)([(0,u.Cb)({type:[Number],nonNullable:!1,json:{write:!0}})],p.prototype,"origin",void 0);var v=p=(0,l._)([(0,d.j)("esri.geometry.support.MeshGeoreferencedVertexSpace")],p)},50250:function(e,t,n){n.d(t,{Z:function(){return h}});var r=n(43144),o=n(15671),i=n(60136),a=n(29388),l=n(27366),s=n(11582),c=n(46784),u=n(49861),f=(n(93169),n(32718),n(84936),n(27135)),d=n(69912),p=n(12400),v=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(e){var r;return(0,o.Z)(this,n),(r=t.call(this,e)).type="local",r.origin=(0,p.Ue)(),r}return(0,r.Z)(n)}((0,s.J)(c.wq));(0,l._)([(0,f.J)({local:"local"},{readOnly:!0})],v.prototype,"type",void 0),(0,l._)([(0,u.Cb)({type:[Number],nonNullable:!0,json:{write:!0}})],v.prototype,"origin",void 0);var h=v=(0,l._)([(0,d.j)("esri.geometry.support.MeshLocalVertexSpace")],v)},69048:function(e,t,n){n.d(t,{G7:function(){return h},QK:function(){return p},rU:function(){return v},vI:function(){return g},z1:function(){return f},zZ:function(){return d}});var r=n(29439),o=n(44927),i=n(32718),a=n(32035),l=n(848),s=n(8623),c=n(50250);function u(){return i.Z.getLogger("esri.geometry.Mesh")}function f(e){return!d(e)}function d(e){return null!=e.origin}function p(e){return d(e.vertexSpace)}function v(e,t){if(!d(e))return null;var n=(0,r.Z)(e.origin,3),o=n[0],i=n[1],a=n[2];return new l.Z({x:o,y:i,z:a,spatialReference:t})}function h(e,t){var n,r,i,a=e.x,l=e.y,f=e.z,d=e.spatialReference,p=[a,l,null!==f&&void 0!==f?f:0];return void 0!==(null===t||void 0===t?void 0:t.geographic)&&((0,o.x9)(u(),"option: geographic",{replacement:"Use the `vertexSpace` option instead.",version:"4.29",warnOnce:!0}),t.vertexSpace&&u().warn("Deprecated geographic flag ignored since vertexSpace option is provided.")),"local"===(null!==(n=null!==(r=null===t||void 0===t?void 0:t.vertexSpace)&&void 0!==r?r:null==(i=null===t||void 0===t?void 0:t.geographic)?void 0:i?"local":"georeferenced")&&void 0!==n?n:function(e){return e.isGeographic||e.isWebMercator?"local":"georeferenced"}(d))?new c.Z({origin:p}):new s.Z({origin:p})}function g(e,t){return e.type===t.type&&(e.origin===t.origin||null!=e.origin&&null!=t.origin&&(0,a.e)(e.origin,t.origin))}},70178:function(e,t,n){n.d(t,{Fz:function(){return s},fS:function(){return u},kg:function(){return l}});n(93169);var r=n(16889),o=n(92975);function i(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++){var r=e[n],o=t[n];if(r.length!==o.length)return!1;for(var i=0;i<r.length;i++)if(r[i]!==o[i])return!1}return!0}function a(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!i(e[n],t[n]))return!1;return!0}function l(e,t){return e===t||null!=e&&null!=t&&(0,o.fS)(e.spatialReference,t.spatialReference)&&e.x===t.x&&e.y===t.y&&e.z===t.z&&e.m===t.m}function s(e,t,n){var i,a,l,s;return e===t||null!=e&&null!=t&&(0,o.fS)(e.spatialReference,t.spatialReference)&&(0,r.W8)(e.x,t.x,n)&&(0,r.W8)(e.y,t.y,n)&&(0,r.W8)(null!==(i=e.z)&&void 0!==i?i:0,null!==(a=t.z)&&void 0!==a?a:0,n)&&(0,r.W8)(null!==(l=e.m)&&void 0!==l?l:0,null!==(s=t.m)&&void 0!==s?s:0,n)}function c(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.type!==t.type)return!1;switch(e.type){case"point":return l(e,t);case"extent":return function(e,t){return e.hasZ===t.hasZ&&e.hasM===t.hasM&&!!(0,o.fS)(e.spatialReference,t.spatialReference)&&e.xmin===t.xmin&&e.ymin===t.ymin&&e.zmin===t.zmin&&e.xmax===t.xmax&&e.ymax===t.ymax&&e.zmax===t.zmax}(e,t);case"polyline":return function(e,t){return e.hasZ===t.hasZ&&e.hasM===t.hasM&&!!(0,o.fS)(e.spatialReference,t.spatialReference)&&a(e.paths,t.paths)}(e,t);case"polygon":return function(e,t){return e.hasZ===t.hasZ&&e.hasM===t.hasM&&!!(0,o.fS)(e.spatialReference,t.spatialReference)&&a(e.rings,t.rings)}(e,t);case"multipoint":return function(e,t){return e.hasZ===t.hasZ&&e.hasM===t.hasM&&!!(0,o.fS)(e.spatialReference,t.spatialReference)&&i(e.points,t.points)}(e,t);case"mesh":return!1;default:return}}function u(e,t){return e===t||null!=e&&null!=t&&e.objectId===t.objectId&&!!c(e.geometry,t.geometry)&&!!function(e,t){if(e===t)return!0;if(!e||!t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var o=0,i=n;o<i.length;o++){var a=i[o];if(e[a]!==t[a])return!1}return!0}(e.attributes,t.attributes)}},96387:function(e,t,n){n.d(t,{$o:function(){return b},Go:function(){return O},Si:function(){return A},Uu:function(){return x},ZL:function(){return P},_Z:function(){return T},bD:function(){return S},bh:function(){return C},zE:function(){return g}});var r=n(68860),o=n(29134),i=n(7025),a=n(12400),l=n(19093),s=n(86361),c=n(79803),u=n(41414),f=n(65156),d=n(4954),p=n(69662),v=n(55946),h=n(37818);function g(e,t){if("point"===e.type)return y(e,t,!1);if((0,h.Ou)(e))switch(e.type){case"extent":return y(e.center,t,!1);case"polygon":return y(e.centroid,t,!1);case"polyline":return y(m(e),t,!0);case"mesh":return y(e.origin,t,!1)}else switch(e.type){case"extent":return y(function(e){return(0,v.T)(.5*(e.xmax+e.xmin),.5*(e.ymax+e.ymin),null!=e.zmin&&null!=e.zmax&&isFinite(e.zmin)&&isFinite(e.zmax)?.5*(e.zmax+e.zmin):void 0,e.spatialReference)}(e),t,!0);case"polygon":return y(function(e){var t=e.rings[0];if(!t||0===t.length)return null;var n=(0,d.a)(e.rings,!!e.hasZ);return(0,v.T)(n[0],n[1],n[2],e.spatialReference)}(e),t,!0);case"polyline":return y(m(e),t,!0)}}function m(e){var t=e.paths[0];if(!t||0===t.length)return null;var n=(0,p.n8)(t,(0,p.ok)(t)/2);return(0,v.T)(n[0],n[1],n[2],e.spatialReference)}function y(e,t,n){var r=n?e:(0,h.WG)(e);return t&&e?(0,c.projectPoint)(e,r,t)?r:null:r}function O(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(e){t||(t=(0,f.Ue)());var o=e,i=.5*o.width*(n-1),a=.5*o.height*(n-1);return o.width<1e-7*o.height?i+=a/20:o.height<1e-7*o.width&&(a+=i/20),(0,l.s)(t,o.xmin-i-r,o.ymin-a-r,o.xmax+i+r,o.ymax+a+r),t}return null}function x(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=(0,s.d9)(s.hq);return null!=e&&(r[0]=e[0],r[1]=e[1],r[2]=e[2]),null!=t?r[3]=t:null!=e&&e.length>3&&(r[3]=e[3]),n&&(r[0]*=n,r[1]*=n,r[2]*=n,r[3]*=n),r}function b(e,t,n,r,o){for(var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[0,0,0,0],a=0;a<3;++a)i[a]=null!=(null===e||void 0===e?void 0:e[a])?e[a]:null!=(null===n||void 0===n?void 0:n[a])?n[a]:o[a];return i[3]=null!=t?t:null!=r?r:o[3],i}function S(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.hq,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=new Array(3);if(null==t||null==n)o[0]=1,o[1]=1,o[2]=1;else{for(var i,l=0,s=2;s>=0;s--){var c=e[s],u=void 0,f=null!=c,d=0===s&&!i&&!f,p=n[s];"symbol-value"===c||d?u=0!==p?t[s]/p:1:f&&"proportional"!==c&&isFinite(c)&&(u=0!==p?c/p:1),null!=u&&(o[s]=u,i=u,l=Math.max(l,Math.abs(u)))}for(var v=2;v>=0;v--)null==o[v]?o[v]=i:0===o[v]&&(o[v]=.001*l)}for(var h=2;h>=0;h--)o[h]/=r;return(0,a.nI)(o)}function C(e){return P(function(e){return null!=e.isPrimitive}(e)?[e.width,e.depth,e.height]:e)?null:"Symbol sizes may not be negative values"}function P(e){var t=function(e){return null==e||e>=0};return Array.isArray(e)?e.every(t):t(e)}function T(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:(0,i.Ue)();return e&&(0,o.jI)(r,r,-e/180*Math.PI),t&&(0,o.lM)(r,r,t/180*Math.PI),n&&(0,o.uD)(r,r,n/180*Math.PI),r}function A(e,t,n){if(null!=n.minDemResolution)return n.minDemResolution;var o=(0,r.c9)(t),i=(0,u.bf)(e)*o,a=(0,u.Ye)(e)*o,l=(0,u.Cb)(e)*(t.isGeographic?1:o);return 0===i&&0===a&&0===l?n.minDemResolutionForPoints:.01*Math.max(i,a,l)}},43449:function(e,t,n){n.d(t,{T6:function(){return f},TX:function(){return u},j9:function(){return d}});var r=n(43144),o=n(15671),i=n(60136),a=n(29388),l=n(54463),s=n(55848),c=n(22178);function u(e){return(0,c.nn)(e)&&e.intersector===l.q7.TERRAIN&&!!e.target}var f=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(e,r,i){var a;return(0,o.Z)(this,n),(a=t.call(this,e,r)).triangleNr=i,a}return(0,r.Z)(n)}(s.Dx);function d(e){return(0,c.nn)(e)&&e.intersector===l.q7.OVERLAY&&!!e.target}},28156:function(e,t,n){n.d(t,{H:function(){return s}});var r,o,i=n(30168),a=n(13773),l=n(98634);function s(e){e.uniforms.add(new a.U("alignPixelEnabled",(function(e,t){return t.alignPixelEnabled}))),e.code.add((0,l.H)(r||(r=(0,i.Z)(["vec4 alignToPixelCenter(vec4 clipCoord, vec2 widthHeight) {\nif (!alignPixelEnabled)\nreturn clipCoord;\nvec2 xy = vec2(0.500123) + 0.5 * clipCoord.xy / clipCoord.w;\nvec2 pixelSz = vec2(1.0) / widthHeight;\nvec2 ij = (floor(xy * widthHeight) + vec2(0.5)) * pixelSz;\nvec2 result = (ij * 2.0 - vec2(1.0)) * clipCoord.w;\nreturn vec4(result, clipCoord.zw);\n}"])))),e.code.add((0,l.H)(o||(o=(0,i.Z)(["vec4 alignToPixelOrigin(vec4 clipCoord, vec2 widthHeight) {\nif (!alignPixelEnabled)\nreturn clipCoord;\nvec2 xy = vec2(0.5) + 0.5 * clipCoord.xy / clipCoord.w;\nvec2 pixelSz = vec2(1.0) / widthHeight;\nvec2 ij = floor((xy + 0.5 * pixelSz) * widthHeight) * pixelSz;\nvec2 result = (ij * 2.0 - vec2(1.0)) * clipCoord.w;\nreturn vec4(result, clipCoord.zw);\n}"]))))}},81879:function(e,t,n){n.d(t,{R:function(){return O},c:function(){return y}});var r,o,i,a,l,s,c,u=n(30168),f=n(49223),d=n(62993),p=n(41012),v=n(95276),h=n(58406),g=n(98634),m=n(4760),y=.5;function O(e,t){e.include(d.cK),e.attributes.add(m.T.POSITION,"vec3"),e.attributes.add(m.T.NORMAL,"vec3"),e.attributes.add(m.T.CENTEROFFSETANDDISTANCE,"vec4");var n=e.vertex;(0,p.Sv)(n,t),(0,p.hY)(n,t),n.uniforms.add(new v.N("viewport",(function(e,t){return t.camera.fullViewport})),new h.p("polygonOffset",(function(e){return e.shaderPolygonOffset})),new h.p("cameraGroundRelative",(function(e,t){return t.camera.aboveGround?1:-1}))),t.hasVerticalOffset&&(0,f.V)(n),n.constants.add("smallOffsetAngle","float",.984807753012208),n.code.add((0,g.H)(r||(r=(0,u.Z)(["struct ProjectHUDAux {\nvec3 posModel;\nvec3 posView;\nvec3 vnormal;\nfloat distanceToCamera;\nfloat absCosAngle;\n};"])))),n.code.add((0,g.H)(o||(o=(0,u.Z)(["\n    float applyHUDViewDependentPolygonOffset(float pointGroundDistance, float absCosAngle, inout vec3 posView) {\n      float pointGroundSign = ",";\n      if (pointGroundSign == 0.0) {\n        pointGroundSign = cameraGroundRelative;\n      }\n\n      // cameraGroundRelative is -1 if camera is below ground, 1 if above ground\n      // groundRelative is 1 if both camera and symbol are on the same side of the ground, -1 otherwise\n      float groundRelative = cameraGroundRelative * pointGroundSign;\n\n      // view angle dependent part of polygon offset emulation: we take the absolute value because the sign that is\n      // dropped is instead introduced using the ground-relative position of the symbol and the camera\n      if (polygonOffset > .0) {\n        float cosAlpha = clamp(absCosAngle, 0.01, 1.0);\n        float tanAlpha = sqrt(1.0 - cosAlpha * cosAlpha) / cosAlpha;\n        float factor = (1.0 - tanAlpha / viewport[2]);\n\n        // same side of the terrain\n        if (groundRelative > 0.0) {\n          posView *= factor;\n        }\n        // opposite sides of the terrain\n        else {\n          posView /= factor;\n        }\n      }\n\n      return groundRelative;\n    }\n  "])),t.multipassEnabled?g.H.float(0):(0,g.H)(i||(i=(0,u.Z)(["sign(pointGroundDistance)"]))))),t.draped&&!t.hasVerticalOffset||(0,p._8)(n),t.draped||(n.uniforms.add(new h.p("perDistancePixelRatio",(function(e,t){return Math.tan(t.camera.fovY/2)/(t.camera.fullViewport[2]/2)}))),n.code.add((0,g.H)(a||(a=(0,u.Z)(["\n    void applyHUDVerticalGroundOffset(vec3 normalModel, inout vec3 posModel, inout vec3 posView) {\n      float distanceToCamera = length(posView);\n\n      // Compute offset in world units for a half pixel shift\n      float pixelOffset = distanceToCamera * perDistancePixelRatio * ",";\n\n      // Apply offset along normal in the direction away from the ground surface\n      vec3 modelOffset = normalModel * cameraGroundRelative * pixelOffset;\n\n      // Apply the same offset also on the view space position\n      vec3 viewOffset = (viewNormal * vec4(modelOffset, 1.0)).xyz;\n\n      posModel += modelOffset;\n      posView += viewOffset;\n    }\n  "])),g.H.float(y)))),t.screenCenterOffsetUnitsEnabled&&(0,p.ZI)(n),t.hasScreenSizePerspective&&(0,d.m8)(n),n.code.add((0,g.H)(l||(l=(0,u.Z)(["\n    vec4 projectPositionHUD(out ProjectHUDAux aux) {\n      vec3 centerOffset = centerOffsetAndDistance.xyz;\n      float pointGroundDistance = centerOffsetAndDistance.w;\n\n      aux.posModel = position;\n      aux.posView = (view * vec4(aux.posModel, 1.0)).xyz;\n      aux.vnormal = normal;\n      ","\n\n      // Screen sized offset in world space, used for example for line callouts\n      // Note: keep this implementation in sync with the CPU implementation, see\n      //   - MaterialUtil.verticalOffsetAtDistance\n      //   - HUDMaterial.applyVerticalOffsetTransformation\n\n      aux.distanceToCamera = length(aux.posView);\n\n      vec3 viewDirObjSpace = normalize(cameraPosition - aux.posModel);\n      float cosAngle = dot(aux.vnormal, viewDirObjSpace);\n\n      aux.absCosAngle = abs(cosAngle);\n\n      ","\n\n      ","\n\n      ","\n\n      float groundRelative = applyHUDViewDependentPolygonOffset(pointGroundDistance, aux.absCosAngle, aux.posView);\n\n      ","\n\n      vec4 posProj = proj * vec4(aux.posView, 1.0);\n\n      ","\n\n      ","\n\n      // constant part of polygon offset emulation\n      posProj.z -= groundRelative * polygonOffset * posProj.w;\n      return posProj;\n    }\n  "])),t.draped?"":"applyHUDVerticalGroundOffset(aux.vnormal, aux.posModel, aux.posView);",t.hasScreenSizePerspective&&(t.hasVerticalOffset||t.screenCenterOffsetUnitsEnabled)?"vec3 perspectiveFactor = screenSizePerspectiveScaleFactor(aux.absCosAngle, aux.distanceToCamera, screenSizePerspectiveAlignment);":"",t.hasVerticalOffset?t.hasScreenSizePerspective?"float verticalOffsetScreenHeight = applyScreenSizePerspectiveScaleFactorFloat(verticalOffset.x, perspectiveFactor);":"float verticalOffsetScreenHeight = verticalOffset.x;":"",t.hasVerticalOffset?(0,g.H)(s||(s=(0,u.Z)(["\n            float worldOffset = clamp(verticalOffsetScreenHeight * verticalOffset.y * aux.distanceToCamera, verticalOffset.z, verticalOffset.w);\n            vec3 modelOffset = aux.vnormal * worldOffset;\n            aux.posModel += modelOffset;\n            vec3 viewOffset = (viewNormal * vec4(modelOffset, 1.0)).xyz;\n            aux.posView += viewOffset;\n            // Since we elevate the object, we need to take that into account\n            // in the distance to ground\n            pointGroundDistance += worldOffset;"]))):"",t.screenCenterOffsetUnitsEnabled?"":(0,g.H)(c||(c=(0,u.Z)(["\n            // Apply x/y in view space, but z in screen space (i.e. along posView direction)\n            aux.posView += vec3(centerOffset.x, centerOffset.y, 0.0);\n\n            // Same material all have same z != 0.0 condition so should not lead to\n            // branch fragmentation and will save a normalization if it's not needed\n            if (centerOffset.z != 0.0) {\n              aux.posView -= normalize(aux.posView) * centerOffset.z;\n            }\n          "]))),t.screenCenterOffsetUnitsEnabled?t.hasScreenSizePerspective?"float centerOffsetY = applyScreenSizePerspectiveScaleFactorFloat(centerOffset.y, perspectiveFactor);":"float centerOffsetY = centerOffset.y;":"",t.screenCenterOffsetUnitsEnabled?"posProj.xy += vec2(centerOffset.x, centerOffsetY) * pixelRatio * 2.0 / viewport.zw * posProj.w;":""))}},50913:function(e,t,n){n.d(t,{R:function(){return u}});var r,o,i,a=n(30168),l=n(28156),s=n(15226),c=n(98634);function u(e,t){var n=e.vertex,u=e.fragment;n.include(l.H),t.multipassEnabled&&e.varyings.add("depth","float"),n.code.add((0,c.H)(r||(r=(0,a.Z)(["\n  void main(void) {\n    vec4 posProjCenter;\n    if (dot(position, position) > 0.0) {\n      // Render single point to center of the pixel to avoid subpixel filtering to affect the marker color\n      ProjectHUDAux projectAux;\n      vec4 posProj = projectPositionHUD(projectAux);\n      posProjCenter = alignToPixelCenter(posProj, viewport.zw);\n\n      ","\n      vec3 vpos = projectAux.posModel;\n      if (rejectBySlice(vpos)) {\n        // Project out of clip space\n        posProjCenter = vec4(1e038, 1e038, 1e038, 1.0);\n      }\n\n    } else {\n      // Project out of clip space\n      posProjCenter = vec4(1e038, 1e038, 1e038, 1.0);\n    }\n\n    gl_Position = posProjCenter;\n    gl_PointSize = 1.0;\n  }\n  "])),t.multipassEnabled?"depth = projectAux.posView.z;":"")),e.include(s.l,t),u.code.add((0,c.H)(o||(o=(0,a.Z)(["\n  void main() {\n    fragColor = vec4(1);\n    ","\n  }\n  "])),t.multipassEnabled?(0,c.H)(i||(i=(0,a.Z)(["\n        if(terrainDepthTest(depth)) {\n          fragColor.g = 0.5;\n        }"]))):""))}},55616:function(e,t,n){n.d(t,{P:function(){return f}});var r,o=n(30168),i=n(28156),a=n(83866),l=n(95276),s=n(58406),c=n(98634),u=n(19253);function f(e){e.vertex.uniforms.add(new s.p("renderTransparentlyOccludedHUD",(function(e,t){return t.hudRenderStyle===a.U.Occluded?1:t.hudRenderStyle===a.U.NotOccluded?0:.75})),new l.N("viewport",(function(e,t){return t.camera.fullViewport})),new u.A("hudVisibilityTexture",(function(e,t){var n;return null===(n=t.hudVisibility)||void 0===n?void 0:n.getTexture()}))),e.vertex.include(i.H),e.vertex.code.add((0,c.H)(r||(r=(0,o.Z)(["bool testHUDVisibility(vec4 posProj) {\nvec4 posProjCenter = alignToPixelCenter(posProj, viewport.zw);\nvec4 occlusionPixel = texture(hudVisibilityTexture, .5 + .5 * posProjCenter.xy / posProjCenter.w);\nif (renderTransparentlyOccludedHUD > 0.5) {\nreturn occlusionPixel.r * occlusionPixel.g > 0.0 && occlusionPixel.g * renderTransparentlyOccludedHUD < 1.0;\n}\nreturn occlusionPixel.r * occlusionPixel.g > 0.0 && occlusionPixel.g == 1.0;\n}"]))))}},66832:function(e,t,n){n.d(t,{E:function(){return I}});var r=n(15671),o=n(43144),i=n(60136),a=n(29388),l=n(93169),s=n(86361),c=n(55158),u=n(37081),f=n(68401),d=n(23620),p=n(78041),v=n(93822),h=n(4760),g=n(12594),m=n(11983),y=n(65964),O=n(88301),x=n(61120),b=n(82144),S=n(31132),C=n(7566),P=n(27627),T=n(50411),A=n(25920),w=n(45028),_=n(8548),z=n(36207),E=(y.n,function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"initializeProgram",value:function(e){return new P.$(e.rctx,n.shader.get().build(this.configuration),C.i)}},{key:"_createPipeline",value:function(e,t){var n=this.configuration,r=e===A.A.NONE,o=e===A.A.FrontFace;return(0,z.sm)({blending:n.output===u.H_.Color&&n.transparent?r?p.wu:(0,p.j7)(e):null,culling:(0,z.zp)(n.cullFace),depthTest:n.draped?null:{func:(0,p.Bh)(e)},depthWrite:n.draped?null:(r||o)&&n.writeDepth?z.LZ:null,drawBuffers:n.output===u.H_.Depth?{buffers:[_.Xg.NONE]}:(0,p.V7)(e),colorWrite:z.BK,stencilWrite:n.hasOccludees?T.s3:null,stencilTest:n.hasOccludees?t?T.eD:T.RY:null,polygonOffset:r||o?n.polygonOffset?Z:null:(0,p.je)(n.enableOffset)})}},{key:"initializePipeline",value:function(){return this._occludeePipelineState=this._createPipeline(this.configuration.transparencyPassType,!0),this._createPipeline(this.configuration.transparencyPassType,!1)}},{key:"getPipeline",value:function(e){return e?this._occludeePipelineState:(0,O.Z)((0,x.Z)(n.prototype),"getPipeline",this).call(this)}}]),n}(S.A));E.shader=new b.J(w.C,(function(){return n.e(23173).then(n.bind(n,23173))}));var Z={factor:1,units:1},D=n(27366),R=n(33559),H=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(){var e;return(0,r.Z)(this,n),(e=t.apply(this,arguments)).output=u.H_.Color,e.cullFace=f.Vr.None,e.transparencyPassType=A.A.NONE,e.hasSlicePlane=!1,e.hasVertexColors=!1,e.transparent=!1,e.polygonOffset=!1,e.enableOffset=!0,e.writeDepth=!0,e.hasOccludees=!1,e.multipassEnabled=!1,e.cullAboveGround=!1,e.objectAndLayerIdColorInstanced=!1,e.vvColor=!1,e.draped=!1,e}return(0,o.Z)(n)}(n(8883).W);(0,D._)([(0,R.o)({count:u.H_.COUNT})],H.prototype,"output",void 0),(0,D._)([(0,R.o)({count:f.Vr.COUNT})],H.prototype,"cullFace",void 0),(0,D._)([(0,R.o)({count:A.A.COUNT})],H.prototype,"transparencyPassType",void 0),(0,D._)([(0,R.o)()],H.prototype,"hasSlicePlane",void 0),(0,D._)([(0,R.o)()],H.prototype,"hasVertexColors",void 0),(0,D._)([(0,R.o)()],H.prototype,"transparent",void 0),(0,D._)([(0,R.o)()],H.prototype,"polygonOffset",void 0),(0,D._)([(0,R.o)()],H.prototype,"enableOffset",void 0),(0,D._)([(0,R.o)()],H.prototype,"writeDepth",void 0),(0,D._)([(0,R.o)()],H.prototype,"hasOccludees",void 0),(0,D._)([(0,R.o)()],H.prototype,"multipassEnabled",void 0),(0,D._)([(0,R.o)()],H.prototype,"cullAboveGround",void 0),(0,D._)([(0,R.o)()],H.prototype,"objectAndLayerIdColorInstanced",void 0),(0,D._)([(0,R.o)()],H.prototype,"vvColor",void 0),(0,D._)([(0,R.o)()],H.prototype,"draped",void 0),(0,D._)([(0,R.o)({constValue:!1})],H.prototype,"occlusionPass",void 0),(0,D._)([(0,R.o)({constValue:!0})],H.prototype,"hasVvInstancing",void 0),(0,D._)([(0,R.o)({constValue:!1})],H.prototype,"vvSize",void 0),(0,D._)([(0,R.o)({constValue:!1})],H.prototype,"vvOpacity",void 0);var I=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(e){var o;return(0,r.Z)(this,n),(o=t.call(this,e,new V)).supportsEdges=!0,o.produces=new Map([[v.r.OPAQUE_MATERIAL,function(e){return e===u.H_.Highlight||(0,u.CQ)(e)&&!o._isTransparent}],[v.r.OPAQUE_NO_SSAO_DEPTH,function(e){return(0,u.BX)(e)&&o.parameters.writeLinearDepth&&!o._isTransparent}],[v.r.TRANSPARENT_MATERIAL,function(e){return(0,u.CQ)(e)&&o._isTransparent&&o.parameters.writeDepth}],[v.r.TRANSPARENT_NO_SSAO_DEPTH,function(e){return(0,u.BX)(e)&&o.parameters.writeLinearDepth&&o._isTransparent&&o.parameters.writeDepth}],[v.r.TRANSPARENT_DEPTH_WRITE_DISABLED_MATERIAL,function(e){return((0,u.CQ)(e)||(0,u.BX)(e)&&o.parameters.writeLinearDepth)&&o._isTransparent&&!o.parameters.writeDepth}],[v.r.DRAPED_MATERIAL,function(e){return(0,u.xs)(e)}]]),o._configuration=new H,o}return(0,o.Z)(n,[{key:"getConfiguration",value:function(e,t){return this._configuration.output=e,this._configuration.cullFace=this.parameters.cullFace,this._configuration.hasVertexColors=this.parameters.hasVertexColors&&!this.parameters.vvColor,this._configuration.hasSlicePlane=this.parameters.hasSlicePlane,this._configuration.transparent=this._isTransparent,this._configuration.polygonOffset=this.parameters.polygonOffset,this._configuration.writeDepth=this.parameters.writeDepth,this._configuration.hasOccludees=this.parameters.hasOccludees,this._configuration.transparencyPassType=t.transparencyPassType,this._configuration.enableOffset=t.camera.relativeElevation<p.ve,this._configuration.multipassEnabled=t.multipassEnabled,this._configuration.cullAboveGround=t.multipassTerrain.cullAboveGround,this._configuration.vvColor=!!this.parameters.vvColor,this._configuration.draped=this.parameters.draped,this._configuration}},{key:"createGLMaterial",value:function(e){return new j(e)}},{key:"createBufferWriter",value:function(){var e=(0,c.U$)().vec3f(h.T.POSITION);return(0,l.Z)("enable-feature:objectAndLayerId-rendering")&&e.vec4u8(h.T.OBJECTANDLAYERIDCOLOR),this.parameters.vvColor?e.f32(h.T.COLORFEATUREATTRIBUTE):e.vec4u8(h.T.COLOR),new g.G(e)}},{key:"_isTransparent",get:function(){return this.parameters.color[3]<1||this.parameters.forceTransparentMode}}]),n}(m.c),j=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"_updateOccludeeState",value:function(e){e.hasOccludees!==this._material.parameters.hasOccludees&&this._material.setParameters({hasOccludees:e.hasOccludees})}},{key:"beginSlot",value:function(e){return this._output===u.H_.Color&&this._updateOccludeeState(e),this.ensureTechnique(E,e)}}]),n}(d.Z),V=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(){var e;return(0,r.Z)(this,n),(e=t.apply(this,arguments)).color=s.AG,e.forceTransparentMode=!1,e.writeDepth=!0,e.writeLinearDepth=!1,e.hasVertexColors=!1,e.polygonOffset=!1,e.hasSlicePlane=!1,e.cullFace=f.Vr.None,e.hasOccludees=!1,e.draped=!1,e}return(0,o.Z)(n)}(y.n)},21400:function(e,t,n){n.d(t,{A:function(){return K}});var r=n(1413),o=n(29439),i=n(15671),a=n(43144),l=n(60136),s=n(29388),c=n(93169),u=n(16889),f=n(29303),d=n(21389),p=n(29134),v=n(7025),h=n(6644),g=n(32035),m=n(12400),y=n(86361);function O(e){return function(e){return e instanceof Float32Array&&e.length>=16}(e)||function(e){return Array.isArray(e)&&e.length>=16}(e)}var x=n(65156),b=n(25158),S=n(66202),C=n(94463),P=n(55158),T=n(37081),A=n(81879),w=n(17363),_=n(56529),z=n(93822),E=n(65216),Z=n(97731),D=n(4760),R=n(21166),H=n(33236),I=n(22909),j=n(83544),V=n(50951),F=n(82144),U=n(31132),N=n(7566),L=n(78041),M=n(27627),k=n(25920),B=n(8548),G=n(36207),W=function(e){(0,l.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,a.Z)(n,[{key:"initializeConfiguration",value:function(e,t){t.spherical=e.viewingMode===V.JY.Global}},{key:"initializeProgram",value:function(e){return new M.$(e.rctx,n.shader.get().build(this.configuration),N.i)}},{key:"initializePipeline",value:function(){var e=this.configuration.transparencyPassType,t=this.configuration,n=e===k.A.NONE,r=e===k.A.FrontFace,o=this.configuration.hasPolygonOffset?q:null,i=t.draped?null:(n||r)&&t.output!==T.H_.Highlight&&(t.depthEnabled||t.occlusionPass)?G.LZ:null;return(0,G.sm)({blending:t.output===T.H_.Color||t.output===T.H_.Highlight?n?Y:(0,L.j7)(e):null,depthTest:t.draped?null:{func:B.wb.LEQUAL},depthWrite:i,drawBuffers:(0,L.V7)(e),colorWrite:G.BK,polygonOffset:o})}},{key:"primitiveType",get:function(){return this.configuration.occlusionPass?B.MX.POINTS:B.MX.TRIANGLES}}]),n}(U.A);W.shader=new F.J(j.H,(function(){return n.e(16823).then(n.bind(n,16823))}));var q={factor:0,units:-4},Y=(0,G.if)(B.zi.ONE,B.zi.ONE_MINUS_SRC_ALPHA),X=n(27366),J=n(33559),Q=function(e){(0,l.Z)(n,e);var t=(0,s.Z)(n);function n(){var e;return(0,i.Z)(this,n),(e=t.apply(this,arguments)).output=T.H_.Color,e.transparencyPassType=k.A.NONE,e.screenCenterOffsetUnitsEnabled=!1,e.spherical=!1,e.occlusionTestEnabled=!0,e.signedDistanceFieldEnabled=!1,e.sampleSignedDistanceFieldTexelCenter=!1,e.vvSize=!1,e.vvColor=!1,e.hasVerticalOffset=!1,e.hasScreenSizePerspective=!1,e.debugDrawLabelBorder=!1,e.hasSlicePlane=!1,e.hasPolygonOffset=!1,e.depthEnabled=!0,e.pixelSnappingEnabled=!0,e.draped=!1,e.multipassEnabled=!1,e.cullAboveGround=!1,e.occlusionPass=!1,e.objectAndLayerIdColorInstanced=!1,e}return(0,a.Z)(n)}(n(8883).W);(0,X._)([(0,J.o)({count:T.H_.COUNT})],Q.prototype,"output",void 0),(0,X._)([(0,J.o)({count:k.A.COUNT})],Q.prototype,"transparencyPassType",void 0),(0,X._)([(0,J.o)()],Q.prototype,"screenCenterOffsetUnitsEnabled",void 0),(0,X._)([(0,J.o)()],Q.prototype,"spherical",void 0),(0,X._)([(0,J.o)()],Q.prototype,"occlusionTestEnabled",void 0),(0,X._)([(0,J.o)()],Q.prototype,"signedDistanceFieldEnabled",void 0),(0,X._)([(0,J.o)()],Q.prototype,"sampleSignedDistanceFieldTexelCenter",void 0),(0,X._)([(0,J.o)()],Q.prototype,"vvSize",void 0),(0,X._)([(0,J.o)()],Q.prototype,"vvColor",void 0),(0,X._)([(0,J.o)()],Q.prototype,"hasVerticalOffset",void 0),(0,X._)([(0,J.o)()],Q.prototype,"hasScreenSizePerspective",void 0),(0,X._)([(0,J.o)()],Q.prototype,"debugDrawLabelBorder",void 0),(0,X._)([(0,J.o)()],Q.prototype,"hasSlicePlane",void 0),(0,X._)([(0,J.o)()],Q.prototype,"hasPolygonOffset",void 0),(0,X._)([(0,J.o)()],Q.prototype,"depthEnabled",void 0),(0,X._)([(0,J.o)()],Q.prototype,"pixelSnappingEnabled",void 0),(0,X._)([(0,J.o)()],Q.prototype,"draped",void 0),(0,X._)([(0,J.o)()],Q.prototype,"multipassEnabled",void 0),(0,X._)([(0,J.o)()],Q.prototype,"cullAboveGround",void 0),(0,X._)([(0,J.o)()],Q.prototype,"occlusionPass",void 0),(0,X._)([(0,J.o)()],Q.prototype,"objectAndLayerIdColorInstanced",void 0),(0,X._)([(0,J.o)({constValue:!0})],Q.prototype,"hasSliceInVertexProgram",void 0),(0,X._)([(0,J.o)({constValue:!1})],Q.prototype,"hasVvInstancing",void 0);var K=function(e){(0,l.Z)(n,e);var t=(0,s.Z)(n);function n(e){var r;return(0,i.Z)(this,n),(r=t.call(this,e,new xe))._configuration=new Q,r.produces=new Map([[z.r.HUD_MATERIAL,function(e){return(0,T.L_)(e)&&!r.parameters.drawInSecondSlot}],[z.r.LABEL_MATERIAL,function(e){return(0,T.L_)(e)&&r.parameters.drawInSecondSlot}],[z.r.OCCLUSION_PIXELS,function(){return r.parameters.occlusionTest}],[z.r.DRAPED_MATERIAL,function(e){return(0,T.L_)(e)}]]),r}return(0,a.Z)(n,[{key:"getConfiguration",value:function(e,t){return this._configuration.output=e,this._configuration.hasSlicePlane=this.parameters.hasSlicePlane,this._configuration.hasVerticalOffset=!!this.parameters.verticalOffset,this._configuration.hasScreenSizePerspective=!!this.parameters.screenSizePerspective,this._configuration.screenCenterOffsetUnitsEnabled="screen"===this.parameters.centerOffsetUnits,this._configuration.hasPolygonOffset=this.parameters.polygonOffset,this._configuration.draped=this.parameters.draped,this._configuration.occlusionTestEnabled=this.parameters.occlusionTest,this._configuration.pixelSnappingEnabled=this.parameters.pixelSnappingEnabled,this._configuration.signedDistanceFieldEnabled=this.parameters.textureIsSignedDistanceField,this._configuration.sampleSignedDistanceFieldTexelCenter=this.parameters.sampleSignedDistanceFieldTexelCenter,this._configuration.vvSize=!!this.parameters.vvSize,this._configuration.vvColor=!!this.parameters.vvColor,this._configuration.occlusionPass=t.slot===z.r.OCCLUSION_PIXELS&&this.parameters.occlusionTest,e===T.H_.Color&&(this._configuration.debugDrawLabelBorder=!!C.h.LABELS_SHOW_BORDER),this._configuration.depthEnabled=this.parameters.depthEnabled,this._configuration.transparencyPassType=t.transparencyPassType,this._configuration.multipassEnabled=t.multipassEnabled,this._configuration.cullAboveGround=t.multipassTerrain.cullAboveGround,this._configuration}},{key:"intersect",value:function(e,t,n,r,o,i){if(n.options.selectionMode&&n.options.hud&&e.visible&&n.point){var a=this.parameters,l=n.point,s=n.camera,c=this._getScreenScale(e),u=c.scaleX,d=c.scaleY;u*=s.pixelRatio,d*=s.pixelRatio,(0,f.xO)(ce,t),e.attributes.has(D.T.FEATUREATTRIBUTE)&&function(e){var t=e[0],n=e[1],r=e[2],o=e[3],i=e[4],a=e[5],l=e[6],s=e[7],c=e[8],u=1/Math.sqrt(t*t+n*n+r*r),f=1/Math.sqrt(o*o+i*i+a*a),d=1/Math.sqrt(l*l+s*s+c*c);e[0]=t*u,e[1]=n*u,e[2]=r*u,e[3]=o*f,e[4]=i*f,e[5]=a*f,e[6]=l*d,e[7]=s*d,e[8]=c*d}(ce);var v=e.attributes.get(D.T.POSITION),h=e.attributes.get(D.T.SIZE),y=e.attributes.get(D.T.NORMAL),O=e.attributes.get(D.T.CENTEROFFSETANDDISTANCE);(0,Z.hu)(v.size>=3);for(var x=(0,j.c)(a),b="screen"===this.parameters.centerOffsetUnits,S=0;S<v.data.length/v.size;S++){var C=S*v.size;(0,g.s)(oe,v.data[C],v.data[C+1],v.data[C+2]),(0,g.h)(oe,oe,t);var P=S*h.size;ye[0]=h.data[P]*u,ye[1]=h.data[P+1]*d,(0,g.h)(oe,oe,s.viewMatrix);var T=S*O.size;if((0,g.s)(de,O.data[T],O.data[T+1],O.data[T+2]),!b&&(oe[0]+=de[0],oe[1]+=de[1],0!==de[2])){var A=de[2];(0,g.n)(de,oe),(0,g.f)(oe,oe,(0,g.j)(de,de,A))}var w=S*y.size;if((0,g.s)(ie,y.data[w],y.data[w+1],y.data[w+2]),te(ie,ce,s,he),this._applyVerticalOffsetTransformationView(oe,he,s,re),s.applyProjection(oe,ae),ae[0]>-1){b&&(de[0]||de[1])&&(ae[0]+=de[0]*s.pixelRatio,0!==de[1]&&(ae[1]+=(0,E.sX)(de[1],re.factorAlignment)*s.pixelRatio),s.unapplyProjection(ae,oe)),ae[0]+=this.parameters.screenOffset[0]*s.pixelRatio,ae[1]+=this.parameters.screenOffset[1]*s.pixelRatio,ae[0]=Math.floor(ae[0]),ae[1]=Math.floor(ae[1]),(0,E.TU)(ye,re.factor,ye);var _=ge*s.pixelRatio,z=0;if(a.textureIsSignedDistanceField&&(z=a.outlineSize*s.pixelRatio/2),ne(l,ae[0],ae[1],ye,_,z,a,x)){var R=n.ray;if((0,g.h)(se,oe,(0,p.U_)(fe,s.viewMatrix)),ae[0]=l[0],ae[1]=l[1],s.unprojectFromRenderScreen(ae,oe)){var H=(0,m.Ue)();(0,g.c)(H,R.direction);var I=1/(0,g.l)(H);(0,g.j)(H,H,I),i((0,g.p)(R.origin,oe)*I,H,-1,!0,1,se)}}}}}}},{key:"intersectDraped",value:function(e,t,n,r,o,i){var a=e.attributes.get(D.T.POSITION),l=e.attributes.get(D.T.SIZE),s=this.parameters,c=(0,j.c)(s),u=this._getScreenScale(e),f=u.scaleX,d=u.scaleY;f*=e.screenToWorldRatio,d*=e.screenToWorldRatio;for(var p=me*e.screenToWorldRatio,v=0;v<a.data.length/a.size;v++){var h=v*a.size,g=a.data[h],m=a.data[h+1],y=v*l.size;ye[0]=l.data[y]*f,ye[1]=l.data[y+1]*d;var O=0;s.textureIsSignedDistanceField&&(O=s.outlineSize*e.screenToWorldRatio/2),ne(r,g,m,ye,p,O,s,c)&&o(i.dist,i.normal,-1,!1)}}},{key:"createBufferWriter",value:function(){return new Ce(this)}},{key:"_updateScaleInfo",value:function(e,t,n){var r=this.parameters;null!=r.screenSizePerspective?(0,E.PV)(n,t,r.screenSizePerspective,e.factor):(e.factor.scale=1,e.factor.factor=0,e.factor.minScaleFactor=0),null!=r.screenSizePerspectiveAlignment?(0,E.PV)(n,t,r.screenSizePerspectiveAlignment,e.factorAlignment):(e.factorAlignment.factor=e.factor.factor,e.factorAlignment.scale=e.factor.scale,e.factorAlignment.minScaleFactor=e.factor.minScaleFactor)}},{key:"applyShaderOffsetsView",value:function(e,t,n,r,o,i,a){var l=te(t,n,o,he);return this._applyVerticalGroundOffsetView(e,l,o,a),this._applyVerticalOffsetTransformationView(a,l,o,i),this._applyPolygonOffsetView(a,l,r[3],o,a),this._applyCenterOffsetView(a,r,a),a}},{key:"applyShaderOffsetsNDC",value:function(e,t,n,r,o){return this._applyCenterOffsetNDC(e,t,n,r),null!=o&&(0,g.c)(o,r),this._applyPolygonOffsetNDC(r,t,n,r),r}},{key:"_applyPolygonOffsetView",value:function(e,t,n,r,o){var i=r.aboveGround?1:-1,a=Math.sign(n);0===a&&(a=i);var l=i*a;if(this.parameters.shaderPolygonOffset<=0)return(0,g.c)(o,e);var s=(0,u.uZ)(Math.abs(t.cosAngle),.01,1),c=1-Math.sqrt(1-s*s)/s/r.viewport[2];return(0,g.j)(o,e,l>0?c:1/c),o}},{key:"_applyVerticalGroundOffsetView",value:function(e,t,n,r){var o=(0,g.l)(e),i=n.aboveGround?1:-1,a=n.computeRenderPixelSizeAtDist(o)*A.c,l=(0,g.j)(oe,t.normal,i*a);return(0,g.g)(r,e,l),r}},{key:"_applyVerticalOffsetTransformationView",value:function(e,t,n,r){var o,i,a=this.parameters;if(null===(o=a.verticalOffset)||void 0===o||!o.screenLength){if(a.screenSizePerspective||a.screenSizePerspectiveAlignment){var l=(0,g.l)(e);this._updateScaleInfo(r,l,t.cosAngle)}else r.factor.scale=1,r.factorAlignment.scale=1;return e}var s=(0,g.l)(e),c=null!==(i=a.screenSizePerspectiveAlignment)&&void 0!==i?i:a.screenSizePerspective,u=(0,I.Hx)(n,s,a.verticalOffset,t.cosAngle,c);return this._updateScaleInfo(r,s,t.cosAngle),(0,g.j)(t.normal,t.normal,u),(0,g.g)(e,e,t.normal)}},{key:"_applyCenterOffsetView",value:function(e,t,n){var r="screen"!==this.parameters.centerOffsetUnits;return n!==e&&(0,g.c)(n,e),r&&(n[0]+=t[0],n[1]+=t[1],t[2]&&((0,g.n)(ie,n),(0,g.g)(n,n,(0,g.j)(ie,ie,t[2])))),n}},{key:"_applyCenterOffsetNDC",value:function(e,t,n,r){var o="screen"!==this.parameters.centerOffsetUnits;return r!==e&&(0,g.c)(r,e),o||(r[0]+=t[0]/n.fullWidth*2,r[1]+=t[1]/n.fullHeight*2),r}},{key:"_applyPolygonOffsetNDC",value:function(e,t,n,r){var o=this.parameters.shaderPolygonOffset;if(e!==r&&(0,g.c)(r,e),o){var i=n.aboveGround?1:-1,a=i*Math.sign(t[3]);r[2]-=(a||i)*o}return r}},{key:"createGLMaterial",value:function(e){return new $(e)}},{key:"calculateRelativeScreenBounds",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,x.Ue)();return ee(this.parameters,e,t,n),n[2]=n[0]+e[0],n[3]=n[1]+e[1],n}},{key:"_getScreenScale",value:function(e){var t=e.attributes.get(D.T.FEATUREATTRIBUTE);if(null==t)return{scaleX:1,scaleY:1};var n=(0,y.nI)(t.data,ve),r=(0,S.FE)(pe,this.parameters,n),i=(0,o.Z)(r,2);return{scaleX:i[0],scaleY:i[1]}}}]),n}(_.F5),$=function(e){(0,l.Z)(n,e);var t=(0,s.Z)(n);function n(e){return(0,i.Z)(this,n),t.call(this,(0,r.Z)((0,r.Z)({},e),e.material.parameters))}return(0,a.Z)(n,[{key:"selectProgram",value:function(e){return this.ensureTechnique(W,e)}},{key:"beginSlot",value:function(e){return this.updateTexture(this._material.parameters.textureId),this._material.setParameters(this.textureBindParameters),this.selectProgram(e)}}]),n}(w.F);function ee(e,t,n,r){r[0]=e.anchorPosition[0]*-t[0]+e.screenOffset[0]*n,r[1]=e.anchorPosition[1]*-t[1]+e.screenOffset[1]*n}function te(e,t,n,r){return O(t)&&(t=(0,f.xO)(ue,t)),(0,g.t)(r.normal,e,t),(0,g.h)(r.normal,r.normal,n.viewInverseTransposeMatrix),r.cosAngle=(0,g.m)(le,Oe),r}function ne(e,t,n,r,o,i,a,l){var s=t-o-(l[0]>0?r[0]*l[0]:0),c=s+r[0]+2*o,u=n-o-(l[1]>0?r[1]*l[1]:0),f=u+r[1]+2*o,d=a.distanceFieldBoundingBox;return a.textureIsSignedDistanceField&&null!=d&&(s+=r[0]*d[0],u+=r[1]*d[1],c-=r[0]*(1-d[2]),f-=r[1]*(1-d[3]),s-=i,c+=i,u-=i,f+=i),e[0]>s&&e[0]<c&&e[1]>u&&e[1]<f}var re=new R.G,oe=(0,m.Ue)(),ie=(0,m.Ue)(),ae=(0,y.Ue)(),le=(0,m.Ue)(),se=(0,m.Ue)(),ce=(0,d.Ue)(),ue=(0,d.Ue)(),fe=(0,v.Ue)(),de=(0,m.Ue)(),pe=(0,m.Ue)(),ve=(0,y.Ue)(),he={normal:le,cosAngle:0},ge=1,me=2,ye=[0,0],Oe=(0,m.al)(0,0,1),xe=function(e){(0,l.Z)(n,e);var t=(0,s.Z)(n);function n(){var e;return(0,i.Z)(this,n),(e=t.apply(this,arguments)).renderOccluded=_.yD.Occlude,e.isDecoration=!1,e.color=(0,y.al)(1,1,1,1),e.texCoordScale=[1,1],e.polygonOffset=!1,e.anchorPosition=(0,h.al)(.5,.5),e.screenOffset=[0,0],e.shaderPolygonOffset=1e-5,e.textureIsSignedDistanceField=!1,e.sampleSignedDistanceFieldTexelCenter=!1,e.outlineColor=(0,y.al)(1,1,1,1),e.outlineSize=0,e.vvSizeEnabled=!1,e.vvSize=null,e.vvColor=null,e.vvOpacity=null,e.vvSymbolAnchor=null,e.vvSymbolRotationMatrix=null,e.hasSlicePlane=!1,e.pixelSnappingEnabled=!0,e.occlusionTest=!0,e.centerOffsetUnits="world",e.drawInSecondSlot=!1,e.depthEnabled=!0,e.draped=!1,e}return(0,a.Z)(n)}(w.E),be=(0,P.U$)().vec3f(D.T.POSITION).vec3f(D.T.NORMAL).vec2f(D.T.UV0).vec4u8(D.T.COLOR).vec2f(D.T.SIZE).vec4f(D.T.CENTEROFFSETANDDISTANCE).vec4f(D.T.FEATUREATTRIBUTE),Se=be.clone().vec4u8(D.T.OBJECTANDLAYERIDCOLOR),Ce=function(){function e(t){(0,i.Z)(this,e),this._material=t,this.vertexBufferLayout=(0,c.Z)("enable-feature:objectAndLayerId-rendering")?Se:be}return(0,a.Z)(e,[{key:"elementCount",value:function(e){return 6*e.attributes.get(D.T.POSITION).indices.length}},{key:"write",value:function(e,t,n,r,o){(0,H.ho)(n.attributes.get(D.T.POSITION),e,r.position,o,6),(0,H.s5)(n.attributes.get(D.T.NORMAL),t,r.normal,o,6);var i,a,l,s,c=n.attributes.get(D.T.UV0).data;if(null==c||c.length<4){var u=this._material.parameters;i=0,a=0,l=u.texCoordScale[0],s=u.texCoordScale[1]}else i=c[0],a=c[1],l=c[2],s=c[3];l=Math.min(1.99999,l+1),s=Math.min(1.99999,s+1);for(var f=n.attributes.get(D.T.POSITION).indices.length,d=o,p=r.uv0,v=0;v<f;++v)p.set(d,0,i),p.set(d,1,a),d++,p.set(d,0,l),p.set(d,1,a),d++,p.set(d,0,l),p.set(d,1,s),d++,p.set(d,0,l),p.set(d,1,s),d++,p.set(d,0,i),p.set(d,1,s),d++,p.set(d,0,i),p.set(d,1,a),d++;(0,H.Vs)(n.attributes.get(D.T.COLOR),4,r.color,o,6);var h=n.attributes.get(D.T.SIZE),g=h.data,m=h.indices;f=m.length;var y=r.size;d=o;for(var O=0;O<f;++O)for(var x=g[2*m[O]],S=g[2*m[O]+1],C=0;C<6;++C)y.set(d,0,x),y.set(d,1,S),d++;if(n.attributes.get(D.T.CENTEROFFSETANDDISTANCE)?(0,H.SW)(n.attributes.get(D.T.CENTEROFFSETANDDISTANCE),r.centerOffsetAndDistance,o,6):(0,H.h)(r.centerOffsetAndDistance,o,6*f),n.attributes.get(D.T.FEATUREATTRIBUTE)?(0,H.SW)(n.attributes.get(D.T.FEATUREATTRIBUTE),r.featureAttribute,o,6):(0,H.h)(r.featureAttribute,o,6*f),null!=n.objectAndLayerIdColor){var P,T=null===(P=n.attributes.get(D.T.POSITION))||void 0===P?void 0:P.indices;if(T){var A=T.length,w=r.getField(D.T.OBJECTANDLAYERIDCOLOR,b.mc);(0,H.xP)(n.objectAndLayerIdColor,w,A,o,6)}}}}]),e}()},21166:function(e,t,n){n.d(t,{G:function(){return i}});var r=n(43144),o=n(15671),i=(0,r.Z)((function e(){(0,o.Z)(this,e),this.factor=new a,this.factorAlignment=new a})),a=(0,r.Z)((function e(){(0,o.Z)(this,e),this.scale=0,this.factor=0,this.minScaleFactor=0}))},11983:function(e,t,n){n.d(t,{c:function(){return c}});var r=n(15671),o=n(43144),i=n(60136),a=n(29388),l=n(56529),s=n(42235),c=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"intersect",value:function(e,t,n,r,o,i){return(0,s.Bw)(e,n,r,o,void 0,i)}}]),n}(l.F5)}}]);
//# sourceMappingURL=30734.69892ff7.chunk.js.map