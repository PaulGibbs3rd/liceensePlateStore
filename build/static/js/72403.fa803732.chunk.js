"use strict";(self.webpackChunkreact_training=self.webpackChunkreact_training||[]).push([[72403],{72403:function(e,n,t){t.r(n),t.d(n,{default:function(){return P}});var r=t(1413),o=t(74165),i=t(15861),u=t(37762),a=t(15671),l=t(43144),s=t(60136),f=t(29388),c=t(27366),v=t(76200),d=t(10064),p=t(32718),h=t(16889),y=t(97642),g=t(66978),m=t(49861),x=(t(93169),t(84936),t(69912)),b=t(32035),Z=t(12400),_=t(83448),E=t(53866),w=t(78952),I=t(50628),A=t(30651),k=t(27961),z=t(11936),L=t(46671),R=t(6061),C=t(29598),M=t(56811),U=t(70361),V=t(74509),S=function(e){(0,s.Z)(t,e);var n=(0,f.Z)(t);function t(e){var r;return(0,a.Z)(this,t),(r=n.call(this,e)).operationalLayerType="IntegratedMesh3DTilesLayer",r.spatialReference=new w.Z({wkid:4326,vcsWkid:115700}),r.fullExtent=new E.Z(-180,-90,180,90,r.spatialReference),r.url=null,r.type="integrated-mesh-3dtiles",r.path=null,r.minScale=0,r.maxScale=0,r}return(0,l.Z)(t,[{key:"elevationInfo",set:function(e){this._set("elevationInfo",e),this._validateElevationInfo()}},{key:"_verifyArray",value:function(e,n){if(!Array.isArray(e)||e.length<n)return!1;var t,r=(0,u.Z)(e);try{for(r.s();!(t=r.n()).done;){if("number"!=typeof t.value)return!1}}catch(o){r.e(o)}finally{r.f()}return!0}},{key:"_initFullExtent",value:function(e){var n,t,r=null===(n=e.root)||void 0===n?void 0:n.boundingVolume;if(r){if(r.box){var o=null===r||void 0===r?void 0:r.box;if(o[3]>7972671&&o[7]>7972671&&o[11]>7945940)return}var i=null===(t=e.root)||void 0===t?void 0:t.transform,u=(0,Z.Ue)();if(r.region&&this._verifyArray(r.region,6)){var a=r.region,l=(0,h.BV)(a[0]),s=(0,h.BV)(a[1]),f=a[4],c=(0,h.BV)(a[2]),v=(0,h.BV)(a[3]),d=a[5];this.fullExtent=new E.Z({xmin:l,ymin:s,zmin:f,xmax:c,ymax:v,zmax:d,spatialReference:this.spatialReference})}else if(r.sphere&&this._verifyArray(r.sphere,4)){var p=r.sphere,y=(0,Z.al)(p[0],p[1],p[2]),g=p[3]/Math.sqrt(3),m=(0,Z.Ue)();(0,b.f)(m,y,(0,Z.al)(g,g,g));var x=(0,Z.Ue)();if((0,b.g)(x,y,(0,Z.al)(g,g,g)),i&&this._verifyArray(i,16)){var A=i;(0,b.h)(u,m,A),(0,b.c)(m,u),(0,b.h)(u,x,A),(0,b.c)(x,u)}(0,I.projectBuffer)(m,_.pn,0,m,w.Z.WGS84,0,1),(0,I.projectBuffer)(x,_.pn,0,x,w.Z.WGS84,0,1);var k=(0,Z.Ue)(),z=(0,Z.Ue)();(0,b.y)(k,m,x),(0,b.C)(z,m,x),this.fullExtent=new E.Z({xmin:k[0],ymin:k[1],zmin:k[2],xmax:z[0],ymax:z[1],zmax:z[2],spatialReference:this.spatialReference})}else if(r.box&&this._verifyArray(r.box,12)){for(var L=r.box,R=(0,Z.al)(L[0],L[1],L[2]),C=(0,Z.al)(L[3],L[4],L[5]),M=(0,Z.al)(L[6],L[7],L[8]),U=(0,Z.al)(L[9],L[10],L[11]),V=[],S=0;S<8;++S)V.push((0,Z.Ue)());if((0,b.g)(V[0],R,C),(0,b.g)(V[0],V[0],M),(0,b.g)(V[0],V[0],U),(0,b.z)(V[1],R,C),(0,b.g)(V[1],V[1],M),(0,b.g)(V[1],V[1],U),(0,b.g)(V[2],R,C),(0,b.z)(V[2],V[2],M),(0,b.g)(V[2],V[2],U),(0,b.z)(V[3],R,C),(0,b.z)(V[3],V[3],M),(0,b.g)(V[3],V[3],U),(0,b.g)(V[4],R,C),(0,b.g)(V[4],V[4],M),(0,b.z)(V[4],V[4],U),(0,b.z)(V[5],R,C),(0,b.g)(V[5],V[5],M),(0,b.z)(V[5],V[5],U),(0,b.g)(V[6],R,C),(0,b.z)(V[6],V[6],M),(0,b.z)(V[6],V[6],U),(0,b.z)(V[7],R,C),(0,b.z)(V[7],V[7],M),(0,b.z)(V[7],V[7],U),i&&this._verifyArray(i,16))for(var P=i,T=0;T<8;++T)(0,b.h)(V[T],V[T],P);for(var j=(0,Z.al)(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE),N=(0,Z.al)(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),D=0;D<8;++D)(0,I.projectBuffer)(V[D],_.pn,0,V[D],w.Z.WGS84,0,1),(0,b.y)(N,N,V[D]),(0,b.C)(j,j,V[D]);this.fullExtent=new E.Z({xmin:N[0],ymin:N[1],zmin:N[2],xmax:j[0],ymax:j[1],zmax:j[2],spatialReference:this.spatialReference})}}}},{key:"load",value:function(){var e=(0,i.Z)((0,o.Z)().mark((function e(n){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.addResolvingPromise(this._doLoad(n)),this));case 1:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}()},{key:"_doLoad",value:function(){var e=(0,i.Z)((0,o.Z)().mark((function e(n){var t,i,u=this;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=null!=n?n.signal:null,e.prev=1,e.next=4,this.loadFromPortal({supportedTypes:["3DTiles Service"],validateItem:function(e){var n;if(null!==(n=e.typeKeywords)&&void 0!==n&&n.includes("IntegratedMesh"))return!0;throw new d.Z("portal:invalid-layer-item-type","Invalid layer item, expected '${expectedType}' ",{expectedType:"3DTiles Service containing IntegratedMesh"})}},n);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),(0,g.r9)(e.t0);case 9:if(!this.url){e.next=13;break}return i=(0,v.Z)(this.url,{query:(0,r.Z)((0,r.Z)({f:"json"},this.customParameters),{},{token:this.apiKey}),responseType:"json",signal:t}).then((function(e){u._initFullExtent(e.data)}),(function(e){(0,g.r9)(e)})),e.next=13,i;case 13:case"end":return e.stop()}}),e,this,[[1,6]])})));return function(n){return e.apply(this,arguments)}}()},{key:"fetchAttributionData",value:function(){var e=(0,i.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.load().then((function(){return{}})));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_validateElevationInfo",value:function(){var e=this.elevationInfo,n="Integrated mesh 3d tiles layers";(0,V.LR)(p.Z.getLogger(this),(0,V.Uy)(n,"absolute-height",e)),(0,V.LR)(p.Z.getLogger(this),(0,V.kf)(n,e))}}]),t}((0,z.Y)((0,R.q)((0,C.I)((0,M.M)((0,y.R)((0,L.N)((0,k.V)(A.Z))))))));(0,c._)([(0,m.Cb)({type:["IntegratedMesh3DTilesLayer"]})],S.prototype,"operationalLayerType",void 0),(0,c._)([(0,m.Cb)({type:w.Z})],S.prototype,"spatialReference",void 0),(0,c._)([(0,m.Cb)({type:E.Z})],S.prototype,"fullExtent",void 0),(0,c._)([(0,m.Cb)(U.PV)],S.prototype,"elevationInfo",null),(0,c._)([(0,m.Cb)({type:["show","hide"]})],S.prototype,"listMode",void 0),(0,c._)([(0,m.Cb)(U.HQ)],S.prototype,"url",void 0),(0,c._)([(0,m.Cb)({readOnly:!0})],S.prototype,"type",void 0),(0,c._)([(0,m.Cb)({type:String,json:{origins:{"web-scene":{read:!0,write:!0},"portal-item":{read:!0,write:!0}},read:!1}})],S.prototype,"path",void 0),(0,c._)([(0,m.Cb)({type:Number,json:{name:"layerDefinition.minScale",write:!0,origins:{service:{read:!1,write:!1}}}})],S.prototype,"minScale",void 0),(0,c._)([(0,m.Cb)({type:Number,json:{name:"layerDefinition.maxScale",write:!0,origins:{service:{read:!1,write:!1}}}})],S.prototype,"maxScale",void 0);var P=S=(0,c._)([(0,x.j)("esri.layers.IntegratedMesh3DTilesLayer")],S)},74509:function(e,n,t){t.d(n,{AA:function(){return p},Jn:function(){return s},LR:function(){return z},Lt:function(){return v},O3:function(){return Z},Ou:function(){return m},RL:function(){return c},Uy:function(){return I},VW:function(){return l},W_:function(){return w},Wb:function(){return A},XH:function(){return h},Zz:function(){return u},ap:function(){return g},fl:function(){return d},fm:function(){return L},jG:function(){return R},kf:function(){return k},mF:function(){return a},tR:function(){return C},tq:function(){return _},vQ:function(){return x},vu:function(){return f},zx:function(){return b}});var r=t(68860),o=t(88152);function i(e){return e?R:C}function u(e,n){return null!==n&&void 0!==n&&n.mode?n.mode:i(e).mode}function a(e,n){return null!=n?n:i(e)}function l(e,n){return u(null!=e&&e.hasZ,n)}function s(e,n){return a(null!=e&&!!e.hasZ,n)}function f(e){var n=y(e);return l(e.geometry,n)}function c(e){var n=y(e),t=l(e.geometry,n);return{mode:t,offset:null!=n&&"on-the-ground"!==t?L(n):0,featureExpressionInfo:null===n||void 0===n?void 0:n.featureExpressionInfo}}function v(e){return h(c(e))}function d(e){return h(e)||p(e)}function p(e){var n;return"0"===(null===e||void 0===e||null===(n=e.featureExpressionInfo)||void 0===n?void 0:n.expression)}function h(e){if(!e)return!1;if("on-the-ground"===e.mode)return!1;var n=null!==e&&void 0!==e&&e.featureExpressionInfo?e.featureExpressionInfo.expression:null;return!(!n||"0"===n)}function y(e){return e.layer&&"elevationInfo"in e.layer?e.layer.elevationInfo:null}function g(e,n){if(null===e||void 0===e||!e.offset)return 0;var t=e.offset,o=e.unit;if("decimal-degrees"===o)return 0;var i="unknown"!==o&&o?o:"meters",u=(0,r.y)(n);return u?(0,r.En)(t,i,u):0}function m(e,n,t){var r,o;if(null!==t&&void 0!==t&&t.mode){var i=e.hasZ?e.z:0,u=g(t,e.spatialReference);switch(t.mode){case"absolute-height":return i-u;case"on-the-ground":return 0;case"relative-to-ground":return i-((null!==(r=n.elevationProvider.getElevation(e.x,e.y,i,e.spatialReference,"ground"))&&void 0!==r?r:0)+u);case"relative-to-scene":return i-((null!==(o=n.elevationProvider.getElevation(e.x,e.y,i,e.spatialReference,"scene"))&&void 0!==o?o:0)+u)}}}function x(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return Z(e,n.x,n.y,n.hasZ?n.z:0,n.spatialReference,t,r)}function b(e,n,t,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return Z(e,n[0],n[1],n.length>2?n[2]:0,t,r,o)}function Z(e,n,t,r,o,i){var u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;if(null!=i){var a=null!=u?u.mode:"absolute-height";if("on-the-ground"===a)return 0;var l=_(n,t,r,o,e,i),s=l.absoluteZ;return E(s,n,t,r,o,e,u,a)}}function _(e,n,t,r,o,i){var u=g(i,r);switch(i.mode){case"absolute-height":return{absoluteZ:t+u,elevation:0};case"on-the-ground":var a,l=null!==(a=o.elevationProvider.getElevation(e,n,0,r,"ground"))&&void 0!==a?a:0;return{absoluteZ:l,elevation:l};case"relative-to-ground":var s,f=null!==(s=o.elevationProvider.getElevation(e,n,t,r,"ground"))&&void 0!==s?s:0;return{absoluteZ:t+f+u,elevation:f};case"relative-to-scene":var c,v=null!==(c=o.elevationProvider.getElevation(e,n,t,r,"scene"))&&void 0!==c?c:0;return{absoluteZ:t+v+u,elevation:v}}}function E(e,n,t,r,o,i,u,a){var l,s,f=g(u,o);switch(a){case"absolute-height":return e-f;case"relative-to-ground":return e-((null!==(l=i.elevationProvider.getElevation(n,t,r,o,"ground"))&&void 0!==l?l:0)+f);case"relative-to-scene":return e-((null!==(s=i.elevationProvider.getElevation(n,t,r,o,"scene"))&&void 0!==s?s:0)+f)}}function w(e,n){if(null==n)return!1;var t=n.mode;return null!=t&&("scene"===e&&"relative-to-scene"===t||"ground"===e&&"absolute-height"!==t)}function I(e,n,t){return t&&t.mode!==n?"".concat(e," only support ").concat(n," elevation mode"):null}function A(e,n,t){return(null===t||void 0===t?void 0:t.mode)===n?"".concat(e," do not support ").concat(n," elevation mode"):null}function k(e,n){return null!=(null===n||void 0===n?void 0:n.featureExpressionInfo)&&"0"!==n.featureExpressionInfo.expression?"".concat(e," do not support featureExpressionInfo"):null}function z(e,n){n&&e.warn(".elevationInfo=",n)}function L(e){var n;return(null!==(n=null===e||void 0===e?void 0:e.offset)&&void 0!==n?n:0)*(0,o.Z7)(null===e||void 0===e?void 0:e.unit)}var R={mode:"absolute-height",offset:0},C={mode:"on-the-ground",offset:null}}}]);
//# sourceMappingURL=72403.fa803732.chunk.js.map