"use strict";(self.webpackChunkreact_training=self.webpackChunkreact_training||[]).push([[99509],{80573:function(e,t,n){n.d(t,{Z:function(){return w}});var i=n(15671),r=n(43144),s=n(60136),o=n(29388),a=n(27366),l=n(7138),u=n(63780),c=n(11582),d=n(79056),p=n(46784),y=n(49861),v=(n(93169),n(32718),n(69912)),h=0,f=function(e){(0,s.Z)(n,e);var t=(0,o.Z)(n);function n(e){var r;return(0,i.Z)(this,n),(r=t.call(this,e)).id="".concat(Date.now().toString(16),"-analysis-").concat(h++),r.title=null,r}return(0,r.Z)(n,[{key:"parent",get:function(){return this._get("parent")},set:function(e){var t=this.parent;if(null!=t)switch(t.type){case"line-of-sight":case"dimension":t.releaseAnalysis(this);break;case"2d":case"3d":t.analyses.includes(this)&&t.analyses.remove(this)}this._set("parent",e)}},{key:"isEditable",get:function(){return this.requiredPropertiesForEditing.every(u.pC)}}]),n}((0,p.eC)((0,c.J)((0,d.IG)(l.default))));(0,a._)([(0,y.Cb)({type:String,constructOnly:!0,clonable:!1})],f.prototype,"id",void 0),(0,a._)([(0,y.Cb)({type:String})],f.prototype,"title",void 0),(0,a._)([(0,y.Cb)({clonable:!1,value:null})],f.prototype,"parent",null),(0,a._)([(0,y.Cb)({readOnly:!0})],f.prototype,"isEditable",null);var w=f=(0,a._)([(0,v.j)("esri.analysis.Analysis")],f)},77372:function(e,t,n){n.d(t,{Z:function(){return g}});var i=n(15671),r=n(43144),s=n(60136),o=n(29388),a=n(27366),l=(n(59486),n(11582)),u=n(17768),c=n(46784),d=n(92026),p=n(49861),y=n(89125),v=(n(84936),n(93169),n(69912)),h=n(25243),f=n(96866),w=n(848),_=function(e){(0,s.Z)(n,e);var t=(0,o.Z)(n);function n(e){var r;return(0,i.Z)(this,n),(r=t.call(this,e)).type="plane",r.position=null,r.heading=0,r.tilt=0,r.width=10,r.height=10,r}return(0,r.Z)(n,[{key:"equals",value:function(e){return this.heading===e.heading&&this.tilt===e.tilt&&(0,d._W)(this.position,e.position)&&this.width===e.width&&this.height===e.height}}]),n}((0,l.J)(c.wq));(0,a._)([(0,p.Cb)({readOnly:!0,json:{read:!1,write:!0}})],_.prototype,"type",void 0),(0,a._)([(0,p.Cb)({type:w.Z}),(0,f.B)()],_.prototype,"position",void 0),(0,a._)([(0,p.Cb)({type:Number,nonNullable:!0,range:{min:0,max:360}}),(0,f.B)(),(0,y.p)((function(e){return u.BV.normalize((0,h.q9)(e),0,!0)}))],_.prototype,"heading",void 0),(0,a._)([(0,p.Cb)({type:Number,nonNullable:!0,range:{min:0,max:360}}),(0,f.B)(),(0,y.p)((function(e){return u.BV.normalize((0,h.q9)(e),0,!0)}))],_.prototype,"tilt",void 0),(0,a._)([(0,p.Cb)({type:Number,nonNullable:!0}),(0,f.B)()],_.prototype,"width",void 0),(0,a._)([(0,p.Cb)({type:Number,nonNullable:!0}),(0,f.B)()],_.prototype,"height",void 0);var g=_=(0,a._)([(0,v.j)("esri.analysis.SlicePlane")],_)},17768:function(e,t,n){n.d(t,{BV:function(){return d},Q4:function(){return c},c5:function(){return u},pE:function(){return o}});var i=n(15671),r=n(43144),s=n(16889),o=function(){function e(t,n){(0,i.Z)(this,e),this.min=t,this.max=n,this.range=n-t}return(0,r.Z)(e,[{key:"normalize",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return a(this.range,this.min,this.max,e,t,n)}},{key:"clamp",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(0,s.uZ)(e-t,this.min,this.max)+t}},{key:"monotonic",value:function(e,t,n){return e<t?t:t+l(this.range,e-t,n)}},{key:"minimalMonotonic",value:function(e,t,n){return a(this.range,e,e+this.range,t,n)}},{key:"center",value:function(e,t,n){return t=this.monotonic(e,t,n),this.normalize((e+t)/2,n)}},{key:"diff",value:function(e,t,n){return this.monotonic(e,t,n)-e}},{key:"shortestSignedDiff",value:function(e,t){e=this.normalize(e);var n=(t=this.normalize(t))-e,i=t<e?this.minimalMonotonic(e,t)-e:t-this.minimalMonotonic(t,e);return Math.abs(n)<Math.abs(i)?n:i}},{key:"contains",value:function(e,t,n){return t=this.minimalMonotonic(e,t),(n=this.minimalMonotonic(e,n))>e&&n<t}}]),e}();function a(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return(i-=r)<t?i+=l(e,t-i):i>n&&(i-=l(e,i-n)),s&&i===n&&(i=t),i+r}function l(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Math.ceil((t-n)/e)*e+n}var u=new o(0,2*Math.PI),c=new o(-Math.PI,Math.PI),d=new o(0,360)},96866:function(e,t,n){n.d(t,{B:function(){return h}});var i=n(1413),r=n(37762),s=n(10064),o=n(9997),a=n(80292),l=n(35995),u=n(71907),c=n(33397),d=n(25265),p=n(49861),y=n(22892),v=n(53283);function h(e){var t,n=null!==(t=null===e||void 0===e?void 0:e.origins)&&void 0!==t?t:[void 0];return function(t,s){var o,u=function(e,t,n){var r;if("resource"===(null===e||void 0===e?void 0:e.type))return function(e,t,n){var r=(0,c.Oe)(t,n);return{type:String,read:function(e,t,n){var i=(0,v.r)(e,t,n);return r.type===String?i:"function"==typeof r.type?new r.type({url:i}):void 0},write:{writer:function(t,s,o,u){if(null===u||void 0===u||!u.resources)return"string"==typeof t?void(s[o]=(0,v.t)(t,u)):void(s[o]=t.write({},u));var c=function(e){return null==e?null:"string"==typeof e?e:e.url}(t),p=(0,v.t)(c,(0,i.Z)((0,i.Z)({},u),{},{verifyItemRelativeUrls:null!==u&&void 0!==u&&u.verifyItemRelativeUrls?{writtenUrls:u.verifyItemRelativeUrls.writtenUrls,rootPath:void 0}:void 0}),v.M.NO),h=r.type!==String&&(!(0,a.l)(this)||(null===u||void 0===u?void 0:u.origin)&&this.originIdOf(n)>(0,d.M9)(u.origin)),g={object:this,propertyName:n,value:t,targetUrl:p,dest:s,targetPropertyName:o,context:u,params:e};null!==u&&void 0!==u&&u.portalItem&&p&&!(0,l.YP)(p)?h&&null!==e&&void 0!==e&&e.contentAddressed?f(g):h?function(e){var t,n=e.context,r=e.targetUrl,s=e.params,o=e.value,a=e.dest,u=e.targetPropertyName;if(!n.portalItem)return;var c=n.portalItem.resourceFromPath(r),d=_(o,r,n),p=(0,y.B)(d),v=(0,l.Ml)(c.path),h=null!==(t=null===s||void 0===s?void 0:s.compress)&&void 0!==t&&t;p===v?(n.resources&&w((0,i.Z)((0,i.Z)({},e),{},{resource:c,content:d,compress:h,updates:n.resources.toUpdate})),a[u]=r):f(e)}(g):function(e){var t=e.context,n=e.targetUrl,i=e.dest,r=e.targetPropertyName;t.portalItem&&t.resources&&(t.resources.toKeep.push({resource:t.portalItem.resourceFromPath(n),compress:!1}),i[r]=n)}(g):null!==u&&void 0!==u&&u.portalItem&&(null==p||null!=(0,v.i)(p)||(0,l.jc)(p)||h)?f(g):s[o]=p}}}}(e,t,n);switch(null!==(r=null===e||void 0===e?void 0:e.type)&&void 0!==r?r:"other"){case"other":return{read:!0,write:!0};case"url":return{read:v.b.read,write:v.b.write}}}(e,t,s),h=(0,r.Z)(n);try{for(h.s();!(o=h.n()).done;){var g=o.value,b=(0,p.CJ)(t,g,s);for(var m in u)b[m]=u[m]}}catch(k){h.e(k)}finally{h.f()}}}function f(e){var t,n,r,a,c=e.targetUrl,d=e.params,p=e.value,h=e.context,f=e.dest,g=e.targetPropertyName;if(h.portalItem){var b=(0,v.p)(c),m=_(p,c,h);if(null!==d&&void 0!==d&&d.contentAddressed&&"json"!==m.type)null===(t=h.messages)||void 0===t||t.push(new s.Z("persistable:contentAddressingUnsupported",'Property "'.concat(g,'" is trying to serializing a resource with content of type ').concat(m.type," with content addressing. Content addressing is only supported for json resources."),{content:m}));else{var k=null!==d&&void 0!==d&&d.contentAddressed&&"json"===m.type?(0,o.F)(m.jsonString):null!==(n=null===b||void 0===b?void 0:b.filename)&&void 0!==n?n:(0,u.DO)(),x=(0,l.v_)(null!==(r=null===d||void 0===d?void 0:d.prefix)&&void 0!==r?r:null===b||void 0===b?void 0:b.prefix,k),C="".concat(x,".").concat((0,y.B)(m));if(null!==d&&void 0!==d&&d.contentAddressed&&h.resources&&"json"===m.type){var Z,V=null!==(Z=h.resources.toKeep.find((function(e){return e.resource.path===C})))&&void 0!==Z?Z:h.resources.toAdd.find((function(e){return e.resource.path===C}));if(V)return void(f[g]=V.resource.itemRelativeUrl)}var M=h.portalItem.resourceFromPath(C);(0,l.jc)(c)&&h.resources&&h.resources.pendingOperations.push((0,l.gi)(c).then((function(e){M.path="".concat(x,".").concat((0,y.B)({type:"blob",blob:e})),f[g]=M.itemRelativeUrl})).catch((function(){})));var I=null!==(a=null===d||void 0===d?void 0:d.compress)&&void 0!==a&&a;h.resources&&w((0,i.Z)((0,i.Z)({},e),{},{resource:M,content:m,compress:I,updates:h.resources.toAdd})),f[g]=M.itemRelativeUrl}}}function w(e){var t=e.object,n=e.propertyName,i=e.updates,r=e.resource,s=e.content,o=e.compress;i.push({resource:r,content:s,compress:o,finish:function(e){!function(e,t,n){"string"==typeof e[t]?e[t]=n.url:e[t].url=n.url}(t,n,e)}})}function _(e,t,n){return"string"==typeof e?{type:"url",url:t}:{type:"json",jsonString:JSON.stringify(e.toJSON(n))}}},80292:function(e,t,n){function i(e){return e&&"getAtOrigin"in e&&"originOf"in e}n.d(t,{l:function(){return i}})},22892:function(e,t,n){n.d(t,{B:function(){return r}});var i=n(35995);function r(e){return s[function(e){return"json"===e.type?"application/json":"blob"===e.type?e.blob.type:function(e){var t=(0,i.Ml)(e);return l[t]||o}(e.url)}(e)]||a}var s={},o="text/plain",a=s[o],l={png:"image/png",jpeg:"image/jpeg",jpg:"image/jpg",bmp:"image/bmp",gif:"image/gif",json:"application/json",txt:"text/plain",xml:"application/xml",svg:"image/svg+xml",zip:"application/zip",pbf:"application/vnd.mapbox-vector-tile",gz:"application/gzip","bin.gz":"application/octet-stream"};for(var u in l)s[l[u]]=u},99509:function(e,t,n){n.r(t),n.d(t,{default:function(){return U}});var i=n(15671),r=n(43144),s=n(60136),o=n(29388),a=n(27366),l=n(66978),u=n(49861),c=(n(93169),n(32718),n(84936),n(69912)),d=n(33565),p=n(74165),y=n(15861),v=n(97326),h=n(88301),f=n(61120),w=n(80573),_=n(77372),g=n(80987),b=n(60354),m=function(e){(0,s.Z)(n,e);var t=(0,o.Z)(n);function n(e){var r;return(0,i.Z)(this,n),(r=t.call(this,e)).type="slice",r.tiltEnabled=!1,r.shape=null,r.excludeGroundSurface=!1,r}return(0,r.Z)(n,[{key:"excludedLayers",get:function(){return this._get("excludedLayers")||new g.Z},set:function(e){this._set("excludedLayers",(0,b.Z)(e,this._get("excludedLayers")))}},{key:"requiredPropertiesForEditing",get:function(){var e;return[null===(e=this.shape)||void 0===e?void 0:e.position]}},{key:"clear",value:function(){this.shape=null}}]),n}(w.Z);(0,a._)([(0,u.Cb)({type:["slice"]})],m.prototype,"type",void 0),(0,a._)([(0,u.Cb)()],m.prototype,"tiltEnabled",void 0),(0,a._)([(0,u.Cb)({types:{key:"type",base:null,typeMap:{plane:_.Z},defaultKeyValue:"plane"}})],m.prototype,"shape",void 0),(0,a._)([(0,u.Cb)({cast:b.R,clonable:function(e){return e.slice()}})],m.prototype,"excludedLayers",null),(0,a._)([(0,u.Cb)({type:Boolean,nonNullable:!0})],m.prototype,"excludeGroundSurface",void 0),(0,a._)([(0,u.Cb)({readOnly:!0})],m.prototype,"requiredPropertiesForEditing",null);var k=m=(0,a._)([(0,c.j)("esri.analysis.SliceAnalysis")],m),x=n(31539),C=new Set,Z=function(e){(0,s.Z)(n,e);var t=(0,o.Z)(n);function n(e){var r;return(0,i.Z)(this,n),(r=t.call(this,e)).analysis=null,r.supportedViewType="3d",r.unsupportedErrorMessage="SliceViewModel is only supported in 3D views.",C.add((0,v.Z)(r)),r}return(0,r.Z)(n,[{key:"destroy",value:function(){C.delete(this)}},{key:"state",get:function(){return this.disabled||!this.ready?"disabled":null==this.tool?"ready":this.tool.state}},{key:"shape",get:function(){return this.analysis.shape},set:function(e){this.analysis.shape=e}},{key:"tiltEnabled",get:function(){return this.analysis.tiltEnabled},set:function(e){this.analysis.tiltEnabled=e}},{key:"layersMode",get:function(){var e,t;return null!==(e=null===(t=this.tool)||void 0===t?void 0:t.layersMode)&&void 0!==e?e:"none"}},{key:"excludedLayers",get:function(){return this.analysis.excludedLayers},set:function(e){this.analysis.excludedLayers=g.Z.isCollection(e)?e:new g.Z(e)}},{key:"excludeGroundSurface",get:function(){return this.analysis.excludeGroundSurface},set:function(e){this.analysis.excludeGroundSurface=e}},{key:"start",value:function(){var e=(0,y.Z)((0,p.Z)().mark((function e(){var t=this;return(0,p.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.Z)((0,f.Z)(n.prototype),"start",this).call(this);case 2:C.forEach((function(e){e.view===t.view&&e!==t&&e.clear()})),null!=this.analysisView&&(this.analysisView.active=!0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enterExcludeLayerMode",value:function(){null!=this.tool&&this.tool.enterExcludeLayerMode()}},{key:"exitExcludeLayerMode",value:function(){null!=this.tool&&this.tool.exitExcludeLayerMode()}},{key:"onConnectToAnalysisView",value:function(e){e.active=!0}},{key:"constructAnalysis",value:function(){return new k}}]),n}(x.S);(0,a._)([(0,u.Cb)({type:k})],Z.prototype,"analysis",void 0),(0,a._)([(0,u.Cb)({readOnly:!0})],Z.prototype,"state",null),(0,a._)([(0,u.Cb)()],Z.prototype,"shape",null),(0,a._)([(0,u.Cb)()],Z.prototype,"tiltEnabled",null),(0,a._)([(0,u.Cb)()],Z.prototype,"layersMode",null),(0,a._)([(0,u.Cb)()],Z.prototype,"excludedLayers",null),(0,a._)([(0,u.Cb)({nonNullable:!0})],Z.prototype,"excludeGroundSurface",null);var V=Z=(0,a._)([(0,c.j)("esri.widgets.Slice.SliceViewModel")],Z),M=n(8905),I=n(7021),A=n(96919),L=(n(80975),n(80532)),S=n(67005),O="esri-slice",N={base:O,actions:"".concat(O,"__actions"),cancelButton:"".concat(O,"__cancel-button"),container:"".concat(O,"__container"),error:"".concat(O,"__error"),excludeButton:"".concat(O,"__exclude-button"),hint:"".concat(O,"__hint"),hintText:"".concat(O,"__hint-text"),layerItem:"".concat(O,"__layer-item"),layerList:"".concat(O,"__layer-list"),layerListHeading:"".concat(O,"__layer-list-title"),newSliceButton:"".concat(O,"__clear-button")},T=function(e){(0,s.Z)(a,e);var t=(0,o.Z)(a);function a(e,n){var r;return(0,i.Z)(this,a),(r=t.call(this,e,n)).headingLevel=3,r.messages=null,r.viewModel=new V,r._onNewSliceClick=function(){(0,l.R8)(r.viewModel.start())},r}return(0,r.Z)(a,[{key:"loadDependencies",value:function(){return(0,M.h)({action:function(){return Promise.all([n.e(92358),n.e(46895),n.e(65138),n.e(91741)]).then(n.bind(n,6814))},button:function(){return Promise.all([n.e(92358),n.e(46895),n.e(54438),n.e(14105),n.e(32275)]).then(n.bind(n,32275))},"list-item":function(){return Promise.all([n.e(92358),n.e(46895),n.e(65138),n.e(21340)]).then(n.bind(n,67994))},list:function(){return Promise.all([n.e(92358),n.e(46895),n.e(54438),n.e(34504),n.e(8715),n.e(38782)]).then(n.bind(n,38782))}})}},{key:"active",get:function(){return this.viewModel.active}},{key:"analysis",get:function(){return this.viewModel.analysis},set:function(e){this.viewModel.analysis=e}},{key:"excludedLayers",get:function(){return this.viewModel.excludedLayers},set:function(e){this.viewModel.excludedLayers=e}},{key:"excludeGroundSurface",get:function(){return this.viewModel.excludeGroundSurface},set:function(e){this.viewModel.excludeGroundSurface=e}},{key:"icon",get:function(){return"slice"},set:function(e){this._overrideIfSome("icon",e)}},{key:"label",get:function(){var e,t;return null!==(e=null===(t=this.messages)||void 0===t?void 0:t.widgetLabel)&&void 0!==e?e:""},set:function(e){this._overrideIfSome("label",e)}},{key:"view",get:function(){return this.viewModel.view},set:function(e){this.viewModel.view=e}},{key:"visible",get:function(){return this.viewModel.visible},set:function(e){this.viewModel.visible=e}},{key:"hasVoxelLayers",get:function(){var e,t=null===(e=this.viewModel)||void 0===e?void 0:e.view;return null!=t&&t.allLayerViews.some((function(e){return"voxel-3d"===e.type}))}},{key:"render",value:function(){return(0,S.u)("div",{class:this.classes(N.base,I.z.widget,I.z.panel),role:"presentation"},this.visible?(0,S.u)("div",{class:N.container},this.viewModel.supported?[this._renderHint(),this._renderLayerList(),this._renderActions()]:this._renderUnsupported()):null)}},{key:"_renderUnsupported",value:function(){return(0,S.u)("div",{class:N.error,key:"unsupported"},(0,S.u)("p",null,this.messages.unsupported))}},{key:"_renderHint",value:function(){var e=this.hasVoxelLayers,t=this.messages,n=this.viewModel,i=n.active,r=n.layersMode,s=n.state,o=null;return i&&("exclude"===r?o=t.excludeHint:"ready"===s&&(o=e?t.voxelHint:t.hint)),o?(0,S.u)("div",{class:N.hint,key:"hint"},(0,S.u)("p",{class:N.hintText},o),(0,S.u)("p",{class:N.hintText},t.verticalHint)):null}},{key:"_renderLayerList",value:function(){var e=this,t=this.excludedLayers,n=this.excludeGroundSurface,i=this.headingLevel,r=this.messages,s=this.viewModel,o=s.layersMode,a=s.state,l="slicing"===a||"sliced"===a,u=t?t.toArray().map((function(t){return e._renderLayerItem({uid:t.uid,title:t.title,onClick:function(){return e.excludedLayers.remove(t),!1}})})):[];return n&&u.push(this._renderLayerItem({uid:"ground",title:r.ground,onClick:function(){return e.excludeGroundSurface=!1,!1}})),"exclude"!==o&&l&&0!==u.length?(0,S.u)("div",{class:N.layerList,key:"settings"},(0,S.u)(A.X,{class:N.layerListHeading,level:i},r.excludedLayers),(0,S.u)("calcite-list",{selectionMode:"none"},u)):null}},{key:"_renderActions",value:function(){var e=this.messages,t=this.viewModel,n=t.active,i=t.state,r="disabled"===i,s="slicing"===i||"sliced"===i,o="exclude"===t.layersMode,a=[];return n&&!s||o||a.push((0,S.u)("calcite-button",{class:N.newSliceButton,disabled:r,key:"new-slice",onclick:this._onNewSliceClick},e.newSlice)),s&&!o&&a.push((0,S.u)("calcite-button",{appearance:"outline-fill",class:N.excludeButton,disabled:r,key:"exclude",onclick:function(){return t.enterExcludeLayerMode()}},e.excludeLayer)),n&&o&&a.push((0,S.u)("calcite-button",{appearance:"outline-fill",class:N.cancelButton,disabled:r,key:"cancel-exclude",onclick:function(){return t.exitExcludeLayerMode()}},e.cancel)),0===a.length?null:(0,S.u)("div",{class:N.actions},a)}},{key:"_renderLayerItem",value:function(e){var t,n=this.messages.includeLayer;return(0,S.u)("calcite-list-item",{class:N.layerItem,key:e.uid,label:null!==(t=e.title)&&void 0!==t?t:""},(0,S.u)("calcite-action",{icon:"x",onclick:e.onClick,scale:"s",slot:"actions-end",text:n,title:n}))}}]),a}(d.Z);(0,a._)([(0,u.Cb)()],T.prototype,"active",null),(0,a._)([(0,u.Cb)({constructOnly:!0,nonNullable:!0})],T.prototype,"analysis",null),(0,a._)([(0,u.Cb)()],T.prototype,"excludedLayers",null),(0,a._)([(0,u.Cb)()],T.prototype,"excludeGroundSurface",null),(0,a._)([(0,u.Cb)()],T.prototype,"headingLevel",void 0),(0,a._)([(0,u.Cb)()],T.prototype,"icon",null),(0,a._)([(0,u.Cb)()],T.prototype,"label",null),(0,a._)([(0,u.Cb)(),(0,L.H)("esri/widgets/Slice/t9n/Slice")],T.prototype,"messages",void 0),(0,a._)([(0,u.Cb)()],T.prototype,"view",null),(0,a._)([(0,u.Cb)({type:V})],T.prototype,"viewModel",void 0),(0,a._)([(0,u.Cb)()],T.prototype,"visible",null),(0,a._)([(0,u.Cb)()],T.prototype,"hasVoxelLayers",null);var U=T=(0,a._)([(0,c.j)("esri.widgets.Slice")],T)},31539:function(e,t,n){n.d(t,{S:function(){return k}});var i,r,s=n(74165),o=n(15861),a=n(44925),l=n(15671),u=n(43144),c=n(60136),d=n(29388),p=n(27366),y=n(7138),v=n(14921),h=(n(93169),n(32718)),f=n(92026),w=n(66978),_=n(94172),g=n(49861),b=(n(84936),n(69912)),m=["analysis"];(r=i||(i={}))[r.PENDING=0]="PENDING",r[r.WAIT_FOR_VIEW_READY=1]="WAIT_FOR_VIEW_READY",r[r.RUNNING=2]="RUNNING";var k=function(e){(0,c.Z)(n,e);var t=(0,d.Z)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,l.Z)(this,n),(e=t.call(this,i)).view=null,e.analysisView=null,e._reconnectViewTask=null,e._forceInteractiveHandle=null,e._parentChangeFromReconnect=!1,e._startUserOperation=null;var r=null===i||void 0===i?void 0:i.analysis;return null!=r?e.analysis=r:(e._set("analysis",e.constructAnalysis()),e._set("isAnalysisOwner",!0)),null!=(null===i||void 0===i?void 0:i.visible)&&(e.visible=i.visible),e}return(0,u.Z)(n,[{key:"normalizeCtorArgs",value:function(e){e.analysis;return(0,a.Z)(e,m)}},{key:"initialize",value:function(){var e=this;this.addHandles([(0,_.watch)((function(){return{readyAndNotSupported:null!=e.view&&e.view.ready&&!e.supported}}),(function(t){t.readyAndNotSupported&&h.Z.getLogger(e).errorOnce(e.unsupportedErrorMessage)}),_.syncAndInitial),(0,_.watch)((function(){var t;return null===(t=e.analysis)||void 0===t?void 0:t.parent}),(function(t){e._parentChangeFromReconnect||t===e.view||e._set("isAnalysisOwner",!1);var n=!e._parentChangeFromReconnect;e._parentChangeFromReconnect=!1,n&&e._scheduleViewReconnect()}),_.sync),(0,_.watch)((function(){return{view:e.view,ready:null!=e.view&&e.view.ready,supported:e.supported}}),(function(t,n){var i=t.view,r=null===n||void 0===n?void 0:n.view;i!==r&&(e._startUserOperation=(0,f.IM)(e._startUserOperation),e._disconnectFromView(r)),e._scheduleViewReconnect()}),_.syncAndInitial)])}},{key:"destroy",value:function(){this._reconnectViewTask=(0,f.IM)(this._reconnectViewTask),this._startUserOperation=(0,f.IM)(this._startUserOperation),null!=this.analysisView&&(this.analysisView.visible=void 0),this._disconnectFromView(this.view),this._set("view",null),null!=this.analysis&&this.isAnalysisOwner&&(this.analysis.destroy(),this._set("analysis",null))}},{key:"supported",get:function(){return null==this.view||this.view.type===this.supportedViewType}},{key:"visible",set:function(e){this._set("visible",e),null!=this.analysisView&&(this.analysisView.visible=e)}},{key:"active",get:function(){return null!=this.tool&&this.tool.active}},{key:"disabled",get:function(){return null==this.view||!this.view.ready||!this.supported}},{key:"analysis",set:function(e){e!==this._get("analysis")&&(this._startUserOperation=(0,f.IM)(this._startUserOperation),this._disconnectFromView(this.view),this._setExternalAnalysis(e),this._scheduleViewReconnect())}},{key:"ready",get:function(){return null!=this.analysisView&&!this.connectingToView}},{key:"connectingToView",get:function(){return null!=this._reconnectViewTask}},{key:"isAnalysisOwner",get:function(){return this._get("isAnalysisOwner")}},{key:"tool",get:function(){return null!=this.analysisView?this.analysisView.tool:null}},{key:"clear",value:function(){this._startUserOperation=(0,f.IM)(this._startUserOperation),this._resetInteractiveCreationState(),null!=this.tool&&null!=this.view&&this.view.activeTool===this.tool&&(this.view.activeTool=null)}},{key:"start",value:function(){var e=(0,o.Z)((0,s.Z)().mark((function e(){var t,n,r=this;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.visible){e.next=2;break}return e.abrupt("return",void h.Z.getLogger(this).warn("Cannot start analysis when not visible"));case 2:return this.clear(),t={task:null,abort:null,state:i.PENDING},n=(0,v.vr)(function(){var e=(0,o.Z)((0,s.Z)().mark((function e(n){var o;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state=i.WAIT_FOR_VIEW_READY,e.next=3,(0,_.whenOnce)((function(){return r.ready}),n);case 3:if(t.state=i.RUNNING,null!=r.analysisView&&null!=r.view){e.next=6;break}return e.abrupt("return");case 6:null!=(o=r.analysisView.tool)&&(r.view.activeTool=o,(0,_.when)((function(){return o.created}),(function(){o.active&&null!=r.view&&(r.view.activeTool=null)}),{initial:!0,once:!0}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.abrupt("return",(t.task=n,t.abort=function(){return n.abort()},this._startUserOperation=t,n.promise));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onConnectToAnalysisView",value:function(e){}},{key:"onDisconnectFromAnalysisView",value:function(){}},{key:"_scheduleViewReconnect",value:function(){var e=this;this._reconnectViewTask=(0,f.IM)(this._reconnectViewTask);var t=(0,v.vr)(function(){var n=(0,o.Z)((0,s.Z)().mark((function n(i){return(0,s.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e._reconnectView(i);case 3:n.next=10;break;case 5:if(n.prev=5,n.t0=n.catch(0),(0,w.k_)(i),(0,w.D_)(n.t0)){n.next=9;break}return n.abrupt("return",void h.Z.getLogger(e).warn("Failed to use analysis in view model",n.t0));case 9:throw n.t0;case 10:return n.prev=10,t===e._reconnectViewTask&&(e._reconnectViewTask=null),n.finish(10);case 13:case"end":return n.stop()}}),n,null,[[0,5,10,13]])})));return function(e){return n.apply(this,arguments)}}());this._reconnectViewTask=t}},{key:"_reconnectView",value:function(){var e=(0,o.Z)((0,s.Z)().mark((function e(t){var n,i,r;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.view,i=null!=n&&n.ready&&this.supported,r=this.analysis,this._startUserOperation=x(this._startUserOperation),this._disconnectFromView(n),!i||null==n||null==r){e.next=10;break}if(!this.isAnalysisOwner){e.next=6;break}if(null==r.parent){e.next=5;break}return e.abrupt("return",void h.Z.getLogger(this).errorOnce("expected owned analysis to have null parent when connecting to view"));case 5:this._parentChangeFromReconnect=!0,n.analyses.add(r);case 6:return e.next=8,n.whenAnalysisView(r);case 8:this.analysisView=e.sent,(0,w.Hc)(t)?this._startUserOperation=x(this._startUserOperation):(this.analysisView.visible=this.visible,this._forceInteractiveHandle=this.analysisView.forceInteractiveForViewModel(),this.addHandles(this._forceInteractiveHandle),this.onConnectToAnalysisView(this.analysisView));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_disconnectFromView",value:function(e){null!=e&&this.isAnalysisOwner&&e.analyses.includes(this.analysis)&&(this._parentChangeFromReconnect=!0,this.analysis.clear(),e.analyses.remove(this.analysis)),this.onDisconnectFromAnalysisView(),this._forceInteractiveHandle=(0,f.hw)(this._forceInteractiveHandle),this.analysisView=null}},{key:"_setExternalAnalysis",value:function(e){null==this.analysisView||this.isAnalysisOwner||(this.analysisView.visible=void 0,this._forceInteractiveHandle=(0,f.hw)(this._forceInteractiveHandle)),this.analysisView=null,this._set("isAnalysisOwner",!1),this._set("analysis",e),this._parentChangeFromReconnect=!1}},{key:"_resetInteractiveCreationState",value:function(){this.analysis.clear(),null!=this.tool&&this.tool.resetCreated()}},{key:"testInfo",get:function(){}}]),n}(y.default);function x(e){return null!=e&&e.state>=i.RUNNING?(e.abort(),null):e}(0,p._)([(0,g.Cb)()],k.prototype,"supported",null),(0,p._)([(0,g.Cb)()],k.prototype,"view",void 0),(0,p._)([(0,g.Cb)({type:Boolean,value:!0})],k.prototype,"visible",null),(0,p._)([(0,g.Cb)()],k.prototype,"active",null),(0,p._)([(0,g.Cb)()],k.prototype,"disabled",null),(0,p._)([(0,g.Cb)({nonNullable:!0})],k.prototype,"analysis",null),(0,p._)([(0,g.Cb)()],k.prototype,"analysisView",void 0),(0,p._)([(0,g.Cb)()],k.prototype,"ready",null),(0,p._)([(0,g.Cb)()],k.prototype,"connectingToView",null),(0,p._)([(0,g.Cb)({readOnly:!0})],k.prototype,"isAnalysisOwner",null),(0,p._)([(0,g.Cb)()],k.prototype,"_reconnectViewTask",void 0),(0,p._)([(0,g.Cb)()],k.prototype,"_forceInteractiveHandle",void 0),(0,p._)([(0,g.Cb)()],k.prototype,"tool",null),k=(0,p._)([(0,b.j)("esri.widgets.support.AnalysisViewModel")],k)},96919:function(e,t,n){n.d(t,{M:function(){return p},X:function(){return c}});var i=n(1413),r=n(44925),s=n(16889),o=n(7021),a=n(80975),l=n(67005),u=["level","class"];function c(e,t){var n=e.level,s=e.class,c=(0,r.Z)(e,u),p=d(n);return(0,l.u)("h".concat(p),(0,i.Z)((0,i.Z)({},c),{},{"aria-level":String(p),class:(0,a.Sh)(o.z.heading,s),role:"heading"}),t)}function d(e){return(0,s.uZ)(Math.ceil(e),1,6)}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return d(e+t)}},7021:function(e,t,n){n.d(t,{z:function(){return i}});var i={anchor:"esri-widget__anchor",anchorDisabled:"esri-widget__anchor--disabled",button:"esri-button",buttonDisabled:"esri-button--disabled",buttonHalf:"esri-button--half",buttonSecondary:"esri-button--secondary",buttonSmall:"esri-button--small",buttonTertiary:"esri-button--tertiary",buttonThird:"esri-button--third",disabled:"esri-disabled",empty:"esri-widget__content--empty",emptyIllustration:"esri-widget__content-illustration--empty",heading:"esri-widget__heading",hidden:"esri-hidden",input:"esri-input",interactive:"esri-interactive",loader:"esri-widget__loader",loaderAnimation:"esri-widget__loader-animation",loaderText:"esri-widget__loader-text",menu:"esri-menu",menuHeader:"esri-menu__header",menuItem:"esri-menu__list-item",menuItemActive:"esri-menu__list-item--active",menuItemFocus:"esri-menu__list-item--focus",menuList:"esri-menu__list",panel:"esri-widget--panel",panelHeightOnly:"esri-widget--panel-height-only",primaryTick:"primary-tick",primaryTickAmPm:"primary-tick__ampm",primaryTickLabel:"primary-tick__label",rotating:"esri-rotating",secondaryTick:"secondary-tick",select:"esri-select",table:"esri-widget__table",widget:"esri-widget",widgetButton:"esri-widget--button",widgetButtonActive:"esri-widget--button-active",widgetDisabled:"esri-widget--disabled"}}}]);
//# sourceMappingURL=99509.a1463cb8.chunk.js.map