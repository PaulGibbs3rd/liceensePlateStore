"use strict";(self.webpackChunkreact_training=self.webpackChunkreact_training||[]).push([[62417,87960],{18442:function(e,t,i){i.d(t,{Z:function(){return s}});var n=i(15671),r=i(43144),o=i(39052),l=i(56885),s=function(e,t){function i(e){(0,n.Z)(this,i),this._observable=new l.s,this._map=new Map(e)}return(0,r.Z)(i,[{key:"size",get:function(){return(0,o.it)(this._observable),this._map.size}},{key:"clear",value:function(){this._map.size>0&&(this._map.clear(),this._observable.notify())}},{key:"delete",value:function(e){var t=this._map.delete(e);return t&&this._observable.notify(),t}},{key:"entries",value:function(){return(0,o.it)(this._observable),this._map.entries()}},{key:"forEach",value:function(e,t){var i=this;(0,o.it)(this._observable),this._map.forEach((function(n,r){return e.call(t,n,r,i)}),t)}},{key:"get",value:function(e){return(0,o.it)(this._observable),this._map.get(e)}},{key:"has",value:function(e){return(0,o.it)(this._observable),this._map.has(e)}},{key:"keys",value:function(){return(0,o.it)(this._observable),this._map.keys()}},{key:"set",value:function(e,t){return this._map.set(e,t),this._observable.notify(),this}},{key:"values",value:function(){return(0,o.it)(this._observable),this._map.values()}},{key:e,value:function(){return(0,o.it)(this._observable),this._map[Symbol.iterator]()}},{key:t,get:function(){return this._map[Symbol.toStringTag]}}]),i}(Symbol.iterator,Symbol.toStringTag)},35609:function(e,t,i){function n(){var e=new Float32Array(6);return e[0]=1,e[3]=1,e}function r(e,t,i,n){var r=t[n],o=t[n+1];e[n]=i[0]*r+i[2]*o+i[4],e[n+1]=i[1]*r+i[3]*o+i[5]}function o(e,t,i){for(var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2,s=o||t.length/l,a=n;a<s;a++)r(e,t,i,a*l)}i.d(t,{Ue:function(){return n},Zz:function(){return o}});Object.freeze(Object.defineProperty({__proto__:null,clone:function(e){var t=new Float32Array(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},create:n,createView:function(e,t){return new Float32Array(e,t,6)},fromValues:function(e,t,i,n,r,o){var l=new Float32Array(6);return l[0]=e,l[1]=t,l[2]=i,l[3]=n,l[4]=r,l[5]=o,l},transform:r,transformMany:o},Symbol.toStringTag,{value:"Module"}))},50264:function(e,t,i){i.d(t,{Iu:function(){return c},Jp:function(){return s},U1:function(){return a},U_:function(){return l},Us:function(){return h},bA:function(){return u},t8:function(){return o},vc:function(){return v},xJ:function(){return f},yR:function(){return r}});var n=i(24204);function r(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function o(e,t,i,n,r,o,l){return e[0]=t,e[1]=i,e[2]=n,e[3]=r,e[4]=o,e[5]=l,e}function l(e,t){var i=t[0],n=t[1],r=t[2],o=t[3],l=t[4],s=t[5],a=i*o-n*r;return a?(a=1/a,e[0]=o*a,e[1]=-n*a,e[2]=-r*a,e[3]=i*a,e[4]=(r*s-o*l)*a,e[5]=(n*l-i*s)*a,e):null}function s(e,t,i){var n=t[0],r=t[1],o=t[2],l=t[3],s=t[4],a=t[5],u=i[0],c=i[1],h=i[2],f=i[3],v=i[4],d=i[5];return e[0]=n*u+o*c,e[1]=r*u+l*c,e[2]=n*h+o*f,e[3]=r*h+l*f,e[4]=n*v+o*d+s,e[5]=r*v+l*d+a,e}function a(e,t,i){var n=t[0],r=t[1],o=t[2],l=t[3],s=t[4],a=t[5],u=Math.sin(i),c=Math.cos(i);return e[0]=n*c+o*u,e[1]=r*c+l*u,e[2]=n*-u+o*c,e[3]=r*-u+l*c,e[4]=s,e[5]=a,e}function u(e,t,i){var n=t[0],r=t[1],o=t[2],l=t[3],s=t[4],a=t[5],u=i[0],c=i[1];return e[0]=n*u,e[1]=r*u,e[2]=o*c,e[3]=l*c,e[4]=s,e[5]=a,e}function c(e,t,i){var n=t[0],r=t[1],o=t[2],l=t[3],s=t[4],a=t[5],u=i[0],c=i[1];return e[0]=n,e[1]=r,e[2]=o,e[3]=l,e[4]=n*u+o*c+s,e[5]=r*u+l*c+a,e}function h(e,t){var i=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=i,e[2]=-i,e[3]=n,e[4]=0,e[5]=0,e}function f(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e}function v(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e}function d(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e[4]=t[4]-i[4],e[5]=t[5]-i[5],e}var y=s,p=d;Object.freeze(Object.defineProperty({__proto__:null,add:function(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e[4]=t[4]+i[4],e[5]=t[5]+i[5],e},copy:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},determinant:function(e){return e[0]*e[3]-e[1]*e[2]},equals:function(e,t){var i=e[0],r=e[1],o=e[2],l=e[3],s=e[4],a=e[5],u=t[0],c=t[1],h=t[2],f=t[3],v=t[4],d=t[5],y=(0,n.bn)();return Math.abs(i-u)<=y*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(r-c)<=y*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(o-h)<=y*Math.max(1,Math.abs(o),Math.abs(h))&&Math.abs(l-f)<=y*Math.max(1,Math.abs(l),Math.abs(f))&&Math.abs(s-v)<=y*Math.max(1,Math.abs(s),Math.abs(v))&&Math.abs(a-d)<=y*Math.max(1,Math.abs(a),Math.abs(d))},exactEquals:function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]},frob:function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+1)},fromRotation:h,fromScaling:f,fromTranslation:v,identity:r,invert:l,mul:y,multiply:s,multiplyScalar:function(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*i,e[5]=t[5]*i,e},multiplyScalarAndAdd:function(e,t,i,n){return e[0]=t[0]+i[0]*n,e[1]=t[1]+i[1]*n,e[2]=t[2]+i[2]*n,e[3]=t[3]+i[3]*n,e[4]=t[4]+i[4]*n,e[5]=t[5]+i[5]*n,e},rotate:a,scale:u,set:o,str:function(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"},sub:p,subtract:d,translate:c},Symbol.toStringTag,{value:"Module"}))},46634:function(e,t,i){i.d(t,{R:function(){return d}});var n=i(15671),r=i(43144),o=i(60136),l=i(29388),s=i(27366),a=i(7138),u=i(42537),c=i(94172),h=i(99346),f=i(49861),v=i(69912),d=function(e){(0,o.Z)(i,e);var t=(0,l.Z)(i);function i(){var e;return(0,n.Z)(this,i),(e=t.apply(this,arguments)).updating=!1,e._handleId=0,e._scheduleHandleId=0,e._pendingPromises=new Set,e}return(0,r.Z)(i,[{key:"destroy",value:function(){this.removeAll()}},{key:"add",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._installWatch(e,t,i,c.watch)}},{key:"addWhen",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._installWatch(e,t,i,c.when)}},{key:"addOnCollectionChange",value:function(e,t){var i=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.initial,o=void 0!==r&&r,l=n.final,s=void 0!==l&&l,a=++this._handleId;return this.addHandles([(0,c.on)(e,"after-changes",this._createSyncUpdatingCallback(),c.sync),(0,c.on)(e,"change",t,{onListenerAdd:o?function(e){return t({added:e.toArray(),removed:[]})}:void 0,onListenerRemove:s?function(e){return t({added:[],removed:e.toArray()})}:void 0})],a),(0,u.kB)((function(){return i.removeHandles(a)}))}},{key:"addPromise",value:function(e){var t=this;if(null==e)return e;var i=++this._handleId;this.addHandles((0,u.kB)((function(){t._pendingPromises.delete(e)&&(0!==t._pendingPromises.size||t.hasHandles(y)||t._set("updating",!1))})),i),this._pendingPromises.add(e),this._set("updating",!0);var n=function(){return t.removeHandles(i)};return e.then(n,n),e}},{key:"removeAll",value:function(){this._pendingPromises.clear(),this.removeAllHandles(),this._set("updating",!1)}},{key:"_installWatch",value:function(e,t){var i=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0,o=++this._handleId;n.sync||this._installSyncUpdatingWatch(e,o);var l=r(e,t,n);return this.addHandles(l,o),(0,u.kB)((function(){return i.removeHandles(o)}))}},{key:"_installSyncUpdatingWatch",value:function(e,t){var i=this._createSyncUpdatingCallback(),n=(0,c.watch)(e,i,{sync:!0,equals:function(){return!1}});return this.addHandles(n,t),n}},{key:"_createSyncUpdatingCallback",value:function(){var e=this;return function(){e.removeHandles(y),++e._scheduleHandleId;var t=e._scheduleHandleId;e._get("updating")||e._set("updating",!0),e.addHandles((0,h.Os)((function(){t===e._scheduleHandleId&&(e._set("updating",e._pendingPromises.size>0),e.removeHandles(y))})),y)}}}]),i}(a.default);(0,s._)([(0,f.Cb)({readOnly:!0})],d.prototype,"updating",void 0),d=(0,s._)([(0,v.j)("esri.core.support.UpdatingHandles")],d);var y=-42},59068:function(e,t,i){i.d(t,{Z:function(){return d}});var n,r=i(15671),o=i(43144),l=i(60136),s=i(29388),a=i(27366),u=i(46784),c=i(49861),h=i(25243),f=(i(84936),i(93169),i(69912)),v=n=function(e){(0,l.Z)(i,e);var t=(0,s.Z)(i);function i(e){var n;return(0,r.Z)(this,i),(n=t.call(this,e)).cols=null,n.level=0,n.levelValue=null,n.origin=null,n.resolution=0,n.rows=null,n.scale=0,n}return(0,o.Z)(i,[{key:"clone",value:function(){return new n({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}}]),i}(u.wq);(0,a._)([(0,c.Cb)({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],v.prototype,"cols",void 0),(0,a._)([(0,c.Cb)({type:h.z8,json:{write:!0}})],v.prototype,"level",void 0),(0,a._)([(0,c.Cb)({type:String,json:{write:!0}})],v.prototype,"levelValue",void 0),(0,a._)([(0,c.Cb)({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],v.prototype,"origin",void 0),(0,a._)([(0,c.Cb)({type:Number,json:{write:!0}})],v.prototype,"resolution",void 0),(0,a._)([(0,c.Cb)({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],v.prototype,"rows",void 0),(0,a._)([(0,c.Cb)({type:Number,json:{write:!0}})],v.prototype,"scale",void 0);var d=v=n=(0,a._)([(0,f.j)("esri.layers.support.LOD")],v)},22824:function(e,t,i){i.d(t,{Z:function(){return C}});var n,r=i(1413),o=i(15671),l=i(43144),s=i(60136),a=i(29388),u=i(27366),c=i(43404),h=i(46784),f=i(68860),v=i(49861),d=i(25243),y=(i(84936),i(93169),i(38511)),p=i(69912),g=i(31201),_=i(848),m=i(78952),w=i(65156),k=i(92975),b=i(81753),I=i(59068),M=i(87960),x=new c.X({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"}),S=n=function(e){(0,s.Z)(i,e);var t=(0,a.Z)(i);function i(e){var n;return(0,o.Z)(this,i),(n=t.call(this,e)).dpi=96,n.format=null,n.origin=null,n.size=null,n.spatialReference=null,n}return(0,l.Z)(i,[{key:"isWrappable",get:function(){var e=this.spatialReference,t=this.origin;if(e&&t){var i=(0,k.C5)(e);return e.isWrappable&&!!i&&Math.abs(i.origin[0]-t.x)<=i.dx}return!1}},{key:"readOrigin",value:function(e,t){return _.Z.fromJSON((0,r.Z)({spatialReference:t.spatialReference},e))}},{key:"lods",set:function(e){var t=0,i=0,n=[],r=this._levelToLOD={};e&&(t=-1/0,i=1/0,e.forEach((function(e){n.push(e.scale),t=e.scale>t?e.scale:t,i=e.scale<i?e.scale:i,r[e.level]=e}))),this._set("scales",n),this._set("lods",e),this._initializeUpsampleLevels()}},{key:"readSize",value:function(e,t){return[t.cols,t.rows]}},{key:"writeSize",value:function(e,t){t.cols=e[0],t.rows=e[1]}},{key:"zoomToScale",value:function(e){var t=this.scales;if(e<=0)return t[0];if(e>=t.length-1)return t[t.length-1];var i=Math.floor(e),n=i+1;return t[i]/Math.pow(t[i]/t[n],e-i)}},{key:"scaleToZoom",value:function(e){for(var t=this.scales,i=t.length-1,n=0;n<i;n++){var r=t[n],o=t[n+1];if(r<=e)return n;if(o===e)return n+1;if(r>e&&o<e)return n+Math.log(r/e)/Math.log(r/o)}return n}},{key:"tileAt",value:function(e,t,i,n){var r,o,l=this.lodAt(e);if(!l)return null;if("number"==typeof t)r=t,o=i;else if((0,k.fS)(t.spatialReference,this.spatialReference))r=t.x,o=t.y,n=i;else{var s=(0,b.iV)(t,this.spatialReference);if(null==s)return null;r=s.x,o=s.y,n=i}var a=l.resolution*this.size[0],u=l.resolution*this.size[1];return n||(n=new M.f(null,0,0,0,(0,w.Ue)())),n.level=e,n.row=Math.floor((this.origin.y-o)/u+.001),n.col=Math.floor((r-this.origin.x)/a+.001),this.updateTileInfo(n),n}},{key:"updateTileInfo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.ExtrapolateOptions.NONE,i=this.lodAt(e.level);if(!i&&t===n.ExtrapolateOptions.POWER_OF_TWO){var r=this.lods[this.lods.length-1];r.level<e.level&&(i=r)}if(i){var o=e.level-i.level,l=i.resolution*this.size[0]/Math.pow(2,o),s=i.resolution*this.size[1]/Math.pow(2,o);e.id="".concat(e.level,"/").concat(e.row,"/").concat(e.col),e.extent||(e.extent=(0,w.Ue)()),e.extent[0]=this.origin.x+e.col*l,e.extent[1]=this.origin.y-(e.row+1)*s,e.extent[2]=e.extent[0]+l,e.extent[3]=e.extent[1]+s}}},{key:"upsampleTile",value:function(e){var t=this._upsampleLevels[e.level];return!(!t||-1===t.parentLevel)&&(e.level=t.parentLevel,e.row=Math.floor(e.row/t.factor+.001),e.col=Math.floor(e.col/t.factor+.001),this.updateTileInfo(e),!0)}},{key:"getTileBounds",value:function(e,t){var i=this.lodAt(t.level);if(null==i)return null;var n=i.resolution,r=n*this.size[0],o=n*this.size[1];return e[0]=this.origin.x+t.col*r,e[1]=this.origin.y-(t.row+1)*o,e[2]=e[0]+r,e[3]=e[1]+o,e}},{key:"lodAt",value:function(e){var t,i;return null!==(t=null===(i=this._levelToLOD)||void 0===i?void 0:i[e])&&void 0!==t?t:null}},{key:"clone",value:function(){return n.fromJSON(this.write({}))}},{key:"getCompatibleForVTL",value:function(e){if(this.size[0]!==this.size[1]||256===this.size[0]&&512===e)return null;var t=(512===this.size[0]&&256===e?-1:0)+(this.spatialReference.isGeographic?1:0);if(this.size[0]===e&&0===t)return this;for(var i=[],r=this.lods.length-t,o=0;o<r;o++){var l=o+t,s=l>=0?this.lods[l]:{scale:2*this.lods[0].scale,resolution:2*this.lods[0].resolution},a=s.scale,u=s.resolution;i.push(new I.Z({level:o,scale:a,resolution:u}))}return new n({size:[e,e],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:i})}},{key:"_initializeUpsampleLevels",value:function(){var e=this.lods;this._upsampleLevels=[];for(var t=null,i=0;i<e.length;i++){var n=e[i];this._upsampleLevels[n.level]={parentLevel:t?t.level:-1,factor:t?t.resolution/n.resolution:0},t=n}}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.resolutionFactor,i=void 0===t?1:t,r=e.scales,o=e.size,l=void 0===o?256:o,s=e.spatialReference,a=void 0===s?m.Z.WebMercator:s,u=e.numLODs,c=void 0===u?24:u;if(!(0,k.JY)(a)){var h=[];if(r)for(var v=0;v<r.length;v++){var d=r[v];h.push(new I.Z({level:v,scale:d,resolution:d}))}else for(var y=5e-4,p=c-1;p>=0;p--)h.unshift(new I.Z({level:p,scale:y,resolution:y})),y*=2;return new n({dpi:96,lods:h,origin:new _.Z(0,0,a),size:[l,l],spatialReference:a})}var g=(0,k.C5)(a),w=e.origin?new _.Z({x:e.origin.x,y:e.origin.y,spatialReference:a}):new _.Z(g?{x:g.origin[0],y:g.origin[1],spatialReference:a}:{x:0,y:0,spatialReference:a}),b=96,M=1/(39.37*(0,f.c9)(a)*b),x=[];if(r)for(var S=0;S<r.length;S++){var C=r[S],Z=C*M;x.push(new I.Z({level:S,scale:C,resolution:Z}))}else{var T=(0,k.sT)(a)?512/l*591657527.5917094:256/l*591657527.591555,z=Math.ceil(c/i);x.push(new I.Z({level:0,scale:T,resolution:T*M}));for(var F=1;F<z;F++){var P=T/Math.pow(2,i),R=P*M;x.push(new I.Z({level:F,scale:P,resolution:R})),T=P}}return new n({dpi:b,lods:x,origin:w,size:[l,l],spatialReference:a})}}]),i}(h.wq);(0,u._)([(0,v.Cb)({type:Number,json:{write:!0}})],S.prototype,"compressionQuality",void 0),(0,u._)([(0,v.Cb)({type:Number,json:{write:!0}})],S.prototype,"dpi",void 0),(0,u._)([(0,v.Cb)({type:String,json:{read:x.read,write:x.write,origins:{"web-scene":{read:!1,write:!1}}}})],S.prototype,"format",void 0),(0,u._)([(0,v.Cb)({readOnly:!0})],S.prototype,"isWrappable",null),(0,u._)([(0,v.Cb)({type:_.Z,json:{write:!0}})],S.prototype,"origin",void 0),(0,u._)([(0,y.r)("origin")],S.prototype,"readOrigin",null),(0,u._)([(0,v.Cb)({type:[I.Z],value:null,json:{write:!0}})],S.prototype,"lods",null),(0,u._)([(0,v.Cb)({readOnly:!0})],S.prototype,"scales",void 0),(0,u._)([(0,v.Cb)({cast:function(e){return Array.isArray(e)?e:"number"==typeof e?[e,e]:[256,256]}})],S.prototype,"size",void 0),(0,u._)([(0,y.r)("size",["rows","cols"])],S.prototype,"readSize",null),(0,u._)([(0,g.c)("size",{cols:{type:d.z8},rows:{type:d.z8}})],S.prototype,"writeSize",null),(0,u._)([(0,v.Cb)({type:m.Z,json:{write:!0}})],S.prototype,"spatialReference",void 0),function(e){var t;(t=e.ExtrapolateOptions||(e.ExtrapolateOptions={}))[t.NONE=0]="NONE",t[t.POWER_OF_TWO=1]="POWER_OF_TWO"}((S=n=(0,u._)([(0,p.j)("esri.layers.support.TileInfo")],S))||(S={}));var C=S},87960:function(e,t,i){i.d(t,{f:function(){return o}});var n=i(43144),r=i(15671),o=(0,n.Z)((function e(t,i,n,o){var l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;(0,r.Z)(this,e),this.id=t,this.level=i,this.row=n,this.col=o,this.extent=l}))},35594:function(e,t,i){i.d(t,{F:function(){return r},o:function(){return o}});var n=i(77981);function r(e){return{geometryType:(0,n.Ji)(e[0]),geometries:e.map((function(e){return e.toJSON()}))}}function o(e,t,i){var r=(0,n.q9)(t);return e.map((function(e){var t=r.fromJSON(e);return t.spatialReference=i,t}))}},23084:function(e,t,i){i.d(t,{LP:function(){return f},cv:function(){return h},en:function(){return c},lA:function(){return u}});var n=i(1413),r=i(42265),o=i(19545),l=i(84652),s=i(35995),a=i(66660);function u(e,t){return t?(0,n.Z)((0,n.Z)({},t),{},{query:(0,n.Z)((0,n.Z)({},null!==e&&void 0!==e?e:{}),t.query)}):{query:e}}function c(e){return"string"==typeof e?(0,s.mN)(e):(0,l.d9)(e)}function h(e,t,i){var n={};for(var r in e)if("declaredClass"!==r){var o=e[r];if(null!=o&&"function"!=typeof o)if(Array.isArray(o))n[r]=o.map((function(e){return h(e)}));else if("object"==typeof o)if(o.toJSON){var l=o.toJSON(null===i||void 0===i?void 0:i[r]);n[r]=t?l:JSON.stringify(l)}else n[r]=t?o:JSON.stringify(o);else n[r]=o}return n}function f(e,t){var i;return e?(0,a.r)(e)&&(t||r.Z.apiKey)?t||r.Z.apiKey:null===o.id||void 0===o.id||null===(i=o.id.findCredential(e))||void 0===i?void 0:i.token:null}},48790:function(e,t,i){i.d(t,{Z:function(){return u}});var n=i(74165),r=i(37762),o=i(15671),l=i(43144),s=i(13005),a=i(73828),u=function(){function e(){(0,o.Z)(this,e),this.spans=[]}return(0,l.Z)(e,[{key:"acquire",value:function(e){this.lodInfo=e}},{key:"release",value:function(){this.lodInfo=null,this.spans.length=0}},{key:"keys",value:(0,n.Z)().mark((function e(){var t,i,o,l,s,u,c,h,f;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.lodInfo,i=(0,r.Z)(this.spans),e.prev=2,i.s();case 4:if((o=i.n()).done){e.next=16;break}l=o.value,s=l.row,u=l.colFrom,c=l.colTo,h=u;case 7:if(!(h<=c)){e.next=14;break}return f=t.getWorldForColumn(h),e.next=11,new a.Z(t.level,s,t.normalizeCol(h),f);case 11:h++,e.next=7;break;case 14:e.next=4;break;case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(2),i.e(e.t0);case 21:return e.prev=21,i.f(),e.finish(21);case 24:case"end":return e.stop()}}),e,this,[[2,18,21,24]])}))},{key:"forEach",value:function(e,t){var i=this.spans,n=this.lodInfo,o=n.level;if(0!==i.length){var l,s=(0,r.Z)(i);try{for(s.s();!(l=s.n()).done;)for(var a=l.value,u=a.row,c=a.colFrom,h=a.colTo,f=c;f<=h;f++)e.call(t,o,u,n.normalizeCol(f),n.getWorldForColumn(f))}catch(v){s.e(v)}finally{s.f()}}}}]),e}();u.pool=new s.Z(u)},37995:function(e,t,i){i.d(t,{Z:function(){return m}});var n=i(37762),r=i(29439),o=i(15671),l=i(43144),s=i(92975),a=i(73828);function u(e,t){return[e,t]}function c(e,t,i){return e[0]=t,e[1]=i,e}function h(e,t,i,n,r){return e[0]=t,e[1]=i,e[2]=n,e[3]=r,e}var f=new a.Z("0/0/0/0"),v=function(){function e(t,i,n,r,l,s,a,u,c,h,f,v){(0,o.Z)(this,e),this.level=t,this.resolution=i,this.scale=n,this.origin=r,this.first=l,this.last=s,this.size=a,this.norm=u,this.worldStart=c,this.worldEnd=h,this.worldSize=f,this.wrap=v}return(0,l.Z)(e,[{key:"normalizeCol",value:function(e){if(!this.wrap)return e;var t=this.worldSize[0];return e<0?t-1-Math.abs((e+1)%t):e%t}},{key:"denormalizeCol",value:function(e,t){return this.wrap?this.worldSize[0]*t+e:e}},{key:"getWorldForColumn",value:function(e){return this.wrap?Math.floor(e/this.worldSize[0]):0}},{key:"getFirstColumnForWorld",value:function(e){return e*this.worldSize[0]+this.first[0]}},{key:"getLastColumnForWorld",value:function(e){return e*this.worldSize[0]+this.first[0]+this.size[0]-1}},{key:"getColumnForX",value:function(e){return(e-this.origin[0])/this.norm[0]}},{key:"getXForColumn",value:function(e){return this.origin[0]+e*this.norm[0]}},{key:"getRowForY",value:function(e){return(this.origin[1]-e)/this.norm[1]}},{key:"getYForRow",value:function(e){return this.origin[1]-e*this.norm[1]}},{key:"getTileBounds",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];f.set(t);var n=i?f.col:this.denormalizeCol(f.col,f.world),r=f.row;return h(e,this.getXForColumn(n),this.getYForRow(r+1),this.getXForColumn(n+1),this.getYForRow(r)),e}},{key:"getTileCoords",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];f.set(t);var n=i?f.col:this.denormalizeCol(f.col,f.world);return Array.isArray(e)?c(e,this.getXForColumn(n),this.getYForRow(f.row)):(e.x=this.getXForColumn(n),e.y=this.getYForRow(f.row)),e}}],[{key:"create",value:function(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=(0,s.C5)(t.spatialReference),o=i.origin||u(t.origin.x,t.origin.y),l=u(t.size[0]*i.resolution,t.size[1]*i.resolution),a=u(-1/0,-1/0),h=u(1/0,1/0),f=u(1/0,1/0);null!=n&&(c(a,Math.max(0,Math.floor((n.xmin-o[0])/l[0])),Math.max(0,Math.floor((o[1]-n.ymax)/l[1]))),c(h,Math.max(0,Math.floor((n.xmax-o[0])/l[0])),Math.max(0,Math.floor((o[1]-n.ymin)/l[1]))),c(f,h[0]-a[0]+1,h[1]-a[1]+1));var v,d,y,p,g=i.cols,_=i.rows;return!n&&g&&_&&(c(a,g[0],_[0]),c(h,g[1],_[1]),c(f,g[1]-g[0]+1,_[1]-_[0]+1)),t.isWrappable?(v=u(Math.ceil(Math.round((r.valid[1]-r.valid[0])/i.resolution)/t.size[0]),f[1]),d=u(Math.floor((r.origin[0]-o[0])/l[0]),a[1]),y=u(v[0]+d[0]-1,h[1]),p=!0):(d=a,y=h,v=f,p=!1),new e(i.level,i.resolution,i.scale,o,a,h,f,l,d,y,v,p)}}]),e}(),d=i(48790),y=(0,l.Z)((function e(t,i,n){(0,o.Z)(this,e),this.row=t,this.colFrom=i,this.colTo=n})),p=new a.Z("0/0/0/0"),g=function(){function e(t,i,n,r,l,s,a,u){(0,o.Z)(this,e),this.x=t,this.ymin=i,this.ymax=n,this.invM=r,this.leftAdjust=l,this.rightAdjust=s,this.leftBound=a,this.rightBound=u}return(0,l.Z)(e,[{key:"incrRow",value:function(){this.x+=this.invM}},{key:"getLeftCol",value:function(){return Math.max(this.x+this.leftAdjust,this.leftBound)}},{key:"getRightCol",value:function(){return Math.min(this.x+this.rightAdjust,this.rightBound)}}],[{key:"create",value:function(t,i){var n;t[1]>i[1]&&(t=(n=[i,t])[0],i=n[1]);var o=t,l=(0,r.Z)(o,2),s=l[0],a=l[1],u=i,c=(0,r.Z)(u,2),h=c[0],f=c[1],v=h-s,d=f-a,y=0!==d?v/d:0,p=(Math.ceil(a)-a)*y,g=(Math.floor(a)-a)*y;return new e(s,Math.floor(a),Math.ceil(f),y,v<0?p:g,v<0?g:p,v<0?h:s,v<0?s:h)}}]),e}(),_=[[0,0],[0,0],[0,0],[0,0]],m=function(){function e(t){var i=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.lods[0].level,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.lods[t.lods.length-1].level;(0,o.Z)(this,e),this.tileInfo=t,this.fullExtent=n,this.scales=[],this._infoByScale={},this._infoByLevel={};var s=t.lods.filter((function(e){return e.level>=r&&e.level<=l}));this.minScale=s[0].scale,this.maxScale=s[s.length-1].scale;var a=this._lodInfos=s.map((function(e){return v.create(t,e,n)}));s.forEach((function(e,t){i._infoByLevel[e.level]=a[t],i._infoByScale[e.scale]=a[t],i.scales[t]=e.scale}),this),this._wrap=t.isWrappable}return(0,l.Z)(e,[{key:"spatialReference",get:function(){return this.tileInfo.spatialReference}},{key:"getLODInfoAt",value:function(e){return this._infoByLevel["number"==typeof e?e:e.level]}},{key:"getTileBounds",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];p.set(t);var n=this._infoByLevel[p.level];return n?n.getTileBounds(e,p,i):e}},{key:"getTileCoords",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];p.set(t);var n=this._infoByLevel[p.level];return n?n.getTileCoords(e,p,i):e}},{key:"getTileCoverage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:192,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"closest";if(!i&&(e.scale>this.minScale||e.scale<this.maxScale))return null;var r,o,l,s="closest"===n?this.getClosestInfoForScale(e.scale):this.getSmallestInfoForScale(e.scale),a=d.Z.pool.acquire(s),u=this._wrap,c=1/0,h=-1/0,f=a.spans;_[0][0]=_[0][1]=_[1][1]=_[3][0]=-t,_[1][0]=_[2][0]=e.size[0]+t,_[2][1]=_[3][1]=e.size[1]+t;for(var v=0,p=_;v<p.length;v++){var m=p[v];e.toMap(m,m),m[0]=s.getColumnForX(m[0]),m[1]=s.getRowForY(m[1])}for(var w=[],k=3,b=0;b<4;b++)if(_[b][1]!==_[k][1]){var I=g.create(_[b],_[k]);c=Math.min(I.ymin,c),h=Math.max(I.ymax,h),void 0===w[I.ymin]&&(w[I.ymin]=[]),w[I.ymin].push(I),k=b}else k=b;if(null==c||null==h||h-c>100)return null;var M=[];for(r=c;r<h;){null!=w[r]&&(M=M.concat(w[r])),o=1/0,l=-1/0;for(var x=M.length-1;x>=0;x--){var S=M[x];o=Math.min(o,S.getLeftCol()),l=Math.max(l,S.getRightCol())}if(o=Math.floor(o),l=Math.floor(l),r>=s.first[1]&&r<=s.last[1])if(u)if(s.size[0]<s.worldSize[0])for(var C=Math.floor(l/s.worldSize[0]),Z=Math.floor(o/s.worldSize[0]);Z<=C;Z++)f.push(new y(r,Math.max(s.getFirstColumnForWorld(Z),o),Math.min(s.getLastColumnForWorld(Z),l)));else f.push(new y(r,o,l));else o>s.last[0]||l<s.first[0]||(o=Math.max(o,s.first[0]),l=Math.min(l,s.last[0]),f.push(new y(r,o,l)));r+=1;for(var T=M.length-1;T>=0;T--){var z=M[T];z.ymax>=r?z.incrRow():M.splice(T,1)}}return a}},{key:"getTileParentId",value:function(e){p.set(e);var t=this._infoByLevel[p.level],i=this._lodInfos.indexOf(t)-1;return i<0?null:(this._getTileIdAtLOD(p,this._lodInfos[i],p),p.id)}},{key:"getTileResolution",value:function(e){var t=this._infoByLevel["object"==typeof e?e.level:e];return t?t.resolution:-1}},{key:"getTileScale",value:function(e){var t=this._infoByLevel[e.level];return t?t.scale:-1}},{key:"intersects",value:function(e,t){p.set(t);var i=this._infoByLevel[p.level],o=e.lodInfo;if(o.resolution>i.resolution){this._getTileIdAtLOD(p,o,p);var l,s=o.denormalizeCol(p.col,p.world),a=(0,n.Z)(e.spans);try{for(a.s();!(l=a.n()).done;){var u=l.value;if(u.row===p.row&&u.colFrom<=s&&u.colTo>=s)return!0}}catch(I){a.e(I)}finally{a.f()}}if(o.resolution<i.resolution){var c=e.spans.reduce((function(e,t){return e[0]=Math.min(e[0],t.row),e[1]=Math.max(e[1],t.row),e[2]=Math.min(e[2],t.colFrom),e[3]=Math.max(e[3],t.colTo),e}),[1/0,-1/0,1/0,-1/0]),h=(0,r.Z)(c,4),f=h[0],v=h[1],d=h[2],y=h[3],g=i.denormalizeCol(p.col,p.world),_=o.getColumnForX(i.getXForColumn(g)),m=o.getRowForY(i.getYForRow(p.row)),w=o.getColumnForX(i.getXForColumn(g+1))-1,k=o.getRowForY(i.getYForRow(p.row+1))-1;return!(_>y||w<d||m>v||k<f)}var b=o.denormalizeCol(p.col,p.world);return e.spans.some((function(e){return e.row===p.row&&e.colFrom<=b&&e.colTo>=b}))}},{key:"normalizeBounds",value:function(e,t,i){if(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],this._wrap){var n=(0,s.C5)(this.tileInfo.spatialReference),r=-i*(n.valid[1]-n.valid[0]);e[0]+=r,e[2]+=r}return e}},{key:"getSmallestInfoForScale",value:function(e){var t=this.scales;if(this._infoByScale[e])return this._infoByScale[e];if(e>t[0])return this._infoByScale[t[0]];for(var i=1;i<t.length-1;i++)if(e>t[i]+1e-6)return this._infoByScale[t[i-1]];return this._infoByScale[t[t.length-1]]}},{key:"getClosestInfoForScale",value:function(e){var t=this.scales;return this._infoByScale[e]||(e=t.reduce((function(t,i){return Math.abs(i-e)<Math.abs(t-e)?i:t}),t[0])),this._infoByScale[e]}},{key:"scaleToLevel",value:function(e){var t=this.scales;if(this._infoByScale[e])return this._infoByScale[e].level;for(var i=t.length-1;i>=0;i--)if(e<t[i])return i===t.length-1?this._infoByScale[t[t.length-1]].level:this._infoByScale[t[i]].level+(t[i]-e)/(t[i]-t[i+1]);return this._infoByScale[t[0]].level}},{key:"scaleToZoom",value:function(e){return this.tileInfo.scaleToZoom(e)}},{key:"zoomToScale",value:function(e){return this.tileInfo.zoomToScale(e)}},{key:"_getTileIdAtLOD",value:function(e,t,i){var n=this._infoByLevel[i.level];return e.set(i),t.resolution<n.resolution?null:(t.resolution===n.resolution||(e.level=t.level,e.col=Math.floor(i.col*n.resolution/t.resolution+.01),e.row=Math.floor(i.row*n.resolution/t.resolution+.01)),e)}}]),e}()},73828:function(e,t,i){i.d(t,{Z:function(){return s}});var n=i(29439),r=i(15671),o=i(43144),l=i(13005),s=function(){function e(t,i,n,o){(0,r.Z)(this,e),this.set(t,i,n,o)}return(0,o.Z)(e,[{key:"key",get:function(){return this}},{key:"id",get:function(){return this.toString()},set:function(e){this.set(e)}},{key:"normalizedId",get:function(){return"".concat(this.level,"/").concat(this.row,"/").concat(this.col)}},{key:"hash",get:function(){var e=4095&this.row,t=4095&this.col,i=63&this.level;return(3&this.world)<<30|t<<22|e<<8|i}},{key:"acquire",value:function(e,t,i,n){this.set(e,t,i,n)}},{key:"contains",value:function(e){var t=e.level-this.level;return t>=0&&this.row===e.row>>t&&this.col===e.col>>t&&this.world===e.world}},{key:"containsChild",value:function(e){var t=e.level-this.level;return t>0&&this.row===e.row>>t&&this.col===e.col>>t&&this.world===e.world}},{key:"equals",value:function(e){return this.level===e.level&&this.row===e.row&&this.col===e.col&&this.world===e.world}},{key:"clone",value:function(){return new e(this)}},{key:"release",value:function(){this.level=0,this.row=0,this.col=0,this.world=0}},{key:"set",value:function(e,t,i,r){if(null==e)this.level=0,this.row=0,this.col=0,this.world=0;else if("object"==typeof e)this.level=e.level||0,this.row=e.row||0,this.col=e.col||0,this.world=e.world||0;else if("string"==typeof e){var o=e.split("/"),l=(0,n.Z)(o,4),s=l[0],a=l[1],u=l[2],c=l[3];this.level=parseFloat(s),this.row=parseFloat(a),this.col=parseFloat(u),this.world=parseFloat(c)}else this.level=+e,this.row=+t,this.col=+i,this.world=+r||0;return this}},{key:"toString",value:function(){return"".concat(this.level,"/").concat(this.row,"/").concat(this.col,"/").concat(this.world)}},{key:"getParentKey",value:function(){return this.level<=0?null:new e(this.level-1,this.row>>1,this.col>>1,this.world)}},{key:"getNeighborId",value:function(e,t){return"".concat(this.level,"/").concat(this.row+t,"/").concat(this.col+e,"/").concat(this.world)}},{key:"getChildKeys",value:function(){var t=this.level+1,i=this.row<<1,n=this.col<<1,r=this.world;return[new e(t,i,n,r),new e(t,i,n+1,r),new e(t,i+1,n,r),new e(t,i+1,n+1,r)]}},{key:"compareRowMajor",value:function(e){return this.row<e.row?-1:this.row>e.row?1:this.col<e.col?-1:this.col>e.col?1:0}}],[{key:"getId",value:function(e,t,i,n){return"object"==typeof e?"".concat(e.level,"/").concat(e.row,"/").concat(e.col,"/").concat(e.world):"".concat(e,"/").concat(t,"/").concat(i,"/").concat(n)}}]),e}();s.pool=new l.Z(s,null,null,25,50)},32344:function(e,t,i){i.d(t,{Z:function(){return m}});var n=i(15671),r=i(43144),o=i(60136),l=i(29388),s=i(27366),a=i(7138),u=i(92026),c=i(49861),h=(i(93169),i(32718),i(84936),i(69912)),f=i(13611),v=i(38164);var d=new Set,y=[],p=new Map,g=[0,0],_=function(e){(0,o.Z)(i,e);var t=(0,l.Z)(i);function i(e){var r;return(0,n.Z)(this,i),(r=t.call(this,e))._keyToItem=new Map,r.concurrency=6,r.strategy="scale-first",r.tileInfoView=null,r}return(0,r.Z)(i,[{key:"initialize",value:function(){var e=this,t=this.concurrency,i=this.process,n=this.strategy;this._queue=new v.e({concurrency:t,process:function(t,n){var r=e._keyToItem.get(t);return i(r,{signal:n})},peeker:"scale-first"===n?function(t){return e._peekByScaleFirst(t)}:function(t){return e._peekByCenterFirst(t)}})}},{key:"destroy",value:function(){this.clear(),this._queue=(0,u.SC)(this._queue)}},{key:"length",get:function(){return this._queue?this._queue.length:0}},{key:"onGoingCount",get:function(){return this._keyToItem.size}},{key:"abort",value:function(e){var t="string"==typeof e?e:e.id;this._queue.abort(t)}},{key:"clear",value:function(){this._queue.clear(),this._keyToItem.clear()}},{key:"has",value:function(e){return"string"==typeof e?this._keyToItem.has(e):this._keyToItem.has(e.id)}},{key:"isOngoing",value:function(e){var t="string"==typeof e?e:e.id;return this.has(t)&&this._queue.isOngoing(t)}},{key:"pause",value:function(){this._queue.pause()}},{key:"push",value:function(e){var t=this,i=e.key.id;if(this._queue.has(i))return this._queue.get(i);var n=this._queue.push(i),r=function(){t._keyToItem.delete(i)};return this._keyToItem.set(i,e),n.then(r,r),n}},{key:"reset",value:function(){this._queue.reset()}},{key:"resume",value:function(){this._queue.resume()}},{key:"_peekByScaleFirst",value:function(e){var t=this;if(!this.state)return e.values().next().value;var i=this.tileInfoView,n=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY;e.forEach((function(e){var i=t._keyToItem.get(e),o=t.tileInfoView.getTileScale(i.key);p.has(o)||(p.set(o,[]),n=Math.max(o,n),r=Math.min(o,r)),p.get(o).push(i.key),d.add(o)}));var o=this.state.scale;p.has(o)||(function(e,t){e.length=0,t.forEach((function(t){return e.push(t)}))}(y,d),y.sort((function(e,t){return e-t})),o=y.reduce((function(e,t){return Math.abs(t-o)<Math.abs(e-o)?t:e}),y[0])),o=Math.min(o,n),o=Math.max(o,r);var l=p.get(o),s=i.getClosestInfoForScale(o),a=s.getColumnForX(this.state.center[0]),u=s.getRowForY(this.state.center[1]);return l.sort((function(e,t){var i=s.denormalizeCol(e.col,e.world),n=s.denormalizeCol(t.col,t.world);return Math.sqrt((a-i)*(a-i)+(u-e.row)*(u-e.row))-Math.sqrt((a-n)*(a-n)+(u-t.row)*(u-t.row))})),d.clear(),p.clear(),l[0].id}},{key:"_peekByCenterFirst",value:function(e){var t=this;if(!this.state)return e.values().next().value;var i,n=this.tileInfoView,r=this.state.center,o=Number.POSITIVE_INFINITY;return e.forEach((function(e){var l=t._keyToItem.get(e);n.getTileCoords(g,l.key);var s=(0,f.TE)(g,r);s<o&&(o=s,i=l.key)})),i.id}}]),i}(a.default);(0,s._)([(0,c.Cb)({constructOnly:!0})],_.prototype,"concurrency",void 0),(0,s._)([(0,c.Cb)({constructOnly:!0})],_.prototype,"process",void 0),(0,s._)([(0,c.Cb)()],_.prototype,"state",void 0),(0,s._)([(0,c.Cb)({constructOnly:!0})],_.prototype,"strategy",void 0),(0,s._)([(0,c.Cb)({constructOnly:!0})],_.prototype,"tileInfoView",void 0);var m=_=(0,s._)([(0,h.j)("esri.views.2d.tiling.TileQueue")],_)},85269:function(e,t,i){i.d(t,{Z:function(){return p}});var n=i(29439),r=i(37762),o=i(15671),l=i(43144),s=i(65156),a=i(13611),u=function(){function e(t,i,n){(0,o.Z)(this,e),this.maxSize=t,this._tileInfoView=i,this._removedFunc=n,this._tilePerId=new Map,this._tileKeysPerLevel=[]}return(0,l.Z)(e,[{key:"clear",value:function(){this._tilePerId.clear(),this._tileKeysPerLevel=[]}},{key:"has",value:function(e){return this._tilePerId.has(e)}},{key:"get",value:function(e){return this._tilePerId.get(e)}},{key:"pop",value:function(e){var t=this._tilePerId.get(e);if(t){var i=t.key.level,n=this._tileKeysPerLevel[i];c(this._tilePerId,e);for(var r=0;r<n.length;r++)if(n[r].id===e){n.splice(r,1);break}return t.visible=!0,t}}},{key:"add",value:function(e){e.visible=!1;var t=e.key,i=t.id;if(!this._tilePerId.has(i)){this._tilePerId.set(i,e);var n=t.level;this._tileKeysPerLevel[n]||(this._tileKeysPerLevel[n]=[]),this._tileKeysPerLevel[n].push(t)}}},{key:"prune",value:function(e,t,i){var n=this._tilePerId.size;if(!(n<=this.maxSize)){for(var r=this._tileKeysPerLevel.length-1;n>this.maxSize&&r>=0;)r!==e&&(n=this._pruneAroundCenterTile(n,t,i,r)),r--;n>this.maxSize&&(n=this._pruneAroundCenterTile(n,t,i,e))}}},{key:"_pruneAroundCenterTile",value:function(e,t,i,n){var r=this._tileKeysPerLevel[n];if(!r||0===r.length)return e;var o=this._tileInfoView.tileInfo,l=o.size,s=o.origin,u=i*l[0],c=i*l[1],h=[0,0],f=[0,0];for(r.sort((function(e,i){return h[0]=s.x+u*(e.col+.5),h[1]=s.y-c*(e.row+.5),f[0]=s.x+u*(i.col+.5),f[1]=s.y-c*(i.row+.5),(0,a.bI)(h,t)-(0,a.bI)(f,t)}));r.length>0;){var v=r.pop();if(this._removeTile(v.id),--e===this.maxSize)break}return e}},{key:"_removeTile",value:function(e){var t=this._tilePerId.get(e);this._removedFunc&&t&&this._removedFunc(t),c(this._tilePerId,e)}}]),e}();function c(e,t){e.delete(t)}var h=i(48790),f=new(i(73828).Z)(0,0,0,0),v=new Map,d=[],y=[],p=function(){function e(t){var i=this;(0,o.Z)(this,e),this._previousScale=Number.POSITIVE_INFINITY,this.cachePolicy="keep",this.coveragePolicy="closest",this.resampling=!0,this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=t.acquireTile,this.releaseTile=t.releaseTile,this.tileInfoView=t.tileInfoView,null!=t.resampling&&(this.resampling=t.resampling),t.cachePolicy&&(this.cachePolicy=t.cachePolicy),t.coveragePolicy&&(this.coveragePolicy=t.coveragePolicy),null!=t.buffer&&(this.buffer=t.buffer),t.cacheSize&&(this._tileCache=new u(t.cacheSize,this.tileInfoView,(function(e){i.releaseTile(e)})))}return(0,l.Z)(e,[{key:"destroy",value:function(){this.tileIndex.clear()}},{key:"update",value:function(e){var t,i=this.resampling,o=this.tileIndex,l=e.state,s=l.scale,a=l.center,u=l.resolution,c=this.tileInfoView,p=c.minScale,g=c.maxScale,_=!e.stationary&&s>this._previousScale;if(this._previousScale=s,!i&&(s>p||s<g))return this.tiles.length=0,void this.clear();var m=this.tileInfoView.getTileCoverage(e.state,this.buffer,this.resampling,this.coveragePolicy);if(!m)return this.tiles.length=0,void this.clear();var w=m.spans,k=m.lodInfo,b=k.level;this.tiles.length=0,o.forEach((function(e){return e.visible=!0}));var I=0,M=0;if(w.length>0){var x,S=(0,r.Z)(w);try{for(S.s();!(x=S.n()).done;)for(var C=x.value,Z=C.row,T=C.colFrom,z=C.colTo,F=T;F<=z;F++){I++;var P=f.set(b,Z,k.normalizeCol(F),k.getWorldForColumn(F)).id,R=o.get(P);if(R)R.isReady?(v.set(P,R),M++):_||this._addParentTile(P,v);else{var O;if(null!==(O=this._tileCache)&&void 0!==O&&O.has(P)){if(R=this._tileCache.pop(P),this.tileIndex.set(P,R),R.isReady){v.set(P,R),M++;continue}}else R=this.acquireTile(f),this.tileIndex.set(P,R);_||this._addParentTile(P,v)}}}catch(te){S.e(te)}finally{S.f()}}var q,L=M===I,N=(0,r.Z)(o);try{for(N.s();!(q=N.n()).done;){var A=(0,n.Z)(q.value,2),B=A[0],E=A[1];if(!v.has(B)){f.set(B);var j=this.tileInfoView.intersects(m,f),V="purge"===this.cachePolicy?f.level!==b:f.level>b;!j||!_&&L?!V&&j||d.push(E):E.isReady?V&&"purge"===this.cachePolicy&&this._hasReadyAncestor(f,b)?d.push(E):y.push(E):V&&d.push(E)}}}catch(te){N.e(te)}finally{N.f()}for(var W=0,H=y;W<H.length;W++){var Y=H[W];Y.isReady&&v.set(Y.key.id,Y)}for(var U=0,J=d;U<J.length;U++){var X=J[U];this._tileCache?this._tileCache.add(X):this.releaseTile(X),o.delete(X.key.id)}var D,G=(0,r.Z)(v.values());try{for(G.s();!(D=G.n()).done;){var K=D.value;this.tiles.push(K)}}catch(te){G.e(te)}finally{G.f()}var Q,$=(0,r.Z)(o.values());try{for($.s();!(Q=$.n()).done;){var ee=Q.value;v.has(ee.key.id)||(ee.visible=!1)}}catch(te){$.e(te)}finally{$.f()}null!==(t=this._tileCache)&&void 0!==t&&t.prune(b,a,u),h.Z.pool.release(m),y.length=0,d.length=0,v.clear()}},{key:"clear",value:function(){var e,t=this.tileIndex,i=(0,r.Z)(t.values());try{for(i.s();!(e=i.n()).done;){var n=e.value;this.releaseTile(n)}}catch(o){i.e(o)}finally{i.f()}t.clear()}},{key:"refresh",value:function(e){var t,i,n=(0,r.Z)(this.tileIndex.values());try{for(n.s();!(i=n.n()).done;){var o=i.value;this.tiles.includes(o)?e(o):d.push(o)}}catch(u){n.e(u)}finally{n.f()}for(var l=0,s=d;l<s.length;l++){var a=s[l];this.releaseTile(a),this.tileIndex.delete(a.key.id)}null===(t=this._tileCache)||void 0===t||t.clear()}},{key:"updateCacheSize",value:function(e){this._tileCache&&(this._tileCache.maxSize=e)}},{key:"_addParentTile",value:function(e,t){for(var i=e,n=null;i=this.tileInfoView.getTileParentId(i);){var r,o,l;if(this.tileIndex.has(i)){if(null!==(l=n=this.tileIndex.get(i))&&void 0!==l&&l.isReady){t.has(n.key.id)||t.set(n.key.id,n);break}}else if(null!==(r=this._tileCache)&&void 0!==r&&r.has(i)&&(n=this._tileCache.pop(i),this.tileIndex.set(i,n),null!==(o=n)&&void 0!==o&&o.isReady)){t.has(n.key.id)||t.set(n.key.id,n);break}}}},{key:"_hasReadyAncestor",value:function(e,t){var i=(0,s.Ue)();this.tileInfoView.getTileBounds(i,e,!0);var n,o=(0,r.Z)(this.tileIndex.values());try{for(o.s();!(n=o.n()).done;){var l=n.value;if(l.isReady&&l.key.level>=t&&l.key.level<e.level){var a=(0,s.Ue)();if(this.tileInfoView.getTileBounds(a,l.key,!0),(0,s.r3)(a,i))return!0}}}catch(u){o.e(u)}finally{o.f()}return!1}}]),e}()},38164:function(e,t,i){i.d(t,{e:function(){return f}});var n=i(43144),r=i(15671),o=(i(93169),i(92026)),l=i(66978),s=i(43e3),a=i(18442),u=i(99346),c=i(76432),h=(0,n.Z)((function e(t,i){(0,r.Z)(this,e),this.item=t,this.controller=i,this.promise=null})),f=function(){function e(t){(0,r.Z)(this,e),this._schedule=null,this._task=null,this._deferreds=new a.Z,this._controllers=new a.Z,this._processingItems=new a.Z,this._pausedSignal=(0,c.t)(!1),this.concurrency=1,t.concurrency&&(this.concurrency=t.concurrency),this._queue=new s.Z(t.peeker),this.process=t.process;var i=t.scheduler;t.priority&&i&&(this._task=i.registerTask(t.priority,this))}return(0,n.Z)(e,[{key:"destroy",value:function(){this.clear(),this._schedule=(0,o.hw)(this._schedule),this._task=(0,o.hw)(this._task)}},{key:"updating",get:function(){var e;return!(null===(e=this._task)||void 0===e||!e.updating)||this.running}},{key:"length",get:function(){return this._processingItems.size+this._queue.length}},{key:"abort",value:function(e){var t=this._controllers.get(e);t&&t.abort()}},{key:"clear",value:function(){this._queue.clear();var e=[];this._controllers.forEach((function(t){return e.push(t)})),this._controllers.clear(),e.forEach((function(e){return e.abort()})),this._processingItems.clear(),this._cancelNext()}},{key:"forEach",value:function(e){this._deferreds.forEach((function(t,i){return e(i)}))}},{key:"get",value:function(e){var t=this._deferreds.get(e);return t?t.promise:void 0}},{key:"isOngoing",value:function(e){return this._processingItems.has(e)}},{key:"has",value:function(e){return this._deferreds.has(e)}},{key:"pause",value:function(){this._pausedSignal.value||(this._pausedSignal.value=!0,this._cancelNext())}},{key:"push",value:function(e,t){var i=this,n=this.get(e);if(n)return n;var r=new AbortController,o=null;t&&(o=(0,l.fu)(t,(function(){return r.abort()})));var s=function(){a.remove(),null!=o&&o.remove(),i._removeItem(e),i._queue.remove(e),i._scheduleNext()},a=(0,l.$F)(r.signal,(function(){var t=i._processingItems.get(e);t&&t.controller.abort(),s(),u.reject((0,l.zE)())})),u=(0,l.hh)();return this._deferreds.set(e,u),this._controllers.set(e,r),u.promise.then(s,s),this._queue.push(e),this._scheduleNext(),u.promise}},{key:"last",value:function(){return this._queue.last()}},{key:"lastPromise",value:function(){var e=this.last();return e?this.get(e):null}},{key:"peek",value:function(){return this._queue.peek()}},{key:"popLast",value:function(){var e,t=this._queue.popLast();return t&&(null!==(e=this._deferreds.get(t))&&void 0!==e&&e.reject((0,l.zE)("Removed from queue")),this._removeItem(t)),t}},{key:"reset",value:function(){var e=[];this._processingItems.forEach((function(t){return e.push(t)})),this._processingItems.clear();for(var t=0,i=e;t<i.length;t++){var n=i[t];this._queue.push(n.item),n.controller.abort()}this._scheduleNext()}},{key:"resume",value:function(){this._pausedSignal.value&&(this._pausedSignal.value=!1,this._scheduleNext())}},{key:"takeAll",value:function(){for(var e=[];this._queue.length;)e.push(this._queue.pop());return this.clear(),e}},{key:"running",get:function(){return!this._pausedSignal.value&&this._queue.length>0&&this._processingItems.size<this.concurrency}},{key:"runTask",value:function(e){for(;!e.done&&this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),e.madeProgress()}},{key:"_removeItem",value:function(e){this._deferreds.delete(e),this._controllers.delete(e),this._processingItems.delete(e)}},{key:"_scheduleNext",value:function(){var e=this;this._task||this._pausedSignal.value||this._schedule||(this._schedule=(0,u.Os)((function(){e._schedule=null,e._next()})))}},{key:"_next",value:function(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}},{key:"_cancelNext",value:function(){this._schedule&&(this._schedule.remove(),this._schedule=null)}},{key:"_processResult",value:function(e,t){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).resolve(t))}},{key:"_processError",value:function(e,t){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).reject(t))}},{key:"_canProcessFulfillment",value:function(e){return!!this._deferreds.get(e.item)&&this._processingItems.get(e.item)===e}},{key:"_process",value:function(e){var t=this;if(null!=e){var i,n=new AbortController,r=new h(e,n);this._processingItems.set(e,r);try{i=this.process(e,n.signal)}catch(o){this._processError(r,o)}(0,l.y8)(i)?(r.promise=i,i.then((function(e){return t._processResult(r,e)}),(function(e){return t._processError(r,e)}))):this._processResult(r,i)}}},{key:"test",get:function(){}}]),e}()}}]);
//# sourceMappingURL=62417.1feb4c41.chunk.js.map