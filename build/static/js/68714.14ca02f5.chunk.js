"use strict";(self.webpackChunkreact_training=self.webpackChunkreact_training||[]).push([[68714],{84506:function(e,t,i){i.d(t,{Z:function(){return l}});var r=i(83878),a=i(59199),n=i(40181),o=i(25267);function l(e){return(0,r.Z)(e)||(0,a.Z)(e)||(0,n.Z)(e)||(0,o.Z)()}},93560:function(e,t,i){i.d(t,{k2:function(){return mt},IG:function(){return gt},W4:function(){return bt}});var r=i(1413),a=i(15671),n=i(43144),o=i(88301),l=i(61120),s=i(60136),u=i(29388),c=i(94109),p=i(80613),v=function(e){(0,s.Z)(i,e);var t=(0,u.Z)(i);function i(){var e;return(0,a.Z)(this,i),(e=t.apply(this,arguments)).overrideStencilRef=null,e.symbologyPlane=p.mH.FILL,e.postProcessingEnabled=!1,e}return(0,n.Z)(i,[{key:"postProcess",value:function(e,t){}}]),i}(function(){function e(){(0,a.Z)(this,e),this.drawPhase=p.jx.MAP|p.jx.HITTEST|p.jx.HIGHLIGHT|p.jx.DEBUG}return(0,n.Z)(e,[{key:"startup",value:function(){}},{key:"shutdown",value:function(e){}}]),e}()),f=i(15532),d=i(29660),h=i(27366),y=i(73325),m=i(52995),b=i(15135),g=i(31060),x=function(e){(0,s.Z)(i,e);var t=(0,u.Z)(i);function i(){return(0,a.Z)(this,i),t.apply(this,arguments)}return(0,n.Z)(i)}(y.Pz);(0,h._)([(0,y.xh)(0,m.Sg)],x.prototype,"pos",void 0);var w=function(e){(0,s.Z)(i,e);var t=(0,u.Z)(i);function i(){return(0,a.Z)(this,i),t.apply(this,arguments)}return(0,n.Z)(i)}(b.fz),Z=function(e){(0,s.Z)(i,e);var t=(0,u.Z)(i);function i(){return(0,a.Z)(this,i),t.apply(this,arguments)}return(0,n.Z)(i)}(y.oo);(0,h._)([(0,y.e5)(m.bv)],Z.prototype,"dotSize",void 0);var S=function(e){(0,s.Z)(i,e);var t=(0,u.Z)(i);function i(){return(0,a.Z)(this,i),t.apply(this,arguments)}return(0,n.Z)(i)}(y.oo);(0,h._)([(0,y.e5)(m.Eg)],S.prototype,"locations",void 0),(0,h._)([(0,y.e5)(m.bv)],S.prototype,"pixelRatio",void 0),(0,h._)([(0,y.e5)(m.bv)],S.prototype,"tileZoomFactor",void 0);var V=function(e){(0,s.Z)(i,e);var t=(0,u.Z)(i);function i(){return(0,a.Z)(this,i),t.apply(this,arguments)}return(0,n.Z)(i,[{key:"vertex",value:function(e){var t=new m.Tu(1,0,0,0,-1,0,0,1,1).multiply(new m.AO(e.pos.xy.divide(c.i9),1)),i=(0,m.ig)(this.draw.locations,t.xy),r=(0,m.Fp)(this.instance.dotSize.divide(2),new m.bv(1)),a=new m.bv(0);a=a.add((0,m.Nb)(i.a,new m.bv(1e-6)).multiply(2));var n=r.add(this.instance.dotSize),o=this.view.displayViewScreenMat3.multiply(new m.AO(e.pos.add(.5),1)),l=new m.T8(o.xy,a,1),s=this.instance.dotSize.divide(n),u=new m.bv(-1).divide(r.divide(n));return{glPosition:l,glPointSize:n=n.multiply(this.draw.pixelRatio.multiply(this.draw.tileZoomFactor)),color:i,ratio:s,invEdgeRatio:u}}},{key:"fragment",value:function(e){var t=(0,m.kE)(e.glPointCoord.subtract(.5)).multiply(2),i=(0,m.CW)(new m.bv(0),new m.bv(1),e.invEdgeRatio.multiply(t.subtract(e.ratio)).add(1)),r=new y.Qt;return r.glFragColor=e.color.multiply(i),r}}]),i}(y.ri);(0,h._)([(0,y.e5)(Z)],V.prototype,"instance",void 0),(0,h._)([(0,y.e5)(S)],V.prototype,"draw",void 0),(0,h._)([(0,y.e5)(g.C)],V.prototype,"view",void 0),(0,h._)([(0,h.a)(0,(0,y.qH)(x))],V.prototype,"vertex",null),(0,h._)([(0,h.a)(0,(0,y.qH)(w))],V.prototype,"fragment",null);var _=i(19812),z=i(34130),T=function(e){(0,s.Z)(i,e);var t=(0,u.Z)(i);function i(){return(0,a.Z)(this,i),t.apply(this,arguments)}return(0,n.Z)(i)}(b.HN);(0,h._)([(0,y.xh)(3,m.bv)],T.prototype,"inverseArea",void 0);b.fz;var k=function(e){(0,s.Z)(i,e);var t=(0,u.Z)(i);function i(){return(0,a.Z)(this,i),t.apply(this,arguments)}return(0,n.Z)(i)}(y.oo);(0,h._)([(0,y.e5)(m.v8.ofType(m.T8,2))],k.prototype,"isActive",void 0),(0,h._)([(0,y.e5)(m.v8.ofType(m.T8,8))],k.prototype,"colors",void 0),(0,h._)([(0,y.e5)(m.bv)],k.prototype,"dotValue",void 0);var A=function(e){(0,s.Z)(i,e);var t=(0,u.Z)(i);function i(){return(0,a.Z)(this,i),t.apply(this,arguments)}return(0,n.Z)(i)}(y.oo);(0,h._)([(0,y.e5)(m.Eg)],A.prototype,"dotTexture0",void 0),(0,h._)([(0,y.e5)(m.Eg)],A.prototype,"dotTexture1",void 0),(0,h._)([(0,y.e5)(m.bv)],A.prototype,"tileZoomFactor",void 0),(0,h._)([(0,y.e5)(m.bv)],A.prototype,"pixelRatio",void 0),(0,h._)([(0,y.e5)(m.bv)],A.prototype,"tileDotsOverArea",void 0);var F=function(e){(0,s.Z)(i,e);var t=(0,u.Z)(i);function i(){return(0,a.Z)(this,i),t.apply(this,arguments)}return(0,n.Z)(i,[{key:"_dotThreshold",value:function(e,t,i){return e.divide(t).divide(i)}},{key:"vertex",value:function(e){var t=new m.Tu(2/c.i9,0,0,0,-2/c.i9,0,-1,1,1).multiply(new m.AO(e.pos,1)),i=this.clip(e.id),r=new m.T8(t.xy,i,1),a=this.storage.getVVData(e.id).multiply(this.instance.isActive.get(0)).multiply(e.inverseArea),n=this.storage.getDataDrivenData0(e.id).multiply(this.instance.isActive.get(1)).multiply(e.inverseArea),o=this.draw.tileZoomFactor.multiply(c.i9).divide(this.draw.pixelRatio),l=this._dotThreshold(a,this.instance.dotValue,this.draw.tileDotsOverArea),s=this._dotThreshold(n,this.instance.dotValue,this.draw.tileDotsOverArea),u=e.pos.add(.5).divide(o);return{glPosition:r,color:new m.T8(0,0,0,0),textureCoords:u,thresholds0:l,thresholds1:s}}},{key:"fragment",value:function(e){var t,i=new y.Qt,r=(0,m.ig)(this.draw.dotTexture0,e.textureCoords),a=(0,m.ig)(this.draw.dotTexture1,e.textureCoords),n=e.thresholds0.subtract(r),o=e.thresholds1.subtract(a),l=m.yb.fromColumns(this.instance.colors[0],this.instance.colors[1],this.instance.colors[2],this.instance.colors[3]),s=m.yb.fromColumns(this.instance.colors[4],this.instance.colors[5],this.instance.colors[6],this.instance.colors[7]);if(this.blending){var u=(0,m.Nb)(new m.bv(0),n),c=(0,m.Nb)(new m.bv(0),o),p=(0,m.AK)(u,n).add((0,m.AK)(c,o)),v=(0,m.Nb)(p,new m.bv(0)),f=new m.bv(1).subtract(v),d=p.add(v),h=n.multiply(u).divide(d),b=o.multiply(c).divide(d),g=l.multiply(h).add(s.multiply(b));t=f.multiply(g)}else{var x=(0,m.Fp)((0,z.X3)(n),(0,z.X3)(o)),w=(0,m.Nb)(x,new m.bv(0)),Z=new m.bv(1).subtract(w),S=(0,m.Nb)(x,n),V=(0,m.Nb)(x,o),_=l.multiply(S).add(s.multiply(V));t=Z.multiply(_)}return i.glFragColor=t,i}},{key:"hittest",value:function(e){return(0,_.Oz)(this.hittestRequest)}}]),i}(b.Ie);(0,h._)([y.Ou],F.prototype,"blending",void 0),(0,h._)([(0,y.e5)(k)],F.prototype,"instance",void 0),(0,h._)([(0,y.e5)(A)],F.prototype,"draw",void 0),(0,h._)([(0,h.a)(0,(0,y.qH)(T))],F.prototype,"vertex",null),(0,h._)([(0,h.a)(0,(0,y.qH)(b.fz))],F.prototype,"fragment",null);var O,M=i(84936),P=i(37762),C=i(4942),I=i(8548),R=(O={},(0,C.Z)(O,I.g.BYTE,1),(0,C.Z)(O,I.g.UNSIGNED_BYTE,1),(0,C.Z)(O,I.g.SHORT,2),(0,C.Z)(O,I.g.UNSIGNED_SHORT,2),(0,C.Z)(O,I.g.HALF_FLOAT,2),(0,C.Z)(O,I.g.INT,4),(0,C.Z)(O,I.g.UNSIGNED_INT,4),(0,C.Z)(O,I.g.FLOAT,4),O),D=i(44070),E=i(45412),H=i(61109),L=function(){function e(t,i){(0,a.Z)(this,e),this._boundPart=null;var n,o=[],l=(0,P.Z)(i.vertex);try{for(l.s();!(n=l.n()).done;){var s=n.value,u=D.f.createVertex(t,I.l1.STATIC_DRAW,s);o.push(u)}}catch(K){l.e(K)}finally{l.f()}var c,p=[],v=(0,P.Z)(i.index||[]);try{for(v.s();!(c=v.n()).done;){var f=c.value,d=D.f.createIndex(t,I.l1.STATIC_DRAW,f);p.push(d)}}catch(K){v.e(K)}finally{v.f()}this.groups=[];var h,y=(0,P.Z)(i.groups);try{for(y.s();!(h=y.n()).done;){var m=h.value,b=void 0;if(null!=m.index){if(!i.index)throw new Error("No index data.");var g=i.index[m.index].BYTES_PER_ELEMENT;2===g?b=I.g.UNSIGNED_SHORT:4===g&&(b=I.g.UNSIGNED_INT)}var x,w=null!=m.index?p[m.index]:null,Z=new Map,S={},V={},_=(0,P.Z)(m.attributes);try{for(_.s();!(x=_.n()).done;){var z=x.value,T=z.name,k=z.count,A=z.type,F=z.offset,O=z.normalized,M=z.divisor,C=z.stride,R=z.vertex,L=z.location,B="vertex-buffer-".concat(R),N=S[B];N||(N=S[B]=[]);var U=new H.G(T,k,A,F,C,O,M);N.push(U),Z.set(T,L),V[B]=o[R]}}catch(K){_.e(K)}finally{_.f()}var q=new E.U(t,Z,S,V,w);this.groups.push((0,r.Z)((0,r.Z)({},m),{},{vertexArray:q,locations:Z,layout:S,indexing:b}))}}catch(K){y.e(K)}finally{y.f()}this.parts=i.parts}return(0,n.Z)(e,[{key:"bind",value:function(e,t){this._boundPart=t;var i=this.parts[this._boundPart].group,r=this.groups[i].vertexArray;e.bindVAO(r)}},{key:"draw",value:function(e){if(null==this._boundPart)throw new Error("Mesh.bind() has not been called.");var t=this.parts[this._boundPart],i=t.start,r=t.count,a=this.parts[this._boundPart].group,n=this.groups[a],o=n.indexing,l=n.primitive;o?e.drawElements(l,r,o,i*R[o]):e.drawArrays(l,i,r)}},{key:"unbind",value:function(e){this._boundPart=null,e.bindVAO(null)}},{key:"destroy",value:function(){var e,t=(0,P.Z)(this.groups);try{for(t.s();!(e=t.n()).done;){e.value.vertexArray.dispose()}}catch(i){t.e(i)}finally{t.f()}}}]),e}(),B=i(89226),N=function(e){(0,s.Z)(i,e);var t=(0,u.Z)(i);function i(e,r,n){var o;return(0,a.Z)(this,i),(o=t.call(this,e,r)).layout=n,o}return(0,n.Z)(i,[{key:"bind",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,o.Z)((0,l.Z)(i.prototype),"bind",this).call(this,e,t)}}],[{key:"create",value:function(e,t){var r=[],a=t.layout,n=a.stride,o=a.hash;if(null==n){n=0;var l,s=(0,P.Z)(t.layout.attributes);try{for(s.s();!(l=s.n()).done;){var u=l.value,c=u.count,p=u.type;if(null!=u.offset)throw new Error("Stride cannot be computed automatically when attribute offsets are supplied explicitly.");n+=c*R[p]}}catch(T){s.e(T)}finally{s.f()}}var v,f=0,d=0,h=(0,P.Z)(t.layout.attributes);try{for(h.s();!(v=h.n()).done;){var y=v.value,m=y.count,b=y.name,g=y.offset,x=y.type,w=y.normalized;null!=g&&(d=g);var Z={name:b,location:f,vertex:0,count:m,type:x,offset:d,stride:n,divisor:0,normalized:null!=w&&w};r.push(Z),f++,d+=m*R[x]}}catch(T){h.e(T)}finally{h.f()}var S={attributes:r,primitive:t.primitive};null!=t.index&&(S.index=0);var V=t.count;if(null==V&&(V=t.index?t.index.length:t.vertex.byteLength/n,Math.floor(V)!==V))throw new Error("The byte length of vertex data must be an exact multiple of the stride, which is ".concat(n,"."));var _={start:0,count:V,group:0,primitive:t.primitive},z={vertex:[t.vertex],parts:[_],groups:[S]};return null!=t.index&&(z.index=[t.index]),null==o&&(o=(0,B.ig)(r)),new i(e,z,{hash:o,attributes:r,stride:n})}}]),i}(L),U=i(53634),q=i(15880),K=i(3479),G=i(57808),W=i(52311),X=function(){function e(){(0,a.Z)(this,e),this._dotTextureSize=0,this._dotTextures=null,this._dotMesh=null}return(0,n.Z)(e,[{key:"destroy",value:function(){this._disposeTextures(),this._dotFBO&&this._dotFBO.dispose(),this._dotMesh&&this._dotMesh.destroy()}},{key:"getFBO",value:function(e){if(null==this._dotFBO){var t=c.i9,i=c.i9,r=new W.X(t,i);r.samplingMode=I.cw.NEAREST,r.wrapMode=I.e8.CLAMP_TO_EDGE;var a=new q.r(e,new K.Y(I.Tg.DEPTH_STENCIL,t,i));this._dotFBO=new U.X(e,r,a)}return this._dotFBO}},{key:"getDotDensityMesh",value:function(e){if(null==this._dotMesh){for(var t=c.i9,i=t*t,r=new Int16Array(2*i),a=0;a<t;a++)for(var n=0;n<t;n++)r[2*(n+a*t)]=n,r[2*(n+a*t)+1]=a;var o=[{count:2,type:I.g.UNSIGNED_SHORT,name:"a_position",offset:0}],l={hash:(0,B.ig)(o),attributes:o,stride:4};this._dotMesh=N.create(e,{primitive:I.MX.POINTS,vertex:r,count:i,layout:l})}return this._dotMesh}},{key:"getDotDensityTextures",value:function(e,t,i){if(this._dotTextureSize===t&&this._seed===i||(this._disposeTextures(),this._dotTextureSize=t,this._seed=i),null===this._dotTextures){var r=new M.Z(i);this._dotTextures=[this._allocDotDensityTexture(e,t,r),this._allocDotDensityTexture(e,t,r)]}return this._dotTextures}},{key:"_disposeTextures",value:function(){if(this._dotTextures){for(var e=0;e<this._dotTextures.length;e++)this._dotTextures[e].dispose();this._dotTextures=null}}},{key:"_allocDotDensityTexture",value:function(e,t,i){for(var r=new Float32Array(t*t*4),a=0;a<r.length;a++)r[a]=i.getFloat();var n=new W.X;return n.dataType=I.Br.FLOAT,n.samplingMode=I.cw.NEAREST,n.width=t,n.height=t,new G.x(e,n,r)}}]),e}(),Y=i(93787),j=function(e){(0,s.Z)(i,e);var t=(0,u.Z)(i);function i(){var e;return(0,a.Z)(this,i),(e=t.apply(this,arguments)).type=d.t.DotDensity,e.shaders={polygon:new F,point:new V,fill:new Y.C},e._resources=new Map,e}return(0,n.Z)(i,[{key:"render",value:function(e,t){(0,f.il)(e)||(0,f.VF)(e)?this._renderPolygons(e,t):this._renderDotDensity(e,t)}},{key:"_renderPolygons",value:function(e,t){var i=e.painter;i.setShader({shader:this.shaders.fill,uniforms:(0,r.Z)((0,r.Z)({},(0,f.l5)(e,t.target)),{},{visualVariableColor:null,visualVariableOpacity:null}),defines:(0,r.Z)({},(0,f.rO)(e)),optionalAttributes:{zoomRange:!1},useComputeBuffer:(0,f.VF)(e)}),i.setPipelineState((0,f.H6)(e)),i.submitDraw(e,t)}},{key:"_renderDotDensity",value:function(e,t){var i=e.context,a=e.painter,n=e.requiredLevel,o=t.instance.getInput().uniforms,l=this._getOrCreateResourcesRecord(i),s=l.getDotDensityTextures(i,c.i9,o.seed),u=1/Math.pow(2,n-t.target.key.level),p=c.i9,v=p*window.devicePixelRatio*p*window.devicePixelRatio,d=1/u*(1/u),h=o.dotScale?e.state.scale/o.dotScale:1,y=o.dotValue*h*d;a.setShader({shader:this.shaders.polygon,uniforms:(0,r.Z)((0,r.Z)({},(0,f.l5)(e,t.target)),{},{instance:{isActive:o.isActive,colors:o.colors,dotValue:Math.max(1,y)},draw:{dotTexture0:{unit:c.Of,texture:s[0]},dotTexture1:{unit:c.vk,texture:s[1]},tileZoomFactor:u,pixelRatio:window.devicePixelRatio,tileDotsOverArea:v/(c.i9*window.devicePixelRatio*c.i9*window.devicePixelRatio)}}),defines:(0,r.Z)((0,r.Z)({},(0,f.rO)(e)),{},{blending:o.blending}),optionalAttributes:{},useComputeBuffer:!1}),a.setPipelineState((0,f.H6)(e));var m=i.getViewport();i.setViewport(0,0,c.i9,c.i9);var b=i.getBoundFramebufferObject(),g=l.getFBO(i);i.bindFramebuffer(g),i.setClearColor(0,0,0,0),a.setPipelineState({color:{write:[!0,!0,!0,!0],blendMode:"composite"},depth:!1,stencil:!1}),a.updatePipelineState(i),i.clear(I.lk.COLOR_BUFFER_BIT),a.submitDraw(e,t),i.bindFramebuffer(b),i.setViewport(m.x,m.y,m.width,m.height);var x=l.getFBO(i).colorTexture;a.setShader({shader:this.shaders.point,uniforms:{view:(0,f.yF)(e,t.target),instance:{dotSize:o.dotSize},draw:{locations:{unit:c.Of,texture:x},tileZoomFactor:1,pixelRatio:window.devicePixelRatio}},defines:(0,r.Z)({},(0,f.rO)(e)),optionalAttributes:{},useComputeBuffer:!1}),a.setPipelineState({color:{write:[!0,!0,!0,!0],blendMode:"composite"},depth:!1,stencil:!1}),a.submitDrawMesh(i,l.getDotDensityMesh(i))}},{key:"shutdown",value:function(e){var t;(0,o.Z)((0,l.Z)(i.prototype),"shutdown",this).call(this,e),null!==(t=this._resources.get(e))&&void 0!==t&&t.destroy(),this._resources.delete(e)}},{key:"_getOrCreateResourcesRecord",value:function(e){var t=this._resources.get(e);return null==t&&(t=new X,this._resources.set(e,t)),t}}]),i}(v),J=i(26837),Q=function(e){(0,s.Z)(i,e);var t=(0,u.Z)(i);function i(){var e;return(0,a.Z)(this,i),(e=t.apply(this,arguments)).type=d.t.ComplexFill,e.shaders={geometry:new J.LU},e}return(0,n.Z)(i,[{key:"render",value:function(e,t){var i=e.context,a=e.painter,n=t.instance.getInput();a.setShader({shader:this.shaders.geometry,uniforms:(0,r.Z)((0,r.Z)((0,r.Z)({},(0,f.vY)(e,t.target,n.uniforms)),(0,f.l5)(e,t.target)),{},{mosaicInfo:a.textureManager.getMosaicInfo(i,t.textureKey),localTileOffset:(0,f.wb)(t.target)}),defines:(0,r.Z)({},(0,f.rO)(e)),optionalAttributes:n.optionalAttributes,useComputeBuffer:(0,f.VF)(e)}),a.setPipelineState((0,f.H6)(e)),a.submitDraw(e,t)}}]),i}(v);function $(e){var t=1/e;return{antialiasing:t,blur:0+t}}var ee=i(78825),te=function(e){(0,s.Z)(i,e);var t=(0,u.Z)(i);function i(){var e;return(0,a.Z)(this,i),(e=t.apply(this,arguments)).type=d.t.ComplexOutlineFill,e.shaders={geometry:new ee.Nz},e}return(0,n.Z)(i,[{key:"render",value:function(e,t){var i=e.context,a=e.painter,n=e.pixelRatio,o=t.instance.getInput();a.setShader({shader:this.shaders.geometry,uniforms:(0,r.Z)((0,r.Z)((0,r.Z)({},(0,f.vY)(e,t.target,o.uniforms)),(0,f.l5)(e,t.target)),{},{antialiasingControls:$(n),mosaicInfo:a.textureManager.getMosaicInfo(i,t.textureKey),localTileOffset:(0,f.wb)(t.target)}),defines:(0,r.Z)({},(0,f.rO)(e)),optionalAttributes:o.optionalAttributes,useComputeBuffer:(0,f.VF)(e)}),a.setPipelineState((0,f.H6)(e)),a.submitDraw(e,t)}}]),i}(v),ie=function(e){(0,s.Z)(i,e);var t=(0,u.Z)(i);function i(){var e;return(0,a.Z)(this,i),(e=t.apply(this,arguments)).type=d.t.Fill,e.shaders={geometry:new Y.C},e}return(0,n.Z)(i,[{key:"render",value:function(e,t){var i=e.painter,a=t.instance.getInput();i.setShader({shader:this.shaders.geometry,uniforms:(0,r.Z)((0,r.Z)({},(0,f.vY)(e,t.target,a.uniforms)),(0,f.l5)(e,t.target)),defines:(0,f.rO)(e),optionalAttributes:a.optionalAttributes,useComputeBuffer:(0,f.VF)(e)}),i.setPipelineState((0,f.H6)(e)),i.submitDraw(e,t)}}]),i}(v),re=i(48156),ae=function(e){(0,s.Z)(i,e);var t=(0,u.Z)(i);function i(){var e;return(0,a.Z)(this,i),(e=t.apply(this,arguments)).type=d.t.OutlineFill,e.shaders={geometry:new re.py},e}return(0,n.Z)(i,[{key:"render",value:function(e,t){var i=e.painter,a=e.pixelRatio,n=t.instance.getInput();i.setShader({shader:this.shaders.geometry,uniforms:(0,r.Z)((0,r.Z)((0,r.Z)({},(0,f.vY)(e,t.target,n.uniforms)),(0,f.l5)(e,t.target)),{},{antialiasingControls:$(a)}),defines:(0,r.Z)({},(0,f.rO)(e)),optionalAttributes:n.optionalAttributes,useComputeBuffer:(0,f.VF)(e)}),i.setPipelineState((0,f.H6)(e)),i.submitDraw(e,t)}}]),i}(v),ne=i(44405),oe=function(e){(0,s.Z)(i,e);var t=(0,u.Z)(i);function i(){var e;return(0,a.Z)(this,i),(e=t.apply(this,arguments)).type=d.t.PatternFill,e.shaders={geometry:new ne.lA},e}return(0,n.Z)(i,[{key:"render",value:function(e,t){var i=e.context,a=e.painter,n=t.instance.getInput();a.setShader({shader:this.shaders.geometry,uniforms:(0,r.Z)((0,r.Z)((0,r.Z)({},(0,f.vY)(e,t.target,n.uniforms)),(0,f.l5)(e,t.target)),{},{mosaicInfo:a.textureManager.getMosaicInfo(i,t.textureKey),localTileOffset:(0,f.wb)(t.target)}),defines:(0,r.Z)({},(0,f.rO)(e)),optionalAttributes:n.optionalAttributes,useComputeBuffer:(0,f.VF)(e)}),a.setPipelineState((0,f.H6)(e)),a.submitDraw(e,t)}}]),i}(v),le=i(44461),se=function(e){(0,s.Z)(i,e);var t=(0,u.Z)(i);function i(){var e;return(0,a.Z)(this,i),(e=t.apply(this,arguments)).type=d.t.PatternOutlineFill,e.shaders={geometry:new le.Zd},e}return(0,n.Z)(i,[{key:"render",value:function(e,t){var i=e.context,a=e.painter,n=e.pixelRatio,o=t.instance.getInput();a.setShader({shader:this.shaders.geometry,uniforms:(0,r.Z)((0,r.Z)((0,r.Z)({},(0,f.vY)(e,t.target,o.uniforms)),(0,f.l5)(e,t.target)),{},{antialiasingControls:$(n),mosaicInfo:a.textureManager.getMosaicInfo(i,t.textureKey),localTileOffset:(0,f.wb)(t.target)}),defines:(0,r.Z)({},(0,f.rO)(e)),optionalAttributes:o.optionalAttributes,useComputeBuffer:(0,f.VF)(e)}),a.setPipelineState((0,f.H6)(e)),a.submitDraw(e,t)}}]),i}(v),ue=i(32718),ce=i(92026),pe=i(34552),ve=function(){function e(){(0,a.Z)(this,e)}return(0,n.Z)(e,[{key:"destroy",value:function(){this._accumulateFramebuffer=(0,ce.M2)(this._accumulateFramebuffer),this._resolveGradientTexture=(0,ce.M2)(this._resolveGradientTexture),this._prevGradientHash=null,this._qualityProfile=null}},{key:"initialized",get:function(){return null!=this._accumulateFramebuffer&&null!=this._resolveGradientTexture}},{key:"accumulateFramebuffer",get:function(){return this._accumulateFramebuffer}},{key:"resolveGradientTexture",get:function(){return this._resolveGradientTexture}},{key:"loadQualityProfile",value:function(e){if(null==this._qualityProfile){var t=(0,pe.v)(e,ue.Z.getLogger("esri.views.2d.engine.webgl.shaderGraph.techniques.heatmap.HeatmapResources"));this._qualityProfile=(0,r.Z)((0,r.Z)({},t),{},{defines:{usesHalfFloatPrecision:t.dataType!==I.Br.FLOAT}})}return this._qualityProfile}},{key:"ensureAccumulateFBO",value:function(e,t,i){if(null==this._accumulateFramebuffer){var r=this.loadQualityProfile(e),a=r.dataType,n=r.samplingMode,o=r.pixelFormat,l=r.internalFormat,s=new W.X(t,i);s.pixelFormat=o,s.internalFormat=l,s.dataType=a,s.samplingMode=n,s.wrapMode=I.e8.CLAMP_TO_EDGE;var u=new K.Y(I.Tg.DEPTH_STENCIL,t,i);this._accumulateFramebuffer=new U.X(e,s,u)}else{var c=this._accumulateFramebuffer,p=c.width,v=c.height;p===t&&v===i||this._accumulateFramebuffer.resize(t,i)}return this._accumulateFramebuffer}},{key:"ensureResolveGradientTexture",value:function(e,t,i){if(null==this._resolveGradientTexture){var r=new W.X;r.wrapMode=I.e8.CLAMP_TO_EDGE,this._resolveGradientTexture=new G.x(e,r)}else this._prevGradientHash!==t&&(this._resolveGradientTexture.resize(i.length/4,1),this._resolveGradientTexture.setData(i),this._prevGradientHash=t);return this._resolveGradientTexture}}]),e}();function fe(e){return e?.25:1}var de=function(e){(0,s.Z)(i,e);var t=(0,u.Z)(i);function i(){return(0,a.Z)(this,i),t.apply(this,arguments)}return(0,n.Z)(i)}(b.HN);(0,h._)([(0,y.xh)(5,m.Sg)],de.prototype,"offset",void 0);var he=function(e){(0,s.Z)(i,e);var t=(0,u.Z)(i);function i(){return(0,a.Z)(this,i),t.apply(this,arguments)}return(0,n.Z)(i)}(b.fz),ye=function(e){(0,s.Z)(i,e);var t=(0,u.Z)(i);function i(){return(0,a.Z)(this,i),t.apply(this,arguments)}return(0,n.Z)(i)}(y.oo);(0,h._)([(0,y.e5)(m.bv)],ye.prototype,"radius",void 0),(0,h._)([(0,y.e5)(m.bv)],ye.prototype,"isFieldActive",void 0);var me=function(e){(0,s.Z)(i,e);var t=(0,u.Z)(i);function i(){var e;return(0,a.Z)(this,i),(e=t.apply(this,arguments)).usesHalfFloatPrecision=!1,e}return(0,n.Z)(i,[{key:"vertex",value:function(e){var t=this.kernelControls,i=t.radius,a=t.isFieldActive,n=e.offset,o=a.multiply(this.storage.getVVData(e.id).x).add(new m.bv(1).subtract(a)),l=this.view.displayViewScreenMat3.multiply(new m.AO(e.pos,1)).add(this.view.displayViewMat3.multiply(new m.AO(n,0)).multiply(i)),s=this.clip(e.id);return(0,r.Z)({glPosition:new m.T8(l.xy,s,1),offset:n,fieldValue:o,color:new m.T8(0)},this.maybeRunHittest(e,{},null))}},{key:"fragment",value:function(e){var t=e.offset,i=e.fieldValue,r=(0,m.kE)(t),a=(0,m.Nb)(r,new m.bv(1)),n=new m.bv(1).subtract(r.multiply(r)),o=n.multiply(n),l=a.multiply(o).multiply(i).multiply(new m.bv(fe(this.usesHalfFloatPrecision)));return this.getFragmentOutput(new m.T8(l),e)}},{key:"hittest",value:function(e){var t=this.view,i=t.viewMat3,r=t.tileMat3,a=i.multiply(r).multiply(new m.AO(e.pos,1));return(0,_.XM)(a.xy,this.kernelControls.radius,this.hittestRequest.position)}}]),i}(b.Ie);(0,h._)([y.Ou],me.prototype,"usesHalfFloatPrecision",void 0),(0,h._)([(0,y.e5)(ye)],me.prototype,"kernelControls",void 0),(0,h._)([(0,h.a)(0,(0,y.qH)(de))],me.prototype,"vertex",null),(0,h._)([(0,h.a)(0,(0,y.qH)(he))],me.prototype,"fragment",null);var be=function(e){(0,s.Z)(i,e);var t=(0,u.Z)(i);function i(){return(0,a.Z)(this,i),t.apply(this,arguments)}return(0,n.Z)(i)}(y.Pz);(0,h._)([(0,y.xh)(0,m.Sg)],be.prototype,"pos",void 0);var ge=function(e){(0,s.Z)(i,e);var t=(0,u.Z)(i);function i(){return(0,a.Z)(this,i),t.apply(this,arguments)}return(0,n.Z)(i)}(y.XB),xe=function(e){(0,s.Z)(i,e);var t=(0,u.Z)(i);function i(){return(0,a.Z)(this,i),t.apply(this,arguments)}return(0,n.Z)(i)}(y.oo);(0,h._)([(0,y.e5)(m.Eg)],xe.prototype,"texture",void 0),(0,h._)([(0,y.e5)(m.Sg)],xe.prototype,"minAndInvRange",void 0),(0,h._)([(0,y.e5)(m.bv)],xe.prototype,"normalization",void 0);var we=function(e){(0,s.Z)(i,e);var t=(0,u.Z)(i);function i(){return(0,a.Z)(this,i),t.apply(this,arguments)}return(0,n.Z)(i)}(y.oo);(0,h._)([(0,y.e5)(m.Eg)],we.prototype,"texture",void 0);var Ze=function(e){(0,s.Z)(i,e);var t=(0,u.Z)(i);function i(){var e;return(0,a.Z)(this,i),(e=t.apply(this,arguments)).usesHalfFloatPrecision=!1,e}return(0,n.Z)(i,[{key:"vertex",value:function(e){return{glPosition:new m.T8(e.pos.multiply(2).subtract(1),1,1),uv:e.pos}}},{key:"fragment",value:function(e){var t=this.accumulatedDensity,i=this.gradient,r=(0,m.ig)(t.texture,e.uv).r.multiply(new m.bv(fe(this.usesHalfFloatPrecision)));r=(r=r.multiply(t.normalization)).subtract(t.minAndInvRange.x).multiply(t.minAndInvRange.y);var a=(0,m.ig)(i.texture,new m.Sg(r,.5)),n=new y.Qt;return n.glFragColor=new m.T8(a.rgb.multiply(a.a),a.a),n}}]),i}(y.ri);(0,h._)([y.Ou],Ze.prototype,"usesHalfFloatPrecision",void 0),(0,h._)([(0,y.e5)(xe)],Ze.prototype,"accumulatedDensity",void 0),(0,h._)([(0,y.e5)(we)],Ze.prototype,"gradient",void 0),(0,h._)([(0,h.a)(0,(0,y.qH)(be))],Ze.prototype,"vertex",null),(0,h._)([(0,h.a)(0,(0,y.qH)(ge))],Ze.prototype,"fragment",null);var Se=function(e){(0,s.Z)(i,e);var t=(0,u.Z)(i);function i(){var e;return(0,a.Z)(this,i),(e=t.apply(this,arguments)).type=d.t.Heatmap,e.shaders={accumulate:new me,resolve:new Ze},e.postProcessingEnabled=!0,e._isBound=!1,e._resources=new Map,e.overrideStencilRef=Ve,e}return(0,n.Z)(i,[{key:"shutdown",value:function(e){var t;(0,o.Z)((0,l.Z)(i.prototype),"shutdown",this).call(this,e),null!==(t=this._resources.get(e))&&void 0!==t&&t.destroy(),this._resources.delete(e),this._prevFBO=null,this._unbind()}},{key:"render",value:function(e,t){var i=e.context,a=e.painter,n=e.state,o=t.instance.getInput(),l=o.uniforms.isFieldActive,s=this._getOrCreateResourcesRecord(i),u=s.loadQualityProfile(i);if(!(0,f.il)(e)){(0,f.VF)(e)||this._bind(e,s,o),a.setShader({shader:this.shaders.accumulate,uniforms:(0,r.Z)((0,r.Z)({},(0,f.l5)(e,t.target)),{},{kernelControls:{radius:ke(o,n),isFieldActive:l?1:0}}),defines:(0,r.Z)((0,r.Z)({},(0,f.rO)(e)),u.defines),optionalAttributes:{},useComputeBuffer:(0,f.VF)(e)});var c=(0,f.VF)(e)?ze:_e;a.setPipelineState(c),a.submitDraw(e,t)}}},{key:"postProcess",value:function(e,t){if(!(0,f.VF)(e)&&!(0,f.il)(e)){var i=e.context,r=e.painter,a=this._resources.get(i);if(null!=this._prevFBO&&null!=this._prevViewport&&null!==a&&void 0!==a&&a.initialized){var n=a.loadQualityProfile(i).defines,o=t.getInput().uniforms,l=o.minDensity,s=o.maxDensity,u=o.radius,c=a.accumulateFramebuffer,p=a.resolveGradientTexture;r.setShader({shader:this.shaders.resolve,uniforms:{accumulatedDensity:{texture:{unit:8,texture:c.colorTexture},minAndInvRange:[l,1/(s-l)],normalization:3/(u*u*Math.PI)},gradient:{texture:{unit:9,texture:p}}},defines:n,optionalAttributes:{},useComputeBuffer:!1}),i.bindFramebuffer(this._prevFBO),i.setViewport(0,0,this._prevViewport.width,this._prevViewport.height),i.bindTexture(c.colorTexture,8),i.bindTexture(p,9),r.setPipelineState(Te),r.submitDrawQuad(i),this._unbind()}}}},{key:"_getOrCreateResourcesRecord",value:function(e){var t=this._resources.get(e);return null==t&&(t=new ve,this._resources.set(e,t)),t}},{key:"_unbind",value:function(){this._prevFBO=null,this._prevViewport=null,this._isBound=!1}},{key:"_bind",value:function(e,t,i){if(!this._isBound){var r=e.context,a=e.state,n=e.pixelRatio,o=r.getBoundFramebufferObject(),l=r.getViewport();this._prevFBO=o,this._prevViewport=l;var s=i.uniforms,u=s.gradient,c=s.gradientHash;t.ensureResolveGradientTexture(r,c,u);var p=l.width,v=l.height,f=function(e,t){var i=t>1.5?.25:.5;return e<1/(2*i)?1:i}(ke(i,a),n),d=p*f,h=v*f,y=t.ensureAccumulateFBO(r,d,h);r.blitFramebuffer(o,y,0,0,o.width,o.height,0,0,y.width,y.height,I.lk.STENCIL_BUFFER_BIT,I.cw.NEAREST),r.bindFramebuffer(y),r.setViewport(0,0,y.width,y.height),r.setColorMask(!0,!0,!0,!0),r.setClearColor(0,0,0,0),r.clear(I.lk.COLOR_BUFFER_BIT),this._isBound=!0}}}]),i}(v);function Ve(e){return e.key.level+1}var _e={color:{write:[!0,!0,!0,!0],blendMode:"additive"},depth:!1,stencil:{write:!1,test:{ref:Ve,compare:I.wb.GEQUAL,mask:255,op:{fail:I.xS.KEEP,zFail:I.xS.KEEP,zPass:I.xS.REPLACE}}}},ze=(0,r.Z)((0,r.Z)({},_e),{},{stencil:!1}),Te={color:{write:[!0,!0,!0,!0],blendMode:"composite"},depth:!1,stencil:!1};function ke(e,t){var i=e.uniforms,r=i.referenceScale;return i.radius*(0!==r?r/t.scale:1)}var Ae=i(17326),Fe=i(31571),Oe=i(14294),Me=i(72328),Pe=function(e){(0,s.Z)(i,e);var t=(0,u.Z)(i);function i(){return(0,a.Z)(this,i),t.apply(this,arguments)}return(0,n.Z)(i,[{key:"getVVRotationMat4",value:function(e){var t=this;return(0,m.KJ)((0,z.In)(e),m.yb.identity(),(function(){var i=t._getNormalizedAngle(e).multiply(Ae.nF),r=(0,m.O$)(i),a=(0,m.mC)(i);return new m.yb(a,r,0,0,r.multiply(new m.bv(-1)),a,0,0,0,0,1,0,0,0,0,1)}))}},{key:"getVVRotationMat3",value:function(e){var t=this;return(0,m.KJ)((0,z.In)(e),m.Tu.identity(),(function(){var i=t._getNormalizedAngle(e).multiply(Ae.nF),r=(0,m.O$)(i),a=(0,m.mC)(i);return new m.Tu(a,r,0,r.multiply(new m.bv(-1)),a,0,0,0,1)}))}},{key:"_getNormalizedAngle",value:function(e){var t=(0,m.ln)(this.rotationType,new m.bv(Ae.MO.Arithmatic));return(0,m.KJ)(t,new m.bv(90).subtract(e),e)}}]),i}(y.oo);(0,h._)([(0,y.e5)(m.bv)],Pe.prototype,"rotationType",void 0);var Ce=i(48684),Ie=i(60064),Re=i(9830),De=i(38694),Ee=i(10750),He=function(e){(0,s.Z)(i,e);var t=(0,u.Z)(i);function i(){return(0,a.Z)(this,i),t.apply(this,arguments)}return(0,n.Z)(i)}(b.HN);(0,h._)([(0,y.xh)(3,m.T8)],He.prototype,"color",void 0),(0,h._)([(0,y.xh)(4,m.Sg)],He.prototype,"offset",void 0),(0,h._)([(0,y.xh)(5,m.Sg)],He.prototype,"textureUV",void 0),(0,h._)([(0,y.xh)(6,m.bv)],He.prototype,"fontSize",void 0),(0,h._)([(0,y.xh)(7,m.bv)],He.prototype,"referenceSize",void 0),(0,h._)([(0,y.xh)(8,m.bv)],He.prototype,"haloFontSize",void 0),(0,h._)([(0,y.xh)(9,m.T8)],He.prototype,"haloColor",void 0),(0,h._)([(0,y.xh)(10,m.Sg)],He.prototype,"zoomRange",void 0),(0,h._)([(0,y.xh)(11,m.bv)],He.prototype,"clipAngle",void 0),(0,h._)([(0,y.xh)(12,m.T8)],He.prototype,"referenceSymbol",void 0);var Le=function(e){(0,s.Z)(i,e);var t=(0,u.Z)(i);function i(){return(0,a.Z)(this,i),t.apply(this,arguments)}return(0,n.Z)(i)}(y.yu);(0,h._)([(0,y.xh)(13,m.Sg)],Le.prototype,"offsetNextVertex1",void 0),(0,h._)([(0,y.xh)(14,m.Sg)],Le.prototype,"offsetNextVertex2",void 0);var Be=function(e){(0,s.Z)(i,e);var t=(0,u.Z)(i);function i(){return(0,a.Z)(this,i),t.apply(this,arguments)}return(0,n.Z)(i)}(b.fz),Ne=function(e){(0,s.Z)(i,e);var t=(0,u.Z)(i);function i(){var e;return(0,a.Z)(this,i),(e=t.apply(this,arguments)).computeAttributes={offset:["offsetNextVertex1","offsetNextVertex2"]},e.isHaloPass=!1,e.isBackgroundPass=!1,e.isLabel=!1,e}return(0,n.Z)(i,[{key:"clipLabel",value:function(e,t,i){var r=t.multiply(1.4173228346456692),a=(0,m.Wn)(this.view.rotation.subtract(r)),n=(0,m.VV)(new m.bv(360).subtract(a),a),o=new m.bv(0),l=(0,m.GW)(this.view.currentZoom.multiply(c.JS)).divide(c.JS),s=e.x,u=e.y,p=new m.bv(1).subtract((0,m.Nb)(s,l)).multiply(2),v=(0,m.Nb)(new m.bv(90),n).multiply(2),f=new m.bv(2).multiply(new m.bv(1).subtract((0,m.Nb)(l,u)));return o=(o=(o=o.add(i.multiply(p))).add(i.multiply(v))).add(f)}},{key:"vertex",value:function(e,t){var i=(0,z.qD)(e.bitset,Ae.mL),a=new m.bv(1).subtract(i),n=e.fontSize,o=n.divide(Ae.V_),l=this.isHaloPass?e.haloColor:this._getVertexColor(e),s=this.isLabel?this.storage.getAnimationValue(e.id):new m.bv(1),u=this.isLabel?l.multiply(s):l,p=this.view.displayViewScreenMat3.multiply(new m.AO(e.pos,1)),v=e.offset,f=new m.bv(1),d=m.Tu.identity(),h=new m.Sg(0);if(this.isLabel){if(!e.referenceSymbol)throw new Error("InternalError: Optional attribute 'referenceSymbol' expected for labels");var y=e.referenceSymbol,b=y.xy,g=y.z,x=this._unpackDirection(y.w),w=(0,Ee.Vm)(this,e.id,g).divide(2),Z=x.multiply(w.add(c.gj));h=b.add(Z),v=v.add(h)}else f=(0,Ee.Vm)(this,e.id,e.referenceSize).divide(e.referenceSize),n=n.multiply(f),o=o.multiply(f),v=v.multiply(f),v=(d=(0,Ee.H8)(this,e.id)).multiply(new m.AO(v,0)).xy;var S=(0,z.qD)(e.bitset,Ae.$r),V=this._getViewRotationMatrix(S).multiply(new m.AO(v,0)),_=this.isLabel?this.clipLabel(e.zoomRange,e.clipAngle,S):this.clip(e.id,e.zoomRange);_=this.isBackgroundPass?_.add(a.multiply(2)):_.add(i.multiply(2));var T=this.isLabel?(0,m.or)((0,m.tS)(_,new m.bv(1)),(0,m.ln)(s,new m.bv(0))):new m.tW(!1),k=new m.T8(p.xy.add(V.xy),_,1),A=e.textureUV.divide(this.mosaicInfo.size),F=new m.bv(0);return this.isHaloPass&&(F=e.haloFontSize.divide(o).divide(Ae.Ke)),(0,r.Z)({glPosition:k,color:u,size:o,textureUV:A,antialiasingWidth:new m.bv(.105*Ae.V_).divide(n).divide(this.view.pixelRatio),haloDistanceOffset:F},this.maybeRunHittest(e,t,{vvSizeAdjustment:f,vvRotation:d,labelOffset:h,labelClipped:T}))}},{key:"_getViewRotationMatrix",value:function(e){var t=this.view.displayViewMat3,i=this.view.displayMat3,r=new m.bv(1).subtract(e);return t.multiply(e).add(i.multiply(r))}},{key:"fragment",value:function(e){var t=new m.bv(2/8),i=new m.bv(1).subtract(t),r=(0,m.ig)(this.mosaicInfo.texture,e.textureUV).a,a=i.subtract(e.haloDistanceOffset);this.highlight&&(a=a.divide(2));var n=e.antialiasingWidth,o=(0,m.CW)(a.subtract(n),a.add(n),r);return this.getFragmentOutput(e.color.multiply(o),e)}},{key:"hittest",value:function(e,t,i){var r,a,n,o=i.vvSizeAdjustment,l=i.vvRotation,s=i.labelOffset,u=i.labelClipped;this.isLabel?(r=new m.AO(e.offset.add(s),0),a=new m.AO(t.offsetNextVertex1.add(s),0),n=new m.AO(t.offsetNextVertex2.add(s),0)):(r=l.multiply(new m.AO(e.offset.multiply(o),0)),a=l.multiply(new m.AO(t.offsetNextVertex1.multiply(o),0)),n=l.multiply(new m.AO(t.offsetNextVertex2.multiply(o),0)));var c=this.view,p=c.viewMat3,v=c.tileMat3,f=p.multiply(v).multiply(new m.AO(e.pos,1)),d=f.add(v.multiply(r)).xy,h=f.add(v.multiply(a)).xy,y=f.add(v.multiply(n)).xy,b=(0,_.P0)(this.hittestRequest.position,d.xy,h.xy,y.xy);return this.isLabel?(0,m.KJ)(u,(0,_.Oz)(this.hittestRequest),b):b}},{key:"_unpackDirection",value:function(e){var t=new m.J7(e),i=(0,m.Dg)(t,new m.J7(2)),r=(0,m.hx)(t,new m.J7(3));return new m.Sg(new m.bv(i).subtract(1),new m.bv(r).subtract(1))}},{key:"_getVertexColor",value:function(e){var t=e.color;if(this.visualVariableColor){var i=this.storage.getColorValue(e.id);t=this.visualVariableColor.getColor(i,e.color,new m.tW(!1))}if(this.visualVariableOpacity){var r=this.storage.getOpacityValue(e.id),a=this.visualVariableOpacity.getOpacity(r);t=t.multiply(a)}return t}}]),i}(b.Ie);(0,h._)([(0,y.Kw)(Oe.W)],Ne.prototype,"visualVariableColor",void 0),(0,h._)([(0,y.Kw)(Me.V)],Ne.prototype,"visualVariableOpacity",void 0),(0,h._)([(0,y.Kw)(Pe)],Ne.prototype,"visualVariableRotation",void 0),(0,h._)([(0,y.Kw)(Ce.k)],Ne.prototype,"visualVariableSizeMinMaxValue",void 0),(0,h._)([(0,y.Kw)(Ie.U)],Ne.prototype,"visualVariableSizeScaleStops",void 0),(0,h._)([(0,y.Kw)(Re.W)],Ne.prototype,"visualVariableSizeStops",void 0),(0,h._)([(0,y.Kw)(De.V)],Ne.prototype,"visualVariableSizeUnitValue",void 0),(0,h._)([(0,y.e5)(Fe.N)],Ne.prototype,"mosaicInfo",void 0),(0,h._)([y.Ou],Ne.prototype,"isHaloPass",void 0),(0,h._)([y.Ou],Ne.prototype,"isBackgroundPass",void 0),(0,h._)([y.Ou],Ne.prototype,"isLabel",void 0),(0,h._)([(0,h.a)(0,(0,y.qH)(He)),(0,h.a)(1,(0,y.qH)(Le))],Ne.prototype,"vertex",null),(0,h._)([(0,h.a)(0,(0,y.qH)(Be))],Ne.prototype,"fragment",null);var Ue=function(e){(0,s.Z)(i,e);var t=(0,u.Z)(i);function i(){var e;return(0,a.Z)(this,i),(e=t.apply(this,arguments)).type=d.t.Label,e.shaders={geometry:new Ne},e.drawPhase=p.jx.LABEL|p.jx.LABEL_ALPHA|p.jx.HITTEST,e.symbologyPlane=p.mH.TEXT,e}return(0,n.Z)(i,[{key:"render",value:function(e,t){var i=e.context,a=e.painter,n=(0,f.rO)(e),o=(0,r.Z)({},(0,f.H6)(e)),l=t.instance.getInput(),s={shader:this.shaders.geometry,uniforms:(0,r.Z)((0,r.Z)((0,r.Z)({},(0,f.vY)(e,t.target,l.uniforms)),(0,f.l5)(e,t.target)),{},{mosaicInfo:a.textureManager.getMosaicInfo(i,t.textureKey)}),defines:(0,r.Z)((0,r.Z)({},n),{},{isHaloPass:!1,isBackgroundPass:!0,isLabel:!0}),optionalAttributes:l.optionalAttributes,useComputeBuffer:(0,f.VF)(e)};a.setShader(s),a.setPipelineState(o),a.submitDraw(e,t),a.setShader((0,r.Z)((0,r.Z)({},s),{},{defines:(0,r.Z)((0,r.Z)({},n),{},{isHaloPass:!0,isBackgroundPass:!1,isLabel:!0})})),a.setPipelineState(o),a.submitDraw(e,t),a.setShader((0,r.Z)((0,r.Z)({},s),{},{defines:(0,r.Z)((0,r.Z)({},n),{},{isHaloPass:!1,isBackgroundPass:!1,isLabel:!0})})),a.setPipelineState(o),a.submitDraw(e,t)}}]),i}(v),qe=i(16661),Ke=function(e){(0,s.Z)(i,e);var t=(0,u.Z)(i);function i(){var e;return(0,a.Z)(this,i),(e=t.apply(this,arguments)).type=d.t.Line,e.shaders={geometry:new qe.Pf},e.symbologyPlane=p.mH.LINE,e}return(0,n.Z)(i,[{key:"render",value:function(e,t){var i=e.painter,a=e.pixelRatio,n=t.instance.getInput();i.setShader({shader:this.shaders.geometry,uniforms:(0,r.Z)((0,r.Z)((0,r.Z)({},(0,f.vY)(e,t.target,n.uniforms)),(0,f.l5)(e,t.target)),{},{antialiasingControls:$(a)}),defines:(0,r.Z)({},(0,f.rO)(e)),optionalAttributes:n.optionalAttributes,useComputeBuffer:(0,f.VF)(e)}),i.setPipelineState((0,f.H6)(e)),i.submitDraw(e,t)}}]),i}(v),Ge=i(51750),We=function(e){(0,s.Z)(i,e);var t=(0,u.Z)(i);function i(){return(0,a.Z)(this,i),t.apply(this,arguments)}return(0,n.Z)(i)}(qe.tp);(0,h._)([(0,y.xh)(9,m.bv)],We.prototype,"accumulatedDistance",void 0),(0,h._)([(0,y.xh)(10,m.Sg)],We.prototype,"segmentDirection",void 0),(0,h._)([(0,y.xh)(11,m.T8)],We.prototype,"tlbr",void 0);qe.fc;var Xe=function(e){(0,s.Z)(i,e);var t=(0,u.Z)(i);function i(){return(0,a.Z)(this,i),t.apply(this,arguments)}return(0,n.Z)(i,[{key:"_getLineWidthRatio",value:function(e,t){var i=new m.bv(Ge.v),r=(0,z.qD)(e.bitset,Ae.Wq);return r.multiply((0,m.Fp)(t,new m.bv(.25))).add(new m.bv(1).subtract(r)).divide(i)}},{key:"_getSDFAlpha",value:function(e){var t=e.halfWidth,i=e.normal,r=e.tlbr,a=e.patternSize,n=e.accumulatedDistance,o=e.lineWidthRatio,l=a.x.multiply(new m.bv(2)).multiply(o),s=(0,m.ZI)(n.divide(l)),u=new m.bv(.25).multiply(i.y).add(new m.bv(.5)),c=(0,m.CD)(r.xy,r.zw,new m.Sg(s,u)),p=(0,z.JH)((0,m.ig)(this.mosaicInfo.texture,c)).subtract(new m.bv(.5)).multiply(t),v=(0,m.uZ)(new m.bv(.5).subtract(p),new m.bv(0),new m.bv(1));return new m.T8(v)}},{key:"_getPatternColor",value:function(e){var t=e.halfWidth,i=e.normal,r=e.color,a=e.accumulatedDistance,n=e.patternSize,o=e.sampleAlphaOnly,l=e.tlbr,s=n.y.multiply(new m.bv(2).multiply(t).divide(n.x)),u=(0,m.ZI)(a.divide(s)),c=new m.bv(.5).multiply(i.y).add(new m.bv(.5)),p=(0,m.CD)(l.xy,l.zw,new m.Sg(c,u)),v=(0,m.ig)(this.mosaicInfo.texture,p);return null!=this.visualVariableColor&&(v=(0,m.KJ)((0,m.tS)(o,new m.bv(.5)),new m.T8(r.a),r)),v}},{key:"vertex",value:function(e,t){var i=e.segmentDirection,a=e.tlbr,n=e.bitset,o=(0,qe.uY)(this,e),l=e.accumulatedDistance.divide(this.view.displayZoomFactor).add((0,m.AK)(i,o.scaledOffset)),s=new m.Sg(a.z.subtract(a.x),a.w.subtract(a.y)),u=a.divide(this.mosaicInfo.size.xyxy),c=(0,z.qD)(n,Ae.B7),p=(0,z.qD)(n,Ae.GS),v=(0,m.KJ)((0,m.tS)(c,new m.bv(.5)),this._getLineWidthRatio(e,o.scaledHalfWidth),new m.bv(1));return(0,r.Z)((0,r.Z)({},o),{},{tlbr:u,patternSize:s,accumulatedDistance:l,isSDF:c,sampleAlphaOnly:p,lineWidthRatio:v},this.maybeRunHittest(e,t,o.halfWidth))}},{key:"fragment",value:function(e){var t=e.color,i=e.opacity,r=e.isSDF,a=(0,qe.Wc)(e,this.antialiasingControls.blur),n=(0,m.KJ)((0,m.tS)(r,new m.bv(.5)),this._getSDFAlpha(e),this._getPatternColor(e)),o=t.multiply(i).multiply(a).multiply(n);return this.getFragmentOutput(o,e)}}]),i}(qe.Pf);(0,h._)([(0,y.e5)(Fe.N)],Xe.prototype,"mosaicInfo",void 0),(0,h._)([(0,h.a)(0,(0,y.qH)(We)),(0,h.a)(1,(0,y.qH)(b.RS))],Xe.prototype,"vertex",null);var Ye=function(e){(0,s.Z)(i,e);var t=(0,u.Z)(i);function i(){var e;return(0,a.Z)(this,i),(e=t.apply(this,arguments)).type=d.t.TexturedLine,e.shaders={geometry:new Xe},e.symbologyPlane=p.mH.LINE,e}return(0,n.Z)(i,[{key:"render",value:function(e,t){var i=e.context,a=e.painter,n=e.pixelRatio,o=t.instance.getInput();a.setShader({shader:this.shaders.geometry,uniforms:(0,r.Z)((0,r.Z)((0,r.Z)({},(0,f.vY)(e,t.target,o.uniforms)),(0,f.l5)(e,t.target)),{},{antialiasingControls:$(n),mosaicInfo:a.textureManager.getMosaicInfo(i,t.textureKey)}),defines:(0,r.Z)({},(0,f.rO)(e)),optionalAttributes:o.optionalAttributes,useComputeBuffer:(0,f.VF)(e)}),a.setPipelineState((0,f.H6)(e)),a.submitDraw(e,t)}}]),i}(v),je=i(70467),Je=function(e){(0,s.Z)(i,e);var t=(0,u.Z)(i);function i(){return(0,a.Z)(this,i),t.apply(this,arguments)}return(0,n.Z)(i)}(b.HN);(0,h._)([(0,y.xh)(3,m.T8)],Je.prototype,"color",void 0),(0,h._)([(0,y.xh)(4,m.T8)],Je.prototype,"outlineColor",void 0),(0,h._)([(0,y.xh)(5,m.Sg)],Je.prototype,"offset",void 0),(0,h._)([(0,y.xh)(6,m.Sg)],Je.prototype,"textureUV",void 0),(0,h._)([(0,y.xh)(7,m.T8)],Je.prototype,"sizing",void 0),(0,h._)([(0,y.xh)(8,m.bv)],Je.prototype,"placementAngle",void 0),(0,h._)([(0,y.xh)(9,m.bv)],Je.prototype,"sizeRatio",void 0),(0,h._)([(0,y.xh)(10,m.Sg)],Je.prototype,"zoomRange",void 0);var Qe=function(e){(0,s.Z)(i,e);var t=(0,u.Z)(i);function i(){return(0,a.Z)(this,i),t.apply(this,arguments)}return(0,n.Z)(i)}(y.yu);(0,h._)([(0,y.xh)(12,m.Sg)],Qe.prototype,"offsetNextVertex1",void 0),(0,h._)([(0,y.xh)(13,m.Sg)],Qe.prototype,"offsetNextVertex2",void 0),(0,h._)([(0,y.xh)(14,m.Sg)],Qe.prototype,"textureUVNextVertex1",void 0),(0,h._)([(0,y.xh)(15,m.Sg)],Qe.prototype,"textureUVNextVertex2",void 0);var $e=function(e){(0,s.Z)(i,e);var t=(0,u.Z)(i);function i(){return(0,a.Z)(this,i),t.apply(this,arguments)}return(0,n.Z)(i)}(b.fz);function et(e,t,i,r){return t.multiply(e.x).add(i.multiply(e.y)).add(r.multiply(e.z))}function tt(e){return e.multiply(e).divide(128)}var it=function(e){(0,s.Z)(i,e);var t=(0,u.Z)(i);function i(){var e;return(0,a.Z)(this,i),(e=t.apply(this,arguments)).computeAttributes={offset:["offsetNextVertex1","offsetNextVertex2"],textureUV:["textureUVNextVertex1","textureUVNextVertex2"]},e}return(0,n.Z)(i,[{key:"vertex",value:function(e,t){var i=tt(e.sizing.x),a=tt(e.sizing.y),n=tt(e.sizing.z),o=e.placementAngle,l=(0,z.qD)(e.bitset,je.m.bitset.isSDF),s=(0,z.qD)(e.bitset,je.m.bitset.isMapAligned),u=(0,z.qD)(e.bitset,je.m.bitset.scaleSymbolsProportionally),c=(0,z.h7)(e.bitset,je.m.bitset.colorLocked),p=(0,Ee.sY)(this,e.id),v=(0,Ee.Zt)(this,e.id,e.color,c).multiply(p),f=this.view.displayViewScreenMat3.multiply(new m.AO(e.pos.xy,1)),d=(0,Ee.Vm)(this,e.id,n).divide(n),h=i.multiply(d),y=e.offset.xy.multiply(d),b=a.multiply(u.multiply(d.subtract(1)).add(1));b=(0,m.VV)(b,(0,m.Fp)(h.subtract(.99),new m.bv(0)));var g=(0,m.Fp)(b,new m.bv(1)),x=(0,m.VV)(b,new m.bv(1)),w=m.Tu.fromRotation(o.multiply(Ae.e4)),Z=(0,Ee.H8)(this,e.id),S=this._getViewRotationMatrix(s).multiply(Z).multiply(w).multiply(new m.AO(y.xy,0)),V=this.clip(e.id,e.zoomRange),_=new m.T8(f.xy.add(S.xy),V,1),T=e.textureUV.divide(this.mosaicInfo.size),k=e.outlineColor.multiply(x),A=(0,z.qD)(e.bitset,je.m.bitset.overrideOutlineColor),F=e.sizeRatio.multiply(h).multiply(.5);return(0,r.Z)({glPosition:_,color:v,textureUV:T,outlineColor:k,outlineSize:g,distanceToPx:F,isSDF:l,overrideOutlineColor:A},this.maybeRunHittest(e,t,{pos:e.pos,size:h,sizeCorrection:d,isMapAligned:s,vvRotationMat3:Z,placementMat3:w,outlineSize:g,distanceToPx:F,isSDF:l}))}},{key:"fragment",value:function(e){var t=this._getColor(e.textureUV,e);return this.getFragmentOutput(t,e)}},{key:"hittest",value:function(e,t,i){return(0,m.KJ)((0,m.Qj)(i.size,this.hittestRequest.smallSymbolSizeThreshold),this._hittestSmallMarker(e,t,i),this._hittestMarker(e,t,i))}},{key:"_getViewRotationMatrix",value:function(e){var t=this.view.displayViewMat3,i=this.view.displayMat3,r=new m.bv(1).subtract(e);return t.multiply(e).add(i.multiply(r))}},{key:"_getViewScreenMatrix",value:function(e){var t=this.view.viewMat3.multiply(this.view.tileMat3),i=this.view.tileMat3,r=new m.bv(1).subtract(e);return t.multiply(e).add(i.multiply(r))}},{key:"_getColor",value:function(e,t){return(0,m.KJ)((0,m.ln)(t.isSDF,new m.bv(1)),this._getSDFColor(e,t),this._getSpriteColor(e,t))}},{key:"_getSpriteColor",value:function(e,t){return(0,m.ig)(this.mosaicInfo.texture,e).multiply(t.color)}},{key:"_getSDFColor",value:function(e,t){var i=(0,m.ig)(this.mosaicInfo.texture,e),r=new m.bv(.5).subtract((0,z.JH)(i)).multiply(t.distanceToPx).multiply(Ae.nU),a=(0,m.uZ)(new m.bv(.5).subtract(r),new m.bv(0),new m.bv(1)),n=t.color.multiply(a),o=t.outlineSize;this.highlight&&(o=(0,m.Fp)(o,t.overrideOutlineColor.multiply(4)));var l=o.multiply(.5),s=(0,m.Wn)(r).subtract(l),u=(0,m.uZ)(new m.bv(.5).subtract(s),new m.bv(0),new m.bv(1)),c=(0,m.CD)(t.outlineColor,t.color,t.overrideOutlineColor).multiply(u);return new m.bv(1).subtract(c.a).multiply(n).add(c)}},{key:"_hittestSmallMarker",value:function(e,t,i){var r=this.hittestRequest,a=r.position,n=r.distance,o=r.smallSymbolDistance,l=n.subtract(o),s=this.view,u=s.viewMat3,c=s.tileMat3,p=u.multiply(c).multiply(new m.AO(i.pos,1)).xy,v=i.size.multiply(.5);return(0,m.TE)(p,a).subtract(v).add(l)}},{key:"_hittestMarker",value:function(e,t,i){var r=i.pos,a=i.sizeCorrection,n=i.isMapAligned,o=new m.AO(e.offset.multiply(a),0),l=new m.AO(t.offsetNextVertex1.multiply(a),0),s=new m.AO(t.offsetNextVertex2.multiply(a),0),u=this.view,c=u.viewMat3,p=u.tileMat3,v=c.multiply(p).multiply(new m.AO(r,1)),f=this._getViewScreenMatrix(n).multiply(i.vvRotationMat3).multiply(i.placementMat3),d=v.add(f.multiply(o)).xy,h=v.add(f.multiply(l)).xy,y=v.add(f.multiply(s)).xy,b=this.hittestRequest.position,g=this.hittestRequest.distance,x=(0,_.P0)(b,d,h,y);return(0,m.KJ)((0,m.tS)(x,g),x,this._hittestSamples(d,h,y,e,t,i))}},{key:"_hittestSamples",value:function(e,t,i,r,a,n){var o=n.outlineSize,l=n.isSDF,s=n.distanceToPx,u=this.hittestRequest.position,c=this.hittestRequest.distance,p=(0,_.hF)(u.add(new m.Sg((0,m.tk)(c),(0,m.tk)(c))),e,t,i),v=(0,_.hF)(u.add(new m.Sg(0,(0,m.tk)(c))),e,t,i),f=(0,_.hF)(u.add(new m.Sg(c,(0,m.tk)(c))),e,t,i),d=(0,_.hF)(u.add(new m.Sg((0,m.tk)(c),0)),e,t,i),h=(0,_.hF)(u,e,t,i),y=(0,_.hF)(u.add(new m.Sg(c,0)),e,t,i),b=(0,_.hF)(u.add(new m.Sg((0,m.tk)(c),c)),e,t,i),g=(0,_.hF)(u.add(new m.Sg(0,c)),e,t,i),x=(0,_.hF)(u.add(new m.Sg(c,c)),e,t,i),w=r.textureUV.divide(this.mosaicInfo.size),Z=a.textureUVNextVertex1.divide(this.mosaicInfo.size),S=a.textureUVNextVertex2.divide(this.mosaicInfo.size),V={color:new m.T8(1),outlineColor:new m.T8(1),overrideOutlineColor:new m.bv(1),outlineSize:o,distanceToPx:s,isSDF:l},z=new m.bv(0);return z=(z=(z=(z=(z=(z=(z=(z=(z=z.add((0,_.lD)(p).multiply(this._getColor(et(p,w,Z,S),V).a))).add((0,_.lD)(v).multiply(this._getColor(et(v,w,Z,S),V).a))).add((0,_.lD)(f).multiply(this._getColor(et(f,w,Z,S),V).a))).add((0,_.lD)(d).multiply(this._getColor(et(d,w,Z,S),V).a))).add((0,_.lD)(h).multiply(this._getColor(et(h,w,Z,S),V).a))).add((0,_.lD)(y).multiply(this._getColor(et(y,w,Z,S),V).a))).add((0,_.lD)(b).multiply(this._getColor(et(b,w,Z,S),V).a))).add((0,_.lD)(g).multiply(this._getColor(et(g,w,Z,S),V).a))).add((0,_.lD)(x).multiply(this._getColor(et(x,w,Z,S),V).a)),(0,m.Nb)(z,new m.bv(.05)).multiply((0,_.Oz)(this.hittestRequest))}}]),i}(b.Ie);(0,h._)([(0,y.Kw)(Oe.W)],it.prototype,"visualVariableColor",void 0),(0,h._)([(0,y.Kw)(Me.V)],it.prototype,"visualVariableOpacity",void 0),(0,h._)([(0,y.Kw)(Pe)],it.prototype,"visualVariableRotation",void 0),(0,h._)([(0,y.Kw)(Ce.k)],it.prototype,"visualVariableSizeMinMaxValue",void 0),(0,h._)([(0,y.Kw)(Ie.U)],it.prototype,"visualVariableSizeScaleStops",void 0),(0,h._)([(0,y.Kw)(Re.W)],it.prototype,"visualVariableSizeStops",void 0),(0,h._)([(0,y.Kw)(De.V)],it.prototype,"visualVariableSizeUnitValue",void 0),(0,h._)([(0,y.e5)(Fe.N)],it.prototype,"mosaicInfo",void 0),(0,h._)([(0,h.a)(0,(0,y.qH)(Je)),(0,h.a)(1,(0,y.qH)(Qe))],it.prototype,"vertex",null),(0,h._)([(0,h.a)(0,(0,y.qH)($e))],it.prototype,"fragment",null);var rt=function(e){(0,s.Z)(i,e);var t=(0,u.Z)(i);function i(){var e;return(0,a.Z)(this,i),(e=t.apply(this,arguments)).type=d.t.Marker,e.shaders={geometry:new it},e.symbologyPlane=p.mH.MARKER,e}return(0,n.Z)(i,[{key:"render",value:function(e,t){var i=e.context,a=e.painter,n=t.instance.getInput();a.setShader({shader:this.shaders.geometry,uniforms:(0,r.Z)((0,r.Z)((0,r.Z)({},(0,f.vY)(e,t.target,n.uniforms)),(0,f.l5)(e,t.target)),{},{mosaicInfo:a.textureManager.getMosaicInfo(i,t.textureKey,!0)}),defines:(0,r.Z)({},(0,f.rO)(e)),optionalAttributes:n.optionalAttributes,useComputeBuffer:(0,f.VF)(e)}),a.setPipelineState((0,f.H6)(e)),a.submitDraw(e,t)}}]),i}(v),at=i(29439),nt=i(643),ot=i(19407),lt=function(){function e(){(0,a.Z)(this,e),this.computeAttributes={}}return(0,n.Z)(e,[{key:"locationsMap",get:function(){var e=new Map;for(var t in this.locations)e.set(t,this.locations[t].index);return e}},{key:"optionPropertyKeys",get:function(){if(!this._optionPropertyKeys){var e=new Set(Object.keys(this.options));this._optionPropertyKeys=e}return this._optionPropertyKeys}},{key:"_transformFeedbackBindings",get:function(){return[]}},{key:"locationInfo",get:function(){if(!this._locationInfo){var e=this.locationsMap,t=Array.from(e.entries()).map((function(e){var t=(0,at.Z)(e,2),i=t[0],r=t[1];return"".concat(i,".").concat(r)})).join("."),i=(0,nt.hP)(t);this._locationInfo={hash:i,locations:e,computeAttributeMap:this.computeAttributes}}return this._locationInfo}},{key:"renamedLocationsMap",get:function(){var e,t=new Map,i=(0,P.Z)(this.locationsMap.entries());try{for(i.s();!(e=i.n()).done;){var r=(0,at.Z)(e.value,2),a=r[0],n=r[1];t.set("a_"+a,n)}}catch(o){i.e(o)}finally{i.f()}return t}},{key:"getShaderKey",value:function(e,t,i){var r=this;return"".concat(Object.keys(e).map((function(t){return"".concat(t,".").concat(e[t])})).join("."),".").concat(Object.keys(i).filter((function(e){return i[e]})).map((function(e){return"".concat(e,"_").concat(i[e].toString())})).join("."),".").concat(Object.keys(t).filter((function(e){return r.optionPropertyKeys.has(e)})).join("."))}},{key:"getProgram",value:function(e,t,i,r){var a="",n="";for(var o in i)if(i[o]){var l="boolean"==typeof i[o]?"#define ".concat(o,"\n"):"#define ".concat(o," ").concat(i[o],"\n");a+=l,n+=l}return a+=this.vertexShader,n+=this.fragmentShader,new ot.X(a,n,this.renamedLocationsMap,this.locationInfo,this._getUniformBindings(t),this._transformFeedbackBindings)}},{key:"_getUniformBindings",value:function(e){var t=[];for(var i in this.required){var r=this.required[i];t.push({uniformHydrated:null,shaderModulePath:i,uniformName:i,uniformType:r.type,uniformArrayElementType:st(r),uniformArrayLength:ut(r)})}for(var a in e){var n=this.options[a];if(e[a])for(var o in n){var l=n[o];t.push({uniformHydrated:null,shaderModulePath:"".concat(a,".").concat(o),uniformName:o,uniformType:l.type,uniformArrayElementType:st(l),uniformArrayLength:ut(l)})}}return t}}]),e}(),st=function(e){var t;return"array"===e.type?null===(t=e.elementType)||void 0===t?void 0:t.type:void 0},ut=function(e){return"array"===e.type?e.size:void 0},ct=i(54711),pt={hittestDist:m.bv,hittestPos:m.Sg},vt={filterFlags:m.Eg,animation:m.Eg,visualVariableData:m.Eg,dataDriven0:m.Eg,dataDriven1:m.Eg,dataDriven2:m.Eg,gpgpu:m.Eg,size:m.bv},ft={displayViewScreenMat3:m.Tu,displayViewMat3:m.Tu,displayMat3:m.Tu,viewMat3:m.Tu,tileMat3:m.Tu,displayZoomFactor:m.bv,requiredZoomFactor:m.bv,tileOffset:m.Sg,currentScale:m.bv,currentZoom:m.bv,metersPerSRUnit:m.bv},dt=function(e){(0,s.Z)(i,e);var t=(0,u.Z)(i);function i(){var e;return(0,a.Z)(this,i),(e=t.apply(this,arguments)).vertexShader=(0,ct.w)("materials/pie/pie.vert"),e.fragmentShader=(0,ct.w)("materials/pie/pie.frag"),e.required=(0,r.Z)((0,r.Z)((0,r.Z)({},vt),ft),{},{outlineWidth:m.bv,colors:m.v8,defaultColor:m.T8,othersColor:m.T8,outlineColor:m.T8,donutRatio:m.bv,sectorThreshold:m.bv}),e.options={hittestUniforms:pt,visualVariableSizeMinMaxValue:{minMaxValueAndSize:m.T8},visualVariableSizeScaleStops:{sizes:(0,r.Z)((0,r.Z)({},m.v8.ofType(m.bv,8)),{},{type:"array",elementType:m.bv,size:8}),values:(0,r.Z)((0,r.Z)({},m.v8.ofType(m.bv,8)),{},{type:"array",elementType:m.bv,size:8})},visualVariableSizeStops:{sizes:(0,r.Z)((0,r.Z)({},m.v8.ofType(m.bv,8)),{},{type:"array",elementType:m.bv,size:8}),values:(0,r.Z)((0,r.Z)({},m.v8.ofType(m.bv,8)),{},{type:"array",elementType:m.bv,size:8})},visualVariableSizeUnitValue:{unitValueToPixelsRatio:m.bv},visualVariableOpacity:{opacities:(0,r.Z)((0,r.Z)({},m.v8.ofType(m.bv,8)),{},{type:"array",elementType:m.bv,size:8}),opacityValues:(0,r.Z)((0,r.Z)({},m.v8.ofType(m.bv,8)),{},{type:"array",elementType:m.bv,size:8})}},e.locations={pos:{index:0,type:m.Sg},id:{index:1,type:m.AO},bitset:{index:2,type:m.bv},offset:{index:3,type:m.Sg},texCoords:{index:4,type:m.Sg},size:{index:5,type:m.Sg},referenceSize:{index:6,type:m.bv},zoomRange:{index:7,type:m.Sg}},e.defines={VV_SIZE_MIN_MAX_VALUE:"boolean",VV_SIZE_SCALE_STOPS:"boolean",VV_SIZE_FIELD_STOPS:"boolean",VV_SIZE_UNIT_VALUE:"boolean",VV_OPACITY:"boolean",HITTEST:"boolean",numberOfFields:"number",highlight:"boolean",inside:"boolean",outside:"boolean"},e}return(0,n.Z)(i,[{key:"setNumberOfFields",value:function(e){this.required.colors=(0,r.Z)((0,r.Z)({},m.v8.ofType(m.T8,e)),{},{type:"array",elementType:m.T8,size:e})}}]),i}(lt),ht=function(e){(0,s.Z)(i,e);var t=(0,u.Z)(i);function i(){var e;return(0,a.Z)(this,i),(e=t.apply(this,arguments)).type=d.t.PieChart,e.shaders={geometry:new dt},e.symbologyPlane=p.mH.MARKER,e}return(0,n.Z)(i,[{key:"render",value:function(e,t){var i,a,n=e.painter,o=t.instance,l=t.target,s=this.shaders.geometry,u=o.getInput(),c=u.uniforms.numberOfFields,p=(0,f.VF)(e),v=(0,f.l5)(e,l),d=(0,f.rO)(e);s.setNumberOfFields(c),n.setShader({shader:s,uniforms:(0,r.Z)((0,r.Z)((0,r.Z)((0,r.Z)({},(0,f.vY)(e,t.target,u.uniforms.shader)),v.storage),v.view),{},{hittestUniforms:v.hittestRequest?{hittestDist:null===(i=v.hittestRequest)||void 0===i?void 0:i.distance,hittestPos:null===(a=v.hittestRequest)||void 0===a?void 0:a.position}:null}),defines:(0,r.Z)((0,r.Z)({VV_SIZE_MIN_MAX_VALUE:!!u.uniforms.shader.visualVariableSizeMinMaxValue,VV_SIZE_SCALE_STOPS:!!u.uniforms.shader.visualVariableSizeScaleStops,VV_SIZE_FIELD_STOPS:!!u.uniforms.shader.visualVariableSizeStops,VV_SIZE_UNIT_VALUE:!!u.uniforms.shader.visualVariableSizeUnitValue,VV_OPACITY:!!u.uniforms.shader.visualVariableOpacity,HITTEST:p,highlight:v.highlight?1:0},d),{},{numberOfFields:c}),optionalAttributes:{},useComputeBuffer:p}),n.setPipelineState((0,f.H6)(e)),n.submitDraw(e,t)}}]),i}(v),yt=function(e){(0,s.Z)(i,e);var t=(0,u.Z)(i);function i(){var e;return(0,a.Z)(this,i),(e=t.apply(this,arguments)).type=d.t.Text,e.shaders={geometry:new Ne},e.symbologyPlane=p.mH.TEXT,e}return(0,n.Z)(i,[{key:"render",value:function(e,t){var i=e.context,a=e.painter,n=(0,f.rO)(e),o=t.instance.getInput(),l={shader:this.shaders.geometry,uniforms:(0,r.Z)((0,r.Z)((0,r.Z)({},(0,f.vY)(e,t.target,o.uniforms)),(0,f.l5)(e,t.target)),{},{mosaicInfo:a.textureManager.getMosaicInfo(i,t.textureKey)}),defines:(0,r.Z)((0,r.Z)({},n),{},{isHaloPass:!1,isBackgroundPass:!0,isLabel:!1}),optionalAttributes:o.optionalAttributes,useComputeBuffer:(0,f.VF)(e)};a.setShader(l),a.setPipelineState((0,f.H6)(e)),a.submitDraw(e,t),a.setShader((0,r.Z)((0,r.Z)({},l),{},{defines:(0,r.Z)((0,r.Z)({},n),{},{isHaloPass:!0,isBackgroundPass:!1,isLabel:!1})})),a.submitDraw(e,t),a.setShader((0,r.Z)((0,r.Z)({},l),{},{defines:(0,r.Z)((0,r.Z)({},n),{},{isHaloPass:!1,isBackgroundPass:!1,isLabel:!1})})),a.submitDraw(e,t)}}]),i}(v),mt={fill:new ie,patternFill:new oe,complexFill:new Q,outlineFill:new ae,patternOutlineFill:new se,complexOutlineFill:new te,marker:new rt,pieChart:new ht,line:new Ke,texturedLine:new Ye,text:new yt,label:new Ue,heatmap:new Se,dotDensity:new j};function bt(){for(var e in mt)mt[e].startup()}function gt(e){for(var t in mt)mt[t].shutdown(e)}},71873:function(e,t,i){i.d(t,{$F:function(){return s},vZ:function(){return p}});var r=i(37762),a=i(63780),n=i(80613),o=i(91370),l=i(90316);function s(e,t){return{type:"simple",filters:t,capabilities:{maxTextureSize:(0,l.h)().maxTextureSize},bindings:c(e)}}function u(e){switch(e){case"opacity":return n.CU.OPACITY;case"color":return n.CU.COLOR;case"rotation":return n.CU.ROTATION;case"size":return n.CU.SIZE;default:return null}}function c(e){if(!e)return[];switch(e.type){case"simple":case"class-breaks":case"unique-value":case"dictionary":return p(e);case"dot-density":return function(e){var t,i=[],a=(0,r.Z)(e.attributes);try{for(a.s();!(t=a.n()).done;){var n=t.value;i.push({binding:i.length,expression:n.valueExpression,field:n.field})}}catch(o){a.e(o)}finally{a.f()}return i}(e);case"pie-chart":return function(e){var t,i=p(e),a=4,n=(0,r.Z)(e.attributes);try{for(n.s();!(t=n.n()).done;){var o=t.value;i.push({binding:a++,expression:o.valueExpression,field:o.field})}}catch(l){n.e(l)}finally{n.f()}return i}(e);case"heatmap":return function(e){var t=e.valueExpression,i=e.field;return t||i?[{binding:0,expression:t,field:i}]:[]}(e)}}function p(e){var t;return"visualVariables"in e&&null!==(t=e.visualVariables)&&void 0!==t&&t.length?(0,o.t)(e.visualVariables).map((function(e){return function(e){switch(e.type){case"size":return function(e){return"$view.scale"===e.valueExpression?null:{binding:u(e.type),field:e.field,normalizationField:e.normalizationField,expression:e.valueExpression,valueRepresentation:e.valueRepresentation}}(e);case"color":case"opacity":return function(e){return{binding:u(e.type),field:e.field,normalizationField:e.normalizationField,expression:e.valueExpression}}(e);case"rotation":return function(e){return{binding:u(e.type),expression:e.valueExpression,field:e.field}}(e)}}(e)})).filter(a.pC):[]}},7326:function(e,t,i){i.d(t,{Jh:function(){return x},Sc:function(){return Z},XS:function(){return w}});var r=i(37762),a=i(1413),n=(i(93169),i(17842)),o=i(68860),l=i(49229),s=i(94109),u=i(17326),c=i(71861),p=i(91370),v=128;function f(e){var t;if(null===(t=e.stops)||void 0===t||!t.length)return null;var i=e.stops.sort((function(e,t){return e.value-t.value})),r=(0,c.Q)(i,8),a=r.map((function(e){return e.value})),n=r.map((function(e){var t=e.color;return(0,c.n)(t)}));return{values:a,colors:n}}function d(e){var t;if(null===(t=e.stops)||void 0===t||!t.length)return null;var i=e.stops.sort((function(e,t){return e.value-t.value})),r=(0,c.Q)(i,8);return{opacityValues:r.map((function(e){return e.value})),opacities:r.map((function(e){return e.opacity}))}}function h(e){return{rotationType:"geographic"===e.rotationType?u.MO.Geographic:u.MO.Arithmatic}}function y(e){var t;if(null===(t=e.stops)||void 0===t||!t.length)return null;if(e.stops.some((function(e){return e.useMaxValue||e.useMinValue})))return function(t,i){var r=t.statisticsByLevel.get(i.key.level),a=e.stops.map((function(t){var i,a,o,l;return{value:t.useMaxValue?null!==(i=null===r||void 0===r||null===(a=r.get(e.field))||void 0===a?void 0:a.maxValue)&&void 0!==i?i:0:t.useMinValue?null!==(o=null===r||void 0===r||null===(l=r.get(e.field))||void 0===l?void 0:l.minValue)&&void 0!==o?o:0:t.value,size:t.size?(0,n.F2)(t.size):s.k9}})).sort((function(e,t){return e.value-t.value})),o=(0,c.Q)(a,8);return{values:o.map((function(e){return e.value})),sizes:o.map((function(e){return e.size}))}};var i=e.stops.sort((function(e,t){return e.value-t.value})),r=(0,c.Q)(i,8);return{values:r.map((function(e){return e.value})),sizes:r.map((function(e){var t=e.size;return(0,n.F2)(t)}))}}function m(e){return function(t){var i,r=t.state;return{unitValueToPixelsRatio:(0,o.c9)(r.spatialReference)/l.a[null!==(i=e.valueUnit)&&void 0!==i?i:"meters"]/r.resolution}}}function b(e,t){var i=t.length;if(e<t[0].value||1===i)return t[0].size;for(var r=1;r<i;r++)if(e<t[r].value){var a=(e-t[r-1].value)/(t[r].value-t[r-1].value);return t[r-1].size+a*(t[r].size-t[r-1].size)}return t[i-1].size}function g(e){var t=e.minDataValue,i=e.maxDataValue,r=e.minSize,a=e.maxSize;if("object"==typeof r&&"object"==typeof a)return function(e,o){var l=e.state.scale,s=(0,n.F2)(b(l,r.stops)),u=(0,n.F2)(b(l,a.stops));return{minMaxValueAndSize:[t,i,s,u]}};if("object"==typeof r||"object"==typeof a)throw new Error("InternalError: Found a partial VisualVariableSizeMinMaxValue");return{minMaxValueAndSize:[t,i,(0,n.F2)(r),(0,n.F2)(a)]}}var x={visualVariableColor:null,visualVariableOpacity:null,visualVariableRotation:null,visualVariableSizeStops:null,visualVariableSizeScaleStops:null,visualVariableSizeOutlineScaleStops:null,visualVariableSizeUnitValue:null,visualVariableSizeMinMaxValue:null};function w(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:128,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1.25;if(e.visualVariableSizeMinMaxValue)return e.visualVariableSizeMinMaxValue instanceof Function?v:Math.max(e.visualVariableSizeMinMaxValue.minMaxValueAndSize[3]*i,t);if(e.visualVariableSizeScaleStops){if(e.visualVariableSizeScaleStops instanceof Function)return v;var r=e.visualVariableSizeScaleStops.sizes;return Math.max(r[r.length-1]*i,t)}if(e.visualVariableSizeStops){if(e.visualVariableSizeStops instanceof Function)return v;var a=e.visualVariableSizeStops.sizes;return Math.max(a[a.length-1]*i,t)}return e.visualVariableSizeUnitValue?256:0}function Z(e){var t=(0,a.Z)({},x);if(!e||!("visualVariables"in e)||!e.visualVariables)return t;var i,n=(0,r.Z)((0,p.t)(e.visualVariables));try{for(n.s();!(i=n.n()).done;){var o=i.value;switch(o.type){case"color":t.visualVariableColor=f(o);break;case"opacity":t.visualVariableOpacity=d(o);break;case"rotation":t.visualVariableRotation=h(o);break;case"size":switch(S(o)){case"field-stops":t.visualVariableSizeStops=y(o);break;case"scale-stops":"outline"===o.target?t.visualVariableSizeOutlineScaleStops=y(o):t.visualVariableSizeScaleStops=y(o);break;case"min-max":t.visualVariableSizeMinMaxValue=g(o);break;case"unit-value":t.visualVariableSizeUnitValue=m(o)}}}}catch(l){n.e(l)}finally{n.f()}return t}function S(e){return"number"==typeof e.minDataValue&&"number"==typeof e.maxDataValue&&null!=e.minSize&&null!=e.maxSize?"min-max":"$view.scale"===(null===e||void 0===e?void 0:e.valueExpression)&&Array.isArray(e.stops)?"scale-stops":null==e.field&&"$view.scale"===(null===e||void 0===e?void 0:e.valueExpression)||!(Array.isArray(e.stops)||"levels"in e&&e.levels)?null!=e.field||"$view.scale"!==(null===e||void 0===e?void 0:e.valueExpression)?"unit-value":null:"field-stops"}},71861:function(e,t,i){function r(e,t){for(var i=e.slice(0,t),r=t-i.length,a=0;a<r;a++){var n=i[i.length-1];i.push(n)}return i}function a(e){if(!e)return[0,0,0,0];var t=e.r,i=e.g,r=e.b,a=e.a;return[t*(a/255),i*(a/255),r*(a/255),a]}i.d(t,{Q:function(){return r},n:function(){return a}})},88562:function(e,t,i){i.d(t,{$L:function(){return y},KR:function(){return _},QA:function(){return k},U9:function(){return x},UX:function(){return d},cs:function(){return z},ep:function(){return Z},zw:function(){return g}});var r=i(74165),a=i(93433),n=i(37762),o=i(15861),l=i(1413),s=i(29439),u=i(78915),c=i(86553),p=i(93560),v=i(7326),f=i(33425);function d(e){var t,i;return e.minScale||e.maxScale?{minScale:null!==(t=e.minScale)&&void 0!==t?t:0,maxScale:null!==(i=e.maxScale)&&void 0!==i?i:0}:null}function h(e){if(null==e)return null;if(Array.isArray(e)){var t=(0,s.Z)(e,4);return[t[0],t[1],t[2],255*t[3]]}return"string"==typeof e?e:(0,l.Z)((0,l.Z)({},e),{},{defaultValue:h(null===e||void 0===e?void 0:e.defaultValue)})}function y(e,t){return m.apply(this,arguments)}function m(){return m=(0,o.Z)((0,r.Z)().mark((function e(t,i){var o,l,s,c,p,v,f,h,y,m;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=i.schemaOptions,l=o.cimResourceManager,s=o.cimAnalyzer,c=o.scaleExpression,e.next=3,Promise.all(u.B$.fetchResources(t.symbol,l,[]));case 3:p=s.analyzeSymbolReference(t,!1),v={scaleInfo:d(t),scaleExpression:c},f=[],h=(0,n.Z)(p),e.prev=5,h.s();case 7:if((y=h.n()).done){e.next=21;break}m=y.value,e.t0=m.type,e.next="marker"===e.t0?12:"fill"===e.t0?14:"line"===e.t0?16:"text"===e.t0?18:19;break;case 12:return f.push.apply(f,(0,a.Z)(b(m,i,v))),e.abrupt("break",19);case 14:return f.push.apply(f,(0,a.Z)(w(m,i,v))),e.abrupt("break",19);case 16:return f.push.apply(f,(0,a.Z)(S(m,i,v))),e.abrupt("break",19);case 18:f.push.apply(f,(0,a.Z)(T(m,i,v)));case 19:e.next=7;break;case 21:e.next=26;break;case 23:e.prev=23,e.t1=e.catch(5),h.e(e.t1);case 26:return e.prev=26,h.f(),e.finish(26);case 29:return e.abrupt("return",f);case 30:case"end":return e.stop()}}),e,null,[[5,23,26,29]])}))),m.apply(this,arguments)}function b(e,t,i){var r=t.uniforms,a=t.schemaOptions.store,n=e.isOutline?(0,l.Z)((0,l.Z)({},v.Jh),{},{visualVariableSizeScaleStops:r.visualVariableSizeOutlineScaleStops}):{visualVariableColor:r.visualVariableColor,visualVariableOpacity:r.visualVariableOpacity,visualVariableSizeMinMaxValue:r.visualVariableSizeMinMaxValue,visualVariableSizeScaleStops:r.visualVariableSizeScaleStops,visualVariableSizeStops:r.visualVariableSizeStops,visualVariableSizeUnitValue:r.visualVariableSizeUnitValue,visualVariableRotation:r.visualVariableRotation};return g(a.ensureInstance(p.k2.marker,{uniforms:n,optionalAttributes:{zoomRange:!!i.scaleInfo}}),e,r,i)}function g(e,t,i,r){var a,n,o=r.scaleInfo,l=r.scaleExpression,s=(0,f.h)(i);return[e.createMeshInfo({size:t.size,scaleX:t.scaleX,anchorX:t.anchorPoint.x,anchorY:t.anchorPoint.y,angle:t.rotation,color:null!==(a=h(t.color))&&void 0!==a?a:[0,0,0,0],colorLocked:t.colorLocked,frameHeight:t.frameHeight,widthRatio:t.widthRatio,scaleInfo:o,offsetX:t.offsetX,offsetY:t.offsetY,outlineColor:null!==(n=h(t.outlineColor))&&void 0!==n?n:[0,0,0,0],outlineSize:t.outlineWidth,referenceSize:t.referenceSize||c.E.CIMVectorMarker.size,rotateClockwise:t.rotateClockwise,scaleFactor:null!==l&&void 0!==l?l:1,sizeRatio:t.sizeRatio,alignment:t.alignment,isAbsoluteAnchorPoint:t.isAbsoluteAnchorPoint,scaleSymbolsProportionally:t.scaleSymbolsProportionally,sprite:t.spriteRasterizationParam,hasSizeVV:s,placement:t.markerPlacement,effects:t.effects?{type:"cim-effect-infos",effectInfos:t.effects}:null,transforms:t.transform,minPixelBuffer:(0,v.XS)(i)})]}function x(e,t,i){var r,a=i.scaleInfo;return[e.createMeshInfo({color:null!==(r=h(t.color))&&void 0!==r?r:[0,0,0,0],scaleInfo:a,effects:t.effects?{type:"cim-effect-infos",effectInfos:t.effects}:null})]}function w(e,t,i){if(!e.spriteRasterizationParam)return function(e,t,i){var r=t.uniforms;return x(t.schemaOptions.store.ensureInstance(p.k2.fill,{uniforms:{visualVariableColor:e.colorLocked?null:r.visualVariableColor,visualVariableOpacity:r.visualVariableOpacity},optionalAttributes:{zoomRange:!!i.scaleInfo}}),e,i)}(e,t,i);var r=t.uniforms;return Z(t.schemaOptions.store.ensureInstance(p.k2.complexFill,{uniforms:{visualVariableColor:e.colorLocked?null:r.visualVariableColor,visualVariableOpacity:r.visualVariableOpacity},optionalAttributes:{zoomRange:!!i.scaleInfo}}),e,null!=r.visualVariableColor,i)}function Z(e,t,i,r){var a,n=r.scaleInfo;if(!t.spriteRasterizationParam)throw new Error("InternalError: Sprite should always be defined");var o=!!t.hasUnresolvedReplacementColor&&(!i||t.colorLocked),l=t.sampleAlphaOnly&&!o,s=t.spriteRasterizationParam;return[e.createMeshInfo({color:null!==(a=h(t.color))&&void 0!==a?a:[0,0,0,0],height:t.height,aspectRatio:t.scaleX,offsetX:t.offsetX,offsetY:t.offsetY,scaleX:1,scaleY:1,angle:t.angle,applyRandomOffset:t.applyRandomOffset,sampleAlphaOnly:l,scaleProportionally:"CIMHatchFill"===s.resource.type,sprite:s,scaleInfo:n,effects:t.effects?{type:"cim-effect-infos",effectInfos:t.effects}:null})]}function S(e,t,i){var r=t.uniforms,a=t.schemaOptions.store,n=e.isOutline?(0,l.Z)((0,l.Z)({},v.Jh),{},{visualVariableSizeScaleStops:r.visualVariableSizeOutlineScaleStops}):{visualVariableColor:e.colorLocked?null:r.visualVariableColor,visualVariableOpacity:r.visualVariableOpacity,visualVariableSizeMinMaxValue:r.visualVariableSizeMinMaxValue,visualVariableSizeScaleStops:r.visualVariableSizeScaleStops,visualVariableSizeStops:r.visualVariableSizeStops,visualVariableSizeUnitValue:r.visualVariableSizeUnitValue},o={uniforms:n,optionalAttributes:{zoomRange:!!i.scaleInfo}},s=!!(n.visualVariableSizeMinMaxValue||n.visualVariableSizeScaleStops||n.visualVariableSizeStops||n.visualVariableSizeUnitValue);return e.spriteRasterizationParam?z(a.ensureInstance(p.k2.texturedLine,o),e,s,i):_(a.ensureInstance(p.k2.line,o),e,s,i)}function V(e,t,i){var r,a=i.scaleInfo;return{color:null!==(r=h(e.color))&&void 0!==r?r:[0,0,0,0],width:e.width,referenceWidth:e.referenceWidth,capType:e.cap,joinType:e.join,miterLimit:e.miterLimit,scaleInfo:a,hasSizeVV:t,effects:e.effects?{type:"cim-effect-infos",effectInfos:e.effects}:null}}function _(e,t,i,r){if(t.spriteRasterizationParam)throw new Error("InternalError: Sprite should not be defined");var a=V(t,i,r);return[e.createMeshInfo(a)]}function z(e,t,i,r){var a=t.spriteRasterizationParam,n=t.scaleDash,o=t.sampleAlphaOnly;if(!a)throw new Error("InternalError: Sprite should be defined");return[e.createMeshInfo((0,l.Z)((0,l.Z)({},V(t,i,r)),{},{shouldScaleDash:null!==n&&void 0!==n&&n,shouldSampleAlphaOnly:o,isSDF:"CIMPictureStroke"!==a.resource.type,sprite:a}))]}function T(e,t,i){var r=t.uniforms;return k(t.schemaOptions.store.ensureInstance(p.k2.text,{uniforms:{visualVariableColor:e.colorLocked?null:r.visualVariableColor,visualVariableOpacity:r.visualVariableOpacity,visualVariableRotation:r.visualVariableRotation,visualVariableSizeMinMaxValue:r.visualVariableSizeMinMaxValue,visualVariableSizeScaleStops:r.visualVariableSizeScaleStops,visualVariableSizeStops:r.visualVariableSizeStops,visualVariableSizeUnitValue:r.visualVariableSizeUnitValue},optionalAttributes:{zoomRange:!!i.scaleInfo,referenceSymbol:!1,clipAngle:!1}}),e,r,i)}function k(e,t,i,r){var a,n,o,l,s,u=r.scaleInfo,c=r.scaleExpression;return[e.createMeshInfo({boxBackgroundColor:h(t.backgroundColor),boxBorderLineColor:h(t.borderLineColor),boxBorderLineSize:null!==(a=t.borderLineWidth)&&void 0!==a?a:0,color:null!==(n=h(t.color))&&void 0!==n?n:[0,0,0,0],offsetX:t.offsetX,offsetY:t.offsetY,postAngle:t.angle,fontSize:t.size,referenceSize:t.referenceSize,decoration:t.decoration,haloColor:null!==(o=h(t.outlineColor))&&void 0!==o?o:[0,0,0,0],haloFontSize:t.outlineSize,lineWidth:t.lineWidth||512,lineHeightRatio:1,horizontalAlignment:null!==(l=t.horizontalAlignment)&&void 0!==l?l:"center",verticalAlignment:null!==(s=t.verticalAlignment)&&void 0!==s?s:"baseline",useCIMAngleBehavior:!1,glyphs:t.textRasterizationParam,scaleInfo:u,effects:t.effects?{type:"cim-effect-infos",effectInfos:t.effects}:null,placement:t.markerPlacement,transforms:t.transform,scaleFactor:null!==c&&void 0!==c?c:1,minPixelBuffer:(0,v.XS)(i),repeatLabel:null,repeatLabelDistance:null,allowOverrun:null,labelPosition:null,isLineLabel:!1})]}},33425:function(e,t,i){function r(e){return!!(e.visualVariableSizeMinMaxValue||e.visualVariableSizeScaleStops||e.visualVariableSizeStops||e.visualVariableSizeUnitValue||e.visualVariableSizeOutlineScaleStops)}function a(e){return!!e.visualVariableRotation}i.d(t,{A:function(){return a},h:function(){return r}})},91370:function(e,t,i){i.d(t,{T:function(){return v},t:function(){return c}});var r=i(93433),a=i(84506),n=i(10064),o=i(32718),l=i(17842),s=i(90316),u=function(){return o.Z.getLogger("esri.views.2d.layers.features.support.rendererUtils")};function c(e){return e.map((function(e){return function(e){return("size"===e.type||"color"===e.type||"opacity"===e.type)&&null!=e.stops}(e)?function(e){var t;return e.stops=function(e,t){return t.length<=8?t:(u().warn("Found ".concat(t.length," Visual Variable stops, but MapView only supports ").concat(8,". Displayed stops will be simplified.")),t.length>16?function(e,t){for(var i=(0,a.Z)(t),r=i[0],n=i.slice(1),o=n.pop(),s=n[0].value,u=n[n.length-1].value,c=(u-s)/6,v=[],f=s;f<u;f+=c){for(var d=0;f>=n[d].value;)d++;var h=n[d],y=t[d-1],m=f-y.value,b=h.value===y.value?1:m/(h.value-y.value);if("color"===e){var g=n[d],x=t[d-1],w=g.color.clone();w.r=p(x.color.r,w.r,b),w.g=p(x.color.g,w.g,b),w.b=p(x.color.b,w.b,b),w.a=p(x.color.a,w.a,b),v.push({value:f,color:w,label:g.label})}else if("size"===e){var Z=n[d],S=t[d-1],V=(0,l.t_)(Z.size),_=p((0,l.t_)(S.size),V,b);v.push({value:f,size:_,label:Z.label})}else{var z=n[d],T=p(t[d-1].opacity,z.opacity,b);v.push({value:f,opacity:T,label:z.label})}}return[r].concat(v,[o])}(e,t):function(e){for(var t=(0,a.Z)(e),i=t[0],n=t.slice(1),o=n.pop();n.length>6;){for(var l=0,s=0,u=1;u<n.length;u++){var c=n[u-1],p=n[u],v=Math.abs(p.value-c.value);v>s&&(s=v,l=u)}n.splice(l,1)}return[i].concat((0,r.Z)(n),[o])}(t))}(e.type,null!==(t=e.stops)&&void 0!==t?t:[]),e}(e.clone()):e}))}function p(e,t,i){return(1-i)*e+i*t}function v(e){if(!e)return!0;switch(e.type){case"dot-density":break;case"heatmap":if(!function(){var e=(0,s.h)(),t=e.supportsColorBufferFloat,i=e.supportsColorBufferFloatBlend,r=e.supportsColorBufferHalfFloat;return t&&i||r}()){var t=(0,s.h)(),i=["supportsColorBufferFloat","supportsColorBufferFloatBlend","supportsColorBufferHalfFloat"].filter((function(e){return!t[e]})).join(", ");return u().errorOnce(new n.Z("webgl-missing-extension","Missing WebGL2 requirements for Heatmap: ".concat(i))),!1}}return!0}},10507:function(e,t,i){i.d(t,{Z:function(){return c}});var r=i(74165),a=i(15861),n=i(15671),o=i(43144),l=i(66978),s=i(79004),u=i(38164),c=function(){function e(t){(0,n.Z)(this,e),this.updateTracking=new s.x({debugName:"FeatureCommandQueue"}),this._queueProcessor=new u.e({concurrency:1,process:t.process})}return(0,o.Z)(e,[{key:"destroy",value:function(){this.updateTracking.destroy(),this._queueProcessor.destroy(),this.clear()}},{key:"clear",value:function(){this._queueProcessor.clear()}},{key:"push",value:function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.R8)(this.updateTracking.addPromise(this._doPush(t))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_doPush",value:function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var i,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=this._queueProcessor,a=i.last(),e.t0=t.type,e.next="update"===e.t0||"highlight"===e.t0?4:"edit-by-id"===e.t0||"edit-by-feature"===e.t0?7:8;break;case 4:if((null===a||void 0===a?void 0:a.type)!==t.type){e.next=6;break}return e.abrupt("return");case 6:case 7:return e.abrupt("return",i.push(t));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}()},34552:function(e,t,i){i.d(t,{v:function(){return s}});var r=i(43144),a=i(15671),n=i(10064),o=i(8548),l=(0,r.Z)((function e(t,i,r,n){(0,a.Z)(this,e),this.dataType=t,this.samplingMode=i,this.pixelFormat=r,this.internalFormat=n}));function s(e,t){var i=e.capabilities,r=i.textureFloatLinear,a=i.colorBufferFloat,s=null===a||void 0===a?void 0:a.textureFloat,u=null===a||void 0===a?void 0:a.textureHalfFloat,c=null===a||void 0===a?void 0:a.floatBlend,p=e.driverTest.floatBufferBlend.result;if(!s&&!u)throw new n.Z("heatmap:missing-color-buffer-float","HeatmapRenderer requires the WebGL extension EXT_color_buffer_float or EXT_color_buffer_half_float or WEBGL_color_buffer_float.");if(!(c&&p||u))throw new n.Z("heatmap:missing-float-blend","HeatmapRenderer requires the WebGL extension EXT_float_blend or EXT_color_buffer_half_float."+(p?"":" This device claims support for EXT_float_blend, but does not actually support it."));var v=s&&c&&p,f=u,d=r,h=!(null===a||void 0===a||!a.R32F),y=!(null===a||void 0===a||!a.R16F);if(v&&d)return d||t.warnOnce("Missing WebGL extension OES_texture_float_linear. Heatmap quality may be reduced."),new l(o.Br.FLOAT,d?o.cw.LINEAR:o.cw.NEAREST,h?o.VI.RED:o.VI.RGBA,h?o.lP.R32F:o.VI.RGBA);if(f)return new l(o.Br.HALF_FLOAT,o.cw.LINEAR,y?o.VI.RED:o.VI.RGBA,y?o.lP.R16F:o.VI.RGBA);throw new n.Z("heatmap:missing-hardware-support","HeatmapRenderer requires WebGL extensions that allow it to render and blend to float or half float textures.")}}}]);
//# sourceMappingURL=68714.14ca02f5.chunk.js.map