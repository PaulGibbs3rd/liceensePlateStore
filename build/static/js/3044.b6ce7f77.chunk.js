"use strict";(self.webpackChunkreact_training=self.webpackChunkreact_training||[]).push([[3044],{3044:function(e,t,r){r.r(t),r.d(t,{default:function(){return w}});var n=r(29439),i=r(93433),a=r(74165),o=r(37762),u=r(15861),s=r(43144),c=r(15671),l=(r(59486),r(52639)),p=r(63780),v=r(32718),f=r(66978),d=r(8835),g=r(46426),h=r(28429),b=r(80885),w=(0,s.Z)((function e(t){var r=this;(0,c.Z)(this,e),this.viewModel=t,this.createFootprints=function(){var e=(0,u.Z)((0,a.Z)().mark((function e(t){var n,i,u,s,c,p,v;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,f.Yn)(t);case 2:n=r.viewModel,i=n.coveragePolygons,u=n.currentBestFeature,s=n.isAdditionalCoverageVisible,c=(0,o.Z)(i);try{for(c.s();!(p=c.n()).done;)(null===(v=p.value)||void 0===v?void 0:v.imageID)===u.attributes.objectId?r.viewModel.bestFeatureFootprint=new l.Z({attributes:{imageID:null===v||void 0===v?void 0:v.imageID},geometry:v,symbol:h.ao,visible:!1}):r.viewModel.additionalFootprints.push(new l.Z({attributes:{imageID:null===v||void 0===v?void 0:v.imageID},geometry:v,symbol:h.Gu.clone(),visible:s}))}catch(a){c.e(a)}finally{c.f()}case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.updateFootprint=function(){var e=(0,u.Z)((0,a.Z)().mark((function e(t,n){var i,o,u,s,c,g,w,m,y,Z;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=r.viewModel,o=i.activeViewer,u=i.currentBestFeature,s=i.currentCoverageVisible,c=i.footprintExtent,g=null===o||void 0===o?void 0:o.imageSize,!(u&&g&&c)){e.next=19;break}return e.prev=2,e.next=5,(0,d.y)(t,{feature:u,imageProperties:{width:g[0],height:g[1]},options:n,footprintExtent:c});case 5:if(w=e.sent,(0,f.k_)(n),(m=w.filter(p.pC)).length){e.next=10;break}return e.abrupt("return");case 10:(y=[m.map((function(e){return[e.x,e.y,1]}))])[0].push(y[0][0]),Z=new b.Z({rings:y,spatialReference:m[0].spatialReference}),r.viewModel.updateCurrentCoveragePolygon(new l.Z({geometry:Z,attributes:{imageID:u.attributes.objectId},symbol:h.ao,visible:s})),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(2),(0,f.D_)(e.t0)||v.Z.getLogger(r.viewModel).error("update-footprint",e.t0);case 19:case"end":return e.stop()}}),e,null,[[2,16]])})));return function(t,r){return e.apply(this,arguments)}}(),this.updateFootprintPanorama=function(){var e=(0,u.Z)((0,a.Z)().mark((function e(t,o){var u,s,c,p,v,w,m,y,Z,x,k,C,F,M,I,D,P,V,_,E,R;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=t.horizontalFieldOfView,s=t.pitch,c=t.verticalFieldOfView,p=t.yaw,v=r.viewModel,w=v.activeViewer,m=v.currentBestFeature,y=v.currentCoverageVisible,Z=v.footprintExtent,x=null===w||void 0===w?void 0:w.imageSize,m&&x&&Z){e.next=3;break}return e.abrupt("return");case 3:if(k=m.attributes,C=k.cameraPitch,F=k.objectId,!(s+C-c/2>180)){e.next=6;break}return e.abrupt("return",void r.viewModel.updateCurrentCoveragePolygon(null));case 6:if(M=[],s+C+c/2<180)M=[[-u/2,c/2],[u/2,c/2]].concat((0,i.Z)(s-c/2<0?[[-u/2,-c/2],[u/2,-c/2]]:[[u/2,-c/2],[-u/2,-c/2]]));else if(s+C-c/2<180&&s+C+c/2>180){for(M=[[-u/2,-c/2]],I=Math.floor(u/6),D=u/I,P=0;P<=I;P++)M.push([P*D-u/2,90-s]);M.push([u/2,-c/2])}return V=M.map((function(e){var t=(0,n.Z)(e,2),r=t[0],i=t[1];return(0,g.cZ)(p+r,s+i,x[0],x[1])})),e.next=11,(0,d.y)(V,{feature:m,imageProperties:{width:x[0],height:x[1]},options:o,footprintExtent:Z});case 11:_=e.sent,(0,f.k_)(o),(E=[_.map((function(e){return[e.x,e.y,1]}))])[0].push(E[0][0]),R=new b.Z({rings:E,spatialReference:_[0].spatialReference}),r.viewModel.updateCurrentCoveragePolygon(new l.Z({geometry:R,attributes:{imageID:F},symbol:h.ao.clone(),visible:y}));case 17:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}))}}]);
//# sourceMappingURL=3044.b6ce7f77.chunk.js.map