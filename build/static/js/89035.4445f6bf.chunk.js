"use strict";(self.webpackChunkreact_training=self.webpackChunkreact_training||[]).push([[89035,62078],{15909:function(e,t,r){r.d(t,{D:function(){return a}});var n=r(80292);function a(e){(null===e||void 0===e?void 0:e.writtenProperties)&&e.writtenProperties.forEach((function(e){var t=e.target,r=e.propName,a=e.newOrigin;(0,n.l)(t)&&a&&t.originOf(r)!==a&&t.updateOrigin(r,a)}))}},80292:function(e,t,r){function n(e){return e&&"getAtOrigin"in e&&"originOf"in e}r.d(t,{l:function(){return n}})},62078:function(e,t,r){r.r(t),r.d(t,{addOrUpdateResources:function(){return f},contentToBlob:function(){return k},fetchResources:function(){return p},getSiblingOfSameType:function(){return g},getSiblingOfSameTypeI:function(){return y},removeAllResources:function(){return x},removeResource:function(){return d},splitPrefixFileNameAndExtension:function(){return Z}});var n=r(37762),a=r(74165),s=r(29439),u=r(15861),o=r(76200),c=r(10064),i=r(35995);function p(e){return l.apply(this,arguments)}function l(){return l=(0,u.Z)((0,a.Z)().mark((function e(t){var r,n,s,u,o,c,p,l,f,h,d,v,x=arguments;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=x.length>1&&void 0!==x[1]?x[1]:{},n=x.length>2?x[2]:void 0,e.next=4,t.load(n);case 4:return s=(0,i.v_)(t.itemUrl,"resources"),u=r.start,o=void 0===u?1:u,c=r.num,p=void 0===c?10:c,l=r.sortOrder,f=void 0===l?"asc":l,h=r.sortField,d={query:{start:o,num:p,sortOrder:f,sortField:void 0===h?"resource":h,token:t.apiKey},signal:null===n||void 0===n?void 0:n.signal},e.next=16,t.portal.request(s,d);case 16:return v=e.sent,e.abrupt("return",{total:v.total,nextStart:v.nextStart,resources:v.resources.map((function(e){var r=e.created,n=e.size,a=e.resource;return{created:new Date(r),size:n,resource:t.resourceFromPath(a)}}))});case 18:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)}function f(e,t,r,n){return h.apply(this,arguments)}function h(){return h=(0,u.Z)((0,a.Z)().mark((function e(t,r,u,o){var p,l,f,h,d,v,x,m,Z,k,w,g,y,I,O,S,P,R,F,_,T,U,q,A,B,j,D,E,N,K,z;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p=new Map,l=(0,n.Z)(r),e.prev=2,l.s();case 4:if((f=l.n()).done){e.next=13;break}if(h=f.value,d=h.resource,v=h.content,x=h.compress,m=h.access,d.hasPath()){e.next=8;break}throw new c.Z("portal-item-resource-".concat(u,":invalid-path"),"Resource does not have a valid path");case 8:Z=b(d.path),k=(0,s.Z)(Z,2),w=k[0],g=k[1],y="".concat(w,"/").concat(null!==x&&void 0!==x?x:"","/").concat(null!==m&&void 0!==m?m:""),p.has(y)||p.set(y,{prefix:w,compress:x,access:m,files:[]}),p.get(y).files.push({fileName:g,content:v});case 11:e.next=4;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(2),l.e(e.t0);case 18:return e.prev=18,l.f(),e.finish(18);case 21:return e.next=23,t.load(o);case 23:I=(0,i.v_)(t.userItemUrl,"add"===u?"addResources":"updateResources"),O=(0,n.Z)(p.values()),e.prev=25,O.s();case 27:if((S=O.n()).done){e.next=45;break}P=S.value,R=P.prefix,F=P.compress,_=P.access,T=P.files,U=25,q=0;case 31:if(!(q<T.length)){e.next=43;break}A=T.slice(q,q+U),B=new FormData,R&&"."!==R&&B.append("resourcesPrefix",R),F&&B.append("compress","true"),_&&B.append("access",_),j=0,D=(0,n.Z)(A);try{for(D.s();!(E=D.n()).done;)N=E.value,K=N.fileName,z=N.content,B.append("file"+ ++j,z,K)}catch(a){D.e(a)}finally{D.f()}return B.append("f","json"),e.next=40,t.portal.request(I,{method:"post",body:B,signal:null===o||void 0===o?void 0:o.signal});case 40:q+=U,e.next=31;break;case 43:e.next=27;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(25),O.e(e.t1);case 50:return e.prev=50,O.f(),e.finish(50);case 53:case"end":return e.stop()}}),e,null,[[2,15,18,21],[25,47,50,53]])}))),h.apply(this,arguments)}function d(e,t,r){return v.apply(this,arguments)}function v(){return v=(0,u.Z)((0,a.Z)().mark((function e(t,r,n){var s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.hasPath()){e.next=2;break}throw new c.Z("portal-item-resources-remove:invalid-path","Resource does not have a valid path");case 2:return e.next=4,t.load(n);case 4:return s=(0,i.v_)(t.userItemUrl,"removeResources"),e.next=7,t.portal.request(s,{method:"post",query:{resource:r.path},signal:null===n||void 0===n?void 0:n.signal});case 7:r.portalItem=null;case 8:case"end":return e.stop()}}),e)}))),v.apply(this,arguments)}function x(e,t){return m.apply(this,arguments)}function m(){return(m=(0,u.Z)((0,a.Z)().mark((function e(t,r){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.load(r);case 2:return n=(0,i.v_)(t.userItemUrl,"removeResources"),e.abrupt("return",t.portal.request(n,{method:"post",query:{deleteAll:!0},signal:null===r||void 0===r?void 0:r.signal}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(e){var t=e.lastIndexOf("/");return-1===t?[".",e]:[e.slice(0,t),e.slice(t+1)]}function Z(e){var t=function(e){var t=(0,i.Ml)(e);return null==t?[e,""]:[e.slice(0,e.length-t.length-1),".".concat(t)]}(e),r=(0,s.Z)(t,2),n=r[0],a=r[1],u=b(n),o=(0,s.Z)(u,2);return[o[0],o[1],a]}function k(e){return w.apply(this,arguments)}function w(){return(w=(0,u.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("blob"!==t.type){e.next=2;break}return e.abrupt("return",t.blob);case 2:if("json"!==t.type){e.next=4;break}return e.abrupt("return",new Blob([t.jsonString],{type:"application/json"}));case 4:return e.next=6,(0,o.Z)(t.url,{responseType:"blob"});case 6:return e.abrupt("return",e.sent.data);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e,t){if(!e.hasPath())return null;var r=Z(e.path),n=(0,s.Z)(r,3),a=n[0],u=n[2];return e.portalItem.resourceFromPath((0,i.v_)(a,t+u))}function y(e,t){if(!e.hasPath())return null;var r=Z(e.path),n=(0,s.Z)(r,3),a=n[0],u=n[2];return e.portalItem.resourceFromPath((0,i.v_)(a,t+u))}},40739:function(e,t,r){r.d(t,{H:function(){return p},b:function(){return f}});var n=r(37762),a=r(74165),s=r(15861),u=r(10064),o=r(66978),c=r(71907),i=r(62078);function p(e,t,r){return l.apply(this,arguments)}function l(){return(l=(0,s.Z)((0,a.Z)().mark((function e(t,r,n){var s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(t,r,n);case 2:return s=e.sent,e.next=5,x(s,r,n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e,t,r,n,a){return h.apply(this,arguments)}function h(){return(h=(0,s.Z)((0,a.Z)().mark((function e(t,r,n,s,u){var o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(n,s,u);case 2:return o=e.sent,e.next=5,t.update({data:r});case 5:return e.next=7,x(o,s,u);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(e,t,r){return v.apply(this,arguments)}function v(){return v=(0,s.Z)((0,a.Z)().mark((function e(t,s,p){var l,f,h,d,v,x,m,b,Z,k,w,g,y,I,O,S;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==s&&void 0!==s&&s.resources){e.next=2;break}return e.abrupt("return");case 2:l=s.portalItem===t.portalItem?new Set(t.paths):new Set,t.paths.length=0,t.portalItem=s.portalItem,f=new Set(s.resources.toKeep.map((function(e){return e.resource.path}))),h=new Set,d=[],f.forEach((function(e){l.delete(e),t.paths.push(e)})),v=[],x=[],m=[],b=(0,n.Z)(s.resources.toUpdate),e.prev=8,k=(0,a.Z)().mark((function e(){var r,n,s,u,o,p;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Z.value,l.delete(r.resource.path),!f.has(r.resource.path)&&!h.has(r.resource.path)){e.next=15;break}return n=r.resource,s=r.content,u=r.finish,o=(0,i.getSiblingOfSameTypeI)(n,(0,c.DO)()),t.paths.push(o.path),e.t0=v,e.t1=o,e.next=8,(0,i.contentToBlob)(s);case 8:e.t2=e.sent,e.t3=r.compress,e.t4={resource:e.t1,content:e.t2,compress:e.t3},e.t0.push.call(e.t0,e.t4),u&&m.push((function(){return u(o)})),e.next=26;break;case 15:return t.paths.push(r.resource.path),e.t5=x,e.t6=r.resource,e.next=20,(0,i.contentToBlob)(r.content);case 20:e.t7=e.sent,e.t8=r.compress,e.t9={resource:e.t6,content:e.t7,compress:e.t8},e.t5.push.call(e.t5,e.t9),(p=r.finish)&&m.push((function(){return p(r.resource)})),h.add(r.resource.path);case 26:case"end":return e.stop()}}),e)})),b.s();case 11:if((Z=b.n()).done){e.next=15;break}return e.delegateYield(k(),"t0",13);case 13:e.next=11;break;case 15:e.next=20;break;case 17:e.prev=17,e.t1=e.catch(8),b.e(e.t1);case 20:return e.prev=20,b.f(),e.finish(20);case 23:w=(0,n.Z)(s.resources.toAdd),e.prev=24,y=(0,a.Z)().mark((function e(){var r,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=g.value,t.paths.push(r.resource.path),!l.has(r.resource.path)){e.next=5;break}l.delete(r.resource.path),e.next=15;break;case 5:return e.t0=v,e.t1=r.resource,e.next=9,(0,i.contentToBlob)(r.content);case 9:e.t2=e.sent,e.t3=r.compress,e.t4={resource:e.t1,content:e.t2,compress:e.t3},e.t0.push.call(e.t0,e.t4),(n=r.finish)&&m.push((function(){return n(r.resource)}));case 15:case"end":return e.stop()}}),e)})),w.s();case 27:if((g=w.n()).done){e.next=31;break}return e.delegateYield(y(),"t2",29);case 29:e.next=27;break;case 31:e.next=36;break;case 33:e.prev=33,e.t3=e.catch(24),w.e(e.t3);case 36:return e.prev=36,w.f(),e.finish(36);case 39:if(!v.length&&!x.length){e.next=48;break}return e.next=42,Promise.resolve().then(r.bind(r,62078));case 42:return I=e.sent,O=I.addOrUpdateResources,e.next=46,O(s.portalItem,v,"add",p);case 46:return e.next=48,O(s.portalItem,x,"update",p);case 48:if(m.forEach((function(e){return e()})),0!==d.length){e.next=50;break}return e.abrupt("return",l);case 50:return e.next=52,(0,o.UO)(d);case 52:if(S=e.sent,(0,o.k_)(p),!(S.length>0)){e.next=55;break}throw new u.Z("save:resources","Failed to save one or more resources",{errors:S});case 55:return e.abrupt("return",l);case 56:case"end":return e.stop()}}),e,null,[[8,17,20,23],[24,33,36,39]])}))),v.apply(this,arguments)}function x(e,t,r){return m.apply(this,arguments)}function m(){return(m=(0,s.Z)((0,a.Z)().mark((function e(t,r,s){var u,c,i,p,l;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&r.portalItem){e.next=2;break}return e.abrupt("return");case 2:u=[],c=(0,n.Z)(t);try{for(c.s();!(i=c.n()).done;)p=i.value,l=r.portalItem.resourceFromPath(p),u.push(l.portalItem.removeResource(l,s))}catch(a){c.e(a)}finally{c.f()}return e.next=7,(0,o.as)(u);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},76926:function(e,t,r){r.d(t,{w:function(){return u}});var n=r(42265),a=r(10064),s=r(66660);function u(e){if(n.Z.apiKey&&(0,s.r)(e.portal.url))throw new a.Z("save-api-key-utils:api-key-not-supported","Saving is not supported on ".concat(e.portal.url," when using an api key"))}}}]);
//# sourceMappingURL=89035.4445f6bf.chunk.js.map