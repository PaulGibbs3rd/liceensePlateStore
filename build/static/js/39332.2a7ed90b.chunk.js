"use strict";(self.webpackChunkreact_training=self.webpackChunkreact_training||[]).push([[39332],{39332:function(t,e,i){i.r(e),i.d(e,{default:function(){return b}});var a=i(1413),n=i(74165),r=i(15861),u=i(15671),s=i(43144),h=i(60136),o=i(29388),c=i(27366),p=i(32718),d=i(92026),f=i(66978),l=i(94172),y=i(49861),g=(i(93169),i(84936),i(69912)),m=i(53866),v=i(90110),x=i(65457),w=i(9229),k=i(67581),Z=i(13107),C=function(t){(0,h.Z)(i,t);var e=(0,o.Z)(i);function i(){var t;return(0,u.Z)(this,i),(t=e.apply(this,arguments)).bitmapContainer=new v.c,t}return(0,s.Z)(i,[{key:"supportsSpatialReference",value:function(t){return this.layer.serviceSupportsSpatialReference(t)}},{key:"update",value:function(t){var e=this;this.strategy.update(t).catch((function(t){(0,f.D_)(t)||p.Z.getLogger(e).error(t)}))}},{key:"attach",value:function(){var t=this,e=this.layer,i=e.imageMaxHeight,a=e.imageMaxWidth;this.bitmapContainer=new v.c,this.container.addChild(this.bitmapContainer),this.strategy=new w.Z({container:this.bitmapContainer,fetchSource:this.fetchImage.bind(this),requestUpdate:this.requestUpdate.bind(this),imageMaxHeight:i,imageMaxWidth:a,imageRotationSupported:!1,imageNormalizationSupported:!1,hidpi:!1}),this.addAttachHandles((0,l.watch)((function(){return t.exportImageVersion}),(function(){return t.requestUpdate()})))}},{key:"detach",value:function(){this.strategy=(0,d.SC)(this.strategy),this.container.removeAllChildren()}},{key:"viewChange",value:function(){}},{key:"moveEnd",value:function(){this.requestUpdate()}},{key:"createFetchPopupFeaturesQuery",value:function(t){var e,i=this.view,a=this.bitmapContainer,n=t.x,r=t.y,u=i.spatialReference,s=0,h=0;if(a.children.some((function(t){var i=t.width,a=t.height,o=t.resolution,c=t.x,p=t.y,d=c+o*i,f=p-o*a;return n>=c&&n<=d&&r<=p&&r>=f&&(e=new m.Z({xmin:c,ymin:f,xmax:d,ymax:p,spatialReference:u}),s=i,h=a,!0)})),!e)return null;var o=e.width/s,c=Math.round((n-e.xmin)/o),p=Math.round((e.ymax-r)/o);return{extent:e,width:s,height:h,x:c,y:p}}},{key:"doRefresh",value:function(){var t=(0,r.Z)((0,n.Z)().mark((function t(){return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.requestUpdate();case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"isUpdating",value:function(){return this.strategy.updating||this.updateRequested}},{key:"fetchImage",value:function(t,e,i,n){return this.layer.fetchImageBitmap(t,e,i,(0,a.Z)({timeExtent:this.timeExtent},n))}}]),i}((0,i(29431).Z)((0,Z.Z)((0,x.y)(k.Z))));(0,c._)([(0,y.Cb)()],C.prototype,"strategy",void 0),(0,c._)([(0,y.Cb)()],C.prototype,"updating",void 0);var b=C=(0,c._)([(0,g.j)("esri.views.2d.layers.WMSLayerView2D")],C)}}]);
//# sourceMappingURL=39332.2a7ed90b.chunk.js.map