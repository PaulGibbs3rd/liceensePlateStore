"use strict";(self.webpackChunkreact_training=self.webpackChunkreact_training||[]).push([[9127],{9634:function(e,t,r){r.d(t,{P:function(){return u},z:function(){return p}});var n=r(74165),a=r(37762),o=r(15861),i=r(10064);function u(e){return s.apply(this,arguments)}function s(){return s=(0,o.Z)((0,n.Z)().mark((function e(t){var r,o,i,u,s;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],o=(0,a.Z)(t.allLayers);try{for(o.s();!(i=o.n()).done;)"beforeSave"in(u=i.value)&&"function"==typeof u.beforeSave&&(s=u.beforeSave())&&r.push(s)}catch(n){o.e(n)}finally{o.f()}return e.next=5,Promise.allSettled(r);case 5:case"end":return e.stop()}}),e)}))),s.apply(this,arguments)}var c=new Set(["layer:unsupported","property:unsupported","symbol:unsupported","symbol-layer:unsupported","url:unsupported"]);function p(e,t,r){var n,a=(null!==(n=e.messages)&&void 0!==n?n:[]).filter((function(e){return"error"===e.type})).map((function(e){var t=e.name,r=e.message,n=e.details;return new i.Z(t,r,n)}));if(e.blockedRelativeUrls&&(a=a.concat(e.blockedRelativeUrls.map((function(e){return new i.Z("url:unsupported","Relative url '".concat(e,"' is not supported"))})))),r){var o=r.ignoreUnsupported,u=r.supplementalUnsupportedErrors,s=void 0===u?[]:u,p=r.requiredPropertyChecksDisabled;o&&(a=a.filter((function(e){var t=e.name;return!(c.has(t)||s.includes(t))}))),p&&(a=a.filter((function(e){return"web-document-write:property-required"!==e.name})))}if(a.length>0)throw new i.Z(t.errorName,"Failed to save due to unsupported or invalid content. See 'details.errors' for more detailed information",{errors:a})}},9127:function(e,t,r){r.r(t),r.d(t,{createJSON:function(){return I},save:function(){return S},saveAs:function(){return O}});var n=r(37762),a=r(74165),o=r(15861),i=r(10064),u=r(97642),s=r(94172),c=r(35995),p=r(15909),l=r(78952),f=r(92975),d=r(81753),m=r(25899),h=r(37933),y=r(7575),v=r(98995),w=r(32698),x=r(73117),b=r(45362),k=r(81943),Z=r(23037),_=r(40739),g=r(76926),R=r(9634),P=["NatGeo_World_Map","Ocean_Basemap","USA_Topo_Maps","World_Imagery","World_Street_Map","World_Terrain_Base","World_Topo_Map","World_Hillshade","Canvas/World_Light_Gray_Base","Canvas/World_Light_Gray_Reference","Canvas/World_Dark_Gray_Base","Canvas/World_Dark_Gray_Reference","Ocean/World_Ocean_Base","Ocean/World_Ocean_Reference","Reference/World_Boundaries_and_Places","Reference/World_Reference_Overlay","Reference/World_Transportation"].map((function(e){return e.toLowerCase()}));function S(e,t,r){return W.apply(this,arguments)}function W(){return(W=(0,o.Z)((0,a.Z)().mark((function e(t,r,n){var o,i,u,c,p;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null!==(o=n)&&void 0!==o||(n={}),T(t,r),e.next=4,(0,s.whenOnce)((function(){return!r.updatingFromView}));case 4:return e.next=6,r.load();case 6:return e.next=8,V(r);case 8:return e.next=10,(0,R.P)(r);case 10:return e.next=12,D(t,r);case 12:return i=r.portalItem,e.next=15,I(r,i);case 15:return u=e.sent,c=u.json,p=u.jsonContext,(0,R.z)(p,{errorName:"".concat(t.name,":save")},n),e.next=21,q(r,i);case 21:return e.next=23,we(t,r,i,c,p);case 23:return e.next=25,Promise.all([r.updateItemThumbnail(),(0,_.H)(r.resourceReferences,p)]);case 25:return e.abrupt("return",i);case 26:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e,t){return A.apply(this,arguments)}function A(){return(A=(0,o.Z)((0,a.Z)().mark((function e(t,r){var n,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,w.Y)(r,"web-map",!0),o=t.write({},n),e.next=3,Promise.all(n.resources.pendingOperations);case 3:return e.abrupt("return",{json:o,jsonContext:n});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e,t,r,n){return C.apply(this,arguments)}function C(){return(C=(0,o.Z)((0,a.Z)().mark((function e(t,r,n,o){var i,u,c,p,l,f;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null!==(i=o)&&void 0!==i||(o={}),u=M(t,n),e.next=4,(0,s.whenOnce)((function(){return!r.updatingFromView}));case 4:return e.next=6,r.load();case 6:return e.next=8,V(r);case 8:return e.next=10,(0,R.P)(r);case 10:return e.next=12,D(t,r);case 12:return e.next=14,I(r,u);case 14:return c=e.sent,p=c.json,l=c.jsonContext,(0,R.z)(l,{errorName:"".concat(t.name,":save")},o),e.next=20,ee(r,u);case 20:return f=r.getThumbnailState(),e.next=23,be(t,r,u,p,l,o);case 23:if(e.t0=e.sent,!e.t0){e.next=26;break}r.resourceReferences.portalItem=u;case 26:return r.restoreThumbnailFromState(f),e.next=29,Promise.all([r.updateItemThumbnail(),(0,_.H)(r.resourceReferences,l)]);case 29:return e.abrupt("return",u);case 30:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e,t){if(!t.portalItem)throw new i.Z("".concat(e.name,":portal-item-not-set"),"Portal item to save to has not been set on the WebMap");(0,g.w)(t.portalItem),j(e,t.portalItem)}function j(e,t){if(t.type!==e.itemType)throw new i.Z("".concat(e.name,":portal-item-wrong-type"),'Portal item needs to have type "'.concat(e.itemType,'"'))}function D(e,t){return E.apply(this,arguments)}function E(){return(E=(0,o.Z)((0,a.Z)().mark((function e(t,r){var n,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(n=r.basemap)&&void 0!==n&&n.baseLayers.length){e.next=2;break}throw new i.Z("".concat(t.name,":save"),"Map does not have a valid basemap with a base layer.");case 2:return o=null,e.next=5,(0,s.whenOnce)((function(){var e=(0,Z.Us)(r.initialViewProperties,r.basemap);return o=e.spatialReference,!e.updating}));case 5:if((0,f.fS)(o,r.initialViewProperties.spatialReference)){e.next=7;break}throw new i.Z("".concat(t.name,":save"),"The spatial reference of the basemap is not compatible with the one from the map.",{expected:r.initialViewProperties.spatialReference,actual:o});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(e,t){var r=v.default.from(t);return r.id&&((r=r.clone()).id=null),r.type||(r.type=e.itemType),r.portal||(r.portal=y.Z.getDefault()),(0,g.w)(r),j(e,r),r}function V(e){var t=[];return e.basemap&&t.push(e.basemap.load()),e.ground&&t.push(e.ground.load()),Promise.allSettled(t).then((function(){}))}function q(e,t){return L.apply(this,arguments)}function L(){return(L=(0,o.Z)((0,a.Z)().mark((function e(t,r){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,me(t.portalItem,t.initialViewProperties.viewpoint.targetGeometry);case 2:return r.extent=e.sent,e.next=5,re(t,r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var U=x.hz.JSAPI,G="CollectorDisabled",N="Collector",z="Data Editing",B="OfflineDisabled",F="Offline",H="Workforce Project",$="Workforce Worker",K="Workforce Dispatcher",J="Offline Map Areas",Q="FieldMapsDisabled",Y=x.hz.DEVELOPER_BASEMAP,X="UtilityNetwork";function ee(e,t){return te.apply(this,arguments)}function te(){return(te=(0,o.Z)((0,a.Z)().mark((function e(t,r){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,x.ck)(r,G),(0,x.ck)(r,Q),(0,x.ck)(r,x.hz.METADATA),(0,x.ck)(r,B),(0,x.ck)(r,J),(0,x.ck)(r,K),(0,x.ck)(r,H),(0,x.ck)(r,$),e.next=10,q(t,r);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function re(e,t){return ne.apply(this,arguments)}function ne(){return(ne=(0,o.Z)((0,a.Z)().mark((function e(t,r){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,x.qj)(r,U),e.next=3,ae(t);case 3:se(t,r),ce(t,r),pe(t,r),le(t,r),fe(t,r),de(t,r),r.typeKeywords&&(r.typeKeywords=r.typeKeywords.filter((function(e,t,r){return r.indexOf(e)===t})));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ae(e){var t=oe(e).map((function(e){return e.load()})).toArray();return Promise.allSettled(t).then((function(){}))}function oe(e){return e.allLayers.concat(e.allTables)}function ie(e){return oe(e).some((function(e){return e.loaded&&(0,h.fP)(e)&&e.capabilities.operations.supportsEditing&&e.editingEnabled&&("subtype-group"!==e.type||e.sublayers.some((function(e){return e.editingEnabled})))}))}function ue(e){return oe(e).filter((function(e){return"group"!==e.type})).every((function(t){return t.loaded&&function(e,t){return(0,h.fP)(t)&&t.capabilities.operations.supportsSync||function(e){return(0,h.rQ)(e)||"map-notes"===e.type||"route"===e.type}(t)&&!t.portalItem||("tile"===t.type||"vector-tile"===t.type)&&(t.capabilities.operations.supportsExportTiles||function(e){return"tile"===e.type&&(0,m.h3)(e.url)&&P.some((function(t){var r;return null===(r=e.url)||void 0===r?void 0:r.toLowerCase().includes("/"+t+"/")}))}(t)||(0,Z.aL)(t))&&t.spatialReference.equals(e.initialViewProperties.spatialReference)}(e,t)}))}function se(e,t){(0,x._$)(t,G)||(0,x._$)(t,H)||(0,x._$)(t,$)||(0,x._$)(t,K)||!ie(e)?(0,x.ck)(t,N):(0,x.qj)(t,N)}function ce(e,t){ie(e)?(0,x.qj)(t,z):(0,x.ck)(t,z)}function pe(e,t){!(0,x._$)(t,B)&&ue(e)?(0,x.qj)(t,F):(0,x.ck)(t,F)}function le(e,t){(0,Z.zb)(e.basemap)?(0,x.qj)(t,Y):(0,x.ck)(t,Y)}function fe(e,t){var r;null!==(r=e.utilityNetworks)&&void 0!==r&&r.length?(0,x.qj)(t,X):(0,x.ck)(t,X)}function de(e,t){e.ipsInfo?(0,x.qj)(t,"IPS"):(0,x.ck)(t,"IPS")}function me(e,t){return he.apply(this,arguments)}function he(){return(he=(0,o.Z)((0,a.Z)().mark((function e(t,r){var o,i,u,s,c;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((o=r.clone().normalize()).length>1){u=(0,n.Z)(o);try{for(u.s();!(s=u.n()).done;)c=s.value,i?c.width>i.width&&(i=c):i=c}catch(a){u.e(a)}finally{u.f()}}else i=o[0];return e.abrupt("return",ye(t,i));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ye(e,t){return ve.apply(this,arguments)}function ve(){return(ve=(0,o.Z)((0,a.Z)().mark((function e(t,n){var o,i,u,s,c;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(o=n.spatialReference).isWGS84){e.next=3;break}return e.abrupt("return",n.clone());case 3:if(!o.isWebMercator){e.next=5;break}return e.abrupt("return",(0,d.Sx)(n));case 5:return e.next=7,r.e(2502).then(r.bind(r,67387));case 7:return i=e.sent,u=i.getGeometryServiceURL,e.next=11,u(t);case 11:return s=e.sent,c=new k.Z({geometries:[n],outSpatialReference:l.Z.WGS84}),e.next=15,(0,b.i)(s,c);case 15:return e.abrupt("return",e.sent[0]);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function we(e,t,r,n,a){return xe.apply(this,arguments)}function xe(){return(xe=(0,o.Z)((0,a.Z)().mark((function e(t,r,n,o,i){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.update({data:o});case 2:Pe(t,r,n,o,i);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function be(e,t,r,n,a,o){return ke.apply(this,arguments)}function ke(){return(ke=(0,o.Z)((0,a.Z)().mark((function e(t,r,n,o,u,s){var c,p,l,f,d,m,h;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=r.portalItem,p={item:c,authenticated:!(null===c||void 0===c||!c.id||!c.portal.user)},l=n.portal,e.next=3,l.signIn();case 3:return e.next=5,Ze(p,l);case 5:if(f=e.sent,d=f.copyAllowed,m=f.itemReloaded,p.authenticated||(p.authenticated=m),d){e.next=10;break}throw new i.Z("".concat(t.name,":save-as-copy-not-allowed"),"Owner of this map does not allow others to save a copy");case 10:return e.next=12,ge(n,p,o,s);case 12:return h=e.sent,e.abrupt("return",(r.portalItem=n,Pe(t,r,n,o,u),h));case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ze(e,t){return _e.apply(this,arguments)}function _e(){return(_e=(0,o.Z)((0,a.Z)().mark((function e(t,r){var n,o,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.item,i=t.authenticated,null===o||void 0===o||!o.id||null===(n=o.typeKeywords)||void 0===n||!n.includes("useOnly")){e.next=14;break}if(o.portal.portalHostname===r.portalHostname){e.next=6;break}e.t1={copyAllowed:!1,itemReloaded:!1},e.next=11;break;case 6:if(e.t2=i,e.t2){e.next=10;break}return e.next=10,o.reload();case 10:e.t1={copyAllowed:"admin"===o.itemControl||"update"===o.itemControl,itemReloaded:!0};case 11:e.t0=e.t1,e.next=15;break;case 14:e.t0={copyAllowed:!0,itemReloaded:!1};case 15:return e.abrupt("return",e.t0);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ge(e,t,r,n){return Re.apply(this,arguments)}function Re(){return(Re=(0,o.Z)((0,a.Z)().mark((function e(t,r,n,o){var i,u,s,p,l,f,d,m,h,y;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=t.portal,s=r.item,p=o.folder,l=o.copyAllResources,f=!1,!(l&&null!==s&&void 0!==s&&s.id&&(0,c.Zo)(s.portal.url,u.url)&&parseInt(s.portal.currentVersion,10)>=2023)){e.next=8;break}return e.next=5,s.fetchResources();case 5:d=e.sent,m=d.total,f=!!m;case 8:if(!f){e.next=21;break}return e.next=11,s.copy({copyResources:"all",folder:p});case 11:return h=e.sent,t.id=h.id,t.portal=h.portal,y=t.toJSON(),e.next=16,t.load();case 16:return t.read(y),e.next=19,t.update({data:n});case 19:e.next=23;break;case 21:return e.next=23,null===(i=u.user)||void 0===i?void 0:i.addItem({item:t,folder:p,data:n});case 23:return e.abrupt("return",f);case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pe(e,t,r,n,a){u.w.prototype.read.call(t,{version:n.version,authoringApp:n.authoringApp,authoringAppVersion:n.authoringAppVersion},{origin:e.origin,ignoreDefaults:!0,url:r.itemUrl?(0,c.mN)(r.itemUrl):void 0}),(0,p.D)(a),t.resourceInfo=n}}}]);
//# sourceMappingURL=9127.747dcfcd.chunk.js.map