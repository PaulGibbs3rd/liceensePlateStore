"use strict";(self.webpackChunkreact_training=self.webpackChunkreact_training||[]).push([[78560],{80573:function(e,t,n){n.d(t,{Z:function(){return y}});var i=n(15671),r=n(43144),s=n(60136),o=n(29388),a=n(27366),u=n(7138),l=n(63780),c=n(11582),f=n(79056),h=n(46784),d=n(49861),v=(n(93169),n(32718),n(69912)),p=0,_=function(e){(0,s.Z)(n,e);var t=(0,o.Z)(n);function n(e){var r;return(0,i.Z)(this,n),(r=t.call(this,e)).id="".concat(Date.now().toString(16),"-analysis-").concat(p++),r.title=null,r}return(0,r.Z)(n,[{key:"parent",get:function(){return this._get("parent")},set:function(e){var t=this.parent;if(null!=t)switch(t.type){case"line-of-sight":case"dimension":t.releaseAnalysis(this);break;case"2d":case"3d":t.analyses.includes(this)&&t.analyses.remove(this)}this._set("parent",e)}},{key:"isEditable",get:function(){return this.requiredPropertiesForEditing.every(l.pC)}}]),n}((0,h.eC)((0,c.J)((0,f.IG)(u.default))));(0,a._)([(0,d.Cb)({type:String,constructOnly:!0,clonable:!1})],_.prototype,"id",void 0),(0,a._)([(0,d.Cb)({type:String})],_.prototype,"title",void 0),(0,a._)([(0,d.Cb)({clonable:!1,value:null})],_.prototype,"parent",null),(0,a._)([(0,d.Cb)({readOnly:!0})],_.prototype,"isEditable",null);var y=_=(0,a._)([(0,v.j)("esri.analysis.Analysis")],_)},93311:function(e,t,n){function i(){return new Float32Array(3)}function r(e){var t=new Float32Array(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function s(e,t,n){var i=new Float32Array(3);return i[0]=e,i[1]=t,i[2]=n,i}function o(){return i()}function a(){return s(1,1,1)}function u(){return s(1,0,0)}function l(){return s(0,1,0)}function c(){return s(0,0,1)}n.d(t,{Ue:function(){return i},al:function(){return s},d9:function(){return r},ll:function(){return o}});var f=o(),h=a(),d=u(),v=l(),p=c();Object.freeze(Object.defineProperty({__proto__:null,ONES:h,UNIT_X:d,UNIT_Y:v,UNIT_Z:p,ZEROS:f,clone:r,create:i,createView:function(e,t){return new Float32Array(e,t,3)},fromValues:s,ones:a,unitX:u,unitY:l,unitZ:c,zeros:o},Symbol.toStringTag,{value:"Module"}))},48681:function(e,t,n){n.d(t,{D1:function(){return c},Ue:function(){return u},fq:function(){return f},l:function(){return l},wE:function(){return h},y1:function(){return d}});var i=n(32035),r=n(12400),s=n(23470),o=n(80064),a=n(4739);function u(e,t){var n=(0,s.g)(t);(0,i.s)(n,0,0,0);for(var r=0;r<e.length;++r)(0,i.g)(n,n,e[r]);(0,i.j)(n,n,1/e.length);for(var o=0,a=0;a<e.length;++a)o=Math.max(o,(0,i.a)(n,e[a]));t[3]=Math.sqrt(o)}function l(e,t){if(e.length<3)throw new Error("need at least 3 points to fit a plane");(0,o.pG)(e[0],e[1],e[2],t)}function c(e,t){return(0,i.m)(e,t)+e[3]}function f(e,t,n,r){var s=v;return(0,i.c)(s.rings[0][0],e),(0,i.c)(s.rings[0][1],t),(0,i.c)(s.rings[0][2],n),(0,i.c)(s.rings[0][3],e),s.spatialReference=r,(0,a.Y)(s)}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=1e-6,s=function(e,t){if(0===t[0]&&0===t[1]&&0===t[2])return!1;for(var n=0;n<e.length;++n)if((0,i.m)(t,e[n])<-r)return!1;return!0};if(0===e.length)return!1;if(1===e.length)return t&&(0,i.c)(t,e[0]),!0;(0,i.s)(p,0,0,0);for(var o=0;o<e.length;++o)(0,i.g)(p,p,e[o]);if((0,i.n)(p,p),s(e,p))return t&&(0,i.c)(t,p),!0;if(!n)return!1;for(var a=0;a<e.length;++a)for(var u=0;u<e.length;++u)if(a!==u&&((0,i.b)(p,e[a],e[u]),(0,i.n)(p,p),s(e,p)))return t&&(0,i.c)(t,p),!0;return!1}function d(e){return"mouse"!==e.pointerType||0===e.button}var v={hasM:!1,hasZ:!0,rings:[[(0,r.Ue)(),(0,r.Ue)(),(0,r.Ue)(),(0,r.Ue)()]],spatialReference:null,type:"polygon"},p=(0,r.Ue)()},81703:function(e,t,n){n.d(t,{Bh:function(){return c},eW:function(){return h},iE:function(){return f},j$:function(){return u},u4:function(){return l}});var i=n(17842),r=n(13611),s=n(32035),o=n(40885),a=n(51378);function u(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,o.Ue)();return l(e,(0,i.md)(t),n),(0,s.n)(n.direction,n.direction),n}function l(e,t,n){return c(e,e.screenToRender(t,(0,i.Wv)(a.WM.get())),n)}function c(e,t,n){var o=(0,i.Wv)((0,r.JG)(a.WM.get(),t));if(o[2]=0,!e.unprojectFromRenderScreen(o,n.origin))return null;var u=(0,i.Wv)((0,r.JG)(a.WM.get(),t));u[2]=1;var l=e.unprojectFromRenderScreen(u,a.WM.get());return null==l?null:((0,s.f)(n.direction,l,n.origin),n)}function f(e,t,n){return h(e,e.screenToRender(t,(0,i.Wv)(a.WM.get())),n)}function h(e,t,n){(0,s.c)(n.origin,e.eye);var i=(0,s.s)(a.WM.get(),t[0],t[1],1),r=e.unprojectFromRenderScreen(i,a.WM.get());return null==r?null:((0,s.f)(n.direction,r,n.origin),n)}},86509:function(e,t,n){n.d(t,{f:function(){return c}});var i=n(15671),r=n(43144),s=n(60136),o=n(29388),a=n(27366),u=n(94172),l=(n(32718),n(93169),n(84936),n(10064),n(69912)),c=function(e){(0,s.Z)(n,e);var t=(0,o.Z)(n);function n(e){return(0,i.Z)(this,n),t.call(this,e)}return(0,r.Z)(n,[{key:"initialize",value:function(){var e=this;this.addHandles((0,u.watch)((function(){return e.analysisViewData.visible}),(function(t){return e.visible=t}),u.syncAndInitial))}},{key:"deactivate",value:function(){this.onDeactivate(),this.created||this.analysis.clear()}},{key:"resetCreated",value:function(){this._set("created",!1)}}]),n}(n(45900).m);c=(0,a._)([(0,l.j)("esri.views.interactive.AnalysisToolBase")],c)},99034:function(e,t,n){var i,r,s;n.d(t,{Q9:function(){return r},bH:function(){return i},jg:function(){return s}}),function(e){e[e.USER=0]="USER",e[e.MANAGER=1]="MANAGER"}(i||(i={})),function(e){e[e.None=0]="None",e[e.Unfocused=1]="Unfocused",e[e.Focused=2]="Focused",e[e.Unselected=4]="Unselected",e[e.Selected=8]="Selected",e[e.All=15]="All"}(r||(r={})),function(e){e[e.None=0]="None",e[e.Custom1=16]="Custom1",e[e.Custom2=32]="Custom2",e[e.Custom3=64]="Custom3",e[e.Custom4=128]="Custom4",e[e.Custom5=256]="Custom5",e[e.Custom6=512]="Custom6",e[e.Custom7=1024]="Custom7",e[e.Custom8=2048]="Custom8",e[e.Custom9=4096]="Custom9",e[e.Custom10=8192]="Custom10",e[e.Custom11=16384]="Custom11",e[e.Custom12=32768]="Custom12",e[e.All=65520]="All"}(s||(s={}))},34019:function(e,t,n){n.d(t,{N:function(){return s}});var i=n(15671),r=n(43144),s=function(){function e(t){(0,i.Z)(this,e),this.vertexHandle=null,this.excludeFeature=null,this.visualizer=null,this.selfSnappingZ=null,this.drawConstraints=null,this.editGeometryOperations=t.editGeometryOperations,this.elevationInfo=t.elevationInfo,this.pointer=t.pointer,this.vertexHandle=t.vertexHandle,this.excludeFeature=t.excludeFeature,this.feature=t.feature,this.visualizer=t.visualizer,this.selfSnappingZ=t.selfSnappingZ,this.drawConstraints=t.drawConstraints}return(0,r.Z)(e,[{key:"coordinateHelper",get:function(){return this.editGeometryOperations.data.coordinateHelper}},{key:"spatialReference",get:function(){return this.coordinateHelper.spatialReference}}]),e}()},80151:function(e,t,n){n.d(t,{W:function(){return y}});var i=n(37762),r=n(29439),s=n(74165),o=n(15861),a=n(1413),u=n(92026),l=n(66978),c=n(94172),f=n(70178),h=n(37818),d=n(74509),v=n(74229),p=n(34019),_=n(93463);function y(e){var t=e.predicate,n=void 0===t?function(){return!0}:t,r=e.snappingManager,h=e.snappingContext,y=e.updatingHandles,k=e.useZ,x=void 0===k||k,A=new v.hM;if(null==r)return{snappingStep:[b,A],cancelSnapping:b};var E,C,R,T,O=null,V=null,F=null,N=function(){var e;O=(0,u.IM)(O),r.doneSnapping(),null!==(e=V)&&void 0!==e&&e.frameTask.remove(),V=null,E=(0,u.hw)(E),F=null},Z=(C=r,R=x,T=A,(0,l.Ds)(function(){var e=(0,o.Z)((0,s.Z)().mark((function e(t,n){var i,r,o,a,u,l,c,h,d,v;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.frameTask,r=t.point,o=t.scenePoint,a=t.context,u=t.event,l=t.delta,c=t.getLastState,e.next=3,i.schedule((function(){return C.snap({point:r,scenePoint:o,context:a,signal:n})}),n);case 3:if(!(h=e.sent).valid){e.next=10;break}return e.next=7,i.schedule((function(){return h.apply()}),n);case 7:d=e.sent,null!=(v=c()).point&&r!==v.point&&(d=C.update({point:v.point,scenePoint:v.scenePoint,context:a})),null!=v.updatePoint&&(0,f.kg)(d,v.updatePoint)||(w(u.mapEnd,d,l,R),T.execute(u));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())),U=null,M=null,S=null;return{snappingStep:[function(e){if(!n(e))return e;var t=e.action;if("start"===t){var s=e.info,o=function(e){return"3d"===e.type?e.resourceController.scheduler.registerTask(_.T8.SNAPPING):_.sq}(r.view);if(V=function(e,t,n){return{context:new p.N({editGeometryOperations:e.editGeometryOperations,elevationInfo:e.elevationInfo,pointer:e.pointer,vertexHandle:null!=t.info?t.info.handle:null,excludeFeature:e.excludeFeature,feature:e.feature,visualizer:e.visualizer}),originalPos:null!=t.snapOrigin?e.coordinateHelper.vectorToDehydratedPoint(t.snapOrigin):t.mapStart,originalScenePos:null!=t.scenePoints?t.scenePoints.sceneStart:null,frameTask:n}}(h,e,o),V.context.selfSnappingZ=null,!x&&null!=s){var u,f=function(e,t){if(!e.hasZ())return null;var n,r=t.vertices,s=null,o=(0,i.Z)(r);try{for(o.s();!(n=o.n()).done;){var a=n.value,u=e.getZ(a.pos);if(null!=s&&null!=u&&Math.abs(u-s)>1e-6)return null;null==s&&(s=u)}}catch(l){o.e(l)}finally{o.f()}return s}(h.coordinateHelper,s.handle.component);null!=f&&(V.context.selfSnappingZ={value:f,elevationInfo:null!==(u=h.elevationInfo)&&void 0!==u?u:d.jG})}}if(null!=V){var v=V,b=v.context,k=v.originalScenePos,A=v.originalPos,C=e.mapEnd,R=e.mapStart,T=e.scenePoints,B=g(A,m(C,R)),I=m(R,A),D=(0,a.Z)((0,a.Z)({},e),{},{action:"update"}),P=V.context,z=function(e,t){return null==e||null==t?null:g(e,m(t.sceneEnd,t.sceneStart))}(k,T),G=r.update({point:B,scenePoint:z,context:b});if(S=G,w(C,G,I,x),U=B,M=z,"end"!==t){var L=V.frameTask;null==O&&(O=new AbortController),F=function(e){y.addPromise((0,l.R8)(Z({frameTask:L,event:D,context:P,point:B,scenePoint:z,delta:I,getLastState:function(){return{point:U,scenePoint:M,updatePoint:e.forceUpdate?null:S}}},O.signal)))},F({forceUpdate:!1}),null==E&&(E=(0,c.watch)((function(){return r.options.effectiveEnabled}),(function(){var e;return null===(e=F)||void 0===e?void 0:e({forceUpdate:!0})})))}}return"end"===t&&N(),e},A],cancelSnapping:function(e){return N(),e}}}function g(e,t){var n=(0,r.Z)(t,3),i=n[0],s=n[1],o=n[2],a=(0,h.WG)(e);return a.x+=i,a.y+=s,a.hasZ&&(a.z+=o),a}function m(e,t){var n=e.hasZ&&t.hasZ?e.z-t.z:0;return[e.x-t.x,e.y-t.y,n]}function w(e,t,n,i){var s=(0,r.Z)(n,3),o=s[0],a=s[1],u=s[2];e.x=t.x+o,e.y=t.y+a,i&&e.hasZ&&t.hasZ&&(e.z=t.z+u)}function b(e){return e}},44270:function(e,t,n){n.d(t,{u:function(){return v}});var i=n(1413),r=n(42537),s=n(70758),o=n(80987),a=n(94172),u=n(22006),l=n(76014),c=n(98173);var f=n(27357),h=n(38856),d=new Map;function v(e){if(!d.has(e)){var t=function(e,t){var n,r,s=new c.Z({enabled:!0,selfEnabled:!1,featureEnabled:!0,distance:null!==(n=null===t||void 0===t?void 0:t.distance)&&void 0!==n?n:l.c.distance,touchSensitivityMultiplier:null!==(r=null===t||void 0===t?void 0:t.touchSensitivityMultiplier)&&void 0!==r?r:l.c.touchSensitivityMultiplier});return(0,i.Z)((0,i.Z)({},(0,a.watch)((function(){var t,n,i;return null!==(t=null===(n=e.map)||void 0===n||null===(i=n.allLayers)||void 0===i?void 0:i.toArray())&&void 0!==t?t:[]}),(function(e){s.featureSources=new o.Z(e.map((function(e){return new u.Z({layer:e})})))}),a.initial)),{},{options:s})}(e,{distance:10}),n=function(e,t){return new h.N({view:e,options:t,snappingEnginesFactory:function(t,n){return[new f.U({view:e,spatialReference:e.spatialReference,options:n})]}})}(e,t.options);d.set(e,{referenceCount:0,snappingManager:n,remove:function(){t.remove(),n.destroy()}})}var v=d.get(e);v.referenceCount++;var p=(0,r.kB)((function(){return t=e,(n=v).referenceCount--,void(n.referenceCount>0||(0,s.Y)((function(){0===n.referenceCount&&(n.remove(),d.delete(t))})));var t,n}));return(0,i.Z)({snappingManager:v.snappingManager},p)}},4739:function(e,t,n){n.d(t,{Y:function(){return a}});var i=n(47898),r=n(2170),s=n(15559),o=n(47072);function a(e){var t=e.spatialReference;return(0,o.T5)(t,u,l,e)}function u(e){return(0,i.ne)(Math.abs((0,s.p8)([e],"square-meters")[0]),"square-meters")}function l(e){try{return(0,i.ne)(Math.abs((0,r.geodesicArea)(e,"square-meters")),"square-meters")}catch(t){return null}}},44070:function(e,t,n){n.d(t,{f:function(){return d}});var i=n(74165),r=n(15861),s=n(15671),o=n(43144),a=n(63780),u=(n(93169),n(32718)),l=n(18722),c=n(37825),f=n(8548),h=function(){return u.Z.getLogger("esri.views.webgl.BufferObject")},d=function(){function e(t,n,i,r){(0,s.Z)(this,e),this._context=t,this.bufferType=n,this.usage=i,this._glName=null,this._size=-1,this._indexType=void 0,t.instanceCounter.increment(f._g.BufferObject,this),this._glName=this._context.gl.createBuffer(),(0,c.zu)(this._context.gl),r&&this.setData(r)}return(0,o.Z)(e,[{key:"glName",get:function(){return this._glName}},{key:"size",get:function(){return this._size}},{key:"indexType",get:function(){return this._indexType}},{key:"usedMemory",get:function(){return this.bufferType===f.w0.ELEMENT_ARRAY_BUFFER?this._indexType===f.g.UNSIGNED_INT?4*this._size:2*this._size:this._size}},{key:"_isVAOAware",get:function(){return this.bufferType===f.w0.ELEMENT_ARRAY_BUFFER||this.bufferType===f.w0.ARRAY_BUFFER}},{key:"dispose",value:function(){var e;null!==(e=this._context)&&void 0!==e&&e.gl?(this._glName&&(this._context.gl.deleteBuffer(this._glName),this._glName=null),this._context.instanceCounter.decrement(f._g.BufferObject,this),this._context=null):this._glName&&h().warn("Leaked WebGL buffer object")}},{key:"setSize",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.bufferType===f.w0.ELEMENT_ARRAY_BUFFER&&null!=t)switch(this._indexType=t,t){case f.g.UNSIGNED_SHORT:e*=2;break;case f.g.UNSIGNED_INT:e*=4}this._setBufferData(e)}},{key:"setData",value:function(e){if(e){var t=e.byteLength;this.bufferType===f.w0.ELEMENT_ARRAY_BUFFER&&((0,l.Uc)(e)&&(t/=2,this._indexType=f.g.UNSIGNED_SHORT),(0,l.ZY)(e)&&(t/=4,this._indexType=f.g.UNSIGNED_INT)),this._setBufferData(t,e)}}},{key:"_setBufferData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this._size=e;var n=this._context.getBoundVAO();this._isVAOAware&&this._context.bindVAO(null),this._context.bindBuffer(this);var i=this._context.gl;null!=t?i.bufferData(this.bufferType,t,this.usage):i.bufferData(this.bufferType,e,this.usage),(0,c.zu)(i),this._isVAOAware&&this._context.bindVAO(n)}},{key:"setSubData",value:function(e,t,n,i){if(e){var r=this._context.getBoundVAO();this._isVAOAware&&this._context.bindVAO(null),this._context.bindBuffer(this);var s=this._context.gl;s.bufferSubData(this.bufferType,t*e.BYTES_PER_ELEMENT,e,n,i-n),(0,c.zu)(s),this._isVAOAware&&this._context.bindVAO(r)}}},{key:"getSubData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;if(!(n<0||i<0)){var r=v(e)?e.BYTES_PER_ELEMENT:1;if(!(r*((null!==n&&void 0!==n?n:0)+(null!==i&&void 0!==i?i:0))>e.byteLength)){t+r*(null!==i&&void 0!==i?i:0)>this.usedMemory&&h().warn("Potential problem getting subdata: requested data exceeds buffer size!");var s=this._context.gl;this.bufferType===f.w0.TRANSFORM_FEEDBACK_BUFFER?(this._context.bindBuffer(this,f.w0.TRANSFORM_FEEDBACK_BUFFER),s.getBufferSubData(f.w0.TRANSFORM_FEEDBACK_BUFFER,t,e,n,i),this._context.unbindBuffer(f.w0.TRANSFORM_FEEDBACK_BUFFER)):(this._context.bindBuffer(this,f.w0.COPY_READ_BUFFER),s.getBufferSubData(f.w0.COPY_READ_BUFFER,t,e,n,i),this._context.unbindBuffer(f.w0.COPY_READ_BUFFER))}}}},{key:"getSubDataAsync",value:function(){var e=(0,r.Z)((0,i.Z)().mark((function e(t){var n,r,s,o=arguments;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:0,r=o.length>2?o[2]:void 0,s=o.length>3?o[3]:void 0,e.next=5,this._context.clientWaitAsync();case 5:this.getSubData(t,n,r,s);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"createIndex",value:function(t,n,i){return new e(t,f.w0.ELEMENT_ARRAY_BUFFER,n,i)}},{key:"createVertex",value:function(t,n,i){return new e(t,f.w0.ARRAY_BUFFER,n,i)}},{key:"createUniform",value:function(t,n,i){return new e(t,f.w0.UNIFORM_BUFFER,n,i)}},{key:"createPixelPack",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f.l1.STREAM_READ,i=arguments.length>2?arguments[2]:void 0,r=new e(t,f.w0.PIXEL_PACK_BUFFER,n);return i&&r.setSize(i),r}},{key:"createPixelUnpack",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f.l1.STREAM_DRAW,i=arguments.length>2?arguments[2]:void 0;return new e(t,f.w0.PIXEL_UNPACK_BUFFER,n,i)}},{key:"createTransformFeedback",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f.l1.STATIC_DRAW,i=arguments.length>2?arguments[2]:void 0,r=new e(t,f.w0.TRANSFORM_FEEDBACK_BUFFER,n);return r.setSize(i),r}}]),e}();function v(e){return(0,a.zG)(e)}},45412:function(e,t,n){n.d(t,{U:function(){return f}});var i=n(15671),r=n(43144),s=n(32718),o=n(92026),a=n(18722),u=n(8548),l=n(3384),c=function(){return s.Z.getLogger("esri.views.webgl.VertexArrayObject")},f=function(){function e(t,n,r,s){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;(0,i.Z)(this,e),this._context=t,this._locations=n,this._layout=r,this._buffers=s,this._indexBuffer=o,this._glName=null,this._initialized=!1}return(0,r.Z)(e,[{key:"glName",get:function(){return this._glName}},{key:"context",get:function(){return this._context}},{key:"vertexBuffers",get:function(){return this._buffers}},{key:"indexBuffer",get:function(){return this._indexBuffer}},{key:"byteSize",get:function(){var e=this;return Object.keys(this._buffers).reduce((function(t,n){return t+e._buffers[n].usedMemory}),null!=this._indexBuffer?this._indexBuffer.usedMemory:0)}},{key:"layout",get:function(){return this._layout}},{key:"locations",get:function(){return this._locations}},{key:"usedMemory",get:function(){return this.byteSize+(Object.keys(this._buffers).length+(this._indexBuffer?1:0))*a.ru}},{key:"dispose",value:function(){if(this._context){for(var e in this._context.getBoundVAO()===this&&this._context.bindVAO(null),this._buffers){var t;null!==(t=this._buffers[e])&&void 0!==t&&t.dispose(),delete this._buffers[e]}this._indexBuffer=(0,o.M2)(this._indexBuffer),this.disposeVAOOnly()}else(this._glName||Object.getOwnPropertyNames(this._buffers).length>0)&&c().warn("Leaked WebGL VAO")}},{key:"disposeVAOOnly",value:function(){this._glName&&(this._context.gl.deleteVertexArray(this._glName),this._glName=null,this._context.instanceCounter.decrement(u._g.VertexArrayObject,this)),this._context=null}},{key:"initialize",value:function(){if(!this._initialized){var e=this._context.gl,t=e.createVertexArray();e.bindVertexArray(t),this._bindLayout(),e.bindVertexArray(null),this._glName=t,this._context.instanceCounter.increment(u._g.VertexArrayObject,this),this._initialized=!0}}},{key:"bind",value:function(){this.initialize(),this._context.gl.bindVertexArray(this.glName)}},{key:"_bindLayout",value:function(){var e=this._buffers,t=this._layout,n=this._indexBuffer;e||c().error("Vertex buffer dictionary is empty!");var i=this._context.gl;for(var r in e){var s=e[r];s||c().error("Vertex buffer is uninitialized!");var o=t[r];o||c().error("Vertex element descriptor is empty!"),(0,l.XP)(this._context,this._locations,s,o)}null!=n&&i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,n.glName)}},{key:"unbind",value:function(){this.initialize(),this._context.gl.bindVertexArray(null)}}]),e}()},61109:function(e,t,n){n.d(t,{G:function(){return s}});var i=n(43144),r=n(15671),s=(0,i.Z)((function e(t,n,i,s,o){var a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;(0,r.Z)(this,e),this.name=t,this.count=n,this.type=i,this.offset=s,this.stride=o,this.normalized=a,this.divisor=u}))},40085:function(e,t,n){n.d(t,{O:function(){return k}});var i,r,s=n(74165),o=n(15861),a=n(44925),u=n(15671),l=n(43144),c=n(60136),f=n(29388),h=n(27366),d=n(14921),v=(n(93169),n(32718)),p=n(92026),_=n(66978),y=n(94172),g=n(49861),m=(n(84936),n(69912)),w=n(32845),b=["analysis"];(r=i||(i={}))[r.PENDING=0]="PENDING",r[r.WAIT_FOR_VIEW_READY=1]="WAIT_FOR_VIEW_READY",r[r.RUNNING=2]="RUNNING";var k=function(e){(0,c.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,u.Z)(this,n),(e=t.call(this,i)).analysisView=null,e._reconnectViewTask=null,e._parentChangeFromReconnect=!1,e._startUserOperation=null;var r=null===i||void 0===i?void 0:i.analysis;return null!=r?e.analysis=r:(e._set("analysis",e.constructAnalysis()),e._set("isAnalysisOwner",!0)),e}return(0,l.Z)(n,[{key:"normalizeCtorArgs",value:function(e){e.analysis;return(0,a.Z)(e,b)}},{key:"initialize",value:function(){var e=this;this.addHandles([(0,y.watch)((function(){var t;return null===(t=e.analysis)||void 0===t?void 0:t.parent}),(function(t){e._parentChangeFromReconnect||t===e.view||e._set("isAnalysisOwner",!1);var n=!e._parentChangeFromReconnect;e._parentChangeFromReconnect=!1,n&&e._scheduleViewReconnect()}),y.sync),(0,y.watch)((function(){return{view:e.view,ready:null!=e.view&&e.view.ready,supported:e.supported}}),(function(t,n){var i=t.view,r=null===n||void 0===n?void 0:n.view;i!==r&&(e._startUserOperation=(0,p.IM)(e._startUserOperation),e._disconnectFromView(r)),e._scheduleViewReconnect()}),y.syncAndInitial),(0,y.watch)((function(){return e.analysis.isEditable}),(function(t,n){null!=e.analysisView&&(t&&!n&&null==e.tool?e.createTool():t||!n||null==e.tool||e.tool.active||e.removeTool())}))])}},{key:"destroy",value:function(){this._reconnectViewTask=(0,p.IM)(this._reconnectViewTask),this._startUserOperation=(0,p.IM)(this._startUserOperation),null!=this.analysisView&&(this.analysisView.visible=void 0),this._disconnectFromView(this.view),null!=this.analysis&&this.isAnalysisOwner&&(this.analysis.destroy(),this._set("analysis",null))}},{key:"analysis",set:function(e){e!==this._get("analysis")&&(this._startUserOperation=(0,p.IM)(this._startUserOperation),this._disconnectFromView(this.view),this._setExternalAnalysis(e),this._scheduleViewReconnect())}},{key:"ready",get:function(){return null!=this.analysisView&&!this.connectingToView}},{key:"connectingToView",get:function(){return null!=this._reconnectViewTask}},{key:"isAnalysisOwner",get:function(){return this._get("isAnalysisOwner")}},{key:"visible",set:function(e){this._set("visible",e),null!=this.analysisView&&(this.analysisView.visible=e)}},{key:"start",value:function(){var e=(0,o.Z)((0,s.Z)().mark((function e(){var t,n,r=this;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.visible){e.next=2;break}return e.abrupt("return",void v.Z.getLogger(this).warn("Cannot start analysis when not visible"));case 2:return this.clear(),t={task:null,abort:null,state:i.PENDING},n=(0,d.vr)(function(){var e=(0,o.Z)((0,s.Z)().mark((function e(n){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state=i.WAIT_FOR_VIEW_READY,e.next=3,(0,y.whenOnce)((function(){return r.ready}),n);case 3:t.state=i.RUNNING,r.createTool({interactive:!0});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.abrupt("return",(t.task=n,t.abort=function(){return n.abort()},this._startUserOperation=t,n.promise));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"clear",value:function(){this._startUserOperation=(0,p.IM)(this._startUserOperation),this.removeTool(),this.analysis.clear()}},{key:"onConnectToAnalysisView",value:function(e){}},{key:"onDisconnectFromAnalysisView",value:function(){}},{key:"_scheduleViewReconnect",value:function(){var e=this;this._reconnectViewTask=(0,p.IM)(this._reconnectViewTask);var t=(0,d.vr)(function(){var n=(0,o.Z)((0,s.Z)().mark((function n(i){return(0,s.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e._reconnectView(i);case 3:n.next=10;break;case 5:if(n.prev=5,n.t0=n.catch(0),(0,_.k_)(i),(0,_.D_)(n.t0)){n.next=9;break}return n.abrupt("return",void v.Z.getLogger(e).warn("Failed to use analysis in view model",n.t0));case 9:throw n.t0;case 10:return n.prev=10,t===e._reconnectViewTask&&(e._reconnectViewTask=null),n.finish(10);case 13:case"end":return n.stop()}}),n,null,[[0,5,10,13]])})));return function(e){return n.apply(this,arguments)}}());this._reconnectViewTask=t}},{key:"_reconnectView",value:function(){var e=(0,o.Z)((0,s.Z)().mark((function e(t){var n,i,r;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.view,i=null!=n&&n.ready&&this.supported,r=this.analysis,this._startUserOperation=x(this._startUserOperation),this._disconnectFromView(n),!i||null==n||null==r){e.next=10;break}if(!this.isAnalysisOwner){e.next=6;break}if(null==r.parent){e.next=5;break}return e.abrupt("return",void this.logError("expected owned analysis to have null parent when connecting to view"));case 5:this._parentChangeFromReconnect=!0,n.analyses.add(r);case 6:return e.next=8,n.whenAnalysisView(r);case 8:this.analysisView=e.sent,(0,_.Hc)(t)?this._startUserOperation=x(this._startUserOperation):(this.analysisView.visible=this.visible,this.onConnectToAnalysisView(this.analysisView),this.createTool());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_disconnectFromView",value:function(e){this.removeTool(),null!=e&&this.isAnalysisOwner&&(this._parentChangeFromReconnect=!0,e.analyses.remove(this.analysis),this.analysis.clear()),this.analysisView=null,this.onDisconnectFromAnalysisView()}},{key:"_setExternalAnalysis",value:function(e){null==this.analysisView||this.isAnalysisOwner||(this.analysisView.visible=!0),this.analysisView=null,this._set("isAnalysisOwner",!1),this._set("analysis",e),this._parentChangeFromReconnect=!1}},{key:"testInfo",get:function(){}}]),n}(w.V);function x(e){return null!=e&&e.state>=i.RUNNING?(e.abort(),null):e}(0,h._)([(0,g.Cb)({nonNullable:!0})],k.prototype,"analysis",null),(0,h._)([(0,g.Cb)()],k.prototype,"analysisView",void 0),(0,h._)([(0,g.Cb)()],k.prototype,"ready",null),(0,h._)([(0,g.Cb)()],k.prototype,"connectingToView",null),(0,h._)([(0,g.Cb)({readOnly:!0})],k.prototype,"isAnalysisOwner",null),(0,h._)([(0,g.Cb)({type:Boolean,value:!0})],k.prototype,"visible",null),(0,h._)([(0,g.Cb)()],k.prototype,"_reconnectViewTask",void 0),k=(0,h._)([(0,m.j)("esri.widgets.support.InteractiveAnalysisViewModel")],k)},32845:function(e,t,n){n.d(t,{V:function(){return d}});var i=n(15671),r=n(43144),s=n(60136),o=n(29388),a=n(27366),u=n(7138),l=n(32718),c=n(94172),f=n(49861),h=(n(93169),n(84936),n(69912)),d=function(e){(0,s.Z)(n,e);var t=(0,o.Z)(n);function n(e){var r;return(0,i.Z)(this,n),(r=t.call(this,e)).tool=null,r._loggedUnsupportedErrorOnce=!1,null!=(null===e||void 0===e?void 0:e.visible)&&(r.visible=e.visible),r}return(0,r.Z)(n,[{key:"initialize",value:function(){var e=this;this.addHandles((0,c.watch)((function(){return{ready:null!=e.view&&e.view.ready,supported:e.supported}}),(function(t){var n=t.ready,i=t.supported;!n||i||e._loggedUnsupportedErrorOnce||(e.logError(e.unsupportedErrorMessage),e._loggedUnsupportedErrorOnce=!0)}),c.syncAndInitial))}},{key:"destroy",value:function(){this.removeTool(),this.view=null}},{key:"active",get:function(){return null!=this.tool&&this.tool.active}},{key:"disabled",get:function(){return null==this.view||!this.view.ready||!this.supported}},{key:"supported",get:function(){return null==this.view||this.view.type===this.supportedViewType}},{key:"view",get:function(){return this._get("view")},set:function(e){var t=this;if(e!==this.view){this.removeTool(),this._set("view",e);var n="tools";this.removeHandles(n),null!=e&&this.addHandles(e.tools.on("after-remove",(function(e){e.item===t.tool&&t._set("tool",null)})),n)}}},{key:"visible",set:function(e){this._set("visible",e),null!=this.tool&&(this.tool.visible=e)}},{key:"createTool",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{interactive:!1};if(this.removeTool(),null!=this.view&&this.view.ready&&this.supported){var n=this.constructTool();n.created?(this._set("tool",n),this.view.tools.add(n)):t.interactive?(this._set("tool",n),this.view.addAndActivateTool(n),(0,c.when)((function(){return n.created}),(function(){n.active&&null!=e.view&&(e.view.activeTool=null)}),{initial:!0,once:!0})):n.destroy()}}},{key:"removeTool",value:function(){var e,t=this.tool;if(null!=t){var n=null===(e=this.view)||void 0===e?void 0:e.tools;null!=n?n.remove(t):t.destroy(),this._set("tool",null)}}},{key:"logError",value:function(){var e;(e=l.Z.getLogger(this)).error.apply(e,arguments)}}]),n}(u.default);(0,a._)([(0,f.Cb)({constructOnly:!0})],d.prototype,"tool",void 0),(0,a._)([(0,f.Cb)()],d.prototype,"active",null),(0,a._)([(0,f.Cb)()],d.prototype,"disabled",null),(0,a._)([(0,f.Cb)()],d.prototype,"supported",null),(0,a._)([(0,f.Cb)({value:null})],d.prototype,"view",null),(0,a._)([(0,f.Cb)({type:Boolean,value:!0})],d.prototype,"visible",null),d=(0,a._)([(0,h.j)("esri.widgets.support.InteractiveToolViewModel")],d)},15142:function(e,t,n){n.d(t,{s:function(){return _}});var i=n(15671),r=n(43144),s=n(60136),o=n(29388),a=n(27366),u=n(49861),l=(n(93169),n(32718),n(84936),n(69912)),c=n(33565),f=n(8905),h=n(10498),d=(n(80975),n(67005)),v="esri-measurement-widget-content",p={base:v,actions:"".concat(v,"__actions"),error:"".concat(v,"__error"),hint:"".concat(v,"__hint"),hintText:"".concat(v,"__hint-text"),panelError:"".concat(v,"__panel--error"),settings:"".concat(v,"__settings"),measurement:"".concat(v,"__measurement"),measurementItem:"".concat(v,"__measurement-item"),measurementItemDisabled:"".concat(v,"__measurement-item--disabled"),measurementItemTitle:"".concat(v,"__measurement-item__title"),measurementItemValue:"".concat(v,"__measurement-item__value")},_=function(e){(0,s.Z)(a,e);var t=(0,o.Z)(a);function a(e,n){return(0,i.Z)(this,a),t.call(this,e,n)}return(0,r.Z)(a,[{key:"loadDependencies",value:function(){return(0,f.h)({button:function(){return Promise.all([n.e(92358),n.e(46895),n.e(54438),n.e(14105),n.e(32275)]).then(n.bind(n,32275))}})}},{key:"render",value:function(){return(0,d.u)("div",{class:p.base},this._renderContent())}},{key:"_renderContent",value:function(){var e=this.supported,t=this.active;switch(this.state){case"disabled":case"ready":return e?t?this._renderHint():this._renderActions():this._renderUnsupportedMessage();case"measuring":case"measured":return[this._renderSettings(),this._renderMeasurement(),this._renderActions()]}}},{key:"_renderUnsupportedMessage",value:function(){return(0,d.u)("section",{class:p.error,key:"unsupported"},(0,d.u)("p",null,this.messages.unsupported))}},{key:"_renderHint",value:function(){var e=this.messages;return(0,d.u)("section",{class:p.hint,key:"hint"},(0,d.u)("p",{class:p.hintText},e.hint))}},{key:"_renderSettings",value:function(){return(0,d.u)("div",{class:p.settings,key:"settings"},(0,d.u)(h.m,{options:this.unitOptions,selectLabel:this.messages.unit,value:this.unit,onChange:this.onUnitChange}))}},{key:"_renderMeasurement",value:function(){var e=this;return(0,d.u)("section",{class:p.measurement,key:"measurement"},this.measurementItems.map((function(t){return e._renderMeasurementItem(t)})))}},{key:"_renderMeasurementItem",value:function(e){var t=e.key,n=e.title,i=e.value;return(0,d.u)("div",{class:this.classes(p.measurementItem,null==i&&p.measurementItemDisabled),key:t},(0,d.u)("span",{class:p.measurementItemTitle},n),(0,d.u)("span",{"aria-live":"polite",class:p.measurementItemValue},null!==i&&void 0!==i?i:this.messages.notApplicable))}},{key:"_renderActions",value:function(){var e=this.messages;return(0,d.u)("div",{class:p.actions},(0,d.u)("calcite-button",{class:this.newMeasurementButtonClass,disabled:"disabled"===this.state,onclick:this.onNewMeasurementClick},e.newMeasurement))}}]),a}(c.Z);(0,a._)([(0,u.Cb)()],_.prototype,"active",void 0),(0,a._)([(0,u.Cb)()],_.prototype,"measurementItems",void 0),(0,a._)([(0,u.Cb)()],_.prototype,"messages",void 0),(0,a._)([(0,u.Cb)()],_.prototype,"newMeasurementButtonClass",void 0),(0,a._)([(0,u.Cb)()],_.prototype,"onNewMeasurementClick",void 0),(0,a._)([(0,u.Cb)()],_.prototype,"onUnitChange",void 0),(0,a._)([(0,u.Cb)()],_.prototype,"state",void 0),(0,a._)([(0,u.Cb)()],_.prototype,"supported",void 0),(0,a._)([(0,u.Cb)()],_.prototype,"unit",void 0),(0,a._)([(0,u.Cb)()],_.prototype,"unitOptions",void 0),_=(0,a._)([(0,l.j)("esri.widgets.support.MeasurementWidgetContent")],_)}}]);
//# sourceMappingURL=78560.5b49f005.chunk.js.map