/*! For license information please see 47196.7673de93.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkreact_training=self.webpackChunkreact_training||[]).push([[47196],{70804:function(e,t,n){n.d(t,{Z:function(){return a}});var o=n(71002),r=n(89611),i=n(60136);function a(){a=function(e,t){return new n(e,void 0,t)};var e=RegExp.prototype,t=new WeakMap;function n(e,o,i){var a=new RegExp(e,o);return t.set(a,i||t.get(e)),(0,r.Z)(a,n.prototype)}function l(e,n){var o=t.get(n);return Object.keys(o).reduce((function(t,n){var r=o[n];if("number"==typeof r)t[n]=e[r];else{for(var i=0;void 0===e[r[i]]&&i+1<r.length;)i++;t[n]=e[r[i]]}return t}),Object.create(null))}return(0,i.Z)(n,RegExp),n.prototype.exec=function(t){var n=e.exec.call(this,t);return n&&(n.groups=l(n,this)),n},n.prototype[Symbol.replace]=function(n,r){if("string"==typeof r){var i=t.get(this);return e[Symbol.replace].call(this,n,r.replace(/\$<([^>]+)>/g,(function(e,t){return"$"+i[t]})))}if("function"==typeof r){var a=this;return e[Symbol.replace].call(this,n,(function(){var e=arguments;return"object"!=(0,o.Z)(e[e.length-1])&&(e=[].slice.call(e)).push(l(e,a)),r.apply(this,e)}))}return e[Symbol.replace].call(this,n,r)},a.apply(this,arguments)}},70116:function(e,t,n){var o;n.d(t,{Y:function(){return o}}),function(e){e[e.KILOBYTES=1024]="KILOBYTES",e[e.MEGABYTES=1048576]="MEGABYTES",e[e.GIGABYTES=1073741824]="GIGABYTES"}(o||(o={}))},17768:function(e,t,n){n.d(t,{BV:function(){return d},Q4:function(){return c},c5:function(){return u},pE:function(){return a}});var o=n(15671),r=n(43144),i=n(16889),a=function(){function e(t,n){(0,o.Z)(this,e),this.min=t,this.max=n,this.range=n-t}return(0,r.Z)(e,[{key:"normalize",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return l(this.range,this.min,this.max,e,t,n)}},{key:"clamp",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(0,i.uZ)(e-t,this.min,this.max)+t}},{key:"monotonic",value:function(e,t,n){return e<t?t:t+s(this.range,e-t,n)}},{key:"minimalMonotonic",value:function(e,t,n){return l(this.range,e,e+this.range,t,n)}},{key:"center",value:function(e,t,n){return t=this.monotonic(e,t,n),this.normalize((e+t)/2,n)}},{key:"diff",value:function(e,t,n){return this.monotonic(e,t,n)-e}},{key:"shortestSignedDiff",value:function(e,t){e=this.normalize(e);var n=(t=this.normalize(t))-e,o=t<e?this.minimalMonotonic(e,t)-e:t-this.minimalMonotonic(t,e);return Math.abs(n)<Math.abs(o)?n:o}},{key:"contains",value:function(e,t,n){return t=this.minimalMonotonic(e,t),(n=this.minimalMonotonic(e,n))>e&&n<t}}]),e}();function l(e,t,n,o){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return(o-=r)<t?o+=s(e,t-o):o>n&&(o-=s(e,o-n)),i&&o===n&&(o=t),o+r}function s(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Math.ceil((t-n)/e)*e+n}var u=new a(0,2*Math.PI),c=new a(-Math.PI,Math.PI),d=new a(0,360)},47898:function(e,t,n){n.d(t,{Fp:function(){return d},GJ:function(){return s},M1:function(){return i},MQ:function(){return f},Ww:function(){return m},bA:function(){return v},hw:function(){return h},mE:function(){return c},ne:function(){return l},nn:function(){return u},qF:function(){return g},yG:function(){return a},yP:function(){return p}});var o=n(1413),r=n(68860);function i(e){return{value:e}}function a(e,t){return{type:(0,r.UF)(t),value:e,unit:t}}function l(e,t){return{type:(0,r.UF)(t),value:e,unit:t}}function s(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"arithmetic";return{type:(0,r.UF)(t),value:e,unit:t,rotationType:n}}function u(e,t){var n=c(e,t);return"angle"===e.type?s(n,t,e.rotationType):function(e,t){return{type:(0,r.UF)(t),value:e,unit:t}}(n,t)}function c(e,t){return(0,r.En)(e.value,e.unit,t)}function d(e,t){return null==e?t:null==t||e.value>(0,r.En)(t.value,t.unit,e.unit)?e:t}function v(e,t){return null==e?null:(0,o.Z)((0,o.Z)({},e),{},{value:e.value*t})}function h(e,t,n){if(t===n)return e;switch(n){case"arithmetic":case"geographic":return 90-e}}var p=a(0,"meters"),f=l(0,"square-meters"),m=(s(0,"radians"),s(0,"degrees")),g=s(0,"degrees","geographic")},5163:function(e,t,n){n.d(t,{L4:function(){return C},LO:function(){return v},Qv:function(){return c},Rd:function(){return h},Ud:function(){return g},VG:function(){return d},Wv:function(){return f},Zv:function(){return y},_o:function(){return T},aC:function(){return b},h9:function(){return m},ld:function(){return w},mg:function(){return p},q6:function(){return _},sS:function(){return I},yc:function(){return S}});var o=n(70116),r=n(17768),i=n(16889),a=n(47898),l=n(643),s=n(68860),u=n(6291);function c(e,t,n){return e.units[t][n]}function d(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr";return"".concat((0,u.uf)(t,{minimumFractionDigits:o,maximumFractionDigits:o,signDisplay:t>0?"never":"exceptZero"})," ").concat(c(e,n,r))}function v(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr";return"".concat((0,u.uf)(t,{minimumFractionDigits:o,maximumFractionDigits:o,signDisplay:"exceptZero"})," ").concat(c(e,n,r))}function h(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr",i=(0,s.Y8)(t,n);return d(e,(0,s.En)(t,n,i),i,o,r)}function p(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr",i=(0,s.Y8)(t,n);return v(e,(0,s.En)(t,n,i),i,o,r)}function f(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr",i=(0,s.Dw)(t,n);return d(e,(0,s.En)(t,n,i),i,o,r)}function m(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr",i=(0,s.Dw)(t,n);return v(e,(0,s.En)(t,n,i),i,o,r)}function g(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr",i=(0,s.Q7)(t,n);return d(e,(0,s.En)(t,n,i),i,o,r)}function _(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr",i=(0,s.Q7)(t,n);return v(e,(0,s.En)(t,n,i),i,o,r)}function y(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr",i=(0,s.jl)(t,n);return d(e,(0,s.En)(t,n,i),i,o,r)}function b(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr",i=(0,s.jl)(t,n);return v(e,(0,s.En)(t,n,i),i,o,r)}function w(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr",i=(0,s.ZI)(t,n);return d(e,(0,s.En)(t,n,i),i,o,r)}function S(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr",i=(0,s.LV)(t,n);return d(e,(0,s.En)(t,n,i),i,o,r)}var k=function(e,t){return{style:"unit",unitDisplay:"narrow",unit:"degree",maximumFractionDigits:t,minimumFractionDigits:t,signDisplay:e>0?"never":"exceptZero"}};function C(e,t,n,o,i){var l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:r.BV,c=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],d=l.normalize((0,a.hw)((0,s.En)(e,t,"degrees"),n,o),0,c),v=k(d,null!==i&&void 0!==i?i:2);return d=M(d,v),(0,u.uf)(d,v)}function T(e,t,n,o,r){var i;n!==o&&(e=-e);var a={style:"unit",unitDisplay:"narrow",unit:"degree",maximumFractionDigits:r=null!==(i=r)&&void 0!==i?i:2,minimumFractionDigits:r,signDisplay:"exceptZero"},l=(0,s.En)(e,t,"degrees")%360;return l=M(l,a),(0,u.uf)(l,a)}var D=new Map;function M(e,t){var n=JSON.stringify(t),o=D.get(n);return o||(o=new Intl.NumberFormat("en-US",t),D.set(n,o)),/^[-+]?360\.?0*\xb0?$/.test(o.format(e))?0:e}var E=["B","kB","MB","GB","TB"];function I(e,t){var n=0===(t=Math.round(t))?0:Math.floor(Math.log(t)/Math.log(o.Y.KILOBYTES));n=(0,i.uZ)(n,0,E.length-1);var r=(0,u.uf)(t/Math.pow(o.Y.KILOBYTES,n),{maximumFractionDigits:2});return(0,l.gx)(e.units.bytes[E[n]],{fileSize:r})}},77671:function(e,t,n){n.d(t,{Y:function(){return r}});var o=n(74177),r={readOnly:!0,get:function(){return(0,o.R)(this.view)}}},74177:function(e,t,n){n.d(t,{R:function(){return i}});var o=n(68860),r=n(7575);function i(e){var t,n,i,a,l,s="metric";if(null==e)return s;var u=e.map,c=null!==(t=u&&"portalItem"in u?null===(n=u.portalItem)||void 0===n?void 0:n.portal:null)&&void 0!==t?t:r.Z.getDefault();switch(null!==(i=null===(a=c.user)||void 0===a?void 0:a.units)&&void 0!==i?i:c.units){case s:return s;case"english":return"imperial"}return null!==(l=(0,o.yT)(e.spatialReference))&&void 0!==l?l:s}},47196:function(e,t,n){n.r(t),n.d(t,{default:function(){return Cn}});var o,r=n(74165),i=n(15861),a=n(4942),l=n(29439),s=n(1413),u=n(15671),c=n(43144),d=n(60136),v=n(29388),h=n(37762),p=n(27366),f=(n(59166),n(98928)),m=n(42537),g=n(92026),_=n(94172),y=n(643),b=n(49861),w=n(89125),S=(n(84936),n(93169),n(69912)),k=n(77671),C=n(70491),T=n(16072),D=n(4951),M=n(33565),E="esri-directions",I={base:E,addStopButton:"".concat(E,"__add-stop-button"),arrivalTime:"".concat(E,"__arrival-time"),arrivalTimeContainer:"".concat(E,"__arrival-time-container"),clearRouteButton:"".concat(E,"__clear-route-button"),collapsibleSection:"".concat(E,"__maneuver-section--collapsible"),contentTitle:"".concat(E,"__content-title"),costsDetails:"".concat(E,"__costs-details"),departureDateTimePickers:"".concat(E,"__departure-date-time-pickers"),departureTime:"".concat(E,"__departure-time"),departureTimeControls:"".concat(E,"__departure-time-controls"),departureTimeSelect:"".concat(E,"__departure-time-select"),directionCosts:"".concat(E,"__costs"),directionsSection:"".concat(E,"__directions-section"),horizontalSplitter:"".concat(E,"__horizontal-splitter"),interactiveStopIcon:"".concat(E,"__stop-icon--interactive"),intermediateCost:"".concat(E,"__cost--intermediate"),lastStopIconContainer:"".concat(E,"__stop-icon-container--last"),layerDetailsLink:"".concat(E,"__layer-details-link"),loader:"".concat(E,"__loader"),maneuver:"".concat(E,"__maneuver"),maneuverActive:"".concat(E,"__maneuver--active"),maneuverCosts:"".concat(E,"__maneuver-costs"),maneuverCostsContainer:"".concat(E,"__maneuver-costs-container"),maneuverIcon:"".concat(E,"__maneuver-icon"),maneuverList:"".concat(E,"__maneuver-list"),maneuverPlaceName:"".concat(E,"__maneuver-place-name"),maneuverSection:"".concat(E,"__maneuver-section"),maneuverSectionHeader:"".concat(E,"__maneuver-section-header"),maneuverSectionHeaderButton:"".concat(E,"__maneuver-section-header-toggle-button"),maneuverSectionTitle:"".concat(E,"__maneuver-section-title"),maneuverSectionToggle:"".concat(E,"__maneuver-section-toggle"),maneuvers:"".concat(E,"__maneuvers"),message:"".concat(E,"__message"),messageHeading:"".concat(E,"__message_heading"),panelContent:"".concat(E,"__panel-content"),panelContentError:"".concat(E,"__panel-content--error"),panelContentLoading:"".concat(E,"__panel-content--loading"),panelContentSignIn:"".concat(E,"__panel-content--sign-in"),primaryCosts:"".concat(E,"__costs-value"),printButton:"".concat(E,"__print-button"),removeStop:"".concat(E,"__remove-stop-icon"),removeStopButton:"".concat(E,"__remove-stop"),reverseStops:"".concat(E,"__reverse-stops"),routeActions:"".concat(E,"__route-actions"),saveAsButton:"".concat(E,"__save-as-button"),saveAsButtonPopover:"".concat(E,"__save-as-button-with-popover"),saveButton:"".concat(E,"__save-button"),saveButtons:"".concat(E,"__save-buttons"),savePopover:"".concat(E,"__save-popover"),saveSection:"".concat(E,"__save-section"),scroller:"".concat(E,"__scroller"),secondaryCosts:"".concat(E,"__other-costs-total"),section:"".concat(E,"__section"),sectionSplitter:"".concat(E,"__section-splitter"),signInButton:"".concat(E,"__sign-in-button"),signInContent:"".concat(E,"__sign-in-content"),stopHandle:"".concat(E,"__stop-handle"),stopHandleIcon:"".concat(E,"__stop-handle-icon"),stopIcon:"".concat(E,"__stop-icon"),stopIconContainer:"".concat(E,"__stop-icon-container"),stopInput:"".concat(E,"__stop-input"),stopOptions:"".concat(E,"__stop-options"),stopRow:"".concat(E,"__stop-row"),stopRowGhost:"".concat(E,"__stop-row-ghost"),stops:"".concat(E,"__stops"),summary:"".concat(E,"__summary"),toolbarButtons:"".concat(E,"__toolbar-buttons"),toolbarSection:"".concat(E,"__toolbar-section"),travelMode:"".concat(E,"__travel-modes"),travelModeSelect:"".concat(E,"__travel-modes-select"),validStopRow:"".concat(E,"__stop-row--valid"),verticalSplitter:"".concat(E,"__vertical-splitter"),warningCard:"".concat(E,"__warning-card"),warningHeader:"".concat(E,"__warning-header"),warningHeading:"".concat(E,"__warning-heading"),warningMessage:"".concat(E,"__warning-message")},x=n(70804),P=n(80987),A=n(10064),R=n(91505),O=n(66978),L=(n(32718),n(76969)),N=n(36257),B=n(75980),Z=n(26213),z=n(77279),F=n(6701),H=n(47898),Y=n(5163),U=n(6291),X=new Map([["arrive","route-to"],["bear-left","bear-left"],["bear-right","bear-right"],["boundary-crossing","blank"],["central-fork","fork-middle"],["clockwise-roundabout","round-about-right"],["counter-clockwise-roundabout","round-about"],["depart","route-from"],["door","walk-through-door"],["down-elevator","elevator-down"],["down-escalator","escalator-down"],["down-stairs","stairs-down"],["elevator","elevator"],["escalator","escalator"],["general-event","information"],["header","blank"],["landmark","map-pin"],["lane","blank"],["left-fork","fork-left"],["left-handed-u-turn","u-turn"],["left-ramp","ramp-left"],["left-turn","left"],["left-turn-and-immediate-left-turn","left-left"],["left-turn-and-immediate-right-turn","left-right"],["off-ferry","disembark"],["on-ferry","embark"],["pedestrian-ramp","take-pedestrian-ramp"],["restriction-violation","exclamation-mark-triangle"],["right-fork","fork-right"],["right-handed-u-turn","u-turn-right"],["right-ramp","ramp-right"],["right-turn","right"],["right-turn-and-immediate-left-turn","right-left"],["right-turn-and-immediate-right-turn","right-right"],["roundabout","round-about"],["scaled-cost-barrier-event","blank"],["sharp-left","sharp-left"],["sharp-right","sharp-right"],["stairs","stairs"],["straight","straight"],["time-zone-change","clock"],["traffic-event","exclamation-mark-triangle"],["u-turn","u-turn"],["up-elevator","elevator-up"],["up-escalator","escalator-up"],["up-stairs","stairs-up"]]);function W(e,t){return(0,U.uf)(e,{style:"unit",unit:t,unitDisplay:"short"})}function j(e,t,n){var o,r,i,a,l,s,u,c,d,v;if(0===t)return"";var h,p,f=0,m=(0,H.yG)(t,"meters");switch(n){case"metric":m.value<.01?(h=(o=(0,H.nn)(m,"millimeters")).value,p=o.unit):m.value<1?(h=(r=(0,H.nn)(m,"centimeters")).value,p=r.unit):m.value<1e3?(h=(i=(0,H.nn)(m,"meters")).value,p=i.unit):m.value<1e5?(h=(a=(0,H.nn)(m,"kilometers")).value,p=a.unit,f=1):(h=(l=(0,H.nn)(m,"kilometers")).value,p=l.unit);break;case"imperial":m.value<.254?(h=(s=(0,H.nn)(m,"inches")).value,p=s.unit):m.value<160.9344?(h=(u=(0,H.nn)(m,"feet")).value,p=u.unit):m.value<160934.4?(h=(c=(0,H.nn)(m,"miles")).value,p=c.unit,f=1):(h=(d=(0,H.nn)(m,"miles")).value,p=d.unit);break;default:h=(v=(0,H.nn)(m,n)).value,p=v.unit,f=2}return(0,Y.VG)(e,h,p,f)}function G(e){if(0===e)return"";if(e<1)return W(Math.floor(60*e),"second");if(e<60)return W(Math.floor(e),"minute");var t=Math.floor(e/60);if(e<1440){var n=Math.floor(e%60);return 0===n?"".concat(W(t,"hour")):"".concat(W(t,"hour")," ").concat(W(n,"minute"))}return W(t,"hour")}function V(e){return null!=e&&X.has(e)?X.get(e):"blank"}!function(e){e.NOW="now",e.DEPART_AT="depart-at",e.UNSPECIFIED="unspecified"}(o||(o={}));var K,q=n(83651),J=n(99505),Q=n(99779);!function(e){e[e.Active=0]="Active",e[e.Complete=1]="Complete",e[e.Failed=2]="Failed",e[e.Idle=3]="Idle",e[e.Suspended=4]="Suspended"}(K||(K={}));var $=function(e){(0,d.Z)(n,e);var t=(0,v.Z)(n);function n(e){var r;return(0,u.Z)(this,n),(r=t.call(this,e))._highlight=null,r._loadPromise=null,r._loadController=null,r._routeController=null,r._serviceDescriptionStatus=K.Idle,r.apiKey=void 0,r.defaultTravelMode=null,r.departureIsoDate=null,r.departureIsoTime=null,r.departureOption=o.NOW,r.departureTime="now",r.lastError=null,r.lastRoute=null,r.layer=null,r.maxStops=50,r.routeParameters=new Z.Z({directionsLengthUnits:"kilometers",findBestSequence:!1,returnZ:!0,startTime:null,startTimeIsUTC:!0,useTimeWindows:!1}),r.serviceDescription=null,r.view=null,r}return(0,c.Z)(n,[{key:"initialize",value:function(){var e,t,n=this;this.addHandles([(0,_.on)((function(){var e;return null===(e=n.layer)||void 0===e?void 0:e.stops}),"change",(function(){n.clearResults()})),(0,_.watch)((function(){return n.layer}),(function(e){if(null!=e){for(;e.stops.length<2;)e.stops.add(new C.Z);n._set("defaultTravelMode",null),n.addHandles((0,_.when)((function(){var t,o;return null!=n.serviceDescription?null===(t=e.routeInfo)||void 0===t||null===(o=t.analysisSettings)||void 0===o?void 0:o.travelMode:null}),(function(e){n.defaultTravelMode=n._resolveDefaultTravelMode(e)}),{once:!0}))}}),_.syncAndInitial)]);var o=(0,L.f1)(null!==(e=null===(t=this.view)||void 0===t?void 0:t.timeZone)&&void 0!==e?e:F.By),r=Q.ou.fromMillis(Date.now());this.departureIsoDate=r.toFormat(q.rp,(0,q.W1)(o)),this.departureIsoTime=r.toFormat(q.Sj,(0,q.W1)(o))}},{key:"_directionsLanguage",get:function(){var e;if(null!=this.serviceDescription){var t=this.serviceDescription.directionsSupportedLanguages;if(t){var n=(null!==(e=this.routeParameters.directionsLanguage)&&void 0!==e?e:(0,N.Kd)()).slice(0,2);return t.find((function(e){return e.toLowerCase().slice(0,2)===n}))}}}},{key:"formattedEta",get:function(){var e,t,n,r,i,a,l,u,c=null===(e=this.layer)||void 0===e||null===(t=e.routeInfo)||void 0===t?void 0:t.endTime,d=null===(n=this.layer)||void 0===n||null===(r=n.routeInfo)||void 0===r?void 0:r.endTimeOffset;if(this.departureOption===o.UNSPECIFIED||!c||!d)return null;var v=Q.ou.fromJSDate(c,{zone:Q.Qf.instance(d)}),h=Q.ou.fromJSDate(c,{zone:Q.vF.create((0,L.f1)(null!==(i=null===(a=this.view)||void 0===a?void 0:a.timeZone)&&void 0!==i?i:F.By))}),p=Q.ou.fromJSDate(new Date,{zone:Q.vF.create((0,L.f1)(null!==(l=null===(u=this.view)||void 0===u?void 0:u.timeZone)&&void 0!==l?l:F.By))}),f=p.year===h.year&&p.month===h.month&&p.day===h.day,m=h.offset===d?void 0:F.D5,g=f?void 0:(0,L.Ze)("short-date"),_=(0,L.Ze)("short-time");return(0,L.i$)(v.toISO(),(0,s.Z)((0,s.Z)((0,s.Z)({},g),_),{},{timeZoneName:m}))}},{key:"impedanceAttribute",get:function(){var e,t,n,o,r,i=null!==(e=null!==(t=null!==(n=null===(o=this.routeParameters.travelMode)||void 0===o?void 0:o.impedanceAttributeName)&&void 0!==n?n:this.routeParameters.impedanceAttribute)&&void 0!==t?t:null===(r=this.serviceDescription)||void 0===r?void 0:r.impedance)&&void 0!==e?e:null;return this.getCostAttribute(i)}},{key:"selectedTravelMode",get:function(){var e,t,n,o;return null==this.serviceDescription?null:null!==(e=null!==(t=null!==(n=this.defaultTravelMode)&&void 0!==n?n:this.serviceDescription.defaultTravelMode)&&void 0!==t?t:null===(o=this.serviceDescription.supportedTravelModes)||void 0===o?void 0:o[0])&&void 0!==e?e:null},set:function(e){this._override("selectedTravelMode",e)}},{key:"state",get:function(){if(null!=this._routeController)return"routing";if(null!=this.lastError)return"error";switch(this._serviceDescriptionStatus){case K.Suspended:return"unauthenticated";case K.Idle:return"disabled";case K.Active:return"initializing";case K.Failed:return"error";default:return"ready"}}},{key:"timeAttribute",get:function(){var e,t,n,o,r,i=null!==(e=null!==(t=null!==(n=null===(o=this.routeParameters.travelMode)||void 0===o?void 0:o.timeAttributeName)&&void 0!==n?n:this.routeParameters.directionsTimeAttribute)&&void 0!==t?t:null===(r=this.serviceDescription)||void 0===r?void 0:r.directionsTimeAttribute)&&void 0!==e?e:null;return this.getCostAttribute(i)}},{key:"travelModes",get:function(){var e,t,n,o=null!==(e=null===(t=this.serviceDescription)||void 0===t||null===(n=t.supportedTravelModes)||void 0===n?void 0:n.slice())&&void 0!==e?e:[];return null==this.defaultTravelMode||o.includes(this.defaultTravelMode)||o.unshift(this.defaultTravelMode),o}},{key:"load",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this._loadPromise){e.next=2;break}return e.abrupt("return",this._loadPromise);case 2:return this._loadPromise=this._load(),e.next=5,this._loadPromise;case 5:this._loadPromise=null;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"highlight",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.clearHighlights(),this.view&&this.layer){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.view.whenLayerView(this.layer);case 4:n=e.sent,this._highlight=n.highlight(t);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearHighlights",value:function(){null!=this._highlight&&(this._highlight.remove(),this._highlight=null)}},{key:"centerAt",value:function(e){if(null!=this.view){var t=function(e){return"esri.rest.support.Stop"===(null===e||void 0===e?void 0:e.declaredClass)}(e)||function(e){return"esri.Graphic"===(null===e||void 0===e?void 0:e.declaredClass)}(e)?e.geometry:e;null!=t&&this.callGoTo({target:t})}}},{key:"clearResults",value:function(){var e;this._set("lastRoute",null),null===(e=this.layer)||void 0===e||e.removeResult()}},{key:"getDirections",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var t,n,o,i,a,l,s,u,c,d,v,p,f,m,g,_,y;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=this.apiKey,i=this.layer,a=this.state,null!=i){e.next=3;break}throw new A.Z("directions-view-model:missing-route-layer","A route layer must be associated with the view model.");case 3:if("unauthenticated"!==a&&"initializing"!==a&&"disabled"!==a&&this._serviceDescriptionStatus!==K.Failed){e.next=5;break}throw new A.Z("directions-view-model:not-loaded","Cannot get directions until view model loads.");case 5:if(this._set("lastError",null),null!=this._routeController&&(this._routeController.abort(),this._routeController=null),l=this._getStartTimeParameters(),s=l.startTime,u=l.startTimeIsUTC,c=null!==(t=null===(n=this.view)||void 0===n?void 0:n.spatialReference)&&void 0!==t?t:null,(d=this.routeParameters.clone()).set({startTime:s,startTimeIsUTC:u,directionsLanguage:this._directionsLanguage,apiKey:o,outSpatialReference:c}),null!=this.selectedTravelMode&&(d.travelMode=this.selectedTravelMode),!(i.stops.filter((function(e){return null!=e.geometry})).length<2)){e.next=11;break}throw v=new A.Z("directions-view-model:not-enough-stops","Not enough stops for routing"),this._set("lastError",v),v;case 11:return this._routeController=new AbortController,p=this._routeController.signal,f=null,e.prev=14,e.next=17,i.solve(d,{signal:p});case 17:f=e.sent,e.next=25;break;case 20:if(e.prev=20,e.t0=e.catch(14),(0,O.D_)(e.t0)){e.next=25;break}throw m=new A.Z("directions-view-model:unable-to-route","Unable to route to these addresses",{error:e.t0}),this._set("lastError",m),this._set("lastRoute",null),m;case 25:return e.prev=25,this._routeController=null,e.finish(25);case 28:g=(0,h.Z)(f.stops);try{for(g.s();!(_=g.n()).done;)null==(y=_.value).geometry&&(y.name=null)}catch(r){g.e(r)}finally{g.f()}return e.abrupt("return",(i.update(f),this._set("lastRoute",f),this.zoomToRoute(),f));case 31:case"end":return e.stop()}}),e,this,[[14,20,25,28]])})));return function(){return e.apply(this,arguments)}}()},{key:"getCostAttribute",value:function(e){var t,n,o,r;return null!==(t=(null!==(n=null===(o=this.serviceDescription)||void 0===o||null===(r=o.networkDataset)||void 0===r?void 0:r.networkAttributes)&&void 0!==n?n:[]).find((function(t){var n=t.name,o=t.usageType;return n===e&&"cost"===o})))&&void 0!==t?t:null}},{key:"reset",value:function(){this.clearHighlights(),this.clearResults(),null!=this.layer&&(this.layer.removeAll(),this.layer.stops=new P.Z([new C.Z,new C.Z]))}},{key:"save",value:function(){if(!this.layer)throw new A.Z("directions-view-model:missing-layer","save() requires a layer");return this.layer.save()}},{key:"saveAs",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.layer)throw new A.Z("directions-view-model:missing-layer","saveAs() requires a layer");return this.layer.saveAs(e,t)}},{key:"updateDepartureTime",value:function(){if(this.departureIsoDate&&this.departureIsoTime)switch(this.departureOption){case o.NOW:this.departureTime="now";break;case o.DEPART_AT:var e=Q.ou.fromISO("".concat(this.departureIsoDate,"T").concat(this.departureIsoTime),{zone:Q.Qf.instance(0)});this.departureTime=e.toJSDate();break;case o.UNSPECIFIED:this.departureTime=null}}},{key:"zoomToRoute",value:function(){var e=this.view,t=this.layer;if(null!=e&&null!=(null===t||void 0===t?void 0:t.routeInfo)){var n=t.routeInfo.geometry;if(null!=n){var o=n.extent;if(o){var r=o.width>o.height,i=o.clone().expand(r?2:1);this.callGoTo({target:i})}}}}},{key:"_getStartTimeParameters",value:function(){var e,t;return"now"===this.departureTime?{startTime:null!==(e=null===(t=this.serviceDescription)||void 0===t?void 0:t.capabilities.supportsNow)&&void 0!==e&&e?"now":new Date,startTimeIsUTC:!0}:null==this.departureTime?{startTime:void 0,startTimeIsUTC:void 0}:{startTime:this.departureTime,startTimeIsUTC:!1}}},{key:"_load",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var t,n,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.serviceDescription&&null!=this.layer){e.next=2;break}return e.abrupt("return");case 2:return null!=this._loadController&&(this._loadController.abort(),this._loadController=null),this._loadController=new AbortController,t=this._loadController.signal,e.prev=4,this._serviceDescriptionStatus=K.Active,e.next=8,(0,B.bI)(this.layer.url,this.apiKey,{signal:t});case 8:n=e.sent,this._set("serviceDescription",n),this._serviceDescriptionStatus=K.Complete,e.next=20;break;case 12:if(e.prev=12,e.t0=e.catch(4),!(0,O.D_)(e.t0)){e.next=16;break}return e.abrupt("return",void(this._serviceDescriptionStatus=K.Idle));case 16:if("identity-manager:user-aborted"!==e.t0.name){e.next=18;break}return e.abrupt("return",void(this._serviceDescriptionStatus=K.Suspended));case 18:throw o=new A.Z("directions-view-model:service-metadata-unavailable","Cannot load route service metadata",{error:e.t0}),this._serviceDescriptionStatus=K.Failed,this._set("lastError",o),o;case 20:return e.prev=20,this._loadController=null,e.finish(20);case 23:case"end":return e.stop()}}),e,this,[[4,12,20,23]])})));return function(){return e.apply(this,arguments)}}()},{key:"_resolveDefaultTravelMode",value:function(e){var t,n;if(null==this.serviceDescription)return null;var o=this.serviceDescription,r=o.defaultTravelMode,i=o.supportedTravelModes,a=null===(t=(0,x.Z)(/^<(.*)>$/i,{name:1}).exec(e.name))||void 0===t||null===(n=t.groups)||void 0===n?void 0:n.name;if(a){var l=null===i||void 0===i?void 0:i.find((function(e){return e.name.toLocaleLowerCase()===a.trim().toLocaleLowerCase()})),u=null!==l&&void 0!==l?l:r;return z.Z.fromJSON((0,s.Z)((0,s.Z)({},null===u||void 0===u?void 0:u.toJSON()),e.toJSON()))}var c=null===i||void 0===i?void 0:i.find((function(t){return t.name.toLocaleLowerCase()===e.name.toLocaleLowerCase()}));return null!==c&&void 0!==c?c:r}}]),n}((0,J._)(R.Z.EventedAccessor));(0,p._)([(0,b.Cb)()],$.prototype,"_directionsLanguage",null),(0,p._)([(0,b.Cb)()],$.prototype,"_routeController",void 0),(0,p._)([(0,b.Cb)()],$.prototype,"_serviceDescriptionStatus",void 0),(0,p._)([(0,b.Cb)()],$.prototype,"apiKey",void 0),(0,p._)([(0,b.Cb)()],$.prototype,"defaultTravelMode",void 0),(0,p._)([(0,b.Cb)()],$.prototype,"departureTime",void 0),(0,p._)([(0,b.Cb)()],$.prototype,"formattedEta",null),(0,p._)([(0,b.Cb)({readOnly:!0})],$.prototype,"impedanceAttribute",null),(0,p._)([(0,b.Cb)()],$.prototype,"lastError",void 0),(0,p._)([(0,b.Cb)({readOnly:!0})],$.prototype,"lastRoute",void 0),(0,p._)([(0,b.Cb)()],$.prototype,"layer",void 0),(0,p._)([(0,b.Cb)({type:Number,range:{min:2,max:50},nonNullable:!0})],$.prototype,"maxStops",void 0),(0,p._)([(0,b.Cb)({type:Z.Z,nonNullable:!0})],$.prototype,"routeParameters",void 0),(0,p._)([(0,b.Cb)()],$.prototype,"selectedTravelMode",null),(0,p._)([(0,b.Cb)({readOnly:!0})],$.prototype,"serviceDescription",void 0),(0,p._)([(0,b.Cb)({readOnly:!0})],$.prototype,"state",null),(0,p._)([(0,b.Cb)({readOnly:!0})],$.prototype,"timeAttribute",null),(0,p._)([(0,b.Cb)()],$.prototype,"travelModes",null),(0,p._)([(0,b.Cb)()],$.prototype,"view",void 0),(0,p._)([(0,b.Cb)()],$.prototype,"getDirections",null),(0,p._)([(0,b.Cb)()],$.prototype,"zoomToRoute",null);var ee=$=(0,p._)([(0,S.j)("esri.widgets.Directions.DirectionsViewModel")],$),te=n(7575),ne=n(8905),oe=(n(80975),n(80532)),re=n(67005),ie="esri-save-layer",ae={panel:"".concat(ie),error:"".concat(ie,"__error"),errorIcon:"".concat(ie,"__error-icon"),errorLabel:"".concat(ie,"__error-label"),layerNameLabel:"".concat(ie,"__layer-name-label"),portalFolderLabel:"".concat(ie,"__portal-folder-label"),processLabel:"".concat(ie,"__process-label"),processLoader:"".concat(ie,"__process-loader")},le=function(e){(0,d.Z)(o,e);var t=(0,v.Z)(o);function o(e,n){var r;return(0,u.Z)(this,o),(r=t.call(this,e,n))._folders=null,r._layer=null,r._layerNameInput=null,r._portalFolderCombobox=null,r._userName=null,r.messages=null,r.messagesCommon=null,r.messagesIdentity=null,r.opened=!1,r.state="initialized",r.close=function(){r.opened=!1,r.state="initialized"},r}return(0,c.Z)(o,[{key:"loadDependencies",value:function(){return(0,ne.h)({button:function(){return Promise.all([n.e(92358),n.e(46895),n.e(54438),n.e(14105),n.e(32275)]).then(n.bind(n,32275))},combobox:function(){return Promise.all([n.e(92358),n.e(46895),n.e(54438),n.e(89219),n.e(1579),n.e(34504),n.e(63017),n.e(70419)]).then(n.bind(n,70419))},"combobox-item":function(){return Promise.all([n.e(92358),n.e(15862)]).then(n.bind(n,15862))},icon:function(){return Promise.all([n.e(92358),n.e(87474)]).then(n.bind(n,87474))},input:function(){return Promise.all([n.e(92358),n.e(46895),n.e(54438),n.e(8715),n.e(16746)]).then(n.bind(n,75655))},label:function(){return Promise.all([n.e(92358),n.e(35738)]).then(n.bind(n,35738))},loader:function(){return Promise.all([n.e(92358),n.e(46895),n.e(92382)]).then(n.bind(n,92382))},panel:function(){return Promise.all([n.e(92358),n.e(46895),n.e(89219),n.e(63839),n.e(65138),n.e(2654),n.e(23635),n.e(89524),n.e(85026)]).then(n.bind(n,85026))}})}},{key:"label",get:function(){var e,t;return null!==(e=null===(t=this.messages)||void 0===t?void 0:t.widgetLabel)&&void 0!==e?e:""},set:function(e){this._overrideIfSome("label",e)}},{key:"open",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.state="initialized",this.opened=!0,this._layer=t,this.state="connect-to-portal",n=te.Z.getDefault(),e.prev=2,e.next=5,n.signIn();case 5:e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(2),e.abrupt("return",void((0,O.D_)(e.t0)||"identity-manager:user-aborted"===e.t0.name?this.close():this.state="connect-to-portal-error"));case 10:return this.state="fetch-portal-information",o=n.user,this._userName=null===o||void 0===o?void 0:o.username,e.prev=13,e.next=16,null===o||void 0===o?void 0:o.fetchFolders();case 16:this._folders=e.sent,e.next=22;break;case 19:return e.prev=19,e.t1=e.catch(13),e.abrupt("return",void(this.state="fetch-portal-information-error"));case 22:this.state="save-layer";case 23:case"end":return e.stop()}}),e,this,[[2,7],[13,19]])})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){switch(this.state){case"initialized":return this._renderInitialized();case"connect-to-portal":return this._renderProcess(this.messagesIdentity.lblSigning);case"connect-to-portal-error":return this._renderError(this.messages.errors.authenticating);case"fetch-portal-information":return this._renderProcess(this.messages.processing.fetching);case"fetch-portal-information-error":return this._renderError(this.messages.errors.fetching);case"save-layer":return this._renderSaveLayer();case"saving":return this._renderProcess(this.messages.processing.saving);case"saving-error":return this._renderError(this.messages.errors.saving)}}},{key:"_renderError",value:function(e){return(0,re.u)("calcite-panel",{class:ae.panel,heading:this.messages.widgetLabel,key:"".concat(ie,"-error-panel")},(0,re.u)("div",{class:ae.error},(0,re.u)("calcite-icon",{class:ae.errorIcon,icon:"exclamation-mark-triangle",scale:"l",textLabel:this.messagesCommon.errorMessage}),(0,re.u)("calcite-label",{class:ae.errorLabel},e)),(0,re.u)("calcite-button",{appearance:"outline",onclick:this.close,slot:"footer-actions",width:"half"},this.messagesCommon.close))}},{key:"_renderInitialized",value:function(){return(0,re.u)("calcite-panel",{class:ae.panel,heading:this.messages.widgetLabel,key:"".concat(ie,"-initialize-panel")})}},{key:"_renderProcess",value:function(e){return(0,re.u)("calcite-panel",{class:ae.panel,heading:this.messages.widgetLabel,key:"".concat(ie,"-process-panel")},(0,re.u)("calcite-loader",{class:ae.processLoader,label:e}),(0,re.u)("calcite-label",{alignment:"center",class:ae.processLabel},e))}},{key:"_renderSaveLayer",value:function(){var e=this;if(null==this._layer||null==this._folders||null==this._userName)return this._renderInitialized();var t=this._layer.stops,n="".concat(t.at(0).name," - ").concat(t.at(-1).name),o=this._folders.map((function(e){var t;return(0,re.u)("calcite-combobox-item",{key:"".concat(ie,"-folder-").concat(e.id),textLabel:null!==(t=e.title)&&void 0!==t?t:"",value:e.id})}));return o.unshift((0,re.u)("calcite-combobox-item",{key:"".concat(ie,"-folder-home"),selected:!0,textLabel:"".concat(this._userName," (").concat(this.messagesCommon.home,")"),value:null})),(0,re.u)("calcite-panel",{class:ae.panel,heading:this.messages.widgetLabel,key:"".concat(ie,"-save-panel")},(0,re.u)("calcite-label",{class:ae.layerNameLabel},this.messages.laverName,(0,re.u)("calcite-input",{afterCreate:function(t){e._layerNameInput=t},label:this.messages.laverName,value:n})),(0,re.u)("calcite-label",{class:ae.portalFolderLabel},this.messages.saveInFolder,(0,re.u)("calcite-combobox",{afterCreate:function(t){e._portalFolderCombobox=t},label:this.messages.saveInFolder,overlayPositioning:"fixed",selectionMode:"single"},o)),(0,re.u)("calcite-button",{onclick:function(){return e._saveButtonClick()},slot:"footer-actions",width:"half"},this.messagesCommon.save),(0,re.u)("calcite-button",{appearance:"outline",onclick:function(){e.close()},slot:"footer-actions",width:"half"},this.messagesCommon.cancel))}},{key:"_saveButtonClick",value:function(){var e=this;this.state="saving",this._saveLayer().then((function(){e.close()})).catch((function(){e.state="saving-error"}))}},{key:"_saveLayer",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var t,n,o,i,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this._layer&&null!=this._folders){e.next=2;break}return e.abrupt("return");case 2:return o=null===(t=this._layerNameInput)||void 0===t?void 0:t.value,i=null===(n=this._portalFolderCombobox)||void 0===n?void 0:n.value,a=this._folders.find((function(e){return e.id===i})),e.next=5,this._layer.saveAs({title:o},{folder:a});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),o}(M.Z);(0,p._)([(0,b.Cb)()],le.prototype,"label",null),(0,p._)([(0,b.Cb)(),(0,oe.H)("esri/widgets/support/t9n/SaveLayer")],le.prototype,"messages",void 0),(0,p._)([(0,b.Cb)(),(0,oe.H)("esri/t9n/common")],le.prototype,"messagesCommon",void 0),(0,p._)([(0,b.Cb)(),(0,oe.H)("esri/identity/t9n/identity")],le.prototype,"messagesIdentity",void 0),(0,p._)([(0,b.Cb)()],le.prototype,"opened",void 0),(0,p._)([(0,b.Cb)()],le.prototype,"state",void 0),le=(0,p._)([(0,S.j)("esri.widgets.Directions.components.SaveLayer")],le);var se=n(62197),ue=n(7021),ce=n(96919),de=n(33095),ve=n(78088);function he(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?he(Object(n),!0).forEach((function(t){me(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):he(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function fe(e){return fe="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fe(e)}function me(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ge(){return ge=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},ge.apply(this,arguments)}function _e(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function ye(e){if("undefined"!==typeof window&&window.navigator)return!!navigator.userAgent.match(e)}var be=ye(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),we=ye(/Edge/i),Se=ye(/firefox/i),ke=ye(/safari/i)&&!ye(/chrome/i)&&!ye(/android/i),Ce=ye(/iP(ad|od|hone)/i),Te=ye(/chrome/i)&&ye(/android/i),De={capture:!1,passive:!1};function Me(e,t,n){e.addEventListener(t,n,!be&&De)}function Ee(e,t,n){e.removeEventListener(t,n,!be&&De)}function Ie(e,t){if(t){if(">"===t[0]&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch(n){return!1}return!1}}function xe(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function Pe(e,t,n,o){if(e){n=n||document;do{if(null!=t&&(">"===t[0]?e.parentNode===n&&Ie(e,t):Ie(e,t))||o&&e===n)return e;if(e===n)break}while(e=xe(e))}return null}var Ae,Re=/\s+/g;function Oe(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var o=(" "+e.className+" ").replace(Re," ").replace(" "+t+" "," ");e.className=(o+(n?" "+t:"")).replace(Re," ")}}function Le(e,t,n){var o=e&&e.style;if(o){if(void 0===n)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),void 0===t?n:n[t];t in o||-1!==t.indexOf("webkit")||(t="-webkit-"+t),o[t]=n+("string"===typeof n?"":"px")}}function Ne(e,t){var n="";if("string"===typeof e)n=e;else do{var o=Le(e,"transform");o&&"none"!==o&&(n=o+" "+n)}while(!t&&(e=e.parentNode));var r=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return r&&new r(n)}function Be(e,t,n){if(e){var o=e.getElementsByTagName(t),r=0,i=o.length;if(n)for(;r<i;r++)n(o[r],r);return o}return[]}function Ze(){var e=document.scrollingElement;return e||document.documentElement}function ze(e,t,n,o,r){if(e.getBoundingClientRect||e===window){var i,a,l,s,u,c,d;if(e!==window&&e.parentNode&&e!==Ze()?(a=(i=e.getBoundingClientRect()).top,l=i.left,s=i.bottom,u=i.right,c=i.height,d=i.width):(a=0,l=0,s=window.innerHeight,u=window.innerWidth,c=window.innerHeight,d=window.innerWidth),(t||n)&&e!==window&&(r=r||e.parentNode,!be))do{if(r&&r.getBoundingClientRect&&("none"!==Le(r,"transform")||n&&"static"!==Le(r,"position"))){var v=r.getBoundingClientRect();a-=v.top+parseInt(Le(r,"border-top-width")),l-=v.left+parseInt(Le(r,"border-left-width")),s=a+i.height,u=l+i.width;break}}while(r=r.parentNode);if(o&&e!==window){var h=Ne(r||e),p=h&&h.a,f=h&&h.d;h&&(s=(a/=f)+(c/=f),u=(l/=p)+(d/=p))}return{top:a,left:l,bottom:s,right:u,width:d,height:c}}}function Fe(e,t,n){for(var o=We(e,!0),r=ze(e)[t];o;){var i=ze(o)[n];if(!("top"===n||"left"===n?r>=i:r<=i))return o;if(o===Ze())break;o=We(o,!1)}return!1}function He(e,t,n,o){for(var r=0,i=0,a=e.children;i<a.length;){if("none"!==a[i].style.display&&a[i]!==qt.ghost&&(o||a[i]!==qt.dragged)&&Pe(a[i],n.draggable,e,!1)){if(r===t)return a[i];r++}i++}return null}function Ye(e,t){for(var n=e.lastElementChild;n&&(n===qt.ghost||"none"===Le(n,"display")||t&&!Ie(n,t));)n=n.previousElementSibling;return n||null}function Ue(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)"TEMPLATE"===e.nodeName.toUpperCase()||e===qt.clone||t&&!Ie(e,t)||n++;return n}function Xe(e){var t=0,n=0,o=Ze();if(e)do{var r=Ne(e),i=r.a,a=r.d;t+=e.scrollLeft*i,n+=e.scrollTop*a}while(e!==o&&(e=e.parentNode));return[t,n]}function We(e,t){if(!e||!e.getBoundingClientRect)return Ze();var n=e,o=!1;do{if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var r=Le(n);if(n.clientWidth<n.scrollWidth&&("auto"==r.overflowX||"scroll"==r.overflowX)||n.clientHeight<n.scrollHeight&&("auto"==r.overflowY||"scroll"==r.overflowY)){if(!n.getBoundingClientRect||n===document.body)return Ze();if(o||t)return n;o=!0}}}while(n=n.parentNode);return Ze()}function je(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}function Ge(e,t){return function(){if(!Ae){var n=arguments,o=this;1===n.length?e.call(o,n[0]):e.apply(o,n),Ae=setTimeout((function(){Ae=void 0}),t)}}}function Ve(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function Ke(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}function qe(e,t,n){var o={};return Array.from(e.children).forEach((function(r){var i,a,l,s;if(Pe(r,t.draggable,e,!1)&&!r.animated&&r!==n){var u=ze(r);o.left=Math.min(null!==(i=o.left)&&void 0!==i?i:1/0,u.left),o.top=Math.min(null!==(a=o.top)&&void 0!==a?a:1/0,u.top),o.right=Math.max(null!==(l=o.right)&&void 0!==l?l:-1/0,u.right),o.bottom=Math.max(null!==(s=o.bottom)&&void 0!==s?s:-1/0,u.bottom)}})),o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}var Je="Sortable"+(new Date).getTime();function Qe(){var e,t=[];return{captureAnimationState:function(){(t=[],this.options.animation)&&[].slice.call(this.el.children).forEach((function(e){if("none"!==Le(e,"display")&&e!==qt.ghost){t.push({target:e,rect:ze(e)});var n=pe({},t[t.length-1].rect);if(e.thisAnimationDuration){var o=Ne(e,!0);o&&(n.top-=o.f,n.left-=o.e)}e.fromRect=n}}))},addAnimationState:function(e){t.push(e)},removeAnimationState:function(e){t.splice(function(e,t){for(var n in e)if(e.hasOwnProperty(n))for(var o in t)if(t.hasOwnProperty(o)&&t[o]===e[n][o])return Number(n);return-1}(t,{target:e}),1)},animateAll:function(n){var o=this;if(!this.options.animation)return clearTimeout(e),void("function"===typeof n&&n());var r=!1,i=0;t.forEach((function(e){var t=0,n=e.target,a=n.fromRect,l=ze(n),s=n.prevFromRect,u=n.prevToRect,c=e.rect,d=Ne(n,!0);d&&(l.top-=d.f,l.left-=d.e),n.toRect=l,n.thisAnimationDuration&&je(s,l)&&!je(a,l)&&(c.top-l.top)/(c.left-l.left)===(a.top-l.top)/(a.left-l.left)&&(t=function(e,t,n,o){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*o.animation}(c,s,u,o.options)),je(l,a)||(n.prevFromRect=a,n.prevToRect=l,t||(t=o.options.animation),o.animate(n,c,l,t)),t&&(r=!0,i=Math.max(i,t),clearTimeout(n.animationResetTimer),n.animationResetTimer=setTimeout((function(){n.animationTime=0,n.prevFromRect=null,n.fromRect=null,n.prevToRect=null,n.thisAnimationDuration=null}),t),n.thisAnimationDuration=t)})),clearTimeout(e),r?e=setTimeout((function(){"function"===typeof n&&n()}),i):"function"===typeof n&&n(),t=[]},animate:function(e,t,n,o){if(o){Le(e,"transition",""),Le(e,"transform","");var r=Ne(this.el),i=r&&r.a,a=r&&r.d,l=(t.left-n.left)/(i||1),s=(t.top-n.top)/(a||1);e.animatingX=!!l,e.animatingY=!!s,Le(e,"transform","translate3d("+l+"px,"+s+"px,0)"),this.forRepaintDummy=function(e){return e.offsetWidth}(e),Le(e,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),Le(e,"transform","translate3d(0,0,0)"),"number"===typeof e.animated&&clearTimeout(e.animated),e.animated=setTimeout((function(){Le(e,"transition",""),Le(e,"transform",""),e.animated=!1,e.animatingX=!1,e.animatingY=!1}),o)}}}}var $e=[],et={initializeByDefault:!0},tt={mount:function(e){for(var t in et)et.hasOwnProperty(t)&&!(t in e)&&(e[t]=et[t]);$e.forEach((function(t){if(t.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")})),$e.push(e)},pluginEvent:function(e,t,n){var o=this;this.eventCanceled=!1,n.cancel=function(){o.eventCanceled=!0};var r=e+"Global";$e.forEach((function(o){t[o.pluginName]&&(t[o.pluginName][r]&&t[o.pluginName][r](pe({sortable:t},n)),t.options[o.pluginName]&&t[o.pluginName][e]&&t[o.pluginName][e](pe({sortable:t},n)))}))},initializePlugins:function(e,t,n,o){for(var r in $e.forEach((function(o){var r=o.pluginName;if(e.options[r]||o.initializeByDefault){var i=new o(e,t,e.options);i.sortable=e,i.options=e.options,e[r]=i,ge(n,i.defaults)}})),e.options)if(e.options.hasOwnProperty(r)){var i=this.modifyOption(e,r,e.options[r]);"undefined"!==typeof i&&(e.options[r]=i)}},getEventProperties:function(e,t){var n={};return $e.forEach((function(o){"function"===typeof o.eventProperties&&ge(n,o.eventProperties.call(t[o.pluginName],e))})),n},modifyOption:function(e,t,n){var o;return $e.forEach((function(r){e[r.pluginName]&&r.optionListeners&&"function"===typeof r.optionListeners[t]&&(o=r.optionListeners[t].call(e[r.pluginName],n))})),o}};function nt(e){var t=e.sortable,n=e.rootEl,o=e.name,r=e.targetEl,i=e.cloneEl,a=e.toEl,l=e.fromEl,s=e.oldIndex,u=e.newIndex,c=e.oldDraggableIndex,d=e.newDraggableIndex,v=e.originalEvent,h=e.putSortable,p=e.extraEventProperties;if(t=t||n&&n[Je]){var f,m=t.options,g="on"+o.charAt(0).toUpperCase()+o.substr(1);!window.CustomEvent||be||we?(f=document.createEvent("Event")).initEvent(o,!0,!0):f=new CustomEvent(o,{bubbles:!0,cancelable:!0}),f.to=a||n,f.from=l||n,f.item=r||n,f.clone=i,f.oldIndex=s,f.newIndex=u,f.oldDraggableIndex=c,f.newDraggableIndex=d,f.originalEvent=v,f.pullMode=h?h.lastPutMode:void 0;var _=pe(pe({},p),tt.getEventProperties(o,t));for(var y in _)f[y]=_[y];n&&n.dispatchEvent(f),m[g]&&m[g].call(t,f)}}var ot=["evt"],rt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=n.evt,r=_e(n,ot);tt.pluginEvent.bind(qt)(e,t,pe({dragEl:at,parentEl:lt,ghostEl:st,rootEl:ut,nextEl:ct,lastDownEl:dt,cloneEl:vt,cloneHidden:ht,dragStarted:Dt,putSortable:yt,activeSortable:qt.active,originalEvent:o,oldIndex:pt,oldDraggableIndex:mt,newIndex:ft,newDraggableIndex:gt,hideGhostForTarget:jt,unhideGhostForTarget:Gt,cloneNowHidden:function(){ht=!0},cloneNowShown:function(){ht=!1},dispatchSortableEvent:function(e){it({sortable:t,name:e,originalEvent:o})}},r))};function it(e){nt(pe({putSortable:yt,cloneEl:vt,targetEl:at,rootEl:ut,oldIndex:pt,oldDraggableIndex:mt,newIndex:ft,newDraggableIndex:gt},e))}var at,lt,st,ut,ct,dt,vt,ht,pt,ft,mt,gt,_t,yt,bt,wt,St,kt,Ct,Tt,Dt,Mt,Et,It,xt,Pt=!1,At=!1,Rt=[],Ot=!1,Lt=!1,Nt=[],Bt=!1,Zt=[],zt="undefined"!==typeof document,Ft=Ce,Ht=we||be?"cssFloat":"float",Yt=zt&&!Te&&!Ce&&"draggable"in document.createElement("div"),Ut=function(){if(zt){if(be)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}}(),Xt=function(e,t){var n=Le(e),o=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),r=He(e,0,t),i=He(e,1,t),a=r&&Le(r),l=i&&Le(i),s=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+ze(r).width,u=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+ze(i).width;if("flex"===n.display)return"column"===n.flexDirection||"column-reverse"===n.flexDirection?"vertical":"horizontal";if("grid"===n.display)return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(r&&a.float&&"none"!==a.float){var c="left"===a.float?"left":"right";return!i||"both"!==l.clear&&l.clear!==c?"horizontal":"vertical"}return r&&("block"===a.display||"flex"===a.display||"table"===a.display||"grid"===a.display||s>=o&&"none"===n[Ht]||i&&"none"===n[Ht]&&s+u>o)?"vertical":"horizontal"},Wt=function(e){function t(e,n){return function(o,r,i,a){var l=o.options.group.name&&r.options.group.name&&o.options.group.name===r.options.group.name;if(null==e&&(n||l))return!0;if(null==e||!1===e)return!1;if(n&&"clone"===e)return e;if("function"===typeof e)return t(e(o,r,i,a),n)(o,r,i,a);var s=(n?o:r).options.group.name;return!0===e||"string"===typeof e&&e===s||e.join&&e.indexOf(s)>-1}}var n={},o=e.group;o&&"object"==fe(o)||(o={name:o}),n.name=o.name,n.checkPull=t(o.pull,!0),n.checkPut=t(o.put),n.revertClone=o.revertClone,e.group=n},jt=function(){!Ut&&st&&Le(st,"display","none")},Gt=function(){!Ut&&st&&Le(st,"display","")};zt&&!Te&&document.addEventListener("click",(function(e){if(At)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),At=!1,!1}),!0);var Vt=function(e){if(at){var t=function(e,t){var n;return Rt.some((function(o){var r=o[Je].options.emptyInsertThreshold;if(r&&!Ye(o)){var i=ze(o),a=e>=i.left-r&&e<=i.right+r,l=t>=i.top-r&&t<=i.bottom+r;return a&&l?n=o:void 0}})),n}((e=e.touches?e.touches[0]:e).clientX,e.clientY);if(t){var n={};for(var o in e)e.hasOwnProperty(o)&&(n[o]=e[o]);n.target=n.rootEl=t,n.preventDefault=void 0,n.stopPropagation=void 0,t[Je]._onDragOver(n)}}},Kt=function(e){at&&at.parentNode[Je]._isOutsideThisEl(e.target)};function qt(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=ge({},t),e[Je]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Xt(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==qt.supportPointer&&"PointerEvent"in window&&!ke,emptyInsertThreshold:5};for(var o in tt.initializePlugins(this,e,n),n)!(o in t)&&(t[o]=n[o]);for(var r in Wt(t),this)"_"===r.charAt(0)&&"function"===typeof this[r]&&(this[r]=this[r].bind(this));this.nativeDraggable=!t.forceFallback&&Yt,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?Me(e,"pointerdown",this._onTapStart):(Me(e,"mousedown",this._onTapStart),Me(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(Me(e,"dragover",this),Me(e,"dragenter",this)),Rt.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),ge(this,Qe())}function Jt(e,t,n,o,r,i,a,l){var s,u,c=e[Je],d=c.options.onMove;return!window.CustomEvent||be||we?(s=document.createEvent("Event")).initEvent("move",!0,!0):s=new CustomEvent("move",{bubbles:!0,cancelable:!0}),s.to=t,s.from=e,s.dragged=n,s.draggedRect=o,s.related=r||t,s.relatedRect=i||ze(t),s.willInsertAfter=l,s.originalEvent=a,e.dispatchEvent(s),d&&(u=d.call(c,s,a)),u}function Qt(e){e.draggable=!1}function $t(){Bt=!1}function en(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,o=0;n--;)o+=t.charCodeAt(n);return o.toString(36)}function tn(e){return setTimeout(e,0)}function nn(e){return clearTimeout(e)}qt.prototype={constructor:qt,_isOutsideThisEl:function(e){this.el.contains(e)||e===this.el||(Mt=null)},_getDirection:function(e,t){return"function"===typeof this.options.direction?this.options.direction.call(this,e,t,at):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,n=this.el,o=this.options,r=o.preventOnFilter,i=e.type,a=e.touches&&e.touches[0]||e.pointerType&&"touch"===e.pointerType&&e,l=(a||e).target,s=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,u=o.filter;if(function(e){Zt.length=0;var t=e.getElementsByTagName("input"),n=t.length;for(;n--;){var o=t[n];o.checked&&Zt.push(o)}}(n),!at&&!(/mousedown|pointerdown/.test(i)&&0!==e.button||o.disabled)&&!s.isContentEditable&&(this.nativeDraggable||!ke||!l||"SELECT"!==l.tagName.toUpperCase())&&(!(l=Pe(l,o.draggable,n,!1))||!l.animated)&&dt!==l){if(pt=Ue(l),mt=Ue(l,o.draggable),"function"===typeof u){if(u.call(this,e,l,this))return it({sortable:t,rootEl:s,name:"filter",targetEl:l,toEl:n,fromEl:n}),rt("filter",t,{evt:e}),void(r&&e.cancelable&&e.preventDefault())}else if(u&&(u=u.split(",").some((function(o){if(o=Pe(s,o.trim(),n,!1))return it({sortable:t,rootEl:o,name:"filter",targetEl:l,fromEl:n,toEl:n}),rt("filter",t,{evt:e}),!0}))))return void(r&&e.cancelable&&e.preventDefault());o.handle&&!Pe(s,o.handle,n,!1)||this._prepareDragStart(e,a,l)}}},_prepareDragStart:function(e,t,n){var o,r=this,i=r.el,a=r.options,l=i.ownerDocument;if(n&&!at&&n.parentNode===i){var s=ze(n);if(ut=i,lt=(at=n).parentNode,ct=at.nextSibling,dt=n,_t=a.group,qt.dragged=at,bt={target:at,clientX:(t||e).clientX,clientY:(t||e).clientY},Ct=bt.clientX-s.left,Tt=bt.clientY-s.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,at.style["will-change"]="all",o=function(){rt("delayEnded",r,{evt:e}),qt.eventCanceled?r._onDrop():(r._disableDelayedDragEvents(),!Se&&r.nativeDraggable&&(at.draggable=!0),r._triggerDragStart(e,t),it({sortable:r,name:"choose",originalEvent:e}),Oe(at,a.chosenClass,!0))},a.ignore.split(",").forEach((function(e){Be(at,e.trim(),Qt)})),Me(l,"dragover",Vt),Me(l,"mousemove",Vt),Me(l,"touchmove",Vt),Me(l,"mouseup",r._onDrop),Me(l,"touchend",r._onDrop),Me(l,"touchcancel",r._onDrop),Se&&this.nativeDraggable&&(this.options.touchStartThreshold=4,at.draggable=!0),rt("delayStart",this,{evt:e}),!a.delay||a.delayOnTouchOnly&&!t||this.nativeDraggable&&(we||be))o();else{if(qt.eventCanceled)return void this._onDrop();Me(l,"mouseup",r._disableDelayedDrag),Me(l,"touchend",r._disableDelayedDrag),Me(l,"touchcancel",r._disableDelayedDrag),Me(l,"mousemove",r._delayedDragTouchMoveHandler),Me(l,"touchmove",r._delayedDragTouchMoveHandler),a.supportPointer&&Me(l,"pointermove",r._delayedDragTouchMoveHandler),r._dragStartTimer=setTimeout(o,a.delay)}}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){at&&Qt(at),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;Ee(e,"mouseup",this._disableDelayedDrag),Ee(e,"touchend",this._disableDelayedDrag),Ee(e,"touchcancel",this._disableDelayedDrag),Ee(e,"mousemove",this._delayedDragTouchMoveHandler),Ee(e,"touchmove",this._delayedDragTouchMoveHandler),Ee(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||"touch"==e.pointerType&&e,!this.nativeDraggable||t?this.options.supportPointer?Me(document,"pointermove",this._onTouchMove):Me(document,t?"touchmove":"mousemove",this._onTouchMove):(Me(at,"dragend",this),Me(ut,"dragstart",this._onDragStart));try{document.selection?tn((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch(n){}},_dragStarted:function(e,t){if(Pt=!1,ut&&at){rt("dragStarted",this,{evt:t}),this.nativeDraggable&&Me(document,"dragover",Kt);var n=this.options;!e&&Oe(at,n.dragClass,!1),Oe(at,n.ghostClass,!0),qt.active=this,e&&this._appendGhost(),it({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(wt){this._lastX=wt.clientX,this._lastY=wt.clientY,jt();for(var e=document.elementFromPoint(wt.clientX,wt.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(wt.clientX,wt.clientY))!==t;)t=e;if(at.parentNode[Je]._isOutsideThisEl(e),t)do{if(t[Je]){if(t[Je]._onDragOver({clientX:wt.clientX,clientY:wt.clientY,target:e,rootEl:t})&&!this.options.dragoverBubble)break}e=t}while(t=t.parentNode);Gt()}},_onTouchMove:function(e){if(bt){var t=this.options,n=t.fallbackTolerance,o=t.fallbackOffset,r=e.touches?e.touches[0]:e,i=st&&Ne(st,!0),a=st&&i&&i.a,l=st&&i&&i.d,s=Ft&&xt&&Xe(xt),u=(r.clientX-bt.clientX+o.x)/(a||1)+(s?s[0]-Nt[0]:0)/(a||1),c=(r.clientY-bt.clientY+o.y)/(l||1)+(s?s[1]-Nt[1]:0)/(l||1);if(!qt.active&&!Pt){if(n&&Math.max(Math.abs(r.clientX-this._lastX),Math.abs(r.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}if(st){i?(i.e+=u-(St||0),i.f+=c-(kt||0)):i={a:1,b:0,c:0,d:1,e:u,f:c};var d="matrix(".concat(i.a,",").concat(i.b,",").concat(i.c,",").concat(i.d,",").concat(i.e,",").concat(i.f,")");Le(st,"webkitTransform",d),Le(st,"mozTransform",d),Le(st,"msTransform",d),Le(st,"transform",d),St=u,kt=c,wt=r}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!st){var e=this.options.fallbackOnBody?document.body:ut,t=ze(at,!0,Ft,!0,e),n=this.options;if(Ft){for(xt=e;"static"===Le(xt,"position")&&"none"===Le(xt,"transform")&&xt!==document;)xt=xt.parentNode;xt!==document.body&&xt!==document.documentElement?(xt===document&&(xt=Ze()),t.top+=xt.scrollTop,t.left+=xt.scrollLeft):xt=Ze(),Nt=Xe(xt)}Oe(st=at.cloneNode(!0),n.ghostClass,!1),Oe(st,n.fallbackClass,!0),Oe(st,n.dragClass,!0),Le(st,"transition",""),Le(st,"transform",""),Le(st,"box-sizing","border-box"),Le(st,"margin",0),Le(st,"top",t.top),Le(st,"left",t.left),Le(st,"width",t.width),Le(st,"height",t.height),Le(st,"opacity","0.8"),Le(st,"position",Ft?"absolute":"fixed"),Le(st,"zIndex","100000"),Le(st,"pointerEvents","none"),qt.ghost=st,e.appendChild(st),Le(st,"transform-origin",Ct/parseInt(st.style.width)*100+"% "+Tt/parseInt(st.style.height)*100+"%")}},_onDragStart:function(e,t){var n=this,o=e.dataTransfer,r=n.options;rt("dragStart",this,{evt:e}),qt.eventCanceled?this._onDrop():(rt("setupClone",this),qt.eventCanceled||((vt=Ke(at)).removeAttribute("id"),vt.draggable=!1,vt.style["will-change"]="",this._hideClone(),Oe(vt,this.options.chosenClass,!1),qt.clone=vt),n.cloneId=tn((function(){rt("clone",n),qt.eventCanceled||(n.options.removeCloneOnHide||ut.insertBefore(vt,at),n._hideClone(),it({sortable:n,name:"clone"}))})),!t&&Oe(at,r.dragClass,!0),t?(At=!0,n._loopId=setInterval(n._emulateDragOver,50)):(Ee(document,"mouseup",n._onDrop),Ee(document,"touchend",n._onDrop),Ee(document,"touchcancel",n._onDrop),o&&(o.effectAllowed="move",r.setData&&r.setData.call(n,o,at)),Me(document,"drop",n),Le(at,"transform","translateZ(0)")),Pt=!0,n._dragStartId=tn(n._dragStarted.bind(n,t,e)),Me(document,"selectstart",n),Dt=!0,ke&&Le(document.body,"user-select","none"))},_onDragOver:function(e){var t,n,o,r,i=this.el,a=e.target,l=this.options,s=l.group,u=qt.active,c=_t===s,d=l.sort,v=yt||u,h=this,p=!1;if(!Bt){if(void 0!==e.preventDefault&&e.cancelable&&e.preventDefault(),a=Pe(a,l.draggable,i,!0),I("dragOver"),qt.eventCanceled)return p;if(at.contains(e.target)||a.animated&&a.animatingX&&a.animatingY||h._ignoreWhileAnimating===a)return P(!1);if(At=!1,u&&!l.disabled&&(c?d||(o=lt!==ut):yt===this||(this.lastPutMode=_t.checkPull(this,u,at,e))&&s.checkPut(this,u,at,e))){if(r="vertical"===this._getDirection(e,a),t=ze(at),I("dragOverValid"),qt.eventCanceled)return p;if(o)return lt=ut,x(),this._hideClone(),I("revert"),qt.eventCanceled||(ct?ut.insertBefore(at,ct):ut.appendChild(at)),P(!0);var f=Ye(i,l.draggable);if(!f||function(e,t,n){var o=ze(Ye(n.el,n.options.draggable)),r=qe(n.el,n.options,st),i=10;return t?e.clientX>r.right+i||e.clientY>o.bottom&&e.clientX>o.left:e.clientY>r.bottom+i||e.clientX>o.right&&e.clientY>o.top}(e,r,this)&&!f.animated){if(f===at)return P(!1);if(f&&i===e.target&&(a=f),a&&(n=ze(a)),!1!==Jt(ut,i,at,t,a,n,e,!!a))return x(),f&&f.nextSibling?i.insertBefore(at,f.nextSibling):i.appendChild(at),lt=i,A(),P(!0)}else if(f&&function(e,t,n){var o=ze(He(n.el,0,n.options,!0)),r=qe(n.el,n.options,st),i=10;return t?e.clientX<r.left-i||e.clientY<o.top&&e.clientX<o.right:e.clientY<r.top-i||e.clientY<o.bottom&&e.clientX<o.left}(e,r,this)){var m=He(i,0,l,!0);if(m===at)return P(!1);if(n=ze(a=m),!1!==Jt(ut,i,at,t,a,n,e,!1))return x(),i.insertBefore(at,m),lt=i,A(),P(!0)}else if(a.parentNode===i){n=ze(a);var g,_,y,b=at.parentNode!==i,w=!function(e,t,n){var o=n?e.left:e.top,r=n?e.right:e.bottom,i=n?e.width:e.height,a=n?t.left:t.top,l=n?t.right:t.bottom,s=n?t.width:t.height;return o===a||r===l||o+i/2===a+s/2}(at.animated&&at.toRect||t,a.animated&&a.toRect||n,r),S=r?"top":"left",k=Fe(a,"top","top")||Fe(at,"top","top"),C=k?k.scrollTop:void 0;if(Mt!==a&&(_=n[S],Ot=!1,Lt=!w&&l.invertSwap||b),g=function(e,t,n,o,r,i,a,l){var s=o?e.clientY:e.clientX,u=o?n.height:n.width,c=o?n.top:n.left,d=o?n.bottom:n.right,v=!1;if(!a)if(l&&It<u*r){if(!Ot&&(1===Et?s>c+u*i/2:s<d-u*i/2)&&(Ot=!0),Ot)v=!0;else if(1===Et?s<c+It:s>d-It)return-Et}else if(s>c+u*(1-r)/2&&s<d-u*(1-r)/2)return function(e){return Ue(at)<Ue(e)?1:-1}(t);if((v=v||a)&&(s<c+u*i/2||s>d-u*i/2))return s>c+u/2?1:-1;return 0}(e,a,n,r,w?1:l.swapThreshold,null==l.invertedSwapThreshold?l.swapThreshold:l.invertedSwapThreshold,Lt,Mt===a),0!==g){var T=Ue(at);do{T-=g,y=lt.children[T]}while(y&&("none"===Le(y,"display")||y===st))}if(0===g||y===a)return P(!1);Mt=a,Et=g;var D=a.nextElementSibling,M=!1,E=Jt(ut,i,at,t,a,n,e,M=1===g);if(!1!==E)return 1!==E&&-1!==E||(M=1===E),Bt=!0,setTimeout($t,30),x(),M&&!D?i.appendChild(at):a.parentNode.insertBefore(at,M?D:a),k&&Ve(k,0,C-k.scrollTop),lt=at.parentNode,void 0===_||Lt||(It=Math.abs(_-ze(a)[S])),A(),P(!0)}if(i.contains(at))return P(!1)}return!1}function I(l,s){rt(l,h,pe({evt:e,isOwner:c,axis:r?"vertical":"horizontal",revert:o,dragRect:t,targetRect:n,canSort:d,fromSortable:v,target:a,completed:P,onMove:function(n,o){return Jt(ut,i,at,t,n,ze(n),e,o)},changed:A},s))}function x(){I("dragOverAnimationCapture"),h.captureAnimationState(),h!==v&&v.captureAnimationState()}function P(t){return I("dragOverCompleted",{insertion:t}),t&&(c?u._hideClone():u._showClone(h),h!==v&&(Oe(at,yt?yt.options.ghostClass:u.options.ghostClass,!1),Oe(at,l.ghostClass,!0)),yt!==h&&h!==qt.active?yt=h:h===qt.active&&yt&&(yt=null),v===h&&(h._ignoreWhileAnimating=a),h.animateAll((function(){I("dragOverAnimationComplete"),h._ignoreWhileAnimating=null})),h!==v&&(v.animateAll(),v._ignoreWhileAnimating=null)),(a===at&&!at.animated||a===i&&!a.animated)&&(Mt=null),l.dragoverBubble||e.rootEl||a===document||(at.parentNode[Je]._isOutsideThisEl(e.target),!t&&Vt(e)),!l.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),p=!0}function A(){ft=Ue(at),gt=Ue(at,l.draggable),it({sortable:h,name:"change",toEl:i,newIndex:ft,newDraggableIndex:gt,originalEvent:e})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){Ee(document,"mousemove",this._onTouchMove),Ee(document,"touchmove",this._onTouchMove),Ee(document,"pointermove",this._onTouchMove),Ee(document,"dragover",Vt),Ee(document,"mousemove",Vt),Ee(document,"touchmove",Vt)},_offUpEvents:function(){var e=this.el.ownerDocument;Ee(e,"mouseup",this._onDrop),Ee(e,"touchend",this._onDrop),Ee(e,"pointerup",this._onDrop),Ee(e,"touchcancel",this._onDrop),Ee(document,"selectstart",this)},_onDrop:function(e){var t=this.el,n=this.options;ft=Ue(at),gt=Ue(at,n.draggable),rt("drop",this,{evt:e}),lt=at&&at.parentNode,ft=Ue(at),gt=Ue(at,n.draggable),qt.eventCanceled||(Pt=!1,Lt=!1,Ot=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),nn(this.cloneId),nn(this._dragStartId),this.nativeDraggable&&(Ee(document,"drop",this),Ee(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),ke&&Le(document.body,"user-select",""),Le(at,"transform",""),e&&(Dt&&(e.cancelable&&e.preventDefault(),!n.dropBubble&&e.stopPropagation()),st&&st.parentNode&&st.parentNode.removeChild(st),(ut===lt||yt&&"clone"!==yt.lastPutMode)&&vt&&vt.parentNode&&vt.parentNode.removeChild(vt),at&&(this.nativeDraggable&&Ee(at,"dragend",this),Qt(at),at.style["will-change"]="",Dt&&!Pt&&Oe(at,yt?yt.options.ghostClass:this.options.ghostClass,!1),Oe(at,this.options.chosenClass,!1),it({sortable:this,name:"unchoose",toEl:lt,newIndex:null,newDraggableIndex:null,originalEvent:e}),ut!==lt?(ft>=0&&(it({rootEl:lt,name:"add",toEl:lt,fromEl:ut,originalEvent:e}),it({sortable:this,name:"remove",toEl:lt,originalEvent:e}),it({rootEl:lt,name:"sort",toEl:lt,fromEl:ut,originalEvent:e}),it({sortable:this,name:"sort",toEl:lt,originalEvent:e})),yt&&yt.save()):ft!==pt&&ft>=0&&(it({sortable:this,name:"update",toEl:lt,originalEvent:e}),it({sortable:this,name:"sort",toEl:lt,originalEvent:e})),qt.active&&(null!=ft&&-1!==ft||(ft=pt,gt=mt),it({sortable:this,name:"end",toEl:lt,originalEvent:e}),this.save())))),this._nulling()},_nulling:function(){rt("nulling",this),ut=at=lt=st=ct=vt=dt=ht=bt=wt=Dt=ft=gt=pt=mt=Mt=Et=yt=_t=qt.dragged=qt.ghost=qt.clone=qt.active=null,Zt.forEach((function(e){e.checked=!0})),Zt.length=St=kt=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":at&&(this._onDragOver(e),function(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move");e.cancelable&&e.preventDefault()}(e));break;case"selectstart":e.preventDefault()}},toArray:function(){for(var e,t=[],n=this.el.children,o=0,r=n.length,i=this.options;o<r;o++)Pe(e=n[o],i.draggable,this.el,!1)&&t.push(e.getAttribute(i.dataIdAttr)||en(e));return t},sort:function(e,t){var n={},o=this.el;this.toArray().forEach((function(e,t){var r=o.children[t];Pe(r,this.options.draggable,o,!1)&&(n[e]=r)}),this),t&&this.captureAnimationState(),e.forEach((function(e){n[e]&&(o.removeChild(n[e]),o.appendChild(n[e]))})),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return Pe(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var n=this.options;if(void 0===t)return n[e];var o=tt.modifyOption(this,e,t);n[e]="undefined"!==typeof o?o:t,"group"===e&&Wt(n)},destroy:function(){rt("destroy",this);var e=this.el;e[Je]=null,Ee(e,"mousedown",this._onTapStart),Ee(e,"touchstart",this._onTapStart),Ee(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(Ee(e,"dragover",this),Ee(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),(function(e){e.removeAttribute("draggable")})),this._onDrop(),this._disableDelayedDragEvents(),Rt.splice(Rt.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!ht){if(rt("hideClone",this),qt.eventCanceled)return;Le(vt,"display","none"),this.options.removeCloneOnHide&&vt.parentNode&&vt.parentNode.removeChild(vt),ht=!0}},_showClone:function(e){if("clone"===e.lastPutMode){if(ht){if(rt("showClone",this),qt.eventCanceled)return;at.parentNode!=ut||this.options.group.revertClone?ct?ut.insertBefore(vt,ct):ut.appendChild(vt):ut.insertBefore(vt,at),this.options.group.revertClone&&this.animate(at,vt),Le(vt,"display",""),ht=!1}}else this._hideClone()}},zt&&Me(document,"touchmove",(function(e){(qt.active||Pt)&&e.cancelable&&e.preventDefault()})),qt.utils={on:Me,off:Ee,css:Le,find:Be,is:function(e,t){return!!Pe(e,t,e,!1)},extend:function(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},throttle:Ge,closest:Pe,toggleClass:Oe,clone:Ke,index:Ue,nextTick:tn,cancelNextTick:nn,detectDirection:Xt,getChild:He},qt.get=function(e){return e[Je]},qt.mount=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0].constructor===Array&&(t=t[0]),t.forEach((function(e){if(!e.prototype||!e.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(e));e.utils&&(qt.utils=pe(pe({},qt.utils),e.utils)),tt.mount(e)}))},qt.create=function(e,t){return new qt(e,t)},qt.version="1.15.2";var on,rn,an,ln,sn,un,cn=[],dn=!1;function vn(){cn.forEach((function(e){clearInterval(e.pid)})),cn=[]}function hn(){clearInterval(un)}var pn=Ge((function(e,t,n,o){if(t.scroll){var r,i=(e.touches?e.touches[0]:e).clientX,a=(e.touches?e.touches[0]:e).clientY,l=t.scrollSensitivity,s=t.scrollSpeed,u=Ze(),c=!1;rn!==n&&(rn=n,vn(),on=t.scroll,r=t.scrollFn,!0===on&&(on=We(n,!0)));var d=0,v=on;do{var h=v,p=ze(h),f=p.top,m=p.bottom,g=p.left,_=p.right,y=p.width,b=p.height,w=void 0,S=void 0,k=h.scrollWidth,C=h.scrollHeight,T=Le(h),D=h.scrollLeft,M=h.scrollTop;h===u?(w=y<k&&("auto"===T.overflowX||"scroll"===T.overflowX||"visible"===T.overflowX),S=b<C&&("auto"===T.overflowY||"scroll"===T.overflowY||"visible"===T.overflowY)):(w=y<k&&("auto"===T.overflowX||"scroll"===T.overflowX),S=b<C&&("auto"===T.overflowY||"scroll"===T.overflowY));var E=w&&(Math.abs(_-i)<=l&&D+y<k)-(Math.abs(g-i)<=l&&!!D),I=S&&(Math.abs(m-a)<=l&&M+b<C)-(Math.abs(f-a)<=l&&!!M);if(!cn[d])for(var x=0;x<=d;x++)cn[x]||(cn[x]={});cn[d].vx==E&&cn[d].vy==I&&cn[d].el===h||(cn[d].el=h,cn[d].vx=E,cn[d].vy=I,clearInterval(cn[d].pid),0==E&&0==I||(c=!0,cn[d].pid=setInterval(function(){o&&0===this.layer&&qt.active._onTouchMove(sn);var t=cn[this.layer].vy?cn[this.layer].vy*s:0,n=cn[this.layer].vx?cn[this.layer].vx*s:0;"function"===typeof r&&"continue"!==r.call(qt.dragged.parentNode[Je],n,t,e,sn,cn[this.layer].el)||Ve(cn[this.layer].el,n,t)}.bind({layer:d}),24))),d++}while(t.bubbleScroll&&v!==u&&(v=We(v,!1)));dn=c}}),30),fn=function(e){var t=e.originalEvent,n=e.putSortable,o=e.dragEl,r=e.activeSortable,i=e.dispatchSortableEvent,a=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(t){var s=n||r;a();var u=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,c=document.elementFromPoint(u.clientX,u.clientY);l(),s&&!s.el.contains(c)&&(i("spill"),this.onSpill({dragEl:o,putSortable:n}))}};function mn(){}function gn(){}mn.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var o=He(this.sortable.el,this.startIndex,this.options);o?this.sortable.el.insertBefore(t,o):this.sortable.el.appendChild(t),this.sortable.animateAll(),n&&n.animateAll()},drop:fn},ge(mn,{pluginName:"revertOnSpill"}),gn.prototype={onSpill:function(e){var t=e.dragEl,n=e.putSortable||this.sortable;n.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),n.animateAll()},drop:fn},ge(gn,{pluginName:"removeOnSpill"});qt.mount(new function(){function e(){for(var e in this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===e.charAt(0)&&"function"===typeof this[e]&&(this[e]=this[e].bind(this))}return e.prototype={dragStarted:function(e){var t=e.originalEvent;this.sortable.nativeDraggable?Me(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Me(document,"pointermove",this._handleFallbackAutoScroll):t.touches?Me(document,"touchmove",this._handleFallbackAutoScroll):Me(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var t=e.originalEvent;this.options.dragOverBubble||t.rootEl||this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?Ee(document,"dragover",this._handleAutoScroll):(Ee(document,"pointermove",this._handleFallbackAutoScroll),Ee(document,"touchmove",this._handleFallbackAutoScroll),Ee(document,"mousemove",this._handleFallbackAutoScroll)),hn(),vn(),clearTimeout(Ae),Ae=void 0},nulling:function(){sn=rn=on=dn=un=an=ln=null,cn.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,t){var n=this,o=(e.touches?e.touches[0]:e).clientX,r=(e.touches?e.touches[0]:e).clientY,i=document.elementFromPoint(o,r);if(sn=e,t||this.options.forceAutoScrollFallback||we||be||ke){pn(e,this.options,i,t);var a=We(i,!0);!dn||un&&o===an&&r===ln||(un&&hn(),un=setInterval((function(){var i=We(document.elementFromPoint(o,r),!0);i!==a&&(a=i,vn()),pn(e,n.options,i,t)}),10),an=o,ln=r)}else{if(!this.options.bubbleScroll||We(i,!0)===Ze())return void vn();pn(e,this.options,We(i,!1),!1)}}},ge(e,{pluginName:"scroll",initializeByDefault:!0})}),qt.mount(gn,mn);var _n=qt,yn={departureTime:!0,layerDetails:!0,printButton:!1,saveAsButton:!0,saveButton:!0,stops:!0,traveMode:!0};function bn(e){var t;return!(null===(t=e.composedPath)||void 0===t||!t.call(e).find((function(e){var t;return null===(t=e.classList)||void 0===t?void 0:t.contains("esri-search__suggestions-list")})))}function wn(e){var t=new Date(e);return new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate())}var Sn="search-term",kn=function(e){(0,d.Z)(p,e);var t=(0,v.Z)(p);function p(e,n){var o;return(0,u.Z)(this,p),(o=t.call(this,e,n))._activeStop=null,o._activeManeuver=null,o._autoStopRemovalDelay=100,o._autoStopRemovalTimeoutId=void 0,o._focusedManeuver=null,o._newPlaceholderStop=null,o._pointerDownUpHandle=null,o._pointerPressedSearchSuggestionStop=null,o._renderSavePopoverFunction=null,o._saveAsButtonNode=null,o._saveLayer=new le,o._sections=null,o._sortable=null,o._stopsToSearches=new Map,o._viewClickHandle=null,o.headingLevel=2,o.messages=null,o.messagesCommon=null,o.messagesUnits=null,o.searchProperties=null,o.viewModel=new ee,o.visibleElements=(0,s.Z)({},yn),o._setUpDragAndDropStops=function(e){o._sortable=_n.create(e,{draggable:".".concat(I.validStopRow),ghostClass:I.stopRowGhost,handle:".".concat(I.stopHandle),onEnd:o._handleStopInputDragEnd})},o._handleDragHandlePointerDown=function(){var e;return null===(e=o.viewModel.layer)||void 0===e?void 0:e.stops.forEach((function(e){return o.acquireSearch(e).activeMenu="none"}))},o._handleStopInputDragEnd=function(e){var t=e.oldIndex,n=e.newIndex,r=e.target;if(t!==n&&null!=n&&null!=t){var i=r.children,a=i[n],l=i[t],s=n-t<0;r.insertBefore(a,s?l.nextElementSibling:l);var u=o.viewModel.layer.stops;u.reorder(u.at(t),n);var c,d=(0,h.Z)(u);try{for(d.s();!(c=d.n()).done;){c.value.sequence=null}}catch(v){d.e(v)}finally{d.f()}o._solveRoute()}},o}return(0,c.Z)(p,[{key:"initialize",value:function(){var e=this;this.addHandles([(0,_.watch)((function(){var t;return null===(t=e.viewModel.layer)||void 0===t?void 0:t.routeInfo}),(function(){e._activeManeuver=null,e._focusedManeuver=null,e._sections=e._getSections(),e.scheduleRender()}),_.initial),(0,_.when)((function(){var t;return[e.view,null===(t=e.view)||void 0===t?void 0:t.surface]}),(function(t,n){var o=(0,l.Z)(t,2),r=o[0],i=o[1],a=null===n||void 0===n?void 0:n[0];if(a&&(e._viewClickHandle=null,a&&e.removeHandles(a)),r&&i){var s=e._prepPointerDownUpClick(),u=e._prepViewClick();s.pause(),u.pause(),e.addHandles([(0,f.on)(i,"mousedown",(function(){return e._autoStopRemovalDelay=500})),(0,f.on)(i,"mouseup",(function(){return e._autoStopRemovalDelay=100})),s,u],r),e._pointerDownUpHandle=s,e._viewClickHandle=u}}),_.initial),(0,_.when)((function(){return null==e.viewModel.serviceDescription}),(function(){try{e.viewModel.load()}catch(t){}}),_.initial),(0,_.watch)((function(){return e._saveLayer.state}),(function(){e.scheduleRender()}))]),this.when((function(){e.destroyed||e.visibleElements.saveAsButton&&(e._renderSavePopoverFunction=e._renderSavePopover.bind(e),e._projector.append(document.body,e._renderSavePopoverFunction))}))}},{key:"loadDependencies",value:function(){return(0,ne.h)({button:function(){return Promise.all([n.e(92358),n.e(46895),n.e(54438),n.e(14105),n.e(32275)]).then(n.bind(n,32275))},icon:function(){return Promise.all([n.e(92358),n.e(87474)]).then(n.bind(n,87474))},"input-date-picker":function(){return Promise.all([n.e(92358),n.e(46895),n.e(54438),n.e(89219),n.e(63839),n.e(96506),n.e(11216)]).then(n.bind(n,11216))},"input-time-picker":function(){return Promise.all([n.e(92358),n.e(46895),n.e(54438),n.e(89219),n.e(63839),n.e(65138),n.e(2654),n.e(96506),n.e(39094)]).then(n.bind(n,39094))},link:function(){return Promise.all([n.e(92358),n.e(22184)]).then(n.bind(n,22184))},popover:function(){return Promise.all([n.e(92358),n.e(46895),n.e(89219),n.e(63839),n.e(65138),n.e(2654),n.e(447)]).then(n.bind(n,61580))}})}},{key:"destroy",value:function(){var e,t,n=(0,h.Z)(this._stopsToSearches.values());try{for(n.s();!(t=n.n()).done;){t.value.destroy()}}catch(o){n.e(o)}finally{n.f()}null!==(e=this._sortable)&&void 0!==e&&e.destroy(),null!=this._renderSavePopoverFunction&&this._projector.detach(this._renderSavePopoverFunction)}},{key:"apiKey",get:function(){return this.viewModel.apiKey},set:function(e){this.viewModel.apiKey=e}},{key:"goToOverride",get:function(){return this.viewModel.goToOverride},set:function(e){this.viewModel.goToOverride=e}},{key:"icon",get:function(){return"right"},set:function(e){this._overrideIfSome("icon",e)}},{key:"label",get:function(){var e,t;return null!==(e=null===(t=this.messages)||void 0===t?void 0:t.widgetLabel)&&void 0!==e?e:""},set:function(e){this._overrideIfSome("label",e)}},{key:"lastRoute",get:function(){return this.viewModel.lastRoute}},{key:"layer",get:function(){return this.viewModel.layer},set:function(e){this.viewModel.layer=e}},{key:"maxStops",get:function(){return this.viewModel.maxStops},set:function(e){this.viewModel.maxStops=e}},{key:"unit",get:function(){return this.defaultUnit},set:function(e){this._overrideIfSome("unit",e)}},{key:"view",get:function(){return this.viewModel.view},set:function(e){this.viewModel.view=e}},{key:"castVisibleElements",value:function(e){return(0,s.Z)((0,s.Z)({},yn),e)}},{key:"acquireSearch",value:function(e){var t=this,n=this.viewModel.view;if(this._stopsToSearches.has(e)){var o=this._stopsToSearches.get(e);return o.view=n,this._overrideDefaultSources(o),o}var r=new D.default((0,s.Z)({view:n,resultGraphicEnabled:!1,popupEnabled:!1},this.searchProperties));return this._normalizeSearchSources(r),this.addHandles([(0,_.on)((function(){return r.allSources}),"change",(function(){return t._normalizeSearchSources(r)})),r.on("select-result",(function(){var n,o;e.geometry=null===(n=r.selectedResult)||void 0===n?void 0:n.feature.geometry,e.name=null===(o=r.selectedResult)||void 0===o?void 0:o.name,t._solveRoute()})),r.on("search-focus",(function(){return t._handleStopInputFocus(r,e)})),r.on("search-blur",(function(){return t._handleStopInputBlur(r,e)})),r.on("search-clear",(function(){var n;e.geometry=null,e.name=null,t._activeStop=e,null===(n=t.viewModel.layer)||void 0===n||n.removeResult()})),(0,_.watch)((function(){return r.searchTerm}),(function(t){e.name=t}))],r),this._stopsToSearches.set(e,r),r}},{key:"getDirections",value:function(){return this.viewModel.getDirections()}},{key:"render",value:function(){return(0,re.u)("div",{class:this.classes(I.base,ue.z.widget,ue.z.panel,I.scroller)},this._renderPanelContent())}},{key:"save",value:function(){return this.viewModel.save()}},{key:"saveAs",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.viewModel.saveAs(e,t)}},{key:"zoomToRoute",value:function(){return this.viewModel.zoomToRoute()}},{key:"_renderPanelContent",value:function(){var e,t=this.viewModel,n=t.layer,o=t.serviceDescription,r=t.state,i="initializing"===r,l="error"===r&&!o,s="unauthenticated"===r,u=(e={},(0,a.Z)(e,I.panelContentLoading,i),(0,a.Z)(e,I.panelContentError,l||!n),(0,a.Z)(e,I.panelContentSignIn,s),e),c=i?"presentation":"group",d=n?s?this._renderSignIn():l?this._renderMessage(this._getErrorMessage()):i?this._renderLoader():this._renderReadyContent():this._renderMessage(this.messages.missingLayer);return(0,re.u)("div",{class:this.classes(I.panelContent,u),role:c},d)}},{key:"_renderReadyContent",value:function(){return[this._renderStopsContainer(),this._renderTravelModeOptions(),this._renderDepartureTimeControls(),this._renderSaveContainer(),this._renderSectionSplitter(),this._renderDirectionsContainer()]}},{key:"_renderSignIn",value:function(){return(0,re.u)("div",{class:I.signInContent,key:"sign-in"},(0,re.u)(ce.X,{class:I.contentTitle,level:this.headingLevel},this.messages.widgetLabel),this._renderPlaceholder(),(0,re.u)(ce.X,{level:(0,ce.M)(this.headingLevel)},this.messages.signInRequired),(0,re.u)("button",{bind:this,class:this.classes(ue.z.button,ue.z.buttonSecondary,I.signInButton),onclick:this._handleSignInClick,tabIndex:0,type:"button"},this.messagesCommon.auth.signIn))}},{key:"_handleSignInClick",value:function(){this.viewModel.load().catch((function(){}))}},{key:"_renderTravelModeOptions",value:function(){if(!this.visibleElements.traveMode)return null;var e=this.viewModel,t=e.selectedTravelMode,n=e.travelModes;if(0===n.length)return null;var o=null!=t?t.name:this.messages.travelMode;return(0,re.u)("div",{"aria-disabled":this._saveLayer.opened.toString(),class:this.classes(I.travelMode,this._saveLayer.opened&&ue.z.buttonDisabled),key:"esri-directions__travel-mode-controls",role:"group"},(0,re.u)("select",{"aria-label":o,bind:this,class:this.classes(I.travelModeSelect,ue.z.select),key:"esri-directions__travel-mode-options",onchange:this._handleTravelModeChange,title:o},n.map((function(e,n){return(0,re.u)("option",{"data-mode":e,key:"esri-directions__travel-mode-".concat(n),selected:t===e,value:"".concat(n)},e.name)}))))}},{key:"_handleTravelModeChange",value:function(e){var t=e.currentTarget;this.viewModel.selectedTravelMode=function(e){return null===e||void 0===e?void 0:e["data-mode"]}(t.item(t.selectedIndex)),this._solveRoute()}},{key:"_renderStopsContainer",value:function(){return this.visibleElements.stops?(0,re.u)("div",{"aria-disabled":this._saveLayer.opened.toString(),class:this.classes(I.section,this._saveLayer.opened&&ue.z.buttonDisabled),key:"esri-directions__stops-container",role:"group"},this._renderStops()):null}},{key:"_renderDepartureTimeControls",value:function(){if(!this.visibleElements.departureTime)return null;var e=this.messages,t=e.departAt,n=e.departureTime,r=e.leaveNow,i=e.timeUnspecified,a=this.viewModel.departureOption;return(0,re.u)("div",{"aria-disabled":this._saveLayer.opened.toString(),class:this.classes(I.departureTime,this._saveLayer.opened&&ue.z.buttonDisabled),key:"esri-directions__departure-time-controls",role:"group"},(0,re.u)("select",{"aria-label":n,bind:this,class:this.classes(I.departureTimeSelect,ue.z.select),onchange:this._handleDepartureOptionChange,title:n},(0,re.u)("option",{selected:a===o.NOW,value:o.NOW},r),(0,re.u)("option",{selected:a===o.DEPART_AT,value:o.DEPART_AT},t),(0,re.u)("option",{selected:a===o.UNSPECIFIED,value:o.UNSPECIFIED},i)),a===o.DEPART_AT?this._renderTimeControls():null)}},{key:"_renderStops",value:function(){var e,t=this,n=this.viewModel.layer.stops,o=0,r=(0,h.Z)(this._stopsToSearches.keys());try{for(r.s();!(e=r.n()).done;){var i=e.value;n.includes(i)||this._disposeSearch(i)}}catch(p){r.e(p)}finally{r.f()}var l,s=(0,h.Z)(n);try{for(s.s();!(l=s.n()).done;){var u=l.value,c=this.acquireSearch(u);"none"!==c.activeMenu&&(o+=1),null!=u.name&&(c.searchTerm=u.name)}}catch(p){s.e(p)}finally{s.f()}var d=n.toArray().map((function(e,r){var i,l=n.length,s=r>1&&null==e.geometry,u=(i={},(0,a.Z)(i,de.W.radioUnchecked,r>=0&&r<l-1),(0,a.Z)(i,de.W.radioChecked,r===l-1),i),c=(0,a.Z)({},I.lastStopIconContainer,r===l-1),d=(0,a.Z)({},I.validStopRow,!s),v=n.at(r+1),h=r===l-1,p=r===l-2,f=2===l&&0===r||l>2&&!h&&!p||l>2&&p&&null!=(null===v||void 0===v?void 0:v.geometry)||l>2&&h&&null==e.geometry,m=l<3,g=t.acquireSearch(e),_=t.messages,y=_.removeStop,b=_.reverseStops,w=_.unlocated,S=null!=e.geometry&&null!=e.name?e.name:w,k=(0,U.uf)(r+1),C="".concat(_.stopLabel," ").concat(k," (").concat(S,")"),T="".concat(t.id,"__stop--").concat(r),D=!!g.searchTerm&&!!g.selectedResult&&null!=e.geometry&&g.selectedResult.name===e.name,M={zIndex:"none"!==g.activeMenu?""+o--:""};return(0,re.u)("li",{afterCreate:t._handleStopFieldCreation,"aria-label":C,bind:t,class:t.classes(I.stopRow,d),"data-stop-index":r,id:T,key:r,styles:M},(0,re.u)("div",{class:I.stopHandle},(0,re.u)("span",{"aria-hidden":"true",class:t.classes(I.stopIcon,de.W.handleVertical,I.stopHandleIcon,I.interactiveStopIcon),onpointerdown:t._handleDragHandlePointerDown}),(0,re.u)("div",{"aria-labelledby":T,bind:t,class:t.classes(I.stopIconContainer,c),"data-stop-index":r,onclick:t._handleStopIconClick,onkeydown:t._handleStopIconClick,role:"button"},(0,re.u)("span",{class:t.classes(I.stopIcon,u),tabIndex:D?0:void 0}))),(0,re.u)("div",{class:I.stopInput},g.render()),(0,re.u)("div",{class:I.stopOptions,role:"group"},(0,re.u)("div",{"aria-label":y,bind:t,class:I.removeStopButton,"data-stop-index":r,hidden:m,onclick:t._handleRemoveStop,onkeydown:t._handleRemoveStop,role:"button",tabIndex:0,title:y},(0,re.u)("span",{"aria-hidden":"true",class:t.classes(I.stopIcon,I.removeStop,de.W.trash,I.interactiveStopIcon)}),(0,re.u)("span",{class:de.W.fontFallbackText},"removeStopTitle")),(0,re.u)("div",{"aria-label":b,bind:t,class:I.reverseStops,hidden:f,onclick:t._handleReverseStops,onkeydown:t._handleReverseStops,role:"button",tabIndex:0,title:b},(0,re.u)("span",{"aria-hidden":"true",class:t.classes(I.stopIcon,de.W.upDownArrows,I.interactiveStopIcon)}),(0,re.u)("span",{class:de.W.fontFallbackText},"removeStopTitle"))))})),v=this._renderAddStop();return(0,re.u)("div",null,(0,re.u)("ol",{afterCreate:this._setUpDragAndDropStops,class:I.stops,role:"group"},d),v)}},{key:"_renderAddStop",value:function(){var e,t=this,n=null===(e=this.viewModel.layer)||void 0===e?void 0:e.stops;if(!n)return null;var o=n.filter((function(e){return null!=e.geometry})),r=n.at(-1);return o.length>1&&o.length<this.maxStops&&null!=(null===r||void 0===r?void 0:r.geometry)?(0,re.u)("div",{class:I.toolbarSection},(0,re.u)("div",{class:I.toolbarButtons},(0,re.u)("calcite-button",{appearance:"outline",class:I.addStopButton,iconStart:"plus",key:I.addStopButton,kind:"neutral",label:this.messages.addStop,onclick:function(){t._addNewPlaceholder()},round:!0,scale:"s",width:"full"},this.messages.addStop))):null}},{key:"_handleStopIconClick",value:function(e){var t,n=Tn(e.currentTarget),o=null!=n?null===(t=this.viewModel.layer)||void 0===t?void 0:t.stops.at(n):void 0;(null===o||void 0===o?void 0:o.geometry)&&this._centerAtStop(o)}},{key:"_handleClearRouteClick",value:function(){this.viewModel.reset()}},{key:"_centerAtStop",value:function(e){this.viewModel.centerAt(e)}},{key:"_handleStopFieldCreation",value:function(e){var t,n=this,o=this._newPlaceholderStop;if(o){var r=Tn(e),i=null!=r?null===(t=this.viewModel.layer)||void 0===t?void 0:t.stops.at(r):void 0;if(o===i){var a=this.acquireSearch(i);a.when((function(){n.renderNow(),a.focus()}))}this._newPlaceholderStop=null}}},{key:"_handleStopInputBlur",value:function(e,t){var n,o,r,i,a,l,s,u,c=this;if(!this._saveLayer.opened)if(this.removeHandles(Sn),e.selectedResult&&null!=t.geometry&&null!=(null===(n=e.selectedResult)||void 0===n?void 0:n.feature.geometry)&&t.geometry===(null===(o=e.selectedResult)||void 0===o?void 0:o.feature.geometry))null===(r=this._pointerDownUpHandle)||void 0===r||r.pause();else{var d=null==t.geometry&&null==(null===(i=e.selectedResult)||void 0===i?void 0:i.feature.geometry),v=null!=t.geometry&&null!=(null===(a=e.selectedResult)||void 0===a?void 0:a.feature.geometry)&&t.geometry!==(null===(l=e.selectedResult)||void 0===l?void 0:l.feature.geometry);if((d||v)&&"none"===e.activeMenu&&e.searchTerm)return e.search(),void(null===(s=this._pointerDownUpHandle)||void 0===s||s.pause());e.searchTerm||(null!==(u=this._viewClickHandle)&&void 0!==u&&u.resume(),clearTimeout(this._autoStopRemovalTimeoutId),this._autoStopRemovalTimeoutId=setTimeout((function(){var n,o;c.destroyed||(null!==(n=c._viewClickHandle)&&void 0!==n&&n.pause(),"searching"!==e.viewModel.state?c._pointerPressedSearchSuggestionStop||(null!=t.geometry&&(t.geometry=null,c._solveRoute()),c.scheduleRender()):null===(o=c._pointerDownUpHandle)||void 0===o||o.pause())}),this._autoStopRemovalDelay))}}},{key:"_handleStopInputFocus",value:function(e,t){var n;null===(n=this._pointerDownUpHandle)||void 0===n||n.resume();var o=this.view;if(!this.hasHandles(Sn)&&o){var r=o.cursor;this.addHandles([(0,m.kB)((function(){o.cursor=r})),(0,_.watch)((function(){return e.searchTerm}),(function(t){e.destroyed||(o.cursor=t.length?r:"copy")}),_.initial)],Sn),this._activeStop=t}}},{key:"_prepViewClick",value:function(){var e=this,t=this.viewModel.view;(0,g.O3)(t),(0,g.O3)(t.surface);var n=(0,f.Wy)(t,"click",this._handleViewClick.bind(this)),o=(0,f.Wy)(t.surface,"click",(function(){clearTimeout(e._autoStopRemovalTimeoutId),o.pause()}));return{remove:function(){o.remove(),n.remove()},pause:function(){o.pause(),n.pause()},resume:function(){o.resume(),n.resume()}}}},{key:"_prepPointerDownUpClick",value:function(){var e=this,t=(0,f.Wy)(document,"pointerdown",(function(t){e._pointerPressedSearchSuggestionStop=bn(t)?e._activeStop:null})),n=(0,f.Wy)(document,"pointerup",(function(t){var n;null===(n=e._pointerDownUpHandle)||void 0===n||n.pause();var o=bn(t),r=e._activeStop;o||r!==e._pointerPressedSearchSuggestionStop||e._removeStop(r),e.scheduleRender(),e._pointerPressedSearchSuggestionStop=o?r:null}));return{remove:function(){n.remove(),t.remove()},pause:function(){n.pause(),t.pause()},resume:function(){t.resume()}}}},{key:"_handleViewClick",value:function(e){var t;e.stopPropagation();var n=this._activeStop,o=n?this._stopsToSearches.get(n):null;n&&o&&!o.searchTerm&&(o.search(e.mapPoint).then((function(e){var t=null===e||void 0===e?void 0:e.results[0].results;if(t){var r=t[0],i=r.feature,a=r.name;n.geometry=i.geometry,n.name=a,o.searchTerm=a}})),this.scheduleRender()),null!==(t=this._viewClickHandle)&&void 0!==t&&t.pause(),clearTimeout(this._autoStopRemovalTimeoutId)}},{key:"_addNewPlaceholder",value:function(){var e,t;if(null!==(e=this._pointerDownUpHandle)&&void 0!==e&&e.pause(),!this._newPlaceholderStop){var n=new C.Z({symbol:new T.default});null!==(t=this.viewModel.layer)&&void 0!==t&&t.stops.add(n),this._newPlaceholderStop=n}}},{key:"_handleReverseStops",value:function(){this._reverseStops()}},{key:"_reverseStops",value:function(){var e,t,n=null!==(e=null===(t=this.viewModel.layer)||void 0===t?void 0:t.stops)&&void 0!==e?e:[];n.reverse();var o,r=(0,h.Z)(n);try{for(r.s();!(o=r.n()).done;){o.value.sequence=null}}catch(i){r.e(i)}finally{r.f()}this._solveRoute()}},{key:"_handleRemoveStop",value:function(e){var t=this.viewModel.layer;if(t){var n=Tn(e.currentTarget);if(null!=n){var o=t.stops,r=t.routeInfo,i=o.at(n);this._removeStop(i),null==i.geometry&&null!=r||this._solveRoute()}}}},{key:"_removeStop",value:function(e){var t=this.viewModel.layer.stops;!e||t.length<=2||(this._disposeSearch(e),t.remove(e))}},{key:"_handleDepartureOptionChange",value:function(e){var t=e.currentTarget,n=t.item(t.selectedIndex);this.viewModel.departureOption=n.value,this._solveRoute()}},{key:"_renderTimeControls",value:function(){var e=this;return this.viewModel.departureIsoDate&&this.viewModel.departureIsoTime?(0,re.u)("div",{class:I.departureTimeControls,key:I.departureTimeControls,role:"group"},(0,re.u)("div",{class:I.departureDateTimePickers},(0,re.u)("calcite-input-date-picker",{valueAsDate:wn(this.viewModel.departureIsoDate),onCalciteInputDatePickerChange:function(t){var n=t.target;e.viewModel.departureIsoDate=n.value,e._solveRoute()}}),(0,re.u)("calcite-input-time-picker",{value:this.viewModel.departureIsoTime,onCalciteInputTimePickerChange:function(t){var n=t.target;e.viewModel.departureIsoTime=n.value,e._solveRoute()}}))):null}},{key:"_renderSectionSplitter",value:function(){return(0,re.u)("div",{class:I.sectionSplitter})}},{key:"_renderSaveContainer",value:function(){var e=this.visibleElements,t=e.saveButton,n=e.saveAsButton,o=e.printButton,r=e.layerDetails;return t||n||o||r?(0,re.u)("div",{class:I.saveSection,key:I.saveSection},this._renderSaveButtons(),this._renderRouteLayerDetailsLink()):null}},{key:"_renderSaveButtons",value:function(){var e=this.visibleElements,t=e.saveButton,n=e.saveAsButton,o=e.printButton;return t||n||o?(0,re.u)("div",{class:I.saveButtons,key:I.saveButtons},this._renderSaveButton(),this._renderSaveAsButton(),this._renderPrintButton()):null}},{key:"_renderSaveButton",value:function(){var e=this;if(!this.visibleElements.saveButton)return null;var t=this.viewModel.layer,n=t.portalItem,o=t.routeInfo,r=null===n||void 0===n?void 0:n.itemControl,i=null!=o&&("admin"===r||"update"===r);return(0,re.u)("calcite-button",{appearance:"outline",class:I.saveButton,disabled:!i,iconStart:"save",key:I.saveButton,label:this.messagesCommon.save,onclick:function(){e._handleSaveButtonClick()},width:"full"},this.messagesCommon.save)}},{key:"_renderSaveAsButton",value:function(){var e=this;if(!this.visibleElements.saveAsButton)return null;var t=null==this.viewModel.layer.routeInfo;return(0,re.u)("div",{class:I.saveAsButtonPopover,key:I.saveAsButtonPopover},(0,re.u)("calcite-button",{afterCreate:function(t){e._saveAsButtonNode=t},appearance:"outline",class:I.saveAsButton,disabled:t,iconStart:"duplicate",key:I.saveAsButton,label:this.messagesCommon.saveAs,onclick:function(){return e._handleSaveAsButtonClick()},width:"full"},this.messagesCommon.saveAs))}},{key:"_renderSavePopover",value:function(){return(0,re.u)("calcite-popover",{class:I.savePopover,label:this._saveLayer.label,open:this._saveLayer.opened,overlayPositioning:"fixed",referenceElement:this._saveAsButtonNode,triggerDisabled:!0},this._saveLayer.render())}},{key:"_handleSaveAsButtonClick",value:function(){this._saveLayer.opened?this._saveLayer.close():this._saveLayer.open(this.viewModel.layer)}},{key:"_renderPrintButton",value:function(){return this.visibleElements.printButton?(0,re.u)("calcite-button",{appearance:"outline",class:I.printButton,iconStart:"print",key:I.printButton,label:this.messagesCommon.print}):null}},{key:"_renderRouteLayerDetailsLink",value:function(){if(!this.visibleElements.layerDetails)return null;var e=this.viewModel.layer.portalItem;if(!e)return null;var t=e.id,n=e.portal.url,o="".concat(n,"/home/item.html?id=").concat(t);return(0,re.u)("calcite-link",{class:I.layerDetailsLink,href:o,key:I.layerDetailsLink,target:"_blank"},this.messages.viewLayerDetails)}},{key:"_handleSaveButtonClick",value:function(){this.viewModel.layer.save()}},{key:"_renderDirectionsContainer",value:function(){return(0,re.u)("div",{class:this.classes(I.directionsSection,I.section),key:"esri-directions__container"},this._renderDirectionsContainerContent())}},{key:"_renderLoader",value:function(){return(0,re.u)("div",{class:I.loader,key:"loader"})}},{key:"_renderWarningCard",value:function(){return(0,re.u)("div",{class:I.warningCard,role:"alert"},(0,re.u)("div",{class:I.warningHeader},(0,re.u)("span",{"aria-hidden":"true",class:de.W.noticeTriangle}),(0,re.u)(ce.X,{class:I.warningHeading,level:this.headingLevel},this.messagesCommon.warning)),(0,re.u)("div",{class:I.warningMessage},this._getErrorMessage()))}},{key:"_renderDirectionsContainerContent",value:function(){var e=this.viewModel,t=e.layer,n=e.state,o="routing"===n;return"error"===n?this._renderWarningCard():o?this._renderLoader():null!=t.directionLines?(0,re.u)("div",{"aria-disabled":this._saveLayer.opened.toString(),class:this.classes(I.summary,this._saveLayer.opened&&ue.z.buttonDisabled),key:I.summary,role:"group"},this._renderCosts(),this._renderRouteActions(),this._renderManeuverSections()):(0,re.u)("div",{class:ue.z.empty,key:"esri-directions__placeholder"},this._renderPlaceholder(),(0,re.u)(ce.X,{class:I.message,level:this.headingLevel},this.messages.directionsPlaceholder))}},{key:"_renderPlaceholder",value:function(){return(0,re.u)("svg",{class:ue.z.emptyIllustration,viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},(0,re.u)("path",{d:"M192 36c-15.477 0-24 6.034-24 16.99v45.822l24 24 24-24v-45.82C216 42.033 207.477 36 192 36zm20 61.155l-20 20-20-20V52.99c0-8.62 6.73-12.99 20-12.99s20 4.37 20 12.99zM192 52a12 12 0 1 0 12 12 12.013 12.013 0 0 0-12-12zm0 20a8 8 0 1 1 8-8 8.008 8.008 0 0 1-8 8zM92 140.99C92 130.035 83.477 124 68 124s-24 6.034-24 16.99v45.822l24 24 24-24zm-4 44.165l-20 20-20-20V140.99c0-8.62 6.73-12.99 20-12.99s20 4.37 20 12.99zM68 140a12 12 0 1 0 12 12 12.013 12.013 0 0 0-12-12zm0 20a8 8 0 1 1 8-8 8.008 8.008 0 0 1-8 8zm84-44h16v4h-16zm-24 80h4v12h-12v-4h8zm0-28h4v16h-4zm0-52h12v4h-8v8h-4zm0 24h4v16h-4zm-36 64h16v4H92z",fill:"currentcolor"}))}},{key:"_renderMessage",value:function(e){return(0,re.u)(ce.X,{class:I.messageHeading,level:this.headingLevel},e)}},{key:"_renderRouteActions",value:function(){return(0,re.u)("div",{class:I.routeActions},(0,re.u)("button",{"aria-label":this.messages.clearRoute,bind:this,class:this.classes(I.clearRouteButton,ue.z.button,ue.z.buttonTertiary),onclick:this._handleClearRouteClick,tabIndex:0,type:"button"},this.messages.clearRoute))}},{key:"_getSections",value:function(){var e=this.viewModel.layer;if(!e)return null;var t=e.directionPoints,n=e.directionLines,o=e.stops;if(null==t||null==n)return null;var r,i=[],a=null,l=(0,h.Z)(t);try{var s=function(){var e=r.value,t=e.objectId,l=e.stopId;if(null!=l){var s=o.find((function(e){return e.objectId===l})),u=0===i.length;return null!=a&&a.stop===s||(a={stop:s,directions:[],open:u},i.push(a)),"continue"}if(null==a)return"continue";var c=n.find((function(e){return e.directionPointId===t}));null!=c&&a.directions.push({directionPoint:e,directionLine:c})};for(l.s();!(r=l.n()).done;)s()}catch(u){l.e(u)}finally{l.f()}return i}},{key:"_renderManeuverSections",value:function(){var e=this;return null==this._sections?null:(0,re.u)("div",{class:I.maneuvers,role:"group"},this._sections.map((function(t,n){var o,r,i=t.open;t.directions.length>0&&i&&(r=(0,re.u)("ol",{class:I.maneuverList},t.directions.map((function(t){return e._renderManeuver(t)}))));var l,s=e._sections.length>2,u=n===e._sections.length-1,c=(0,a.Z)({},I.collapsibleSection,s),d=(o={},(0,a.Z)(o,de.W.down,!i),(0,a.Z)(o,de.W.up,i),o);if(s&&!u){var v=i?e.messagesCommon.close:e.messagesCommon.open;l=(0,re.u)("header",{class:e.classes(I.maneuverSectionHeader,I.maneuverSectionToggle),key:I.maneuverSectionHeader},(0,re.u)("div",{"aria-expanded":i.toString(),"aria-label":v,bind:e,class:I.maneuverSectionHeaderButton,"data-maneuver-section":t,onclick:e._handleSectionToggle,onkeydown:e._handleSectionToggle,role:"button",tabIndex:0,title:v},(0,re.u)(ce.X,{class:I.maneuverSectionTitle,level:e.headingLevel},t.stop.name),(0,re.u)("span",{"aria-hidden":"true",class:e.classes(d)})))}else l=(0,re.u)("header",{class:I.maneuverSectionHeader,key:I.maneuverSectionHeader},(0,re.u)(ce.X,{class:I.maneuverSectionTitle,level:e.headingLevel},t.stop.name));return(0,re.u)("section",{class:e.classes(I.maneuverSection,c),key:n},l,r)})))}},{key:"_handleSectionToggle",value:function(e){var t=function(e){return null===e||void 0===e?void 0:e["data-maneuver-section"]}(e.currentTarget);t&&(t.open=!t.open)}},{key:"_renderCosts",value:function(){var e=this._getCostSummary();if(null==this.viewModel.layer.directionPoints||null==e)return null;var t=e.distance,n=e.duration,o=this.messages,r=o.primaryCosts,i=o.secondaryCosts,a=o.zoomToRoute,l=this._renderEta();return(0,re.u)("div",{"aria-label":a,bind:this,class:I.directionCosts,onclick:this._handleSummaryInteraction,onkeydown:this._handleSummaryInteraction,role:"button",tabIndex:0,title:a},(0,re.u)("div",{class:I.costsDetails,role:"group"},(0,re.u)("div",{class:I.primaryCosts,title:r},n),(0,re.u)("div",{class:I.verticalSplitter}),(0,re.u)("div",{class:I.secondaryCosts,title:i},t)),l)}},{key:"_renderEta",value:function(){return this.viewModel.departureOption===o.UNSPECIFIED?null:(0,re.u)("div",{class:I.arrivalTimeContainer,title:this.messages.eta},(0,re.u)("span",{class:I.arrivalTime},this.viewModel.formattedEta))}},{key:"_handleSummaryInteraction",value:function(){this._activeManeuver=null,this._focusedManeuver=null,this.viewModel.clearHighlights(),this.zoomToRoute()}},{key:"_getErrorMessage",value:function(){var e;switch(null===(e=this.viewModel.lastError)||void 0===e?void 0:e.name){case"directions-view-model:unable-to-route":return this.messages.errors.unableToRoute;case"directions-view-model:service-metadata-unavailable":return this.messages.errors.unableToLoadServiceMetadata;default:return this.messages.errors.unknownError}}},{key:"_normalizeSearchSources",value:function(e){this._overrideDefaultSources(e),this._applyLocatorSourceOverrides(e)}},{key:"_overrideDefaultSources",value:function(e){e.viewModel.defaultSources.forEach((function(e){e.autoNavigate=!1}))}},{key:"_applyLocatorSourceOverrides",value:function(e){var t,n=e.allSources,o=(0,h.Z)(n);try{for(o.s();!(t=o.n()).done;){var r,i=t.value;"url"in i&&i.url&&(null!==(r=i.locationType)&&void 0!==r||(i.locationType="street"),(0,se.j9)(i.url)&&this.apiKey&&null==i.apiKey&&(i.apiKey=this.apiKey,i.url=se.uE))}}catch(a){o.e(a)}finally{o.f()}}},{key:"_disposeSearch",value:function(e){if(e&&this._stopsToSearches.has(e)){var t=this._stopsToSearches.get(e);this.removeHandles(t),t.destroy(),this._stopsToSearches.delete(e)}}},{key:"_renderManeuver",value:function(e){var t=e.directionPoint,n=e.directionLine,o=n.distance,r=n.duration,i=this.messages,l=j(this.messagesUnits,null!==o&&void 0!==o?o:0,this.unit),s=G(null!==r&&void 0!==r?r:0),u=l&&s?"".concat(l,"&nbsp;&middot;&nbsp;").concat(s):"".concat(l).concat(s),c=function(e){var t=e.branchName,n=e.displayText,o=e.exitName,r=e.intersectingName,i=e.name,a=e.objectId,l=e.towardName;if(null==n)return null;var s=[t,o,r,i,l].filter(Boolean).sort((function(e,t){return t.length-e.length})).map((function(e){return(0,y.Qs)(e)}));if(!s.length)return n;var u,c=new RegExp(s.join("|"),"g"),d=n.matchAll(c),v=0,p=[],f=(0,h.Z)(d);try{for(f.s();!(u=f.n()).done;){var m=u.value,g=m[0],_=m.index;p.push(n.slice(v,_),(0,re.u)("span",{class:I.maneuverPlaceName},g)),v=_+g.length}}catch(b){f.e(b)}finally{f.f()}return p.push(n.slice(v)),(0,re.u)("span",{id:"".concat(I.maneuver,"-").concat(a)},p)}(t),d=t.objectId,v=V(t.directionPointType),p="".concat(I.maneuver,"-").concat(d),f="".concat(I.intermediateCost,"-").concat(d),m=(0,a.Z)({},I.maneuverActive,this._activeManeuver===n);return(0,re.u)("li",{"aria-labelledby":"".concat(p," ").concat(f),bind:this,class:this.classes(I.maneuver,m),"data-maneuver":n,key:n,onblur:this._handleManeuverBlur,onclick:this._handleManeuverClick,onfocus:this._handleManeuverFocus,onkeydown:this._handleManeuverClick,onmouseout:this._handleManeuverMouseOut,onmouseover:this._handleManeuverMouseOver,tabIndex:0},(0,re.u)("calcite-icon",{alt:"",class:I.maneuverIcon,icon:v}),(0,re.u)("div",{class:I.maneuverCostsContainer},c,(0,re.u)("div",{class:I.maneuverCosts},(0,re.u)("div",{class:I.horizontalSplitter}),(0,re.u)("div",{"aria-hidden":"true",class:I.intermediateCost,id:f,innerHTML:u,title:i.intermediateCosts}))))}},{key:"_handleManeuverClick",value:function(e){var t=Dn(e.currentTarget);if(t){if(this._activeManeuver===t)return this._activeManeuver=null,void this.zoomToRoute();this._activeManeuver=t;var n=t.geometry;this.viewModel.centerAt(n),this.viewModel.highlight(t)}}},{key:"_handleManeuverMouseOver",value:function(e){if(!this._activeManeuver&&!this._focusedManeuver){var t=Dn(e.currentTarget);t&&this.viewModel.highlight(t)}}},{key:"_handleManeuverMouseOut",value:function(){this._activeManeuver||this._focusedManeuver||this.viewModel.clearHighlights()}},{key:"_handleManeuverBlur",value:function(){this._activeManeuver||(this._focusedManeuver=null,this.viewModel.clearHighlights())}},{key:"_handleManeuverFocus",value:function(e){if(!this._activeManeuver){var t=Dn(e.currentTarget);t&&(this._focusedManeuver=t,this.viewModel.highlight(t))}}},{key:"_getCostSummary",value:function(){var e,t,n=this.messagesUnits,o=this.unit,r=this.viewModel.layer.routeInfo;if(null==r)return null;var i=null!==(e=r.totalDistance)&&void 0!==e?e:0,a=null!==(t=r.totalDuration)&&void 0!==t?t:0;return{distance:j(n,i,o),duration:G(a)}}},{key:"_solveRoute",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var t,n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.viewModel.updateDepartureTime(),!(n=null===(t=this.viewModel.layer)||void 0===t?void 0:t.stops.filter((function(e){return null!=e.geometry})))||n.length<2){e.next=10;break}return e.prev=3,e.next=6,this.viewModel.getDirections();case 6:e.next=10;break;case 8:e.prev=8,e.t0=e.catch(3);case 10:case"end":return e.stop()}}),e,this,[[3,8]])})));return function(){return e.apply(this,arguments)}}()}]),p}(M.Z);(0,p._)([(0,b.Cb)()],kn.prototype,"apiKey",null),(0,p._)([(0,b.Cb)(k.Y)],kn.prototype,"defaultUnit",void 0),(0,p._)([(0,b.Cb)()],kn.prototype,"goToOverride",null),(0,p._)([(0,b.Cb)()],kn.prototype,"headingLevel",void 0),(0,p._)([(0,b.Cb)()],kn.prototype,"icon",null),(0,p._)([(0,b.Cb)()],kn.prototype,"label",null),(0,p._)([(0,b.Cb)({readOnly:!0})],kn.prototype,"lastRoute",null),(0,p._)([(0,b.Cb)()],kn.prototype,"layer",null),(0,p._)([(0,b.Cb)()],kn.prototype,"maxStops",null),(0,p._)([(0,b.Cb)(),(0,oe.H)("esri/widgets/Directions/t9n/Directions")],kn.prototype,"messages",void 0),(0,p._)([(0,b.Cb)(),(0,oe.H)("esri/t9n/common")],kn.prototype,"messagesCommon",void 0),(0,p._)([(0,b.Cb)(),(0,oe.H)("esri/core/t9n/Units")],kn.prototype,"messagesUnits",void 0),(0,p._)([(0,b.Cb)()],kn.prototype,"searchProperties",void 0),(0,p._)([(0,b.Cb)()],kn.prototype,"unit",null),(0,p._)([(0,b.Cb)()],kn.prototype,"view",null),(0,p._)([(0,b.Cb)({type:ee})],kn.prototype,"viewModel",void 0),(0,p._)([(0,b.Cb)()],kn.prototype,"visibleElements",void 0),(0,p._)([(0,w.p)("visibleElements")],kn.prototype,"castVisibleElements",null),(0,p._)([(0,ve.h)()],kn.prototype,"_handleStopIconClick",null),(0,p._)([(0,ve.h)()],kn.prototype,"_handleClearRouteClick",null),(0,p._)([(0,ve.h)()],kn.prototype,"_handleReverseStops",null),(0,p._)([(0,ve.h)()],kn.prototype,"_handleRemoveStop",null),(0,p._)([(0,ve.h)()],kn.prototype,"_handleSectionToggle",null),(0,p._)([(0,ve.h)()],kn.prototype,"_handleSummaryInteraction",null),(0,p._)([(0,ve.h)()],kn.prototype,"_handleManeuverClick",null);var Cn=kn=(0,p._)([(0,S.j)("esri.widgets.Directions")],kn);function Tn(e){return null===e||void 0===e?void 0:e["data-stop-index"]}function Dn(e){return null===e||void 0===e?void 0:e["data-maneuver"]}},96919:function(e,t,n){n.d(t,{M:function(){return v},X:function(){return c}});var o=n(1413),r=n(44925),i=n(16889),a=n(7021),l=n(80975),s=n(67005),u=["level","class"];function c(e,t){var n=e.level,i=e.class,c=(0,r.Z)(e,u),v=d(n);return(0,s.u)("h".concat(v),(0,o.Z)((0,o.Z)({},c),{},{"aria-level":String(v),class:(0,l.Sh)(a.z.heading,i),role:"heading"}),t)}function d(e){return(0,i.uZ)(Math.ceil(e),1,6)}function v(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return d(e+t)}}}]);
//# sourceMappingURL=47196.7673de93.chunk.js.map