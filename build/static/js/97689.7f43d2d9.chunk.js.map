{"version":3,"file":"static/js/97689.7f43d2d9.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/views/3d/layers/support/edgeUtils.js","../node_modules/@arcgis/core/views/3d/layers/support/layerUtils.js","../node_modules/@arcgis/core/views/3d/layers/support/symbolColorUtils.js","../node_modules/@arcgis/core/views/3d/webgl-engine/collections/Component/Material/shader/ComponentData.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/IntegerDrawUniform.js","../node_modules/@arcgis/core/views/3d/webgl-engine/collections/Component/Material/shader/DecodeSymbolColor.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/lib/edgeRendering/interfaces.js","../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/sources/edgeRenderer/EdgeUtil.glsl.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport e from\"../../../../Color.js\";import\"../../../../core/has.js\";import{pt2px as n}from\"../../../../core/screenUtils.js\";import{fromValues as r,fromArray as t}from\"../../../../core/libs/gl-matrix-2/factories/vec4f64.js\";import{isExtrudeSymbol3DLayer as o,isFillSymbol3DLayer as i}from\"./layerUtils.js\";import{Transparency as s}from\"../../webgl-engine/lib/edgeRendering/interfaces.js\";import{EdgeType as l}from\"../../webgl-engine/shaders/sources/edgeRenderer/EdgeUtil.glsl.js\";function c(e){return e&&e.enabled&&(o(e)||i(e))&&null!=e.edges}function u(e){return e&&e.enabled&&e.edges||null}function a(e,n){return f(u(e),n)}function f(o,i){if(null==o)return null;const s=null!=o.color?t(e.toUnitRGBA(o.color)):r(0,0,0,0),l=n(o.size),c=n(o.extensionLength);switch(o.type){case\"solid\":return g({color:s,size:l,extensionLength:c,...i});case\"sketch\":return p({color:s,size:l,extensionLength:c,...i});default:return}}function g(e){return{...m,...e,type:l.Solid}}function p(e){return{...d,...e,type:l.Sketch}}const m={color:r(0,0,0,.2),size:1,extensionLength:0,opacity:1,objectTransparency:s.OPAQUE,hasSlicePlane:!1},d={color:r(0,0,0,.2),size:1,extensionLength:0,opacity:1,objectTransparency:s.OPAQUE,hasSlicePlane:!1};export{a as createMaterial,f as createMaterialFromEdges,g as createSolidEdgeMaterial,c as hasEdges};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nfunction t(t){return\"fill\"===t.type}function e(t){return\"extrude\"===t.type}export{e as isExtrudeSymbol3DLayer,t as isFillSymbol3DLayer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{clamp as t}from\"../../../../core/mathUtils.js\";var n;function e(t){switch(t){case\"multiply\":default:return n.Multiply;case\"ignore\":return n.Ignore;case\"replace\":return n.Replace;case\"tint\":return n.Tint}}function r(e,r,a){if(null==e||r===n.Ignore)return a[0]=255,a[1]=255,a[2]=255,void(a[3]=255);const c=t(Math.round(e[3]*i),0,i),p=0===c||r===n.Tint?0:r===n.Replace?u:l;a[0]=t(Math.round(e[0]*o),0,o),a[1]=t(Math.round(e[1]*o),0,o),a[2]=t(Math.round(e[2]*o),0,o),a[3]=c+p}!function(t){t[t.Multiply=1]=\"Multiply\",t[t.Ignore=2]=\"Ignore\",t[t.Replace=3]=\"Replace\",t[t.Tint=4]=\"Tint\"}(n||(n={}));const o=255,i=85,u=i,l=2*i;export{n as ColorMixModeEnum,r as encodeSymbolColor,e as parseColorMixMode};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{neverReached as o}from\"../../../../../../../core/compilerUtils.js\";import{packFloatRGBA as e}from\"../../../../../../../core/floatRGBA.js\";import has from\"../../../../../../../core/has.js\";import{DecodeSymbolColor as r}from\"./DecodeSymbolColor.glsl.js\";import{ShaderOutput as t}from\"../../../../core/shaderLibrary/ShaderOutput.js\";import{RgbaFloatEncoding as n}from\"../../../../core/shaderLibrary/util/RgbaFloatEncoding.glsl.js\";import{Float4DrawUniform as a}from\"../../../../core/shaderModules/Float4DrawUniform.js\";import{IntegerDrawUniform as d}from\"../../../../core/shaderModules/IntegerDrawUniform.js\";import{glsl as l}from\"../../../../core/shaderModules/interfaces.js\";import{Texture2DDrawUniform as c}from\"../../../../core/shaderModules/Texture2DDrawUniform.js\";import{VertexAttribute as i}from\"../../../../lib/VertexAttribute.js\";var s;!function(o){o[o.Uniform=0]=\"Uniform\",o[o.Varying=1]=\"Varying\",o[o.COUNT=2]=\"COUNT\"}(s||(s={}));const x=429496.7296;function C(o,r){e(o/x*.5+.5,r)}function m(e,r){switch(r.componentData){case s.Varying:return f(e,r);case s.Uniform:return u(e,r);case s.COUNT:return;default:o(r.componentData)}}function f(o,e){const{vertex:a,fragment:d}=o;a.include(n),a.uniforms.add(new c(\"componentColorTex\",(o=>o.componentParameters.texture.texture))),o.attributes.add(i.COMPONENTINDEX,\"float\"),o.varyings.add(\"vExternalColorMixMode\",\"mediump float\"),o.varyings.add(\"vExternalColor\",\"vec4\");const s=e.output===t.ObjectAndLayerIdColor;s&&o.varyings.add(\"vObjectAndLayerIdColor\",\"vec4\"),o.include(r),a.constants.add(\"elevationScale\",\"float\",2*x),a.constants.add(\"stride\",\"float\",has(\"enable-feature:objectAndLayerId-rendering\")?3:2),a.code.add(l`vec2 getComponentTextureCoordinates(float componentIndex, float typeOffset) {\nfloat index = componentIndex * stride + typeOffset;\nfloat texSize = float(textureSize(componentColorTex, 0).x);\nfloat coordX = mod(index, texSize);\nfloat coordY = floor(index / texSize);\nreturn vec2(coordX, coordY) + 0.5;\n}`),a.code.add(l`\n  vec4 _readComponentColor() {\n    vec2 textureCoordinates = getComponentTextureCoordinates(componentIndex, 0.0);\n\n    return texelFetch(componentColorTex, ivec2(textureCoordinates), 0);\n   }\n\n   float readElevationOffset() {\n    vec2 textureCoordinates = getComponentTextureCoordinates(componentIndex, 1.0);\n\n    vec4 encodedElevation = texelFetch(componentColorTex, ivec2(textureCoordinates), 0);\n    return (rgba2float(encodedElevation) - 0.5) * elevationScale;\n  }\n\n  ${s?l`\n          void forwardObjectAndLayerIdColor() {\n            vec2 textureCoordinates = getComponentTextureCoordinates(componentIndex, 2.0);\n\n            vObjectAndLayerIdColor = texelFetch(componentColorTex, ivec2(textureCoordinates), 0);\n          }`:l`void forwardObjectAndLayerIdColor() {}`}\n\n  vec4 forwardExternalColor(out bool castShadows) {\n    vec4 componentColor = _readComponentColor() * 255.0;\n\n    float shadowFlag = mod(componentColor.b * 255.0, 2.0);\n    componentColor.b -= shadowFlag;\n    castShadows = shadowFlag >= 1.0;\n\n    int decodedColorMixMode;\n    vExternalColor = decodeSymbolColor(componentColor, decodedColorMixMode) * 0.003921568627451; // = 1/255;\n    vExternalColorMixMode = float(decodedColorMixMode) + 0.5; // add 0.5 to avoid interpolation artifacts\n\n    return vExternalColor;\n  }\n`),d.code.add(l`\n  void readExternalColor(out vec4 externalColor, out int externalColorMixMode) {\n    externalColor = vExternalColor;\n    externalColorMixMode = int(vExternalColorMixMode);\n  }\n\n  void outputObjectAndLayerIdColor() {\n     ${s?l`fragColor = vObjectAndLayerIdColor;`:\"\"}\n  }\n`)}function u(o,e){const{vertex:r,fragment:n}=o;r.uniforms.add(new a(\"externalColor\",(o=>o.componentParameters.externalColor))),n.uniforms.add(new d(\"externalColorMixMode\",(o=>o.componentParameters.externalColorMixMode))),o.varyings.add(\"vExternalColor\",\"vec4\"),r.code.add(l`float readElevationOffset() {\nreturn 0.0;\n}\nvoid forwardObjectAndLayerIdColor() {}\nvec4 forwardExternalColor(out bool castShadows) {\nvExternalColor = externalColor;\ncastShadows = true;\nreturn externalColor;\n}`);const c=e.output===t.ObjectAndLayerIdColor;n.code.add(l`\n  void readExternalColor(out vec4 color, out int colorMixMode) {\n    color = vExternalColor;\n    colorMixMode = externalColorMixMode;\n  }\n\n  void outputObjectAndLayerIdColor() {\n    ${c?l`fragColor = vec4(0,0,0,0);`:\"\"}\n }\n`)}export{m as ComponentData,s as ComponentDataType,C as encodeElevationOffset,x as maxElevationOffset};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{Uniform as r}from\"./Uniform.js\";import{BindType as e}from\"../shaderTechnique/BindType.js\";class o extends r{constructor(r,o){super(r,\"int\",e.Draw,((e,s,i)=>e.setUniform1i(r,o(s,i))))}}export{o as IntegerDrawUniform};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{ColorMixModeEnum as o}from\"../../../../../layers/support/symbolColorUtils.js\";import{glsl as l}from\"../../../../core/shaderModules/interfaces.js\";function e(e){e.vertex.code.add(l`\n    vec4 decodeSymbolColor(vec4 symbolColor, out int colorMixMode) {\n      float symbolAlpha = 0.0;\n\n      const float maxTint = 85.0;\n      const float maxReplace = 170.0;\n      const float scaleAlpha = 3.0;\n\n      if (symbolColor.a > maxReplace) {\n        colorMixMode = ${l.int(o.Multiply)};\n        symbolAlpha = scaleAlpha * (symbolColor.a - maxReplace);\n      } else if (symbolColor.a > maxTint) {\n        colorMixMode = ${l.int(o.Replace)};\n        symbolAlpha = scaleAlpha * (symbolColor.a - maxTint);\n      } else if (symbolColor.a > 0.0) {\n        colorMixMode = ${l.int(o.Tint)};\n        symbolAlpha = scaleAlpha * symbolColor.a;\n      } else {\n        colorMixMode = ${l.int(o.Multiply)};\n        symbolAlpha = 0.0;\n      }\n\n      return vec4(symbolColor.r, symbolColor.g, symbolColor.b, symbolAlpha);\n    }\n  `)}export{e as DecodeSymbolColor};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nvar A;!function(A){A[A.INVISIBLE=0]=\"INVISIBLE\",A[A.TRANSPARENT=1]=\"TRANSPARENT\",A[A.OPAQUE=2]=\"OPAQUE\"}(A||(A={}));export{A as Transparency};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{maxElevationOffset as o}from\"../../../collections/Component/Material/shader/ComponentData.glsl.js\";import{NormalAttribute as e}from\"../../../core/shaderLibrary/attributes/NormalAttribute.glsl.js\";import{DoublePrecision as r}from\"../../../core/shaderLibrary/util/DoublePrecision.glsl.js\";import{RgbaFloatEncoding as t}from\"../../../core/shaderLibrary/util/RgbaFloatEncoding.glsl.js\";import{Float3DrawUniform as a}from\"../../../core/shaderModules/Float3DrawUniform.js\";import{Float3PassUniform as l}from\"../../../core/shaderModules/Float3PassUniform.js\";import{FloatPassUniform as n}from\"../../../core/shaderModules/FloatPassUniform.js\";import{glsl as d}from\"../../../core/shaderModules/interfaces.js\";import{Matrix3DrawUniform as m}from\"../../../core/shaderModules/Matrix3DrawUniform.js\";import{Matrix3PassUniform as s}from\"../../../core/shaderModules/Matrix3PassUniform.js\";import{Matrix4PassUniform as i}from\"../../../core/shaderModules/Matrix4PassUniform.js\";import{Texture2DDrawUniform as c}from\"../../../core/shaderModules/Texture2DDrawUniform.js\";import{VertexAttribute as f}from\"../../../lib/VertexAttribute.js\";function v(v,u){const p=v.vertex;p.include(t),v.include(e,u),p.uniforms.add(new n(\"distanceFalloffFactor\",(o=>o.distanceFalloffFactor))),p.code.add(d`float distanceBasedPerspectiveFactor(float distance) {\nreturn clamp(sqrt(distanceFalloffFactor / distance), 0.0, 1.0);\n}`),p.uniforms.add(new c(\"componentDataTex\",(o=>o.componentDataTexture))),v.attributes.add(f.COMPONENTINDEX,\"float\"),p.constants.add(\"componentColorFieldOffset\",\"float\",0),p.constants.add(\"componentOtherFieldOffset\",\"float\",1),p.constants.add(\"componentVerticalOffsetFieldOffset\",\"float\",2),p.constants.add(\"componentFieldCount\",\"float\",3),p.constants.add(\"lineWidthFractionFactor\",\"float\",8),p.constants.add(\"extensionLengthOffset\",\"float\",128),p.constants.add(\"verticalOffsetScale\",\"float\",2*o),p.code.add(d`\n    vec2 _componentTextureCoords(float componentIndex, float fieldOffset) {\n      float fieldIndex = componentFieldCount * componentIndex + fieldOffset;\n      float texSize = float(textureSize(componentDataTex, 0).x);\n      float colIndex = mod(fieldIndex, texSize);\n      float rowIndex = floor(fieldIndex / texSize);\n\n      return vec2(colIndex, rowIndex) + 0.5;\n    }\n\n    struct ComponentData {\n      vec4 color;\n      vec3 normal;\n      vec3 normal2;\n      float lineWidth;\n      float extensionLength;\n      float type;\n      float verticalOffset;\n    };\n\n    ComponentData readComponentData() {\n      vec2 colorIndex = _componentTextureCoords(componentIndex, componentColorFieldOffset);\n      vec2 otherIndex = _componentTextureCoords(componentIndex, componentOtherFieldOffset);\n      vec2 verticalOffsetIndex = _componentTextureCoords(componentIndex, componentVerticalOffsetFieldOffset);\n      vec3 normal = normalModel();\n      vec3 normal2 = ${u.silhouette?d`decompressNormal(normal2Compressed)`:d`normal`};\n\n      vec4 colorValue = texelFetch(componentDataTex, ivec2(colorIndex), 0);\n      vec4 otherValue = texelFetch(componentDataTex, ivec2(otherIndex), 0);\n      float verticalOffset = (rgba2float(texelFetch(componentDataTex, ivec2(verticalOffsetIndex), 0)) - 0.5) * verticalOffsetScale;\n\n      return ComponentData(\n        vec4(colorValue.rgb, colorValue.a * otherValue.w), // otherValue.w stores separate opacity\n        normal, normal2,\n        otherValue.x * (255.0 / lineWidthFractionFactor),\n        otherValue.y * 255.0 - extensionLengthOffset,\n        -(otherValue.z * 255.0) + 0.5, // SOLID (=0/255) needs to be > 0.0, SKETCHY (=1/255) needs to be <= 0;\n        verticalOffset\n      );\n    }\n  `),u.legacy?p.code.add(d`vec3 _modelToWorldNormal(vec3 normal) {\nreturn (model * vec4(normal, 0.0)).xyz;\n}\nvec3 _modelToViewNormal(vec3 normal) {\nreturn (localView * model * vec4(normal, 0.0)).xyz;\n}`):(p.uniforms.add(new m(\"transformNormalGlobalFromModel\",(o=>o.transformNormalGlobalFromModel))),p.code.add(d`vec3 _modelToWorldNormal(vec3 normal) {\nreturn transformNormalGlobalFromModel * normal;\n}`)),u.silhouette?(v.attributes.add(f.NORMAL2COMPRESSED,\"vec2\"),p.code.add(d`vec3 worldNormal(ComponentData data) {\nreturn _modelToWorldNormal(normalize(data.normal + data.normal2));\n}`)):p.code.add(d`vec3 worldNormal(ComponentData data) {\nreturn _modelToWorldNormal(data.normal);\n}`),u.legacy?p.code.add(d`void worldAndViewFromModelPosition(vec3 modelPos, float verticalOffset, out vec3 worldPos, out vec3 viewPos) {\nworldPos = (model * vec4(modelPos, 1.0)).xyz;\nviewPos = (localView * vec4(worldPos, 1.0)).xyz;\n}`):(p.include(r,u),p.uniforms.add(new s(\"transformViewFromCameraRelativeRS\",(o=>o.transformViewFromCameraRelativeRS)),new m(\"transformWorldFromModelRS\",(o=>o.transformWorldFromModelRS)),new a(\"transformWorldFromModelTL\",(o=>o.transformWorldFromModelTL)),new a(\"transformWorldFromModelTH\",(o=>o.transformWorldFromModelTH)),new l(\"transformWorldFromViewTL\",(o=>o.transformWorldFromViewTL)),new l(\"transformWorldFromViewTH\",(o=>o.transformWorldFromViewTH))),p.code.add(d`\n      void worldAndViewFromModelPosition(vec3 modelPos, float verticalOffset, out vec3 worldPos, out vec3 viewPos) {\n        vec3 rotatedModelPosition = transformWorldFromModelRS * modelPos;\n\n        vec3 transformCameraRelativeFromModel = dpAdd(\n          transformWorldFromModelTL,\n          transformWorldFromModelTH,\n          -transformWorldFromViewTL,\n          -transformWorldFromViewTH\n        );\n\n        worldPos = transformCameraRelativeFromModel + rotatedModelPosition;\n\n        if (verticalOffset != 0.0) {\n          vec3 vUp = ${u.spherical?d`normalize(transformWorldFromModelTL + rotatedModelPosition);`:d`vec3(0.0, 0.0, 1.0);`}\n          worldPos += verticalOffset * vUp;\n        }\n\n        viewPos = transformViewFromCameraRelativeRS * worldPos;\n      }\n    `)),p.uniforms.add(new i(\"transformProjFromView\",((o,e)=>e.camera.projectionMatrix))),p.code.add(d`vec4 projFromViewPosition(vec3 position) {\nreturn transformProjFromView * vec4(position, 1.0);\n}`),p.code.add(d`float calculateExtensionLength(float extensionLength, float lineLength) {\nreturn extensionLength / (log2(max(1.0, 256.0 / lineLength)) * 0.2 + 1.0);\n}`)}function u(o){return o===p.Sketch||o===p.Mixed}var p,x;!function(o){o[o.Solid=0]=\"Solid\",o[o.Sketch=1]=\"Sketch\",o[o.Mixed=2]=\"Mixed\",o[o.COUNT=3]=\"COUNT\"}(p||(p={})),function(o){o[o.REGULAR=0]=\"REGULAR\",o[o.SILHOUETTE=1]=\"SILHOUETTE\"}(x||(x={}));export{x as EdgeSilhouette,p as EdgeType,v as EdgeUtil,u as usesSketchLogic};\n"],"names":["c","e","enabled","t","type","o","i","edges","a","n","f","u","s","color","r","l","size","extensionLength","g","_objectSpread","d","m","opacity","objectTransparency","hasSlicePlane","Multiply","Ignore","Replace","Tint","Math","round","p","_r","_inherits","_super","_createSuper","_classCallCheck","call","setUniform1i","_createClass","Uniform","Varying","COUNT","x","C","componentData","vertex","fragment","include","uniforms","add","componentParameters","texture","attributes","varyings","output","constants","has","code","_templateObject","_taggedTemplateLiteral","_templateObject2","_templateObject3","_templateObject4","_templateObject5","_templateObject6","externalColor","externalColorMixMode","_templateObject7","_templateObject8","_templateObject9","A","INVISIBLE","TRANSPARENT","OPAQUE","v","distanceFalloffFactor","componentDataTexture","silhouette","legacy","transformNormalGlobalFromModel","transformViewFromCameraRelativeRS","transformWorldFromModelRS","transformWorldFromModelTL","transformWorldFromModelTH","transformWorldFromViewTL","transformWorldFromViewTH","_templateObject10","spherical","_templateObject11","_templateObject12","camera","projectionMatrix","_templateObject13","_templateObject14","Sketch","Mixed","Solid","REGULAR","SILHOUETTE"],"sourceRoot":""}