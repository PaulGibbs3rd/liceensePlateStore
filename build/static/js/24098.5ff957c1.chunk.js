"use strict";(self.webpackChunkreact_training=self.webpackChunkreact_training||[]).push([[24098],{72291:function(e,t,r){r.d(t,{i:function(){return C},K:function(){return Z}});var n=r(29439),a=r(37762),i=r(15671),l=r(43144),s=r(88301),o=r(61120),u=r(60136),y=r(29388),c=(r(93169),r(29303)),h=r(8768),f=r(10106),d=r(92026),v=r(18722),m=(r(37995),r(73828)),p=(r(32344),r(85269),r(50127)),g=r(44070),b=r(8548),_=r(45412),w=function(){function e(t,r){(0,i.Z)(this,e),this.layerUIDs=[],this.isDestroyed=!1,this._data=t;var n=1,a=new Uint32Array(t);this.layerUIDs=[];for(var l=a[n++],s=0;s<l;s++)this.layerUIDs[s]=a[n++];this.bufferDataOffset=n,r&&(this.layer=r.getStyleLayerByUID(this.layerUIDs[0]))}return(0,l.Z)(e,[{key:"isPreparedForRendering",get:function(){return null==this._data}},{key:"offset",get:function(){return this.bufferDataOffset}},{key:"data",get:function(){return this._data}},{key:"destroy",value:function(){this.isDestroyed||(this.doDestroy(),this._data=null,this.isDestroyed=!0)}},{key:"prepareForRendering",value:function(e){null!=this._data&&(this.doPrepareForRendering(e,this._data,this.bufferDataOffset),this._data=null)}}]),e}(),S=function(e){(0,u.Z)(r,e);var t=(0,y.Z)(r);function r(e,n){var a;(0,i.Z)(this,r),(a=t.call(this,e,n)).type=f.al.LINE,a.lineIndexStart=0,a.lineIndexCount=0;var l=new Uint32Array(e),s=a.bufferDataOffset;a.lineIndexStart=l[s++],a.lineIndexCount=l[s++];var o=l[s++];if(o>0){a.patternMap=new Map;for(var u=0;u<o;u++){var y=l[s++],c=l[s++],h=l[s++];a.patternMap.set(y,[c,h])}}return a.bufferDataOffset=s,a}return(0,l.Z)(r,[{key:"memoryUsed",get:function(){var e,t,r,n;return(null!==(e=null===(t=this.data)||void 0===t?void 0:t.byteLength)&&void 0!==e?e:0)+(null!==(r=null===(n=this.vao)||void 0===n?void 0:n.usedMemory)&&void 0!==r?r:0)}},{key:"hasData",value:function(){return this.lineIndexCount>0}},{key:"triangleCount",value:function(){return this.lineIndexCount/3}},{key:"doDestroy",value:function(){this.vao=(0,d.M2)(this.vao)}},{key:"doPrepareForRendering",value:function(e,t,r){var n=new Uint32Array(t),a=new Int32Array(n.buffer),i=n[r++],l=g.f.createVertex(e,b.l1.STATIC_DRAW,new Int32Array(a.buffer,4*r,i));r+=i;var s=n[r++],o=g.f.createIndex(e,b.l1.STATIC_DRAW,new Uint32Array(n.buffer,4*r,s));r+=s;var u=this.layer.lineMaterial;this.vao=new _.U(e,u.getAttributeLocations(),u.getLayoutInfo(),{geometry:l},o)}}]),r}(w),x=function(e){(0,u.Z)(r,e);var t=(0,y.Z)(r);function r(e,n){var a;(0,i.Z)(this,r),(a=t.call(this,e,n)).type=f.al.FILL,a.fillIndexStart=0,a.fillIndexCount=0,a.outlineIndexStart=0,a.outlineIndexCount=0;var l=new Uint32Array(e),s=a.bufferDataOffset;a.fillIndexStart=l[s++],a.fillIndexCount=l[s++],a.outlineIndexStart=l[s++],a.outlineIndexCount=l[s++];var o=l[s++];if(o>0){a.patternMap=new Map;for(var u=0;u<o;u++){var y=l[s++],c=l[s++],h=l[s++];a.patternMap.set(y,[c,h])}}return a.bufferDataOffset=s,a}return(0,l.Z)(r,[{key:"memoryUsed",get:function(){var e,t,r,n,a,i;return(null!==(e=null===(t=this.data)||void 0===t?void 0:t.byteLength)&&void 0!==e?e:0)+(null!==(r=null===(n=this.fillVAO)||void 0===n?void 0:n.usedMemory)&&void 0!==r?r:0)+(null!==(a=null===(i=this.outlineVAO)||void 0===i?void 0:i.usedMemory)&&void 0!==a?a:0)}},{key:"hasData",value:function(){return this.fillIndexCount>0||this.outlineIndexCount>0}},{key:"triangleCount",value:function(){return(this.fillIndexCount+this.outlineIndexCount)/3}},{key:"doDestroy",value:function(){this.fillVAO=(0,d.M2)(this.fillVAO),this.outlineVAO=(0,d.M2)(this.outlineVAO)}},{key:"doPrepareForRendering",value:function(e,t,r){var n=new Uint32Array(t),a=new Int32Array(n.buffer),i=n[r++],l=g.f.createVertex(e,b.l1.STATIC_DRAW,new Int32Array(a.buffer,4*r,i));r+=i;var s=n[r++],o=g.f.createIndex(e,b.l1.STATIC_DRAW,new Uint32Array(n.buffer,4*r,s));r+=s;var u=n[r++],y=g.f.createVertex(e,b.l1.STATIC_DRAW,new Int32Array(a.buffer,4*r,u));r+=u;var c=n[r++],h=g.f.createIndex(e,b.l1.STATIC_DRAW,new Uint32Array(n.buffer,4*r,c));r+=c;var f=this.layer,d=f.fillMaterial,v=f.outlineMaterial;this.fillVAO=new _.U(e,d.getAttributeLocations(),d.getLayoutInfo(),{geometry:l},o),this.outlineVAO=new _.U(e,v.getAttributeLocations(),v.getLayoutInfo(),{geometry:y},h)}}]),r}(w),I=function(e){(0,u.Z)(r,e);var t=(0,y.Z)(r);function r(e,n,a){var l;(0,i.Z)(this,r),(l=t.call(this,e,n)).type=f.al.SYMBOL,l.iconPerPageElementsMap=new Map,l.glyphPerPageElementsMap=new Map,l.symbolInstances=[],l.isIconSDF=!1,l.opacityChanged=!1,l.lastOpacityUpdate=0,l.symbols=[];var s=new Uint32Array(e),o=new Int32Array(e),u=new Float32Array(e),y=l.bufferDataOffset;l.isIconSDF=!!s[y++];for(var c=s[y++],h=s[y++],d=s[y++],v=new m.Z(c,h,d,0),g=s[y++],b=0;b<g;b++){var _=s[y++],w=s[y++],S=s[y++];l.iconPerPageElementsMap.set(_,[w,S])}for(var x=s[y++],I=0;I<x;I++){var A=s[y++],k=s[y++],C=s[y++];l.glyphPerPageElementsMap.set(A,[k,C])}var L=s[y++],Z=s[y++];return l.iconOpacity=new Int32Array(L),l.textOpacity=new Int32Array(Z),y=(0,p.wB)(s,o,u,y,l.symbols,a,v),l.bufferDataOffset=y,l}return(0,l.Z)(r,[{key:"memoryUsed",get:function(){var e,t,r,n,a,i;return(null!==(e=null===(t=this.data)||void 0===t?void 0:t.byteLength)&&void 0!==e?e:0)+(null!==(r=null===(n=this.iconVAO)||void 0===n?void 0:n.usedMemory)&&void 0!==r?r:0)+(null!==(a=null===(i=this.textVAO)||void 0===i?void 0:i.usedMemory)&&void 0!==a?a:0)+(0,v.Xw)(this.iconOpacity)+(0,v.Xw)(this.textOpacity)}},{key:"hasData",value:function(){return this.iconPerPageElementsMap.size>0||this.glyphPerPageElementsMap.size>0}},{key:"triangleCount",value:function(){var e,t=0,r=(0,a.Z)(this.iconPerPageElementsMap);try{for(r.s();!(e=r.n()).done;){var i=(0,n.Z)(e.value,2);i[0];t+=i[1][1]}}catch(u){r.e(u)}finally{r.f()}var l,s=(0,a.Z)(this.glyphPerPageElementsMap);try{for(s.s();!(l=s.n()).done;){var o=(0,n.Z)(l.value,2);o[0];t+=o[1][1]}}catch(u){s.e(u)}finally{s.f()}return t/3}},{key:"doDestroy",value:function(){this.iconVAO=(0,d.M2)(this.iconVAO),this.textVAO=(0,d.M2)(this.textVAO)}},{key:"updateOpacityInfo",value:function(){if(this.opacityChanged){this.opacityChanged=!1;var e=this.iconOpacity,t=this.iconVAO.vertexBuffers.opacity;e.length>0&&e.byteLength===t.usedMemory&&t.setSubData(e,0,0,e.length);var r=this.textOpacity,n=this.textVAO.vertexBuffers.opacity;r.length>0&&r.byteLength===n.usedMemory&&n.setSubData(r,0,0,r.length)}}},{key:"doPrepareForRendering",value:function(e,t,r){var n=new Uint32Array(t),a=new Int32Array(n.buffer),i=n[r++],l=g.f.createVertex(e,b.l1.STATIC_DRAW,new Int32Array(a.buffer,4*r,i));r+=i;var s=n[r++],o=g.f.createIndex(e,b.l1.STATIC_DRAW,new Uint32Array(n.buffer,4*r,s));r+=s;var u=n[r++],y=g.f.createVertex(e,b.l1.STATIC_DRAW,new Int32Array(a.buffer,4*r,u));r+=u;var c=n[r++],h=g.f.createIndex(e,b.l1.STATIC_DRAW,new Uint32Array(n.buffer,4*r,c));r+=c;var f=g.f.createVertex(e,b.l1.STATIC_DRAW,this.iconOpacity.buffer),d=g.f.createVertex(e,b.l1.STATIC_DRAW,this.textOpacity.buffer),v=this.layer,m=v.iconMaterial,p=v.textMaterial;this.iconVAO=new _.U(e,m.getAttributeLocations(),m.getLayoutInfo(),{geometry:l,opacity:f},o),this.textVAO=new _.U(e,p.getAttributeLocations(),p.getLayoutInfo(),{geometry:y,opacity:d},h)}}]),r}(w),A=function(e){(0,u.Z)(r,e);var t=(0,y.Z)(r);function r(e,n){var a;(0,i.Z)(this,r),(a=t.call(this,e,n)).type=f.al.CIRCLE,a.circleIndexStart=0,a.circleIndexCount=0;var l=new Uint32Array(e),s=a.bufferDataOffset;return a.circleIndexStart=l[s++],a.circleIndexCount=l[s++],a.bufferDataOffset=s,a}return(0,l.Z)(r,[{key:"memoryUsed",get:function(){var e,t,r,n;return(null!==(e=null===(t=this.data)||void 0===t?void 0:t.byteLength)&&void 0!==e?e:0)+(null!==(r=null===(n=this.vao)||void 0===n?void 0:n.usedMemory)&&void 0!==r?r:0)}},{key:"hasData",value:function(){return this.circleIndexCount>0}},{key:"triangleCount",value:function(){return this.circleIndexCount/3}},{key:"doDestroy",value:function(){this.vao=(0,d.M2)(this.vao)}},{key:"doPrepareForRendering",value:function(e,t,r){var n=new Uint32Array(t),a=new Int32Array(n.buffer),i=n[r++],l=g.f.createVertex(e,b.l1.STATIC_DRAW,new Int32Array(a.buffer,4*r,i));r+=i;var s=n[r++],o=g.f.createIndex(e,b.l1.STATIC_DRAW,new Uint32Array(n.buffer,4*r,s));r+=s;var u=this.layer.circleMaterial;this.vao=new _.U(e,u.getAttributeLocations(),u.getLayoutInfo(),{geometry:l},o)}}]),r}(w),k=r(46618),C=function(e){(0,u.Z)(r,e);var t=(0,y.Z)(r);function r(e,n,a,l,s,o,u){var y,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;return(0,i.Z)(this,r),(y=t.call(this,e,n,a,l,s,o,4096,4096)).styleRepository=u,y._memCache=c,y.type="vector-tile",y._referenced=0,y._hasSymbolBuckets=!1,y._memoryUsedByLayerData=0,y.layerData=new Map,y.status="loading",y.allSymbolsFadingOut=!1,y.lastOpacityUpdate=0,y.symbols=new Map,y.isCoverage=!1,y.neededForCoverage=!1,y.decluttered=!1,y.parentTile=null,y.childrenTiles=new Set,y.featureIndex=null,y.triangleCount=0,y._processed=!1,y._referenced=1,y.id=e.id,y}return(0,l.Z)(r,[{key:"hasSymbolBuckets",get:function(){return this._hasSymbolBuckets}},{key:"isFading",get:function(){return this._hasSymbolBuckets&&performance.now()-this.lastOpacityUpdate<k.v7}},{key:"isHoldingForFade",get:function(){return this._hasSymbolBuckets&&(!this.allSymbolsFadingOut||performance.now()-this.lastOpacityUpdate<k.v7)}},{key:"wasRequested",get:function(){return"errored"===this.status||"loaded"===this.status||"reloading"===this.status}},{key:"setData",value:function(e){this.changeDataImpl(e),this.requestRender(),this.ready(),this._processed=!0}},{key:"deleteLayerData",value:function(e){var t,r,n,i=!1,l=(0,a.Z)(e);try{for(l.s();!(n=l.n()).done;){var s=n.value,o=this.layerData.get(s);o&&(this._memoryUsedByLayerData-=o.memoryUsed,o.type===f.al.SYMBOL&&this.symbols.delete(s)&&(i=!0),o.destroy(),this.layerData.delete(s))}}catch(u){l.e(u)}finally{l.f()}null!==(t=this._memCache)&&void 0!==t&&t.updateSize(this.key.id,this,this._memoryUsedByLayerData),i&&(null!==(r=this.featureIndex)&&void 0!==r&&r.clear(),this.emit("symbols-changed")),this.requestRender()}},{key:"processed",value:function(){return this._processed}},{key:"hasData",value:function(){return this.layerData.size>0}},{key:"dispose",value:function(){"unloaded"!==this.status&&(this.featureIndex=null,L.delete(this),r._destroyRenderBuckets(this.layerData),this.layerData.clear(),this._memoryUsedByLayerData=0,this.destroy(),this.status="unloaded")}},{key:"release",value:function(){return 0==--this._referenced&&(this.dispose(),this.stage=null,!0)}},{key:"retain",value:function(){++this._referenced}},{key:"referenced",get:function(){return this._referenced}},{key:"usedMemory",get:function(){return this._memoryUsedByLayerData+256}},{key:"changeDataImpl",value:function(e){var t;null===(t=this.featureIndex)||void 0===t||t.clear();var r=!1;if(e){var i,l=e.bucketsWithData,s=e.emptyBuckets,o=this._createRenderBuckets(l);if(s&&s.byteLength>0){var u,y=new Uint32Array(s),c=(0,a.Z)(y);try{for(c.s();!(u=c.n()).done;){var h=u.value;this._deleteLayerData(h)}}catch(S){c.e(S)}finally{c.f()}}var d,v=(0,a.Z)(o);try{for(v.s();!(d=v.n()).done;){var m=(0,n.Z)(d.value,2),p=m[0],g=m[1];this._deleteLayerData(p),g.type===f.al.SYMBOL&&(this.symbols.set(p,g.symbols),r=!0),this._memoryUsedByLayerData+=g.memoryUsed,this.layerData.set(p,g)}}catch(S){v.e(S)}finally{v.f()}null===(i=this._memCache)||void 0===i||i.updateSize(this.key.id,this,this.usedMemory)}this._hasSymbolBuckets=!1;var b,_=(0,a.Z)(this.layerData);try{for(_.s();!(b=_.n()).done;){var w=(0,n.Z)(b.value,2);w[0];w[1].type===f.al.SYMBOL&&(this._hasSymbolBuckets=!0)}}catch(S){_.e(S)}finally{_.f()}r&&this.emit("symbols-changed")}},{key:"attachWithContext",value:function(e){this.stage={context:e,trashDisplayObject:function(e){e.processDetach()},untrashDisplayObject:function(){return!1}}}},{key:"setTransform",value:function(e){(0,s.Z)((0,o.Z)(r.prototype),"setTransform",this).call(this,e);var t=this.resolution/(e.resolution*e.pixelRatio),n=this.width/this.rangeX*t,a=this.height/this.rangeY*t,i=[0,0];e.toScreen(i,[this.x,this.y]);var l=this.transforms.tileUnitsToPixels;(0,c.yR)(l),(0,c.Iu)(l,l,i),(0,c.U1)(l,l,Math.PI*e.rotation/180),(0,c.bA)(l,l,[n,a,1])}},{key:"_createTransforms",value:function(){return{displayViewScreenMat3:(0,h.Ue)(),tileMat3:(0,h.Ue)(),tileUnitsToPixels:(0,h.Ue)()}}},{key:"_createRenderBuckets",value:function(e){var t,r=new Map,n=new Map,i=(0,a.Z)(e);try{for(i.s();!(t=i.n()).done;){var l,s=t.value,o=this._deserializeBucket(s,n),u=(0,a.Z)(o.layerUIDs);try{for(u.s();!(l=u.n()).done;){var y=l.value;r.set(y,o)}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return r}},{key:"_deserializeBucket",value:function(e,t){var r=t.get(e);if(r)return r;switch(new Uint32Array(e)[0]){case f.al.FILL:r=new x(e,this.styleRepository);break;case f.al.LINE:r=new S(e,this.styleRepository);break;case f.al.SYMBOL:r=new I(e,this.styleRepository,this);break;case f.al.CIRCLE:r=new A(e,this.styleRepository)}return t.set(e,r),r}},{key:"_deleteLayerData",value:function(e){if(this.layerData.has(e)){var t=this.layerData.get(e);this._memoryUsedByLayerData-=t.memoryUsed,t.destroy(),this.layerData.delete(e)}}}],[{key:"_destroyRenderBuckets",value:function(e){if(e){var t,r=new Set,n=(0,a.Z)(e.values());try{for(n.s();!(t=n.n()).done;){var i=t.value;r.has(i)||(i.destroy(),r.add(i))}}catch(l){n.e(l)}finally{n.f()}e.clear()}}}]),r}(r(72900).I),L=new Map;function Z(){L.forEach((function(e,t){console.log("\n".concat(t.key,":")),e[0].forEach((function(e){return console.log(e)})),console.log("========"),e[1].forEach((function(e){return console.log(e)}))}))}},12463:function(e,t,r){r.d(t,{g:function(){return u}});var n=r(29439),a=r(37762),i=r(15671),l=r(43144),s=r(46618);function o(e,t){if(e.priority-t.priority)return e.priority-t.priority;var r=e.tile.key,n=t.tile.key;return r.world-n.world?r.world-n.world:r.level-n.level?r.level-n.level:r.row-n.row?r.row-n.row:r.col-n.col?r.col-n.col:e.xTile-t.xTile?e.xTile-t.xTile:e.yTile-t.yTile}var u=function(){function e(t,r,n,a,l,s){(0,i.Z)(this,e),this._visibleTiles=t,this._symbolRepository=r,this._createCollisionJob=n,this._assignTileSymbolsOpacity=a,this._symbolLayerSorter=l,this._isLayerVisible=s,this._selectionJob=null,this._selectionJobCompleted=!1,this._collisionJob=null,this._collisionJobCompleted=!1,this._opacityJob=null,this._opacityJobCompleted=!1,this._running=!0}return(0,l.Z)(e,[{key:"running",get:function(){return this._running}},{key:"setScreenSize",value:function(e,t){this._screenWidth===e&&this._screenHeight===t||this.restart(),this._screenWidth=e,this._screenHeight=t}},{key:"restart",value:function(){this._selectionJob=null,this._selectionJobCompleted=!1,this._collisionJob=null,this._collisionJobCompleted=!1,this._opacityJob=null,this._opacityJobCompleted=!1,this._running=!0}},{key:"continue",value:function(e){if(this._selectionJob||(this._selectionJob=this._createSelectionJob()),!this._selectionJobCompleted){var t=performance.now();if(!this._selectionJob.work(e))return!1;if(this._selectionJobCompleted=!0,0===(e=Math.max(0,e-(performance.now()-t))))return!1}if(this._collisionJob||(this._collisionJob=this._createCollisionJob(this._selectionJob.sortedSymbols,this._screenWidth,this._screenHeight)),!this._collisionJobCompleted){var r=performance.now();if(!this._collisionJob.work(e))return!1;if(this._collisionJobCompleted=!0,0===(e=Math.max(0,e-(performance.now()-r))))return!1}if(this._opacityJob||(this._opacityJob=this._createOpacityJob()),!this._opacityJobCompleted){var n=performance.now();if(!this._opacityJob.work(e))return!1;if(this._opacityJobCompleted=!0,0===(e=Math.max(0,e-(performance.now()-n))))return!1}return this._running=!1,!0}},{key:"_createSelectionJob",value:function(){for(var e=this._symbolRepository.uniqueSymbols,t=0;t<e.length;t++)for(var r=e[t],n=0;n<r.uniqueSymbols.length;n++){var i,l=r.uniqueSymbols[n],s=(0,a.Z)(l.tileSymbols);try{for(s.s();!(i=s.n()).done;){i.value.selectedForRendering=!1}}catch(d){s.e(d)}finally{s.f()}}var u=[],y=0,c=0,h=this._isLayerVisible;var f=this._symbolLayerSorter;return{work:function(t){for(var r,n=performance.now();c<e.length;c++,y=0){var i=e[c],l=i.styleLayerUID;if(h(l)){u[c]=u[c]||{styleLayerUID:l,symbols:[]};for(var s=u[c];y<i.uniqueSymbols.length;y++){if(r=i.uniqueSymbols[y],y%100==99&&performance.now()-n>t)return!1;var f,v=null,m=!1,p=!1,g=(0,a.Z)(r.tileSymbols);try{for(g.s();!(f=g.n()).done;){var b=f.value;if(!p||!m){var _=b.tile;(!v||_.isCoverage||_.neededForCoverage&&!m)&&(v=b,(_.neededForCoverage||_.isCoverage)&&(p=!0),_.isCoverage&&(m=!0))}}}catch(d){g.e(d)}finally{g.f()}if(v.selectedForRendering=!0,p){s.symbols.push(v),r.show=!0;var w,S=(0,a.Z)(r.parts);try{for(S.s();!(w=S.n()).done;){w.value.show=!0}}catch(d){S.e(d)}finally{S.f()}}else r.show=!1}}else u[c]||(u[c]={styleLayerUID:l,symbols:[]})}var x,I=(0,a.Z)(u);try{for(I.s();!(x=I.n()).done;){x.value.symbols.sort(o)}}catch(d){I.e(d)}finally{I.f()}return!0},get sortedSymbols(){return u.sort(f)}}}},{key:"_createOpacityJob",value:function(){var e=this._assignTileSymbolsOpacity,t=this._visibleTiles,r=0;function i(t,r){var l,s=t.symbols,o=(0,a.Z)(s);try{for(o.s();!(l=o.n()).done;){var u=(0,n.Z)(l.value,2);u[0];y(u[1],r)}}catch(f){o.e(f)}finally{o.f()}e(t,r);var c,h=(0,a.Z)(t.childrenTiles);try{for(h.s();!(c=h.n()).done;){i(c.value,r)}}catch(f){h.e(f)}finally{h.f()}}return{work:function(e){for(var n=performance.now();r<t.length;r++){if(performance.now()-n>e)return!1;var a=t[r];null==a.parentTile&&i(a,performance.now())}return!0}}}}]),e}();function y(e,t){var r,n=(0,a.Z)(e);try{for(n.s();!(r=n.n()).done;){var i,l=r.value.unique,o=(0,a.Z)(l.parts);try{for(o.s();!(i=o.n()).done;){var u=i.value,y=u.targetOpacity>.5?1:-1;u.startOpacity+=y*((t-u.startTime)/s.v7),u.startOpacity=Math.min(Math.max(u.startOpacity,0),1),u.startTime=t,u.targetOpacity=l.show&&u.show?1:0}}catch(c){o.e(c)}finally{o.f()}}}catch(c){n.e(c)}finally{n.f()}}},36210:function(e,t,r){r.d(t,{L:function(){return o}});var n=r(29439),a=r(37762),i=r(15671),l=r(43144),s=r(50127),o=function(){function e(t,r,n){(0,i.Z)(this,e),this.tileCoordRange=t,this._visibleTiles=r,this._createUnique=n,this._tiles=new Map,this._uniqueSymbolsReferences=new Map}return(0,l.Z)(e,[{key:"uniqueSymbols",get:function(){return null==this._uniqueSymbolLayerArray&&(this._uniqueSymbolLayerArray=this._createUniqueSymbolLayerArray()),this._uniqueSymbolLayerArray}},{key:"uniqueSymbolsReferences",get:function(){return this._uniqueSymbolsReferences}},{key:"add",value:function(e,t){this._uniqueSymbolLayerArray=null;var r=this._tiles.get(e.id);r||(r={symbols:new Map},this._tiles.set(e.id,r));var i=new Map;if(t){var l,o=(0,a.Z)(t);try{for(o.s();!(l=o.n()).done;){var u=l.value;r.symbols.has(u)&&(i.set(u,r.symbols.get(u)),r.symbols.delete(u))}}catch(C){o.e(C)}finally{o.f()}}else{var y,c=(0,a.Z)(e.layerData);try{for(c.s();!(y=c.n()).done;){var h=(0,n.Z)(y.value,2),f=h[0];h[1];r.symbols.has(f)&&(i.set(f,r.symbols.get(f)),r.symbols.delete(f))}}catch(C){c.e(C)}finally{c.f()}}this._removeSymbols(i);var d,v=e.symbols,m=new Map,p=(0,a.Z)(v);try{for(p.s();!(d=p.n()).done;){var g=(0,n.Z)(d.value,2),b=g[0],_=g[1],w=_.length;if(w>=32){var S=this.tileCoordRange;do{S/=2,w/=4}while(w>8&&S>64);var x=new s.HX(this.tileCoordRange,this.tileCoordRange,S);m.set(b,{flat:_,index:x}),r.symbols.set(b,{flat:_,index:x});var I,A=(0,a.Z)(_);try{for(A.s();!(I=A.n()).done;){var k=I.value;x.getCell(k.xTile,k.yTile).push(k)}}catch(C){A.e(C)}finally{A.f()}}else m.set(b,{flat:_}),r.symbols.set(b,{flat:_})}}catch(C){p.e(C)}finally{p.f()}this._addSymbols(e.key,v)}},{key:"deleteStyleLayers",value:function(e){this._uniqueSymbolLayerArray=null;var t,r=(0,a.Z)(this._tiles);try{for(r.s();!(t=r.n()).done;){var i,l=(0,n.Z)(t.value,2),s=l[0],o=l[1],u=new Map,y=(0,a.Z)(e);try{for(y.s();!(i=y.n()).done;){var c=i.value;o.symbols.has(c)&&(u.set(c,o.symbols.get(c)),o.symbols.delete(c))}}catch(h){y.e(h)}finally{y.f()}this._removeSymbols(u),0===o.symbols.size&&this._tiles.delete(s)}}catch(h){r.e(h)}finally{r.f()}}},{key:"removeTile",value:function(e){this._uniqueSymbolLayerArray=null;var t=this._tiles.get(e.id);if(t){var r,i=new Map,l=(0,a.Z)(e.symbols);try{for(l.s();!(r=l.n()).done;){var s=(0,n.Z)(r.value,2),o=s[0];s[1];t.symbols.has(o)&&(i.set(o,t.symbols.get(o)),t.symbols.delete(o))}}catch(u){l.e(u)}finally{l.f()}this._removeSymbols(i),0===t.symbols.size&&this._tiles.delete(e.id)}}},{key:"querySymbols",value:function(e,t,r,n){var i,l=[],o=this.uniqueSymbols,u=(0,a.Z)(o);try{for(u.s();!(i=u.n()).done;){var y,c=i.value,h=c.styleLayerUID,f=c.uniqueSymbols,d=(0,a.Z)(f);try{for(d.s();!(y=d.n()).done;){var v=y.value.tileSymbols.find((function(e){return e.selectedForRendering}));v&&(0,s.Fe)(v,e,t*(window.devicePixelRatio||1),r)&&l.push({vtlSymbol:v,styleLayerUID:h,tileKey:v.tile.key})}}catch(m){d.e(m)}finally{d.f()}}}catch(m){u.e(m)}finally{u.f()}return l}},{key:"_removeSymbols",value:function(e){var t,r=(0,a.Z)(e);try{for(r.s();!(t=r.n()).done;){var i,l=(0,n.Z)(t.value,2),s=l[0],o=l[1].flat,u=(0,a.Z)(o);try{for(u.s();!(i=u.n()).done;){for(var y=i.value,c=y.unique,h=c.tileSymbols,f=h.length-1,d=0;d<f;d++)if(h[d]===y){h[d]=h[f];break}if(h.length=f,0===f){var v=this._uniqueSymbolsReferences.get(s);v.delete(c),0===v.size&&this._uniqueSymbolsReferences.delete(s)}y.unique=null}}catch(m){u.e(m)}finally{u.f()}}}catch(m){r.e(m)}finally{r.f()}}},{key:"_addSymbols",value:function(e,t){if(0!==t.size){var r,i=this._visibleTiles,l=(0,a.Z)(i);try{for(l.s();!(r=l.n()).done;){var s=r.value;s.parentTile||s.key.world!==e.world||s.key.level===e.level&&!s.key.equals(e)||this._matchSymbols(s,e,t)}}catch(g){l.e(g)}finally{l.f()}var o,u=(0,a.Z)(t);try{for(u.s();!(o=u.n()).done;){var y,c=(0,n.Z)(o.value,2),h=c[0],f=c[1],d=(0,a.Z)(f);try{for(d.s();!(y=d.n()).done;){var v=y.value;if(null==v.unique){var m=this._createUnique();v.unique=m,m.tileSymbols.push(v);var p=this._uniqueSymbolsReferences.get(h);p||(p=new Set,this._uniqueSymbolsReferences.set(h,p)),p.add(m)}}}catch(g){d.e(g)}finally{d.f()}}}catch(g){u.e(g)}finally{u.f()}}}},{key:"_matchSymbols",value:function(e,t,r){if(e.key.level>t.level){var i=e.key.level-t.level;if(e.key.row>>i!==t.row||e.key.col>>i!==t.col)return}if(t.level>e.key.level){var l=t.level-e.key.level;if(t.row>>l!==e.key.row||t.col>>l!==e.key.col)return}if(t.equals(e.key)){var o,u=(0,a.Z)(e.childrenTiles);try{for(u.s();!(o=u.n()).done;){var y=o.value;this._matchSymbols(y,t,r)}}catch(N){u.e(N)}finally{u.f()}}else{var c,h=new Map,f=(0,a.Z)(r);try{for(f.s();!(c=f.n()).done;){var d,v=(0,n.Z)(c.value,2),m=v[0],p=v[1],g=[],b=(0,a.Z)(p);try{for(b.s();!(d=b.n()).done;){var _=d.value,w=(0,s.co)(this.tileCoordRange,_.xTile,t.level,t.col,e.key.level,e.key.col),S=(0,s.co)(this.tileCoordRange,_.yTile,t.level,t.row,e.key.level,e.key.row);w>=0&&w<this.tileCoordRange&&S>=0&&S<this.tileCoordRange&&g.push({symbol:_,xTransformed:w,yTransformed:S})}}catch(N){b.e(N)}finally{b.f()}var x=[],I=20+(e.key.level<t.level?1:1<<e.key.level-t.level),A=this._tiles.get(e.id).symbols.get(m);if(A){var k,C=A.flat,L=(0,a.Z)(g);try{for(L.s();!(k=L.n()).done;){var Z,M=k.value,T=!1,D=M.xTransformed,O=M.yTransformed;Z=null!=A.index?A.index.getCell(D,O):C;var R,U=M.symbol,P=U.hash,E=(0,a.Z)(Z);try{for(E.s();!(R=E.n()).done;){var V=R.value;if(P===V.hash&&Math.abs(D-V.xTile)<=I&&Math.abs(O-V.yTile)<=I){var q=V.unique;U.unique=q,q.tileSymbols.push(U),T=!0;break}}}catch(N){E.e(N)}finally{E.f()}T||x.push(U)}}catch(N){L.e(N)}finally{L.f()}}x.length>0&&h.set(m,x)}}catch(N){f.e(N)}finally{f.f()}var F,B=(0,a.Z)(e.childrenTiles);try{for(B.s();!(F=B.n()).done;){var J=F.value;this._matchSymbols(J,t,h)}}catch(N){B.e(N)}finally{B.f()}}}},{key:"_createUniqueSymbolLayerArray",value:function(){var e,t,r=this._uniqueSymbolsReferences,i=new Array(r.size),l=0,s=(0,a.Z)(r);try{for(s.s();!(t=s.n()).done;){var o=(0,n.Z)(t.value,2),u=o[0],y=o[1],c=new Array(y.size);e=0;var h,f=(0,a.Z)(y);try{for(f.s();!(h=f.n()).done;){var d=h.value;c[e++]=d}}catch(v){f.e(v)}finally{f.f()}i[l]={styleLayerUID:u,uniqueSymbols:c},l++}}catch(v){s.e(v)}finally{s.f()}return i}}]),e}()},38684:function(e,t,r){r.d(t,{J:function(){return l},a:function(){return i}});var n=r(43144),a=r(15671),i=(0,n.Z)((function e(t,r){(0,a.Z)(this,e),this.sourceTile=r,this.xTile=0,this.yTile=0,this.hash=0,this.priority=1,this.featureIndex=0,this.colliders=[],this.textVertexRanges=[],this.iconVertexRanges=[],this.tile=t})),l=(0,n.Z)((function e(){(0,a.Z)(this,e),this.tileSymbols=[],this.parts=[{startTime:0,startOpacity:0,targetOpacity:0,show:!1},{startTime:0,startOpacity:0,targetOpacity:0,show:!1}],this.show=!1}))},42121:function(e,t,r){r.d(t,{f:function(){return h}});var n=r(15671),a=r(43144),i=r(29439),l=r(37762),s=r(8768),o=r(46618),u=r(50127),y=r(21391);function c(e,t,r,n,a,s){var o,u=n.iconRotationAlignment,c=n.textRotationAlignment,h=n.iconTranslate,f=n.iconTranslateAnchor,d=n.textTranslate,v=n.textTranslateAnchor,m=0,p=(0,l.Z)(e.colliders);try{for(p.s();!(o=p.n()).done;){var g=o.value,b=0===g.partIndex?h:d,_=(0,i.Z)(b,2),w=_[0],S=_[1],x=0===g.partIndex?f:v,I=g.minLod<=s&&s<=g.maxLod;m+=I?0:1,g.enabled=I,g.xScreen=g.xTile*a[0]+g.yTile*a[3]+a[6],g.yScreen=g.xTile*a[1]+g.yTile*a[4]+a[7],x===y.fD.MAP?(g.xScreen+=r*w-t*S,g.yScreen+=t*w+r*S):(g.xScreen+=w,g.yScreen+=S),y.aF.VIEWPORT===(0===g.partIndex?u:c)?(g.dxScreen=g.dxPixels,g.dyScreen=g.dyPixels):(g.dxScreen=r*(g.dxPixels+g.width/2)-t*(g.dyPixels+g.height/2)-g.width/2,g.dyScreen=t*(g.dxPixels+g.width/2)+r*(g.dyPixels+g.height/2)-g.height/2)}}catch(A){p.e(A)}finally{p.f()}e.colliders.length>0&&m===e.colliders.length&&(e.unique.show=!1)}var h=function(){function e(t,r,a,i,y,c){(0,n.Z)(this,e),this._symbols=t,this._styleRepository=i,this._zoom=y,this._currentLayerCursor=0,this._currentSymbolCursor=0,this._styleProps=new Map,this._allNeededMatrices=new Map,this._gridIndex=new u.HX(r,a,o.cn),this._si=Math.sin(Math.PI*c/180),this._co=Math.cos(Math.PI*c/180);var h,f=(0,l.Z)(t);try{for(f.s();!(h=f.n()).done;){var d,v=h.value,m=(0,l.Z)(v.symbols);try{for(m.s();!(d=m.n()).done;){var p=d.value;this._allNeededMatrices.has(p.tile)||this._allNeededMatrices.set(p.tile,(0,s.d9)(p.tile.transforms.tileUnitsToPixels))}}catch(g){m.e(g)}finally{m.f()}}}catch(g){f.e(g)}finally{f.f()}}return(0,a.Z)(e,[{key:"work",value:function(e){var t=this._gridIndex;function r(e){for(var r=e.xScreen+e.dxScreen,n=e.yScreen+e.dyScreen,a=r+e.width,s=n+e.height,o=t.getCellSpan(r,n,a,s),u=(0,i.Z)(o,4),y=u[0],c=u[1],h=u[2],f=u[3],d=c;d<=f;d++)for(var v=y;v<=h;v++){var m,p=t.cells[d][v],g=(0,l.Z)(p);try{for(g.s();!(m=g.n()).done;){var b=m.value,_=b.xScreen+b.dxScreen,w=b.yScreen+b.dyScreen,S=_+b.width,x=w+b.height;if(!(a<_||r>S||s<w||n>x))return!0}}catch(I){g.e(I)}finally{g.f()}}return!1}for(var n=performance.now();this._currentLayerCursor<this._symbols.length;this._currentLayerCursor++,this._currentSymbolCursor=0)for(var a=this._symbols[this._currentLayerCursor],s=this._getProperties(a.styleLayerUID);this._currentSymbolCursor<a.symbols.length;this._currentSymbolCursor++){if(this._currentSymbolCursor%100==99&&performance.now()-n>e)return!1;var o=a.symbols[this._currentSymbolCursor];if(o.unique.show){c(o,this._si,this._co,s,this._allNeededMatrices.get(o.tile),this._zoom);var u=o.unique;if(u.show){var y,h=s.iconAllowOverlap,f=s.iconIgnorePlacement,d=s.textAllowOverlap,v=s.textIgnorePlacement,m=(0,l.Z)(o.colliders);try{for(m.s();!(y=m.n()).done;){var p=y.value;if(p.enabled){var g=u.parts[p.partIndex];g.show&&!(p.partIndex?d:h)&&r(p)&&(p.hard?u.show=!1:g.show=!1)}}}catch(R){m.e(R)}finally{m.f()}if(u.show){var b,_=(0,l.Z)(o.colliders);try{for(_.s();!(b=_.n()).done;){var w=b.value;if(w.enabled&&(!(w.partIndex?v:f)&&u.parts[w.partIndex].show))for(var S=w.xScreen+w.dxScreen,x=w.yScreen+w.dyScreen,I=S+w.width,A=x+w.height,k=this._gridIndex.getCellSpan(S,x,I,A),C=(0,i.Z)(k,4),L=C[0],Z=C[1],M=C[2],T=C[3],D=Z;D<=T;D++)for(var O=L;O<=M;O++)this._gridIndex.cells[D][O].push(w)}}catch(R){_.e(R)}finally{_.f()}}}}}return!0}},{key:"_getProperties",value:function(e){var t=this._styleProps.get(e);if(t)return t;var r=this._zoom,n=this._styleRepository.getStyleLayerByUID(e),a=n.getLayoutValue("symbol-placement",r)!==y.R.POINT,i=n.getLayoutValue("icon-rotation-alignment",r);i===y.aF.AUTO&&(i=a?y.aF.MAP:y.aF.VIEWPORT);var l=n.getLayoutValue("text-rotation-alignment",r);l===y.aF.AUTO&&(l=a?y.aF.MAP:y.aF.VIEWPORT);var s=n.getPaintValue("icon-translate",r),o=n.getPaintValue("icon-translate-anchor",r),u=n.getPaintValue("text-translate",r),c=n.getPaintValue("text-translate-anchor",r),h={iconAllowOverlap:n.getLayoutValue("icon-allow-overlap",r),iconIgnorePlacement:n.getLayoutValue("icon-ignore-placement",r),textAllowOverlap:n.getLayoutValue("text-allow-overlap",r),textIgnorePlacement:n.getLayoutValue("text-ignore-placement",r),iconRotationAlignment:i,textRotationAlignment:l,iconTranslateAnchor:o,iconTranslate:s,textTranslateAnchor:c,textTranslate:u};return this._styleProps.set(e,h),h}}]),e}()},50127:function(e,t,r){r.d(t,{C$:function(){return f},Fe:function(){return v},HX:function(){return c},co:function(){return y},wB:function(){return h}});var n=r(29439),a=r(37762),i=r(15671),l=r(43144),s=r(10106),o=r(99201),u=r(38684);function y(e,t,r,n,a,i){var l=r-a;if(l>=0)return(t>>l)+(n-(i<<l))*(e>>l);var s=-l;return t-(i-(n<<s))*(e>>s)<<s}var c=function(){function e(t,r,n){(0,i.Z)(this,e),this._rows=Math.ceil(r/n),this._columns=Math.ceil(t/n),this._cellSize=n,this.cells=new Array(this._rows);for(var a=0;a<this._rows;a++){this.cells[a]=new Array(this._columns);for(var l=0;l<this._columns;l++)this.cells[a][l]=[]}}return(0,l.Z)(e,[{key:"getCell",value:function(e,t){var r=Math.min(Math.max(Math.floor(t/this._cellSize),0),this._rows-1),n=Math.min(Math.max(Math.floor(e/this._cellSize),0),this._columns-1);return this.cells[r]&&this.cells[r][n]||null}},{key:"getCellSpan",value:function(e,t,r,n){return[Math.min(Math.max(Math.floor(e/this._cellSize),0),this.columns-1),Math.min(Math.max(Math.floor(t/this._cellSize),0),this.rows-1),Math.min(Math.max(Math.floor(r/this._cellSize),0),this.columns-1),Math.min(Math.max(Math.floor(n/this._cellSize),0),this.rows-1)]}},{key:"cellSize",get:function(){return this._cellSize}},{key:"columns",get:function(){return this._columns}},{key:"rows",get:function(){return this._rows}}]),e}();function h(e,t,r,n,a,i,l){for(var s=t[n++],o=0;o<s;o++){var y=new u.a(i,l);y.xTile=t[n++],y.yTile=t[n++],y.hash=t[n++],y.priority=t[n++],y.featureIndex=t[n++];for(var c=t[n++],h=0;h<c;h++){var f=t[n++],d=t[n++],v=t[n++],m=t[n++],p=!!t[n++],g=t[n++],b=r[n++],_=r[n++],w=t[n++],S=t[n++];y.colliders.push({xTile:f,yTile:d,dxPixels:v,dyPixels:m,hard:p,partIndex:g,width:w,height:S,minLod:b,maxLod:_})}for(var x=e[n++],I=0;I<x;I++)y.textVertexRanges.push([e[n++],e[n++]]);for(var A=e[n++],k=0;k<A;k++)y.iconVertexRanges.push([e[n++],e[n++]]);a.push(y)}return n}function f(e,t,r){var i,l=(0,a.Z)(e.symbols);try{for(l.s();!(i=l.n()).done;){var s=(0,n.Z)(i.value,2),o=s[0];d(e,t,r,s[1],o)}}catch(u){l.e(u)}finally{l.f()}}function d(e,t,r,i,l){var o=e.layerData.get(l);if(o.type===s.al.SYMBOL){var u,y=(0,a.Z)(i);try{for(y.s();!(u=y.n()).done;){var c=u.value,h=c.unique,f=void 0;if(c.selectedForRendering){var d=h.parts[0],v=d.startOpacity,m=d.targetOpacity;e.allSymbolsFadingOut=e.allSymbolsFadingOut&&0===m;var p=r?Math.floor(127*v)|m<<7:m?255:0;f=p<<24|p<<16|p<<8|p}else f=0;var g,b=(0,a.Z)(c.iconVertexRanges);try{for(b.s();!(g=b.n()).done;)for(var _=(0,n.Z)(g.value,2),w=_[0],S=_[1],x=w;x<w+S;x+=4)o.iconOpacity[x/4]=f}catch(R){b.e(R)}finally{b.f()}if(c.selectedForRendering){var I=h.parts[1],A=I.startOpacity,k=I.targetOpacity;e.allSymbolsFadingOut=e.allSymbolsFadingOut&&0===k;var C=r?Math.floor(127*A)|k<<7:k?255:0;f=C<<24|C<<16|C<<8|C}else f=0;var L,Z=(0,a.Z)(c.textVertexRanges);try{for(Z.s();!(L=Z.n()).done;)for(var M=(0,n.Z)(L.value,2),T=M[0],D=M[1],O=T;O<T+D;O+=4)o.textOpacity[O/4]=f}catch(R){Z.e(R)}finally{Z.f()}}}catch(R){y.e(R)}finally{y.f()}o.lastOpacityUpdate=t,o.opacityChanged=!0}}function v(e,t,r,n){var i,l,s,u,y,c=e.colliders,h=(0,a.Z)(c);try{for(h.s();!(y=h.n()).done;){var f=y.value;if(e.unique.show&&e.unique.parts[f.partIndex].show&&(i=f.xScreen-n[0]+f.dxScreen,l=f.yScreen-n[1]+f.dyScreen,s=i+f.width,u=l+f.height,(0,o.Px)(r,t.x,t.y,i,l,s,u)))return!0}}catch(d){h.e(d)}finally{h.f()}return!1}},10106:function(e,t,r){var n,a,i;r.d(t,{Fr:function(){return i},_K:function(){return a},al:function(){return n}}),function(e){e[e.FILL=1]="FILL",e[e.LINE=2]="LINE",e[e.SYMBOL=3]="SYMBOL",e[e.CIRCLE=4]="CIRCLE"}(n||(n={})),function(e){e[e.BACKGROUND=0]="BACKGROUND",e[e.FILL=1]="FILL",e[e.OUTLINE=2]="OUTLINE",e[e.LINE=3]="LINE",e[e.ICON=4]="ICON",e[e.CIRCLE=5]="CIRCLE",e[e.TEXT=6]="TEXT",e[e.TILEINFO=7]="TILEINFO"}(a||(a={})),function(e){e[e.PAINTER_CHANGED=0]="PAINTER_CHANGED",e[e.LAYOUT_CHANGED=1]="LAYOUT_CHANGED",e[e.LAYER_CHANGED=2]="LAYER_CHANGED",e[e.LAYER_REMOVED=3]="LAYER_REMOVED",e[e.SPRITES_CHANGED=4]="SPRITES_CHANGED"}(i||(i={}))},87071:function(e,t,r){r.d(t,{H:function(){return o}});var n=r(15671),a=r(43144),i=r(60136),l=r(29388),s=r(8768),o=function(e){(0,i.Z)(r,e);var t=(0,l.Z)(r);function r(){return(0,n.Z)(this,r),t.apply(this,arguments)}return(0,a.Z)(r,[{key:"_createTransforms",value:function(){return{displayViewScreenMat3:(0,s.Ue)(),tileMat3:(0,s.Ue)()}}}]),r}(r(72900).I)}}]);
//# sourceMappingURL=24098.5ff957c1.chunk.js.map