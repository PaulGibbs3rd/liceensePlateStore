"use strict";(self.webpackChunkreact_training=self.webpackChunkreact_training||[]).push([[13826],{25666:function(e,t,r){r.d(t,{cn:function(){return n},j:function(){return a},lK:function(){return i}});var n="updating";function i(e){return"updating"===e?null:e}function a(e){return"updating"===e}},831:function(e,t,r){r.d(t,{Qw:function(){return g},Z6:function(){return F},ZS:function(){return w},sw:function(){return v}});var n,i,a=r(74165),o=r(93433),u=r(29439),l=r(15861),s=r(37762),d=r(14921),c=r(84652),f=r(12322),p={setAttribute:function(){},rollback:function(){},commit:function(){}};function v(e,t){var r=t.attributes[e.objectIdField];if(null==r)return p;var i=e.sessions.get(r);if(i)return i;var a=(0,c.d9)(t.attributes),o=new Set,u=e.i3sOverrides.createInteractiveEditSession(r),l=new Map,d=function(e,t){var n=l.get(e);if(null==n){var i=t.indexOf(r);return l.set(e,i),i}return n},f=n.EDITING,v={setAttribute:function(r,i){if(f===n.EDITING){var l=e.fieldsIndex.get(r);if(l){var s=e.attributeStorageInfo.findIndex((function(e){return e.name===l.name}));if(!(s<0)){if(!(r in a))throw new Error('Attribute "'.concat(r,'" is not an attribute of the edited feature.'));u.setAttribute(s,i);var c=e.attributeStorageInfo[s],p=!1;o.add(r),e.forEachNode((function(r,n){var a=d(r,n);if(-1!==a){var o=e.getAttributeData(r.index);if(o){var u=o[c.name];u&&(u[a]=i,e.setAttributeData(r.index,o,t),p=!0)}}})),p&&e.clearMemCache()}}}},rollback:function(){if(f===n.EDITING){var t,i=(0,s.Z)(o);try{for(i.s();!(t=i.n()).done;){var l=t.value;this.setAttribute(l,a[l])}}catch(d){i.e(d)}finally{i.f()}u.remove(),f=n.ROLLED_BACK,e.sessions.delete(r)}},commit:function(){f===n.EDITING&&(u.remove(),f=n.COMMITTED,e.sessions.delete(r))}};return e.sessions.set(r,v),v}function y(e,t,r){var n,i=r.gidToFeatureInfo,a=r.oidToFeatureInfo,o=r.fieldsIndex,u=r.objectIdField,l=r.globalIdField,d=r.featureOrIdentifierList;if(!r.featuresResolved&&null!=d){var c,f=(0,s.Z)(d);try{for(f.s();!(c=f.n()).done;){var p,v=c.value,y={feature:null,oid:-1,gid:null};if("attributes"in v){y.feature=v;var h=v.attributes;if(null!=h)for(var g in h){var m;if(-1!==y.oid&&null!=y.gid)break;var b=o.normalizeFieldName(g);b===u&&(y.oid=null!==(m=h[g])&&void 0!==m?m:-1),b===l&&(y.gid=h[g])}}else y.oid=null!==(p=v.objectId)&&void 0!==p?p:-1,y.gid=v.globalId;null!=y.gid&&i.set(y.gid,y),-1!==y.oid&&a.set(y.oid,y)}}catch(x){f.e(x)}finally{f.f()}r.featuresResolved=!0}return null!==(n=-1!==e?a.get(e):null)&&void 0!==n?n:null!=t?i.get(t):null}function h(e,t,r,n){var i,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],u=[],l={gidToFeatureInfo:new Map,oidToFeatureInfo:new Map,featuresResolved:null==r,fieldsIndex:e.fieldsIndex,objectIdField:e.objectIdField,globalIdField:e.globalIdField,featureOrIdentifierList:r},d=(0,s.Z)(t);try{for(d.s();!(i=d.n()).done;){var c,f,p,v=i.value;if(null==v.error){var h=null!==(c=v.objectId)&&void 0!==c?c:-1,g=v.globalId,m=null!==(f=-1===h||o?y(h,g,l):null)&&void 0!==f?f:{feature:null,oid:h,gid:g},b={oid:-1===h?m.oid:h,gid:null!==g&&void 0!==g?g:m.gid,feature:m.feature,result:v};if(u.push(b),-1===b.oid&&null!=b.gid&&null!=a&&(b.oid=null!==(p=a.get(b.gid))&&void 0!==p?p:-1),-1===b.oid&&null!=b.gid){var x=n.get(b.gid);null==x&&(x=[],n.set(b.gid,x)),x.push(b)}}}}catch(w){d.e(w)}finally{d.f()}return u}function g(e,t){return m.apply(this,arguments)}function m(){return m=(0,l.Z)((0,a.Z)().mark((function e(t,r){var n,i,o,u,l,s,d;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=new Map,l=h(t,r.addedFeatures,null===(n=r.edits)||void 0===n?void 0:n.addFeatures,u),s=h(t,r.updatedFeatures,null===(i=r.edits)||void 0===i?void 0:i.updateFeatures,u),d=h(t,r.deletedFeatures,null===(o=r.edits)||void 0===o?void 0:o.deleteFeatures,u,r.globalIdToObjectId,!1),e.t0=u.size>0,!e.t0){e.next=5;break}return e.next=5,b(t,u);case 5:return e.abrupt("return",{adds:l.filter((function(e){return-1!==e.oid})),updates:s.filter((function(e){return-1!==e.oid})),deletes:d.filter((function(e){return-1!==e.oid}))});case 6:case"end":return e.stop()}}),e)}))),m.apply(this,arguments)}function b(e,t){return x.apply(this,arguments)}function x(){return x=(0,l.Z)((0,a.Z)().mark((function e(t,r){var n,i,o,u,l,c,p,v,y,h,g,m,b,x;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(null===(n=t.i3sOverrides.layer.associatedLayer)||void 0===n?void 0:n.globalIdField)){e.next=3;break}return e.abrupt("return");case 3:return i=n.createQuery(),o=n.objectIdField,u=n.globalIdField,i.where=Array.from(r.keys()).map((function(e){return"".concat(u,"='").concat(e,"'")})).join(" OR "),i.returnGeometry=!1,i.outFields=[o,u],i.cacheHint=!1,e.next=7,(0,d.mt)((0,f.UK)(n,i));case 7:if((l=e.sent).ok){e.next=10;break}return e.abrupt("return");case 10:c=l.value.features,p=(0,s.Z)(c),e.prev=12,p.s();case 14:if((v=p.n()).done){e.next=23;break}if(y=v.value,h=y.attributes[u],g=y.attributes[o],null!=h&&null!=g&&-1!==g){e.next=19;break}return e.abrupt("continue",21);case 19:if(null!=(m=r.get(h))){b=(0,s.Z)(m);try{for(b.s();!(x=b.n()).done;)x.value.oid=g}catch(a){b.e(a)}finally{b.f()}}case 21:e.next=14;break;case 23:e.next=28;break;case 25:e.prev=25,e.t0=e.catch(12),p.e(e.t0);case 28:return e.prev=28,p.f(),e.finish(28);case 31:case"end":return e.stop()}}),e,null,[[12,25,28,31]])}))),x.apply(this,arguments)}function w(e,t){var r=new Map,n=function(e){var t,n=(0,s.Z)(e);try{for(n.s();!(t=n.n()).done;){var i,a=t.value,o=a.oid,u=a.feature,l=null===u||void 0===u?void 0:u.geometry;"mesh"===(null===(i=l)||void 0===i?void 0:i.type)&&r.set(o,l)}}catch(d){n.e(d)}finally{n.f()}};n(t.adds),n(t.updates);var i,a=(0,s.Z)(t.deletes);try{for(a.s();!(i=a.n()).done;){var o=i.value;r.set(o.oid,null)}}catch(v){a.e(v)}finally{a.f()}var l,d=(0,s.Z)(r);try{for(d.s();!(l=d.n()).done;){var c=(0,u.Z)(l.value,2),f=c[0],p=c[1];e.i3sOverrides.updateGeometry(f,p)}}catch(v){d.e(v)}finally{d.f()}}function F(e,t){var r,n=function(e,t){var r=t.updates;if(!r||0===r.length)return new _;for(var n=new _,i=new Map,a=0;a<e.attributeStorageInfo.length;a++)i.set(e.attributeStorageInfo[a].name,a);return e.forEachNode((function(t,i){var a,o=(0,s.Z)(r);try{for(o.s();!(a=o.n()).done;){var u=a.value;if(null!=u.feature){var l=u.feature,d=u.oid,c=i.indexOf(d);for(var f in l.attributes){var p=e.fieldsIndex.normalizeFieldName(f),v=Z(n,t.index,p),y=l.attributes[f];v.push({featureIndex:c,featureId:d,value:y})}}}}catch(h){o.e(h)}finally{o.f()}})),n}(e,t),i=function(e,t){var r=new Map,n=t.adds;if(!n||0===n.length||null==e.globalIdField)return r;var i,a=(0,s.Z)(n);try{for(a.s();!(i=a.n()).done;){var o,u=i.value,l=u.oid,d=u.feature;"mesh"===(null===d||void 0===d||null===(o=d.geometry)||void 0===o?void 0:o.type)&&r.set(l,d)}}catch(c){a.e(c)}finally{a.f()}return r}(e,t);if(0!==n.size||0!==i.size){for(var a=new Map,l=0;l<e.attributeStorageInfo.length;l++)a.set(e.attributeStorageInfo[l].name,l);var d=!1;n.forEach((function(t,r){var n=e.getAttributeData(r),i=!1;t.forEach((function(t,r){var o,u=null!=n?n[r]:null,l=a.get(r),c=(0,s.Z)(t);try{for(c.s();!(o=c.n()).done;){var f=o.value,p=f.featureIndex,v=f.value,y=f.featureId;u&&(u[p]=v,i=!0,d=!0),e.i3sOverrides.updateAttributeValue(y,l,v)}}catch(h){c.e(h)}finally{c.f()}})),i&&e.setAttributeData(r,n,null)})),d&&e.clearMemCache();var c,f=e.fieldsIndex,p=e.i3sOverrides,v=e.objectIdField,y=e.globalIdField,h=null===(r=p.layer.associatedLayer)||void 0===r?void 0:r.infoFor3D,g=new Set(h?[].concat((0,o.Z)(Object.values(h.assetMapFieldRoles)),(0,o.Z)(Object.values(h.transformFieldRoles))):[]),m=(0,s.Z)(i);try{for(m.s();!(c=m.n()).done;){var b=(0,u.Z)(c.value,2),x=b[0],w=b[1];p.featureAdded(x);var F=w.attributes;for(var E in F)if(E===v||E===y||!g.has(E)){var k=f.normalizeFieldName(E),I=null!=k?a.get(k):null;if(null!=I){var O=F[E];p.updateAttributeValue(x,I,O)}}}}catch(C){m.e(C)}finally{m.f()}}}function Z(e,t,r){var n=function(e,t){var r=e.get(t);if(r)return r;var n=new E;return e.set(t,n),n}(e,t),i=null!=r&&n.get(r);if(i)return i;var a=new Array;return n.set(r,a),a}(i=n||(n={}))[i.EDITING=0]="EDITING",i[i.ROLLED_BACK=1]="ROLLED_BACK",i[i.COMMITTED=2]="COMMITTED";var E=Map,_=Map},1247:function(e,t,r){r.d(t,{l:function(){return v}});var n=r(15671),i=r(43144),a=r(97326),o=r(60136),u=r(29388),l=r(27366),s=r(32718),d=r(49861),c=(r(93169),r(84936),r(69912)),f=r(54054),p=r(44011),v=function(e){var t=function(e){(0,o.Z)(r,e);var t=(0,u.Z)(r);function r(){var e;return(0,n.Z)(this,r),(e=t.apply(this,arguments))._definitionExpressionErrors=0,e._maxDefinitionExpressionErrors=20,e.logError=function(t){e._definitionExpressionErrors<e._maxDefinitionExpressionErrors&&s.Z.getLogger((0,a.Z)(e)).error("Error while evaluating definitionExpression: "+t),e._definitionExpressionErrors++,e._definitionExpressionErrors===e._maxDefinitionExpressionErrors&&s.Z.getLogger((0,a.Z)(e)).error("Further errors are ignored")},e}return(0,i.Z)(r,[{key:"parsedDefinitionExpression",get:function(){var e;if(null===(e=this.i3slayer)||void 0===e||!e.definitionExpression)return null;try{var t=f.WhereClause.create(this.i3slayer.definitionExpression,this.i3slayer.fieldsIndex);if(!t.isStandardized)return s.Z.getLogger(this).error("definitionExpression is using non standard function"),null;var r=[],n=t.fieldNames;return(0,p.e8)(n,this.i3slayer.fields,{missingFields:r}),r.length>0?(s.Z.getLogger(this).error("definitionExpression references unknown fields: ".concat(r.join(", "))),null):(this._definitionExpressionErrors=0,t)}catch(i){return s.Z.getLogger(this).error("Failed to parse definitionExpression: "+i),null}}},{key:"definitionExpressionFields",get:function(){return this.parsedDefinitionExpression?this.parsedDefinitionExpression.fieldNames:[]}},{key:"_evaluateClause",value:function(e,t){try{return e.testFeature(t)}catch(r){return this.logError(r),!1}}},{key:"_addDefinitionExpressionToQuery",value:function(e){if(!this.parsedDefinitionExpression)return e;var t=this.i3slayer.definitionExpression,r=e.clone();return r.where?r.where="(".concat(t,") AND (").concat(r.where,")"):r.where=t,r}}]),r}(e);return(0,l._)([(0,d.Cb)({readOnly:!0})],t.prototype,"parsedDefinitionExpression",null),(0,l._)([(0,d.Cb)({readOnly:!0})],t.prototype,"definitionExpressionFields",null),t=(0,l._)([(0,c.j)("esri.views.3d.layers.support.DefinitionExpressionSceneLayerView")],t)}},23224:function(e,t,r){r.d(t,{i:function(){return h}});var n=r(93433),i=r(37762),a=r(74165),o=r(15861),u=r(15671),l=r(43144),s=r(60136),d=r(29388),c=r(27366),f=r(10064),p=(r(32718),r(93169),r(84936),r(69912)),v=r(37270),y=r(24405),h=function(e){var t=function(e){(0,s.Z)(r,e);var t=(0,d.Z)(r);function r(){return(0,u.Z)(this,r),t.apply(this,arguments)}return(0,l.Z)(r,[{key:"_validateFetchPopupFeatures",value:function(e){var t=this.layer;if(!t.popupEnabled)throw new f.Z("scenelayerview3d:fetchPopupFeatures","Popups are disabled",{layer:t});if(!(0,y.V5)(t,e))throw new f.Z("scenelayerview3d:fetchPopupFeatures","Layer does not define a popup template",{layer:t})}},{key:"prepareFetchPopupFeatures",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchPopupFeaturesFromGraphics",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,r){var o,u,l,s,d,c,f,p,h,g,m,b;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._validateFetchPopupFeatures(r),0!==t.length){e.next=2;break}return e.abrupt("return",[]);case 2:if(o="scene"===this.layer.type&&null!=this.layer.associatedLayer?this.layer.associatedLayer:this.layer,u=[],e.t0="fieldsIndex"in this.layer,!e.t0){e.next=12;break}return e.t1=v.Lk,e.t2=this.layer.fieldsIndex,e.next=10,(0,y.e7)(o,(0,y.V5)(this.layer,r));case 10:e.t3=e.sent,u=(0,e.t1)(e.t2,e.t3);case 12:return e.next=14,this.prepareFetchPopupFeatures(u);case 14:l=new Set,s=[],d=[],c=(0,i.Z)(t);try{for(c.s();!(f=c.n()).done;)p=f.value,(0,v.Gm)(u,p,l)?d.push(p):s.push(p)}catch(a){c.e(a)}finally{c.f()}if(0!==d.length){e.next=19;break}return e.abrupt("return",s);case 19:for(h=new Map,g=0;g<t.length;g++)h.set(null!==(m=t[g].getObjectId())&&void 0!==m?m:0,g);return e.next=23,this.whenGraphicAttributes(d,(0,n.Z)(l)).catch((function(){return d})).then((function(e){return s.concat(e)}));case 23:return b=e.sent,e.abrupt("return",(b.sort((function(e,t){var r,n,i,a,o=null!==(r=e.getObjectId())&&void 0!==r?r:0,u=null!==(n=h.get(o))&&void 0!==n?n:0,l=null!==(i=t.getObjectId())&&void 0!==i?i:0;return u-(null!==(a=h.get(l))&&void 0!==a?a:0)})),b));case 25:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()}]),r}(e);return t=(0,c._)([(0,p.j)("esri.views.3d.layers.support.PopupSceneLayerView")],t)}},6777:function(e,t,r){r.d(t,{K:function(){return x}});var n=r(74165),i=r(15861),a=r(93433),o=r(15671),u=r(43144),l=r(60136),s=r(29388),d=r(27366),c=r(7138),f=r(32718),p=r(66978),v=r(94172),y=r(49861),h=r(69912),g=function(e){var t=function(e){(0,l.Z)(r,e);var t=(0,s.Z)(r);function r(){var e;return(0,o.Z)(this,r),(e=t.apply(this,arguments))._numUpdating=0,e}return(0,u.Z)(r,[{key:"updating",get:function(){return this._numUpdating>0}},{key:"autoUpdateAsync",value:function(e,t){var r=this,a=(0,p.Ds)(function(){var t=(0,i.Z)((0,n.Z)().mark((function t(i){var a;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return++r._numUpdating,t.prev=1,t.next=4,i;case 4:a=t.sent,r.destroyed||r._set(e,a),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),f.Z.getLogger(r).warn('Async update of "'.concat(String(e),'" failed. Async update functions should not throw exceptions.'));case 11:--r._numUpdating;case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}());return(0,v.watch)(t,a,v.initial)}}]),r}(e);return(0,d._)([(0,y.Cb)({readOnly:!0})],t.prototype,"updating",null),(0,d._)([(0,y.Cb)()],t.prototype,"_numUpdating",void 0),t=(0,d._)([(0,h.j)("esri.core.AsyncUpdate")],t),t},m=function(e){(0,l.Z)(r,e);var t=(0,s.Z)(r);function r(){return(0,o.Z)(this,r),t.apply(this,arguments)}return(0,u.Z)(r)}(g(c.default));m=(0,d._)([(0,h.j)("esri.core.AsyncUpdate")],m);r(93169),r(84936);var b=r(37270),x=function(e){(0,l.Z)(r,e);var t=(0,s.Z)(r);function r(e){return(0,o.Z)(this,r),t.call(this,e)}return(0,u.Z)(r,[{key:"layer",get:function(){return this.layerView.layer}},{key:"requiredFields",get:function(){var e=this.layerView,t=e.layer.fieldsIndex,r=e.definitionExpressionFields,n=this.rendererFields,i=this.labelingFields,o=this.viewFilterFields;return(0,b.Q0)(t,[].concat((0,a.Z)(null!==r&&void 0!==r?r:[]),(0,a.Z)(null!==n&&void 0!==n?n:[]),(0,a.Z)(null!==i&&void 0!==i?i:[]),(0,a.Z)(null!==o&&void 0!==o?o:[])))}},{key:"initialize",value:function(){var e=this;this.addHandles([this.autoUpdateAsync("rendererFields",(0,i.Z)((0,n.Z)().mark((function t(){var r,i,a;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.layer,i=r.fieldsIndex,a=r.renderer,t.abrupt("return",a?e._getFieldsAsync((function(e){return a.collectRequiredFields(e,i)})):null);case 2:case"end":return t.stop()}}),t)})))),this.autoUpdateAsync("labelingFields",(0,i.Z)((0,n.Z)().mark((function t(){var r;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.layer,t.abrupt("return",r.labelsVisible?e._getFieldsAsync((function(e){return(0,b.Mu)(e,r)})):null);case 2:case"end":return t.stop()}}),t)})))),this.autoUpdateAsync("viewFilterFields",(function(){var t=e.layerView,r=t.layer,n=t.mergedFilter;return e._getFieldsAsync((function(e){return(0,b.Ll)(e,r,n)}))}))])}},{key:"_getFieldsAsync",value:function(){var e=(0,i.Z)((0,n.Z)().mark((function e(t){var r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new Set,e.prev=1,e.next=4,t(r);case 4:return e.abrupt("return",Array.from(r).sort());case 7:return e.prev=7,e.t0=e.catch(1),e.abrupt("return",(f.Z.getLogger(this).error(e.t0),null));case 10:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()}]),r}(g(c.default));(0,d._)([(0,y.Cb)()],x.prototype,"layerView",void 0),(0,d._)([(0,y.Cb)()],x.prototype,"layer",null),(0,d._)([(0,y.Cb)()],x.prototype,"requiredFields",null),(0,d._)([(0,y.Cb)()],x.prototype,"rendererFields",void 0),(0,d._)([(0,y.Cb)()],x.prototype,"labelingFields",void 0),(0,d._)([(0,y.Cb)()],x.prototype,"viewFilterFields",void 0),x=(0,d._)([(0,h.j)("esri.views.3d.layers.support.SceneLayerViewRequiredFields")],x)},77057:function(e,t,r){r.d(t,{q:function(){return v}});var n=r(15671),i=r(43144),a=r(60136),o=r(29388),u=r(27366),l=r(49861),s=(r(93169),r(32718),r(84936),r(69912)),d=r(20311),c=r(18661),f=r(50863),p=r(44011),v=function(e){var t=function(e){(0,a.Z)(r,e);var t=(0,o.Z)(r);function r(){return(0,n.Z)(this,r),t.apply(this,arguments)}return(0,i.Z)(r,[{key:"timeExtent",get:function(){var e;return(0,f.h)(this.i3slayer,null===(e=this.view)||void 0===e?void 0:e.timeExtent,this._get("timeExtent"))}},{key:"mergedFilter",get:function(){var e,t,r,n=this.filter,i=this.timeExtent;if(null==i)return n;var a=null!==(e=null===n||void 0===n?void 0:n.clone())&&void 0!==e?e:new c.Z;return null!=i&&(a.timeExtent=null!==(t=null===(r=a.timeExtent)||void 0===r?void 0:r.intersection(i))&&void 0!==t?t:i),a}},{key:"getTimeFilterDependencies",value:function(){var e=this.i3slayer.timeInfo;return null==e?[]:[e.startField,e.endField]}},{key:"addTimeFilter",value:function(e,t){if(null!=t){var r=this.i3slayer.timeInfo;if(null!=r){var n=r.startField,i=r.endField;if(r.useTime&&(null!=n||null!=i)){var a=r.toJSON(),o=t.toJSON();e.push((function(e,t){return function(e,t,r,n){var i,a=null===(i=t.attributeInfo)||void 0===i?void 0:i.attributeData;if(null==a)return;var o=r.startTimeField,u=r.endTimeField;if(null!=o&&null==a[o]||null!=u&&null==a[u])return;var l=(0,d.y)(r,n,new y(a));if(null==l)return;var s=t.featureIds;(0,p.hv)(e,s,l)}(e,t,a,o)}))}}}}}]),r}(e);return(0,u._)([(0,l.Cb)({readOnly:!0})],t.prototype,"timeExtent",null),(0,u._)([(0,l.Cb)()],t.prototype,"mergedFilter",null),t=(0,u._)([(0,s.j)("esri.views.3d.layers.support.TemporalSceneLayerView")],t)};var y=function(){function e(t){(0,n.Z)(this,e),this.attributeData=t}return(0,i.Z)(e,[{key:"getAttribute",value:function(e,t){return(0,p.Jx)(this.attributeData[t],e)}},{key:"getAttributeAsTimestamp",value:function(e,t){var r=this.getAttribute(e,t);return"string"==typeof r?new Date(r).getTime():"number"==typeof r||null==r?r:null}}]),e}()},48252:function(e,t,r){r.d(t,{v:function(){return a}});var n=r(93433),i=r(37270);function a(){return{requiredFields:{type:[String],readOnly:!0},availableFields:{type:[String],readOnly:!0,get:function(){var e=this.layer,t=this.layer.fieldsIndex,r=this.requiredFields;return e.outFields?(0,i.Q0)(t,[].concat((0,n.Z)((0,i.Lk)(t,e.outFields)),(0,n.Z)(r))):(0,i.Q0)(t,r)}}}}},17006:function(e,t,r){r.d(t,{Z:function(){return w}});var n=r(74165),i=r(15861),a=r(37762),o=r(15671),u=r(43144),l=r(60136),s=r(29388),d=r(27366),c=r(63780),f=r(32718),p=r(92026),v=r(25666),y=r(66978),h=r(94172),g=r(49861),m=(r(93169),r(69912)),b=r(79803),x=function(e){(0,l.Z)(d,e);var t=(0,s.Z)(d);function d(){var e;return(0,o.Z)(this,d),(e=t.apply(this,arguments)).layer=null,e.filter=null,e._geometryEngine=null,e._projectionEngineLoaded=!1,e._abortController=new AbortController,e}return(0,u.Z)(d,[{key:"availableFields",get:function(){return[]}},{key:"maximumNumberOfFeatures",get:function(){return 0},set:function(e){throw new Error("Not implemented")}},{key:"maximumNumberOfFeaturesExceeded",get:function(){return!1}},{key:"layerFilter",get:function(){return(0,v.lK)(this._layerFilter)}},{key:"_layerFilter",get:function(){var e,t=this,r=null===(e=this.layer)||void 0===e?void 0:e.filter;if(null==r||r.geometries.length<1)return null;var n=this._geometryEngine;if(null==n||!this._projectionEngineLoaded&&this._filterNeedsProjectionEngine)return v.cn;var i,o=r.geometries.at(0).spatialReference,u=r.geometries.toArray().map((function(e){try{e=n.simplify(e)}catch(r){return f.Z.getLogger(t).warnOncePerTick("Failed to simplify scene filter mask polygon. Polygon will be ignored."),null}if(null==e)return null;if(e.spatialReference.equals(o))return e;try{return(0,b.project)(e,o)}catch(r){return f.Z.getLogger(t).warnOncePerTick("Failed to project scene filter mask polygon. Polygon will be ignored."),null}})).filter(c.pC).sort((function(e,t){return e.extent.xmin-t.extent.xmin})),l=new Set,s=new Array,d=new Array,p=(0,a.Z)(u);try{var y=function(){var e=i.value,r=e.extent.xmin;if(s.length=0,l.forEach((function(t){if(r>=t.extent.xmax)return d.push(t),void l.delete(t);e.extent.ymin<=t.extent.ymax&&e.extent.ymax>=t.extent.ymin&&n.intersects(e,t)&&s.push(t)})),s.length>0){s.push(e);try{e=n.union(s)}catch(a){return f.Z.getLogger(t).warnOncePerTick("Failed to unify filter mask polygons. Polygon will be ignored."),"continue"}s.pop(),s.forEach((function(e){return l.delete(e)}))}l.add(e)};for(p.s();!(i=p.n()).done;)y()}catch(h){p.e(h)}finally{p.f()}return l.forEach((function(e){return d.push(e)})),d.length>0?{spatialRelationship:r.spatialRelationship,geometries:d}:null}},{key:"_filterNeedsProjectionEngine",get:function(){var e=this.layer.filter;if(null==e||e.geometries.length<=1)return!1;var t=e.geometries.at(0).spatialReference;return e.geometries.some((function(e){var r=e.spatialReference;return!r.equals(t)&&!(0,b.canProjectWithoutEngine)(r,t)}))}},{key:"layerFilterUpdating",get:function(){return(0,v.j)(this._layerFilter)}},{key:"initialize",value:function(){var e=this,t=this._abortController.signal;(0,h.whenOnce)((function(){var t,r,n;return e.destroyed||!e._geometryEngine&&(null===(t=e.layer)||void 0===t||null===(r=t.filter)||void 0===r||null===(n=r.geometries)||void 0===n?void 0:n.length)}),t).then((0,i.Z)((0,n.Z)().mark((function i(){return(0,n.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return(0,y.r9)(t),n.next=3,Promise.all([r.e(99058),r.e(2170)]).then(r.bind(r,2170));case 3:e._geometryEngine=n.sent;case 4:case"end":return n.stop()}}),i)})))).catch(y.H9),this._projectionEngineLoaded=(0,b.isLoaded)(),(0,h.whenOnce)((function(){return e.destroyed||!e._projectionEngineLoaded&&e._filterNeedsProjectionEngine}),t).then((0,i.Z)((0,n.Z)().mark((function r(){return(0,n.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return(0,y.r9)(t),r.next=3,(0,b.load)();case 3:e._projectionEngineLoaded=!0;case 4:case"end":return r.stop()}}),r)})))).catch(y.H9)}},{key:"destroy",value:function(){this._abortController=(0,p.IM)(this._abortController)}},{key:"highlight",value:function(e){throw new Error("Not implemented")}},{key:"queryFeatures",value:function(e,t){throw new Error("Not implemented")}},{key:"queryObjectIds",value:function(e,t){throw new Error("Not implemented")}},{key:"queryFeatureCount",value:function(e,t){throw new Error("Not implemented")}},{key:"createQuery",value:function(){throw new Error("Not implemented")}},{key:"queryExtent",value:function(e,t){throw new Error("Not implemented")}}]),d}(r(67581).Z);(0,d._)([(0,g.Cb)()],x.prototype,"layer",void 0),(0,d._)([(0,g.Cb)()],x.prototype,"availableFields",null),(0,d._)([(0,g.Cb)()],x.prototype,"maximumNumberOfFeatures",null),(0,d._)([(0,g.Cb)({readOnly:!0})],x.prototype,"maximumNumberOfFeaturesExceeded",null),(0,d._)([(0,g.Cb)()],x.prototype,"filter",void 0),(0,d._)([(0,g.Cb)({readOnly:!0})],x.prototype,"layerFilter",null),(0,d._)([(0,g.Cb)({readOnly:!0})],x.prototype,"_layerFilter",null),(0,d._)([(0,g.Cb)()],x.prototype,"_geometryEngine",void 0),(0,d._)([(0,g.Cb)()],x.prototype,"_projectionEngineLoaded",void 0),(0,d._)([(0,g.Cb)()],x.prototype,"_filterNeedsProjectionEngine",null),(0,d._)([(0,g.Cb)()],x.prototype,"layerFilterUpdating",null);var w=x=(0,d._)([(0,m.j)("esri.views.layers.SceneLayerView")],x)}}]);
//# sourceMappingURL=13826.96ee8b79.chunk.js.map