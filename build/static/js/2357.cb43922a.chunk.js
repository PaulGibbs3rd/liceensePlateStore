"use strict";(self.webpackChunkreact_training=self.webpackChunkreact_training||[]).push([[2357,18277],{30168:function(e,t,r){function n(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}r.d(t,{Z:function(){return n}})},79347:function(e,t,r){r.d(t,{e:function(){return s}});var n,i,o,a=r(84397),u={exports:{}};n=u,i=function(){function e(e,r,i){i=i||2;var o,a,u,l,c,p,f,d=r&&r.length,v=d?r[0]*i:e.length,y=t(e,0,v,i,!0),h=[];if(!y||y.next===y.prev)return h;if(d&&(y=s(e,r,y,i)),e.length>80*i){o=u=e[0],a=l=e[1];for(var m=i;m<v;m+=i)(c=e[m])<o&&(o=c),(p=e[m+1])<a&&(a=p),c>u&&(u=c),p>l&&(l=p);f=0!==(f=Math.max(u-o,l-a))?1/f:0}return n(y,h,i,o,a,f),h}function t(e,t,r,n,i){var o,a;if(i===A(e,t,r,n)>0)for(o=t;o<r;o+=n)a=_(o,e[o],e[o+1],a);else for(o=r-n;o>=t;o-=n)a=_(o,e[o],e[o+1],a);if(a&&b(a,a.next)){var u=a.next;C(a),a=u}return a}function r(e,t){if(!e)return e;t||(t=e);var r,n=e;do{if(r=!1,n.steiner||!b(n,n.next)&&0!==g(n.prev,n,n.next))n=n.next;else{var i=n.prev;if(C(n),(n=t=i)===n.next)break;r=!0}}while(r||n!==t);return t}function n(e,t,s,l,c,p,f){if(e){!f&&p&&d(e,l,c,p);for(var v,y,h=e;e.prev!==e.next;)if(v=e.prev,y=e.next,p?o(e,l,c,p):i(e))t.push(v.i/s),t.push(e.i/s),t.push(y.i/s),C(e),e=y.next,h=y.next;else if((e=y)===h){f?1===f?n(e=a(r(e),t,s),t,s,l,c,p,2):2===f&&u(e,t,s,l,c,p):n(r(e),t,s,l,c,p,1);break}}}function i(e){var t=e.prev,r=e,n=e.next;if(g(t,r,n)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(h(t.x,t.y,r.x,r.y,n.x,n.y,i.x,i.y)&&g(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function o(e,t,r,n){var i=e.prev,o=e,a=e.next;if(g(i,o,a)>=0)return!1;for(var u=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,s=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,l=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,c=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,p=v(u,s,t,r,n),f=v(l,c,t,r,n),d=e.prevZ,y=e.nextZ;d&&d.z>=p&&y&&y.z<=f;){if(d!==e.prev&&d!==e.next&&h(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&g(d.prev,d,d.next)>=0)return!1;if(d=d.prevZ,y!==e.prev&&y!==e.next&&h(i.x,i.y,o.x,o.y,a.x,a.y,y.x,y.y)&&g(y.prev,y,y.next)>=0)return!1;y=y.nextZ}for(;d&&d.z>=p;){if(d!==e.prev&&d!==e.next&&h(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&g(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;y&&y.z<=f;){if(y!==e.prev&&y!==e.next&&h(i.x,i.y,o.x,o.y,a.x,a.y,y.x,y.y)&&g(y.prev,y,y.next)>=0)return!1;y=y.nextZ}return!0}function a(e,t,n){var i=e;do{var o=i.prev,a=i.next.next;!b(o,a)&&x(o,i,i.next,a)&&I(o,a)&&I(a,o)&&(t.push(o.i/n),t.push(i.i/n),t.push(a.i/n),C(i),C(i.next),i=e=a),i=i.next}while(i!==e);return r(i)}function u(e,t,i,o,a,u){var s=e;do{for(var l=s.next.next;l!==s.prev;){if(s.i!==l.i&&m(s,l)){var c=T(s,l);return s=r(s,s.next),c=r(c,c.next),n(s,t,i,o,a,u),void n(c,t,i,o,a,u)}l=l.next}s=s.next}while(s!==e)}function s(e,n,i,o){var a,u,s,c=[];for(a=0,u=n.length;a<u;a++)(s=t(e,n[a]*o,a<u-1?n[a+1]*o:e.length,o,!1))===s.next&&(s.steiner=!0),c.push(y(s));for(c.sort(l),a=0;a<c.length;a++)i=r(i=p(c[a],i),i.next);return i}function l(e,t){return e.x-t.x}function c(e){if(e.next.prev===e)return e;for(var t=e;;){var r=t.next;if(r.prev===t||r===t||r===e)break;t=r}return t}function p(e,t){var n=function(e,t){var r,n=t,i=e.x,o=e.y,a=-1/0;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){var u=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(u<=i&&u>a){if(a=u,u===i){if(o===n.y)return n;if(o===n.next.y)return n.next}r=n.x<n.next.x?n:n.next}}n=n.next}while(n!==t);if(!r)return null;if(i===a)return r;var s,l=r,c=r.x,p=r.y,d=1/0;n=r;do{i>=n.x&&n.x>=c&&i!==n.x&&h(o<p?i:a,o,c,p,o<p?a:i,o,n.x,n.y)&&(s=Math.abs(o-n.y)/(i-n.x),I(n,e)&&(s<d||s===d&&(n.x>r.x||n.x===r.x&&f(r,n)))&&(r=n,d=s)),n=n.next}while(n!==l);return r}(e,t);if(!n)return t;var i=T(n,e),o=r(n,n.next),a=c(i);return r(a,a.next),o=c(o),c(t===n?o:t)}function f(e,t){return g(e.prev,e,t.prev)<0&&g(t.next,e,e.next)<0}function d(e,t,r,n){var i=e;do{null===i.z&&(i.z=v(i.x,i.y,t,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,r,n,i,o,a,u,s,l=1;do{for(r=e,e=null,o=null,a=0;r;){for(a++,n=r,u=0,t=0;t<l&&(u++,n=n.nextZ);t++);for(s=l;u>0||s>0&&n;)0!==u&&(0===s||!n||r.z<=n.z)?(i=r,r=r.nextZ,u--):(i=n,n=n.nextZ,s--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;r=n}o.nextZ=null,l*=2}while(a>1)}(i)}function v(e,t,r,n,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function y(e){var t=e,r=e;do{(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next}while(t!==e);return r}function h(e,t,r,n,i,o,a,u){return(i-a)*(t-u)-(e-a)*(o-u)>=0&&(e-a)*(n-u)-(r-a)*(t-u)>=0&&(r-a)*(o-u)-(i-a)*(n-u)>=0}function m(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&x(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}(e,t)&&(I(e,t)&&I(t,e)&&function(e,t){var r=e,n=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do{r.y>o!=r.next.y>o&&r.next.y!==r.y&&i<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next}while(r!==e);return n}(e,t)&&(g(e.prev,e,t.prev)||g(e,t.prev,t))||b(e,t)&&g(e.prev,e,e.next)>0&&g(t.prev,t,t.next)>0)}function g(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function b(e,t){return e.x===t.x&&e.y===t.y}function x(e,t,r,n){var i=w(g(e,t,r)),o=w(g(e,t,n)),a=w(g(r,n,e)),u=w(g(r,n,t));return i!==o&&a!==u||!(0!==i||!Z(e,r,t))||!(0!==o||!Z(e,n,t))||!(0!==a||!Z(r,e,n))||!(0!==u||!Z(r,t,n))}function Z(e,t,r){return t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y)}function w(e){return e>0?1:e<0?-1:0}function I(e,t){return g(e.prev,e,e.next)<0?g(e,t,e.next)>=0&&g(e,e.prev,t)>=0:g(e,t,e.prev)<0||g(e,e.next,t)<0}function T(e,t){var r=new S(e.i,e.x,e.y),n=new S(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,r.next=i,i.prev=r,n.next=r,r.prev=n,o.next=n,n.prev=o,n}function _(e,t,r,n){var i=new S(e,t,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function C(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function S(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function A(e,t,r,n){for(var i=0,o=t,a=r-n;o<r;o+=n)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i}return e.deviation=function(e,t,r,n){var i=t&&t.length,o=i?t[0]*r:e.length,a=Math.abs(A(e,0,o,r));if(i)for(var u=0,s=t.length;u<s;u++){var l=t[u]*r,c=u<s-1?t[u+1]*r:e.length;a-=Math.abs(A(e,l,c,r))}var p=0;for(u=0;u<n.length;u+=3){var f=n[u]*r,d=n[u+1]*r,v=n[u+2]*r;p+=Math.abs((e[f]-e[v])*(e[d+1]-e[f+1])-(e[f]-e[d])*(e[v+1]-e[f+1]))}return 0===a&&0===p?0:Math.abs((p-a)/a)},e.flatten=function(e){for(var t=e[0][0].length,r={vertices:[],holes:[],dimensions:t},n=0,i=0;i<e.length;i++){for(var o=0;o<e[i].length;o++)for(var a=0;a<t;a++)r.vertices.push(e[i][o][a]);i>0&&(n+=e[i-1].length,r.holes.push(n))}return r},e},void 0!==(o=i())&&(n.exports=o);var s=(0,a.g)(u.exports)},96866:function(e,t,r){r.d(t,{B:function(){return y}});var n=r(1413),i=r(37762),o=r(10064),a=r(9997),u=r(80292),s=r(35995),l=r(71907),c=r(33397),p=r(25265),f=r(49861),d=r(22892),v=r(53283);function y(e){var t,r=null!==(t=null===e||void 0===e?void 0:e.origins)&&void 0!==t?t:[void 0];return function(t,o){var a,l=function(e,t,r){var i;if("resource"===(null===e||void 0===e?void 0:e.type))return function(e,t,r){var i=(0,c.Oe)(t,r);return{type:String,read:function(e,t,r){var n=(0,v.r)(e,t,r);return i.type===String?n:"function"==typeof i.type?new i.type({url:n}):void 0},write:{writer:function(t,o,a,l){if(null===l||void 0===l||!l.resources)return"string"==typeof t?void(o[a]=(0,v.t)(t,l)):void(o[a]=t.write({},l));var c=function(e){return null==e?null:"string"==typeof e?e:e.url}(t),f=(0,v.t)(c,(0,n.Z)((0,n.Z)({},l),{},{verifyItemRelativeUrls:null!==l&&void 0!==l&&l.verifyItemRelativeUrls?{writtenUrls:l.verifyItemRelativeUrls.writtenUrls,rootPath:void 0}:void 0}),v.M.NO),y=i.type!==String&&(!(0,u.l)(this)||(null===l||void 0===l?void 0:l.origin)&&this.originIdOf(r)>(0,p.M9)(l.origin)),b={object:this,propertyName:r,value:t,targetUrl:f,dest:o,targetPropertyName:a,context:l,params:e};null!==l&&void 0!==l&&l.portalItem&&f&&!(0,s.YP)(f)?y&&null!==e&&void 0!==e&&e.contentAddressed?h(b):y?function(e){var t,r=e.context,i=e.targetUrl,o=e.params,a=e.value,u=e.dest,l=e.targetPropertyName;if(!r.portalItem)return;var c=r.portalItem.resourceFromPath(i),p=g(a,i,r),f=(0,d.B)(p),v=(0,s.Ml)(c.path),y=null!==(t=null===o||void 0===o?void 0:o.compress)&&void 0!==t&&t;f===v?(r.resources&&m((0,n.Z)((0,n.Z)({},e),{},{resource:c,content:p,compress:y,updates:r.resources.toUpdate})),u[l]=i):h(e)}(b):function(e){var t=e.context,r=e.targetUrl,n=e.dest,i=e.targetPropertyName;t.portalItem&&t.resources&&(t.resources.toKeep.push({resource:t.portalItem.resourceFromPath(r),compress:!1}),n[i]=r)}(b):null!==l&&void 0!==l&&l.portalItem&&(null==f||null!=(0,v.i)(f)||(0,s.jc)(f)||y)?h(b):o[a]=f}}}}(e,t,r);switch(null!==(i=null===e||void 0===e?void 0:e.type)&&void 0!==i?i:"other"){case"other":return{read:!0,write:!0};case"url":return{read:v.b.read,write:v.b.write}}}(e,t,o),y=(0,i.Z)(r);try{for(y.s();!(a=y.n()).done;){var b=a.value,x=(0,f.CJ)(t,b,o);for(var Z in l)x[Z]=l[Z]}}catch(w){y.e(w)}finally{y.f()}}}function h(e){var t,r,i,u,c=e.targetUrl,p=e.params,f=e.value,y=e.context,h=e.dest,b=e.targetPropertyName;if(y.portalItem){var x=(0,v.p)(c),Z=g(f,c,y);if(null!==p&&void 0!==p&&p.contentAddressed&&"json"!==Z.type)null===(t=y.messages)||void 0===t||t.push(new o.Z("persistable:contentAddressingUnsupported",'Property "'.concat(b,'" is trying to serializing a resource with content of type ').concat(Z.type," with content addressing. Content addressing is only supported for json resources."),{content:Z}));else{var w=null!==p&&void 0!==p&&p.contentAddressed&&"json"===Z.type?(0,a.F)(Z.jsonString):null!==(r=null===x||void 0===x?void 0:x.filename)&&void 0!==r?r:(0,l.DO)(),I=(0,s.v_)(null!==(i=null===p||void 0===p?void 0:p.prefix)&&void 0!==i?i:null===x||void 0===x?void 0:x.prefix,w),T="".concat(I,".").concat((0,d.B)(Z));if(null!==p&&void 0!==p&&p.contentAddressed&&y.resources&&"json"===Z.type){var _,C=null!==(_=y.resources.toKeep.find((function(e){return e.resource.path===T})))&&void 0!==_?_:y.resources.toAdd.find((function(e){return e.resource.path===T}));if(C)return void(h[b]=C.resource.itemRelativeUrl)}var S=y.portalItem.resourceFromPath(T);(0,s.jc)(c)&&y.resources&&y.resources.pendingOperations.push((0,s.gi)(c).then((function(e){S.path="".concat(I,".").concat((0,d.B)({type:"blob",blob:e})),h[b]=S.itemRelativeUrl})).catch((function(){})));var A=null!==(u=null===p||void 0===p?void 0:p.compress)&&void 0!==u&&u;y.resources&&m((0,n.Z)((0,n.Z)({},e),{},{resource:S,content:Z,compress:A,updates:y.resources.toAdd})),h[b]=S.itemRelativeUrl}}}function m(e){var t=e.object,r=e.propertyName,n=e.updates,i=e.resource,o=e.content,a=e.compress;n.push({resource:i,content:o,compress:a,finish:function(e){!function(e,t,r){"string"==typeof e[t]?e[t]=r.url:e[t].url=r.url}(t,r,e)}})}function g(e,t,r){return"string"==typeof e?{type:"url",url:t}:{type:"json",jsonString:JSON.stringify(e.toJSON(r))}}},46228:function(e,t,r){r.d(t,{I:function(){return i},v:function(){return o}});var n=r(16889);function i(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=(0,n.uZ)(e,0,s),o=0;o<4;o++)t[r+o]=Math.floor(256*l(i*a[o]))}function o(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=0,n=0;n<4;n++)r+=e[t+n]*u[n];return r}var a=[1,256,65536,16777216],u=[1/256,1/65536,1/16777216,1/4294967296],s=o(new Uint8ClampedArray([255,255,255,255]));function l(e){return e-Math.floor(e)}},51e3:function(e,t,r){r.d(t,{Jl:function(){return v},n$:function(){return g},r7:function(){return d}});var n=r(74165),i=r(1413),o=r(15861),a=r(76200),u=r(10064),s=r(66978),l=r(35995),c=r(1370),p=null,f=!0;function d(e,t,r){if(!e||!t)throw new Error("Cannot construct image data without dimensions");if(f)try{return new ImageData(e,t)}catch(n){f=!1}return y(e,t,r)}function v(e,t,r,n){if(!t||!r)throw new Error("Cannot construct image data without dimensions");if(f)try{return new ImageData(e,t,r)}catch(p){f=!1}var i=y(t,r,n);return i.data.set(e,0),i}function y(e,t,r){return r||(p||((p=document.createElement("canvas")).width=1,p.height=1),r=p),r.getContext("2d").createImageData(e,t)}function h(e,t){return m.apply(this,arguments)}function m(){return m=(0,o.Z)((0,n.Z)().mark((function e(t,r){var o,l,c;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=window.URL.createObjectURL(t),e.prev=1,e.next=4,(0,a.Z)(o,(0,i.Z)((0,i.Z)({},r),{},{responseType:"image"}));case 4:return l=e.sent,c=l.data,e.abrupt("return",c);case 9:if(e.prev=9,e.t0=e.catch(1),(0,s.D_)(e.t0)){e.next=13;break}throw new u.Z("invalid-image","Could not fetch requested image at ".concat(o));case 13:throw e.t0;case 14:return e.prev=14,window.URL.revokeObjectURL(o),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,9,14,17]])}))),m.apply(this,arguments)}function g(e,t){return b.apply(this,arguments)}function b(){return(b=(0,o.Z)((0,n.Z)().mark((function e(t,i){var o,a,u,s,l,c,p,f,d,v;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(t,i);case 2:if(o=e.sent,a=o.arrayBuffer,u=o.mediaType,s="image/png"===u,"image/gif"!==u){e.next=14;break}return e.next=9,r.e(71625).then(r.bind(r,71625));case 9:if(l=e.sent,c=l.isAnimatedGIF,p=l.parseGif,!c(a)){e.next=14;break}return e.abrupt("return",p(a,i));case 14:if(!s){e.next=22;break}return e.next=17,r.e(35920).then(r.bind(r,35920));case 17:if(f=e.sent,d=f.isAnimatedPNG,v=f.parseApng,!d(a)){e.next=22;break}return e.abrupt("return",v(a,i));case 22:return e.abrupt("return",h(new Blob([a],{type:u}),i));case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e,t){return Z.apply(this,arguments)}function Z(){return Z=(0,o.Z)((0,n.Z)().mark((function e(t,r){var o,u,s,p;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(s=(0,l.sJ)(t))||void 0===s||!s.isBase64){e.next=3;break}return e.abrupt("return",{arrayBuffer:(0,c.R)(s.data),mediaType:s.mediaType});case 3:return e.next=5,(0,a.Z)(t,(0,i.Z)({responseType:"array-buffer"},r));case 5:return p=e.sent,e.abrupt("return",{arrayBuffer:p.data,mediaType:null!==(o=null===(u=p.getHeader)||void 0===u?void 0:u.call(p,"Content-Type"))&&void 0!==o?o:""});case 7:case"end":return e.stop()}}),e)}))),Z.apply(this,arguments)}},13611:function(e,t,r){r.d(t,{$X:function(){return u},AK:function(){return x},EU:function(){return C},Fp:function(){return p},Fv:function(){return b},I6:function(){return S},IH:function(){return a},JG:function(){return i},LG:function(){return k},TE:function(){return v},TK:function(){return R},U1:function(){return _},VV:function(){return c},bA:function(){return f},bI:function(){return y},c:function(){return I},fS:function(){return A},iu:function(){return T},kC:function(){return Z},kE:function(){return h},lu:function(){return E},od:function(){return d},t7:function(){return w},t8:function(){return o},tk:function(){return g},we:function(){return m}});var n=r(24204);function i(e,t){return e[0]=t[0],e[1]=t[1],e}function o(e,t,r){return e[0]=t,e[1]=r,e}function a(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e}function u(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e}function s(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e}function l(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e}function c(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e}function p(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e}function f(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e}function d(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e}function v(e,t){var r=t[0]-e[0],n=t[1]-e[1];return Math.sqrt(r*r+n*n)}function y(e,t){var r=t[0]-e[0],n=t[1]-e[1];return r*r+n*n}function h(e){var t=e[0],r=e[1];return Math.sqrt(t*t+r*r)}function m(e){var t=e[0],r=e[1];return t*t+r*r}function g(e,t){return e[0]=-t[0],e[1]=-t[1],e}function b(e,t){var r=t[0],n=t[1],i=r*r+n*n;return i>0&&(i=1/Math.sqrt(i),e[0]=t[0]*i,e[1]=t[1]*i),e}function x(e,t){return e[0]*t[0]+e[1]*t[1]}function Z(e,t,r){var n=t[0]*r[1]-t[1]*r[0];return e[0]=e[1]=0,e[2]=n,e}function w(e,t,r,n){var i=t[0],o=t[1];return e[0]=i+n*(r[0]-i),e[1]=o+n*(r[1]-o),e}function I(e,t,r){var n=t[0],i=t[1];return e[0]=r[0]*n+r[2]*i,e[1]=r[1]*n+r[3]*i,e}function T(e,t,r){var n=t[0],i=t[1];return e[0]=r[0]*n+r[2]*i+r[4],e[1]=r[1]*n+r[3]*i+r[5],e}function _(e,t,r,n){var i=t[0]-r[0],o=t[1]-r[1],a=Math.sin(n),u=Math.cos(n);return e[0]=i*u-o*a+r[0],e[1]=i*a+o*u+r[1],e}function C(e,t){var r=e[0],n=e[1],i=t[0],o=t[1],a=r*r+n*n;a>0&&(a=1/Math.sqrt(a));var u=i*i+o*o;u>0&&(u=1/Math.sqrt(u));var s=(r*i+n*o)*a*u;return s>1?0:s<-1?Math.PI:Math.acos(s)}function S(e,t){return e[0]===t[0]&&e[1]===t[1]}function A(e,t){var r=e[0],i=e[1],o=t[0],a=t[1],u=(0,n.bn)();return Math.abs(r-o)<=u*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(i-a)<=u*Math.max(1,Math.abs(i),Math.abs(a))}function k(e,t,r,n,i){var o=t[0]-r[0],a=t[1]-r[1],u=(n[0]*o+n[1]*a)*(i-1);return o=n[0]*u,a=n[1]*u,e[0]=t[0]+o,e[1]=t[1]+a,e}var L=h,E=u,F=s,O=l,R=v,j=y,D=m;Object.freeze(Object.defineProperty({__proto__:null,add:a,angle:C,ceil:function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e},copy:i,cross:Z,dist:R,distance:v,div:O,divide:l,dot:x,equals:A,exactEquals:S,floor:function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e},inverse:function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e},len:L,length:h,lerp:w,max:p,min:c,mul:F,multiply:s,negate:g,normalize:b,projectAndScale:k,random:function(e,t){t=t||1;var r=2*(0,n.FD)()*Math.PI;return e[0]=Math.cos(r)*t,e[1]=Math.sin(r)*t,e},rotate:_,round:function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e},scale:f,scaleAndAdd:d,set:o,sqrDist:j,sqrLen:D,squaredDistance:y,squaredLength:m,str:function(e){return"vec2("+e[0]+", "+e[1]+")"},sub:E,subtract:u,transformMat2:I,transformMat2d:T,transformMat3:function(e,t,r){var n=t[0],i=t[1];return e[0]=r[0]*n+r[3]*i+r[6],e[1]=r[1]*n+r[4]*i+r[7],e},transformMat4:function(e,t,r){var n=t[0],i=t[1];return e[0]=r[0]*n+r[4]*i+r[12],e[1]=r[1]*n+r[5]*i+r[13],e}},Symbol.toStringTag,{value:"Module"}))},68859:function(e,t,r){r.d(t,{K:function(){return s},U:function(){return l}});var n=r(74165),i=r(15861),o=r(12400),a=r(79803),u=r(50628);function s(e,t,r,n){var i,o;if((0,a.canProjectWithoutEngine)(e.spatialReference,r)){var s;p[0]=e.x,p[1]=e.y;var l=e.z;return p[2]=null!==(s=null!==l&&void 0!==l?l:n)&&void 0!==s?s:0,(0,u.projectBuffer)(p,e.spatialReference,0,t,r,0,1)}var c=(0,a.tryProjectWithZConversion)(e,r);return!!c&&(t[0]=null===c||void 0===c?void 0:c.x,t[1]=null===c||void 0===c?void 0:c.y,t[2]=null!==(i=null!==(o=null===c||void 0===c?void 0:c.z)&&void 0!==o?o:n)&&void 0!==i?i:0,!0)}function l(e,t,r,n,i){return c.apply(this,arguments)}function c(){return c=(0,i.Z)((0,n.Z)().mark((function e(t,r,i,o,u){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.initializeProjection)(t.spatialReference,i,null,u);case 2:return e.abrupt("return",s(t,r,i,o));case 3:case"end":return e.stop()}}),e)}))),c.apply(this,arguments)}var p=(0,o.Ue)()},5986:function(e,t,r){r.d(t,{S:function(){return o}});r(79803);var n=r(78952),i=r(68859);function o(e,t,r,n,o){return!(null==t||null==n||e.length<2)&&(a.x=e[0],a.y=e[1],a.z=e[2],a.spatialReference=t,(0,i.K)(a,r,n,o))}var a=(0,r(55946).T)(0,0,0,n.Z.WGS84)},86372:function(e,t,r){r.d(t,{JK:function(){return u},QZ:function(){return o},Rq:function(){return a},bg:function(){return i},mB:function(){return s}});var n=r(18722);function i(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e<=n.c8?t?new Array(e).fill(0):new Array(e):new Float64Array(e)}function o(e){return((0,n.kJ)(e)?e.length:e.byteLength/8)<=n.c8?Array.from(e):new Float64Array(e)}function a(e,t,r){return Array.isArray(e)?e.slice(t,t+r):e.subarray(t,t+r)}function u(e,t){for(var r=0;r<t.length;++r)e[r]=t[r];return e}function s(e){return Array.isArray(e)?new Float64Array(e):e}},39406:function(e,t,r){r.d(t,{$z:function(){return a},KF:function(){return p},LE:function(){return d},X9:function(){return u},mi:function(){return o}});var n=r(37762),i=r(18722);function o(e){if((0,i.kJ)(e)){if(e.length<i.c8)return e}else if(e.length<i.c8)return Array.from(e);var t=!0,r=!0;return e.some((function(e,n){return r=r&&e===n,!(t=t&&0===e)&&!r})),t?d(e.length):r?p(e.length):(0,i.kJ)(e)||e.BYTES_PER_ELEMENT!==Uint16Array.BYTES_PER_ELEMENT?function(e){var t,r=!0,o=(0,n.Z)(e);try{for(o.s();!(t=o.n()).done;){var a=t.value;if(a>=65536)return(0,i.kJ)(e)?new Uint32Array(e):e;a>=256&&(r=!1)}}catch(u){o.e(u)}finally{o.f()}return r?new Uint8Array(e):new Uint16Array(e)}(e):e}function a(e){return e<=i.c8?new Array(e):e<=65536?new Uint16Array(e):new Uint32Array(e)}function u(e){return e<=i.c8?new Array(e):new Uint32Array(e)}var s=function(){for(var e=new Uint32Array(131072),t=0;t<e.length;++t)e[t]=t;return e}(),l=[0],c=function(){for(var e=new Uint16Array(65536),t=0;t<e.length;++t)e[t]=t;return e}();function p(e){if(1===e)return l;if(e<i.c8)return Array.from(new Uint16Array(c.buffer,0,e));if(e<c.length)return new Uint16Array(c.buffer,0,e);if(e>s.length){var t=Math.max(2*s.length,e);s=new Uint32Array(t);for(var r=0;r<s.length;r++)s[r]=r}return new Uint32Array(s.buffer,0,e)}var f=new Uint8Array(65536);function d(e){if(1===e)return l;if(e<i.c8)return new Array(e).fill(0);if(e>f.length){var t=Math.max(2*f.length,e);f=new Uint8Array(t)}return new Uint8Array(f.buffer,0,e)}},64995:function(e,t,r){r.d(t,{Z:function(){return x}});var n,i=r(15671),o=r(43144),a=r(60136),u=r(29388),s=r(27366),l=r(46784),c=r(84652),p=r(32718),f=r(49861),d=r(89125),v=r(69912),y=r(25243),h=r(10891),m=r(11587),g=r(27474),b=n=function(e){(0,a.Z)(r,e);var t=(0,u.Z)(r);function r(e){var n;return(0,i.Z)(this,r),(n=t.call(this,e)).faces=null,n.material=null,n.name=void 0,n.shading="source",n.trustSourceNormals=!1,n}return(0,o.Z)(r,[{key:"castFaces",value:function(e){return(0,g.X)(e,Uint32Array,[Uint16Array],{loggerTag:".faces=",stride:3},p.Z.getLogger(this))}},{key:"castMaterial",value:function(e){return(0,y.TJ)(e&&"object"==typeof e&&("metallic"in e||"roughness"in e||"metallicRoughnessTexture"in e)?m.Z:h.Z,e)}},{key:"clone",value:function(){return new n({faces:(0,c.d9)(this.faces),shading:this.shading,material:(0,c.d9)(this.material),trustSourceNormals:this.trustSourceNormals,name:this.name})}},{key:"cloneWithDeduplication",value:function(e,t){var r={faces:(0,c.d9)(this.faces),shading:this.shading,material:this.material?this.material.cloneWithDeduplication(e,t):null,trustSourceNormals:this.trustSourceNormals,name:this.name};return new n(r)}},{key:"memoryUsage",get:function(){var e=0;return null!=this.faces&&(e+=this.faces.byteLength),null!=this.material&&(e+=this.material.memoryUsage),e}}],[{key:"from",value:function(e){return(0,y.TJ)(n,e)}}]),r}(l.wq);(0,s._)([(0,f.Cb)({json:{write:!0}})],b.prototype,"faces",void 0),(0,s._)([(0,d.p)("faces")],b.prototype,"castFaces",null),(0,s._)([(0,f.Cb)({type:h.Z,json:{write:!0}})],b.prototype,"material",void 0),(0,s._)([(0,d.p)("material")],b.prototype,"castMaterial",null),(0,s._)([(0,f.Cb)()],b.prototype,"name",void 0),(0,s._)([(0,f.Cb)({type:String,json:{write:!0}})],b.prototype,"shading",void 0),(0,s._)([(0,f.Cb)({type:Boolean})],b.prototype,"trustSourceNormals",void 0);var x=b=n=(0,s._)([(0,v.j)("esri.geometry.support.MeshComponent")],b)},8623:function(e,t,r){r.d(t,{Z:function(){return v}});var n=r(43144),i=r(15671),o=r(60136),a=r(29388),u=r(27366),s=r(11582),l=r(46784),c=r(49861),p=(r(93169),r(32718),r(84936),r(27135)),f=r(69912),d=function(e){(0,o.Z)(r,e);var t=(0,a.Z)(r);function r(e){var n;return(0,i.Z)(this,r),(n=t.call(this,e)).type="georeferenced",n.origin=null,n}return(0,n.Z)(r)}((0,s.J)(l.wq));(0,u._)([(0,p.J)({georeferenced:"georeferenced"},{readOnly:!0})],d.prototype,"type",void 0),(0,u._)([(0,c.Cb)({type:[Number],nonNullable:!1,json:{write:!0}})],d.prototype,"origin",void 0);var v=d=(0,u._)([(0,f.j)("esri.geometry.support.MeshGeoreferencedVertexSpace")],d)},50250:function(e,t,r){r.d(t,{Z:function(){return y}});var n=r(43144),i=r(15671),o=r(60136),a=r(29388),u=r(27366),s=r(11582),l=r(46784),c=r(49861),p=(r(93169),r(32718),r(84936),r(27135)),f=r(69912),d=r(12400),v=function(e){(0,o.Z)(r,e);var t=(0,a.Z)(r);function r(e){var n;return(0,i.Z)(this,r),(n=t.call(this,e)).type="local",n.origin=(0,d.Ue)(),n}return(0,n.Z)(r)}((0,s.J)(l.wq));(0,u._)([(0,p.J)({local:"local"},{readOnly:!0})],v.prototype,"type",void 0),(0,u._)([(0,c.Cb)({type:[Number],nonNullable:!0,json:{write:!0}})],v.prototype,"origin",void 0);var y=v=(0,u._)([(0,f.j)("esri.geometry.support.MeshLocalVertexSpace")],v)},10891:function(e,t,r){r.d(t,{Z:function(){return h}});var n,i=r(15671),o=r(43144),a=r(60136),u=r(29388),s=r(27366),l=r(51995),c=r(46784),p=r(49861),f=(r(93169),r(32718),r(84936),r(69912)),d=r(79694),v=r(50565),y=n=function(e){(0,a.Z)(r,e);var t=(0,u.Z)(r);function r(e){var n;return(0,i.Z)(this,r),(n=t.call(this,e)).color=null,n.colorTexture=null,n.colorTextureTransform=null,n.normalTexture=void 0,n.normalTextureTransform=void 0,n.alphaMode="auto",n.alphaCutoff=.5,n.doubleSided=!0,n}return(0,o.Z)(r,[{key:"clone",value:function(){return this.cloneWithDeduplication(null,new Map)}},{key:"cloneWithDeduplication",value:function(e,t){var r=null!=e?e.get(this):null;if(r)return r;var i=new n(this.clonePropertiesWithDeduplication(t));return null!=e&&e.set(this,i),i}},{key:"clonePropertiesWithDeduplication",value:function(e){var t,r,n,i;return{color:null!=this.color?this.color.clone():null,colorTexture:null===(t=this.colorTexture)||void 0===t?void 0:t.cloneWithDeduplication(e),normalTexture:null===(r=this.normalTexture)||void 0===r?void 0:r.cloneWithDeduplication(e),alphaMode:this.alphaMode,alphaCutoff:this.alphaCutoff,doubleSided:this.doubleSided,colorTextureTransform:null===(n=this.colorTextureTransform)||void 0===n?void 0:n.clone(),normalTextureTransform:null===(i=this.normalTextureTransform)||void 0===i?void 0:i.clone()}}},{key:"memoryUsage",get:function(){return this.getMemoryUsage()}},{key:"getMemoryUsage",value:function(){var e=0;return e+=null!=this.color?16:0,null!=this.colorTexture&&(e+=this.colorTexture.memoryUsage),e+=null!=this.colorTextureTransform?20:0,null!=this.normalTexture&&(e+=this.normalTexture.memoryUsage),e+=null!=this.normalTextureTransform?20:0}}]),r}(c.wq);(0,s._)([(0,p.Cb)({type:l.Z,json:{write:!0}})],y.prototype,"color",void 0),(0,s._)([(0,p.Cb)({type:d.Z,json:{write:!0}})],y.prototype,"colorTexture",void 0),(0,s._)([(0,p.Cb)({type:v.Z,json:{write:!0}})],y.prototype,"colorTextureTransform",void 0),(0,s._)([(0,p.Cb)({type:d.Z,json:{write:!0}})],y.prototype,"normalTexture",void 0),(0,s._)([(0,p.Cb)({type:v.Z,json:{write:!0}})],y.prototype,"normalTextureTransform",void 0),(0,s._)([(0,p.Cb)({nonNullable:!0,json:{write:!0}})],y.prototype,"alphaMode",void 0),(0,s._)([(0,p.Cb)({nonNullable:!0,json:{write:!0}})],y.prototype,"alphaCutoff",void 0),(0,s._)([(0,p.Cb)({nonNullable:!0,json:{write:!0}})],y.prototype,"doubleSided",void 0);var h=y=n=(0,s._)([(0,f.j)("esri.geometry.support.MeshMaterial")],y)},11587:function(e,t,r){r.d(t,{Z:function(){return b}});var n,i=r(1413),o=r(15671),a=r(43144),u=r(88301),s=r(61120),l=r(60136),c=r(29388),p=r(27366),f=r(51995),d=r(49861),v=(r(93169),r(32718),r(84936),r(69912)),y=r(10891),h=r(79694),m=r(50565),g=n=function(e){(0,l.Z)(r,e);var t=(0,c.Z)(r);function r(e){var n;return(0,o.Z)(this,r),(n=t.call(this,e)).emissiveColor=null,n.emissiveTexture=null,n.emissiveTextureTransform=void 0,n.occlusionTexture=null,n.occlusionTextureTransform=void 0,n.metallic=1,n.roughness=1,n.metallicRoughnessTexture=null,n.metallicRoughnessTextureTransform=void 0,n}return(0,a.Z)(r,[{key:"clone",value:function(){return this.cloneWithDeduplication(null,new Map)}},{key:"cloneWithDeduplication",value:function(e,t){var r=null!=e?e.get(this):null;if(r)return r;var i=new n(this.clonePropertiesWithDeduplication(t));return null!=e&&e.set(this,i),i}},{key:"getMemoryUsage",value:function(){var e=(0,u.Z)((0,s.Z)(r.prototype),"getMemoryUsage",this).call(this);return e+=null!=this.emissiveColor?16:0,null!=this.emissiveTexture&&(e+=this.emissiveTexture.memoryUsage),e+=null!=this.emissiveTextureTransform?20:0,null!=this.occlusionTexture&&(e+=this.occlusionTexture.memoryUsage),e+=null!=this.occlusionTextureTransform?20:0,null!=this.metallicRoughnessTexture&&(e+=this.metallicRoughnessTexture.memoryUsage),e+=null!=this.metallicRoughnessTextureTransform?20:0}},{key:"clonePropertiesWithDeduplication",value:function(e){var t,n,o,a,l,c,p;return(0,i.Z)((0,i.Z)({},(0,u.Z)((0,s.Z)(r.prototype),"clonePropertiesWithDeduplication",this).call(this,e)),{},{emissiveColor:null===(t=this.emissiveColor)||void 0===t?void 0:t.clone(),emissiveTexture:null===(n=this.emissiveTexture)||void 0===n?void 0:n.cloneWithDeduplication(e),emissiveTextureTransform:null===(o=this.emissiveTextureTransform)||void 0===o?void 0:o.clone(),occlusionTexture:null===(a=this.occlusionTexture)||void 0===a?void 0:a.cloneWithDeduplication(e),occlusionTextureTransform:null===(l=this.occlusionTextureTransform)||void 0===l?void 0:l.clone(),metallic:this.metallic,roughness:this.roughness,metallicRoughnessTexture:null===(c=this.metallicRoughnessTexture)||void 0===c?void 0:c.cloneWithDeduplication(e),metallicRoughnessTextureTransform:null===(p=this.metallicRoughnessTextureTransform)||void 0===p?void 0:p.clone()})}}]),r}(y.Z);(0,p._)([(0,d.Cb)({type:f.Z,json:{write:!0}})],g.prototype,"emissiveColor",void 0),(0,p._)([(0,d.Cb)({type:h.Z,json:{write:!0}})],g.prototype,"emissiveTexture",void 0),(0,p._)([(0,d.Cb)({type:m.Z,json:{write:!0}})],g.prototype,"emissiveTextureTransform",void 0),(0,p._)([(0,d.Cb)({type:h.Z,json:{write:!0}})],g.prototype,"occlusionTexture",void 0),(0,p._)([(0,d.Cb)({type:m.Z,json:{write:!0}})],g.prototype,"occlusionTextureTransform",void 0),(0,p._)([(0,d.Cb)({type:Number,nonNullable:!0,json:{write:!0},range:{min:0,max:1}})],g.prototype,"metallic",void 0),(0,p._)([(0,d.Cb)({type:Number,nonNullable:!0,json:{write:!0},range:{min:0,max:1}})],g.prototype,"roughness",void 0),(0,p._)([(0,d.Cb)({type:h.Z,json:{write:!0}})],g.prototype,"metallicRoughnessTexture",void 0),(0,p._)([(0,d.Cb)({type:m.Z,json:{write:!0}})],g.prototype,"metallicRoughnessTextureTransform",void 0);var b=g=n=(0,p._)([(0,v.j)("esri.geometry.support.MeshMaterialMetallicRoughness")],g)},79694:function(e,t,r){r.d(t,{Z:function(){return I}});var n,i=r(15671),o=r(43144),a=r(60136),u=r(29388),s=r(27366),l=(r(93169),r(51e3)),c=r(46784),p=r(49861),f=r(25243),d=(r(84936),r(38511)),v=r(69912),y=r(31201),h=r(53283),m=new WeakMap,g=0,b=n=function(e){(0,a.Z)(r,e);var t=(0,u.Z)(r);function r(e){var n;return(0,i.Z)(this,r),(n=t.call(this,e)).wrap="repeat",n}return(0,o.Z)(r,[{key:"url",get:function(){return this._get("url")||null},set:function(e){this._set("url",e),e&&this._set("data",null)}},{key:"data",get:function(){return this._get("data")||null},set:function(e){this._set("data",e),e&&this._set("url",null)}},{key:"writeData",value:function(e,t,r,n){if(e instanceof HTMLImageElement){var i={type:"image-element",src:(0,h.t)(e.src,n),crossOrigin:e.crossOrigin};t[r]=i}else if(e instanceof HTMLCanvasElement){var o={type:"canvas-element",imageData:x(e.getContext("2d").getImageData(0,0,e.width,e.height))};t[r]=o}else if(e instanceof HTMLVideoElement){var a={type:"video-element",src:(0,h.t)(e.src,n),autoplay:e.autoplay,loop:e.loop,muted:e.muted,crossOrigin:e.crossOrigin,preload:e.preload};t[r]=a}else if(e instanceof ImageData){var u={type:"image-data",imageData:x(e)};t[r]=u}}},{key:"readData",value:function(e){switch(e.type){case"image-element":var t=new Image;return t.src=e.src,t.crossOrigin=e.crossOrigin,t;case"canvas-element":var r=Z(e.imageData),n=document.createElement("canvas");return n.width=r.width,n.height=r.height,n.getContext("2d").putImageData(r,0,0),n;case"image-data":return Z(e.imageData);case"video-element":var i=document.createElement("video");return i.src=e.src,i.crossOrigin=e.crossOrigin,i.autoplay=e.autoplay,i.loop=e.loop,i.muted=e.muted,i.preload=e.preload,i;default:return}}},{key:"transparent",get:function(){var e=this.data,t=this.url;if(e instanceof HTMLCanvasElement)return w(e.getContext("2d").getImageData(0,0,e.width,e.height));if(e instanceof ImageData)return w(e);if(t){var r=t.substr(t.length-4,4).toLowerCase(),n=t.substr(0,15).toLocaleLowerCase();if(".png"===r||"data:image/png;"===n)return!0}return!1},set:function(e){this._overrideIfSome("transparent",e)}},{key:"contentHash",get:function(){var e=this,t="string"==typeof this.wrap?this.wrap:"object"==typeof this.wrap?"".concat(this.wrap.horizontal,"/").concat(this.wrap.vertical):"",r=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"d:".concat(r,",t:").concat(e.transparent,",w:").concat(t)};return null!=this.url?r(this.url):null!=this.data?this.data instanceof HTMLImageElement||this.data instanceof HTMLVideoElement?r(this.data.src):(m.has(this.data)||m.set(this.data,++g),r(m.get(this.data))):r()}},{key:"memoryUsage",get:function(){var e=0;if(e+=null!=this.url?this.url.length:0,null!=this.data){var t=this.data;"data"in t?e+=t.data.byteLength:t instanceof HTMLImageElement?e+=t.naturalWidth*t.naturalHeight*3:t instanceof HTMLCanvasElement&&(e+=t.width*t.height*3)}return e}},{key:"clone",value:function(){var e={url:this.url,data:this.data,wrap:this._cloneWrap()};return new n(e)}},{key:"cloneWithDeduplication",value:function(e){var t=e.get(this);if(t)return t;var r=this.clone();return e.set(this,r),r}},{key:"_cloneWrap",value:function(){return"string"==typeof this.wrap?this.wrap:{horizontal:this.wrap.horizontal,vertical:this.wrap.vertical}}}],[{key:"from",value:function(e){return"string"==typeof e?new n({url:e}):e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof ImageData||e instanceof HTMLVideoElement?new n({data:e}):(0,f.TJ)(n,e)}}]),r}(c.wq);function x(e){for(var t="",r=0;r<e.data.length;r++)t+=String.fromCharCode(e.data[r]);return{data:btoa(t),width:e.width,height:e.height}}function Z(e){for(var t=atob(e.data),r=new Uint8ClampedArray(t.length),n=0;n<t.length;n++)r[n]=t.charCodeAt(n);return(0,l.Jl)(r,e.width,e.height)}function w(e){for(var t=3;t<e.data.length;t+=4)if(255!==e.data[t])return!0;return!1}(0,s._)([(0,p.Cb)({type:String,json:{write:h.w}})],b.prototype,"url",null),(0,s._)([(0,p.Cb)({json:{write:{overridePolicy:function(){return{enabled:!this.url}}}}}),(0,p.Cb)()],b.prototype,"data",null),(0,s._)([(0,y.c)("data")],b.prototype,"writeData",null),(0,s._)([(0,d.r)("data")],b.prototype,"readData",null),(0,s._)([(0,p.Cb)({type:Boolean,json:{write:{overridePolicy:function(){return{enabled:this._isOverridden("transparent")}}}}})],b.prototype,"transparent",null),(0,s._)([(0,p.Cb)({json:{write:!0}})],b.prototype,"wrap",void 0),(0,s._)([(0,p.Cb)({readOnly:!0})],b.prototype,"contentHash",null);var I=b=n=(0,s._)([(0,v.j)("esri.geometry.support.MeshTexture")],b)},50565:function(e,t,r){r.d(t,{Z:function(){return d}});var n=r(43144),i=r(15671),o=r(60136),a=r(29388),u=r(27366),s=r(11582),l=r(46784),c=r(49861),p=(r(93169),r(32718),r(84936),r(69912)),f=function(e){(0,o.Z)(r,e);var t=(0,a.Z)(r);function r(e){var n;return(0,i.Z)(this,r),(n=t.call(this,e)).offset=[0,0],n.rotation=0,n.scale=[1,1],n}return(0,n.Z)(r)}((0,s.J)(l.wq));(0,u._)([(0,c.Cb)({type:[Number],nonNullable:!0,json:{write:!0}})],f.prototype,"offset",void 0),(0,u._)([(0,c.Cb)({type:Number,nonNullable:!0,json:{write:!0}})],f.prototype,"rotation",void 0),(0,u._)([(0,c.Cb)({type:[Number],nonNullable:!0,json:{write:!0}})],f.prototype,"scale",void 0);var d=f=(0,u._)([(0,p.j)("esri.geometry.support.MeshTextureTransform")],f)},45238:function(e,t,r){r.d(t,{EU:function(){return m},Ue:function(){return c},WH:function(){return g},ZZ:function(){return h},q_:function(){return d},qw:function(){return y},uT:function(){return p},up:function(){return x},zk:function(){return f}});var n=r(16889),i=r(29134),o=r(68700),a=r(50894),u=r(32035),s=r(12400),l=r(86361);function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x;return[e[0],e[1],e[2],e[3]]}function p(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c();return(0,u.c)(r,e),r[3]=t,r}function f(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,l.Ue)();return(0,u.b)(r,e,t),(0,u.n)(r,r),r[3]=-(0,u.d)(e,t),r}function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c(),r=(0,i.j6)(Z,e);return b(t,(0,n.BV)((0,o.Bh)(t,r))),t}function v(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c();return(0,o.yY)(Z,e,g(e)),(0,o.yY)(w,t,g(t)),(0,o.Jp)(Z,w,Z),b(r,(0,n.BV)((0,o.Bh)(r,Z)))}function y(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:c();return p(s.E9,e,I),p(s.IO,t,T),p(s.eG,r,_),v(I,T,I),v(I,_,n),n}function h(e){return e}function m(e){return e[3]}function g(e){return(0,n.Vl)(e[3])}function b(e,t){return e[3]=t,e}var x=[0,0,1,0],Z=(0,a.Ue)(),w=(0,a.Ue)(),I=(c(),c()),T=c(),_=c()},35888:function(e,t,r){r.d(t,{d:function(){return o}});var n=r(16889),i=r(39406);function o(e,t,r){var o,c=Array.isArray(e),p=c?e.length/t:e.byteLength/(4*t),f=c?e:new Uint32Array(e,0,p*t),d=null!==(o=null===r||void 0===r?void 0:r.minReduction)&&void 0!==o?o:0,v=(null===r||void 0===r?void 0:r.originalIndices)||null,y=v?v.length:0,h=(null===r||void 0===r?void 0:r.componentOffsets)||null,m=0;if(h)for(var g=0;g<h.length-1;g++){var b=h[g+1]-h[g];b>m&&(m=b)}else m=p;var x=Math.floor(1.1*m)+1;(null==l||l.length<2*x)&&(l=new Uint32Array((0,n.Sf)(2*x)));for(var Z=0;Z<2*x;Z++)l[Z]=0;for(var w=0,I=!!h&&!!v,T=I?y:p,_=(0,i.$z)(p),C=new Uint32Array(y),S=1.96,A=0!==d?Math.ceil(4*S*S/(d*d)*d*(1-d)):T,k=1,L=h?h[1]:T,E=0;E<T;E++){if(E===A){var F=1-w/E;if(F+S*Math.sqrt(F*(1-F)/E)<d)return null;A*=2}if(E===L){for(var O=0;O<2*x;O++)l[O]=0;if(v)for(var R=h[k-1];R<h[k];R++)C[R]=_[v[R]];L=h[++k]}for(var j=I?v[E]:E,D=j*t,U=s(f,D,t),M=U%x,P=w;0!==l[2*M+1];){if(l[2*M]===U){var N=l[2*M+1]-1;if(a(f,D,N*t,t)){P=_[N];break}}++M>=x&&(M-=x)}P===w&&(l[2*M]=U,l[2*M+1]=j+1,w++),_[j]=P}if(0!==d&&1-w/p<d)return null;if(I){for(var q=h[k-1];q<C.length;q++)C[q]=_[v[q]];_=(0,i.mi)(C)}var B=c?new Array(w):new Uint32Array(w*t);w=0;for(var z=0;z<T;z++)_[z]===w&&(u(f,(I?v[z]:z)*t,B,w*t,t),w++);if(v&&!I){for(var G=new Uint32Array(y),H=0;H<G.length;H++)G[H]=_[v[H]];_=(0,i.mi)(G)}return{buffer:Array.isArray(B)?B:B.buffer,indices:_,uniqueCount:w}}function a(e,t,r,n){for(var i=0;i<n;i++)if(e[t+i]!==e[r+i])return!1;return!0}function u(e,t,r,n,i){for(var o=0;o<i;o++)r[n+o]=e[t+o]}function s(e,t,r){for(var n=0,i=0;i<r;i++)n=(n=e[t+i]+n|0)+(n<<11)+(n>>>2)|0;return n>>>0}var l=null},69048:function(e,t,r){r.d(t,{G7:function(){return y},QK:function(){return d},rU:function(){return v},vI:function(){return h},z1:function(){return p},zZ:function(){return f}});var n=r(29439),i=r(44927),o=r(32718),a=r(32035),u=r(848),s=r(8623),l=r(50250);function c(){return o.Z.getLogger("esri.geometry.Mesh")}function p(e){return!f(e)}function f(e){return null!=e.origin}function d(e){return f(e.vertexSpace)}function v(e,t){if(!f(e))return null;var r=(0,n.Z)(e.origin,3),i=r[0],o=r[1],a=r[2];return new u.Z({x:i,y:o,z:a,spatialReference:t})}function y(e,t){var r,n,o,a=e.x,u=e.y,p=e.z,f=e.spatialReference,d=[a,u,null!==p&&void 0!==p?p:0];return void 0!==(null===t||void 0===t?void 0:t.geographic)&&((0,i.x9)(c(),"option: geographic",{replacement:"Use the `vertexSpace` option instead.",version:"4.29",warnOnce:!0}),t.vertexSpace&&c().warn("Deprecated geographic flag ignored since vertexSpace option is provided.")),"local"===(null!==(r=null!==(n=null===t||void 0===t?void 0:t.vertexSpace)&&void 0!==n?n:null==(o=null===t||void 0===t?void 0:t.geographic)?void 0:o?"local":"georeferenced")&&void 0!==r?r:function(e){return e.isGeographic||e.isWebMercator?"local":"georeferenced"}(f))?new l.Z({origin:d}):new s.Z({origin:d})}function h(e,t){return e.type===t.type&&(e.origin===t.origin||null!=e.origin&&null!=t.origin&&(0,a.e)(e.origin,t.origin))}},26844:function(e,t,r){r.d(t,{i:function(){return s}});var n=r(16889),i=r(68860),o=r(32035),a=r(14320),u=r(55652);function s(e,t,r){var s=function(e,t,r,n){var a=function(e){return!Array.isArray(e[0])}(t)?function(e,r){return t[3*e+r]}:function(e,r){return t[e][r]},s=n?(0,i.c9)(n)/(0,i._R)(n):1;return(0,u.zu)(e,(function(e,t){return(0,o.s)(e,a(t,0)*s,a(t,1)*s,a(t,2))}),r)}(l,e,t,r)?(0,u.st)(l):[0,0,1];return Math.abs(s[2])>Math.cos((0,n.Vl)(80))?a.R.Z:Math.abs(s[1])>Math.abs(s[0])?a.R.Y:a.R.X}var l=(0,u.Ue)()},91320:function(e,t,r){r.d(t,{Ni:function(){return v},ZI:function(){return n},bT:function(){return d}});var n,i,o=r(37762),a=r(79347),u=r(14320),s=r(69662),l=r(86372),c=r(39406),p=r(26844),f=r(35888);function d(e){var t,r=v(e.rings,e.hasZ,n.CCW_IS_HOLE,e.spatialReference),i=new Array,u=0,s=0,p=(0,o.Z)(r.polygons);try{var d=function(){var e=t.value,n=e.count,o=e.index,p=(0,l.Rq)(r.position,3*o,3*n),f=e.holeIndices.map((function(e){return e-o})),d=(0,c.mi)((0,a.e)(p,f,3));i.push({position:p,faces:d}),u+=p.length,s+=d.length};for(p.s();!(t=p.n()).done;)d()}catch(m){p.e(m)}finally{p.f()}var y=function(e,t,r){if(1===e.length)return e[0];var n,i=(0,l.bg)(t),a=new Array(r),u=0,s=0,p=0,f=(0,o.Z)(e);try{for(f.s();!(n=f.n()).done;){for(var d=n.value,v=0;v<d.position.length;v++)i[u++]=d.position[v];var y,h=(0,o.Z)(d.faces);try{for(h.s();!(y=h.n()).done;){var g=y.value;a[s++]=g+p}}catch(m){h.e(m)}finally{h.f()}p=u/3}}catch(m){f.e(m)}finally{f.f()}return{position:i,faces:(0,c.mi)(a)}}(i,u,s),h=Array.isArray(y.position)?(0,f.d)(y.position,3,{originalIndices:y.faces}):(0,f.d)(y.position.buffer,6,{originalIndices:y.faces});return y.position=(0,l.QZ)(new Float64Array(h.buffer)),y.faces=h.indices,y}function v(e,t,r,i){for(var o=e.length,a=new Array(o),u=new Array(o),s=new Array(o),c=0,p=0;p<o;++p)c+=e[p].length;for(var f=0,d=0,v=0,m=(0,l.bg)(3*c),g=0,b=o-1;b>=0;b--){var x=e[b],Z=r===n.CCW_IS_HOLE&&h(x,t,i);if(Z&&1!==o)a[f++]=x;else{for(var w=x.length,I=0;I<f;++I)w+=a[I].length;var T={index:g,pathLengths:new Array(f+1),count:w,holeIndices:new Array(f)};T.pathLengths[0]=x.length,x.length>0&&(s[v++]={index:g,count:x.length}),g=Z?y(x,x.length-1,-1,m,g,x.length,t):y(x,0,1,m,g,x.length,t);for(var _=0;_<f;++_){var C=a[_];T.holeIndices[_]=g,T.pathLengths[_+1]=C.length,C.length>0&&(s[v++]={index:g,count:C.length}),g=y(C,0,1,m,g,C.length,t)}f=0,T.count>0&&(u[d++]=T)}}for(var S=0;S<f;++S){var A=a[S];A.length>0&&(s[v++]={index:g,count:A.length}),g=y(A,0,1,m,g,A.length,t)}return u.length=d,s.length=v,{position:m,polygons:u,outlines:s}}function y(e,t,r,n,i,o,a){i*=3;for(var u=0;u<o;++u){var s=e[t];n[i++]=s[0],n[i++]=s[1],n[i++]=a?s[2]:0,t+=r}return i/3}function h(e,t,r){if(!t)return!(0,s.bu)(e);var n=e.length-1;switch((0,p.i)(e,n,r)){case u.R.X:return!(0,s.bu)(e,u.R.Y,u.R.Z);case u.R.Y:return!(0,s.bu)(e,u.R.X,u.R.Z);case u.R.Z:return!(0,s.bu)(e,u.R.X,u.R.Y)}}(i=n||(n={}))[i.NONE=0]="NONE",i[i.CCW_IS_HOLE=1]="CCW_IS_HOLE"},25178:function(e,t,r){r.r(t),r.d(t,{default:function(){return He}});var n=r(29439),i=r(37762),o=r(74165),a=r(15861),u=r(1413),s=r(15671),l=r(43144),c=r(88301),p=r(61120),f=r(60136),d=r(29388),v=r(27366),y=r(52639),h=r(44055),m=(r(94931),r(15126),r(98689),r(57823),r(32066),r(49018),r(34999),r(28189),r(9014),r(40464)),g=r(11582),b=r(80987),x=r(10064),Z=r(32718),w=r(97642),I=r(66978),T=r(94172),_=r(49861),C=(r(93169),r(84936),r(23879)),S=r(38511),A=r(69912),k=r(25265),L=r(63899),E=r(848),F=r(30651),O=r(25889),R=r(27961),j=r(11936),D=r(46671),U=r(56601),M=r(6061),P=r(29598),N=r(56811),q=r(81118),B=r(99063),z=r(62044),G=r(12355),H=r(46784),V=r(37270);function W(e){var t,r=e.associatedLayer,n=e.serviceUpdateTimeStamp,i=null===r||void 0===r||null===(t=r.editingInfo)||void 0===t?void 0:t.lastEditDate,o=null===r||void 0===r?void 0:r.serverGens,a=null!=i,u=null!=n,s=a&&u&&n.lastUpdate!==i.getTime();return a&&(s||!u&&(null===o||void 0===o?void 0:o.minServerGen)!==(null===o||void 0===o?void 0:o.serverGen))}var J=r(57370),Q=function(e){(0,f.Z)(r,e);var t=(0,d.Z)(r);function r(){var e;return(0,s.Z)(this,r),(e=t.apply(this,arguments)).endTimeField=null,e.startTimeField=null,e}return(0,l.Z)(r)}(H.wq);(0,v._)([(0,_.Cb)({type:String})],Q.prototype,"endTimeField",void 0),(0,v._)([(0,_.Cb)({type:String})],Q.prototype,"startTimeField",void 0),Q=(0,v._)([(0,A.j)("esri.layers.mixins.TemporalSceneLayer.SceneServiceTimeInfo")],Q);var K=r(25899),X=r(84076),Y=r(96978),$=r(70361),ee=r(62594),te=r(87562),re=r(10536),ne=r(25610),ie=r(52410),oe=r(34207),ae=r(18277),ue=r(77748),se=r(85116),le=r(71065),ce=r(19610),pe=function(e){(0,f.Z)(r,e);var t=(0,d.Z)(r);function r(){var e;return(0,s.Z)(this,r),(e=t.apply(this,arguments)).name=null,e.field=null,e.currentRangeExtent=null,e.fullRangeExtent=null,e.type="rangeInfo",e}return(0,l.Z)(r)}(H.wq);(0,v._)([(0,_.Cb)({type:String,json:{read:!0,write:!0}})],pe.prototype,"name",void 0),(0,v._)([(0,_.Cb)({type:String,json:{read:!0,write:!0}})],pe.prototype,"field",void 0),(0,v._)([(0,_.Cb)({type:[Number],json:{read:!0,write:!0}})],pe.prototype,"currentRangeExtent",void 0),(0,v._)([(0,_.Cb)({type:[Number],json:{read:!0,write:!0}})],pe.prototype,"fullRangeExtent",void 0),(0,v._)([(0,_.Cb)({type:["rangeInfo"],readOnly:!0,json:{read:!1,write:!0}})],pe.prototype,"type",void 0),pe=(0,v._)([(0,A.j)("esri.layers.support.RangeInfo")],pe);var fe,de,ve=r(76200),ye=r(84652),he=r(96866),me=r(51370),ge=r(80885),be=r(79803),xe=fe=function(e){(0,f.Z)(r,e);var t=(0,d.Z)(r);function r(e){return(0,s.Z)(this,r),t.call(this,e)}return(0,l.Z)(r,[{key:"clone",value:function(){return new fe(this.items.map((function(e){return e.clone()})))}},{key:"write",value:function(e,t){return this.toJSON(t)}},{key:"toJSON",value:function(e){var t,r=this,n=null===e||void 0===e||null===(t=e.layer)||void 0===t?void 0:t.spatialReference;return n?this.toArray().map((function(t){if(!n.equals(t.spatialReference)){if(!(0,be.canProjectWithoutEngine)(t.spatialReference,n))return null!==e&&void 0!==e&&e.messages&&e.messages.push(new me.Z("scenefilter:unsupported","Scene filters with incompatible spatial references are not supported",{modification:r,spatialReference:e.layer.spatialReference,context:e})),null;var i=new ge.Z;(0,be.projectPolygon)(t,i,n),t=i}var o=t.toJSON(e);return delete o.spatialReference,o})).filter((function(e){return null!=e})):(null!==e&&void 0!==e&&e.messages&&e.messages.push(new me.Z("scenefilter:unsupported","Writing Scene filters without context layer is not supported",{modification:this,spatialReference:e.layer.spatialReference,context:e})),this.toArray().map((function(t){return t.toJSON(e)})))}}],[{key:"fromJSON",value:function(e,t){var r=new fe;return e.forEach((function(e){return r.add(ge.Z.fromJSON(e,t))})),r}}]),r}((0,H.eC)(b.Z.ofType(ge.Z))),Ze=xe=fe=(0,v._)([(0,A.j)("esri.layers.support.PolygonCollection")],xe),we=r(53283),Ie=de=function(e){(0,f.Z)(r,e);var t=(0,d.Z)(r);function r(e){var n;return(0,s.Z)(this,r),(n=t.call(this,e)).spatialRelationship="disjoint",n.geometries=new Ze,n._geometriesSource=null,n}return(0,l.Z)(r,[{key:"initialize",value:function(){var e=this;this.addHandles((0,T.on)((function(){return e.geometries}),"after-changes",(function(){return e.geometries=e.geometries}),T.sync))}},{key:"readGeometries",value:function(e,t,r){Array.isArray(e)?this.geometries=Ze.fromJSON(e,r):this._geometriesSource={url:(0,we.f)(e,r),context:r}}},{key:"loadGeometries",value:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t,r){var n,i,a,s,l,c;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this._geometriesSource){e.next=2;break}return e.abrupt("return");case 2:return n=this._geometriesSource,i=n.url,a=n.context,e.next=7,(0,ve.Z)(i,{responseType:"json",signal:null===r||void 0===r?void 0:r.signal});case 7:s=e.sent,l=t.toJSON(),c=s.data.map((function(e){return(0,u.Z)((0,u.Z)({},e),{},{spatialReference:l})})),this.geometries=Ze.fromJSON(c,a),this._geometriesSource=null;case 11:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"clone",value:function(){var e=new de({geometries:(0,ye.d9)(this.geometries),spatialRelationship:this.spatialRelationship});return e._geometriesSource=this._geometriesSource,e}}]),r}(H.wq);(0,v._)([(0,_.Cb)({type:["disjoint","contains"],nonNullable:!0,json:{write:!0}})],Ie.prototype,"spatialRelationship",void 0),(0,v._)([(0,_.Cb)({type:Ze,nonNullable:!0,json:{write:!0}}),(0,he.B)({origins:["web-scene","portal-item"],type:"resource",prefix:"geometries",contentAddressed:!0})],Ie.prototype,"geometries",void 0),(0,v._)([(0,S.r)(["web-scene","portal-item"],"geometries")],Ie.prototype,"readGeometries",null);var Te=Ie=de=(0,v._)([(0,A.j)("esri.layers.support.SceneFilter")],Ie),_e=r(35995);function Ce(e){return Se.apply(this,arguments)}function Se(){return Se=(0,a.Z)((0,o.Z)().mark((function e(t){var r,n,i,a,s,l,c,p,f,d,v,y,h;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.fieldName,n=t.statisticsInfo,i=t.errorContext,a=t.fieldsIndex,s=t.path,l=t.customParameters,c=t.apiKey,p=t.signal,null!=n){e.next=3;break}throw new x.Z("".concat(i,":no-cached-statistics"),"Cached statistics are not available for this layer");case 3:if(null!=(f=a.get(r))){e.next=6;break}throw new x.Z("".concat(i,":field-unexisting"),"Field '".concat(r,"' does not exist on the layer"));case 6:if(d=n.find((function(e){return e.name===f.name})),null!=d){e.next=9;break}throw new x.Z("".concat(i,":no-cached-statistics"),"Cached statistics for this attribute are not available");case 9:return v=(0,_e.v_)(s,d.href),e.next=12,(0,ve.Z)(v,{query:(0,u.Z)((0,u.Z)({f:"json"},l),{},{token:c}),responseType:"json",signal:p});case 12:return y=e.sent,h=y.data,e.abrupt("return",h);case 15:case"end":return e.stop()}}),e)}))),Se.apply(this,arguments)}var Ae=r(21371),ke=r(21149),Le=r(74509),Ee=r(28554),Fe=r(81085);function Oe(e){return Re.apply(this,arguments)}function Re(){return(Re=(0,a.Z)((0,o.Z)().mark((function e(t){var r,n,a,u;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],n=(0,i.Z)(t);try{for(n.s();!(a=n.n()).done;)(u=a.value).name.toLowerCase().endsWith(".zip")?r.push(je(u)):r.push(Promise.resolve(u))}catch(o){n.e(o)}finally{n.f()}return e.next=5,Promise.all(r);case 5:return e.abrupt("return",e.sent.flat());case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function je(e){return De.apply(this,arguments)}function De(){return De=(0,a.Z)((0,o.Z)().mark((function e(t){var n,i,a,u,s,l;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(31789).then(r.bind(r,31789));case 2:return n=e.sent,i=n.BlobReader,a=n.ZipReader,u=n.BlobWriter,s=[],l=new a(new i(t)),e.next=10,l.getEntries();case 10:return e.sent.forEach((function(e){var t;if(!e.directory&&!/^__MACOS/i.test(e.filename)){var r=new u,n=null===(t=e.getData)||void 0===t?void 0:t.call(e,r).then((function(t){return new File([t],e.filename)}));n&&s.push(n)}})),e.abrupt("return",Promise.all(s));case 12:case"end":return e.stop()}}),e)}))),De.apply(this,arguments)}var Ue=r(44011),Me=r(24405),Pe=r(81219),Ne=new Set(["3DObject","Point"]),qe=(0,ne.v)(),Be=function(e){(0,f.Z)(v,e);var t=(0,d.Z)(v);function v(){var e;(0,s.Z)(this,v);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))).featureReduction=null,e.rangeInfos=null,e.operationalLayerType="ArcGISSceneServiceLayer",e.type="scene",e.fields=null,e.floorInfo=null,e.outFields=null,e.nodePages=null,e.materialDefinitions=null,e.textureSetDefinitions=null,e.geometryDefinitions=null,e.serviceUpdateTimeStamp=null,e.excludeObjectIds=new b.Z,e.definitionExpression=null,e.filter=null,e.path=null,e.labelsVisible=!0,e.labelingInfo=null,e.legendEnabled=!0,e.priority=null,e.semantic=null,e.cachedDrawingInfo={color:!1},e.popupEnabled=!0,e.popupTemplate=null,e.objectIdField=null,e.globalIdField=null,e._fieldUsageInfo={},e.screenSizePerspectiveEnabled=!0,e.serviceItemId=void 0,e}return(0,l.Z)(v,[{key:"normalizeCtorArgs",value:function(e,t){return"string"==typeof e?(0,u.Z)({url:e},t):e}},{key:"destroy",value:function(){this._set("renderer",null)}},{key:"getField",value:function(e){return this.fieldsIndex.get(e)}},{key:"getFieldDomain",value:function(e,t){var r,n,i,o,a=null===(r=this.getFeatureType(null===t||void 0===t?void 0:t.feature))||void 0===r||null===(n=r.domains)||void 0===n?void 0:n[e];return a&&"inherited"!==a.type?a:null!==(i=null===(o=this.getField(e))||void 0===o?void 0:o.domain)&&void 0!==i?i:null}},{key:"getFeatureType",value:function(e){return e&&this.associatedLayer?this.associatedLayer.getFeatureType(e):null}},{key:"types",get:function(){var e,t;return null!==(e=null===(t=this.associatedLayer)||void 0===t?void 0:t.types)&&void 0!==e?e:[]}},{key:"typeIdField",get:function(){var e,t;return null!==(e=null===(t=this.associatedLayer)||void 0===t?void 0:t.typeIdField)&&void 0!==e?e:null}},{key:"templates",get:function(){var e,t;return null!==(e=null===(t=this.associatedLayer)||void 0===t?void 0:t.templates)&&void 0!==e?e:null}},{key:"formTemplate",get:function(){var e,t;return null!==(e=null===(t=this.associatedLayer)||void 0===t?void 0:t.formTemplate)&&void 0!==e?e:null}},{key:"fieldsIndex",get:function(){return new ie.Z(this.fields)}},{key:"readNodePages",value:function(e,t,r){return"Point"===t.layerType&&(e=t.pointNodePages),null==e||"object"!=typeof e?null:oe.U4.fromJSON(e,r)}},{key:"elevationInfo",set:function(e){this._set("elevationInfo",e),this.loaded&&this._validateElevationInfo()}},{key:"effectiveCapabilities",get:function(){var e;return this._capabilitiesFromAssociatedFeatureLayer(null===(e=this.associatedLayer)||void 0===e?void 0:e.effectiveCapabilities)}},{key:"effectiveEditingEnabled",get:function(){return null!=this.associatedLayer&&(0,ee.sX)(this.associatedLayer)}},{key:"geometryType",get:function(){return Ge[this.profile]||"mesh"}},{key:"renderer",set:function(e){(0,V.YN)(e,this.fieldsIndex),this._set("renderer",e)}},{key:"readCachedDrawingInfo",value:function(e){return null!=e&&"object"==typeof e||(e={}),null==e.color&&(e.color=!1),e}},{key:"capabilities",get:function(){var e;return this._capabilitiesFromAssociatedFeatureLayer(null===(e=this.associatedLayer)||void 0===e?void 0:e.capabilities)}},{key:"_capabilitiesFromAssociatedFeatureLayer",value:function(e){var t,r=e=null!=e?e:Y.C,n=r.query,i=r.queryRelated,o=r.editing,a=o.supportsGlobalId,u=o.supportsRollbackOnFailure,s=o.supportsUploadWithItemId,l=o.supportsGeometryUpdate,c=o.supportsReturnServiceEditsInSourceSpatialReference,p=r.data,f=p.supportsZ,d=p.supportsM,v=p.isVersioned,y=p.supportsAttachment,h=r.operations,m=h.supportsEditing,g=h.supportsAdd,b=h.supportsUpdate,x=h.supportsDelete,Z=h.supportsQuery,w=h.supportsQueryAttachments,I=h.supportsAsyncConvert3D,T=e.operations.supportsChangeTracking,_=!(null===(t=this.associatedLayer)||void 0===t||!t.infoFor3D)&&(0,Ee.Rx)();return{query:n,queryRelated:i,editing:{supportsGlobalId:a,supportsReturnServiceEditsInSourceSpatialReference:c,supportsRollbackOnFailure:u,supportsGeometryUpdate:_&&l,supportsUploadWithItemId:s},data:{supportsAttachment:y,supportsZ:f,supportsM:d,isVersioned:v},operations:{supportsQuery:Z,supportsQueryAttachments:w,supportsEditing:m&&T,supportsAdd:_&&g&&T,supportsDelete:_&&x&&T,supportsUpdate:b&&T,supportsAsyncConvert3D:I}}}},{key:"editingEnabled",get:function(){var e,t;return this._isOverridden("editingEnabled")?this._get("editingEnabled"):null!==(e=null===(t=this.associatedLayer)||void 0===t?void 0:t.editingEnabled)&&void 0!==e&&e},set:function(e){this._overrideIfSome("editingEnabled",e)}},{key:"infoFor3D",get:function(){var e,t;return null!==(e=null===(t=this.associatedLayer)||void 0===t?void 0:t.infoFor3D)&&void 0!==e?e:null}},{key:"relationships",get:function(){var e;return null===(e=this.associatedLayer)||void 0===e?void 0:e.relationships}},{key:"defaultPopupTemplate",get:function(){return this.associatedLayer||this.attributeStorageInfo?this.createPopupTemplate():null}},{key:"readObjectIdField",value:function(e,t){return!e&&t.fields&&t.fields.some((function(t){return"esriFieldTypeOID"===t.type&&(e=t.name),!!e})),e||void 0}},{key:"readGlobalIdField",value:function(e,t){return!e&&t.fields&&t.fields.some((function(t){return"esriFieldTypeGlobalID"===t.type&&(e=t.name),!!e})),e||void 0}},{key:"displayField",get:function(){var e,t;return null!==(e=null===(t=this.associatedLayer)||void 0===t?void 0:t.displayField)&&void 0!==e?e:null}},{key:"readProfile",value:function(e,t){var r=t.store.profile;return null!=r&&ze[r]?ze[r]:(Z.Z.getLogger(this).error("Unknown or missing profile",{profile:r,layer:this}),"mesh-pyramids")}},{key:"useViewTime",get:function(){var e,t;return null===(e=null===(t=this.associatedLayer)||void 0===t?void 0:t.useViewTime)||void 0===e||e},set:function(e){this._override("useViewTime",e)}},{key:"load",value:function(e){return this.addResolvingPromise(this._load(e)),Promise.resolve(this)}},{key:"_load",value:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t){var r;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=null!=t?t.signal:null,e.next=3,this.loadFromPortal({supportedTypes:["Scene Service"]},t).catch(I.r9);case 3:return e.next=5,this._fetchService(r);case 5:return e.next=7,Promise.all([this._fetchIndexAndUpdateExtent(this.nodePages,r),this._setAssociatedFeatureLayer(r),this._loadFilterGeometries()]);case 7:return this._validateElevationInfo(),this._applyAssociatedLayerOverrides(),this._populateFieldUsageInfo(),e.next=12,this.loadTimeInfoFromService(t);case 12:return e.next=14,(0,Ae.y)(this,{origin:"service"},r);case 14:return(0,V.YN)(this.renderer,this.fieldsIndex),e.next=17,this.finishLoadEditablePortalLayer(t);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"beforeSave",value:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=null!=this.filter,!e.t0){e.next=5;break}return this.filter=this.filter.clone(),e.next=5,this.load();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_loadFilterGeometries",value:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.filter){e.next=9;break}return e.prev=1,e.next=4,this.filter.loadGeometries(this.spatialReference);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),Z.Z.getLogger(this).error("#_loadFilterGeometries()",this,"Failed to load filter geometries. Geometry filter will not be applied for this layer.",{error:e.t0}),this.filter=null;case 9:case"end":return e.stop()}}),e,this,[[1,6]])})));return function(){return e.apply(this,arguments)}}()},{key:"createQuery",value:function(){var e,t=new ke.Z;return"mesh"===this.geometryType?(null===(e=this.associatedLayer)||void 0===e?void 0:e.infoFor3D)&&(t.returnGeometry=!0):(t.returnGeometry=!0,t.returnZ=!0),t.where=this.definitionExpression||"1=1",t.sqlFormat="standard",t.outFields=["*"],t}},{key:"queryExtent",value:function(e,t){var r=this;return this._getAssociatedLayerForQuery().then((function(n){return n.queryExtent(e||r.createQuery(),t)}))}},{key:"queryFeatureCount",value:function(e,t){var r=this;return this._getAssociatedLayerForQuery().then((function(n){return n.queryFeatureCount(e||r.createQuery(),t)}))}},{key:"queryFeatures",value:function(e,t){var r=this;return this._getAssociatedLayerForQuery().then((function(n){return n.queryFeatures(e||r.createQuery(),t)})).then((function(e){if(null!==e&&void 0!==e&&e.features){var t,n=(0,i.Z)(e.features);try{for(n.s();!(t=n.n()).done;){var o=t.value;o.layer=r,o.sourceLayer=r}}catch(a){n.e(a)}finally{n.f()}}return e}))}},{key:"queryRelatedFeatures",value:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t,r){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:if(this.associatedLayer){e.next=4;break}throw new x.Z("scenelayer:query-not-available","SceneLayer queries are not available without an associated feature layer",{layer:this});case 4:return e.abrupt("return",this.associatedLayer.queryRelatedFeatures(t,r));case 5:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"queryRelatedFeaturesCount",value:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t,r){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:if(this.associatedLayer){e.next=4;break}throw new x.Z("scenelayer:query-not-available","SceneLayer queries are not available without an associated feature layer",{layer:this});case 4:return e.abrupt("return",this.associatedLayer.queryRelatedFeaturesCount(t,r));case 5:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"queryCachedAttributes",value:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t,r){var n,i,a,u;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=V.Lk,e.t1=this.fieldsIndex,e.next=4,(0,Me.e7)(this,(0,Me.V5)(this));case 4:return e.t2=e.sent,u=(0,e.t0)(e.t1,e.t2),e.abrupt("return",(0,Ue.xe)(null!==(n=null===(i=this.parsedUrl)||void 0===i?void 0:i.path)&&void 0!==n?n:"",null!==(a=this.attributeStorageInfo)&&void 0!==a?a:[],t,r,u,this.apiKey,this.customParameters));case 7:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"queryCachedFeature",value:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t,r){var n,i;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.queryCachedAttributes(t,[r]);case 2:if((n=e.sent)&&0!==n.length){e.next=5;break}throw new x.Z("scenelayer:feature-not-in-cached-data","Feature not found in cached data");case 5:return i=new y.Z,e.abrupt("return",(i.attributes=n[0],i.layer=this,i.sourceLayer=this,i));case 7:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"queryObjectIds",value:function(e,t){var r=this;return this._getAssociatedLayerForQuery().then((function(n){return n.queryObjectIds(e||r.createQuery(),t)}))}},{key:"queryAttachments",value:function(e,t){return this._getAssociatedLayerForQuery().then((function(r){return r.queryAttachments(e,t)}))}},{key:"getFieldUsageInfo",value:function(e){var t={supportsLabelingInfo:!1,supportsRenderer:!1,supportsPopupTemplate:!1,supportsLayerQuery:!1};return this.loaded?this._fieldUsageInfo[e]||t:(Z.Z.getLogger(this).error("#getFieldUsageInfo()","Unavailable until layer is loaded"),t)}},{key:"createPopupTemplate",value:function(e){return(0,Fe.eZ)(this,e)}},{key:"_getAssociatedLayerForQuery",value:function(){var e=this.associatedLayer;return null!==e&&void 0!==e&&e.loaded?Promise.resolve(e):this._loadAssociatedLayerForQuery()}},{key:"_loadAssociatedLayerForQuery",value:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:if(this.associatedLayer){e.next=4;break}throw new x.Z("scenelayer:query-not-available","SceneLayer queries are not available without an associated feature layer",{layer:this});case 4:return e.prev=4,e.next=7,this.associatedLayer.load();case 7:e.next=12;break;case 9:throw e.prev=9,e.t0=e.catch(4),new x.Z("scenelayer:query-not-available","SceneLayer associated feature layer could not be loaded",{layer:this,error:e.t0});case 12:return e.abrupt("return",this.associatedLayer);case 13:case"end":return e.stop()}}),e,this,[[4,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"hasCachedStatistics",value:function(e){return null!=this.statisticsInfo&&this.statisticsInfo.some((function(t){return t.name===e}))}},{key:"queryCachedStatistics",value:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t,r){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load(r);case 2:return e.next=4,this.fetchStatistics(t,r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"saveAs",value:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t,r){var n=this;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._debouncedSaveOperations(q.xp.SAVE_AS,(0,u.Z)((0,u.Z)({},r),{},{getTypeKeywords:function(){return n._getTypeKeywords()},portalItemLayerType:"scene"}),t));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"save",value:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(){var t,r=this;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={getTypeKeywords:function(){return r._getTypeKeywords()},portalItemLayerType:"scene"},e.abrupt("return",this._debouncedSaveOperations(q.xp.SAVE,t));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"applyEdits",value:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t,n){var i,a,s,l,c,p,f,d,v;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(29887).then(r.bind(r,29887));case 2:return s=e.sent,l=s.applyEdits,c=n,e.next=7,this.load();case 7:if(p=this.associatedLayer){e.next=10;break}throw new x.Z("".concat(this.type,"-layer:not-editable"),"Service is not editable");case 10:return e.next=12,p.load();case 12:if(f=p.globalIdField,d=!!p.infoFor3D,v=null===(i=null===(a=c)||void 0===a?void 0:a.globalIdUsed)||void 0===i||i,!d||null!=f){e.next=15;break}throw new x.Z("".concat(this.type,"-layer:not-editable"),"Valid globalIdField expected on editable SceneLayer");case 15:if(!d||v){e.next=17;break}throw new x.Z("".concat(this.type,"-layer:globalid-required"),"globalIdUsed must not be false for SceneLayer editing as globalIds are required.");case 17:if(e.t0=(0,K.M8)(p.url)&&d&&null!=t.deleteFeatures&&null!=f,!e.t0){e.next=27;break}return e.t1=u.Z,e.t2=(0,u.Z)({},c),e.t3={},e.next=24,(0,ee.HW)(p,t.deleteFeatures,f);case 24:e.t4=e.sent,e.t5={globalIdToObjectId:e.t4},c=(0,e.t1)(e.t2,e.t3,e.t5);case 27:return e.abrupt("return",l(this,p.source,t,c));case 28:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"uploadAssets",value:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t,r){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:if(null!=this.associatedLayer){e.next=4;break}throw new x.Z("".concat(this.type,"-layer:not-editable"),"Service is not editable");case 4:return e.next=6,this.associatedLayer.load();case 6:return e.abrupt("return",this.associatedLayer.uploadAssets(t,r));case 7:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"on",value:function(e,t){return(0,c.Z)((0,p.Z)(v.prototype),"on",this).call(this,e,t)}},{key:"convertMesh",value:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t,r){var i,a,u,s,l,c,p,f,d,v,y,h=this;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(e){throw Z.Z.getLogger(h).error(".convertMesh()",e.message),e},e.next=3,this.load();case 3:return this.infoFor3D||a(new x.Z("invalid:layer","SceneLayer has no capability for mesh conversion")),e.next=6,this.extractAndFilterFiles(t);case 6:return u=e.sent,s=u.reduce((function(e,t){return(0,ae.$z)(h.infoFor3D,t)?e+1:e}),0),0===s&&a(new O.Q_),s>1&&a(new O.i1),l=this.spatialReference,c=null!==(i=null===r||void 0===r?void 0:r.location)&&void 0!==i?i:new E.Z({x:0,y:0,z:0,spatialReference:l}),p=c.spatialReference.isGeographic?"local":"georeferenced",f=L.Z.createWithExternalSource(c,u,{vertexSpace:p}),e.next=15,this.uploadAssets([f],r);case 15:return d=e.sent,v=(0,n.Z)(d,1),y=v[0],e.abrupt("return",y);case 19:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"extractAndFilterFiles",value:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t){var r;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:if(r=this.infoFor3D){e.next=5;break}return e.abrupt("return",t);case 5:return e.next=7,Oe(t);case 7:return e.abrupt("return",e.sent.filter((function(e){return(0,ae.F7)(r,e)})));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"validateLayer",value:function(e){if(e.layerType&&!Ne.has(e.layerType))throw new x.Z("scenelayer:layer-type-not-supported","SceneLayer does not support this layer type",{layerType:e.layerType});if(isNaN(this.version.major)||isNaN(this.version.minor))throw new x.Z("layer:service-version-not-supported","Service version is not supported.",{serviceVersion:this.version.versionString,supportedVersions:"1.x, 2.x"});if(this.version.major>2)throw new x.Z("layer:service-version-too-new","Service version is too new.",{serviceVersion:this.version.versionString,supportedVersions:"1.x, 2.x"});!function(e,t){var r=!1,n=!1;if(null==e)r=!0,n=!0;else{var i=t&&t.isGeographic;switch(e){case"east-north-up":case"earth-centered":r=!0,n=i;break;case"vertex-reference-frame":r=!0,n=!i;break;default:r=!1}}if(!r)throw new x.Z("scenelayer:unsupported-normal-reference-frame","Normal reference frame is invalid.");if(!n)throw new x.Z("scenelayer:incompatible-normal-reference-frame","Normal reference frame is incompatible with layer spatial reference.")}(this.normalReferenceFrame,this.spatialReference)}},{key:"_getTypeKeywords",value:function(){var e=[];if("points"===this.profile)e.push("Point");else{if("mesh-pyramids"!==this.profile)throw new x.Z("scenelayer:unknown-profile","SceneLayer:save() encountered an unknown SceneLayer profile: "+this.profile);e.push("3DObject")}return e}},{key:"_populateFieldUsageInfo",value:function(){var e=this;if(this._fieldUsageInfo={},this.fields){var t,r=(0,i.Z)(this.fields);try{var n=function(){var r,n,i,o=t.value,a=!(null===(r=e.attributeStorageInfo)||void 0===r||!r.some((function(e){return e.name===o.name}))),u=!(null===(n=e.associatedLayer)||void 0===n||null===(i=n.fields)||void 0===i||!i.some((function(e){return e&&o.name===e.name}))),s={supportsLabelingInfo:a,supportsRenderer:a,supportsPopupTemplate:a||u,supportsLayerQuery:u};e._fieldUsageInfo[o.name]=s};for(r.s();!(t=r.n()).done;)n()}catch(o){r.e(o)}finally{r.f()}}}},{key:"_applyAssociatedLayerOverrides",value:function(){this._applyAssociatedLayerFieldsOverrides(),this._applyAssociatedLayerPopupOverrides(),this._applyAssociatedLayerExtentOverride(),this._applyAssociatedLayerPrivileges()}},{key:"_applyAssociatedLayerFieldsOverrides",value:function(){var e;if(null!==(e=this.associatedLayer)&&void 0!==e&&e.fields){var t,r=null,n=(0,i.Z)(this.associatedLayer.fields);try{for(n.s();!(t=n.n()).done;){var o=t.value,a=this.getField(o.name);a?(!a.domain&&o.domain&&(a.domain=o.domain.clone()),a.editable=o.editable,a.nullable=o.nullable,a.length=o.length):(r||(r=this.fields?this.fields.slice():[]),r.push(o.clone()))}}catch(u){n.e(u)}finally{n.f()}r&&this._set("fields",r)}}},{key:"_applyAssociatedLayerPopupOverrides",value:function(){if(this.associatedLayer)for(var e=["popupTemplate","popupEnabled"],t=(0,C.vw)(this),r=0;r<e.length;r++){var n=e[r],i=this.originIdOf(n),o=this.associatedLayer.originIdOf(n);i<o&&(o===k.s3.SERVICE||o===k.s3.PORTAL_ITEM)&&t.setAtOrigin(n,this.associatedLayer[n],o)}}},{key:"_applyAssociatedLayerExtentOverride",value:function(){var e,t,r,n=null===(e=this.associatedLayer)||void 0===e?void 0:e.getAtOrigin("fullExtent","service");(0,Ee.Rx)()&&null!=(null===(t=this.associatedLayer)||void 0===t?void 0:t.infoFor3D)&&n&&(0,K.M8)(null===(r=this.associatedLayer)||void 0===r?void 0:r.url)&&W(this)&&(0,C.vw)(this).setAtOrigin("fullExtent",n.clone(),k.s3.SERVICE)}},{key:"_applyAssociatedLayerPrivileges",value:function(){var e=this.associatedLayer;e&&(this._set("userHasEditingPrivileges",e.userHasEditingPrivileges),this._set("userHasFullEditingPrivileges",e.userHasFullEditingPrivileges),this._set("userHasUpdateItemPrivileges",e.userHasUpdateItemPrivileges))}},{key:"_setAssociatedFeatureLayer",value:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t){var r,n,i,a,u;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!["mesh-pyramids","points"].includes(this.profile)){e.next=19;break}return e.prev=1,e.next=4,(0,X.w)("".concat(this.url,"/layers/").concat(this.layerId),{sceneLayerItem:this.portalItem,customParameters:this.customParameters,apiKey:this.apiKey,signal:t});case 4:return r=e.sent,n=r.serverUrl,i=r.layerId,a=r.portalItem,e.next=10,ce.T.FeatureLayer();case 10:return u=e.sent,this.associatedLayer=new u({url:n,customParameters:this.customParameters,layerId:i,portalItem:a}),e.next=14,this.associatedLayer.load();case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),(0,I.D_)(e.t0)||this._logWarningOnPopupEnabled();case 19:case"end":return e.stop()}}),e,this,[[1,16]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_logWarningOnPopupEnabled",value:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(){var t,r=this;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,T.whenOnce)((function(){return r.popupEnabled&&null!=r.popupTemplate}));case 2:t="this SceneLayer: ".concat(this.title),null==this.attributeStorageInfo?Z.Z.getLogger(this).warn("Associated FeatureLayer could not be loaded and no binary attributes found. Popups will not work on ".concat(t)):Z.Z.getLogger(this).info("Associated FeatureLayer could not be loaded. Falling back to binary attributes for Popups on ".concat(t));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_validateElevationInfo",value:function(){var e=this.elevationInfo;"mesh-pyramids"===this.profile&&(0,Le.LR)(Z.Z.getLogger(this),(0,Le.Wb)("Mesh scene layers","relative-to-scene",e)),(0,Le.LR)(Z.Z.getLogger(this),(0,Le.kf)("Scene layers",e))}},{key:"fetchStatistics",value:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t,r){var n,i;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ce({fieldName:t,statisticsInfo:this.statisticsInfo,errorContext:"scenelayer",fieldsIndex:this.fieldsIndex,path:null!==(n=null===(i=this.parsedUrl)||void 0===i?void 0:i.path)&&void 0!==n?n:"",customParameters:this.customParameters,apiKey:this.apiKey,signal:null===r||void 0===r?void 0:r.signal});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()}]),v}(function(e){var t=function(e){(0,f.Z)(r,e);var t=(0,d.Z)(r);function r(){var e;return(0,s.Z)(this,r),(e=t.apply(this,arguments)).serviceTimeInfo=null,e}return(0,l.Z)(r,[{key:"timeInfo",get:function(){var e,t=null===(e=this.associatedLayer)||void 0===e?void 0:e.timeInfo;if(null==t)return null;var r=t.clone();return(0,V.UF)(r,this.fieldsIndex),r},set:function(e){(0,V.UF)(e,this.fieldsIndex),this._override("timeInfo",e)}},{key:"timeExtent",get:function(){var e;return null===(e=this.associatedLayer)||void 0===e?void 0:e.timeExtent},set:function(e){this._override("timeExtent",e)}},{key:"timeOffset",get:function(){var e;return null===(e=this.associatedLayer)||void 0===e?void 0:e.timeOffset},set:function(e){this._override("timeOffset",e)}},{key:"datesInUnknownTimezone",get:function(){var e,t;return null!==(e=null===(t=this.associatedLayer)||void 0===t?void 0:t.datesInUnknownTimezone)&&void 0!==e&&e},set:function(e){this._override("datesInUnknownTimezone",e)}},{key:"loadTimeInfoFromService",value:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t){var r,i,u,s,l,c,p,f,d,v=this;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(r=this.serviceTimeInfo)){e.next=3;break}return e.abrupt("return");case 3:if(i=r.startTimeField,u=r.endTimeField,null!=i||null!=u){e.next=6;break}return e.abrupt("return");case 6:if(!W({associatedLayer:this.associatedLayer,serviceUpdateTimeStamp:this.serviceUpdateTimeStamp})){e.next=8;break}return e.abrupt("return");case 8:return s=function(){var e=(0,a.Z)((0,o.Z)().mark((function e(r){var n,a,u,s,l,c,p,f,d;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,null===(a=v.fetchStatistics)||void 0===a?void 0:a.call(v,r,t);case 4:u=e.sent,n=null===u||void 0===u?void 0:u.stats,e.next=10;break;case 8:e.prev=8,e.t0=e.catch(1);case 10:if(null!=n){e.next=12;break}return e.abrupt("return",null);case 12:return l=(s=n).minTimeStr,c=s.min,p=s.maxTimeStr,f=s.max,d=r===i?null!==l&&void 0!==l?l:c:null!==p&&void 0!==p?p:f,e.abrupt("return",null!=d?new Date(d):null);case 14:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),e.next=11,Promise.all([s(i),s(u)]);case 11:if(l=e.sent,c=(0,n.Z)(l,2),p=c[0],f=c[1],!(null!=i&&null==p||null!=u&&null==f)){e.next=17;break}return e.abrupt("return");case 17:d=new z.Z({start:p,end:f}),this.setAtOrigin("timeInfo",new J.Z({endField:u,startField:i,fullTimeExtent:d}),"service");case 19:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(e);return(0,v._)([(0,_.Cb)({type:J.Z,json:{read:!1,write:!1}})],t.prototype,"timeInfo",null),(0,v._)([(0,_.Cb)({type:z.Z,json:{read:!1,write:!1}})],t.prototype,"timeExtent",null),(0,v._)([(0,_.Cb)({type:G.Z,json:{read:!1,write:!1}})],t.prototype,"timeOffset",null),(0,v._)([(0,_.Cb)({type:Boolean,nonNullable:!0,json:{read:!1,write:!1}})],t.prototype,"datesInUnknownTimezone",null),(0,v._)([(0,_.Cb)({type:Q,readOnly:!0,json:{read:{source:"timeInfo"}}})],t.prototype,"serviceTimeInfo",void 0),t=(0,v._)([(0,A.j)("esri.layers.mixins.TemporalSceneLayer")],t),t}((0,U.o1)((0,q.Vt)((0,j.Y)((0,M.q)((0,P.I)((0,N.M)((0,w.R)((0,D.N)((0,R.V)((0,g.J)(F.Z))))))))))));(0,v._)([(0,_.Cb)({types:{key:"type",base:te.B,typeMap:{selection:re.Z}},json:{origins:{"web-scene":{name:"layerDefinition.featureReduction",write:!0},"portal-item":{name:"layerDefinition.featureReduction",write:!0}}}})],Be.prototype,"featureReduction",void 0),(0,v._)([(0,_.Cb)({type:[pe],json:{read:!1,origins:{"web-scene":{name:"layerDefinition.rangeInfos",write:!0},"portal-item":{name:"layerDefinition.rangeInfos",write:!0}}}})],Be.prototype,"rangeInfos",void 0),(0,v._)([(0,_.Cb)({json:{read:!1}})],Be.prototype,"associatedLayer",void 0),(0,v._)([(0,_.Cb)({type:["show","hide"]})],Be.prototype,"listMode",void 0),(0,v._)([(0,_.Cb)({type:["ArcGISSceneServiceLayer"]})],Be.prototype,"operationalLayerType",void 0),(0,v._)([(0,_.Cb)({json:{read:!1},readOnly:!0})],Be.prototype,"type",void 0),(0,v._)([(0,_.Cb)((0,u.Z)((0,u.Z)({},qe.fields),{},{readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}}))],Be.prototype,"fields",void 0),(0,v._)([(0,_.Cb)()],Be.prototype,"types",null),(0,v._)([(0,_.Cb)()],Be.prototype,"typeIdField",null),(0,v._)([(0,_.Cb)()],Be.prototype,"templates",null),(0,v._)([(0,_.Cb)()],Be.prototype,"formTemplate",null),(0,v._)([(0,_.Cb)({readOnly:!0,clonable:!1})],Be.prototype,"fieldsIndex",null),(0,v._)([(0,_.Cb)({type:le.Z,json:{read:{source:"layerDefinition.floorInfo"},write:{target:"layerDefinition.floorInfo"}}})],Be.prototype,"floorInfo",void 0),(0,v._)([(0,_.Cb)(qe.outFields)],Be.prototype,"outFields",void 0),(0,v._)([(0,_.Cb)({type:oe.U4,readOnly:!0,json:{read:!1}})],Be.prototype,"nodePages",void 0),(0,v._)([(0,S.r)("service","nodePages",["nodePages","pointNodePages"])],Be.prototype,"readNodePages",null),(0,v._)([(0,_.Cb)({type:[oe.QI],readOnly:!0})],Be.prototype,"materialDefinitions",void 0),(0,v._)([(0,_.Cb)({type:[oe.Yh],readOnly:!0})],Be.prototype,"textureSetDefinitions",void 0),(0,v._)([(0,_.Cb)({type:[oe.H3],readOnly:!0})],Be.prototype,"geometryDefinitions",void 0),(0,v._)([(0,_.Cb)({readOnly:!0})],Be.prototype,"serviceUpdateTimeStamp",void 0),(0,v._)([(0,_.Cb)({readOnly:!0})],Be.prototype,"attributeStorageInfo",void 0),(0,v._)([(0,_.Cb)({readOnly:!0})],Be.prototype,"statisticsInfo",void 0),(0,v._)([(0,_.Cb)({type:b.Z.ofType(Number),nonNullable:!0,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.excludeObjectIds",write:{enabled:!0}}})],Be.prototype,"excludeObjectIds",void 0),(0,v._)([(0,_.Cb)({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],Be.prototype,"definitionExpression",void 0),(0,v._)([(0,_.Cb)({type:Te,json:{name:"layerDefinition.polygonFilter",write:{enabled:!0,allowNull:!0},origins:{service:{read:!1,write:!1}}}})],Be.prototype,"filter",void 0),(0,v._)([(0,_.Cb)({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],Be.prototype,"path",void 0),(0,v._)([(0,_.Cb)($.PV)],Be.prototype,"elevationInfo",null),(0,v._)([(0,_.Cb)({readOnly:!0,json:{read:!1}})],Be.prototype,"effectiveCapabilities",null),(0,v._)([(0,_.Cb)({readOnly:!0})],Be.prototype,"effectiveEditingEnabled",null),(0,v._)([(0,_.Cb)({type:String})],Be.prototype,"geometryType",null),(0,v._)([(0,_.Cb)($.iR)],Be.prototype,"labelsVisible",void 0),(0,v._)([(0,_.Cb)({type:[ue.Z],json:{origins:{service:{name:"drawingInfo.labelingInfo",read:{reader:se.r},write:!1}},name:"layerDefinition.drawingInfo.labelingInfo",read:{reader:se.r},write:!0}})],Be.prototype,"labelingInfo",void 0),(0,v._)([(0,_.Cb)($.rn)],Be.prototype,"legendEnabled",void 0),(0,v._)([(0,_.Cb)({type:Number,json:{origins:{"web-document":{default:1,write:{enabled:!0,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}},read:{source:["opacity","layerDefinition.drawingInfo.transparency"],reader:function(e,t){var r,n;if("number"==typeof e&&e>=0&&e<=1)return e;var i=null===(r=t.layerDefinition)||void 0===r||null===(n=r.drawingInfo)||void 0===n?void 0:n.transparency;return void 0!==i?(0,Pe.b)(i):void 0}}},"portal-item":{write:!0},service:{read:!1}}}})],Be.prototype,"opacity",void 0),(0,v._)([(0,_.Cb)({type:["Low","High"],readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],Be.prototype,"priority",void 0),(0,v._)([(0,_.Cb)({type:["Labels"],readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],Be.prototype,"semantic",void 0),(0,v._)([(0,_.Cb)({types:m.o,json:{origins:{service:{read:{source:"drawingInfo.renderer"}}},name:"layerDefinition.drawingInfo.renderer",write:!0},value:null})],Be.prototype,"renderer",null),(0,v._)([(0,_.Cb)({json:{read:!1}})],Be.prototype,"cachedDrawingInfo",void 0),(0,v._)([(0,S.r)("service","cachedDrawingInfo")],Be.prototype,"readCachedDrawingInfo",null),(0,v._)([(0,_.Cb)({readOnly:!0,json:{read:!1}})],Be.prototype,"capabilities",null),(0,v._)([(0,_.Cb)({type:Boolean,json:{read:!1}})],Be.prototype,"editingEnabled",null),(0,v._)([(0,_.Cb)({readOnly:!0,json:{write:!1,read:!1}})],Be.prototype,"infoFor3D",null),(0,v._)([(0,_.Cb)({readOnly:!0,json:{write:!1,read:!1}})],Be.prototype,"relationships",null),(0,v._)([(0,_.Cb)($.C_)],Be.prototype,"popupEnabled",void 0),(0,v._)([(0,_.Cb)({type:h.Z,json:{name:"popupInfo",write:!0}})],Be.prototype,"popupTemplate",void 0),(0,v._)([(0,_.Cb)({readOnly:!0,json:{read:!1}})],Be.prototype,"defaultPopupTemplate",null),(0,v._)([(0,_.Cb)({type:String,json:{read:!1}})],Be.prototype,"objectIdField",void 0),(0,v._)([(0,S.r)("service","objectIdField",["objectIdField","fields"])],Be.prototype,"readObjectIdField",null),(0,v._)([(0,_.Cb)({type:String,json:{read:!1}})],Be.prototype,"globalIdField",void 0),(0,v._)([(0,S.r)("service","globalIdField",["globalIdField","fields"])],Be.prototype,"readGlobalIdField",null),(0,v._)([(0,_.Cb)({readOnly:!0,type:String,json:{read:!1}})],Be.prototype,"displayField",null),(0,v._)([(0,_.Cb)({type:String,json:{read:!1}})],Be.prototype,"profile",void 0),(0,v._)([(0,S.r)("service","profile",["store.profile"])],Be.prototype,"readProfile",null),(0,v._)([(0,_.Cb)({readOnly:!0,type:String,json:{origins:{service:{read:{source:"store.normalReferenceFrame"}}},read:!1}})],Be.prototype,"normalReferenceFrame",void 0),(0,v._)([(0,_.Cb)($.YI)],Be.prototype,"screenSizePerspectiveEnabled",void 0),(0,v._)([(0,_.Cb)({json:{read:!1,origins:{service:{read:!0}}}})],Be.prototype,"serviceItemId",void 0),(0,v._)([(0,_.Cb)(B.I)],Be.prototype,"useViewTime",null),Be=(0,v._)([(0,A.j)("esri.layers.SceneLayer")],Be);var ze={"mesh-pyramids":"mesh-pyramids",meshpyramids:"mesh-pyramids","features-meshes":"mesh-pyramids",points:"points","features-points":"points",lines:"lines","features-lines":"lines",polygons:"polygons","features-polygons":"polygons"},Ge={"mesh-pyramids":"mesh",points:"point"},He=Be},55946:function(e,t,r){function n(e,t,r,n){return{x:e,y:t,z:r,hasZ:null!=r,hasM:!1,spatialReference:n,type:"point"}}function i(e,t,r,n,i){e.x=t,e.y=r,e.z=n,e.hasZ=null!=n,e.spatialReference=i}r.d(t,{T:function(){return n},y:function(){return i}})},25889:function(e,t,r){r.d(t,{AC:function(){return d},Fz:function(){return y},Q_:function(){return b},_C:function(){return v},fB:function(){return h},i1:function(){return x},jO:function(){return m},kE:function(){return f},ks:function(){return p},s8:function(){return g},sc:function(){return c}});var n=r(43144),i=r(15671),o=r(60136),a=r(29388),u=r(10064),s="upload-assets",l=function(){return new Error},c=function(e){(0,o.Z)(r,e);var t=(0,a.Z)(r);function r(){return(0,i.Z)(this,r),t.call(this,"".concat(s,":unsupported"),"Layer does not support asset uploads.",l())}return(0,n.Z)(r)}(u.Z),p=function(e){(0,o.Z)(r,e);var t=(0,a.Z)(r);function r(){return(0,i.Z)(this,r),t.call(this,"".concat(s,":no-glb-support"),"Layer does not support glb.",l())}return(0,n.Z)(r)}(u.Z),f=function(e){(0,o.Z)(r,e);var t=(0,a.Z)(r);function r(){return(0,i.Z)(this,r),t.call(this,"".concat(s,":no-supported-source"),"No supported external source found",l())}return(0,n.Z)(r)}(u.Z),d=function(e){(0,o.Z)(r,e);var t=(0,a.Z)(r);function r(){return(0,i.Z)(this,r),t.call(this,"".concat(s,":not-base-64"),"Expected gltf data in base64 format after conversion.",l())}return(0,n.Z)(r)}(u.Z),v=function(e){(0,o.Z)(r,e);var t=(0,a.Z)(r);function r(){return(0,i.Z)(this,r),t.call(this,"".concat(s,":unable-to-prepare-options"),"Unable to prepare uploadAsset request options.",l())}return(0,n.Z)(r)}(u.Z),y=function(e){(0,o.Z)(r,e);var t=(0,a.Z)(r);function r(e,n){return(0,i.Z)(this,r),t.call(this,"".concat(s,":bad-response"),"Bad response. Uploaded ".concat(e," items and received ").concat(n," results."),l())}return(0,n.Z)(r)}(u.Z),h=function(e){(0,o.Z)(r,e);var t=(0,a.Z)(r);function r(e,n){var o,a;return(0,i.Z)(this,r),t.call(this,"".concat(s,"-layer:upload-failed"),"Failed to upload mesh file ".concat(e,". Error code: ").concat(null!==(o=null===n||void 0===n?void 0:n.code)&&void 0!==o?o:"-1",". Error message: ").concat(null!==(a=null===n||void 0===n?void 0:n.messages)&&void 0!==a?a:"unknown"),l())}return(0,n.Z)(r)}(u.Z),m=function(e){(0,o.Z)(r,e);var t=(0,a.Z)(r);function r(e){return(0,i.Z)(this,r),t.call(this,"".concat(s,"-layer:unsupported-format"),"The service allowed us to upload an asset of FormatID ".concat(e,", but it does not list it in its supported formats."),l())}return(0,n.Z)(r)}(u.Z),g=function(e){(0,o.Z)(r,e);var t=(0,a.Z)(r);function r(){return(0,i.Z)(this,r),t.call(this,"".concat(s,":convert3D-failed"),"convert3D failed.")}return(0,n.Z)(r)}(u.Z),b=function(e){(0,o.Z)(r,e);var t=(0,a.Z)(r);function r(){return(0,i.Z)(this,r),t.call(this,"invalid-input:no-model","No supported model found")}return(0,n.Z)(r)}(u.Z),x=function(e){(0,o.Z)(r,e);var t=(0,a.Z)(r);function r(){return(0,i.Z)(this,r),t.call(this,"invalid-input:multiple-models","Multiple supported models found")}return(0,n.Z)(r)}(u.Z)},34207:function(e,t,r){r.d(t,{H3:function(){return Z},QI:function(){return y},U4:function(){return f},Yh:function(){return m}});var n=r(43144),i=r(15671),o=r(60136),a=r(29388),u=r(27366),s=r(46784),l=r(49861),c=(r(93169),r(32718),r(84936),r(27135)),p=r(69912),f=function(e){(0,o.Z)(r,e);var t=(0,a.Z)(r);function r(){var e;return(0,i.Z)(this,r),(e=t.apply(this,arguments)).nodesPerPage=null,e.rootIndex=0,e.lodSelectionMetricType=null,e}return(0,n.Z)(r)}(s.wq);(0,u._)([(0,l.Cb)({type:Number})],f.prototype,"nodesPerPage",void 0),(0,u._)([(0,l.Cb)({type:Number})],f.prototype,"rootIndex",void 0),(0,u._)([(0,l.Cb)({type:String})],f.prototype,"lodSelectionMetricType",void 0),f=(0,u._)([(0,p.j)("esri.layers.support.I3SLayerDefinitions.I3SNodePageDefinition")],f);var d=function(e){(0,o.Z)(r,e);var t=(0,a.Z)(r);function r(){var e;return(0,i.Z)(this,r),(e=t.apply(this,arguments)).factor=1,e}return(0,n.Z)(r)}(s.wq);(0,u._)([(0,l.Cb)({type:Number,json:{read:{source:"textureSetDefinitionId"}}})],d.prototype,"id",void 0),(0,u._)([(0,l.Cb)({type:Number})],d.prototype,"factor",void 0),d=(0,u._)([(0,p.j)("esri.layers.support.I3SLayerDefinitions.I3SMaterialTexture")],d);var v=function(e){(0,o.Z)(r,e);var t=(0,a.Z)(r);function r(){var e;return(0,i.Z)(this,r),(e=t.apply(this,arguments)).baseColorFactor=[1,1,1,1],e.baseColorTexture=null,e.metallicRoughnessTexture=null,e.metallicFactor=1,e.roughnessFactor=1,e}return(0,n.Z)(r)}(s.wq);(0,u._)([(0,l.Cb)({type:[Number]})],v.prototype,"baseColorFactor",void 0),(0,u._)([(0,l.Cb)({type:d})],v.prototype,"baseColorTexture",void 0),(0,u._)([(0,l.Cb)({type:d})],v.prototype,"metallicRoughnessTexture",void 0),(0,u._)([(0,l.Cb)({type:Number})],v.prototype,"metallicFactor",void 0),(0,u._)([(0,l.Cb)({type:Number})],v.prototype,"roughnessFactor",void 0),v=(0,u._)([(0,p.j)("esri.layers.support.I3SLayerDefinitions.I3SMaterialPBRMetallicRoughness")],v);var y=function(e){(0,o.Z)(r,e);var t=(0,a.Z)(r);function r(){var e;return(0,i.Z)(this,r),(e=t.apply(this,arguments)).alphaMode="opaque",e.alphaCutoff=.25,e.doubleSided=!1,e.cullFace="none",e.normalTexture=null,e.occlusionTexture=null,e.emissiveTexture=null,e.emissiveFactor=null,e.pbrMetallicRoughness=null,e}return(0,n.Z)(r)}(s.wq);(0,u._)([(0,c.J)({opaque:"opaque",mask:"mask",blend:"blend"})],y.prototype,"alphaMode",void 0),(0,u._)([(0,l.Cb)({type:Number})],y.prototype,"alphaCutoff",void 0),(0,u._)([(0,l.Cb)({type:Boolean})],y.prototype,"doubleSided",void 0),(0,u._)([(0,c.J)({none:"none",back:"back",front:"front"})],y.prototype,"cullFace",void 0),(0,u._)([(0,l.Cb)({type:d})],y.prototype,"normalTexture",void 0),(0,u._)([(0,l.Cb)({type:d})],y.prototype,"occlusionTexture",void 0),(0,u._)([(0,l.Cb)({type:d})],y.prototype,"emissiveTexture",void 0),(0,u._)([(0,l.Cb)({type:[Number]})],y.prototype,"emissiveFactor",void 0),(0,u._)([(0,l.Cb)({type:v})],y.prototype,"pbrMetallicRoughness",void 0),y=(0,u._)([(0,p.j)("esri.layers.support.I3SLayerDefinitions.I3SMaterialDefinition")],y);var h=function(e){(0,o.Z)(r,e);var t=(0,a.Z)(r);function r(){return(0,i.Z)(this,r),t.apply(this,arguments)}return(0,n.Z)(r)}(s.wq);(0,u._)([(0,l.Cb)({type:String,json:{read:{source:["name","index"],reader:function(e,t){return null!=e?e:"".concat(t.index)}}}})],h.prototype,"name",void 0),(0,u._)([(0,c.J)({jpg:"jpg",png:"png",dds:"dds","ktx-etc2":"ktx-etc2",ktx2:"ktx2",basis:"basis"})],h.prototype,"format",void 0),h=(0,u._)([(0,p.j)("esri.layers.support.I3SLayerDefinitions.I3STextureFormat")],h);var m=function(e){(0,o.Z)(r,e);var t=(0,a.Z)(r);function r(){var e;return(0,i.Z)(this,r),(e=t.apply(this,arguments)).atlas=!1,e}return(0,n.Z)(r)}(s.wq);(0,u._)([(0,l.Cb)({type:[h]})],m.prototype,"formats",void 0),(0,u._)([(0,l.Cb)({type:Boolean})],m.prototype,"atlas",void 0),m=(0,u._)([(0,p.j)("esri.layers.support.I3SLayerDefinitions.I3STextureSetDefinition")],m);var g=function(e){(0,o.Z)(r,e);var t=(0,a.Z)(r);function r(){return(0,i.Z)(this,r),t.apply(this,arguments)}return(0,n.Z)(r)}(s.wq);(0,u._)([(0,c.J)({Float32:"Float32",UInt64:"UInt64",UInt32:"UInt32",UInt16:"UInt16",UInt8:"UInt8"})],g.prototype,"type",void 0),(0,u._)([(0,l.Cb)({type:Number})],g.prototype,"component",void 0),g=(0,u._)([(0,p.j)("esri.layers.support.I3SLayerDefinitions.I3SGeometryAttribute")],g);var b=function(e){(0,o.Z)(r,e);var t=(0,a.Z)(r);function r(){return(0,i.Z)(this,r),t.apply(this,arguments)}return(0,n.Z)(r)}(s.wq);(0,u._)([(0,c.J)({draco:"draco"})],b.prototype,"encoding",void 0),(0,u._)([(0,l.Cb)({type:[String]})],b.prototype,"attributes",void 0),b=(0,u._)([(0,p.j)("esri.layers.support.I3SLayerDefinitions.I3SGeometryCompressedAttributes")],b);var x=function(e){(0,o.Z)(r,e);var t=(0,a.Z)(r);function r(){var e;return(0,i.Z)(this,r),(e=t.apply(this,arguments)).offset=0,e}return(0,n.Z)(r)}(s.wq);(0,u._)([(0,l.Cb)({type:Number})],x.prototype,"offset",void 0),(0,u._)([(0,l.Cb)({type:g})],x.prototype,"position",void 0),(0,u._)([(0,l.Cb)({type:g})],x.prototype,"normal",void 0),(0,u._)([(0,l.Cb)({type:g})],x.prototype,"uv0",void 0),(0,u._)([(0,l.Cb)({type:g})],x.prototype,"color",void 0),(0,u._)([(0,l.Cb)({type:g})],x.prototype,"uvRegion",void 0),(0,u._)([(0,l.Cb)({type:g})],x.prototype,"featureId",void 0),(0,u._)([(0,l.Cb)({type:g})],x.prototype,"faceRange",void 0),(0,u._)([(0,l.Cb)({type:b})],x.prototype,"compressedAttributes",void 0),x=(0,u._)([(0,p.j)("esri.layers.support.I3SLayerDefinitions.I3SGeometryBuffer")],x);var Z=function(e){(0,o.Z)(r,e);var t=(0,a.Z)(r);function r(){return(0,i.Z)(this,r),t.apply(this,arguments)}return(0,n.Z)(r)}(s.wq);(0,u._)([(0,c.J)({triangle:"triangle"})],Z.prototype,"topology",void 0),(0,u._)([(0,l.Cb)()],Z.prototype,"geometryBuffers",void 0),Z=(0,u._)([(0,p.j)("esri.layers.support.I3SLayerDefinitions.I3SGeometryDefinition")],Z)},84076:function(e,t,r){r.d(t,{w:function(){return v}});var n=r(29439),i=r(74165),o=r(1413),a=r(15861),u=r(19545),s=r(76200),l=r(10064),c=r(66978),p=r(25899),f=r(7575),d=r(98995);function v(e,t){return y.apply(this,arguments)}function y(){return y=(0,a.Z)((0,i.Z)().mark((function e(t,r){var n,a,u,s,c,f;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=(0,p.Qc)(t)){e.next=3;break}throw new l.Z("invalid-url","Invalid scene service url");case 3:if(s=(0,o.Z)((0,o.Z)({},r),{},{sceneServerUrl:u.url.path,layerId:null!==(n=u.sublayer)&&void 0!==n?n:void 0}),null===(a=s.sceneLayerItem)||void 0===a){e.next=8;break}e.next=11;break;case 8:return e.next=10,h(s);case 10:s.sceneLayerItem=e.sent;case 11:if(null!=s.sceneLayerItem){e.next=13;break}return e.abrupt("return",w(s.sceneServerUrl.replace("/SceneServer","/FeatureServer"),s));case 13:return e.next=15,T(s);case 15:if(null!==(c=e.sent)&&void 0!==c&&c.url){e.next=18;break}throw new l.Z("related-service-not-found","Could not find feature service through portal item relationship");case 18:return s.featureServiceItem=c,e.next=21,w(c.url,s);case 21:return f=e.sent,e.abrupt("return",(f.portalItem=c,f));case 23:case"end":return e.stop()}}),e)}))),y.apply(this,arguments)}function h(e){return m.apply(this,arguments)}function m(){return(m=(0,a.Z)((0,i.Z)().mark((function e(t){var r,n,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(t);case 2:if(r=e.sent.serviceItemId){e.next=5;break}return e.abrupt("return",null);case 5:return n=new d.default({id:r,apiKey:t.apiKey}),e.next=8,x(t);case 8:return null!=(o=e.sent)&&(n.portal=new f.Z({url:o})),e.prev=10,e.abrupt("return",n.load({signal:t.signal}));case 14:return e.prev=14,e.t0=e.catch(10),e.abrupt("return",((0,c.r9)(e.t0),null));case 17:case"end":return e.stop()}}),e,null,[[10,14]])})))).apply(this,arguments)}function g(e){return b.apply(this,arguments)}function b(){return(b=(0,a.Z)((0,i.Z)().mark((function e(t){var r,n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.rootDocument){e.next=2;break}return e.abrupt("return",t.rootDocument);case 2:return r={query:(0,o.Z)((0,o.Z)({f:"json"},t.customParameters),{},{token:t.apiKey}),responseType:"json",signal:t.signal},e.prev=3,e.next=6,(0,s.Z)(t.sceneServerUrl,r);case 6:n=e.sent,t.rootDocument=n.data,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),t.rootDocument={};case 13:return e.abrupt("return",t.rootDocument);case 14:case"end":return e.stop()}}),e,null,[[3,10]])})))).apply(this,arguments)}function x(e){return Z.apply(this,arguments)}function Z(){return(Z=(0,a.Z)((0,i.Z)().mark((function e(t){var r,n,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(r=null===u.id||void 0===u.id?void 0:u.id.findServerInfo(t.sceneServerUrl))||void 0===r||!r.owningSystemUrl){e.next=3;break}return e.abrupt("return",r.owningSystemUrl);case 3:return n=t.sceneServerUrl.replace(/(.*\/rest)\/.*/i,"$1")+"/info",e.prev=4,e.next=7,(0,s.Z)(n,{query:{f:"json"},responseType:"json",signal:t.signal});case 7:if(!(o=e.sent.data.owningSystemUrl)){e.next=10;break}return e.abrupt("return",o);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),(0,c.r9)(e.t0);case 15:return e.abrupt("return",null);case 16:case"end":return e.stop()}}),e,null,[[4,12]])})))).apply(this,arguments)}function w(e,t){return I.apply(this,arguments)}function I(){return I=(0,a.Z)((0,i.Z)().mark((function e(t,r){var a,u,c,f,d,v,y,h,m,b,x,Z,w,I,T,_,C,S;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f=(0,p.Qc)(t)){e.next=3;break}throw new l.Z("invalid-feature-service-url","Invalid feature service url");case 3:if(d=f.url.path,null!=(v=r.layerId)){e.next=6;break}return e.abrupt("return",{serverUrl:d});case 6:if(y=g(r),!r.featureServiceItem){e.next=13;break}return e.next=10,r.featureServiceItem.fetchData("json");case 10:e.t0=e.sent,e.next=14;break;case 13:e.t0=null;case 14:return h=e.t0,m=null===(a=(null===h||void 0===h||null===(u=h.layers)||void 0===u?void 0:u[0])||(null===h||void 0===h||null===(c=h.tables)||void 0===c?void 0:c[0]))||void 0===a?void 0:a.customParameters,b=function(e){var t={query:(0,o.Z)({f:"json"},m),responseType:"json",authMode:e,signal:r.signal};return(0,s.Z)(d,t)},x=b("anonymous").catch((function(){return b("no-prompt")})),e.next=20,Promise.all([x,y]);case 20:if(Z=e.sent,w=(0,n.Z)(Z,2),I=w[0],T=w[1],_=null===T||void 0===T?void 0:T.layers,C=I.data&&I.data.layers,Array.isArray(C)){e.next=28;break}throw new Error("expected layers array");case 28:if(!Array.isArray(_)){e.next=38;break}S=0;case 30:if(!(S<Math.min(_.length,C.length))){e.next=36;break}if(_[S].id!==v){e.next=33;break}return e.abrupt("return",{serverUrl:d,layerId:C[S].id});case 33:S++,e.next=30;break;case 36:e.next=40;break;case 38:if(!(null!=v&&v<C.length)){e.next=40;break}return e.abrupt("return",{serverUrl:d,layerId:C[v].id});case 40:throw new Error("could not find matching associated sublayer");case 41:case"end":return e.stop()}}),e)}))),I.apply(this,arguments)}function T(e){return _.apply(this,arguments)}function _(){return(_=(0,a.Z)((0,i.Z)().mark((function e(t){var r,n,o,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.sceneLayerItem,n=t.signal,r){e.next=3;break}return e.abrupt("return",null);case 3:return e.prev=3,e.next=6,r.fetchRelatedItems({relationshipType:"Service2Service",direction:"reverse"},{signal:n});case 6:if(e.t0=e.sent.find((function(e){return"Feature Service"===e.type})),e.t0){e.next=9;break}e.t0=null;case 9:if(o=e.t0){e.next=12;break}return e.abrupt("return",null);case 12:return a=new d.default({portal:o.portal,id:o.id}),e.next=15,a.load();case 15:return e.abrupt("return",a);case 18:return e.prev=18,e.t1=e.catch(3),e.abrupt("return",((0,c.r9)(e.t1),null));case 21:case"end":return e.stop()}}),e,null,[[3,18]])})))).apply(this,arguments)}},96978:function(e,t,r){r.d(t,{C:function(){return n}});var n={analytics:{supportsCacheHint:!1},attachment:{supportsContentType:!1,supportsExifInfo:!1,supportsKeywords:!1,supportsName:!1,supportsSize:!1,supportsCacheHint:!1,supportsResize:!1},data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:!1},editing:{supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsGeometryUpdate:!1,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsAsyncApplyEdits:!1,zDefault:void 0},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:!1,supportsDelete:!1,supportsEditing:!1,supportsChangeTracking:!1,supportsQuery:!1,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:!1,supportsExceedsLimitStatistics:!1,supportsAsyncConvert3D:!1},queryRelated:{supportsCount:!1,supportsOrderBy:!1,supportsPagination:!1,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},query:{maxRecordCount:0,maxRecordCountFactor:0,standardMaxRecordCount:0,supportsCacheHint:!1,supportsCentroid:!1,supportsCompactGeometry:!1,supportsDefaultSpatialReference:!1,supportsFullTextSearch:!1,supportsDisjointSpatialRelationship:!1,supportsDistance:!1,supportsDistinct:!1,supportsExtent:!1,supportsFormatPBF:!1,supportsGeometryProperties:!1,supportsHavingClause:!1,supportsHistoricMoment:!1,supportsMaxRecordCountFactor:!1,supportsOrderBy:!1,supportsPagination:!1,supportsPercentileStatistics:!1,supportsQuantization:!1,supportsQuantizationEditMode:!1,supportsQueryByAnonymous:!1,supportsQueryByOthers:!1,supportsQueryGeometry:!1,supportsResultType:!1,supportsSqlExpression:!1,supportsStandardizedQueriesOnly:!1,supportsTopFeaturesQuery:!1,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsStatistics:!1,tileMaxRecordCount:0}}},18277:function(e,t,r){r.d(t,{$6:function(){return m},$z:function(){return a},F7:function(){return o},Ow:function(){return l},S0:function(){return s},d1:function(){return c},dm:function(){return p},ir:function(){return u}});var n=r(93433),i=[["binary","application/octet-stream","bin",""]];function o(e,t){var r;return null!=d(t.name,null!==(r=null===e||void 0===e?void 0:e.supportedFormats)&&void 0!==r?r:[])}function a(e,t){var r;if(!e)return!1;var n=p(t,null!==(r=e.supportedFormats)&&void 0!==r?r:[]);return null!=n&&e.editFormats.includes(n)}function u(e){var t;return f(null!==(t=null===e||void 0===e?void 0:e.supportedFormats)&&void 0!==t?t:[]).flatMap(h).map((function(e){return".".concat(e)}))}function s(e,t){return v(function(e,t){var r=e.toLowerCase();return f(t).find((function(e){return y(e)===r}))}(e,t))}function l(e,t){return v(d(e,t))}function c(e,t){return y(function(e,t){return f(t).find((function(t){return v(t)===e}))}(e,t))}function p(e,t){var r;return null!==(r=l(e.name,t))&&void 0!==r?r:s(e.type,t)}function f(e){return[].concat(i,(0,n.Z)(e))}function d(e,t){var r=e.toLowerCase();return f(t).find((function(e){return h(e).some((function(e){return r.endsWith(e)}))}))}function v(e){return null===e||void 0===e?void 0:e[0]}function y(e){return null===e||void 0===e?void 0:e[1].toLowerCase()}function h(e){var t;return null!==(t=null===e||void 0===e?void 0:e[2].split(",").map((function(e){return e.toLowerCase()})))&&void 0!==t?t:[]}function m(e){var t;return null===(t=e.tables)||void 0===t?void 0:t.find((function(e){return"assetMaps"===e.role}))}},22892:function(e,t,r){r.d(t,{B:function(){return i}});var n=r(35995);function i(e){return o[function(e){return"json"===e.type?"application/json":"blob"===e.type?e.blob.type:function(e){var t=(0,n.Ml)(e);return s[t]||a}(e.url)}(e)]||u}var o={},a="text/plain",u=o[a],s={png:"image/png",jpeg:"image/jpeg",jpg:"image/jpg",bmp:"image/bmp",gif:"image/gif",json:"application/json",txt:"text/plain",xml:"application/xml",svg:"image/svg+xml",zip:"application/zip",pbf:"application/vnd.mapbox-vector-tile",gz:"application/gzip","bin.gz":"application/octet-stream"};for(var l in s)o[s[l]]=l},74509:function(e,t,r){r.d(t,{AA:function(){return v},Jn:function(){return l},LR:function(){return A},Lt:function(){return f},O3:function(){return Z},Ou:function(){return g},RL:function(){return p},Uy:function(){return _},VW:function(){return s},W_:function(){return T},Wb:function(){return C},XH:function(){return y},Zz:function(){return a},ap:function(){return m},fl:function(){return d},fm:function(){return k},jG:function(){return L},kf:function(){return S},mF:function(){return u},tR:function(){return E},tq:function(){return w},vQ:function(){return b},vu:function(){return c},zx:function(){return x}});var n=r(68860),i=r(88152);function o(e){return e?L:E}function a(e,t){return null!==t&&void 0!==t&&t.mode?t.mode:o(e).mode}function u(e,t){return null!=t?t:o(e)}function s(e,t){return a(null!=e&&e.hasZ,t)}function l(e,t){return u(null!=e&&!!e.hasZ,t)}function c(e){var t=h(e);return s(e.geometry,t)}function p(e){var t=h(e),r=s(e.geometry,t);return{mode:r,offset:null!=t&&"on-the-ground"!==r?k(t):0,featureExpressionInfo:null===t||void 0===t?void 0:t.featureExpressionInfo}}function f(e){return y(p(e))}function d(e){return y(e)||v(e)}function v(e){var t;return"0"===(null===e||void 0===e||null===(t=e.featureExpressionInfo)||void 0===t?void 0:t.expression)}function y(e){if(!e)return!1;if("on-the-ground"===e.mode)return!1;var t=null!==e&&void 0!==e&&e.featureExpressionInfo?e.featureExpressionInfo.expression:null;return!(!t||"0"===t)}function h(e){return e.layer&&"elevationInfo"in e.layer?e.layer.elevationInfo:null}function m(e,t){if(null===e||void 0===e||!e.offset)return 0;var r=e.offset,i=e.unit;if("decimal-degrees"===i)return 0;var o="unknown"!==i&&i?i:"meters",a=(0,n.y)(t);return a?(0,n.En)(r,o,a):0}function g(e,t,r){var n,i;if(null!==r&&void 0!==r&&r.mode){var o=e.hasZ?e.z:0,a=m(r,e.spatialReference);switch(r.mode){case"absolute-height":return o-a;case"on-the-ground":return 0;case"relative-to-ground":return o-((null!==(n=t.elevationProvider.getElevation(e.x,e.y,o,e.spatialReference,"ground"))&&void 0!==n?n:0)+a);case"relative-to-scene":return o-((null!==(i=t.elevationProvider.getElevation(e.x,e.y,o,e.spatialReference,"scene"))&&void 0!==i?i:0)+a)}}}function b(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return Z(e,t.x,t.y,t.hasZ?t.z:0,t.spatialReference,r,n)}function x(e,t,r,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return Z(e,t[0],t[1],t.length>2?t[2]:0,r,n,i)}function Z(e,t,r,n,i,o){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;if(null!=o){var u=null!=a?a.mode:"absolute-height";if("on-the-ground"===u)return 0;var s=w(t,r,n,i,e,o),l=s.absoluteZ;return I(l,t,r,n,i,e,a,u)}}function w(e,t,r,n,i,o){var a=m(o,n);switch(o.mode){case"absolute-height":return{absoluteZ:r+a,elevation:0};case"on-the-ground":var u,s=null!==(u=i.elevationProvider.getElevation(e,t,0,n,"ground"))&&void 0!==u?u:0;return{absoluteZ:s,elevation:s};case"relative-to-ground":var l,c=null!==(l=i.elevationProvider.getElevation(e,t,r,n,"ground"))&&void 0!==l?l:0;return{absoluteZ:r+c+a,elevation:c};case"relative-to-scene":var p,f=null!==(p=i.elevationProvider.getElevation(e,t,r,n,"scene"))&&void 0!==p?p:0;return{absoluteZ:r+f+a,elevation:f}}}function I(e,t,r,n,i,o,a,u){var s,l,c=m(a,i);switch(u){case"absolute-height":return e-c;case"relative-to-ground":return e-((null!==(s=o.elevationProvider.getElevation(t,r,n,i,"ground"))&&void 0!==s?s:0)+c);case"relative-to-scene":return e-((null!==(l=o.elevationProvider.getElevation(t,r,n,i,"scene"))&&void 0!==l?l:0)+c)}}function T(e,t){if(null==t)return!1;var r=t.mode;return null!=r&&("scene"===e&&"relative-to-scene"===r||"ground"===e&&"absolute-height"!==r)}function _(e,t,r){return r&&r.mode!==t?"".concat(e," only support ").concat(t," elevation mode"):null}function C(e,t,r){return(null===r||void 0===r?void 0:r.mode)===t?"".concat(e," do not support ").concat(t," elevation mode"):null}function S(e,t){return null!=(null===t||void 0===t?void 0:t.featureExpressionInfo)&&"0"!==t.featureExpressionInfo.expression?"".concat(e," do not support featureExpressionInfo"):null}function A(e,t){t&&e.warn(".elevationInfo=",t)}function k(e){var t;return(null!==(t=null===e||void 0===e?void 0:e.offset)&&void 0!==t?t:0)*(0,i.Z7)(null===e||void 0===e?void 0:e.unit)}var L={mode:"absolute-height",offset:0},E={mode:"on-the-ground",offset:null}},37081:function(e,t,r){var n;function i(e){return o(e)||e===n.Depth||e===n.Normal||e===n.ObjectAndLayerIdColor}function o(e){return e===n.Shadow||e===n.ShadowHighlight||e===n.ShadowExcludeHighlight||e===n.ViewshedShadow}function a(e){return v(e)||e===n.Normal}function u(e){return e===n.Highlight||e===n.ObjectAndLayerIdColor}function s(e){return e===n.Color||u(e)}function l(e){return e===n.Color}function c(e){return l(e)||e===n.ObjectAndLayerIdColor}function p(e){return l(e)||e===n.Highlight}function f(e){return p(e)||y(e)}function d(e){return l(e)||u(e)}function v(e){return d(e)||y(e)}function y(e){return e===n.Depth}r.d(t,{BX:function(){return y},CQ:function(){return c},D5:function(){return l},H_:function(){return n},Jb:function(){return a},Kr:function(){return o},L_:function(){return d},Xo:function(){return f},_4:function(){return v},_D:function(){return i},ou:function(){return u},xs:function(){return s}}),function(e){e[e.Color=0]="Color",e[e.Depth=1]="Depth",e[e.Normal=2]="Normal",e[e.Shadow=3]="Shadow",e[e.ShadowHighlight=4]="ShadowHighlight",e[e.ShadowExcludeHighlight=5]="ShadowExcludeHighlight",e[e.ViewshedShadow=6]="ViewshedShadow",e[e.Highlight=7]="Highlight",e[e.ObjectAndLayerIdColor=8]="ObjectAndLayerIdColor",e[e.COUNT=9]="COUNT"}(n||(n={}))},16010:function(e,t,r){r.d(t,{O:function(){return f},r:function(){return a}});var n,i,o,a,u,s=r(30168),l=r(41644),c=r(98634),p=r(4760);function f(e,t){switch(t.normalType){case a.Compressed:e.attributes.add(p.T.NORMALCOMPRESSED,"vec2"),e.vertex.code.add((0,c.H)(n||(n=(0,s.Z)(["vec3 decompressNormal(vec2 normal) {\nfloat z = 1.0 - abs(normal.x) - abs(normal.y);\nreturn vec3(normal + sign(normal) * min(z, 0.0), z);\n}\nvec3 normalModel() {\nreturn decompressNormal(normalCompressed);\n}"]))));break;case a.Attribute:e.attributes.add(p.T.NORMAL,"vec3"),e.vertex.code.add((0,c.H)(i||(i=(0,s.Z)(["vec3 normalModel() {\nreturn normal;\n}"]))));break;case a.ScreenDerivative:e.fragment.code.add((0,c.H)(o||(o=(0,s.Z)(["vec3 screenDerivativeNormal(vec3 positionView) {\nreturn normalize(cross(dFdx(positionView), dFdy(positionView)));\n}"]))));break;default:(0,l.Bg)(t.normalType);case a.COUNT:case a.Ground:}}(u=a||(a={}))[u.Attribute=0]="Attribute",u[u.Compressed=1]="Compressed",u[u.Ground=2]="Ground",u[u.ScreenDerivative=3]="ScreenDerivative",u[u.COUNT=4]="COUNT"},27254:function(e,t,r){r.d(t,{$:function(){return u}});var n,i,o=r(30168),a=r(98634);function u(e,t){var r=e.code;t.doublePrecisionRequiresObfuscation?r.add((0,a.H)(n||(n=(0,o.Z)(["vec3 dpPlusFrc(vec3 a, vec3 b) {\nreturn mix(a, a + b, vec3(notEqual(b, vec3(0))));\n}\nvec3 dpMinusFrc(vec3 a, vec3 b) {\nreturn mix(vec3(0), a - b, vec3(notEqual(a, b)));\n}\nvec3 dpAdd(vec3 hiA, vec3 loA, vec3 hiB, vec3 loB) {\nvec3 t1 = dpPlusFrc(hiA, hiB);\nvec3 e = dpMinusFrc(t1, hiA);\nvec3 t2 = dpMinusFrc(hiB, e) + dpMinusFrc(hiA, dpMinusFrc(t1, e)) + loA + loB;\nreturn t1 + t2;\n}"])))):r.add((0,a.H)(i||(i=(0,o.Z)(["vec3 dpAdd(vec3 hiA, vec3 loA, vec3 hiB, vec3 loB) {\nvec3 t1 = hiA + hiB;\nvec3 e = t1 - hiA;\nvec3 t2 = ((hiB - e) + (hiA - (t1 - e))) + loA + loB;\nreturn t1 + t2;\n}"]))))}},78980:function(e,t,r){r.d(t,{n:function(){return a}});var n,i=r(30168),o=r(98634);function a(e){e.code.add((0,o.H)(n||(n=(0,i.Z)(["const float MAX_RGBA_FLOAT =\n255.0 / 256.0 +\n255.0 / 256.0 / 256.0 +\n255.0 / 256.0 / 256.0 / 256.0 +\n255.0 / 256.0 / 256.0 / 256.0 / 256.0;\nconst vec4 FIXED_POINT_FACTORS = vec4(1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0);\nvec4 float2rgba(const float value) {\nfloat valueInValidDomain = clamp(value, 0.0, MAX_RGBA_FLOAT);\nvec4 fixedPointU8 = floor(fract(valueInValidDomain * FIXED_POINT_FACTORS) * 256.0);\nconst float toU8AsFloat = 1.0 / 255.0;\nreturn fixedPointU8 * toU8AsFloat;\n}\nconst vec4 RGBA_2_FLOAT_FACTORS = vec4(\n255.0 / (256.0),\n255.0 / (256.0 * 256.0),\n255.0 / (256.0 * 256.0 * 256.0),\n255.0 / (256.0 * 256.0 * 256.0 * 256.0)\n);\nfloat rgba2float(vec4 rgba) {\nreturn dot(rgba, RGBA_2_FLOAT_FACTORS);\n}"]))))}},86471:function(e,t,r){r.d(t,{B:function(){return l}});var n=r(43144),i=r(15671),o=r(60136),a=r(29388),u=r(61809),s=r(99340),l=function(e){(0,o.Z)(r,e);var t=(0,a.Z)(r);function r(e,n){return(0,i.Z)(this,r),t.call(this,e,"vec3",s.P.Draw,(function(t,r,i,o){return t.setUniform3fv(e,n(r,i,o))}))}return(0,n.Z)(r)}(u.x)},49450:function(e,t,r){r.d(t,{J:function(){return l}});var n=r(43144),i=r(15671),o=r(60136),a=r(29388),u=r(61809),s=r(99340),l=function(e){(0,o.Z)(r,e);var t=(0,a.Z)(r);function r(e,n){return(0,i.Z)(this,r),t.call(this,e,"vec3",s.P.Pass,(function(t,r,i){return t.setUniform3fv(e,n(r,i))}))}return(0,n.Z)(r)}(u.x)},20395:function(e,t,r){r.d(t,{$:function(){return l}});var n=r(43144),i=r(15671),o=r(60136),a=r(29388),u=r(61809),s=r(99340),l=function(e){(0,o.Z)(r,e);var t=(0,a.Z)(r);function r(e,n){return(0,i.Z)(this,r),t.call(this,e,"vec4",s.P.Draw,(function(t,r,i){return t.setUniform4fv(e,n(r,i))}))}return(0,n.Z)(r)}(u.x)},58406:function(e,t,r){r.d(t,{p:function(){return l}});var n=r(43144),i=r(15671),o=r(60136),a=r(29388),u=r(61809),s=r(99340),l=function(e){(0,o.Z)(r,e);var t=(0,a.Z)(r);function r(e,n){return(0,i.Z)(this,r),t.call(this,e,"float",s.P.Pass,(function(t,r,i){return t.setUniform1f(e,n(r,i))}))}return(0,n.Z)(r)}(u.x)},82644:function(e,t,r){r.d(t,{j:function(){return l}});var n=r(43144),i=r(15671),o=r(60136),a=r(29388),u=r(61809),s=r(99340),l=function(e){(0,o.Z)(r,e);var t=(0,a.Z)(r);function r(e,n){return(0,i.Z)(this,r),t.call(this,e,"mat3",s.P.Draw,(function(t,r,i){return t.setUniformMatrix3fv(e,n(r,i))}))}return(0,n.Z)(r)}(u.x)},35522:function(e,t,r){r.d(t,{c:function(){return l}});var n=r(43144),i=r(15671),o=r(60136),a=r(29388),u=r(61809),s=r(99340),l=function(e){(0,o.Z)(r,e);var t=(0,a.Z)(r);function r(e,n){return(0,i.Z)(this,r),t.call(this,e,"mat3",s.P.Pass,(function(t,r,i){return t.setUniformMatrix3fv(e,n(r,i))}))}return(0,n.Z)(r)}(u.x)},8654:function(e,t,r){r.d(t,{g:function(){return l}});var n=r(43144),i=r(15671),o=r(60136),a=r(29388),u=r(61809),s=r(99340),l=function(e){(0,o.Z)(r,e);var t=(0,a.Z)(r);function r(e,n){return(0,i.Z)(this,r),t.call(this,e,"mat4",s.P.Pass,(function(t,r,i){return t.setUniformMatrix4fv(e,n(r,i))}))}return(0,n.Z)(r)}(u.x)},78050:function(e,t,r){r.d(t,{R:function(){return l}});var n=r(43144),i=r(15671),o=r(60136),a=r(29388),u=r(61809),s=r(99340),l=function(e){(0,o.Z)(r,e);var t=(0,a.Z)(r);function r(e,n){return(0,i.Z)(this,r),t.call(this,e,"sampler2D",s.P.Draw,(function(t,r,i){return t.bindTexture(e,n(r,i))}))}return(0,n.Z)(r)}(u.x)},61809:function(e,t,r){r.d(t,{x:function(){return u}});var n=r(4942),i=r(15671),o=r(43144),a=r(99340),u=function(){function e(t,r,o,u){var s,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if((0,i.Z)(this,e),this.name=t,this.type=r,this.arraySize=l,this.bind=(s={},(0,n.Z)(s,a.P.Pass,null),(0,n.Z)(s,a.P.Draw,null),s),u)switch(o){case a.P.Pass:this.bind[a.P.Pass]=u;break;case a.P.Draw:this.bind[a.P.Draw]=u}}return(0,o.Z)(e,[{key:"equals",value:function(e){return this.type===e.type&&this.name===e.name&&this.arraySize===e.arraySize}}]),e}()},98634:function(e,t,r){r.d(t,{H:function(){return a},K:function(){return o}});var n=r(43144),i=r(15671),o=(0,n.Z)((function e(){(0,i.Z)(this,e)}));function a(e){for(var t="",r=0;r<(arguments.length<=1?0:arguments.length-1);r++)t+=e[r]+(r+1<1||arguments.length<=r+1?void 0:arguments[r+1]);return t+=e[e.length-1]}!function(e){e.int=function(e){return Math.round(e).toString()},e.float=function(e){return e.toPrecision(8)}}(a||(a={}))},99340:function(e,t,r){var n;r.d(t,{P:function(){return n}}),function(e){e[e.Pass=0]="Pass",e[e.Draw=1]="Draw"}(n||(n={}))},4760:function(e,t,r){var n;function i(e){return e===n.POSITION}r.d(t,{T:function(){return n},j:function(){return i}}),function(e){e.POSITION="position",e.NORMAL="normal",e.NORMALCOMPRESSED="normalCompressed",e.UV0="uv0",e.COLOR="color",e.SYMBOLCOLOR="symbolColor",e.SIZE="size",e.TANGENT="tangent",e.OFFSET="offset",e.PERSPECTIVEDIVIDE="perspectiveDivide",e.CENTEROFFSETANDDISTANCE="centerOffsetAndDistance",e.LENGTH="length",e.PREVPOSITION="prevPosition",e.NEXTPOSITION="nextPosition",e.SUBDIVISIONFACTOR="subdivisionFactor",e.COLORFEATUREATTRIBUTE="colorFeatureAttribute",e.SIZEFEATUREATTRIBUTE="sizeFeatureAttribute",e.OPACITYFEATUREATTRIBUTE="opacityFeatureAttribute",e.DISTANCETOSTART="distanceToStart",e.UVMAPSPACE="uvMapSpace",e.BOUNDINGRECT="boundingRect",e.UVREGION="uvRegion",e.PROFILERIGHT="profileRight",e.PROFILEUP="profileUp",e.PROFILEVERTEXANDNORMAL="profileVertexAndNormal",e.FEATUREVALUE="featureValue",e.INSTANCEMODELORIGINHI="instanceModelOriginHi",e.INSTANCEMODELORIGINLO="instanceModelOriginLo",e.INSTANCEMODEL="instanceModel",e.INSTANCEMODELNORMAL="instanceModelNormal",e.INSTANCECOLOR="instanceColor",e.INSTANCEFEATUREATTRIBUTE="instanceFeatureAttribute",e.LOCALTRANSFORM="localTransform",e.GLOBALTRANSFORM="globalTransform",e.BOUNDINGSPHERE="boundingSphere",e.MODELORIGIN="modelOrigin",e.MODELSCALEFACTORS="modelScaleFactors",e.FEATUREATTRIBUTE="featureAttribute",e.STATE="state",e.LODLEVEL="lodLevel",e.POSITION0="position0",e.POSITION1="position1",e.NORMAL2COMPRESSED="normal2Compressed",e.COMPONENTINDEX="componentIndex",e.VARIANTOFFSET="variantOffset",e.VARIANTSTROKE="variantStroke",e.VARIANTEXTENSION="variantExtension",e.SIDENESS="sideness",e.START="start",e.END="end",e.UP="up",e.EXTRUDE="extrude",e.OBJECTANDLAYERIDCOLOR="objectAndLayerIdColor",e.INSTANCEOBJECTANDLAYERIDCOLOR="instanceObjectAndLayerIdColor"}(n||(n={}))},50951:function(e,t,r){var n;function i(e){return"global"===e?n.Global:n.Local}function o(e){return e===n.Global?"global":"local"}r.d(t,{JY:function(){return n},M7:function(){return o},wg:function(){return i}}),function(e){e[e.Global=1]="Global",e[e.Local=2]="Local"}(n||(n={}))},24405:function(e,t,r){r.d(t,{V5:function(){return l},e7:function(){return u},zc:function(){return c}});var n=r(74165),i=r(93433),o=r(15861),a=r(37270);function u(e){return s.apply(this,arguments)}function s(){return s=(0,o.Z)((0,n.Z)().mark((function e(t){var r,o,u,s,l,c,p,f,d,v,y,h=arguments;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(u=h.length>1&&void 0!==h[1]?h[1]:t.popupTemplate)){e.next=3;break}return e.abrupt("return",[]);case 3:return e.next=5,u.getRequiredFields(t.fieldsIndex);case 5:if(s=e.sent,l=u.lastEditInfoEnabled,c=t.objectIdField,p=t.typeIdField,f=t.globalIdField,d=t.relationships,!s.includes("*")){e.next=13;break}return e.abrupt("return",["*"]);case 13:return v=l?(0,a.CH)(t):[],y=(0,a.Q0)(t.fieldsIndex,[].concat((0,i.Z)(s),(0,i.Z)(v))),e.abrupt("return",(p&&y.push(p),y&&c&&null!==(r=t.fieldsIndex)&&void 0!==r&&r.has(c)&&!y.includes(c)&&y.push(c),y&&f&&null!==(o=t.fieldsIndex)&&void 0!==o&&o.has(f)&&!y.includes(f)&&y.push(f),d&&d.forEach((function(e){var r,n=e.keyField;y&&n&&(null===(r=t.fieldsIndex)||void 0===r?void 0:r.has(n))&&!y.includes(n)&&y.push(n)})),y));case 15:case"end":return e.stop()}}),e)}))),s.apply(this,arguments)}function l(e,t){return e.popupTemplate?e.popupTemplate:null!=t&&t.defaultPopupTemplateEnabled&&null!=e.defaultPopupTemplate?e.defaultPopupTemplate:null}function c(e,t){return null!=l(e,{defaultPopupTemplateEnabled:t})}}}]);
//# sourceMappingURL=2357.cb43922a.chunk.js.map