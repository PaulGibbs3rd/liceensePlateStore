"use strict";(self.webpackChunkreact_training=self.webpackChunkreact_training||[]).push([[40763,93655,30440],{68748:function(e,t,n){n.d(t,{a:function(){return h},z:function(){return v}});var r=n(37762),o=n(15671),a=n(43144),i=n(60136),s=n(29388),p=n(27366),l=n(80987),u=n(60354),c=(n(93169),n(32718),n(49861)),d=(n(84936),n(69912)),h=function(e){(0,i.Z)(n,e);var t=(0,s.Z)(n);function n(e){var r;return(0,o.Z)(this,n),(r=t.call(this,e)).addHandles([r.on("before-add",(function(e){null==e.item&&e.preventDefault()})),r.on("after-add",(function(e){return r._own(e.item)})),r.on("after-remove",(function(e){return r._release(e.item)}))]),r}return(0,a.Z)(n,[{key:"owner",get:function(){return this._get("owner")},set:function(e){e!==this._get("owner")&&(this._releaseAll(),this._set("owner",e),this._ownAll())}},{key:"_ownAll",value:function(){var e,t=(0,r.Z)(this.items);try{for(t.s();!(e=t.n()).done;){var n=e.value;this._own(n)}}catch(o){t.e(o)}finally{t.f()}}},{key:"_releaseAll",value:function(){var e,t=(0,r.Z)(this.items);try{for(t.s();!(e=t.n()).done;){var n=e.value;this._release(n)}}catch(o){t.e(o)}finally{t.f()}}},{key:"_createNewInstance",value:function(e){return this.itemType?new(l.Z.ofType(this.itemType.Type))(e):new l.Z(e)}}]),n}(l.Z);function v(e,t){return{type:e,cast:u.R,set:function(n){var r=(0,u.Z)(n,this._get(t),e);r.owner=this,this._set(t,r)}}}(0,p._)([(0,c.Cb)()],h.prototype,"owner",null),h=(0,p._)([(0,d.j)("esri.core.support.OwningCollection")],h)},93655:function(e,t,n){n.r(t),n.d(t,{default:function(){return b}});var r=n(15671),o=n(43144),a=n(88301),i=n(61120),s=n(60136),p=n(29388),l=n(27366),u=n(49861),c=(n(93169),n(32718),n(84936),n(69912)),d=n(68748),h=n(30651),v=n(6693),y=n(56811),f=n(78983),g=n(64575),m=function(e){(0,s.Z)(n,e);var t=(0,p.Z)(n);function n(e){var o;return(0,r.Z)(this,n),(o=t.call(this,e)).elevationInfo=null,o.graphics=new f.J,o.screenSizePerspectiveEnabled=!0,o.type="graphics",o.internal=!1,o}return(0,o.Z)(n,[{key:"destroy",value:function(){this.removeAll(),this.graphics.destroy()}},{key:"add",value:function(e){return this.graphics.add(e),this}},{key:"addMany",value:function(e){return this.graphics.addMany(e),this}},{key:"removeAll",value:function(){return this.graphics.removeAll(),this}},{key:"remove",value:function(e){this.graphics.remove(e)}},{key:"removeMany",value:function(e){this.graphics.removeMany(e)}},{key:"on",value:function(e,t){return(0,a.Z)((0,i.Z)(n.prototype),"on",this).call(this,e,t)}},{key:"graphicChanged",value:function(e){this.emit("graphic-update",e)}}]),n}((0,v.h7)((0,y.M)(h.Z)));(0,l._)([(0,u.Cb)({type:g.Z})],m.prototype,"elevationInfo",void 0),(0,l._)([(0,u.Cb)((0,d.z)(f.J,"graphics"))],m.prototype,"graphics",void 0),(0,l._)([(0,u.Cb)({type:["show","hide"]})],m.prototype,"listMode",void 0),(0,l._)([(0,u.Cb)()],m.prototype,"screenSizePerspectiveEnabled",void 0),(0,l._)([(0,u.Cb)({readOnly:!0})],m.prototype,"type",void 0),(0,l._)([(0,u.Cb)({constructOnly:!0})],m.prototype,"internal",void 0);var b=m=(0,l._)([(0,c.j)("esri.layers.GraphicsLayer")],m)},78983:function(e,t,n){n.d(t,{J:function(){return d}});var r=n(15671),o=n(43144),a=n(60136),i=n(29388),s=n(27366),p=n(52639),l=(n(32718),n(25243)),u=(n(84936),n(93169),n(10064),n(42017)),c=n(69912),d=function(e){(0,a.Z)(n,e);var t=(0,i.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"_own",value:function(e){e.layer&&"remove"in e.layer&&e.layer!==this.owner&&e.layer.remove(e),e.layer=this.owner}},{key:"_release",value:function(e){e.layer===this.owner&&(e.layer=null)}}]),n}(n(68748).a);(0,s._)([(0,u.c)({Type:p.Z,ensureType:(0,l.se)(p.Z)})],d.prototype,"itemType",void 0),d=(0,s._)([(0,c.j)("esri.support.GraphicsCollection")],d)},36222:function(e,t,n){n.d(t,{O:function(){return o},h:function(){return r}});var r;n(93169);function o(e){switch(e){case r.SUPPORTED:break;case r.GRAPHICS_LAYER_MISSING:return"not owned by a graphics layer";case r.GEOMETRY_MISSING:return"no geometry";case r.GEOMETRY_TYPE_UNSUPPORTED:return"the geometry type is not supported";case r.ELEVATION_MODE_UNSUPPORTED:return"the elevation mode is not supported";case r.SYMBOL_TYPE_UNSUPPORTED:return"the symbol type is not supported"}return""}!function(e){e[e.SUPPORTED=0]="SUPPORTED",e[e.GRAPHICS_LAYER_MISSING=1]="GRAPHICS_LAYER_MISSING",e[e.GEOMETRY_MISSING=2]="GEOMETRY_MISSING",e[e.GEOMETRY_TYPE_UNSUPPORTED=3]="GEOMETRY_TYPE_UNSUPPORTED",e[e.ELEVATION_MODE_UNSUPPORTED=4]="ELEVATION_MODE_UNSUPPORTED",e[e.SYMBOL_TYPE_UNSUPPORTED=5]="SYMBOL_TYPE_UNSUPPORTED"}(r||(r={}))},7445:function(e,t,n){n.d(t,{Y:function(){return a}});n(93169);var r=n(74509),o=n(36222);function a(e){var t,n;if(e.graphic&&"graphics"!==(null===(t=e.graphic.layer)||void 0===t?void 0:t.type))return o.h.GRAPHICS_LAYER_MISSING;var a=null===(n=e.operations)||void 0===n?void 0:n.data.type;if(!a)return o.h.GEOMETRY_TYPE_UNSUPPORTED;switch(a){case"polygon":case"point":case"polyline":case"mesh":break;default:return o.h.GEOMETRY_TYPE_UNSUPPORTED}var i=e.elevationInfo;return(0,r.XH)(i)?o.h.ELEVATION_MODE_UNSUPPORTED:o.h.SUPPORTED}},83089:function(e,t,n){function r(e,t,n){if(t&&null!==e&&void 0!==e&&e.map){var r=e.map,o=r.layers.find((function(e){return e===t}));o||r.add(t,n),o&&null!=n&&r.layers.reorder(o,n)}}function o(e,t){var n="subtype-sublayer"===(null===t||void 0===t?void 0:t.type)?t.parent:t;return e.allLayerViews.find((function(e){var t=e.layer;return t===n||"sublayers"in t&&null!=t.sublayers&&t.sublayers.includes(n)}))}n.d(t,{j:function(){return o},p:function(){return r}})},52349:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(43144),o=n(15671),a=n(60136),i=n(29388),s=n(27366),p=n(7138),l=n(49861),u=(n(93169),n(32718),n(84936),n(69912)),c=function(e){(0,a.Z)(n,e);var t=(0,i.Z)(n);function n(e){var r;return(0,o.Z)(this,n),(r=t.call(this,e)).enabled=!1,r}return(0,r.Z)(n)}(p.default);(0,s._)([(0,l.Cb)({type:Boolean,nonNullable:!0})],c.prototype,"enabled",void 0);var d=c=(0,s._)([(0,u.j)("esri.views.interactive.sketch.SketchLabelOptions")],c)},59981:function(e,t,n){n.d(t,{Z:function(){return y}});var r=n(43144),o=n(15671),a=n(60136),i=n(29388),s=n(27366),p=n(7138),l=n(49861),u=(n(93169),n(32718),n(84936),n(69912)),c=n(52349),d=n(77560),h=n(47863),v=function(e){(0,a.Z)(n,e);var t=(0,i.Z)(n);function n(e){var r;return(0,o.Z)(this,n),(r=t.call(this,e)).labels=new c.Z,r.tooltips=new d.Z,r.values=new h.Z,r}return(0,r.Z)(n)}(p.default);(0,s._)([(0,l.Cb)({nonNullable:!0,type:c.Z})],v.prototype,"labels",void 0),(0,s._)([(0,l.Cb)({nonNullable:!0,type:d.Z})],v.prototype,"tooltips",void 0),(0,s._)([(0,l.Cb)({nonNullable:!0,type:h.Z})],v.prototype,"values",void 0);var y=v=(0,s._)([(0,u.j)("esri.views.interactive.sketch.SketchOptions")],v)},77560:function(e,t,n){n.d(t,{Z:function(){return y}});var r=n(15671),o=n(43144),a=n(60136),i=n(29388),s=n(27366),p=n(7138),l=n(49861),u=(n(93169),n(32718),n(84936),n(69912)),c=function(e){(0,a.Z)(n,e);var t=(0,i.Z)(n);function n(e){var o;return(0,r.Z)(this,n),(o=t.call(this,e)).mode="absolute-height",o}return(0,o.Z)(n,[{key:"toJSON",value:function(){return{mode:this.mode}}}]),n}(p.default);(0,s._)([(0,l.Cb)({type:String,nonNullable:!0})],c.prototype,"mode",void 0),c=(0,s._)([(0,u.j)("esri.views.interactive.sketch.SketchTooltipElevationOptions")],c);var d=function(e){(0,a.Z)(n,e);var t=(0,i.Z)(n);function n(e){var o;return(0,r.Z)(this,n),(o=t.call(this,e)).area=!0,o.coordinates=!0,o.direction=!0,o.distance=!0,o.elevation=!0,o.header=!0,o.helpMessage=!1,o.orientation=!0,o.radius=!0,o.rotation=!0,o.scale=!0,o.size=!0,o.totalLength=!0,o}return(0,o.Z)(n)}(p.default);(0,s._)([(0,l.Cb)({type:Boolean,nonNullable:!0})],d.prototype,"area",void 0),(0,s._)([(0,l.Cb)({type:Boolean,nonNullable:!0})],d.prototype,"coordinates",void 0),(0,s._)([(0,l.Cb)({type:Boolean,nonNullable:!0})],d.prototype,"direction",void 0),(0,s._)([(0,l.Cb)({type:Boolean,nonNullable:!0})],d.prototype,"distance",void 0),(0,s._)([(0,l.Cb)({type:Boolean,nonNullable:!0})],d.prototype,"elevation",void 0),(0,s._)([(0,l.Cb)({type:Boolean,nonNullable:!0})],d.prototype,"header",void 0),(0,s._)([(0,l.Cb)({type:Boolean,nonNullable:!0})],d.prototype,"helpMessage",void 0),(0,s._)([(0,l.Cb)({type:Boolean,nonNullable:!0})],d.prototype,"orientation",void 0),(0,s._)([(0,l.Cb)({type:Boolean,nonNullable:!0})],d.prototype,"radius",void 0),(0,s._)([(0,l.Cb)({type:Boolean,nonNullable:!0})],d.prototype,"rotation",void 0),(0,s._)([(0,l.Cb)({type:Boolean,nonNullable:!0})],d.prototype,"scale",void 0),(0,s._)([(0,l.Cb)({type:Boolean,nonNullable:!0})],d.prototype,"size",void 0),(0,s._)([(0,l.Cb)({type:Boolean,nonNullable:!0})],d.prototype,"totalLength",void 0);var h=d=(0,s._)([(0,u.j)("esri.views.interactive.sketch.SketchTooltipVisibleElements")],d),v=function(e){(0,a.Z)(n,e);var t=(0,i.Z)(n);function n(e){var o;return(0,r.Z)(this,n),(o=t.call(this,e)).enabled=!1,o.forceEnabled=!1,o.helpMessage=null,o.helpMessageIcon=null,o.inputEnabled=!0,o.elevation=new c,o.visibleElements=new h,o.visualVariables=null,o.xyMode="auto",o}return(0,o.Z)(n,[{key:"effectiveEnabled",get:function(){return this.forceEnabled||this.enabled}}]),n}(p.default);(0,s._)([(0,l.Cb)({type:Boolean,nonNullable:!0})],v.prototype,"enabled",void 0),(0,s._)([(0,l.Cb)()],v.prototype,"forceEnabled",void 0),(0,s._)([(0,l.Cb)()],v.prototype,"effectiveEnabled",null),(0,s._)([(0,l.Cb)()],v.prototype,"helpMessage",void 0),(0,s._)([(0,l.Cb)()],v.prototype,"helpMessageIcon",void 0),(0,s._)([(0,l.Cb)({type:Boolean,nonNullable:!0})],v.prototype,"inputEnabled",void 0),(0,s._)([(0,l.Cb)({type:c,nonNullable:!0})],v.prototype,"elevation",void 0),(0,s._)([(0,l.Cb)({type:h,nonNullable:!0})],v.prototype,"visibleElements",void 0),(0,s._)([(0,l.Cb)()],v.prototype,"visualVariables",void 0),(0,s._)([(0,l.Cb)()],v.prototype,"xyMode",void 0);var y=v=(0,s._)([(0,u.j)("esri.views.interactive.sketch.SketchTooltipOptions")],v)},47863:function(e,t,n){n.d(t,{Z:function(){return h}});var r=n(15671),o=n(43144),a=n(60136),i=n(29388),s=n(27366),p=n(7138),l=n(49861),u=(n(93169),n(32718),n(84936),n(69912)),c=n(73840),d=function(e){(0,a.Z)(n,e);var t=(0,i.Z)(n);function n(e){var o;return(0,r.Z)(this,n),(o=t.call(this,e)).directionMode="relative",o.relativeDirectionIsBilateral=!1,o}return(0,o.Z)(n,[{key:"effectiveDirectionMode",get:function(){switch(this.directionMode){case"relative":return this.relativeDirectionIsBilateral?c.uE.RelativeBilateral:c.uE.Relative;case"absolute":return c.uE.Absolute}}}]),n}(p.default);(0,s._)([(0,l.Cb)({type:String,nonNullable:!0})],d.prototype,"directionMode",void 0),(0,s._)([(0,l.Cb)({type:Boolean,nonNullable:!0})],d.prototype,"relativeDirectionIsBilateral",void 0),(0,s._)([(0,l.Cb)()],d.prototype,"effectiveDirectionMode",null);var h=d=(0,s._)([(0,u.j)("esri.views.interactive.sketch.SketchValueOptions")],d)},74923:function(e,t,n){n.d(t,{HV:function(){return u},ZV:function(){return a},qm:function(){return l}});var r=n(74165),o=n(15861);function a(e,t){return i.apply(this,arguments)}function i(){return i=(0,o.Z)((0,r.Z)().mark((function e(t,n){var o,a,i,p,l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("2d"!==t.type){e.next=2;break}return e.abrupt("return",t.hitTest(n));case 2:return e.next=4,t.hitTest(n);case 4:if(0!==(a=e.sent).results.length){e.next=7;break}return e.abrupt("return",a);case 7:return i=a.results[0],p=(null!==(o=i.distance)&&void 0!==o?o:0)*(1+s),l=a.results.findIndex((function(e){var t;return(null!==(t=e.distance)&&void 0!==t?t:0)>p})),e.abrupt("return",(-1!==l&&(a.results=a.results.slice(0,l)),i&&a.ground.distance>p&&(a.ground.mapPoint=null),a));case 9:case"end":return e.stop()}}),e)}))),i.apply(this,arguments)}var s=.05;function p(e){return"graphic"===(null===e||void 0===e?void 0:e.type)}function l(e){var t;return null!==(t=e.find(p))&&void 0!==t?t:null}function u(e){return e.filter(p)}},40763:function(e,t,n){n.d(t,{Z:function(){return ve}});var r=n(93433),o=n(74165),a=n(15861),i=n(1413),s=n(37762),p=n(15671),l=n(43144),u=n(60136),c=n(29388),d=n(27366),h=n(51508),v=n(80987),y=n(10064),f=n(91505),g=(n(93169),n(32718)),m=n(92026),b=n(66978),_=n(94172),k=n(49861),w=(n(84936),n(69912)),E=n(83448),Z=n(79803),O=n(69662),G=n(92975),T=n(93655),S=n(37933),C=n(36222),x=n(7445),M=n(74509);function A(e){return R(e).result}function R(e){var t;if(e.graphic&&"graphics"!==(null===(t=e.graphic.layer)||void 0===t?void 0:t.type))return{result:C.h.GRAPHICS_LAYER_MISSING};if(!e.operations)return{result:C.h.GEOMETRY_MISSING};if((0,M.XH)(e.elevationInfo))return{result:C.h.ELEVATION_MODE_UNSUPPORTED};var n=e.operations.data.type,r=e.operations.data.geometry;return"point"===n||"mesh"===n||"polyline"===n||"polygon"===n?{result:C.h.SUPPORTED,geometry:r}:{result:C.h.GEOMETRY_TYPE_UNSUPPORTED}}function P(e){var t;if("graphics"!==(null===(t=e.layer)||void 0===t?void 0:t.type))return C.h.GRAPHICS_LAYER_MISSING;if(null==e.geometry)return C.h.GEOMETRY_MISSING;switch(e.geometry.type){case"point":break;case"polygon":case"polyline":case"multipoint":case"extent":case"mesh":return C.h.SUPPORTED;default:return C.h.GEOMETRY_TYPE_UNSUPPORTED}var n=null!=e.symbol&&"point-3d"===e.symbol.type&&e.symbol.symbolLayers;return n&&n.some((function(e){return"object"===e.type}))?"on-the-ground"!==(0,M.vu)(e)&&(0,M.Lt)(e)?C.h.ELEVATION_MODE_UNSUPPORTED:C.h.SUPPORTED:C.h.SYMBOL_TYPE_UNSUPPORTED}var I=n(83089),D=n(1614),U=n(87888),H=n(52349),N=n(59981),L=n(77560),j=n(47863),V=n(38856),Y=n(98173),B=n(64674),F=n(74923),K=n(72612),W=n(41644),q=function(e){(0,u.Z)(n,e);var t=(0,c.Z)(n);function n(e){var r;return(0,p.Z)(this,n),(r=t.call(this,e)).cancelled=!1,r.history={undo:[],redo:[]},r.type=null,r}return(0,l.Z)(n,[{key:"tool",get:function(){if(!this.activeComponent)return null;switch(this.activeComponent.type){case"graphic-mover":case"move-3d":return"move";case"box":case"transform-3d":return"transform";case"reshape":case"reshape-3d":return"reshape";case"draw-2d":case"draw-3d":return this.activeComponent.geometryType;default:(0,W.Bg)(this.activeComponent)}return null}},{key:"addToHistory",value:function(e){this.history.redo=[],this.history.undo.push(e)}},{key:"resetHistory",value:function(){this.history.redo=[],this.history.undo=[]}},{key:"canUndo",value:function(){return this.history.undo.length>0}},{key:"canRedo",value:function(){return this.history.redo.length>0}},{key:"complete",value:function(){this._reset(),this.onEnd(),this.emit("complete")}},{key:"cancel",value:function(){this.cancelled=!0,this.complete()}},{key:"_reset",value:function(){var e;null===(e=this.activeComponent)||void 0===e||e.reset()}},{key:"refreshComponent",value:function(){var e=this.activeComponent;e&&("box"!==e.type&&"reshape"!==e.type&&"graphic-mover"!==e.type||e.refresh())}},{key:"undo",set:function(e){var t=this;this._set("undo",(function(){t.canUndo()&&e()}))}},{key:"redo",set:function(e){var t=this;this._set("redo",(function(){t.canRedo()&&e()}))}}]),n}(f.Z.EventedAccessor);(0,d._)([(0,k.Cb)()],q.prototype,"activeComponent",void 0),(0,d._)([(0,k.Cb)()],q.prototype,"cancelled",void 0),(0,d._)([(0,k.Cb)()],q.prototype,"history",void 0),(0,d._)([(0,k.Cb)()],q.prototype,"tool",null),(0,d._)([(0,k.Cb)()],q.prototype,"type",void 0),(0,d._)([(0,k.Cb)()],q.prototype,"canUndo",null),(0,d._)([(0,k.Cb)()],q.prototype,"canRedo",null),(0,d._)([(0,k.Cb)()],q.prototype,"onEnd",void 0),(0,d._)([(0,k.Cb)()],q.prototype,"undo",null),(0,d._)([(0,k.Cb)()],q.prototype,"redo",null),(0,d._)([(0,k.Cb)()],q.prototype,"toggleTool",void 0),(0,d._)([(0,k.Cb)()],q.prototype,"addToSelection",void 0),(0,d._)([(0,k.Cb)()],q.prototype,"removeFromSelection",void 0);var z=function(e){(0,u.Z)(n,e);var t=(0,c.Z)(n);function n(){return(0,p.Z)(this,n),t.apply(this,arguments)}return(0,l.Z)(n)}(q=(0,d._)([(0,w.j)("esri.widgets.Sketch.support.OperationHandle")],q));(0,d._)([(0,k.Cb)()],z.prototype,"activeComponent",void 0),z=(0,d._)([(0,w.j)("esri.widgets.Sketch.support.OperationHandle.CreateOperationHandle")],z);var J=function(e){(0,u.Z)(n,e);var t=(0,c.Z)(n);function n(){return(0,p.Z)(this,n),t.apply(this,arguments)}return(0,l.Z)(n)}(q);(0,d._)([(0,k.Cb)()],J.prototype,"activeComponent",void 0),J=(0,d._)([(0,w.j)("esri.widgets.Sketch.support.OperationHandle.UpdateOperationHandle")],J);var X=n(16072),Q=n(61459),$=n(14404),ee=n(16915),te=n(43977),ne={defaultZ:0},re={reshapeOptions:{edgeOperation:"split",shapeOperation:"move",vertexOperation:"move"},enableMoveAllGraphics:!0,enableRotation:!0,enableScaling:!0,multipleSelectionEnabled:!0,preserveAspectRatio:!1,toggleToolOnClick:!0,enableZ:!0,highlightOptions:{enabled:!0},tool:"transform"},oe=function(e){(0,u.Z)(d,e);var t=(0,c.Z)(d);function d(e){var n,r,o,a;return(0,p.Z)(this,d),(a=t.call(this,e))._numUpdating=0,a._defaultSnappingManager=null,a._internalGraphicsLayer=new T.default({listMode:"hide",internal:!0,title:"SVM Internal"}),a._operationHandle=null,a._viewHandlesKey="viewHandles",a.activeFillSymbol=null,a.activeLineSymbol=null,a.activeVertexSymbol=null,a.allowDeleteKey=!0,a.layer=null,a.pointSymbol=new X.default({style:"circle",size:6,color:[255,255,255],outline:{color:[50,50,50],width:1}}),a.polygonSymbol=new Q.default({color:[150,150,150,.2],outline:{color:[50,50,50],width:2}}),a.polylineSymbol=new $.default({color:[130,130,130,1],width:2}),a.meshSymbol=new ee.Z({symbolLayers:new v.Z([new te.Z])}),a.updateGraphics=new v.Z,a.updateOnGraphicClick=!0,a.vertexSymbol=new X.default({style:"circle",size:6,color:[255,255,255],outline:{color:[50,50,50],width:1}}),a.sketchOptions=new N.Z,a._moduleLoaderAbortController=null,a._viewReadyAbortController=null,a._originalPopupEnabled=null,a.defaultCreateOptions=ne,a.defaultUpdateOptions=re,a.snappingOptions=null!==(n=null!==(r=null===e||void 0===e||null===(o=e.snappingManager)||void 0===o?void 0:o.options)&&void 0!==r?r:null===e||void 0===e?void 0:e.snappingOptions)&&void 0!==n?n:new Y.Z,a}return(0,l.Z)(d,[{key:"initialize",value:function(){var e=this;this.addHandles([(0,_.on)((function(){var t,n;return null===(t=e.view)||void 0===t||null===(n=t.map)||void 0===n?void 0:n.layers}),"change",(function(t){t.removed.includes(e.layer)&&e.cancel()})),(0,_.on)((function(){var t;return null===(t=e.layer)||void 0===t?void 0:t.graphics}),"change",(function(t){if(null!=e._operationHandle){var n,r=(0,s.Z)(t.removed);try{for(r.s();!(n=r.n()).done;){var o=n.value;e.updateGraphics.includes(o)&&(e.updateGraphics.length>1?e._operationHandle.removeFromSelection(o):e._operationHandle.cancel())}}catch(a){r.e(a)}finally{r.f()}}})),(0,_.watch)((function(){var t,n;return null!==(t=null===(n=e.layer)||void 0===n?void 0:n.elevationInfo)&&void 0!==t?t:null}),(function(t){t!==e._internalGraphicsLayer.elevationInfo&&(e.cancel(),e._internalGraphicsLayer.elevationInfo=t)}),_.syncAndInitial),(0,_.watch)((function(){return e.view}),(function(t){e._defaultSnappingManager=(0,m.SC)(e._defaultSnappingManager),t&&(e.snappingManager||(e._defaultSnappingManager=new V.N({view:t,options:e.snappingOptions})),"2d"===t.type?Promise.all([n.e(93463),n.e(17877),n.e(52162),n.e(95537),n.e(11344),n.e(76412),n.e(18320),n.e(29606),n.e(68231)]).then(n.bind(n,10461)):"3d"===t.type&&(Promise.all([n.e(57808),n.e(93463),n.e(17877),n.e(25158),n.e(89414),n.e(74579),n.e(52162),n.e(69656),n.e(46316),n.e(25269),n.e(30118),n.e(11219),n.e(96026),n.e(10039),n.e(24440),n.e(30734),n.e(97411),n.e(95537),n.e(29950),n.e(76412),n.e(95050),n.e(18320),n.e(29606),n.e(98035),n.e(6599),n.e(63336),n.e(84760)]).then(n.bind(n,63336)),Promise.all([n.e(83406),n.e(57808),n.e(54557),n.e(93463),n.e(99201),n.e(34697),n.e(78915),n.e(25158),n.e(89414),n.e(74579),n.e(50489),n.e(41170),n.e(69656),n.e(46316),n.e(25269),n.e(30118),n.e(11219),n.e(24440),n.e(30734),n.e(97689),n.e(54341),n.e(58322),n.e(47858),n.e(8699),n.e(80143),n.e(72649)]).then(n.bind(n,79240))))}),_.syncAndInitial),(0,_.watch)((function(){var t;return null===(t=e.view)||void 0===t?void 0:t.spatialReference}),(function(t,n){t&&n&&!t.equals(n)&&e.cancel()}))]),(0,B.Ob)(this)}},{key:"destroy",value:function(){this.cancel(),this._removeDefaultLayer(),this._defaultSnappingManager=(0,m.SC)(this._defaultSnappingManager),this._set("snappingManager",null),this._set("view",null),this.emit("destroy")}},{key:"updating",get:function(){return this._numUpdating>0||null!=this.snappingManager&&this.snappingManager.updating}},{key:"activeTool",get:function(){var e,t;return null!==(e=null===(t=this._operationHandle)||void 0===t?void 0:t.tool)&&void 0!==e?e:null}},{key:"activeComponent",get:function(){var e,t;return null!==(e=null===(t=this._operationHandle)||void 0===t?void 0:t.activeComponent)&&void 0!==e?e:null}},{key:"createGraphic",get:function(){return null==this.activeComponent||"draw-3d"!==this.activeComponent.type&&"draw-2d"!==this.activeComponent.type?this._get("createGraphic"):this.activeComponent.graphic}},{key:"defaultCreateOptions",get:function(){return this._get("defaultCreateOptions")},set:function(e){this._set("defaultCreateOptions",(0,i.Z)((0,i.Z)({},ne),e))}},{key:"defaultUpdateOptions",get:function(){return this._get("defaultUpdateOptions")},set:function(e){this._set("defaultUpdateOptions",(0,i.Z)((0,i.Z)((0,i.Z)({},re),e),{},{reshapeOptions:(0,i.Z)((0,i.Z)({},re.reshapeOptions),null===e||void 0===e?void 0:e.reshapeOptions),highlightOptions:(0,i.Z)((0,i.Z)({},re.highlightOptions),null===e||void 0===e?void 0:e.highlightOptions)}))}},{key:"labelOptions",get:function(){return this.sketchOptions.labels},set:function(e){this.sketchOptions.labels=e}},{key:"snappingOptions",get:function(){var e,t;return null!==(e=null===(t=this.snappingManager)||void 0===t?void 0:t.options)&&void 0!==e?e:this._get("snappingOptions")},set:function(e){null!=this._defaultSnappingManager&&(this._defaultSnappingManager.options=e),this._set("snappingOptions",e)}},{key:"snappingManager",get:function(){return this._isOverridden("snappingManager")&&this._get("snappingManager"),this._defaultSnappingManager},set:function(e){if(e)this._isOverridden("snappingManager")||(this._defaultSnappingManager=(0,m.SC)(this._defaultSnappingManager)),this._override("snappingManager",e);else{var t=this.view;!this._defaultSnappingManager&&t&&(this._defaultSnappingManager=new V.N({options:this.snappingOptions,view:t})),this._clearOverride("snappingManager")}}},{key:"state",get:function(){var e,t=!(null===(e=this.view)||void 0===e||!e.ready||!this.layer),n=this._operationHandle;return t&&n?"active":t?"ready":"disabled"}},{key:"tooltipOptions",get:function(){return this.sketchOptions.tooltips},set:function(e){this.sketchOptions.tooltips=e}},{key:"valueOptions",get:function(){return this.sketchOptions.values},set:function(e){this.sketchOptions.values=e}},{key:"view",get:function(){return this._get("view")},set:function(e){var t=this,n=this._get("view");if(n){var r=n.container,o=n.map;r&&(n.cursor=null),null!==o&&void 0!==o&&o.remove(this._internalGraphicsLayer),this.removeHandles(this._viewHandlesKey),this.cancel()}var a="view-ready";this.removeHandles(a),e&&this.addHandles((0,_.when)((function(){return e.ready}),(function(n){t.removeHandles(t._viewHandlesKey),n&&t.addHandles(t._generateViewHandles(e),t._viewHandlesKey)}),_.syncAndInitial),a),this._set("view",e)}},{key:"cancel",value:function(){this._moduleLoaderAbortController=(0,m.IM)(this._moduleLoaderAbortController),this._viewReadyAbortController=(0,m.IM)(this._viewReadyAbortController),this._operationHandle&&this._operationHandle.cancel()}},{key:"complete",value:function(){this._operationHandle&&this._operationHandle.complete()}},{key:"delete",value:function(){var e=this.state,t=this.updateGraphics;if("active"===e&&t.length){var n=this.activeTool,r=this.layer,o=t.toArray();r.removeMany(o),this.cancel(),this._emitDeleteEvent({graphics:o,tool:n})}}},{key:"duplicate",value:function(){if("active"===this.state&&this.updateGraphics.length){var e=this.updateGraphics.map((function(e){return e.clone()})).toArray();return this.layer.addMany(e),this.emit("duplicate",{graphics:e,type:"duplicate"}),e}return[]}},{key:"create",value:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t,n){var r,a,i,s,p=this;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.cancel(),e.next=3,this._waitViewReady();case 3:if(r=this.view,a=this.layer,r&&"disabled"!==this.state){e.next=6;break}throw a||this._logMissingLayer(),(0,b.zE)();case 6:if(null!=r.activeTool&&(r.activeTool=null),t){e.next=8;break}return e.abrupt("return",void this._logError("sketch:missing-parameter","Missing parameter 'tool'."));case 8:return(0,I.p)(r,this._internalGraphicsLayer),e.next=11,this._setupCreateOperation(t,n);case 11:if(null!=(i=e.sent)&&!this.destroyed){e.next=14;break}return e.abrupt("return",void r.map.remove(this._internalGraphicsLayer));case 14:s=function(){if(i===p._operationHandle){var e,n=p.createGraphic,r=p._operationHandle.cancelled;p._operationHandle.destroy(),p._operationHandle=null,p._set("createGraphic",null),null!==(e=p.view)&&void 0!==e&&e.map&&p.view.map.remove(p._internalGraphicsLayer),i.cancelled||null==n||a.add(n),p.emit("create",{graphic:n,state:r?"cancel":"complete",tool:t,toolEventInfo:null,type:"create"})}},i.on("complete",s),this._operationHandle=i,r.ready&&r.focus();case 16:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"place",value:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t,n){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.create("mesh",(0,i.Z)({mode:"click",hasZ:t.hasZ,geometryToPlace:t},n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"update",value:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t,n){var r,a,i,s,p,l=this;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.cancel(),e.next=3,this._waitViewReady();case 3:if(r=this.layer,a=this.view,i=this.state,a&&"disabled"!==i){e.next=6;break}throw r||this._logMissingLayer(),(0,b.zE)();case 6:if(null!=a.activeTool&&(a.activeTool=null),s=Array.isArray(t)?t:[t],null!=t&&null!==s&&void 0!==s&&s.length){e.next=10;break}return e.abrupt("return",void this._logError("sketch:missing-parameter","Missing parameter 'graphics'."));case 10:if(!s.some((function(e){return e.layer!==r?(l._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics missing from the supplied GraphicsLayer."),!0):null==e.geometry&&(l._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics with an unsupported geometry."),!0)}))){e.next=12;break}return e.abrupt("return");case 12:return e.next=14,this._setupUpdateOperation(s,n);case 14:p=e.sent,this.destroyed||null==p||he(p)||((0,I.p)(a,this._internalGraphicsLayer),this._setUpdateOperationHandle(p,n),this.emit("update",{graphics:s,state:"start",aborted:!1,tool:p.tool,toolEventInfo:null,type:"update"}));case 16:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_updateSpatialReference",value:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t){var n,r,a,i;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=this.view)){e.next=28;break}this._beginAsyncOperation(),t=Array.isArray(t)?t:[t],r=(0,s.Z)(t),e.prev=4,r.s();case 6:if((a=r.n()).done){e.next=17;break}if(i=a.value,e.t0=null==i.geometry||"mesh"===i.geometry.type||(0,G.fS)(i.geometry.spatialReference,n.spatialReference),e.t0){e.next=15;break}if(e.t1=(0,Z.canProjectWithoutEngine)(i.geometry.spatialReference,n.spatialReference)||(0,Z.isLoaded)(),e.t1){e.next=14;break}return e.next=14,(0,Z.load)();case 14:i.geometry=(0,Z.project)(i.geometry,n.spatialReference);case 15:e.next=6;break;case 17:e.next=22;break;case 19:e.prev=19,e.t2=e.catch(4),r.e(e.t2);case 22:return e.prev=22,r.f(),e.finish(22);case 25:this._endAsyncOperation(),e.next=29;break;case 28:this._logMissingView();case 29:case"end":return e.stop()}}),e,this,[[4,19,22,25]])})));return function(t){return e.apply(this,arguments)}}()},{key:"undo",value:function(){var e;this.canUndo()&&(null===(e=this._operationHandle)||void 0===e||e.undo())}},{key:"redo",value:function(){var e;this.canRedo()&&(null===(e=this._operationHandle)||void 0===e||e.redo())}},{key:"canUndo",value:function(){var e;return!(null===(e=this._operationHandle)||void 0===e||!e.canUndo())}},{key:"canRedo",value:function(){var e;return!(null===(e=this._operationHandle)||void 0===e||!e.canRedo())}},{key:"toggleUpdateTool",value:function(){var e;null===(e=this._operationHandle)||void 0===e||e.toggleTool()}},{key:"_getFirstHit",value:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t){var n,r,a,i,s,p,l;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.view){e.next=3;break}return e.abrupt("return",(this._logMissingView(),null));case 3:if("2d"!==n.type){e.next=10;break}return r=[],n.map.allLayers.forEach((function(e){"vector-tile"!==e.type&&"imagery"!==e.type||r.push(e)})),e.next=8,n.hitTest(t,{exclude:r});case 8:return a=e.sent,e.abrupt("return",(0,F.qm)(a.results));case 10:return i=[n.map.ground],n.map.allLayers.forEach((function(e){(0,S.nx)(e.type)&&i.push(e)})),e.next=14,n.hitTest(t,{exclude:i});case 14:if(!((s=e.sent).results.length>0)){e.next=19;break}if(null==(l=s.results[0])||"graphic"!==l.type||!l.graphic||!(!s.ground.mapPoint||n.map.ground.opacity<1||s.ground.distance-(null!==(p=l.distance)&&void 0!==p?p:0)>-Math.min(3*s.ground.distance,"global"===n.viewingMode?(0,E.Iu)(n.renderCoordsHelper.spatialReference).radius/n.renderCoordsHelper.unitInMeters:Number.POSITIVE_INFINITY))){e.next=19;break}return e.abrupt("return",l);case 19:return e.abrupt("return",null);case 20:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_generateViewHandles",value:function(e){var t=this;return[e.on("immediate-click",function(){var n=(0,a.Z)((0,o.Z)().mark((function n(r){var a,s,p,l,u;return(0,o.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(s="active"===t.state&&"create"===(null===(a=t._operationHandle)||void 0===a?void 0:a.type),"disabled"!==t.state&&!s&&t.updateOnGraphicClick){n.next=3;break}return n.abrupt("return");case 3:return t._beginAsyncOperation(),n.next=6,r.async((function(){return t._getFirstHit((0,K.vT)(r))}));case 6:if(p=n.sent,l=null,null!=p?(u=p.graphic,t.updateGraphics.includes(u)||u.layer===t.layer?(r.stopPropagation(),l=u):"2d"!==e.type||t._isComponentGraphic(u)||"active"!==t.state||t.cancel()):"active"===t.state&&t.cancel(),n.t0=null==l||t.updateGraphics.includes(l),n.t0){n.next=13;break}return n.next=13,t.update([l],(0,i.Z)((0,i.Z)({},t.defaultUpdateOptions),{},{reshapeOptions:(0,i.Z)({},t.defaultUpdateOptions.reshapeOptions)}));case 13:t._endAsyncOperation();case 14:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),D.f.WIDGET)]}},{key:"_setupCreateOperation",value:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t,n){var r,a,s;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.view){e.next=3;break}return e.abrupt("return",(this._logMissingView(),null));case 3:return a=(0,i.Z)((0,i.Z)({hasZ:"3d"===r.type},this.defaultCreateOptions),n),e.next=6,this._setupDrawGraphicTool(t,r,a);case 6:return s=e.sent,e.abrupt("return",null==s?null:(r.tools.add(s),r.activeTool=s,this._setupCreateOperationHandle(s)));case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_setupDrawGraphicTool",value:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t,n,r){var a,i,s,p,l,u,c,d,h,v;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("multipoint"!==t||"3d"!==n.type){e.next=2;break}return e.abrupt("return",(this._logError("sketch:create","Multipoint geometries are not supported in SceneView."),null));case 2:if(n){e.next=4;break}return e.abrupt("return",(this._logMissingView(),null));case 4:return a=r.cursor,i=r.defaultZ,s=r.hasZ,p=r.geometryToPlace,l=r.graphicProperties,u=r.mode,c=r.preserveAspectRatio,d="rectangle"===t||"circle"===t?"hybrid":"click",h=null!==c&&void 0!==c?c:"rectangle"!==t,v={centered:"rectangle"!==t&&!("circle"===t&&!h),cursor:a,defaultZ:i,forceUniformSize:h,graphicProperties:l,geometryToPlace:p,geometryType:t,graphicSymbol:this._getGraphicSymbolFromTool(t),hasZ:s,mode:null!==u&&void 0!==u?u:d,snappingManager:this.snappingManager,snapToScene:!1,view:n},e.abrupt("return","2d"===n.type?this._makeDrawGraphicTool2D(v):this._makeDrawGraphicTool3D(v));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"_makeDrawGraphicTool2D",value:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t){var r;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._requireModule(Promise.all([n.e(93463),n.e(17877),n.e(52162),n.e(95537),n.e(11344),n.e(76412),n.e(18320),n.e(29606),n.e(68231)]).then(n.bind(n,10461)));case 2:return r=e.sent,e.abrupt("return",he(r)||this.destroyed?null:new r.module.DrawGraphicTool2D((0,i.Z)((0,i.Z)({},t),{},{activeVertexSymbol:this.activeVertexSymbol,regularVerticesSymbol:this.vertexSymbol,activeLineSymbol:this.activeLineSymbol,activeFillSymbol:se(t.geometryType)?this.activeFillSymbol:null,sketchOptions:this.sketchOptions})));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_makeDrawGraphicTool3D",value:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t){var r,a;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._requireModule(Promise.all([n.e(57808),n.e(93463),n.e(17877),n.e(25158),n.e(89414),n.e(74579),n.e(52162),n.e(69656),n.e(46316),n.e(25269),n.e(30118),n.e(11219),n.e(96026),n.e(10039),n.e(24440),n.e(30734),n.e(97411),n.e(95537),n.e(29950),n.e(76412),n.e(95050),n.e(18320),n.e(29606),n.e(98035),n.e(6599),n.e(63336),n.e(84760)]).then(n.bind(n,63336)));case 2:if(!he(r=e.sent)&&!this.destroyed){e.next=5;break}return e.abrupt("return",null);case 5:return a=this.layer.elevationInfo,e.abrupt("return",new r.module.DrawGraphicTool3D((0,i.Z)((0,i.Z)({},t),{},{elevationInfo:a,snapToScene:!0,sketchOptions:this.sketchOptions})));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_setupCreateOperationHandle",value:function(e){var t=this,n=this.view;if(!n)return this._logMissingView(),null;var r=null,o=e.forceUniformSize,a=e.centered,i=[n.on("key-down",(function(t){if(t.key===U.Sn.pan)t.stopPropagation(),t.repeat||(e.enabled=!1);else if(t.key===U.Sn.complete)t.stopPropagation(),e.completeCreateOperation();else if(t.key!==U.Sn.vertexAdd||t.repeat)t.key===U.Sn.undo?(t.stopPropagation(),s.undo()):t.key===U.Sn.redo?(t.stopPropagation(),s.redo()):t.key!==U.Sn.constraint||"rectangle"!==e.geometryType&&"circle"!==e.geometryType||t.repeat?t.key===U.Sn.center&&(t.repeat||(e.centered=!a,t.stopPropagation())):(e.forceUniformSize=!o,t.stopPropagation());else{var n=e.drawOperation.geometryType;"polyline"!==n&&"polygon"!==n&&"multipoint"!==n||(t.stopPropagation(),e.drawOperation.commitStagedVertex())}}),D.f.WIDGET),n.on("key-up",(function(t){t.key===U.Sn.pan?e.enabled=!0:t.key!==U.Sn.constraint||"rectangle"!==e.geometryType&&"circle"!==e.geometryType?t.key===U.Sn.center&&(e.centered=a,t.stopPropagation()):(e.forceUniformSize=o,t.stopPropagation())}),D.f.WIDGET),e.on("vertex-add",(function(n){switch(r=null==r?"start":"active",n.operation){case"apply":t.emit("create",{graphic:e.graphic,state:r,tool:t.activeTool,toolEventInfo:n,type:"create"});break;case"undo":t._emitUndoEvent({graphics:[e.graphic],tool:e.geometryType});break;case"redo":t._emitRedoEvent({graphics:[e.graphic],tool:e.geometryType})}})),e.on("cursor-update",(function(n){e.drawOperation.numCommittedVertices>0&&t.emit("create",{graphic:e.graphic,state:"active",tool:t.activeTool,toolEventInfo:{coordinates:n.vertices[0].coordinates,type:"cursor-update"},type:"create"})})),e.on("vertex-remove",(function(n){switch(n.operation){case"apply":t.emit("create",{graphic:e.graphic,state:"active",tool:t.activeTool,toolEventInfo:n,type:"create"});break;case"undo":t._emitUndoEvent({graphics:[e.graphic],tool:e.geometryType});break;case"redo":t._emitRedoEvent({graphics:[e.graphic],tool:e.geometryType})}})),e.on("complete",(function(e){t._set("createGraphic",e.graphic),r="complete",e.aborted?s&&s.cancel():s&&s.complete()})),(0,_.watch)((function(){return t._getGraphicSymbolFromTool(e.geometryType)}),(function(t){e.graphicSymbol=t}))],s=new z({activeComponent:e,tool:e.geometryType,type:"create",onEnd:function(){var t;i.forEach((function(e){return e.remove()})),i.length=0,null===(t=n.tools)||void 0===t||t.remove(e)},undo:function(){e.canUndo&&e.undo()},redo:function(){e.canRedo&&e.redo()},canUndo:function(){return e.canUndo},canRedo:function(){return e.canRedo}});return s}},{key:"_getGraphicSymbolFromTool",value:function(e){switch(e){case"point":case"multipoint":return this.pointSymbol;case"polyline":return this.polylineSymbol;case"circle":case"rectangle":case"polygon":return this.polygonSymbol;case"mesh":return this.meshSymbol}}},{key:"_setupUpdateOperation",value:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t,n){var r,a,p,l,u,c,d,h,v,y;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.layer,p=this.view){e.next=3;break}return e.abrupt("return",(this._logMissingView(),null));case 3:l=(0,i.Z)((0,i.Z)((0,i.Z)({},this.defaultUpdateOptions),n),{},{reshapeOptions:(0,i.Z)((0,i.Z)({},this.defaultUpdateOptions.reshapeOptions),null===n||void 0===n?void 0:n.reshapeOptions),highlightOptions:(0,i.Z)((0,i.Z)({},this.defaultUpdateOptions.highlightOptions),null===n||void 0===n?void 0:n.highlightOptions)}),u=null!==(r=l.tool)&&void 0!==r?r:re.tool,c=(0,s.Z)(t);try{for(c.s();!(d=c.n()).done;)h=d.value,a.remove(h),a.add(h)}catch(o){c.e(o)}finally{c.f()}if("3d"!==p.type){e.next=16;break}if(0!==t.length){e.next=10;break}return e.abrupt("return",null);case 10:e.t0=u,e.next="move"===e.t0?13:"reshape"===e.t0?14:"transform"===e.t0?15:16;break;case 13:return e.abrupt("return",this._setupMove3DOperation(t,l,p,u));case 14:return e.abrupt("return",t.length>1?(this._logError("sketch:reshape-multiple","Reshape operation does not support multiple graphics."),null):this._setupReshape3DOperation(t[0],l,p));case 15:return e.abrupt("return",this._setupGraphicTransform3DOperation(t,l,p));case 16:e.t1=u,e.next="move"===e.t1?19:"reshape"===e.t1?20:"transform"===e.t1?21:23;break;case 19:return e.abrupt("return",this._setupMove2DOperation(t,l,p));case 20:return e.abrupt("return",t.length>1?(this._logError("sketch:reshape-multiple","Reshape operation does not support multiple graphics."),null):this._setupTransformOrReshape2DOperation(t,u,l,p));case 21:return 1===t.length&&("point"!==(y=null===(v=t[0].geometry)||void 0===v?void 0:v.type)&&"multipoint"!==y||(u="reshape")),e.abrupt("return",this._setupTransformOrReshape2DOperation(t,u,l,p));case 23:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_setupMove3DOperation",value:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t,i,p,l){var u,c,d,h,v,y,f,g,m,b,_,k,w,E,Z,O=this,G=arguments;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=G.length>4&&void 0!==G[4]&&G[4],e.next=3,this._requireModule(Promise.all([n.e(57808),n.e(93463),n.e(17877),n.e(25158),n.e(89414),n.e(74579),n.e(52162),n.e(69656),n.e(46316),n.e(25269),n.e(30118),n.e(11219),n.e(96026),n.e(10039),n.e(24440),n.e(30734),n.e(97411),n.e(95537),n.e(29950),n.e(76412),n.e(95050),n.e(18320),n.e(29606),n.e(98035),n.e(6599),n.e(63336),n.e(84760)]).then(n.bind(n,63336)));case 3:if(!he(c=e.sent)){e.next=6;break}return e.abrupt("return",c);case 6:d=c.module,h=d.ManipulatedObject3DGraphic,v=d.MoveTool3D,y=new Map,f=function(){y.forEach((function(e){return e.destroy()})),y.clear()},g=(0,s.Z)(t),e.prev=8,g.s();case 10:if((m=g.n()).done){e.next=18;break}if(b=m.value,_=new h({view:p,graphic:b}),(k=(0,x.Y)(_))===C.h.SUPPORTED){e.next=15;break}return e.abrupt("return",(f(),this._logError("sketch:move","Move operation not supported for provided graphic(s) (".concat((0,C.O)(k),").")),null));case 15:y.set(b,_);case 16:e.next=10;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(8),g.e(e.t0);case 23:return e.prev=23,g.f(),e.finish(23);case 26:return w=new v({view:p,enableZ:i.enableZ,snappingManager:this.snappingManager,sketchOptions:this.sketchOptions}),p.tools.add(w),w.objects.addMany(Array.from(y.values())),u||this.updateGraphics.addMany(t),E=[],Z=new J({activeComponent:w,tool:l,type:"update",onEnd:function(){var e;E.forEach((function(e){return e.remove()})),E.length=0,null!==(e=p.tools)&&void 0!==e&&e.remove(w),w.destroyed||w.destroy(),f()},undo:function(){ce(O.view,w),pe(Z,O.updateGraphics.toArray()),O._emitUndoEvent({graphics:O.updateGraphics.toArray(),tool:l})},redo:function(){le(Z,O.updateGraphics.toArray()),O._emitRedoEvent({graphics:O.updateGraphics.toArray(),tool:l})},addToSelection:function(e){O.updateGraphics.push(e);var t=new h({view:p,graphic:e});y.set(e,t),w.objects.push(t),O.emit("update",{graphics:O.updateGraphics.toArray(),state:"active",aborted:!1,tool:O.activeTool,toolEventInfo:{added:[e],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:function(e){var t=O.updateGraphics.indexOf(e);if(Z.history.undo.forEach((function(e){return e.updates.splice(t,1)})),Z.history.redo.forEach((function(e){return e.updates.splice(t,1)})),O.updateGraphics.remove(e),O.emit("update",{graphics:O.updateGraphics.toArray(),state:"active",aborted:!1,tool:O.activeTool,toolEventInfo:{added:[],removed:[e],type:"selection-change"},type:"update"}),0!==O.updateGraphics.length){var n=y.get(e);n&&(w.objects.remove(n),n.destroy(),y.delete(e))}else Z.complete()},toggleTool:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(){var t,n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1===O.updateGraphics.length&&!1!==i.toggleToolOnClick){e.next=2;break}return e.abrupt("return");case 2:if("transform"===l){e.next=4;break}return e.abrupt("return");case 4:return t=O.updateGraphics.at(0),e.next=7,O._setupReshape3DOperation(t,i,p,!0);case 7:(n=e.sent)&&!he(n)&&(Z.onEnd(),Z.destroy(),O._setUpdateOperationHandle(n,i));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),e.abrupt("return",(E.push.apply(E,(0,r.Z)(this._getHandlesForComponent(Z,i)).concat([p.on("immediate-click",(function(e){return O._getCommonUpdateOperationClickHandlers(Z,e,i)}),D.f.WIDGET),p.on("key-down",(function(e){O._getCommonUpdateOperationKeyDownHandlers(Z,e)}),D.f.WIDGET)])),Z));case 30:case"end":return e.stop()}}),e,this,[[8,20,23,26]])})));return function(t,n,r,o){return e.apply(this,arguments)}}()},{key:"_setupGraphicTransform3DOperation",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(1===e.length&&P(e[0])===C.h.SUPPORTED){var o=e[0],a=o.geometry;if(null!=a&&("point"===a.type||"mesh"===a.type))return this._setupPointTransform3DOperation(o,t,n);if(null!=a&&("polygon"===a.type||"polyline"===a.type))return this._setupPolyTransform3DOperation(o,t,n,r)}return this._setupMove3DOperation(e,t,n,"transform",r)}},{key:"_setupPointTransform3DOperation",value:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t,i,s){var p,l,u,c,d,h,v,y,f,g,m,b,_=this;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p="transform",l=i.enableRotation,u=i.enableScaling,c=i.enableZ,e.next=6,this._requireModule(Promise.all([n.e(57808),n.e(93463),n.e(17877),n.e(25158),n.e(89414),n.e(74579),n.e(52162),n.e(69656),n.e(46316),n.e(25269),n.e(30118),n.e(11219),n.e(96026),n.e(10039),n.e(24440),n.e(30734),n.e(97411),n.e(95537),n.e(29950),n.e(76412),n.e(95050),n.e(18320),n.e(29606),n.e(98035),n.e(6599),n.e(63336),n.e(84760)]).then(n.bind(n,63336)));case 6:if(!he(d=e.sent)){e.next=9;break}return e.abrupt("return",d);case 9:return h=d.module,v=h.TransformTool3D,y=h.ManipulatedObject3DGraphic,f=new y({graphic:t,view:s}),g=new v({object:f,view:s,enableRotation:l,enableScaling:u,enableZ:c,snappingManager:this.snappingManager,sketchOptions:this.sketchOptions}),s.tools.add(g),this.updateGraphics.add(t),m=[],b=new J({activeComponent:g,tool:p,type:"update",onEnd:function(){var e;m.forEach((function(e){return e.remove()})),m.length=0,null!==(e=s.tools)&&void 0!==e&&e.remove(g),g.destroyed||g.destroy(),f.destroy()},undo:function(){ce(_.view,g),pe(b,_.updateGraphics.toArray()),_._emitUndoEvent({graphics:_.updateGraphics.toArray(),tool:p})},redo:function(){le(b,_.updateGraphics.toArray()),_._emitRedoEvent({graphics:_.updateGraphics.toArray(),tool:p})},addToSelection:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t){var n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _.updateGraphics.add(t),_.emit("update",{graphics:_.updateGraphics.toArray(),state:"active",aborted:!1,tool:_.activeTool,toolEventInfo:{added:[t],removed:[],type:"selection-change"},type:"update"}),b.onEnd(),b.destroy(),e.next=3,_._setupMove3DOperation(_.updateGraphics.toArray(),i,s,"transform",!0);case 3:he(n=e.sent)||_._setUpdateOperationHandle(n,i);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),removeFromSelection:function(e){_.updateGraphics.remove(e),_.emit("update",{graphics:_.updateGraphics.toArray(),state:"active",aborted:!1,tool:_.activeTool,toolEventInfo:{added:[],removed:[e],type:"selection-change"},type:"update"}),b.complete()},toggleTool:function(){}}),e.abrupt("return",(m.push.apply(m,(0,r.Z)(this._getHandlesForComponent(b,i)).concat([s.on("immediate-click",(function(e){return _._getCommonUpdateOperationClickHandlers(b,e,i)}),D.f.WIDGET),s.on("key-down",(function(e){_._getCommonUpdateOperationKeyDownHandlers(b,e)}),D.f.WIDGET)])),b));case 13:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"_setupPolyTransform3DOperation",value:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t,i,s){var p,l,u,c,d,h,v,y,f,g,m,b,_,k,w,E,Z,O=this,G=arguments;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=G.length>3&&void 0!==G[3]&&G[3],c="transform",d=i.enableRotation,h=i.enableScaling,v=i.enableZ,y=i.preserveAspectRatio,e.next=8,this._requireModule(Promise.all([n.e(57808),n.e(93463),n.e(17877),n.e(25158),n.e(89414),n.e(74579),n.e(52162),n.e(69656),n.e(46316),n.e(25269),n.e(30118),n.e(11219),n.e(96026),n.e(10039),n.e(24440),n.e(30734),n.e(97411),n.e(95537),n.e(29950),n.e(76412),n.e(95050),n.e(18320),n.e(29606),n.e(98035),n.e(6599),n.e(63336),n.e(84760)]).then(n.bind(n,63336)));case 8:if(!he(f=e.sent)){e.next=11;break}return e.abrupt("return",f);case 11:return g=f.module,m=g.ManipulatedObject3DGraphic,b=g.ExtentTransformTool,_=null===(p=this.view)||void 0===p||null===(l=p.inputManager)||void 0===l?void 0:l.isModifierKeyDown(U.Sn.constraint),k=new m({view:s,graphic:t}),w=new b({object:k,view:s,enableRotation:d,enableScaling:h,enableZ:v,preserveAspectRatio:!!y!=!!_,sketchOptions:this.sketchOptions}),s.tools.add(w),u||this.updateGraphics.add(t),E=[],Z=new J({activeComponent:w,tool:c,type:"update",onEnd:function(){var e;E.forEach((function(e){return e.remove()})),E.length=0,null!==(e=s.tools)&&void 0!==e&&e.remove(w),w.destroyed||w.destroy(),k.destroy()},canUndo:function(){return w.canUndo},undo:function(){w.undo(),O._emitUndoEvent({graphics:O.updateGraphics.toArray(),tool:c})},canRedo:function(){return w.canRedo},redo:function(){w.redo(),O._emitRedoEvent({graphics:O.updateGraphics.toArray(),tool:c})},addToSelection:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t){var n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O.updateGraphics.add(t),O.emit("update",{graphics:O.updateGraphics.toArray(),state:"active",aborted:!1,tool:O.activeTool,toolEventInfo:{added:[t],removed:[],type:"selection-change"},type:"update"}),Z.onEnd(),Z.destroy(),e.next=3,O._setupMove3DOperation(O.updateGraphics.toArray(),i,s,"transform",!0);case 3:he(n=e.sent)||O._setUpdateOperationHandle(n,i);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),removeFromSelection:function(e){O.updateGraphics.remove(e),O.emit("update",{graphics:O.updateGraphics.toArray(),state:"active",aborted:!1,tool:O.activeTool,toolEventInfo:{added:[],removed:[e],type:"selection-change"},type:"update"}),Z.complete()},toggleTool:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(){var n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1===O.updateGraphics.length&&!1!==i.toggleToolOnClick){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,O._setupReshape3DOperation(t,i,s,!0);case 4:(n=e.sent)&&!he(n)&&(Z.onEnd(),Z.destroy(),O._setUpdateOperationHandle(n,i));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),e.abrupt("return",(E.push.apply(E,(0,r.Z)(this._getHandlesForComponent(Z,i)).concat([s.on("immediate-click",(function(e){return O._getCommonUpdateOperationClickHandlers(Z,e,i)}),D.f.WIDGET),s.on("key-down",(function(e){return O._getCommonUpdateOperationKeyDownHandlers(Z,e)}),D.f.WIDGET),s.on("key-down",(function(e){e.key!==U.Sn.constraint||e.repeat||(w.preserveAspectRatio=!w.preserveAspectRatio,e.stopPropagation())}),D.f.WIDGET),s.on("key-up",(function(e){e.key===U.Sn.constraint&&(w.preserveAspectRatio=!w.preserveAspectRatio,e.stopPropagation())}),D.f.WIDGET)])),Z));case 15:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"_setupMove2DOperation",value:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t,n,i){var s,p,l,u,c,d,h=this;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s="move",this.updateGraphics.addMany(t),e.next=4,this._updateSpatialReference(t);case 4:return e.next=6,this._getGraphicMover(t,n,i);case 6:if(!he(p=e.sent)){e.next=9;break}return e.abrupt("return",p);case 9:return l=new J({activeComponent:p,tool:s,type:"update",onEnd:function(){var e;h._displayDefaultCursor(),d.forEach((function(e){return e.remove()})),c.forEach((function(e){return e.remove()})),d=[],c=[],p.destroy(),null===(e=h._internalGraphicsLayer)||void 0===e||e.removeMany((0,r.Z)(h.updateGraphics.toArray()))},undo:function(){var e=h.updateGraphics.toArray();pe(l,e),l.refreshComponent(),h._emitUndoEvent({graphics:e,tool:s})},redo:function(){var e=h.updateGraphics.toArray();le(l,e),l.refreshComponent(),h._emitRedoEvent({graphics:e,tool:s})},addToSelection:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h._updateSpatialReference(t);case 2:h.updateGraphics.push(t),p.graphics=h.updateGraphics.toArray(),h.emit("update",{graphics:h.updateGraphics.toArray(),state:"active",aborted:!1,tool:h.activeTool,toolEventInfo:{added:[t],removed:[],type:"selection-change"},type:"update"});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),removeFromSelection:function(e){var t=h.updateGraphics.indexOf(e);l.history.undo.forEach((function(e){return e.updates.splice(t,1)})),l.history.redo.forEach((function(e){return e.updates.splice(t,1)})),h.updateGraphics.remove(e);var n=h.updateGraphics.toArray();h.emit("update",{graphics:n,state:"active",aborted:!1,tool:h.activeTool,toolEventInfo:{added:[],removed:[e],type:"selection-change"},type:"update"}),0!==h.updateGraphics.length?p.graphics=n:l.complete()}}),u=!1,c=[i.on("immediate-click",(function(e){return h._getCommonUpdateOperationClickHandlers(l,e,n)}),D.f.WIDGET),i.on("key-down",(function(e){h._getCommonUpdateOperationKeyDownHandlers(l,e),e.key!==U.Sn.constraint||e.repeat||(u=!0,p.enableMoveAllGraphics=!p.enableMoveAllGraphics)}),D.f.WIDGET),i.on("key-up",(function(e){e.key===U.Sn.constraint&&u&&(u=!1,p.enableMoveAllGraphics=!p.enableMoveAllGraphics)}),D.f.WIDGET)],d=this._getHandlesForComponent(l,n),e.abrupt("return",l);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"_setupReshape3DOperation",value:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t,i,s){var p,l,u,c,d,h,v,y,f,g,m,b,_=this,k=arguments;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p=k.length>3&&void 0!==k[3]&&k[3],l="reshape",e.next=4,this._requireModule(Promise.all([n.e(57808),n.e(93463),n.e(17877),n.e(25158),n.e(89414),n.e(74579),n.e(52162),n.e(69656),n.e(46316),n.e(25269),n.e(30118),n.e(11219),n.e(96026),n.e(10039),n.e(24440),n.e(30734),n.e(97411),n.e(95537),n.e(29950),n.e(76412),n.e(95050),n.e(18320),n.e(29606),n.e(98035),n.e(6599),n.e(63336),n.e(84760)]).then(n.bind(n,63336)));case 4:if(!he(u=e.sent)){e.next=7;break}return e.abrupt("return",u);case 7:if(c=u.module,d=c.ManipulatedObject3DGraphic,h=c.ReshapeTool3D,v=new d({view:s,graphic:t}),(y=A(v))===C.h.SUPPORTED){e.next=10;break}return e.abrupt("return",(v.destroy(),this._logError("sketch:reshape","Reshape operation not supported for provided graphic(s) (".concat((0,C.O)(y),").")),null));case 10:return f=i.reshapeOptions,g=new h({view:s,object:v,enableZVertex:i.enableZ&&"move"===(null===f||void 0===f?void 0:f.vertexOperation),enableZShape:i.enableZ&&"move"===(null===f||void 0===f?void 0:f.shapeOperation),enableMoveObject:"move"===(null===f||void 0===f?void 0:f.shapeOperation)||"move-xy"===(null===f||void 0===f?void 0:f.shapeOperation),enableMidpoints:"split"===(null===f||void 0===f?void 0:f.edgeOperation),enableEdgeOffset:"offset"===(null===f||void 0===f?void 0:f.edgeOperation),snappingManager:this.snappingManager,sketchOptions:this.sketchOptions}),s.tools.add(g),p||this.updateGraphics.add(v.graphic),m=[],b=new J({activeComponent:g,tool:l,type:"update",onEnd:function(){var e;m.forEach((function(e){return e.remove()})),m.length=0,null!==(e=s.tools)&&void 0!==e&&e.remove(g),g.destroyed||g.destroy(),v.destroy()},canUndo:function(){return g.canUndo},undo:function(){g.undo(),_._emitUndoEvent({graphics:_.updateGraphics.toArray(),tool:l})},canRedo:function(){return g.canRedo},redo:function(){g.redo(),_._emitRedoEvent({graphics:_.updateGraphics.toArray(),tool:l})},addToSelection:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t){var n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _.updateGraphics.add(t),_.emit("update",{graphics:_.updateGraphics.toArray(),state:"active",aborted:!1,tool:_.activeTool,toolEventInfo:{added:[t],removed:[],type:"selection-change"},type:"update"}),b.onEnd(),b.destroy(),e.next=3,_._setupMove3DOperation(_.updateGraphics.toArray(),i,s,"transform",!0);case 3:he(n=e.sent)||_._setUpdateOperationHandle(n,i);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),removeFromSelection:function(e){_.updateGraphics.remove(e),_.emit("update",{graphics:_.updateGraphics.toArray(),state:"active",aborted:!1,tool:_.activeTool,toolEventInfo:{added:[],removed:[e],type:"selection-change"},type:"update"}),b.complete()},toggleTool:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(){var t;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!1!==i.toggleToolOnClick){e.next=2;break}return e.abrupt("return");case 2:return b.onEnd(),b.destroy(),e.next=5,_._setupGraphicTransform3DOperation(_.updateGraphics.toArray(),i,s,!0);case 5:he(t=e.sent)||_._setUpdateOperationHandle(t,i);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),e.abrupt("return",(m.push.apply(m,(0,r.Z)(this._getHandlesForComponent(b,i)).concat([s.on("immediate-click",(function(e){return _._getCommonUpdateOperationClickHandlers(b,e,i)}),D.f.WIDGET),s.on("key-down",(function(e){_._getCommonUpdateOperationKeyDownHandlers(b,e)}),D.f.WIDGET)])),b));case 14:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"_setupTransformOrReshape2DOperation",value:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t,n,i,s){var p,l,u,c,d=this;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.updateGraphics.addMany(t),e.next=3,this._updateSpatialReference(t);case 3:if("transform"!==n){e.next=9;break}return e.next=6,this._getBox(t,i,s);case 6:e.t0=e.sent,e.next=12;break;case 9:return e.next=11,this._getReshape(t,i,s);case 11:e.t0=e.sent;case 12:if(!he(p=e.t0)){e.next=15;break}return e.abrupt("return",p);case 15:return l=new J({activeComponent:p,type:"update",onEnd:function(){c.forEach((function(e){return e.remove()})),u.forEach((function(e){return e.remove()})),c=[],u=[],l.activeComponent&&!l.activeComponent.destroyed&&l.activeComponent.destroy(),d._internalGraphicsLayer.removeMany(d.updateGraphics.toArray())},undo:function(){pe(l,d.updateGraphics.toArray()),l.refreshComponent(),d._emitUndoEvent({graphics:d.updateGraphics.toArray(),tool:l.tool})},redo:function(){le(l,d.updateGraphics.toArray()),l.refreshComponent(),d._emitRedoEvent({graphics:d.updateGraphics.toArray(),tool:l.tool})},addToSelection:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t){var n,a,p;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("reshape"!==(null===(n=l.activeComponent)||void 0===n?void 0:n.type)){e.next=12;break}return a=[].concat((0,r.Z)(d.updateGraphics),[t]),d.updateGraphics.removeAll(),l.onEnd(),l.destroy(),e.next=6,d._setupTransformOrReshape2DOperation(a,"transform",i,s);case 6:if(!he(p=e.sent)){e.next=9;break}return e.abrupt("return");case 9:d._setUpdateOperationHandle(p,i),e.next=13;break;case 12:d.updateGraphics.add(t),n.graphics=d.updateGraphics.toArray(),n.refresh(),l.resetHistory();case 13:d.emit("update",{graphics:d.updateGraphics.toArray(),state:"active",aborted:!1,tool:d.activeTool,toolEventInfo:{added:[t],removed:[],type:"selection-change"},type:"update"});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),removeFromSelection:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t){var n,r,a;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=d.updateGraphics.indexOf(t),l.history.undo.forEach((function(e){return e.updates.splice(n,1)})),l.history.redo.forEach((function(e){return e.updates.splice(n,1)})),d.updateGraphics.remove(t),0===(r=d.updateGraphics.toArray()).length?l.complete():(a=r[0].geometry,1!==r.length||null==a||"point"!==a.type&&"multipoint"!==a.type?l.activeComponent.graphics=r:l.toggleTool()),d.emit("update",{graphics:r,state:"active",aborted:!1,tool:d.activeTool,toolEventInfo:{added:[],removed:[t],type:"selection-change"},type:"update"});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),toggleTool:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(){var t,n,r,a;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(d.updateGraphics.length>1)){e.next=2;break}return e.abrupt("return");case 2:if(n=d.updateGraphics.at(0),null==(r=n.geometry)||("reshape"!==l.tool||"point"!==r.type&&"multipoint"!==r.type)&&("transform"!==l.tool||"extent"!==r.type)){e.next=5;break}return e.abrupt("return");case 5:if(a=null,"transform"!==l.tool){e.next=12;break}return e.next=9,d._getReshape([n],i,s);case 9:a=e.sent,e.next=17;break;case 12:if(e.t0="reshape"===l.tool,!e.t0){e.next=17;break}return e.next=16,d._getBox([n],i,s);case 16:a=e.sent;case 17:he(a)||(null!==(t=l.activeComponent)&&void 0!==t&&t.destroy(),l.activeComponent=a,l.activeComponent&&(c.forEach((function(e){return e.remove()})),c=d._getHandlesForComponent(l,i)));case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),u=[s.on("immediate-click",(function(e){return d._getCommonUpdateOperationClickHandlers(l,e,i)}),D.f.WIDGET),s.on("key-down",(function(e){if(d._getCommonUpdateOperationKeyDownHandlers(l,e),e.key===U.Sn.constraint&&!e.repeat&&l){var t=l.activeComponent;t&&"box"===t.type&&(t.preserveAspectRatio=!t.preserveAspectRatio)}}),D.f.WIDGET),s.on("key-up",(function(e){if(e.key===U.Sn.constraint&&l){var t=l.activeComponent;t&&"box"===t.type&&(t.preserveAspectRatio=!t.preserveAspectRatio)}}),D.f.WIDGET)],c=this._getHandlesForComponent(l,i),e.abrupt("return",l);case 18:case"end":return e.stop()}}),e,this)})));return function(t,n,r,o){return e.apply(this,arguments)}}()},{key:"_getGraphicMover",value:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t,r,a){var i,s,p,l=this;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=r.enableMoveAllGraphics,s=r.highlightOptions,e.next=4,this._requireModule(Promise.all([n.e(54557),n.e(45276),n.e(56593),n.e(2346)]).then(n.bind(n,53503)));case 4:return p=e.sent,e.abrupt("return",he(p)?p:new p.module.default({enableMoveAllGraphics:i,highlightsEnabled:!(null===s||void 0===s||!s.enabled),indicatorsEnabled:!1,graphics:t,view:a,callbacks:{onGraphicMoveStart:function(e){var t=e.dx,n=e.dy,r=e.graphic;l._displayGrabbingCursor(),l.emit("update",{graphics:l.updateGraphics.toArray(),state:"active",aborted:!1,tool:l.activeTool,toolEventInfo:{dx:t,dy:n,mover:r,type:"move-start"},type:"update"})},onGraphicMove:function(e){var t=e.dx,n=e.dy,r=e.graphic;return l.emit("update",{graphics:l.updateGraphics.toArray(),state:"active",aborted:!1,tool:l.activeTool,toolEventInfo:{dx:t,dy:n,mover:r,type:"move"},type:"update"})},onGraphicMoveStop:function(e){var t=e.dx,n=e.dy,r=e.graphic;l._displayPointerCursor(),l.emit("update",{graphics:l.updateGraphics.toArray(),state:"active",aborted:!1,tool:l.activeTool,toolEventInfo:{dx:t,dy:n,mover:r,type:"move-stop"},type:"update"})},onGraphicPointerOver:function(){return l._displayPointerCursor()},onGraphicPointerOut:function(){return l._displayDefaultCursor()}}}));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"_getBox",value:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t,r,a){var s,p,l,u,c,d,h,v,y=this;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=r.enableRotation,u=r.enableScaling,c=r.highlightOptions,d=r.preserveAspectRatio,e.next=6,this._requireModule(Promise.all([n.e(54557),n.e(45276),n.e(76412),n.e(56593),n.e(97520)]).then(n.bind(n,96306)));case 6:if(!he(h=e.sent)){e.next=9;break}return e.abrupt("return",h);case 9:return v=null===(s=this.view)||void 0===s||null===(p=s.inputManager)||void 0===p?void 0:p.isModifierKeyDown(U.Sn.constraint),e.abrupt("return",new h.module.default({graphics:t,enableRotation:l,enableScaling:u,highlightsEnabled:!(null===c||void 0===c||!c.enabled),preserveAspectRatio:!!d!=!!v,layer:this._internalGraphicsLayer,view:a,sketchOptions:this.sketchOptions,callbacks:{onMoveStart:function(e){return y.emit("update",{graphics:y.updateGraphics.toArray(),state:"active",aborted:!1,tool:y.activeTool,toolEventInfo:(0,i.Z)({},e),type:"update"})},onMove:function(e){return y.emit("update",{graphics:y.updateGraphics.toArray(),state:"active",aborted:!1,tool:y.activeTool,toolEventInfo:(0,i.Z)({},e),type:"update"})},onMoveStop:function(e){return y.emit("update",{graphics:y.updateGraphics.toArray(),state:"active",aborted:!1,tool:y.activeTool,toolEventInfo:(0,i.Z)({},e),type:"update"})},onScaleStart:function(e){return y.emit("update",{graphics:y.updateGraphics.toArray(),state:"active",aborted:!1,tool:y.activeTool,toolEventInfo:(0,i.Z)({},e),type:"update"})},onScale:function(e){return y.emit("update",{graphics:y.updateGraphics.toArray(),state:"active",aborted:!1,tool:y.activeTool,toolEventInfo:(0,i.Z)({},e),type:"update"})},onScaleStop:function(e){return y.emit("update",{graphics:y.updateGraphics.toArray(),state:"active",aborted:!1,tool:y.activeTool,toolEventInfo:(0,i.Z)({},e),type:"update"})},onRotateStart:function(e){return y.emit("update",{graphics:y.updateGraphics.toArray(),state:"active",aborted:!1,tool:y.activeTool,toolEventInfo:(0,i.Z)({},e),type:"update"})},onRotate:function(e){return y.emit("update",{graphics:y.updateGraphics.toArray(),state:"active",aborted:!1,tool:y.activeTool,toolEventInfo:(0,i.Z)({},e),type:"update"})},onRotateStop:function(e){return y.emit("update",{graphics:y.updateGraphics.toArray(),state:"active",aborted:!1,tool:y.activeTool,toolEventInfo:(0,i.Z)({},e),type:"update"})}}}));case 11:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"_getReshape",value:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t,r,a){var s,p,l,u,c,d,h,v=this;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u="split"===(null===(s=r.reshapeOptions)||void 0===s?void 0:s.edgeOperation),c="move"===(null===(p=r.reshapeOptions)||void 0===p?void 0:p.shapeOperation),d=!(null===(l=r.highlightOptions)||void 0===l||!l.enabled),e.next=5,this._requireModule(Promise.all([n.e(54557),n.e(17877),n.e(45276),n.e(11344),n.e(76412),n.e(18320),n.e(56593),n.e(21412)]).then(n.bind(n,19284)));case 5:return h=e.sent,e.abrupt("return",he(h)?h:new h.module.default({enableMidpoints:u,enableMovement:c,graphic:t[0],highlightsEnabled:d,layer:this._internalGraphicsLayer,snappingManager:this.snappingManager,sketchOptions:this.sketchOptions,view:a,callbacks:{onReshapeStart:function(e){return v.emit("update",{graphics:v.updateGraphics.toArray(),state:"active",aborted:!1,tool:v.activeTool,toolEventInfo:(0,i.Z)({},e),type:"update"})},onReshape:function(e){return v.emit("update",{graphics:v.updateGraphics.toArray(),state:"active",aborted:!1,tool:v.activeTool,toolEventInfo:(0,i.Z)({},e),type:"update"})},onReshapeStop:function(e){var t=e.mover,n=e.type;return v.emit("update",{graphics:v.updateGraphics.toArray(),state:"active",aborted:!1,tool:v.activeTool,toolEventInfo:{mover:t,type:n},type:"update"})},onMoveStart:function(e){var t=e.dx,n=e.dy,r=e.mover,o=e.type;return v.emit("update",{graphics:v.updateGraphics.toArray(),state:"active",aborted:!1,tool:v.activeTool,toolEventInfo:{dx:t,dy:n,mover:r,type:o},type:"update"})},onMove:function(e){var t=e.dx,n=e.dy,r=e.mover,o=e.type;return v.emit("update",{graphics:v.updateGraphics.toArray(),state:"active",aborted:!1,tool:v.activeTool,toolEventInfo:{dx:t,dy:n,mover:r,type:o},type:"update"})},onMoveStop:function(e){var t=e.dx,n=e.dy,r=e.mover,o=e.type;return v.emit("update",{graphics:v.updateGraphics.toArray(),state:"active",aborted:!1,tool:v.activeTool,toolEventInfo:{dx:t,dy:n,mover:r,type:o},type:"update"})},onVertexAdd:function(e){var t=e.added,n=e.type,r=e.vertices,o=t.map((function(e){return(0,O.nA)(e.geometry)}));v.emit("update",{graphics:v.updateGraphics.toArray(),state:"active",aborted:!1,tool:v.activeTool,toolEventInfo:{added:o,vertices:r,type:n},type:"update"})},onVertexRemove:function(e){var t=e.removed,n=e.type,r=e.vertices,o=t.map((function(e){return(0,O.nA)(e.geometry)}));v.emit("update",{graphics:v.updateGraphics.toArray(),state:"active",aborted:!1,tool:v.activeTool,toolEventInfo:{removed:o,vertices:r,type:n},type:"update"})}}}));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"_getHandlesForComponent",value:function(e,t){var n=this,r=e.activeComponent;if(!r)return[];switch(r.type){case"graphic-mover":return[r.on("graphic-click",(function(t){var n,r=t.graphic,o=t.viewEvent;(null===(n=o.native)||void 0===n?void 0:n.shiftKey)&&(o.stopPropagation(),e.removeFromSelection(r))})),r.on("graphic-move-start",(function(t){return e.addToHistory(de(t.allGraphics))}))];case"box":return[r.on("graphic-click",(function(r){return n._onTransformOrReshape2DGraphicClick(e,t,r)})),r.on("move-start",(function(t){return e.addToHistory(de(t.graphics))})),r.on("rotate-start",(function(t){return e.addToHistory(de(t.graphics))})),r.on("scale-start",(function(t){return e.addToHistory(de(t.graphics))}))];case"reshape":return[r.on("graphic-click",(function(r){return n._onTransformOrReshape2DGraphicClick(e,t,r)})),r.on("move-start",(function(t){return e.addToHistory(de([t.mover]))})),r.on("reshape-start",(function(t){return e.addToHistory(de([t.graphic]))})),r.on("vertex-add",(function(t){return e.addToHistory(de([t.oldGraphic]))})),r.on("vertex-remove",(function(t){return e.addToHistory(de([t.oldGraphic]))}))];case"move-3d":return[r.events.on("record-undo",(function(t){var n=t.updates;e.addToHistory({updates:n})})),r.events.on("move-start",(function(e){n.emit("update",{graphics:n.updateGraphics.toArray(),state:"active",aborted:!1,tool:n.activeTool,toolEventInfo:{dx:0,dy:0,mover:e.objects.length>0?e.objects[0].graphic:null,type:"move-start"},type:"update"})})),r.events.on("move",(function(e){n.emit("update",{graphics:n.updateGraphics.toArray(),state:"active",aborted:!1,tool:n.activeTool,toolEventInfo:{dx:e.dx,dy:e.dy,mover:e.objects.length>0?e.objects[0].graphic:null,type:"move"},type:"update"})})),r.events.on("move-stop",(function(e){n.emit("update",{graphics:n.updateGraphics.toArray(),state:"active",aborted:!1,tool:n.activeTool,toolEventInfo:{dx:0,dy:0,mover:e.objects.length>0?e.objects[0].graphic:null,type:"move-stop"},type:"update"})})),r.events.on("immediate-click",(function(r){r.shiftKey?n._toggleSelection([r.object.graphic],e,t):e.toggleTool()}))];case"transform-3d":return[r.events.on("record-undo",(function(t){var n=t.updates;e.addToHistory({updates:n})})),r.events.on("translate-start",(function(e){n.emit("update",{graphics:n.updateGraphics.toArray(),state:"active",aborted:!1,tool:n.activeTool,toolEventInfo:{mover:e.object.graphic,dx:e.dxScreen,dy:e.dyScreen,type:"move-start"},type:"update"})})),r.events.on("translate-stop",(function(e){n.emit("update",{graphics:n.updateGraphics.toArray(),state:"active",aborted:!1,tool:n.activeTool,toolEventInfo:{mover:e.object.graphic,dx:e.dxScreen,dy:e.dyScreen,type:"move-stop"},type:"update"})})),r.events.on("rotate-start",(function(e){n.emit("update",{graphics:n.updateGraphics.toArray(),state:"active",aborted:!1,tool:n.activeTool,toolEventInfo:{mover:e.object.graphic,angle:e.angle,type:"rotate-start"},type:"update"})})),r.events.on("rotate-stop",(function(e){n.emit("update",{graphics:n.updateGraphics.toArray(),state:"active",aborted:!1,tool:n.activeTool,toolEventInfo:{mover:e.object.graphic,angle:e.angle,type:"rotate-stop"},type:"update"})})),r.events.on("scale-start",(function(e){n.emit("update",{graphics:n.updateGraphics.toArray(),state:"active",aborted:!1,tool:n.activeTool,toolEventInfo:{mover:e.object.graphic,xScale:e.xScale,yScale:e.yScale,type:"scale-start"},type:"update"})})),r.events.on("scale-stop",(function(e){n.emit("update",{graphics:n.updateGraphics.toArray(),state:"active",aborted:!1,tool:n.activeTool,toolEventInfo:{mover:e.object.graphic,xScale:e.xScale,yScale:e.yScale,type:"scale-stop"},type:"update"})})),r.events.on("translate",(function(e){n.emit("update",{graphics:n.updateGraphics.toArray(),state:"active",aborted:!1,tool:n.activeTool,toolEventInfo:{mover:e.object.graphic,dx:e.dxScreen,dy:e.dyScreen,type:"move"},type:"update"})})),r.events.on("rotate",(function(e){n.emit("update",{graphics:n.updateGraphics.toArray(),state:"active",aborted:!1,tool:n.activeTool,toolEventInfo:{mover:e.object.graphic,angle:e.angle,type:"rotate"},type:"update"})})),r.events.on("scale",(function(e){n.emit("update",{graphics:n.updateGraphics.toArray(),state:"active",aborted:!1,tool:n.activeTool,toolEventInfo:{mover:e.object.graphic,xScale:e.xScale,yScale:e.yScale,type:"scale"},type:"update"})})),r.events.on("immediate-click",(function(r){r.shiftKey?n._toggleSelection([r.object.graphic],e,t):e.toggleTool()}))];case"reshape-3d":return[r.events.on("reshape",(function(e){n.emit("update",{graphics:n.updateGraphics.toArray(),state:"active",aborted:!1,tool:n.activeTool,toolEventInfo:(0,i.Z)((0,i.Z)({},e),{},{mover:e.object.graphic}),type:"update"})})),r.events.on("move",(function(e){n.emit("update",{graphics:n.updateGraphics.toArray(),state:"active",aborted:!1,tool:n.activeTool,toolEventInfo:(0,i.Z)((0,i.Z)({},e),{},{mover:e.object.graphic}),type:"update"})})),r.events.on("vertex-add",(function(e){n.emit("update",{graphics:n.updateGraphics.toArray(),state:"active",aborted:!1,tool:n.activeTool,toolEventInfo:e,type:"update"})})),r.events.on("vertex-remove",(function(e){n.emit("update",{graphics:n.updateGraphics.toArray(),state:"active",aborted:!1,tool:n.activeTool,toolEventInfo:e,type:"update"})})),r.events.on("immediate-click",(function(r){r.shiftKey?n._toggleSelection([r.object.graphic],e,t):e.toggleTool()}))]}}},{key:"_onTransformOrReshape2DGraphicClick",value:function(e,t,n){var r,o=n.graphic,a=n.viewEvent;return null!==(r=a.native)&&void 0!==r&&r.shiftKey&&o.layer===this.layer?(a.stopPropagation(),e.removeFromSelection(o)):t.toggleToolOnClick?(a.stopPropagation(),e.toggleTool()):void 0}},{key:"_setUpdateOperationHandle",value:function(e,t){var n,r=this;this._operationHandle=e;var o=null===(n=this.view)||void 0===n?void 0:n.map;this._disablePopup(t);e.on("complete",(function(){if(e===r._operationHandle){var n=r.updateGraphics.toArray(),a=r._operationHandle.tool;r._operationHandle.destroy(),r._operationHandle=null,r._internalGraphicsLayer.removeMany(r.updateGraphics.toArray()),r.updateGraphics.removeAll(),o&&o.remove(r._internalGraphicsLayer),r._restorePopup(t),r.emit("update",{graphics:n,state:"complete",aborted:e.cancelled,tool:a,toolEventInfo:null,type:"update"})}}))}},{key:"_getCommonUpdateOperationClickHandlers",value:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t,n,r){var a,i,s=this;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(0,K.vT)(n),e.next=3,n.async((function(){return s._getFirstHit(a)}));case 3:if(null!=(i=e.sent)){e.next=6;break}return e.abrupt("return",void t.complete());case 6:if(!n.native.shiftKey||!this._toggleSelection([i.graphic],t,r)){e.next=8;break}return e.abrupt("return",void n.stopPropagation());case 8:this.updateGraphics.includes(i.graphic)?n.stopPropagation():t.complete();case 9:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"_toggleSelection",value:function(e,t,n){var r=this,o=!!n.multipleSelectionEnabled;return e.some((function(e){return null!=e&&!(!o||e.layer!==r.layer)&&(r.updateGraphics.includes(e)?t.removeFromSelection(e):t.addToSelection(e),!0)}))}},{key:"_getCommonUpdateOperationKeyDownHandlers",value:function(e,t){if(e){var n=t.key;n===U.Sn.undo&&e.canUndo()?(t.stopPropagation(),e.undo()):n===U.Sn.redo&&e.canRedo()?(t.stopPropagation(),e.redo()):n===U.Sn.cancel?(t.stopPropagation(),e.cancel()):this.allowDeleteKey&&U.Sn.delete.includes(n)&&this._onDeleteKey(t)}}},{key:"_onDeleteKey",value:function(e){var t;if(this._operationHandle&&"update"===this._operationHandle.type){var n=this.activeComponent,r=this.updateGraphics.toArray();null!=n&&("reshape"!==n.type||1===r.length&&"point"===(null===(t=r[0].geometry)||void 0===t?void 0:t.type))&&(e.stopPropagation(),this.delete())}}},{key:"_removeDefaultLayer",value:function(){var e,t;this._internalGraphicsLayer&&(null!==(e=this.view)&&void 0!==e&&null!==(t=e.map)&&void 0!==t&&t.remove(this._internalGraphicsLayer),this._internalGraphicsLayer=(0,m.SC)(this._internalGraphicsLayer))}},{key:"_isComponentGraphic",value:function(e){var t,n=this.activeComponent;return!(!e||null==n)&&((null===(t=e.attributes)||void 0===t?void 0:t.esriSketchTool)||"draw-2d"===n.type&&n.graphic===e||("box"===n.type||"reshape"===n.type)&&n.isUIGraphic(e))}},{key:"_displayPointerCursor",value:function(){var e;(null===(e=this.view)||void 0===e?void 0:e.container)&&"pointer"!==this.view.cursor&&(this.view.cursor="pointer")}},{key:"_displayGrabbingCursor",value:function(){var e;(null===(e=this.view)||void 0===e?void 0:e.container)&&"grabbing"!==this.view.cursor&&(this.view.cursor="grabbing")}},{key:"_displayDefaultCursor",value:function(){var e;(null===(e=this.view)||void 0===e?void 0:e.container)&&null!==this.view.cursor&&(this.view.cursor=null)}},{key:"_logError",value:function(e,t,n){g.Z.getLogger(this).error(new y.Z(e,t,n))}},{key:"_requireModule",value:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t){var n,r;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new AbortController,this._moduleLoaderAbortController=n,e.next=4,t;case 4:return r=e.sent,e.abrupt("return",this._moduleLoaderAbortController!==n||n.signal.aborted?{requireError:"aborted"}:{module:r});case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_emitUndoEvent",value:function(e){this.emit("undo",(0,i.Z)((0,i.Z)({},e),{},{type:"undo"}))}},{key:"_emitRedoEvent",value:function(e){this.emit("redo",(0,i.Z)((0,i.Z)({},e),{},{type:"redo"}))}},{key:"_emitDeleteEvent",value:function(e){this.emit("delete",(0,i.Z)((0,i.Z)({},e),{},{type:"delete"}))}},{key:"test",get:function(){}},{key:"wait",value:function(){var e=this;return(0,_.whenOnce)((function(){return!e.updating}))}},{key:"_beginAsyncOperation",value:function(){this._numUpdating+=1,this.notifyChange("updating")}},{key:"_endAsyncOperation",value:function(){this._numUpdating-=1,this.notifyChange("updating")}},{key:"_disablePopupEnabled",value:function(e){var t,n;return"3d"!==(null===(t=this.view)||void 0===t?void 0:t.type)||this.updateOnGraphicClick||null!==(n=null===e||void 0===e?void 0:e.toggleToolOnClick)&&void 0!==n&&n}},{key:"_disablePopup",value:function(e){this._disablePopupEnabled(e)&&this.view&&null==this._originalPopupEnabled&&(this._originalPopupEnabled=this.view.popupEnabled,this.view.popupEnabled=!1)}},{key:"_restorePopup",value:function(e){this._disablePopupEnabled(e)&&this.view&&null!=this._originalPopupEnabled&&(this.view.popupEnabled=this._originalPopupEnabled,this._originalPopupEnabled=null)}},{key:"_waitViewReady",value:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(){var t;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.view)){e.next=8;break}return(0,m.IM)(this._viewReadyAbortController),this._viewReadyAbortController=new AbortController,e.next=6,(0,b.Hl)((0,_.whenOnce)((function(){return null===t||void 0===t?void 0:t.ready})),this._viewReadyAbortController.signal);case 6:e.next=9;break;case 8:this._logMissingView();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_logMissingView",value:function(){this._logError("sketch:missing-property",ie("view"))}},{key:"_logMissingLayer",value:function(){this._logError(ae,ie("layer"))}}]),d}(f.Z.EventedAccessor);(0,d._)([(0,k.Cb)()],oe.prototype,"_defaultSnappingManager",void 0),(0,d._)([(0,k.Cb)()],oe.prototype,"updating",null),(0,d._)([(0,k.Cb)()],oe.prototype,"_operationHandle",void 0),(0,d._)([(0,k.Cb)({readOnly:!0})],oe.prototype,"activeTool",null),(0,d._)([(0,k.Cb)()],oe.prototype,"activeFillSymbol",void 0),(0,d._)([(0,k.Cb)()],oe.prototype,"activeLineSymbol",void 0),(0,d._)([(0,k.Cb)()],oe.prototype,"activeVertexSymbol",void 0),(0,d._)([(0,k.Cb)()],oe.prototype,"allowDeleteKey",void 0),(0,d._)([(0,k.Cb)({readOnly:!0})],oe.prototype,"createGraphic",null),(0,d._)([(0,k.Cb)()],oe.prototype,"defaultCreateOptions",null),(0,d._)([(0,k.Cb)()],oe.prototype,"defaultUpdateOptions",null),(0,d._)([(0,k.Cb)({type:H.Z,nonNullable:!0})],oe.prototype,"labelOptions",null),(0,d._)([(0,k.Cb)()],oe.prototype,"layer",void 0),(0,d._)([(0,k.Cb)({types:h.LB})],oe.prototype,"pointSymbol",void 0),(0,d._)([(0,k.Cb)({types:h.LB})],oe.prototype,"polygonSymbol",void 0),(0,d._)([(0,k.Cb)({types:h.LB})],oe.prototype,"polylineSymbol",void 0),(0,d._)([(0,k.Cb)()],oe.prototype,"meshSymbol",void 0),(0,d._)([(0,k.Cb)({type:Y.Z,nonNullable:!0})],oe.prototype,"snappingOptions",null),(0,d._)([(0,k.Cb)()],oe.prototype,"snappingManager",null),(0,d._)([(0,k.Cb)({readOnly:!0})],oe.prototype,"state",null),(0,d._)([(0,k.Cb)({type:L.Z,nonNullable:!0})],oe.prototype,"tooltipOptions",null),(0,d._)([(0,k.Cb)({readOnly:!0})],oe.prototype,"updateGraphics",void 0),(0,d._)([(0,k.Cb)()],oe.prototype,"updateOnGraphicClick",void 0),(0,d._)([(0,k.Cb)({type:j.Z,nonNullable:!0})],oe.prototype,"valueOptions",null),(0,d._)([(0,k.Cb)({types:h.LB})],oe.prototype,"vertexSymbol",void 0),(0,d._)([(0,k.Cb)({value:null})],oe.prototype,"view",null),(0,d._)([(0,k.Cb)({constructOnly:!0,type:N.Z})],oe.prototype,"sketchOptions",void 0),oe=(0,d._)([(0,w.j)("esri.widgets.Sketch.SketchViewModel")],oe);var ae="sketch:missing-property",ie=function(e){return"Property '".concat(e,"' is missing on SketchViewModel.")};function se(e){return"polygon"===e||"rectangle"===e||"circle"===e}function pe(e,t){ue("undo",e.history.undo,e.history.redo,t)}function le(e,t){ue("redo",e.history.redo,e.history.undo,t)}function ue(e,t,n,r){var o=t.pop();if(o){var a=o.updates,i=[];r.forEach((function(t,n){var r=a[n];null!=r&&("geometry"in r&&null!=r.geometry&&(i.push({geometry:t.geometry}),t.geometry=r.geometry),"symbol"in r&&null!=r.symbol&&(i.push({symbol:t.symbol}),t.symbol=r.symbol),"undo"in r&&(i.push(r),r[e](t)))})),n.push({updates:i})}}function ce(e,t){null!=e&&t.hasGrabbedManipulators&&(e.activeTool=null)}function de(e){return{updates:e.map((function(e){var t=e.geometry;return"mesh"===(null===t||void 0===t?void 0:t.type)?{geometry:t.cloneShallow()}:{geometry:t}}))}}function he(e){return"requireError"in e&&"aborted"===e.requireError}var ve=oe}}]);
//# sourceMappingURL=40763.e2bb23f3.chunk.js.map