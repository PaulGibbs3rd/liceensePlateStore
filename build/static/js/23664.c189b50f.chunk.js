"use strict";(self.webpackChunkreact_training=self.webpackChunkreact_training||[]).push([[23664],{63231:function(e,n,t){function r(e){return null!=o(e)||null!=u(e)}function i(e){return s.test(e)}function a(e){var n;return null!==(n=o(e))&&void 0!==n?n:u(e)}function u(e){var n=new Date(e);return function(e,n){if(Number.isNaN(e.getTime()))return!1;var t=!0;if(c&&/\d+\W*$/.test(n)){var r=n.match(/[a-zA-Z]{2,}/);if(r){for(var i=!1,a=0;!i&&a<=r.length;)i=!l.test(r[a]),a++;t=!i}}return t}(n,e)?Number.isNaN(n.getTime())?null:n.getTime()-6e4*n.getTimezoneOffset():null}function o(e){var n,t,r,i,a=s.exec(e);if(null===a||void 0===a||!a.groups)return null;var u=a.groups,o=+u.year,l=+u.month-1,c=+u.day,f=+(null!==(n=u.hours)&&void 0!==n?n:"0"),d=+(null!==(t=u.minutes)&&void 0!==t?t:"0"),p=+(null!==(r=u.seconds)&&void 0!==r?r:"0");if(f>23)return null;if(d>59)return null;if(p>59)return null;var v,y=null!==(i=u.ms)&&void 0!==i?i:"0",h=y?+y.padEnd(3,"0").substring(0,3):0;if(u.isUTC||!u.offsetSign)v=Date.UTC(o,l,c,f,d,p,h);else{var m=+u.offsetHours,g=+u.offsetMinutes;v=6e4*("+"===u.offsetSign?-1:1)*(60*m+g)+Date.UTC(o,l,c,f,d,p,h)}return Number.isNaN(v)?null:v}t.d(n,{mu:function(){return i},of:function(){return r},sG:function(){return a}});var s=(0,t(70804).Z)(/^(?:(\x2D?\d{4,})\x2D(\d{2})\x2D(\d{2}))(?:T(\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?)?(?:(Z)|(?:(\+|\x2D)(\d{2}):(\d{2})))?$/,{year:1,month:2,day:3,hours:4,minutes:5,seconds:6,ms:7,isUTC:8,offsetSign:9,offsetHours:10,offsetMinutes:11});var l=/^((jan(uary)?)|(feb(ruary)?)|(mar(ch)?)|(apr(il)?)|(may)|(jun(e)?)|(jul(y)?)|(aug(ust)?)|(sep(tember)?)|(oct(ober)?)|(nov(ember)?)|(dec(ember)?)|(am)|(pm)|(gmt)|(utc))$/i,c=!Number.isNaN(new Date("technology 10").getTime())},29616:function(e,n,t){t.d(n,{Qc:function(){return d},WU:function(){return l},lt:function(){return f},ti:function(){return s}});var r=t(1413),i=t(29439),a=t(643),u=t(36257),o={ar:[".",","],bg:[",","\xa0"],bs:[",","."],ca:[",","."],cs:[",","\xa0"],da:[",","."],de:[",","."],"de-ch":[".","\u2019"],el:[",","."],en:[".",","],"en-au":[".",","],es:[",","."],"es-mx":[".",","],et:[",","\xa0"],fi:[",","\xa0"],fr:[",","\u202f"],"fr-ch":[",","\u202f"],he:[".",","],hi:[".",",","#,##,##0.###"],hr:[",","."],hu:[",","\xa0"],id:[",","."],it:[",","."],"it-ch":[".","\u2019"],ja:[".",","],ko:[".",","],lt:[",","\xa0"],lv:[",","\xa0"],mk:[",","."],nb:[",","\xa0"],nl:[",","."],pl:[",","\xa0"],pt:[",","."],"pt-pt":[",","\xa0"],ro:[",","."],ru:[",","\xa0"],sk:[",","\xa0"],sl:[",","."],sr:[",","."],sv:[",","\xa0"],th:[".",","],tr:[",","."],uk:[",","\xa0"],vi:[",","."],zh:[".",","]};function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,u.Kd)(),n=(e=e.toLowerCase())in o;if(!n){var t=e.split("-");t.length>1&&t[0]in o&&(e=t[0],n=!0),n||(e="en")}var r=(0,i.Z)(o[e],3),a=r[0],s=r[1],l=r[2],c=void 0===l?"#,##0.###":l;return{decimal:a,group:s,pattern:c}}function l(e,n){var t=s((n=(0,r.Z)({},n)).locale);n.customs=t;var i=n.pattern||t.pattern;return isNaN(e)||Math.abs(e)===1/0?null:function(e,n,t){var r=(t=t||{}).customs.group,i=t.customs.decimal,a=n.split(";"),u=a[0];if((n=a[e<0?1:0]||"-"+u).includes("%"))e*=100;else if(n.includes("\u2030"))e*=1e3;else{if(n.includes("\xa4"))throw new Error("currency notation not supported");if(n.includes("E"))throw new Error("exponential notation not supported")}var o=c,s=u.match(o);if(!s)throw new Error("unable to find a number expression in pattern: "+n);return!1===t.fractional&&(t.places=0),n.replace(o,function(e,n,t){!0===(t=t||{}).places&&(t.places=0),t.places===1/0&&(t.places=6);var r=n.split("."),i="string"==typeof t.places&&t.places.indexOf(","),a=t.places;i?a=t.places.substring(i+1):+a>=0||(a=(r[1]||[]).length),t.round<0||(e=Number(e.toFixed(Number(a))));var u=String(Math.abs(e)).split("."),o=u[1]||"";if(r[1]||t.places){i&&(t.places=t.places.substring(0,i));var s=void 0!==t.places?t.places:r[1]&&r[1].lastIndexOf("0")+1;+s>o.length&&(u[1]=o.padEnd(Number(s),"0")),+a<o.length&&(u[1]=o.substr(0,Number(a)))}else u[1]&&u.pop();var l=r[0].replace(",",""),c=l.indexOf("0");-1!==c&&((c=l.length-c)>u[0].length&&(u[0]=u[0].padStart(c,"0")),l.includes("#")||(u[0]=u[0].substr(u[0].length-c)));var f,d,p=r[0].lastIndexOf(",");if(-1!==p){f=r[0].length-p-1;var v=r[0].substr(0,p);-1!==(p=v.lastIndexOf(","))&&(d=v.length-p-1)}for(var y=[],h=u[0];h;){var m=h.length-f;y.push(m>0?h.substr(m):h),h=m>0?h.slice(0,m):"",d&&(f=d,d=void 0)}return u[0]=y.reverse().join(t.group||","),u.join(t.decimal||".")}(e,s[0],{decimal:i,group:r,places:t.places,round:t.round}))}(e,i,n)}var c=/[#0,]*[#0](?:\.0*#*)?/;function f(e){var n=s((e=e||{}).locale),t=e.pattern||n.pattern,r=n.group,i=n.decimal,u=1;if(t.includes("%"))u/=100;else if(t.includes("\u2030"))u/=1e3;else if(t.includes("\xa4"))throw new Error("currency notation not supported");var o=t.split(";");1===o.length&&o.push("-"+o[0]);var l=v(o,(function(n){return(n="(?:"+(0,a.Qs)(n,".")+")").replace(c,(function(n){var t={signed:!1,separator:e.strict?r:[r,""],fractional:e.fractional,decimal:i,exponent:!1},a=n.split("."),o=e.places;1===a.length&&1!==u&&(a[1]="###"),1===a.length||0===o?t.fractional=!1:(void 0===o&&(o=e.pattern?a[1].lastIndexOf("0")+1:1/0),o&&null==e.fractional&&(t.fractional=!0),!e.places&&+o<a[1].length&&(o+=","+a[1].length),t.places=o);var s=a[0].split(",");return s.length>1&&(t.groupSize=s.pop().length,s.length>1&&(t.groupSize2=s.pop().length)),"("+function(e){"places"in(e=e||{})||(e.places=1/0),"string"!=typeof e.decimal&&(e.decimal="."),"fractional"in e&&!String(e.places).startsWith("0")||(e.fractional=[!0,!1]),"exponent"in e||(e.exponent=[!0,!1]),"eSigned"in e||(e.eSigned=[!0,!1]);var n=p(e),t=v(e.fractional,(function(n){var t="";return n&&0!==e.places&&(t="\\"+e.decimal,e.places===1/0?t="(?:"+t+"\\d+)?":t+="\\d{"+e.places+"}"),t}),!0),r=n+t;return t&&(r="(?:(?:"+r+")|(?:"+t+"))"),r+v(e.exponent,(function(n){return n?"([eE]"+p({signed:e.eSigned})+")":""}))}(t)+")"}))}),!0);return{regexp:l.replaceAll(/[\xa0 ]/g,"[\\s\\xa0]"),group:r,decimal:i,factor:u}}function d(e,n){var t=f(n),r=new RegExp("^"+t.regexp+"$").exec(e);if(!r)return NaN;var i=r[1];if(!r[1]){if(!r[2])return NaN;i=r[2],t.factor*=-1}return i=i.replaceAll(new RegExp("["+t.group+"\\s\\xa0]","g"),"").replace(t.decimal,"."),Number(i)*t.factor}function p(e){return"signed"in(e=e||{})||(e.signed=[!0,!1]),"separator"in e?"groupSize"in e||(e.groupSize=3):e.separator="",v(e.signed,(function(e){return e?"[-+]":""}),!0)+v(e.separator,(function(n){if(!n)return"(?:\\d+)";" "===(n=(0,a.Qs)(n))?n="\\s":"\xa0"===n&&(n="\\s\\xa0");var t=e.groupSize,r=e.groupSize2;if(r){var i="(?:0|[1-9]\\d{0,"+(r-1)+"}(?:["+n+"]\\d{"+r+"})*["+n+"]\\d{"+t+"})";return t-r>0?"(?:"+i+"|(?:0|[1-9]\\d{0,"+(t-1)+"}))":i}return"(?:0|[1-9]\\d{0,"+(t-1)+"}(?:["+n+"]\\d{"+t+"})*)"}),!0)}var v=function(e,n,t){if(!Array.isArray(e))return n(e);for(var r=[],i=0;i<e.length;i++)r.push(n(e[i]));return y(r.join("|"),Boolean(t))},y=function(e,n){return"("+(n?"?:":"")+e+")"}},76432:function(e,n,t){t.d(n,{t:function(){return l}});var r=t(15671),i=t(43144),a=t(84652),u=t(39052),o=t(56885),s=function(){function e(n,t){(0,r.Z)(this,e),this._observable=new o.s,this._value=n,this._equalityFunction=t}return(0,i.Z)(e,[{key:"value",get:function(){return(0,u.it)(this._observable),this._value},set:function(e){this._equalityFunction(e,this._value)||(this._value=e,this._observable.notify())}},{key:"mutate",value:function(e){e(this._value),this._observable.notify()}}]),e}();function l(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.y7;return new s(e,n)}},34311:function(e,n,t){function r(e,n,t){return{objectId:e,target:n,distance:t,type:"vertex"}}function i(e,n,t,r,i){var a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return{objectId:e,target:n,distance:t,type:"edge",start:r,end:i,draped:a}}t.d(n,{p:function(){return i},u:function(){return r}})},62273:function(e,n,t){t.r(n),t.d(n,{default:function(){return ee}});var r=t(37762),i=t(1413),a=t(29439),u=t(74165),o=t(15861),s=t(43144),l=t(15671),c=(t(59486),t(76200)),f=t(14921),d=t(63231),p=t(10064),v=t(32718),y=t(66978),h=t(35995),m=t(79803),g=t(40237),b=t(92975),x=t(81753),Z=t(3182),w=t(80457),I=t(68928),N=t(19995),S=t(75878),k=t(29616),_=t(37270),F=(0,u.Z)().mark(C),T=(0,u.Z)().mark(D),E=/^\s*"([\S\s]*)"\s*$/,L=/""/g,q=[","," ",";","|","\t"];function C(e,n,t){var r,i,a;return(0,u.Z)().wrap((function(u){for(;;)switch(u.prev=u.next){case 0:r=0;case 1:if(!(r<=e.length)){u.next=10;break}if(i=e.indexOf(n,r),a=e.substring(r,i>-1?i:void 0),r+=a.length+n.length,u.t0=t&&!a.trim(),u.t0){u.next=8;break}return u.next=8,a;case 8:u.next=1;break;case 10:case"end":return u.stop()}}),F)}function O(e){var n=e.includes("\r\n")?"\r\n":"\n";return C(e,n,!0)}function R(e,n){return C(e,n,!1)}function A(e,n,t){var i;e=e.trim(),n=null===(i=n)||void 0===i?void 0:i.trim();var a,u=[],o=Array.from(new Set([null===t||void 0===t?void 0:t.delimiter].concat(q))).filter((function(e){return null!=e})),s=(0,r.Z)(o);try{for(s.s();!(a=s.n()).done;){var l,c=a.value,f=U(e,c).length,d=null!==(l=U(n,c).length)&&void 0!==l?l:f;f>1&&u.push({weight:Math.min(f,d),delimiter:c})}}catch(g){s.e(g)}finally{s.f()}var p,v=u.sort((function(e,n){var t=e.weight;return n.weight-t})).map((function(e){return e.delimiter})),y=(0,r.Z)(v);try{for(y.s();!(p=y.n()).done;){var h=p.value,m=G(j(e,h).names,null===t||void 0===t?void 0:t.longitudeField,null===t||void 0===t?void 0:t.latitudeField);if(m.longitudeFieldName&&m.latitudeFieldName)return{delimiter:h,locationInfo:m}}}catch(g){y.e(g)}finally{y.f()}return{delimiter:v[0],locationInfo:null}}function D(e,n,t){var i,a,o,s,l,c,f,d,p,v,y,h,m,g,b,x=arguments;return(0,u.Z)().wrap((function(u){for(;;)switch(u.prev=u.next){case 0:i=x.length>3&&void 0!==x[3]?x[3]:function(){return Object.create(null)},(a=O(e)).next(),o="",s="",l=0,c=i(),f=0,d=(0,r.Z)(a),u.prev=5,d.s();case 7:if((p=d.n()).done){u.next=49;break}v=p.value,y=R(v,t),h=(0,r.Z)(y),u.prev=11,h.s();case 13:if((m=h.n()).done){u.next=31;break}if(g=m.value,o+=s+g,s="",(l+=M(g))%2!=0){u.next=28;break}if(!(l>0)){u.next=24;break}if(b=E.exec(o)){u.next=21;break}return c=i(),f=0,o="",l=0,u.abrupt("continue",47);case 21:c[n[f]]=b[1].replaceAll(L,'"'),f++,u.next=25;break;case 24:c[n[f]]=o,f++;case 25:o="",l=0,u.next=29;break;case 28:s=t;case 29:u.next=13;break;case 31:u.next=36;break;case 33:u.prev=33,u.t0=u.catch(11),h.e(u.t0);case 36:return u.prev=36,h.f(),u.finish(36);case 39:if(0!==l){u.next=46;break}return u.next=42,c;case 42:c=i(),f=0,u.next=47;break;case 46:s="\n";case 47:u.next=7;break;case 49:u.next=54;break;case 51:u.prev=51,u.t1=u.catch(5),d.e(u.t1);case 54:return u.prev=54,d.f(),u.finish(54);case 57:case"end":return u.stop()}}),T,null,[[5,51,54,57],[11,33,36,39]])}function j(e,n){for(var t=U(e,n).filter((function(e){return null!=e})),r=t.map((function(e){return(0,_.q6)(e)})),i=r.length-1;i>=0;i--)r[i]||(r.splice(i,1),t.splice(i,1));return{names:r,aliases:t}}function U(e,n){if(null===e||void 0===e||!e.length)return[];var t,i=[],a="",u="",o=0,s=R(e,n),l=(0,r.Z)(s);try{for(l.s();!(t=l.n()).done;){var c=t.value;if(a+=u+c,u="",(o+=M(c))%2==0){if(o>0){var f=E.exec(a);f&&i.push(f[1].replaceAll(L,'"'))}else i.push(a);a="",o=0}else u=n}}catch(d){l.e(d)}finally{l.f()}return i}function M(e){var n=0,t=0;for(t=e.indexOf('"',t);t>=0;)n++,t=e.indexOf('"',t+1);return n}function G(e,n,t){var r,i;n=null===(r=(0,_.q6)(n))||void 0===r?void 0:r.toLowerCase(),t=null===(i=(0,_.q6)(t))||void 0===i?void 0:i.toLowerCase();var a=e.map((function(e){return e.toLowerCase()})),u=n?e[a.indexOf(n)]:null,o=t?e[a.indexOf(t)]:null;return{longitudeFieldName:u||e[a.indexOf(z.find((function(e){return a.includes(e)})))],latitudeFieldName:o||e[a.indexOf(V.find((function(e){return a.includes(e)})))]}}function P(e,n,t,i,a){var u,o=[],s=D(e,t,n),l=[],c=(0,r.Z)(s);try{for(c.s();!(u=c.n()).done;){var f=u.value;if(10===l.length)break;l.push(f)}}catch(y){c.e(y)}finally{c.f()}for(var p=function(e){var n=t[e],r=i[e];if(n===a.longitudeFieldName||n===a.latitudeFieldName)o.push({name:n,type:"esriFieldTypeDouble",alias:r});else{var u;switch(function(e){if(!e.length)return"string";var n=/[^+\-.,0-9]/;return e.map((function(e){if(""!==e){if(!n.test(e)){var t=Q(e);if(!isNaN(t))return/[.,]/.test(e)||!Number.isInteger(t)||t>214783647||t<-214783648?"double":"integer";if(e.includes("E")){if(t=Number(e),!Number.isNaN(t))return"double";if(e.includes(",")&&(e=e.replace(",","."),t=Number(e),!Number.isNaN(t)))return"double"}}return(0,d.of)(e)?"date":"string"}})).reduce((function(e,n){return void 0===e?n:void 0===n?e:e===n?n:"string"===e||"string"===n?"string":"double"===e||"double"===n?"double":void 0}))}(l.map((function(e){return e[n]})))){case"integer":u="esriFieldTypeInteger";break;case"double":u="esriFieldTypeDouble";break;case"date":u="esriFieldTypeDate";break;default:u="esriFieldTypeString"}o.push({name:n,type:u,alias:r,length:(0,_.ZR)(u)})}},v=0;v<t.length;v++)p(v);return o}var Q=function(){var e=(0,k.lt)(),n=new RegExp("^"+e.regexp+"$"),t=new RegExp("["+e.group+"\\s\\xa0]","g"),r=e.factor;return function(i){var a=n.exec(i);if(e.factor=r,!a)return NaN;var u=a[1];if(!a[1]){if(!a[2])return NaN;u=a[2],e.factor*=-1}return+(u=u.replace(t,"").replace(e.decimal,"."))*e.factor}}(),V=["lat","latitude","latitude83","latdecdeg","lat_dd","y","ycenter","point_y"],z=["lon","lng","long","longitude","longitude83","longdecdeg","long_dd","x","xcenter","point_x"],B=t(63543),J=t(52410),$=t(6701),W=t(78952),H=(0,B.bU)("esriGeometryPoint"),K=["csv"],Y=[0,0],X=(0,s.Z)((function e(n,t){(0,l.Z)(this,e),this.x=n,this.y=t})),ee=function(){function e(){var n=this;(0,l.Z)(this,e),this._queryEngine=null,this._snapshotFeatures=function(){var e=(0,o.Z)((0,u.Z)().mark((function e(t){var r;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._fetch(t);case 2:return r=e.sent,e.abrupt("return",n._createFeatures(r));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()}return(0,s.Z)(e,[{key:"destroy",value:function(){var e;null!==(e=this._queryEngine)&&void 0!==e&&e.destroy(),this._queryEngine=null}},{key:"load",value:function(){var e=(0,o.Z)((0,u.Z)().mark((function e(n){var t,r,i,o,s,l,c,f,d,p,v,y,h=arguments;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:{},this._loadOptions=n,e.next=4,Promise.all([this._fetch(r.signal),this._checkProjection(null===n||void 0===n||null===(t=n.parsingOptions)||void 0===t?void 0:t.spatialReference)]);case 4:return i=e.sent,o=(0,a.Z)(i,1),s=o[0],l=ne(s,n),this._locationInfo=l.locationInfo,this._delimiter=l.delimiter,this._queryEngine=this._createQueryEngine(l),e.next=11,this._createFeatures(s);case 11:return c=e.sent,this._queryEngine.featureStore.addMany(c),e.next=15,this._queryEngine.fetchRecomputedExtents();case 15:return f=e.sent,d=f.fullExtent,p=f.timeExtent,l.layerDefinition.extent=d,p&&(v=p.start,y=p.end,l.layerDefinition.timeInfo.timeExtent=[v,y]),e.abrupt("return",l);case 20:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}()},{key:"applyEdits",value:function(){var e=(0,o.Z)((0,u.Z)().mark((function e(){return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new p.Z("csv-layer:editing-not-supported","applyEdits() is not supported on CSVLayer");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"queryFeatures",value:function(){var e=(0,o.Z)((0,u.Z)().mark((function e(){var n,t,r=arguments;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>0&&void 0!==r[0]?r[0]:{},t=r.length>1&&void 0!==r[1]?r[1]:{},e.next=4,this._waitSnapshotComplete();case 4:return e.abrupt("return",this._queryEngine.executeQuery(n,t.signal));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"queryFeatureCount",value:function(){var e=(0,o.Z)((0,u.Z)().mark((function e(){var n,t,r=arguments;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>0&&void 0!==r[0]?r[0]:{},t=r.length>1&&void 0!==r[1]?r[1]:{},e.next=4,this._waitSnapshotComplete();case 4:return e.abrupt("return",this._queryEngine.executeQueryForCount(n,t.signal));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"queryObjectIds",value:function(){var e=(0,o.Z)((0,u.Z)().mark((function e(){var n,t,r=arguments;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>0&&void 0!==r[0]?r[0]:{},t=r.length>1&&void 0!==r[1]?r[1]:{},e.next=4,this._waitSnapshotComplete();case 4:return e.abrupt("return",this._queryEngine.executeQueryForIds(n,t.signal));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"queryExtent",value:function(){var e=(0,o.Z)((0,u.Z)().mark((function e(){var n,t,r=arguments;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>0&&void 0!==r[0]?r[0]:{},t=r.length>1&&void 0!==r[1]?r[1]:{},e.next=4,this._waitSnapshotComplete();case 4:return e.abrupt("return",this._queryEngine.executeQueryForExtent(n,t.signal));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"querySnapping",value:function(){var e=(0,o.Z)((0,u.Z)().mark((function e(n){var t,r=arguments;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>1&&void 0!==r[1]?r[1]:{},e.next=3,this._waitSnapshotComplete();case 3:return e.abrupt("return",this._queryEngine.executeQueryForSnapping(n,t.signal));case 4:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}()},{key:"refresh",value:function(){var e=(0,o.Z)((0,u.Z)().mark((function e(n){var t,r,i,a,o=this;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._loadOptions.customParameters=n,null!==(t=this._snapshotTask)&&void 0!==t&&t.abort(),this._snapshotTask=(0,f.vr)(this._snapshotFeatures),this._snapshotTask.promise.then((function(e){o._queryEngine.featureStore.clear(),e&&o._queryEngine.featureStore.addMany(e)}),(function(e){o._queryEngine.featureStore.clear(),(0,y.D_)(e)||v.Z.getLogger("esri.layers.CSVLayer").error(new p.Z("csv-layer:refresh","An error occurred during refresh",{error:e}))})),e.next=6,this._waitSnapshotComplete();case 6:return e.next=8,this._queryEngine.fetchRecomputedExtents();case 8:return r=e.sent,i=r.fullExtent,a=r.timeExtent,e.abrupt("return",{extent:i,timeExtent:a});case 12:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}()},{key:"_waitSnapshotComplete",value:function(){var e=(0,o.Z)((0,u.Z)().mark((function e(){return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._snapshotTask||this._snapshotTask.finished){e.next=9;break}return e.prev=1,e.next=4,this._snapshotTask.promise;case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:return e.abrupt("return",this._waitSnapshotComplete());case 9:case"end":return e.stop()}}),e,this,[[1,6]])})));return function(){return e.apply(this,arguments)}}()},{key:"_fetch",value:function(){var e=(0,o.Z)((0,u.Z)().mark((function e(n){var t,r,a,o;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this._loadOptions,r=t.url,a=t.customParameters,r){e.next=3;break}throw new p.Z("csv-layer:invalid-source","url not defined");case 3:return o=(0,h.mN)(r),e.next=6,(0,c.Z)(o.path,{query:(0,i.Z)((0,i.Z)({},o.query),a),responseType:"text",signal:n});case 6:return e.abrupt("return",e.sent.data);case 7:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}()},{key:"_createQueryEngine",value:function(e){var n=e.layerDefinition,t=n.objectIdField,r=n.fields,i=n.extent,a=n.timeInfo,u=new I.Z({geometryType:"esriGeometryPoint",hasM:!1,hasZ:!1});return new S.q({fieldsIndex:J.Z.fromLayerJSON({fields:r,dateFieldsTimeReference:{timeZoneIANA:$.pt}}),geometryType:"esriGeometryPoint",hasM:!1,hasZ:!1,timeInfo:a,objectIdField:t,spatialReference:i.spatialReference||{wkid:4326},cacheSpatialQueries:!0,featureStore:u})}},{key:"_createFeatures",value:function(){var e=(0,o.Z)((0,u.Z)().mark((function e(n){var t,i,o,s,l,c,f,p,v,y,h,I,N,S,k,F,T,E,L,q,C,O,R,A,j,U,M,G,P,V,z,J,$,H,K;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this._locationInfo,i=t.latitudeFieldName,o=t.longitudeFieldName,s=this._queryEngine,l=s.objectIdField,c=s.fieldsIndex,f=s.spatialReference,p=[],v=[],y=c.fields.filter((function(e){return e.name!==l})).map((function(e){return e.name})),h=0,I={},N=(0,r.Z)(c.fields);try{for(N.s();!(S=N.n()).done;)"esriFieldTypeOID"!==(k=S.value).type&&"esriFieldTypeGlobalID"!==k.type&&void 0!==(F=(0,_.os)(k))&&(I[k.name]=F)}catch(u){N.e(u)}finally{N.f()}T=D(n,y,this._delimiter,(0,B.Dm)(I,l)),E=(0,r.Z)(T);try{for(E.s();!(L=E.n()).done;)if(q=L.value,C=this._parseCoordinateValue(q[i]),null!=(O=this._parseCoordinateValue(q[o]))&&null!=C&&!isNaN(C)&&!isNaN(O)){for(R in q[i]=C,q[o]=O,q)R!==i&&R!==o&&(c.isDateField(R)?q[R]=(0,d.sG)(q[R]):c.isNumericField(R)&&(A=Q(q[R]),isNaN(A)?q[R]=null:q[R]=A));q[l]=h,h++,p.push(new X(O,C)),v.push(q)}}catch(u){E.e(u)}finally{E.f()}if(!(0,b.fS)({wkid:4326},f))if((0,b.sS)(f)){j=(0,r.Z)(p);try{for(j.s();!(U=j.n()).done;)M=U.value,G=(0,x.hG)(M.x,M.y,Y),P=(0,a.Z)(G,2),M.x=P[0],M.y=P[1]}catch(u){j.e(u)}finally{j.f()}}else p=(0,m.projectMany)(g.N,p,W.Z.WGS84,f,null,null);for(V=[],z=0;z<p.length;z++)J=p[z],$=J.x,H=J.y,(K=v[z])[l]=z+1,V.push(new Z.u_(new w.Z([],[$,H]),K,null,K[l]));return e.abrupt("return",V);case 14:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}()},{key:"_parseCoordinateValue",value:function(e){if(null==e||""===e)return null;var n=Q(e);return(isNaN(n)||Math.abs(n)>181)&&(n=parseFloat(e)),n}},{key:"_checkProjection",value:function(){var e=(0,o.Z)((0,u.Z)().mark((function e(n){return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,N._W)(b.YU,n);case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(0),new p.Z("csv-layer:projection-not-supported","Projection not supported");case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(n){return e.apply(this,arguments)}}()}]),e}();function ne(e,n){var t,i,a,u=n.parsingOptions||{},o={delimiter:u.delimiter,layerDefinition:null,locationInfo:{latitudeFieldName:u.latitudeField,longitudeFieldName:u.longitudeField}},s=o.layerDefinition={name:(0,h.vt)(n.url,K)||"csv",dateFieldsTimeReference:{timeZoneIANA:$.pt},drawingInfo:H,geometryType:"esriGeometryPoint",objectIdField:null,fields:[],timeInfo:u.timeInfo,extent:{xmin:Number.POSITIVE_INFINITY,ymin:Number.POSITIVE_INFINITY,xmax:Number.NEGATIVE_INFINITY,ymax:Number.NEGATIVE_INFINITY,spatialReference:u.spatialReference||{wkid:4326}}},l=O(e),c=null===(t=l.next().value)||void 0===t?void 0:t.trim(),f=null===(i=l.next().value)||void 0===i?void 0:i.trim();if(!c)throw new p.Z("csv-layer:empty-csv","CSV is empty",{csv:e});var d=A(c,f,u),v=d.delimiter,y=d.locationInfo;if(!v)throw new p.Z("csv-layer:invalid-delimiter","Unable to detect the delimiter from CSV",{firstLine:c,secondLine:f,parsingOptions:u});if(!y)throw new p.Z("csv-layer:location-fields-not-found","Unable to identify latitude and longitude fields from the CSV file",{firstLine:c,secondLine:f,parsingOptions:u});o.locationInfo=y,o.delimiter=v;var m=j(c,v),g=m.names,b=m.aliases,x=P(e,o.delimiter,g,b,o.locationInfo);if(null!==(a=u.fields)&&void 0!==a&&a.length){var Z,w=new J.Z(u.fields),I=(0,r.Z)(x);try{for(I.s();!(Z=I.n()).done;){var N=Z.value,S=w.get(N.name);S&&Object.assign(N,S)}}catch(q){I.e(q)}finally{I.f()}}if(!x.some((function(e){return"esriFieldTypeOID"===e.type&&(s.objectIdField=e.name,!0)}))){var k={name:"__OBJECTID",alias:"__OBJECTID",type:"esriFieldTypeOID",editable:!1,nullable:!1};s.objectIdField=k.name,x.unshift(k)}s.fields=x;var _=new J.Z(s.fields);if(o.locationInfo&&(o.locationInfo.latitudeFieldName=_.get(o.locationInfo.latitudeFieldName).name,o.locationInfo.longitudeFieldName=_.get(o.locationInfo.longitudeFieldName).name),s.timeInfo){var F=s.timeInfo;if(F.startTimeField){var T=_.get(F.startTimeField);T?(F.startTimeField=T.name,T.type="esriFieldTypeDate"):F.startTimeField=null}if(F.endTimeField){var E=_.get(F.endTimeField);E?(F.endTimeField=E.name,E.type="esriFieldTypeDate"):F.endTimeField=null}if(F.trackIdField){var L=_.get(F.trackIdField);F.trackIdField=L?L.name:null}F.startTimeField||F.endTimeField||(s.timeInfo=null)}return o}},63543:function(e,n,t){t.d(n,{Dm:function(){return d},Hq:function(){return v},MS:function(){return y},bU:function(){return l}});var r=t(4942),i=t(1413),a=t(93169),u=t(84652),o=t(60480),s=t(76115);function l(e){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===e||"esriGeometryMultipoint"===e?s.I4:"esriGeometryPolyline"===e?s.ET:s.lF}}}var c=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/,f=1;function d(e,n){if((0,a.Z)("esri-csp-restrictions"))return function(){return(0,i.Z)((0,r.Z)({},n,null),e)};try{var t="this".concat(p(n)," = null;");for(var u in e)t+="this".concat(p(u)," = ").concat(JSON.stringify(e[u]),";");var o=new Function("\n      return class AttributesClass$".concat(f++," {\n        constructor() {\n          ").concat(t,";\n        }\n      }\n    "))();return function(){return new o}}catch(s){return function(){return(0,i.Z)((0,r.Z)({},n,null),e)}}}function p(e){return c.test(e)?".".concat(e):'["'.concat(e,'"]')}function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[{name:"New Feature",description:"",prototype:{attributes:(0,u.d9)(e)}}]}function y(e,n){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:e},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:n,supportsDelete:n,supportsEditing:n,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:n,supportsExceedsLimitStatistics:!0,supportsAsyncConvert3D:!1},query:o.g,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},editing:{supportsGeometryUpdate:n,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsAsyncApplyEdits:!1,zDefault:void 0}}}},35594:function(e,n,t){t.d(n,{F:function(){return i},o:function(){return a}});var r=t(77981);function i(e){return{geometryType:(0,r.Ji)(e[0]),geometries:e.map((function(e){return e.toJSON()}))}}function a(e,n,t){var i=(0,r.q9)(n);return e.map((function(e){var n=i.fromJSON(e);return n.spatialReference=t,n}))}},23084:function(e,n,t){t.d(n,{LP:function(){return d},cv:function(){return f},en:function(){return c},lA:function(){return l}});var r=t(1413),i=t(42265),a=t(19545),u=t(84652),o=t(35995),s=t(66660);function l(e,n){return n?(0,r.Z)((0,r.Z)({},n),{},{query:(0,r.Z)((0,r.Z)({},null!==e&&void 0!==e?e:{}),n.query)}):{query:e}}function c(e){return"string"==typeof e?(0,o.mN)(e):(0,u.d9)(e)}function f(e,n,t){var r={};for(var i in e)if("declaredClass"!==i){var a=e[i];if(null!=a&&"function"!=typeof a)if(Array.isArray(a))r[i]=a.map((function(e){return f(e)}));else if("object"==typeof a)if(a.toJSON){var u=a.toJSON(null===t||void 0===t?void 0:t[i]);r[i]=n?u:JSON.stringify(u)}else r[i]=n?a:JSON.stringify(a);else r[i]=a}return r}function d(e,n){var t;return e?(0,s.r)(e)&&(n||i.Z.apiKey)?n||i.Z.apiKey:null===a.id||void 0===a.id||null===(t=a.id.findCredential(e))||void 0===t?void 0:t.token:null}},23037:function(e,n,t){t.d(n,{Bf:function(){return h},Bj:function(){return w},Df:function(){return y},Py:function(){return Z},Qs:function(){return U},Us:function(){return k},aL:function(){return S},iG:function(){return g},ql:function(){return x},se:function(){return m},vZ:function(){return b},zb:function(){return N}});var r,i=t(29439),a=t(54557),u=t(42265),o=t(80987),s=t(32718),l=t(92026),c=t(35995),f=t(25243),d=t(32551),p=t(68954),v=function(){return s.Z.getLogger("esri.support.basemapUtils")};function y(){return{}}function h(e){for(var n in e){var t=e[n];(0,l.SC)(t),delete e[n]}}function m(e,n){var t,r;if("string"==typeof e){var o=e in p.s,s=!o&&e.includes("/");if(!o&&!s){var l=Object.entries(p.s).filter((function(e){var n=(0,i.Z)(e,2),t=(n[0],n[1]);return u.Z.apiKey&&!t.classic||!u.Z.apiKey&&(t.classic||t.is3d)})).map((function(e){var n=(0,i.Z)(e,1)[0];return'"'.concat(n,'"')})).sort().join(", ");return v().warn("Unable to find basemap definition for: ".concat(e,". Try one of these: ").concat(l)),null}n&&(r=n[e]),r||(r=o?a.default.fromId(e):new a.default({style:{id:e}}),n&&(n[e]=r))}else r=(0,f.se)(a.default,e);return null!==(t=r)&&void 0!==t&&t.destroyed&&(v().warn("The provided basemap is already destroyed",{basemap:r}),r=null),r}function g(e){var n;return"Web Scene"===(null===(n=e.portalItem)||void 0===n?void 0:n.type)||e.referenceLayers.some((function(e){return"scene"===e.type}))}function b(e){var n,t;return!(null===e||void 0===e||null===(n=e.portalItem)||void 0===n||null===(t=n.tags)||void 0===t||!t.some((function(e){return"beta"===e.toLowerCase()})))}function x(e,n){var t,r,i,a;return(null===(t=e.basemap)||void 0===t||null===(r=t.referenceLayers)||void 0===r?void 0:r.some((function(e){return e.uid===n})))||(null===(i=e.basemap)||void 0===i||null===(a=i.baseLayers)||void 0===a?void 0:a.some((function(e){return e.uid===n})))}function Z(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=m(e);if(!t)return null;var r=t.clone();return n&&(r.baseLayers=I(r.baseLayers,n.baseLayers),r.referenceLayers=I(r.referenceLayers,n.referenceLayers)),r}function w(e,n){var t,r;return e===n||(null!=(null===e||void 0===e||null===(t=e.portalItem)||void 0===t?void 0:t.id)&&e.portalItem.id===(null===n||void 0===n||null===(r=n.portalItem)||void 0===r?void 0:r.id)||"equal"===R(T(e),T(n),{mustMatchReferences:!0}))}function I(e,n){var t=new o.Z;return e.forEach((function(e){var r=n.find((function(n){return"scene"!==n.type&&D(L(e),L(n))}))||e;t.includes(r)?t.push(e):t.push(r)})),t}function N(e){return!(null===e||void 0===e||!e.baseLayers.concat(e.referenceLayers).some(S))}function S(e){if(F(e.url))return!0;if("vector-tile"===e.type)for(var n in e.sourceNameToSource){var t=e.sourceNameToSource[n];if(F(null===t||void 0===t?void 0:t.sourceUrl))return!0}return!1}function k(e,n){var t,r,i;if(null==n||null==e)return{spatialReference:null,updating:!1};if("not-loaded"===n.loadStatus)return n.load(),{spatialReference:null,updating:!0};if(n.spatialReference)return{spatialReference:n.spatialReference,updating:!1};if(0===n.baseLayers.length)return{spatialReference:null,updating:!1};var a=n.baseLayers.at(0);switch(a.loadStatus){case"not-loaded":a.load();case"loading":return{spatialReference:null,updating:!0};case"failed":return{spatialReference:null,updating:!1}}var u=(("supportedSpatialReferences"in a?a.supportedSpatialReferences:null)||["tileInfo"in a?null===(t=a.tileInfo)||void 0===t?void 0:t.spatialReference:a.spatialReference]).filter(Boolean),o=e.spatialReference;return o?{spatialReference:null!==(r=null!==(i=u.find((function(e){return o.equals(e)})))&&void 0!==i?i:u[0])&&void 0!==r?r:null,updating:!1}:{spatialReference:u[0],updating:!1}}var _=/^(basemaps|ibasemaps).*-api\.arcgis\.com$/i;function F(e){if(!e)return!1;var n=new c.R9((0,c.hF)(e));return!!n.authority&&_.test(n.authority)}function T(e){return e?!e.loaded&&e.resourceInfo?C(e.resourceInfo.data):{baseLayers:E(e.baseLayers),referenceLayers:E(e.referenceLayers)}:null}function E(e){return(o.Z.isCollection(e)?e.toArray():e).map(L)}function L(e){var n,t;return{type:e.type,effect:"effect"in e?e.effect:void 0,url:j("urlTemplate"in e&&e.urlTemplate||e.url||"styleUrl"in e&&e.styleUrl||""),minScale:"minScale"in e&&null!=e.minScale?e.minScale:0,maxScale:"maxScale"in e&&null!=e.maxScale?e.maxScale:0,opacity:null!=e.opacity?e.opacity:1,visible:null==e.visible||!!e.visible,sublayers:"map-image"!==e.type&&"wms"!==e.type||null==e.sublayers||null===(n=e.sublayers)||void 0===n?void 0:n.map((function(e){return{id:e.id,visible:e.visible}})),activeLayerId:"wmts"===e.type?null===(t=e.activeLayer)||void 0===t?void 0:t.id:void 0}}function q(e){return e.isReference||"ArcGISSceneServiceLayer"===e.layerType}function C(e){var n,t;return e?{baseLayers:O((null!==(n=e.baseMapLayers)&&void 0!==n?n:[]).filter((function(e){return!q(e)}))),referenceLayers:O((null!==(t=e.baseMapLayers)&&void 0!==t?t:[]).filter((function(e){return q(e)})))}:null}function O(e){return e.map((function(e){return function(e){var n,t,r,i;switch(e.layerType){case"VectorTileLayer":i="vector-tile";break;case"ArcGISTiledMapServiceLayer":i="tile";break;case"ArcGISSceneServiceLayer":i="scene";break;default:i="unknown"}return{type:i,effect:e.effect,url:j(e.templateUrl||e.urlTemplate||e.styleUrl||e.url),minScale:null!==(n=e.minScale)&&void 0!==n?n:0,maxScale:null!==(t=e.maxScale)&&void 0!==t?t:0,opacity:null!==(r=e.opacity)&&void 0!==r?r:1,visible:null==e.visibility||!!e.visibility,sublayers:void 0,activeLayerId:void 0}}(e)}))}function R(e,n,t){return null!=e!=(null!=n)?"not-equal":e&&n?A(e.baseLayers,n.baseLayers)?A(e.referenceLayers,n.referenceLayers)?"equal":t.mustMatchReferences?"not-equal":"base-layers-equal":"not-equal":"equal"}function A(e,n){if(e.length!==n.length)return!1;for(var t=0;t<e.length;t++)if(!D(e[t],n[t]))return!1;return!0}function D(e,n){if(e.type!==n.type||e.url!==n.url||e.minScale!==n.minScale||e.maxScale!==n.maxScale||e.visible!==n.visible||e.opacity!==n.opacity)return!1;if(!(0,d.yQ)(e.effect,n.effect))return!1;if(null!=e.activeLayerId||null!=n.activeLayerId)return e.activeLayerId===n.activeLayerId;if(null!=e.sublayers||null!=n.sublayers){if(null==e.sublayers||null==n.sublayers||e.sublayers.length!==n.sublayers.length)return!1;for(var t=0;t<e.sublayers.length;t++){var r=e.sublayers.at(t),i=n.sublayers.at(t);if((null===r||void 0===r?void 0:r.id)!==(null===i||void 0===i?void 0:i.id)||(null===r||void 0===r?void 0:r.visible)!==(null===i||void 0===i?void 0:i.visible))return!1}}return!0}function j(e){return e?(0,c.Fv)(e).replace(/^\s*https?:/i,"").toLowerCase():""}function U(e){if(!e)return null;var n=e.thumbnailUrl;if(n)return n;var t=function(e){if(r)return r(e);var n=null,t=T(e),i=!(null!==t&&void 0!==t&&t.baseLayers.length);for(var a in p.s){var u=R(t,C(p.s[a]),{mustMatchReferences:i});if("equal"===u){n=a;break}"base-layers-equal"===u&&(n=a)}return n}(e);return t?p.s[t].thumbnailUrl:(0,l.ei)(e.baseLayers,M)}function M(e){var n;return"portalItem"in e?null===(n=e.portalItem)||void 0===n?void 0:n.thumbnailUrl:void 0}}}]);
//# sourceMappingURL=23664.c189b50f.chunk.js.map