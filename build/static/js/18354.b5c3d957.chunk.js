"use strict";(self.webpackChunkreact_training=self.webpackChunkreact_training||[]).push([[18354,45739],{50863:function(e,t,r){r.d(t,{h:function(){return i}});var n=r(45739);function i(e,t,r){if(null==(null===e||void 0===e?void 0:e.timeInfo))return null;var i=e.datesInUnknownTimezone,a=void 0!==i&&i,u=e.timeOffset,s=e.useViewTime,l=e.timeExtent;a&&(l=(0,n.toLocalTimeExtent)(l));var o=s?t&&l?t.intersection(l):t||l:l;return!o||o.isEmpty||o.isAllTime?o:(u&&(o=o.offset(-u.value,u.unit)),a&&(o=(0,n.toUTCTimeExtent)(o)),o.equals(r)?r:o)}},96669:function(e,t,r){function n(e,t){return t?"xoffset"in t&&t.xoffset?Math.max(e,Math.abs(t.xoffset)):"yoffset"in t&&t.yoffset?Math.max(e,Math.abs(t.yoffset||0)):e:e}function i(e,t){var r;return"number"==typeof e?e:null!==e&&void 0!==e&&null!==(r=e.stops)&&void 0!==r&&r.length?function(e){for(var t=0,r=0,n=0;n<e.length;n++){var i=e[n].size;"number"==typeof i&&(t+=i,r++)}return t/r}(e.stops):t}function a(e,t){if(!t)return e;var r=t.filter((function(e){return"size"===e.type})).map((function(t){var r=t.maxSize,n=t.minSize;return(i(r,e)+i(n,e))/2})),n=0,a=r.length;if(0===a)return e;for(var u=0;u<a;u++)n+=r[u];var s=Math.floor(n/a);return Math.max(s,e)}function u(e){var t=null===e||void 0===e?void 0:e.renderer,r="touch"===(null===e||void 0===e?void 0:e.pointerType)?9:6;if(!t)return r;var i="visualVariables"in t?a(r,t.visualVariables):r;if("simple"===t.type)return n(i,t.symbol);if("unique-value"===t.type){var u,s=i;return null!==(u=t.uniqueValueInfos)&&void 0!==u&&u.forEach((function(e){s=n(s,e.symbol)})),s}if("class-breaks"===t.type){var l=i;return t.classBreakInfos.forEach((function(e){l=n(l,e.symbol)})),l}return"dot-density"===t.type||t.type,i}r.d(t,{k:function(){return u}})},83217:function(e,t,r){r.d(t,{x:function(){return n}});var n=Symbol("WebScene")},45739:function(e,t,r){r.r(t),r.d(t,{getTimeExtentFromLayers:function(){return _},getTimeSliderSettingsFromWebDocument:function(){return Z},getTimeSliderSettingsFromWebMap:function(){return k},toLocalTimeExtent:function(){return R},toUTCTimeExtent:function(){return S}});var n=r(93433),i=r(37762),a=r(74165),u=r(15861),s=r(62044),l=r(63780),o=r(44927),c=r(84652),f=r(32718),m=r(86710),d=r(38675),h=r(83217);function p(e){return null!=e&&"object"==typeof e&&h.x in e}function v(e){return void 0!==e.timeInfo}function y(e,t){return b.apply(this,arguments)}function b(){return(b=(0,u.Z)((0,a.Z)().mark((function e(t,r){var n,i,u;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null!==(n=null===(i=t.widgets)||void 0===i||null===(u=i.timeSlider)||void 0===u?void 0:u.fullTimeExtent)&&void 0!==n?n:_(t.allLayers,r));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){var t,r=null!==(t=e.numThumbs)&&void 0!==t?t:2,n=e.currentTimeExtent;if(n){var i=n.start,a=n.end;return null!=i&&null!=a&&i.getTime()===a.getTime()?"instant":2===r?"time-window":null==i||0===i.getTime()?"cumulative-from-start":"cumulative-from-end"}return 2===r?"time-window":"cumulative-from-start"}function x(e){var t=e.numStops,r=e.stopInterval,n=e.stops;return n?{dates:(0,c.d9)(n)}:r?{interval:r.clone()}:{count:null!==t&&void 0!==t?t:5}}function _(e,t){return T.apply(this,arguments)}function T(){return T=(0,u.Z)((0,a.Z)().mark((function e(t,r){var o,c,f,m,d,h,p,y,b,g,x,_,T;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.length){e.next=2;break}return e.abrupt("return",s.Z.allTime);case 2:return e.next=4,Promise.all(t.map((function(e){return e.load({signal:r})})));case 4:if(o=t.filter(v),c=t.filter((function(e){return!v(e)&&null!=e.visibilityTimeExtent})),0!==o.length||0!==c.length){e.next=7;break}return e.abrupt("return",s.Z.allTime);case 7:f=[],m=[],d=(0,i.Z)(o);try{for(d.s();!(h=d.n()).done;)"feature"!==(null===(y=h.value)||void 0===y?void 0:y.type)&&"map-image"!==(null===y||void 0===y?void 0:y.type)||null===(p=y.timeInfo)||void 0===p||!p.hasLiveData?m.push(y):f.push(y)}catch(w){d.e(w)}finally{d.f()}if(b=function(e){return null==e||e.isAllTime},g=[].concat((0,n.Z)(m.map((function(e){var t,r,n=null===(t=e.timeInfo)||void 0===t?void 0:t.fullTimeExtent,i=e.visibilityTimeExtent;return null!==(r=null===n||void 0===n?void 0:n.intersection(i))&&void 0!==r?r:i}))),(0,n.Z)(c.map((function(e){return e.visibilityTimeExtent})))),!g.some(b)){e.next=13;break}return e.abrupt("return",s.Z.allTime);case 13:return x=f.map(function(){var e=(0,u.Z)((0,a.Z)().mark((function e(t){var n,i,u,s,l,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchRecomputedExtents({signal:r});case 2:if(e.t2=i=e.sent,e.t1=null===e.t2,e.t1){e.next=6;break}e.t1=void 0===i;case 6:if(!e.t1){e.next=10;break}e.t3=void 0,e.next=11;break;case 10:e.t3=i.timeExtent;case 11:if(e.t4=n=e.t3,e.t0=null!==e.t4,!e.t0){e.next=15;break}e.t0=void 0!==n;case 15:if(!e.t0){e.next=19;break}e.t5=n,e.next=20;break;case 19:e.t5=null===(u=t.timeInfo)||void 0===u?void 0:u.fullTimeExtent;case 20:return l=e.t5,o=t.visibilityTimeExtent,e.abrupt("return",null!==(s=null===l||void 0===l?void 0:l.intersection(o))&&void 0!==s?s:o);case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=16,Promise.allSettled(x);case 16:if(!(_=e.sent.map((function(e){return"fulfilled"===e.status?e.value:null}))).some(b)){e.next=19;break}return e.abrupt("return",s.Z.allTime);case 19:if(0!==(T=[].concat((0,n.Z)(_),(0,n.Z)(g)).filter(l.pC)).length){e.next=22;break}return e.abrupt("return",s.Z.allTime);case 22:return e.abrupt("return",T.reduce((function(e,t){return e.union(t)})));case 23:case"end":return e.stop()}}),e)}))),T.apply(this,arguments)}function w(e,t){var r,n=e.currentTimeExtent;if(!n)return null;var i=n.start,a=n.end,u=null!==(r=null!==i&&void 0!==i?i:a)&&void 0!==r?r:null;switch(t){case"time-window":return new s.Z({start:i,end:a});case"cumulative-from-start":return new s.Z({start:null,end:u});case"cumulative-from-end":return new s.Z({start:u,end:null});case"instant":return new s.Z({start:u,end:u})}}function k(e,t){return I.apply(this,arguments)}function I(){return(I=(0,u.Z)((0,a.Z)().mark((function e(t,r){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,o.XV)(f.Z.getLogger("esri.support.timeUtils.getTimeSliderSettingsFromWebMap"),"`timeUtils.getTimeSliderSettingsFromWebMap` is deprecated in favor of 'timeUtils.getTimeSliderSettingsFromWebDocument'",{replacement:"timeUtils.getTimeSliderSettingsFromWebDocument",version:"4.30",see:"https://developers.arcgis.com/javascript/latest/api-reference/esri-support-timeUtils.html#getTimeSliderSettingsFromWebDocument",warnOnce:!0}),null==t||!(0,d.s)(t)){e.next=7;break}return e.next=4,Z(t,r);case 4:e.t0=e.sent,e.next=8;break;case 7:e.t0=null;case 8:return e.abrupt("return",e.t0);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(e,t){return E.apply(this,arguments)}function E(){return(E=(0,u.Z)((0,a.Z)().mark((function e(t,r){var n,i,u,s,l,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,d.s)(t)||p(t)){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,t.load({signal:r});case 4:if(u=null===t||void 0===t||null===(n=t.widgets)||void 0===n?void 0:n.timeSlider){e.next=7;break}return e.abrupt("return",null);case 7:return e.next=9,y(t,r);case 9:return s=e.sent,l=u.loop,o=g(u),e.abrupt("return",{fullTimeExtent:s,loop:l,mode:o,playRate:null!==(i=u.stopDelay)&&void 0!==i?i:2e3,stops:x(u),timeExtent:w(u,o)});case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e){if(!e)return e;var t=e.start,r=e.end;return new s.Z({start:null!=t?(0,m.Nm)(t,-t.getTimezoneOffset(),"minutes"):t,end:null!=r?(0,m.Nm)(r,-r.getTimezoneOffset(),"minutes"):r})}function R(e){if(!e)return e;var t=e.start,r=e.end;return new s.Z({start:null!=t?(0,m.Nm)(t,t.getTimezoneOffset(),"minutes"):t,end:null!=r?(0,m.Nm)(r,r.getTimezoneOffset(),"minutes"):r})}},18354:function(e,t,r){r.r(t),r.d(t,{default:function(){return z}});var n=r(74165),i=r(15861),a=r(29439),u=r(15671),s=r(43144),l=r(60136),o=r(29388),c=r(27366),f=r(10064),m=r(94172),d=r(49861),h=(r(93169),r(32718),r(84936),r(69912)),p=r(80394),v=r(42069),y=r(77385),b=r(1413),g=r(92026),x=r(87016),_=r(8548),T=r(48673),w={bandCount:3,outMin:0,outMax:1,minCutOff:[0,0,0],maxCutOff:[255,255,255],factor:[1/255,1/255,1/255],useGamma:!1,gamma:[1,1,1],gammaCorrection:[1,1,1],colormap:null,colormapOffset:null,stretchType:"none",type:"stretch"},k=function(){function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;(0,u.Z)(this,e),this.lij=t,this.type="raster-tile",this._memoryUsed=null,this._source=null,this._symbolizerParameters=null,this._bandIds=null,this._interpolation=null,this._dirty=!1,this._transformGrid=null,this.isRendereredSource=!1,this.symbolizerRenderer=null,this.rawPixelData=null,this.opacity=1,this.source=r,this.width=n||r.width,this.height=i||r.height}return(0,s.Z)(e,[{key:"source",get:function(){return this._source},set:function(e){this._source=e,this._rasterTexture=(0,g.M2)(this._rasterTexture),this._memoryUsed=null}},{key:"symbolizerParameters",get:function(){return this.isRendereredSource?(0,b.Z)((0,b.Z)({},w),{},{maxCutOff:[1,1,1],factor:[1,1,1]}):this._symbolizerParameters||w},set:function(e){this._symbolizerParameters=e}},{key:"bandIds",get:function(){return this._bandIds},set:function(e){var t=this;null!=e&&e.length>0?this._bandIds&&e.every((function(e,r){var n;return!(null===(n=t._bandIds)||void 0===n||!n[r])&&e===t._bandIds[r]}))||(this._bandIds=e,this._dirty=!0):this._bandIds=null}},{key:"interpolation",get:function(){return this._interpolation||"nearest"},set:function(e){if(this._interpolation=e,null!=this._rasterTexture){var t=this._getRasterTextureInterpolation(e);this._rasterTexture.setSamplingMode("bilinear"===t?_.cw.LINEAR:_.cw.NEAREST)}}},{key:"transformGrid",get:function(){return this._transformGrid},set:function(e){this._transformGrid=e,this._transformGridTexture=(0,g.M2)(this._transformGridTexture),this._memoryUsed=null}},{key:"bind",value:function(e){return!!(this.source&&this.source.pixels&&this.source.pixels.length>0)&&((null==this._rasterTexture||this._dirty)&&this._updateRasterTexture(e,this.bandIds),null!=this._rasterTexture&&(this._updateColormapTexture(e),this.transformGrid&&null==this._transformGridTexture&&(this._transformGridTexture=(0,T.Br)(e,this.transformGrid))),!0)}},{key:"getUniforms",value:function(){var e=this.symbolizerParameters,t=this.transformGrid,r=this.width,n=this.height,i=this.opacity,a=(0,T.Tc)(t,[r,n],[this.source.width,this.source.height],i),u=(0,T.Ue)(e.colormap,e.colormapOffset),s="stretch"===this.symbolizerParameters.type?(0,T.xW)(this.symbolizerParameters):null,l="hillshade"===this.symbolizerParameters.type?(0,T.Fm)(this.symbolizerParameters):null;return new x.C(a,u,s||l,this._rasterTexture,this._transformGridTexture,this._colormapTexture)}},{key:"isBilinearWithStretchColorRamp",get:function(){var e=this.symbolizerParameters;return"bilinear"===this.interpolation&&null!=e.colormap&&"stretch"===e.type}},{key:"memoryUsage",get:function(){if(null==this._memoryUsed){var e=[this._rasterTexture,this._transformGridTexture,this._colormapTexture];this._memoryUsed=e.map((function(e){return null!=e?e.descriptor.width*e.descriptor.height*4:0})).reduce((function(e,t){return e+t}),0)}return this._memoryUsed}},{key:"release",value:function(){return this._rasterTexture=(0,g.M2)(this._rasterTexture),this._transformGridTexture=(0,g.M2)(this._transformGridTexture),this._colormapTexture=(0,g.M2)(this._colormapTexture),this.source=null,this.transformGrid=null,this.rawPixelData=null,!0}},{key:"_updateRasterTexture",value:function(e,t){var r=this.source?this.source.extractBands(t):null;if(null!==r&&void 0!==r&&r.pixels&&r.pixels.length>0){var n=null==t&&null==this.bandIds||null!=t&&null!=this.bandIds&&t.join("")===this.bandIds.join("");if(null==this._rasterTexture||!n){this._rasterTexture=(0,g.M2)(this._rasterTexture);var i=this._getRasterTextureInterpolation(this.interpolation);this._rasterTexture=(0,T.s9)(e,r,i,this.isRendereredSource||this.hasStretchTypeNone())}}else this._rasterTexture=(0,g.M2)(this._rasterTexture)}},{key:"hasStretchTypeNone",value:function(){return"stretchType"in this.symbolizerParameters&&"none"===this.symbolizerParameters.stretchType&&!this.symbolizerParameters.useGamma&&"u8"===this.source.pixelType}},{key:"_getRasterTextureInterpolation",value:function(e){return"lut"===this.symbolizerParameters.type||"nearest"===e||"majority"===e||this.isBilinearWithStretchColorRamp?"nearest":"bilinear"}},{key:"_updateColormapTexture",value:function(e){var t=this._colormap,r=this.symbolizerParameters.colormap;return r?t?r.length!==t.length||r.some((function(e,r){return e!==t[r]}))?(this._colormapTexture=(0,g.M2)(this._colormapTexture),this._colormapTexture=(0,T.iC)(e,r),void(this._colormap=r)):void 0:(this._colormapTexture=(0,T.iC)(e,r),void(this._colormap=r)):(this._colormapTexture=(0,g.M2)(this._colormapTexture),void(this._colormap=null))}}]),e}(),I=r(55245),Z=r(67581),E=r(13107),S=r(45008),R=r(90316),C=function(e){(0,l.Z)(r,e);var t=(0,o.Z)(r);function r(){var e;return(0,u.Z)(this,r),(e=t.apply(this,arguments)).type="imagery-tile-3d",e._isAlignedMapTile=!0,e}return(0,s.Z)(r,[{key:"initialize",value:function(){var e=this;this.layer.increaseRasterJobHandlerUsage(),null==this.fullExtent&&this.addResolvingPromise(Promise.reject(new f.Z("layerview:spatial-reference-incompatible","The layer extent cannot be projected to the view's spatial reference",{layer:this.layer})));var t=(0,m.whenOnce)((function(){var t,r;return null===(t=e.view)||void 0===t||null===(r=t.basemapTerrain)||void 0===r?void 0:r.tilingSchemeLocked})).then((function(){var t=e.view.basemapTerrain.tilingScheme,r=e.layer.tileInfo;e._isAlignedMapTile=["png","png24","png32","jpg","mixed"].includes(r.format)&&t.compatibleWith(r),e.tileInfo=e._isAlignedMapTile?r:t.toTileInfo(),e._updatingHandles.add((function(){return[e.layer.renderer,e.layer.interpolation,e.layer.bandIds,e.layer.multidimensionalDefinition,e.layer.multidimensionalSubset,e.layer.rasterFunction,e.timeExtent]}),(function(){return e.refresh()}))}));this.addResolvingPromise(t)}},{key:"destroy",value:function(){this.layer.decreaseRasterJobHandlerUsage()}},{key:"_blankTile",get:function(){var e=document.createElement("canvas"),t=e.getContext("2d"),r=(0,a.Z)(this.tileInfo.size,2),n=r[0],i=r[1];return e.width=n,e.height=i,t.clearRect(0,0,n,i),t.getImageData(0,0,n,i)}},{key:"imageFormatIsOpaque",get:function(){return"jpg"===this.layer.tileInfo.format}},{key:"hasMixedImageFormats",get:function(){return"mixed"===this.layer.tileInfo.format}},{key:"dataLevelRange",get:function(){var e,t,r=this.layer.tileInfo,n=null===(e=this.tileInfo.lodAt(0))||void 0===e?void 0:e.scale,i=null===(t=this.layer.tileInfo.lodAt(r.lods.length-1))||void 0===t?void 0:t.scale;return this.levelRangeFromScaleRange(n,i)}},{key:"_getfullExtent",value:function(){var e,t;return(0,p.lK)(this.layer.serviceRasterInfo,null!==(e=null===(t=this.view.basemapTerrain)||void 0===t?void 0:t.spatialReference)&&void 0!==e?e:this.view.spatialReference)}},{key:"fetchTile",value:function(){var e=(0,i.Z)((0,n.Z)().mark((function e(t,r){var i,u,s,l,o,c,f,m,d,h,p;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.tileInfo,u=this._canSymbolizeInWebGL(),s={tileInfo:i,requestRawData:u,signal:r.signal,timeExtent:this.timeExtent,requestAsImageElement:this._isAlignedMapTile,noClip:!1},l=this.layer,o=(0,a.Z)(t,3),c=o[0],f=o[1],m=o[2],e.next=10,l.fetchTile(c,f,m,s);case 10:if(!((d=e.sent)instanceof HTMLImageElement)){e.next=13;break}return e.abrupt("return",d);case 13:if(null!=(h=null===d||void 0===d?void 0:d.pixelBlock)){e.next=16;break}return e.abrupt("return",this._blankTile);case 16:if(e.t0=!u,!e.t0){e.next=22;break}return e.next=20,l.applyRenderer(d);case 20:h=e.sent,e.t0=null==h;case 22:if(!e.t0){e.next=24;break}return e.abrupt("return",this._blankTile);case 24:return p=new k([c,f,m],h,i.size[0],i.size[1]),e.abrupt("return",(u?(p.symbolizerRenderer=l.symbolizer.rendererJSON,p.symbolizerParameters=l.symbolizer.generateWebGLParameters(this._getSymbolizerOptions(c)),p.transformGrid=d.transformGrid,p.bandIds=l.bandIds):(p.isRendereredSource=!0,p.bandIds=null),p.interpolation=l.interpolation,p));case 26:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_getSymbolizerOptions",value:function(e){var t,r=this.tileInfo.lodAt(e).resolution;return{pixelBlock:null,isGCS:null!=(null===(t=this.view.basemapTerrain)||void 0===t?void 0:t.spatialReference)?this.view.basemapTerrain.spatialReference.isGeographic:this.view.spatialReference.isGeographic,resolution:{x:r,y:r},bandIds:this.layer.bandIds}}},{key:"ensureSymbolizerParameters",value:function(e){this._canSymbolizeInWebGL()&&JSON.stringify(e.symbolizerRenderer)!==JSON.stringify(this.layer.symbolizer.rendererJSON)&&(e.symbolizerParameters=this.layer.symbolizer.generateWebGLParameters(this._getSymbolizerOptions(e.lij[0])))}},{key:"createFetchPopupFeaturesQueryGeometry",value:function(e,t){return(0,S.K)(e,t,this.view)}},{key:"refresh",value:function(){this.emit("data-changed")}},{key:"doRefresh",value:function(){var e=(0,i.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.suspended||this.emit("data-changed");case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_canSymbolizeInWebGL",value:function(){var e,t,r,n=(0,R.h)(),i=this.layer.symbolizer,a=null===(e=i.lookup)||void 0===e||null===(t=e.colormapLut)||void 0===t?void 0:t.indexedColormap,u=!(null===(r=this.layer.rasterFunction)||void 0===r||!r.hasClipFunction),s=a&&a.length>4*(n.maxTextureSize||4906);return i.canRenderInWebGL&&!s&&!u}}]),r}((0,I.Z)((0,E.Z)((0,y.r)((0,v.A)(Z.Z)))));(0,c._)([(0,d.Cb)({readOnly:!0})],C.prototype,"_blankTile",null),(0,c._)([(0,d.Cb)({readOnly:!0})],C.prototype,"imageFormatIsOpaque",null),(0,c._)([(0,d.Cb)({readOnly:!0})],C.prototype,"hasMixedImageFormats",null),(0,c._)([(0,d.Cb)({readOnly:!0})],C.prototype,"dataLevelRange",null);var z=C=(0,c._)([(0,h.j)("esri.views.3d.layers.ImageryTileLayerView3D")],C)},55245:function(e,t,r){r.d(t,{Z:function(){return y}});var n=r(74165),i=r(15861),a=r(15671),u=r(43144),s=r(60136),l=r(29388),o=r(27366),c=r(52639),f=r(10064),m=r(49861),d=(r(93169),r(32718),r(84936),r(69912)),h=r(50863),p=r(80394),v=r(24405),y=function(e){var t=function(e){(0,s.Z)(r,e);var t=(0,l.Z)(r);function r(){var e;return(0,a.Z)(this,r),(e=t.apply(this,arguments))._rasterFieldPrefix="Raster.",e.layer=null,e.view=null,e.tileInfo=null,e}return(0,u.Z)(r,[{key:"fullExtent",get:function(){return this._getfullExtent()}},{key:"timeExtent",get:function(){var e;return(0,h.h)(this.layer,null===(e=this.view)||void 0===e?void 0:e.timeExtent,this._get("timeExtent"))}},{key:"hasTilingEffects",get:function(){return!!(this.layer.renderer&&"dynamicRangeAdjustment"in this.layer.renderer&&this.layer.renderer.dynamicRangeAdjustment)}},{key:"datumTransformation",get:function(){return(0,p._D)(this.layer.fullExtent,this.view.spatialReference,!0)}},{key:"supportsSpatialReference",value:function(e){return!!(0,p.lK)(this.layer.serviceRasterInfo,e)}},{key:"fetchPopupFeaturesAtLocation",value:function(){var e=(0,i.Z)((0,n.Z)().mark((function e(t,r){var i,a,u,s,l,o,m,d,h,p,y,b,g,x,_,T,w,k,I,Z,E,S,R;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=this.layer,t){e.next=3;break}throw new f.Z("imageryTileLayerView:fetchPopupFeatures","Nothing to fetch without area",{layer:i});case 3:if(a=i.popupEnabled,u=(0,v.V5)(i,r),a&&null!=u){e.next=6;break}return e.abrupt("return",[]);case 6:return s=[],e.next=9,i.identify(t,{timeExtent:this.timeExtent,signal:null===r||void 0===r?void 0:r.signal});case 9:if(l=e.sent,o=l.value,m=l.magdirValue,d=l.processedValue,h="",null!==o&&void 0!==o&&o.length){if(h="imagery-tile"===i.type&&i.hasStandardTime()&&null!=o[0]?o.map((function(e){return i.getStandardTimeValue(e)})).join(", "):o.join(", "),(b={ObjectId:0})[g="Raster.ServicePixelValue"]="imagery-tile"===i.type&&"Function"===i.raster.datasetFormat?null===d||void 0===d?void 0:d.join(", "):h,b[g+".Raw"]=h,x=null!==(p=null===(y=i.raster)||void 0===y?void 0:y.rasterInfo)&&void 0!==p?p:i.serviceRasterInfo,null!=(_=null===x||void 0===x?void 0:x.attributeTable)&&(T=_.fields,w=_.features,k=T.find((function(e){return"value"===e.name.toLowerCase()})),I=b[g],Z=k?w.find((function(e){return String(e.attributes[k.name])===I})):null,Z))for(E in Z.attributes)Z.attributes.hasOwnProperty(E)&&(b[this._rasterFieldPrefix+E]=Z.attributes[E]);"vector-magdir"!==(S=null===x||void 0===x?void 0:x.dataType)&&"vector-uv"!==S||(b["Raster.Magnitude"]=null===m||void 0===m?void 0:m[0],b["Raster.Direction"]=null===m||void 0===m?void 0:m[1]),R=new c.Z({geometry:this.fullExtent.clone(),attributes:b,layer:i,sourceLayer:i}),s.push(R)}return e.abrupt("return",s);case 16:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_getfullExtent",value:function(){return(0,p.lK)(this.layer.serviceRasterInfo,this.view.spatialReference)}}]),r}(e);return(0,o._)([(0,m.Cb)()],t.prototype,"fullExtent",null),(0,o._)([(0,m.Cb)()],t.prototype,"layer",void 0),(0,o._)([(0,m.Cb)({readOnly:!0})],t.prototype,"timeExtent",null),(0,o._)([(0,m.Cb)()],t.prototype,"view",void 0),(0,o._)([(0,m.Cb)()],t.prototype,"tileInfo",void 0),(0,o._)([(0,m.Cb)({readOnly:!0})],t.prototype,"hasTilingEffects",null),(0,o._)([(0,m.Cb)()],t.prototype,"datumTransformation",null),t=(0,o._)([(0,d.j)("esri.views.layers.ImageryTileLayerView")],t)}},13107:function(e,t,r){r.d(t,{Z:function(){return m}});var n=r(15671),i=r(43144),a=r(60136),u=r(29388),s=r(27366),l=r(32718),o=r(66978),c=r(94172),f=(r(93169),r(84936),r(10064),r(69912)),m=function(e){var t=function(e){(0,a.Z)(r,e);var t=(0,u.Z)(r);function r(){return(0,n.Z)(this,r),t.apply(this,arguments)}return(0,i.Z)(r,[{key:"initialize",value:function(){var e=this;this.addHandles((0,c.on)((function(){return e.layer}),"refresh",(function(t){e.doRefresh(t.dataChanged).catch((function(t){(0,o.D_)(t)||l.Z.getLogger(e).error(t)}))})),"RefreshableLayerView")}}]),r}(e);return t=(0,s._)([(0,f.j)("esri.views.layers.RefreshableLayerView")],t)}},24405:function(e,t,r){r.d(t,{V5:function(){return o},e7:function(){return s},zc:function(){return c}});var n=r(74165),i=r(93433),a=r(15861),u=r(37270);function s(e){return l.apply(this,arguments)}function l(){return l=(0,a.Z)((0,n.Z)().mark((function e(t){var r,a,s,l,o,c,f,m,d,h,p,v=arguments;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(s=v.length>1&&void 0!==v[1]?v[1]:t.popupTemplate)){e.next=3;break}return e.abrupt("return",[]);case 3:return e.next=5,s.getRequiredFields(t.fieldsIndex);case 5:if(l=e.sent,o=s.lastEditInfoEnabled,c=t.objectIdField,f=t.typeIdField,m=t.globalIdField,d=t.relationships,!l.includes("*")){e.next=13;break}return e.abrupt("return",["*"]);case 13:return h=o?(0,u.CH)(t):[],p=(0,u.Q0)(t.fieldsIndex,[].concat((0,i.Z)(l),(0,i.Z)(h))),e.abrupt("return",(f&&p.push(f),p&&c&&null!==(r=t.fieldsIndex)&&void 0!==r&&r.has(c)&&!p.includes(c)&&p.push(c),p&&m&&null!==(a=t.fieldsIndex)&&void 0!==a&&a.has(m)&&!p.includes(m)&&p.push(m),d&&d.forEach((function(e){var r,n=e.keyField;p&&n&&(null===(r=t.fieldsIndex)||void 0===r?void 0:r.has(n))&&!p.includes(n)&&p.push(n)})),p));case 15:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)}function o(e,t){return e.popupTemplate?e.popupTemplate:null!=t&&t.defaultPopupTemplateEnabled&&null!=e.defaultPopupTemplate?e.defaultPopupTemplate:null}function c(e,t){return null!=o(e,{defaultPopupTemplateEnabled:t})}},45008:function(e,t,r){r.d(t,{D:function(){return s},K:function(){return u}});r(59486);var n=r(68860),i=r(96669),a=r(53866);function u(e,t,r){var i,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new a.Z,s=0;if("2d"===r.type)s=t*(null!==(i=r.resolution)&&void 0!==i?i:0);else if("3d"===r.type){var l=r.overlayPixelSizeInMapUnits(e),o=r.basemapSpatialReference;s=null==o||o.equals(r.spatialReference)?t*l:(0,n.c9)(o)/(0,n.c9)(r.spatialReference)}var c=e.x-s,f=e.y-s,m=e.x+s,d=e.y+s,h=r.spatialReference;return u.xmin=Math.min(c,m),u.ymin=Math.min(f,d),u.xmax=Math.max(c,m),u.ymax=Math.max(f,d),u.spatialReference=h,u}function s(e,t,r){var n=r.toMap(e);return null!=n&&u(n,(0,i.k)(),r,l).intersects(t)}var l=new a.Z},48673:function(e,t,r){r.d(t,{Br:function(){return o},Fm:function(){return p},N9:function(){return y},RA:function(){return b},Tc:function(){return f},Ue:function(){return m},iC:function(){return c},s9:function(){return l},v:function(){return v},xW:function(){return h},zS:function(){return d}});var n=r(29439),i=r(6644),a=r(8548),u=r(57808),s=r(52311);function l(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"nearest",n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=!(n&&"u8"===t.pixelType),l=i?a.Br.FLOAT:a.Br.UNSIGNED_BYTE,o=null==t.pixels||0===t.pixels.length?null:i?t.getAsRGBAFloat():t.getAsRGBA(),c=e.capabilities.textureFloatLinear,f=new s.X;return f.width=t.width,f.height=t.height,f.internalFormat=i?a.lP.RGBA32F:a.VI.RGBA,f.samplingMode=!c||"bilinear"!==r&&"cubic"!==r?a.cw.NEAREST:a.cw.LINEAR,f.dataType=l,f.wrapMode=a.e8.CLAMP_TO_EDGE,new u.x(e,f,o)}function o(e,t){var r=t.spacing,i=t.offsets,l=t.coefficients,o=(0,n.Z)(t.size,2),c=o[0],f=o[1],m=r[0]>1,d=new s.X;d.width=m?4*c:c,d.height=f,d.internalFormat=a.lP.RGBA32F,d.dataType=a.Br.FLOAT,d.samplingMode=a.cw.NEAREST,d.wrapMode=a.e8.CLAMP_TO_EDGE;var h=new Float32Array(m?c*f*16:2*i.length);if(m&&null!=l)for(var p=0,v=0;p<l.length;p++)h[v++]=l[p],p%3==2&&(h[v++]=1);else for(var y=0;y<f;y++)for(var b=0;b<c;b++){var g=4*(y*c+b),x=2*(b*f+y);h[g]=i[x],h[g+1]=i[x+1],h[g+3]=-1===i[x]?0:1}return new u.x(e,d,h)}function c(e,t){var r=new s.X;return r.internalFormat=a.VI.RGBA,r.width=t.length/4,r.height=1,r.samplingMode=a.cw.NEAREST,r.wrapMode=a.e8.CLAMP_TO_EDGE,new u.x(e,r,t)}function f(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];return{u_flipY:a,u_applyTransform:!!e,u_opacity:n,u_transformSpacing:e?e.spacing:i.AG,u_transformGridSize:e?e.size:i.AG,u_targetImageSize:t,u_srcImageSize:r}}function m(e,t){return{u_colormapOffset:t||0,u_colormapMaxIndex:e?e.length/4-1:0}}function d(e,t){return{u_scale:e,u_offset:t}}function h(e){return{u_bandCount:e.bandCount,u_minOutput:e.outMin,u_maxOutput:e.outMax,u_minCutOff:e.minCutOff,u_maxCutOff:e.maxCutOff,u_factor:e.factor,u_useGamma:e.useGamma,u_gamma:e.gamma,u_gammaCorrection:e.gammaCorrection}}function p(e){return{u_hillshadeType:e.hillshadeType,u_sinZcosAs:e.sinZcosAs,u_sinZsinAs:e.sinZsinAs,u_cosZs:e.cosZs,u_weights:e.weights,u_factor:e.factor,u_minValue:e.minValue,u_maxValue:e.maxValue}}function v(e,t){var r=e.gl,n=t.glName,i=new Map;if(null==n)return i;for(var a,u=r.getProgramParameter(n,r.ACTIVE_UNIFORMS),s=0;s<u;s++)(a=r.getActiveUniform(n,s))&&i.set(a.name,{location:r.getUniformLocation(n,a.name),info:a});return i}function y(e,t,r){Object.keys(r).forEach((function(n){var i=t.get(n)||t.get(n+"[0]");i&&function(e,t,r,n){if(null===n||null==r)return!1;var i=n.info;switch(i.type){case a.Se.FLOAT:i.size>1?e.setUniform1fv(t,r):e.setUniform1f(t,r);break;case a.Se.FLOAT_VEC2:e.setUniform2fv(t,r);break;case a.Se.FLOAT_VEC3:e.setUniform3fv(t,r);break;case a.Se.FLOAT_VEC4:e.setUniform4fv(t,r);break;case a.Se.FLOAT_MAT3:e.setUniformMatrix3fv(t,r);break;case a.Se.FLOAT_MAT4:e.setUniformMatrix4fv(t,r);break;case a.Se.INT:i.size>1?e.setUniform1iv(t,r):e.setUniform1i(t,r);break;case a.Se.BOOL:e.setUniform1i(t,r?1:0);break;case a.Se.INT_VEC2:case a.Se.BOOL_VEC2:e.setUniform2iv(t,r);break;case a.Se.INT_VEC3:case a.Se.BOOL_VEC3:e.setUniform3iv(t,r);break;case a.Se.INT_VEC4:case a.Se.BOOL_VEC4:e.setUniform4iv(t,r);break;default:return!1}}(e,n,r[n],i)}))}function b(e,t,r,n){r.length===n.length&&(n.some((function(e){return null==e}))||r.some((function(e){return null==e}))||r.forEach((function(r,i){t.setUniform1i(r,i),e.bindTexture(n[i],i)})))}},38675:function(e,t,r){function n(e){return null!=e&&"object"==typeof e&&"declaredClass"in e&&"esri.WebMap"===e.declaredClass}r.d(t,{s:function(){return n}})}}]);
//# sourceMappingURL=18354.b5c3d957.chunk.js.map