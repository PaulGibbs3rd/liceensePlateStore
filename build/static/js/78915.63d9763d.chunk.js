"use strict";(self.webpackChunkreact_training=self.webpackChunkreact_training||[]).push([[78915],{75746:function(t,e,i){i.d(e,{E:function(){return n}});var r=new(i(8961).Z);function n(t){return null==t?["",!1]:r.hasBidiChar(t)?(e="rtl"===r.checkContextual(t)?"IDNNN":"ICNNN",[r.bidiTransform(t,e,"VLYSN"),!0]):[t,!1];var e}},82272:function(t,e,i){i.d(e,{BN:function(){return p},Yc:function(){return m},em:function(){return h},hZ:function(){return d},mx:function(){return _}});var r=i(74165),n=i(15861),s=i(43144),a=i(15671),o=i(42265),h="arial-unicode-ms",l="woff2",u=new Map,c=new Set,f=(0,s.Z)((function t(e,i){(0,a.Z)(this,t),this.fontFace=e,this.promise=i}));function _(t){return v.apply(this,arguments)}function v(){return v=(0,n.Z)((0,r.Z)().mark((function t(e){var i,n,s,a,h,_;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=y(e),n=m(e),!(s=u.get(i))){t.next=3;break}return t.abrupt("return",s.promise);case 3:if(a=new FontFace(e.family,"url('".concat(o.Z.fontsUrl,"/woff2/").concat(n,".").concat(l,"') format('").concat(l,"')"),{style:e.style,weight:e.weight}),!(h=document.fonts).has(a)||"loading"!==a.status){t.next=6;break}return t.abrupt("return",a.loaded);case 6:return _=a.load().then((function(){return h.add(a),a})),t.abrupt("return",(u.set(i,new f(a,_)),c.add(a),_));case 8:case"end":return t.stop()}}),t)}))),v.apply(this,arguments)}function d(t){return c.has(t)}function p(t){if(!t)return h;var e=t.toLowerCase().split(" ").join("-");switch(e){case"serif":return"noto-serif";case"sans-serif":return"arial-unicode-ms";case"monospace":return"ubuntu-mono";case"fantasy":return"cabin-sketch";case"cursive":return"redressed";default:return e}}function m(t){var e=g(t)+P(t);return p(t.family)+(e.length>0?e:"-regular")}function y(t){var e=g(t)+P(t);return(t.family||h)+(e.length>0?e:"-regular")}function g(t){if(!t.weight)return"";switch(t.weight.toLowerCase()){case"bold":case"bolder":return"-bold"}return""}function P(t){if(!t.style)return"";switch(t.style.toLowerCase()){case"italic":case"oblique":return"-italic"}return""}},23895:function(t,e,i){i.d(e,{z:function(){return p}});var r=i(88301),n=i(61120),s=i(93433),a=i(37762),o=i(60136),h=i(29388),l=i(29439),u=i(15671),c=i(43144),f=i(84652),_=i(41116),v=i(77981),d=i(80457),p=function(){function t(){(0,u.Z)(this,t)}return(0,c.Z)(t,[{key:"asJSON",value:function(){var t=(0,_.M)(this);return"esriGeometryEnvelope"===this.geometryType?{xmin:t[0][0][0],ymin:t[0][0][1],xmax:t[0][2][0],ymax:t[0][2][1]}:"esriGeometryMultipoint"===this.geometryType?{points:t.flat()}:"esriGeometryPoint"===this.geometryType?{x:t[0][0][0],y:t[0][0][1]}:"esriGeometryPolygon"===this.geometryType?{rings:t}:{paths:t}}},{key:"getCurrentRingArea",value:function(){if(this.pathSize<3)return 0;var t,e,i=0;if(this.seekPathStart(),!this.nextPoint())return 0;for(var r=t=this.x,n=e=this.y;this.nextPoint();)i+=(t-this.x)*(e+this.y),t=this.x,e=this.y;return-.5*(i+=(t-r)*(e+n))}},{key:"invertY",value:function(){this.yFactor*=-1}}],[{key:"fromOptimized",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;return(new m).initialize(t,e,i,r,n)}},{key:"fromJSON",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=g(t),n=(0,l.Z)(r,2),s=n[0],a=n[1];return(new P).initialize(s,a,e,i,1)}},{key:"fromOptimizedCIM",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;return(new x).initialize(t,e,i,r,n)}},{key:"fromJSONCIM",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,n=g(t),s=(0,l.Z)(n,2),a=s[0],o=s[1];return(new k).initialize(a,o,e,i,r)}},{key:"fromFeatureSetReader",value:function(t){var e=t.readGeometryForDisplay(),i=t.geometryType;return e&&i?this.fromOptimized(e,i):null}},{key:"fromFeatureSetReaderCIM",value:function(t){var e=t.readGeometryForDisplay(),i=t.geometryType;return e&&i?this.fromOptimizedCIM(e,i):null}},{key:"createEmptyOptimized",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return(new m).initialize(new d.Z,t,e,i,r)}},{key:"createEmptyJSON",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(new P).initialize([],t,e,i,1)}},{key:"createEmptyOptimizedCIM",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return(new x).initialize(new d.Z,t,e,i,r)}},{key:"createEmptyJSONCIM",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return(new k).initialize([],t,e,i,r)}}]),t}(),m=function(t){(0,o.Z)(i,t);var e=(0,h.Z)(i);function i(){var t;return(0,u.Z)(this,i),(t=e.apply(this,arguments))._end=-1,t}return(0,c.Z)(i,[{key:"initialize",value:function(t,e,i,r,n){return this.hasZ=i,this.hasM=r,this.geometryType=e,this._stride=2+Number(i)+Number(r),this._geometry=t,this._pathIndex=-1,this._pathOffset=0,this._pointOffset=-this._stride,this._end=-1,this.yFactor=n,this}},{key:"reset",value:function(){this.initialize(this._geometry,this.geometryType,this.hasZ,this.hasM,this.yFactor)}},{key:"seekPath",value:function(t){if(t>=0&&t<this.totalSize){if(this._pathIndex<t)for(;this._pathIndex<t&&this.nextPath(););else if(this._pathIndex>t)for(;this._pathIndex>t&&this.prevPath(););return!0}return!1}},{key:"seekPathStart",value:function(){this._pointOffset=this._pathOffset-this._stride}},{key:"seekPathEnd",value:function(){this._pointOffset=this._end}},{key:"seekInPath",value:function(t){var e=this._pathOffset+t*this._stride;return e>=0&&e<this._end&&(this._pointOffset=e,!0)}},{key:"nextPoint",value:function(){return(this._pointOffset+=this._stride)<this._end}},{key:"prevPoint",value:function(){return(this._pointOffset-=this._stride)>=this._pathOffset}},{key:"nextPath",value:function(){return!(this.pathIndex>=this.totalSize-1)&&(this._pathIndex>=0&&(this._pathOffset+=this._stride*this.pathSize),this._pathIndex++,this._pointOffset=this._pathOffset-this._stride,this._end=this._pointOffset+this._stride+this._stride*this.pathSize,!0)}},{key:"prevPath",value:function(){return!(this.pathIndex<=0)&&(this._pathIndex--,this._end=this._pathOffset,this._pathOffset-=this._stride*this.pathSize,this._pointOffset=this._pathOffset-this._stride,!0)}},{key:"pathLength",value:function(){for(var t=this._end,e=this._stride,i=this._geometry.coords,r=0,n=this._pathOffset+e;n<t;n+=e){var s=i[n-e],a=i[n-e+1],o=i[n]-s,h=i[n+1]-a;r+=Math.sqrt(o*o+h*h)}return r}},{key:"startPath",value:function(){this._geometry.lengths.push(0)}},{key:"pushPath",value:function(t){this.startPath(),this.pushPoints(t)}},{key:"pushPoint",value:function(t){for(var e=0;e<this._stride;++e)this._geometry.coords.push(t[e]);this._geometry.lengths[this.totalSize-1]++}},{key:"pushXY",value:function(t,e){this._geometry.coords.push(t,e),this._geometry.lengths[this.totalSize-1]++}},{key:"pushPoints",value:function(t){var e,i=(0,a.Z)(t);try{for(i.s();!(e=i.n()).done;)for(var r=e.value,n=0;n<this._stride;++n)this._geometry.coords.push(r[n])}catch(s){i.e(s)}finally{i.f()}this._geometry.lengths[this.totalSize-1]+=t.length}},{key:"pushCursor",value:function(t){var e,i,r=t.asOptimized();(e=this._geometry.coords).push.apply(e,(0,s.Z)(r.coords)),(i=this._geometry.lengths).push.apply(i,(0,s.Z)(r.lengths))}},{key:"asOptimized",value:function(){var t=this._geometry.clone();if(1!==this.yFactor)for(var e=1;e<t.coords.length;e+=this._stride)t.coords[e]*=this.yFactor;return"esriGeometryPoint"===this.geometryType&&(t.lengths.length=0),t}},{key:"isClosed",value:function(){for(var t=this._geometry.coords,e=this._pathOffset,i=this._end-this._stride,r=0;r<this._stride;r++)if(t[e+r]!==t[i+r])return!1;return!0}},{key:"clone",value:function(){return(new i).initialize(this._geometry.clone(),this.geometryType,this.hasZ,this.hasM,this.yFactor)}},{key:"totalPoints",get:function(){return this._geometry.isPoint?1:this._geometry.lengths.reduce((function(t,e){return t+e}))}},{key:"pathSize",get:function(){var t=this._geometry.lengths;return this._geometry.isPoint?1:this._pathIndex<0||this._pathIndex>t.length-1?0:t[this._pathIndex]}},{key:"totalSize",get:function(){return this._geometry.isPoint?1:this._geometry.lengths.length}},{key:"x",get:function(){return this._geometry.coords[this._pointOffset]},set:function(t){this._geometry.coords[this._pointOffset]=t}},{key:"y",get:function(){return this.yFactor*this._geometry.coords[this._pointOffset+1]},set:function(t){this._geometry.coords[this._pointOffset+1]=this.yFactor*t}},{key:"z",get:function(){return this._geometry.coords[this._pointOffset+2]},set:function(t){this._geometry.coords[this._pointOffset+2]=t}},{key:"m",get:function(){var t=this.hasZ?3:2;return this._geometry.coords[this._pointOffset+t]},set:function(t){this._geometry.coords[this._pointOffset+3]=t}},{key:"pathIndex",get:function(){return this._pathIndex}},{key:"_coordIndex",get:function(){return this._pointOffset/this._stride}}]),i}(p);function y(t){var e=[t.x,t.y];return t.z&&e.push(t.z),t.m&&e.push(t.m),e}function g(t){return(0,v.oU)(t)?[t.rings,"esriGeometryPolygon"]:(0,v.l9)(t)?[t.paths,"esriGeometryPolyline"]:(0,v.aW)(t)?[[t.points],"esriGeometryMultipoint"]:(0,v.YX)(t)?[[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]],"esriGeometryEnvelope"]:(0,v.wp)(t)?[[[y(t)]],"esriGeometryPoint"]:[[],"esriGeometryPolyline"]}var P=function(t){(0,o.Z)(i,t);var e=(0,h.Z)(i);function i(){return(0,u.Z)(this,i),e.apply(this,arguments)}return(0,c.Z)(i,[{key:"initialize",value:function(t,e,i,r,n){return this._paths=t,this.geometryType=e,this.hasZ=i,this.hasM=r,this._pathIndex=this._pointIndex=-1,this.yFactor=n,this._mIndex=this.hasZ?3:2,this}},{key:"reset",value:function(){this._pathIndex=this._pointIndex=-1}},{key:"seekPath",value:function(t){return this._pathIndex=t,this._pointIndex=-1,t>=0&&t<this.totalSize&&(this._currentPath=this._paths[t],!0)}},{key:"seekPathStart",value:function(){this._pointIndex=-1}},{key:"seekPathEnd",value:function(){this._pointIndex=this._currentPath.length}},{key:"seekInPath",value:function(t){return t>=0&&t<this._currentPath.length&&(this._pointIndex=t,this._currentPoint=this._currentPath[this._pointIndex],!0)}},{key:"nextPoint",value:function(){return this._currentPoint=this._currentPath[++this._pointIndex],this._pointIndex<this._currentPath.length}},{key:"prevPoint",value:function(){return this._currentPoint=this._currentPath[--this._pointIndex],this._pointIndex>=0}},{key:"nextPath",value:function(){return this._pointIndex=-1,this._currentPath=this._paths[++this._pathIndex],this._pathIndex<this.totalSize}},{key:"prevPath",value:function(){return this.pathIndex>0&&(this._pointIndex=-1,this._pathIndex--,this._currentPath=this._paths[this._pathIndex],!0)}},{key:"pathLength",value:function(){for(var t=this._currentPath.length,e=this._currentPath,i=0,r=1;r<t;r++){var n=e[r-1],s=e[r],a=n[0],o=n[1],h=s[0]-a,l=s[1]-o;i+=Math.sqrt(h*h+l*l)}return i}},{key:"startPath",value:function(){this._paths.push([])}},{key:"pushPath",value:function(t){this._paths.push(t)}},{key:"pushPoint",value:function(t){this._paths[this.totalSize-1].push(t)}},{key:"pushXY",value:function(t,e){this._paths[this.totalSize-1].push([t,e])}},{key:"pushPoints",value:function(t){var e;(e=this._paths[this.totalSize-1]).push.apply(e,(0,s.Z)(t))}},{key:"pushCursor",value:function(t){var e,i=(0,_.M)(t),r=(0,a.Z)(i);try{for(r.s();!(e=r.n()).done;){var n=e.value;this.pushPath(n)}}catch(s){r.e(s)}finally{r.f()}}},{key:"asOptimized",value:function(){var t,e=new d.Z;if("esriGeometryPoint"===this.geometryType)(t=e.coords).push.apply(t,(0,s.Z)(this._paths[0][0])),e.lengths.length=0;else{var i,r=(0,a.Z)(this._paths);try{for(r.s();!(i=r.n()).done;){var n,o=i.value,h=(0,a.Z)(o);try{for(h.s();!(n=h.n()).done;){var l=n.value;e.coords.push(l[0]),e.coords.push(l[1]*this.yFactor),this.hasZ&&e.coords.push(l[2]),this.hasM&&e.coords.push(l[this._mIndex])}}catch(u){h.e(u)}finally{h.f()}e.lengths.push(o.length)}}catch(u){r.e(u)}finally{r.f()}}return e}},{key:"isClosed",value:function(){for(var t=this._currentPath[0],e=this._currentPath[this._currentPath.length-1],i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0}},{key:"clone",value:function(){return(new i).initialize((0,f.d9)(this._paths),this.geometryType,this.hasZ,this.hasM,this.yFactor)}},{key:"totalPoints",get:function(){return this._paths.map((function(t){return t.length})).reduce((function(t,e){return t+e}))}},{key:"pathSize",get:function(){return this._pathIndex<0||this._pathIndex>this.totalSize-1?-1:this._paths[this._pathIndex].length}},{key:"totalSize",get:function(){return this._paths.length}},{key:"x",get:function(){return this._currentPoint[0]},set:function(t){this._currentPoint[0]=t}},{key:"y",get:function(){return this.yFactor*this._currentPoint[1]},set:function(t){this._currentPoint[1]=this.yFactor*t}},{key:"z",get:function(){return this._currentPoint[2]},set:function(t){this._currentPoint[2]=t}},{key:"m",get:function(){return this._currentPoint[this._mIndex]},set:function(t){this._currentPoint[this._mIndex]=t}},{key:"pathIndex",get:function(){return this._pathIndex}}]),i}(p),x=function(t){(0,o.Z)(i,t);var e=(0,h.Z)(i);function i(){return(0,u.Z)(this,i),e.apply(this,arguments)}return(0,c.Z)(i,[{key:"initialize",value:function(t,e,s,a,o){return(0,r.Z)((0,n.Z)(i.prototype),"initialize",this).call(this,t,e,s,a,o),this._controlPoints||(this._controlPoints=this._controlPoints=new Array(this.totalSize).fill(void 0).map((function(t){return new Set}))),this}},{key:"startPath",value:function(){(0,r.Z)((0,n.Z)(i.prototype),"startPath",this).call(this),this._controlPoints.push(new Set)}},{key:"clone",value:function(){var t=(new i).initialize(this._geometry.clone(),this.geometryType,this.hasZ,this.hasM,this.yFactor);return t._controlPoints=this._controlPoints,t}},{key:"setControlPoint",value:function(){this._controlPoints[this.pathIndex].add(this._coordIndex)}},{key:"getControlPoint",value:function(){return this._controlPoints[this.pathIndex].has(this._coordIndex)}},{key:"setControlPointAt",value:function(t){this._controlPoints[this.pathIndex].add(t)}},{key:"getControlPointAt",value:function(t){return this._controlPoints[this.pathIndex].has(t)}}]),i}(m),k=function(t){(0,o.Z)(i,t);var e=(0,h.Z)(i);function i(){return(0,u.Z)(this,i),e.apply(this,arguments)}return(0,c.Z)(i,[{key:"initialize",value:function(t,e,s,a,o){return(0,r.Z)((0,n.Z)(i.prototype),"initialize",this).call(this,t,e,s,a,o)}},{key:"clone",value:function(){return(new i).initialize((0,f.d9)(this._paths),this.geometryType,this.hasZ,this.hasM,this.yFactor)}},{key:"setControlPoint",value:function(){this._paths[this.pathIndex][this._pointIndex][4]=1}},{key:"getControlPoint",value:function(){return 1===this._paths[this.pathIndex][this._pointIndex][4]}},{key:"setControlPointAt",value:function(t){this._paths[this.pathIndex][t][4]=1}},{key:"getControlPointAt",value:function(t){return 1===this._paths[this.pathIndex][t][4]}}]),i}(P)},36372:function(t,e,i){i.d(e,{r:function(){return l}});var r=i(29439),n=i(65156),s=i(376),a=i(4954),o=i(69662),h=i(66504);function l(t){if(0===t.totalSize)return null;var e=(0,s.Cs)(t);if(!e)return null;var i=4*(Math.abs(e[0])+Math.abs(e[2])+Math.abs(e[1])+Math.abs(e[3])+1)*222045e-19,r=0,o=0;t.reset();for(var h=0;t.nextPath();h++){var l=t.getCurrentRingArea();l>o&&(o=l,r=h)}if(t.seekPath(r),0===t.pathSize)return null;t.seekPathStart();var _=(0,s.qu)(t);if(Math.abs(o)<=2*i*i)return[(_[0]+_[2])/2,(_[1]+_[3])/2];t.seekPathStart();var v=(0,a.Zc)(t,(0,n.Ue)());if(null===v)return null;if(t.totalPoints<4)return v;var d=[[NaN,NaN],[NaN,NaN],[NaN,NaN],[NaN,NaN]],g=[NaN,NaN,NaN,NaN],P=[NaN,NaN,NaN,NaN],x=!1,k=c(v,t,!0);0===k.distance&&(x=!0,d[0][0]=v[0],d[0][1]=v[1],k=c(v,t,!1)),g[0]=k.distance,P[0]=0;var M=[NaN,NaN],b=!1,S=.25,C=-1,w=NaN;do{if(w=NaN,d[1]=f(t,p(_[0],_[2],S),i,e),isNaN(d[1][0])||isNaN(d[1][1])||(w=(k=c(d[1],t,!1)).distance),!isNaN(w)&&w>i&&u(d[1],t))b=!0,g[1]=w,P[1]=m(d[1],v);else if(!isNaN(w)&&w>C&&(C=w,M[0]=d[1][0],M[1]=d[1][1]),(S-=.01)<.1){if(!(C>=0))break;b=!0,g[1]=C,d[1][0]=M[0],d[1][1]=M[1],P[1]=m(d[1],v)}}while(!b);b=!1,S=.5,C=-1;var I=.01,z=1;do{if(w=NaN,d[2]=f(t,p(_[0],_[2],S),i,e),isNaN(d[2][0])||isNaN(d[2][1])||(w=(k=c(d[2],t,!1)).distance),!isNaN(w)&&w>i&&u(d[2],t))b=!0,g[2]=w,P[2]=m(d[2],v);else if(!isNaN(w)&&w>C)C=w,M[0]=d[2][0],M[1]=d[2][1];else if(w>C&&(C=w,M[0]=d[2][0],M[1]=d[2][1]),S=.5+I*z,I+=.01,z*=-1,S<.3||S>.7){if(!(C>=0))break;b=!0,g[2]=C,d[2][0]=M[0],d[2][1]=M[1],P[2]=m(d[2],v)}}while(!b);b=!1,S=.75,C=-1;do{if(w=NaN,d[3]=f(t,p(_[0],_[2],S),i,e),isNaN(d[3][0])||isNaN(d[3][1])||(w=(k=c(d[3],t,!1)).distance),!isNaN(w)&&w>i&&u(d[3],t))b=!0,g[3]=w,P[3]=m(d[3],v);else if(w>C&&(C=w,M[0]=d[3][0],M[1]=d[3][1]),(S+=.01)>.9){if(!(C>=0))break;b=!0,g[3]=C,d[3][0]=M[0],d[3][1]=M[1],P[3]=m(d[3],v)}}while(!b);for(var L,Z=[0,1,2,3],T=x?0:1,E=T;E<4;E++)for(var A=T;A<3;A++){var F=P[A],R=P[A+1];y(F,R)>0&&(L=Z[A],Z[A]=Z[A+1],Z[A+1]=L,P[A]=R,P[A+1]=F)}for(var G=T,N=0,O=0,X=T;X<4;X++){switch(X){case 0:O=2*g[Z[X]];break;case 1:O=1.66666666*g[Z[X]];break;case 2:O=1.33333333*g[Z[X]];break;case 3:O=g[Z[X]]}O>N&&(N=O,G=Z[X])}return d[G]}function u(t,e){var i,r,n,s,a=0;for(e.reset();e.nextPath()&&e.nextPoint();)for(i=e.x,r=e.y;e.nextPoint();i=n,r=s)n=e.x,s=e.y,r>t[1]!=s>t[1]&&((n-i)*(t[1]-r)-(s-r)*(t[0]-i)>0?a++:a--);return 0!==a}function c(t,e,i){if(i&&u(t,e))return{coord:t,distance:0};var r=1/0,n=0,s=0,a=[0,0],h=[0,0],l=[0,0];for(e.reset();e.nextPath()&&e.nextPoint();)if(!(e.pathSize<2))for(a[0]=e.x,a[1]=e.y;e.nextPoint();a=h){h=[e.x,e.y],(0,o.r8)(l,t,a,h);var c=m(t,l);c<r&&(r=c,n=l[0],s=l[1])}return{coord:[n,s],distance:Math.sqrt(r)}}function f(t,e,i,r){var s=[e,0],a=1/0,o=1/0,l=!1,u=!1,c=[[e,r[1]-1],[e,r[3]+1]],f=[0,0],d=[0,0],p=[0,0],m=[[0,0],[0,0]],y=(0,n.Ue)();for(t.reset();t.nextPath()&&t.nextPoint();)if(!(t.pathSize<2))for(m[0][0]=t.x,m[0][1]=t.y;t.nextPoint();m[0][0]=m[1][0],m[0][1]=m[1][1])if(m[1][0]=t.x,m[1][1]=t.y,null!==_(y,m)&&(d[0]=c[0][0],d[1]=c[0][1],p[0]=c[1][0],p[1]=c[1][1],0!==v(y,d,p)&&(0,h.UT)(c[0],c[1],m[0],m[1],f))){var g=f[1];a>o?g<a&&(a=g,l=!0):g<o&&(o=g,u=!0)}return l&&u?s[1]=(a+o)/2:s[0]=s[1]=NaN,s}function _(t,e){if(e.length<2)return null;t||(t=(0,n.Ue)());var i=(0,r.Z)(e[0],2),s=i[0],a=i[1],o=(0,r.Z)(e[1],2),h=o[0],l=o[1];return t[0]=Math.min(s,h),t[1]=Math.min(a,l),t[2]=Math.max(s,h),t[3]=Math.max(a,l),t}function v(t,e,i){var r=d(e,t),n=d(i,t),s=t[0],a=t[1],o=t[2],h=t[3];if(r&n)return 0;if(!(r|n))return 4;var l=(r?1:0)|(n?2:0);do{var u=i[0]-e[0],c=i[1]-e[1];if(u>c)3&r?(1&r?(e[1]+=c*(s-e[0])/u,e[0]=s):(e[1]+=c*(o-e[0])/u,e[0]=o),r=d(e,t)):3&n?(1&n?(i[1]+=c*(s-i[0])/u,i[0]=s):(i[1]+=c*(o-i[0])/u,i[0]=o),n=d(i,t)):r?(4&r?(e[0]+=u*(a-e[1])/c,e[1]=a):(e[0]+=u*(h-e[1])/c,e[1]=h),r=d(e,t)):(4&n?(i[0]+=u*(a-i[1])/c,i[1]=a):(i[0]+=u*(h-i[1])/c,i[1]=h),n=d(i,t));else if(12&r?(4&r?(e[0]+=u*(a-e[1])/c,e[1]=a):(e[0]+=u*(h-e[1])/c,e[1]=h),r=d(e,t)):12&n?(4&n?(i[0]+=u*(a-i[1])/c,i[1]=a):(i[0]+=u*(h-i[1])/c,i[1]=h),n=d(i,t)):r?(1&r?(e[1]+=c*(s-e[0])/u,e[0]=s):(e[1]+=c*(o-e[0])/u,e[0]=o),r=d(e,t)):(1&n?(i[1]+=c*(s-i[0])/u,i[0]=s):(i[1]+=c*(o-i[0])/u,i[0]=o),n=d(i,t)),r&n)return 0}while(r|n);return l}function d(t,e){return(t[0]<e[0]?1:0)|(t[0]>e[2]?1:0)<<1|(t[1]<e[1]?1:0)<<2|(t[1]>e[3]?1:0)<<3}function p(t,e,i){return t+(e-t)*i}function m(t,e){return(t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])}function y(t,e){if(t<e)return-1;if(t>e)return 1;if(t===e)return 0;var i=isNaN(t),r=isNaN(e);return i<r?-1:i>r?1:0}},25290:function(t,e,i){i.d(e,{qh:function(){return o},v1:function(){return h},vT:function(){return l}});var r=i(15671),n=i(43144),s=i(35747),a=i(84284);function o(t,e){t[4]=e}var h=function(){function t(e){var i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;(0,r.Z)(this,t),this.isClosed=!1,this.geometryCursor=null,this.geometryCursor=!i&&"esriGeometryPolygon"===e.geometryType||!n&&"esriGeometryPolyline"===e.geometryType?null:e,this.geomUnitsPerPoint=s,this.iterateMultiPath=!1,this.iteratePath=!1,this.internalPlacement=new a.u}return(0,n.Z)(t,[{key:"next",value:function(){if(!this.geometryCursor)return null;var t=this.processMultiPath(this.geometryCursor);return this.iterateMultiPath&&t||(this.geometryCursor=null),t}},{key:"processMultiPath",value:function(t){for(;this.iteratePath||t.pathIndex<t.totalSize-1;){this.iteratePath||t.nextPath(),this.iterateMultiPath=!0;var e=this.processPath(t);if(e)return e}return this.iterateMultiPath=!1,null}}]),t}(),l=function(){function t(e,i,n){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;(0,r.Z)(this,t),this.isClosed=!1,this._tileKey=null,this.inputGeometries=e,this.acceptPolygon=i,this.acceptPolyline=n,this.geomUnitsPerPoint=s,this.iteratePath=!1,this.multiPathCursor=null}return(0,n.Z)(t,[{key:"next",value:function(){for(;;){if(!this.multiPathCursor){for(var t=this.inputGeometries.next();t&&(this.isClosed=this.acceptPolygon&&"esriGeometryPolygon"===t.geometryType||"esriGeometryEnvelope"===t.geometryType,this.multiPathCursor=t,!this.multiPathCursor);)t=this.inputGeometries.next();if(!this.multiPathCursor)return null;this._tileKey&&this.isClippingRequired(this.multiPathCursor)&&(this.multiPathCursor.reset(),this.multiPathCursor=(0,s.L)(this.multiPathCursor,256))}for(;this.iteratePath||this.multiPathCursor.nextPath();){this.multiPathCursor.seekPathStart();var e=this.processPath(this.multiPathCursor);if(e)return e}this.multiPathCursor=null}}},{key:"isClippingRequired",value:function(t){return!1}}]),t}()},35747:function(t,e,i){i.d(e,{L:function(){return u},z:function(){return l}});var r,n=i(37762),s=i(15671),a=i(43144),o=i(23895),h=i(40316),l=function(){function t(e){(0,s.Z)(this,t),this._geometry=e}return(0,a.Z)(t,[{key:"next",value:function(){var t=this._geometry;return this._geometry=null,t}}]),t}();function u(t,e){r||(r=new h.bN(0,0,0,1));var i,s,a="esriGeometryPolygon"===t.geometryType,l=a?h.Vl.Polygon:h.Vl.LineString,u=a?3:2;for(r.reset(l),r.setPixelMargin(e+1),r.setExtent(512);t.nextPath();)if(!(t.pathSize<u)){for(t.nextPoint(),i=t.x,s=-t.y,r.moveTo(i,s);t.nextPoint();)i=t.x,s=-t.y,r.lineTo(i,s);a&&r.close()}var c=r.result(!1);if(c){var f,_=o.z.createEmptyOptimizedCIM(t.geometryType),v=(0,n.Z)(c);try{for(v.s();!(f=v.n()).done;){var d=f.value;_.startPath();var p,m=(0,n.Z)(d);try{for(m.s();!(p=m.n()).done;){var y=p.value;_.pushXY(y.x,-y.y)}}catch(g){m.e(g)}finally{m.f()}}}catch(g){v.e(g)}finally{v.f()}return _.reset(),_}return null}},82653:function(t,e,i){i.d(e,{W:function(){return S},h:function(){return b}});var r=i(81241),n=i(8878),s=i(65057),a=i(53704),o=i(38901),h=i(13874),l=i(24434),u=i(12869),c=i(69093),f=i(91583),_=i(67993),v=i(64369),d=i(13957),p=i(38236),m=i(53986),y=i(1243),g=i(81624),P=i(50516),x=i(46628),k=i(93268),M=i(63156);function b(t){if(!t)return null;switch(t.type){case"CIMGeometricEffectAddControlPoints":return r.T.local();case"CIMGeometricEffectArrow":return n.P.local();case"CIMGeometricEffectBuffer":return s.I.local();case"CIMGeometricEffectControlMeasureLine":return a.Y.local();case"CIMGeometricEffectCut":return o.d.local();case"CIMGeometricEffectDashes":return h.x.local();case"CIMGeometricEffectDonut":return l.h.local();case"CIMGeometricEffectJog":return u.F.local();case"CIMGeometricEffectMove":return c.b.local();case"CIMGeometricEffectOffset":return f.F.local();case"CIMGeometricEffectReverse":return _.m.local();case"CIMGeometricEffectRotate":return v.O.local();case"CIMGeometricEffectScale":return d.I.local();case"CIMGeometricEffectWave":return p.w.local()}return null}function S(t){if(!t)return null;switch(t.type){case"CIMMarkerPlacementAlongLineSameSize":return m.W.local();case"CIMMarkerPlacementAtExtremities":return y.j.local();case"CIMMarkerPlacementAtRatioPositions":return g.x.local();case"CIMMarkerPlacementInsidePolygon":return P.O.local();case"CIMMarkerPlacementOnLine":return x.D.local();case"CIMMarkerPlacementOnVertices":return k.o.local();case"CIMMarkerPlacementPolygonCenter":return M.y.local()}return null}},84284:function(t,e,i){i.d(e,{u:function(){return s}});var r=i(15671),n=i(43144),s=function(){function t(){(0,r.Z)(this,t),this.setIdentity()}return(0,n.Z)(t,[{key:"getAngle",value:function(){return(null==this.rz||0===this.rz&&1!==this.rzCos&&0!==this.rzSin)&&(this.rz=Math.atan2(this.rzSin,this.rzCos)),this.rz}},{key:"setIdentity",value:function(){this.tx=0,this.ty=0,this.tz=0,this.s=1,this.rx=0,this.ry=0,this.rz=0,this.rzCos=1,this.rzSin=0}},{key:"setTranslate",value:function(t,e){this.tx=t,this.ty=e}},{key:"setTranslateZ",value:function(t){this.tz=t}},{key:"setRotateCS",value:function(t,e){this.rz=void 0,this.rzCos=t,this.rzSin=e}},{key:"setRotate",value:function(t){this.rz=t,this.rzCos=void 0,this.rzSin=void 0}},{key:"setRotateY",value:function(t){this.ry=t}},{key:"setScale",value:function(t){this.s=t}},{key:"setMeasure",value:function(t){this.m=t}}]),t}()},28222:function(t,e,i){i.d(e,{cD:function(){return B},uQ:function(){return D},Tu:function(){return Y},zA:function(){return O},et:function(){return V}});var r=i(88301),n=i(61120),s=i(60136),a=i(29388),o=i(29439),h=i(37762),l=i(15671),u=i(43144),c=i(82272),f=i(93169),_=i(84652),v=i(32718),d=i(13005),p=i(17842),m=i(23895),y=i(65156),g=i(376),P=i(4954),x=i(77981),k=i(35747),M=function(){function t(){(0,l.Z)(this,t)}return(0,u.Z)(t,[{key:"applyColorSubstituition",value:function(t,e){if(!e)return t;this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement("canvas"));var i=t.width,r=t.height,n=this._rasterizationCanvas,s=n.getContext("2d",{willReadFrequently:!0});t!==n&&(n.width=i,n.height=r,s.drawImage(t,0,0,i,r));var a=s.getImageData(0,0,i,r).data;if(e){var l,u=(0,h.Z)(e);try{for(u.s();!(l=u.n()).done;){var c=l.value;if(c&&c.oldColor&&4===c.oldColor.length&&c.newColor&&4===c.newColor.length){var f=(0,o.Z)(c.oldColor,4),_=f[0],v=f[1],d=f[2],p=f[3],m=(0,o.Z)(c.newColor,4),y=m[0],g=m[1],P=m[2],x=m[3];if(_===y&&v===g&&d===P&&p===x)continue;for(var k=0;k<a.length;k+=4)_===a[k]&&v===a[k+1]&&d===a[k+2]&&p===a[k+3]&&(a[k]=y,a[k+1]=g,a[k+2]=P,a[k+3]=x)}}}catch(b){u.e(b)}finally{u.f()}}var M=new ImageData(a,i,r);return s.putImageData(M,0,0),n}},{key:"tintImageData",value:function(t,e){if(!e||e.length<4)return t;this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement("canvas"));var i=t.width,r=t.height,n=this._rasterizationCanvas,s=n.getContext("2d",{willReadFrequently:!0});t!==n&&(n.width=i,n.height=r,s.drawImage(t,0,0,i,r));for(var a=s.getImageData(0,0,i,r),o=new Uint8Array(a.data),h=[e[0]/255,e[1]/255,e[2]/255,e[3]/255],l=0;l<o.length;l+=4)o[l]*=h[0],o[l+1]*=h[1],o[l+2]*=h[2],o[l+3]*=h[3];var u=new ImageData(new Uint8ClampedArray(o.buffer),i,r);return s.putImageData(u,0,0),n}}]),t}(),b=i(82653),S=i(84284),C=i(86553),w=i(48202);function I(t){var e=t.getFrame(0);if(e instanceof HTMLImageElement||e instanceof HTMLCanvasElement)return e;var i=document.createElement("canvas");i.width=t.width,i.height=t.height;var r=i.getContext("2d");return e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0),i}var z=i(691),L=i(81283);function Z(t){return"rgba(".concat(t.slice(0,3).toString(),",").concat(t[3],")")}var T=function(){function t(e){(0,l.Z)(this,t),e&&(this._textRasterizationCanvas=e)}return(0,u.Z)(t,[{key:"rasterizeText",value:function(t,e){var i;this._textRasterizationCanvas||(this._textRasterizationCanvas=document.createElement("canvas"));var r=this._textRasterizationCanvas,n=r.getContext("2d",{willReadFrequently:!0});E(n,e),this._parameters=e,this._textLines=t.split(/\r?\n/),this._lineHeight=this._computeLineHeight();var s=e.font,a=s.decoration,o=s.weight;this._lineThroughWidthOffset=a&&"line-through"===a?.1*this._lineHeight:0;var l=null!=e.backgroundColor||null!=e.borderLine,u=l?L.c9:0,c=this._computeTextWidth(n,e)+2*u,f=this._lineHeight*this._textLines.length+2*u;if(r.width=c+2*this._lineThroughWidthOffset,r.height=f,0===r.width||0===r.height)return r.width=r.height=1,{size:[0,0],image:new Uint32Array(0),sdf:!1,simplePattern:!1,anchorX:0,anchorY:0,canvas:r};this._renderedLineHeight=Math.round(this._lineHeight*e.pixelRatio),this._renderedHaloSize=(0,p.F2)(e.halo.size)*e.pixelRatio,this._renderedWidth=c*e.pixelRatio,this._renderedHeight=f*e.pixelRatio,this._lineThroughWidthOffset*=e.pixelRatio;var _=null!==(i=e.color)&&void 0!==i?i:[0,0,0,0],v=e.halo&&e.halo.color?e.halo.color:[0,0,0,0];this._fillStyle=Z(_),this._haloStyle=function(t){return"rgb(".concat(t.slice(0,3).toString(),")")}(v);var d=this._renderedLineHeight,m=this._renderedHaloSize;n.save(),n.clearRect(0,0,r.width,r.height),E(n,e);var y=u*e.pixelRatio,g=function(t,e){return"center"===t?.5*e:"right"===t?e:0}(n.textAlign,this._renderedWidth-2*y)+m+y,P=m+y,x=m>0,k=this._lineThroughWidthOffset,M=0;if(l){var b,S,C,w,I;n.save();var z=null!==(b=e.backgroundColor)&&void 0!==b?b:[0,0,0,0],T=null!==(S=null===(C=e.borderLine)||void 0===C?void 0:C.color)&&void 0!==S?S:[0,0,0,0],A=2*(0,p.F2)(null!==(w=null===(I=e.borderLine)||void 0===I?void 0:I.size)&&void 0!==w?w:0);n.fillStyle=Z(z),n.strokeStyle=Z(T),n.lineWidth=A,n.fillRect(0,0,r.width,r.height),n.strokeRect(0,0,r.width,r.height),n.restore()}x&&this._renderHalo(n,g,P,k,M,e),M+=P,k+=g;var F,R=(0,h.Z)(this._textLines);try{for(R.s();!(F=R.n()).done;){var G=F.value;x?(n.globalCompositeOperation="destination-out",n.fillStyle="rgb(0, 0, 0)",n.fillText(G,k,M),n.globalCompositeOperation="source-over",n.fillStyle=this._fillStyle,n.fillText(G,k,M)):(n.fillStyle=this._fillStyle,n.fillText(G,k,M)),a&&"none"!==a&&this._renderDecoration(n,k,M,a,o),M+=d}}catch(U){R.e(U)}finally{R.f()}n.restore();var N,O,X=this._renderedWidth+2*this._lineThroughWidthOffset,D=this._renderedHeight,Y=n.getImageData(0,0,X,D),B=new Uint8Array(Y.data);if(e.premultiplyColors)for(var H,J=0;J<B.length;J+=4)H=B[J+3]/255,B[J]=B[J]*H,B[J+1]=B[J+1]*H,B[J+2]=B[J+2]*H;switch(e.horizontalAlignment){case"left":N=-.5;break;case"right":N=.5;break;default:N=0}switch(e.verticalAlignment){case"bottom":O=-.5;break;case"top":O=.5;break;case"baseline":O=-1/6;break;default:O=0}return{size:[X,D],image:new Uint32Array(B.buffer),sdf:!1,simplePattern:!1,anchorX:N,anchorY:O,canvas:r}}},{key:"_renderHalo",value:function(t,e,i,r,n,s){var a=this._renderedWidth,o=this._renderedHeight;this._haloRasterizationCanvas||(this._haloRasterizationCanvas=document.createElement("canvas")),this._haloRasterizationCanvas.width=a,this._haloRasterizationCanvas.height=o;var h=this._haloRasterizationCanvas,l=h.getContext("2d");l.clearRect(0,0,a,o),E(l,s);var u=s.font,c=u.decoration,f=u.weight;l.fillStyle=this._haloStyle,l.strokeStyle=this._haloStyle,l.lineJoin="round",this._renderHaloNative(l,e,i,c,f),t.globalAlpha=this._parameters.halo.color[3],t.drawImage(h,0,0,a,o,r,n,a,o),t.globalAlpha=1}},{key:"_renderHaloNative",value:function(t,e,i,r,n){var s,a=this._renderedLineHeight,o=this._renderedHaloSize,l=(0,h.Z)(this._textLines);try{for(l.s();!(s=l.n()).done;){for(var u=s.value,c=2*o,f=0;f<5;f++){var _=(.6+.1*f)*c;t.lineWidth=_,t.strokeText(u,e,i),r&&"none"!==r&&this._renderDecoration(t,e,i,r,n,_)}i+=a}}catch(v){l.e(v)}finally{l.f()}}},{key:"computeTextSize",value:function(t,e){this._textRasterizationCanvas||(this._textRasterizationCanvas=document.createElement("canvas"));var i=this._textRasterizationCanvas,r=i.getContext("2d");E(r,e),this._parameters=e,this._textLines=t.split(/\r?\n/),this._lineHeight=this._computeLineHeight();var n=this._computeTextWidth(r,e),s=this._lineHeight*this._textLines.length;return i.width=n,i.height=s,[n*e.pixelRatio,s*e.pixelRatio]}},{key:"_computeTextWidth",value:function(t,e){var i,r=0,n=(0,h.Z)(this._textLines);try{for(n.s();!(i=n.n()).done;){var s=i.value;r=Math.max(r,t.measureText(s).width)}}catch(o){n.e(o)}finally{n.f()}var a=e.font;return("italic"===a.style||"oblique"===a.style||"string"==typeof a.weight&&("bold"===a.weight||"bolder"===a.weight)||"number"==typeof a.weight&&a.weight>600)&&(r+=.3*t.measureText("w").width),r+=2*(0,p.F2)(this._parameters.halo.size),Math.round(r)}},{key:"_computeLineHeight",value:function(){var t=1.275*this._parameters.size,e=this._parameters.font.decoration;return e&&"underline"===e&&(t*=1.3),Math.round(t+2*(0,p.F2)(this._parameters.halo.size))}},{key:"_renderDecoration",value:function(t,e,i,r,n,s){var a=.9*this._lineHeight,o="bold"===n?.06:"bolder"===n?.09:.04;switch(t.textAlign){case"center":e-=this._renderedWidth/2;break;case"right":e-=this._renderedWidth}var h=t.textBaseline;if("underline"===r)switch(h){case"top":i+=a;break;case"middle":i+=a/2}else if("line-through"===r)switch(h){case"top":i+=a/1.5;break;case"middle":i+=a/3}var l=s?1.5*s:Math.ceil(a*o);t.save(),t.beginPath(),t.strokeStyle=t.fillStyle,t.lineWidth=l,t.moveTo(e-this._lineThroughWidthOffset,i),t.lineTo(e+this._renderedWidth+2*this._lineThroughWidthOffset,i),t.stroke(),t.restore()}}]),t}();function E(t,e){var i,r=Math.max(e.size,.5),n=e.font,s="".concat(n.style," ").concat(n.weight," ").concat((0,p.F2)(r*e.pixelRatio).toFixed(1),"px ").concat(n.family,", sans-serif");switch(t.font=s,t.textBaseline="top",e.horizontalAlignment){case"left":default:i="left";break;case"right":i="right";break;case"center":i="center"}t.textAlign=i}var A=i(31027),F=i(94109),R=i(62106),G=i(95857),N=Math.PI/180,O=function(){function t(e){(0,l.Z)(this,t),this._t=e}return(0,u.Z)(t,[{key:"clone",value:function(){return new t(this._t.slice())}},{key:"transform",value:function(t){var e=this._t;return[e[0]*t[0]+e[1]*t[1]+e[2],e[3]*t[0]+e[4]*t[1]+e[5]]}},{key:"scale",value:function(t,e){var i=this._t;return i[0]*=t,i[1]*=t,i[2]*=t,i[3]*=e,i[4]*=e,i[5]*=e,this}},{key:"scaleRatio",value:function(){return Math.sqrt(this._t[0]*this._t[0]+this._t[1]*this._t[1])}},{key:"translate",value:function(t,e){var i=this._t;return i[2]+=t,i[5]+=e,this}},{key:"rotate",value:function(e){return t.multiply(this,t.createRotate(e),this)}},{key:"angle",value:function(){var t=this._t[0],e=this._t[3],i=Math.sqrt(t*t+e*e);return[t/i,e/i]}},{key:"invert",value:function(){var e=this._t,i=e[0]*e[4]-e[1]*e[3];if(0===i)return new t([0,0,0,0,0,0]);i=1/i;var r=(e[1]*e[5]-e[2]*e[4])*i,n=(e[2]*e[3]-e[0]*e[5])*i;return new t([e[4]*i,-e[1]*i,r,-e[3]*i,e[0]*i,n])}}],[{key:"createIdentity",value:function(){return new t([1,0,0,0,1,0])}},{key:"createScale",value:function(e,i){return new t([e,0,0,0,i,0])}},{key:"createTranslate",value:function(e,i){return new t([0,0,e,0,0,i])}},{key:"createRotate",value:function(e){var i=Math.cos(e),r=Math.sin(e);return new t([i,-r,0,r,i,0])}},{key:"multiply",value:function(t,e,i){var r=t._t,n=e._t,s=r[0]*n[0]+r[3]*n[1],a=r[1]*n[0]+r[4]*n[1],o=r[2]*n[0]+r[5]*n[1]+n[2],h=r[0]*n[3]+r[3]*n[4],l=r[1]*n[3]+r[4]*n[4],u=r[2]*n[3]+r[5]*n[4]+n[5],c=i._t;return c[0]=s,c[1]=a,c[2]=o,c[3]=h,c[4]=l,c[5]=u,i}}]),t}(),X=function(){function t(e,i){(0,l.Z)(this,t),this._resourceManager=e,this._transfos=[],this._sizeTransfos=[],this._geomUnitsPerPoint=1,this._placementPool=new d.Z(S.u,void 0,void 0,100),this._earlyReturn=!1,this._mapRotation=0,this._transfos.push(i||O.createIdentity()),this._sizeTransfos.push(i?i.scaleRatio():1)}return(0,u.Z)(t,[{key:"setTransform",value:function(t,e){this._transfos=[t||O.createIdentity()],this._sizeTransfos=[e||(t?t.scaleRatio():1)]}},{key:"setGeomUnitsPerPoint",value:function(t){this._geomUnitsPerPoint=t}},{key:"transformPt",value:function(t){return this._transfos[this._transfos.length-1].transform(t)}},{key:"transformSize",value:function(t){return t*this._sizeTransfos[this._sizeTransfos.length-1]}},{key:"reverseTransformPt",value:function(t){return this._transfos[this._transfos.length-1].invert().transform(t)}},{key:"reverseTransformSize",value:function(t){return t/this._sizeTransfos[this._sizeTransfos.length-1]}},{key:"reverseTransformScalar",value:function(t){return t/this._transfos[this._transfos.length-1].scaleRatio()}},{key:"getTransformAngle",value:function(){return this._transfos[this._transfos.length-1].angle()}},{key:"geomUnitsPerPoint",value:function(){return this.isEmbedded()?1:this._geomUnitsPerPoint}},{key:"prevGeomUnitsPerPoint",value:function(){return this._transfos.length>2?1:this._geomUnitsPerPoint}},{key:"isEmbedded",value:function(){return this._transfos.length>1}},{key:"back",value:function(){return this._transfos[this._transfos.length-1]}},{key:"push",value:function(t,e){var i=e?t.scaleRatio():1;O.multiply(t,this.back(),t),this._transfos.push(t),this._sizeTransfos.push(this._sizeTransfos[this._sizeTransfos.length-1]*i)}},{key:"pop",value:function(){this._transfos.splice(-1,1),this._sizeTransfos.splice(-1,1)}},{key:"drawSymbol",value:function(t,e,i){if(t)switch(t.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":this.drawMultiLayerSymbol(t,e);break;case"CIMTextSymbol":this.drawTextSymbol(t,e,i)}}},{key:"drawMultiLayerSymbol",value:function(t,e){if(t&&e){var i=t.symbolLayers;if(i){var r=t.effects;if(r&&r.length>0){var n=this.executeEffects(r,e);if(n)for(var s=n.next();s;)this.drawSymbolLayers(i,s.asJSON()),s=n.next()}else this.drawSymbolLayers(i,e)}}}},{key:"executeEffects",value:function(t,e){var i,r=this._resourceManager.geometryEngine,n=new k.z(m.z.fromJSONCIM(e)),s=(0,h.Z)(t);try{for(s.s();!(i=s.n()).done;){var a=i.value,o=(0,b.h)(a);o&&(n=o.execute(n,a,this.geomUnitsPerPoint(),null,r))}}catch(l){s.e(l)}finally{s.f()}return n}},{key:"drawSymbolLayers",value:function(t,e){for(var i=t.length;i--;){var r=t[i];if(r&&!1!==r.enable){var n=r.effects;if(n&&n.length>0){var s=this.executeEffects(n,e);if(s)for(var a=null;(a=s.next())&&(this.drawSymbolLayer(r,a.asJSON()),!this._earlyReturn););}else this.drawSymbolLayer(r,e);if(this._earlyReturn)return}}}},{key:"drawSymbolLayer",value:function(t,e){switch(t.type){case"CIMSolidFill":this.drawSolidFill(e,t.color);break;case"CIMHatchFill":this.drawHatchFill(e,t);break;case"CIMPictureFill":this.drawPictureFill(e,t);break;case"CIMGradientFill":this.drawGradientFill(e,t);break;case"CIMSolidStroke":this.drawSolidStroke(e,t.color,t.width,t.capStyle,t.joinStyle,t.miterLimit);break;case"CIMPictureStroke":this.drawPictureStroke(e,t);break;case"CIMGradientStroke":this.drawGradientStroke(e,t);break;case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":this.drawMarkerLayer(t,e)}}},{key:"drawHatchFill",value:function(t,e){var i=function(t,e,i){var r=(0,A.J0)(t.separation,C.E.CIMHatchFill.separation)*i,n=(0,A.J0)(t.rotation);if(0===r)return null;r<0&&(r=-r);for(var s=0,a=.5*r;s>a;)s-=r;for(;s<-a;)s+=r;var o=(0,y.Ue)();(0,g.$P)(o,e),o[0]-=a,o[1]-=a,o[2]+=a,o[3]+=a;for(var h=[[o[0],o[1]],[o[0],o[3]],[o[2],o[3]],[o[2],o[1]]];n>180;)n-=180;for(;n<0;)n+=180;var l,u,c,f,_=Math.cos(n*N),v=Math.sin(n*N),d=-r*v,p=r*_;s=(0,A.J0)(t.offsetX)*i*v-(0,A.J0)(t.offsetY)*i*_,l=c=Number.MAX_VALUE,u=f=-Number.MAX_VALUE;for(var m=0,P=h;m<P.length;m++){var x=P[m],k=x[0],M=x[1],b=_*k+v*M,S=-v*k+_*M;l=Math.min(l,b),c=Math.min(c,S),u=Math.max(u,b),f=Math.max(f,S)}c=Math.floor(c/r)*r;for(var w=_*l-v*c-d*s/r,I=v*l+_*c-p*s/r,z=_*u-v*c-d*s/r,L=v*u+_*c-p*s/r,Z=1+Math.round((f-c)/r),T=[],E=0;E<Z;E++)w+=d,I+=p,z+=d,L+=p,T.push([[w,I],[z,L]]);return{paths:T}}(e,t,this.geomUnitsPerPoint());i&&(this.pushClipPath(t),this.drawMultiLayerSymbol(e.lineSymbol,i),this.popClipPath())}},{key:"drawPictureFill",value:function(t,e){}},{key:"drawGradientFill",value:function(t,e){}},{key:"drawPictureStroke",value:function(t,e){}},{key:"drawGradientStroke",value:function(t,e){}},{key:"drawMarkerLayer",value:function(t,e){var i=t.markerPlacement;if(i){var r=(0,b.W)(i);if(r){var n="CIMMarkerPlacementInsidePolygon"===i.type||"CIMMarkerPlacementPolygonCenter"===i.type&&i.clipAtBoundary;n&&this.pushClipPath(e);var s=r.execute(m.z.fromJSONCIM(e),i,this.geomUnitsPerPoint(),null,this._resourceManager.geometryEngine);if(s)for(var a=null;(a=s.next())&&(this.drawMarker(t,a),!this._earlyReturn););n&&this.popClipPath()}}else{var l=this._placementPool.acquire();if((0,x.wp)(e))l.tx=e.x,l.ty=e.y,this.drawMarker(t,l);else if((0,x.oU)(e)){var u,c=(0,P.tO)(e);c&&(u=(0,o.Z)(c,2),l.tx=u[0],l.ty=u[1],this.drawMarker(t,l))}else{var f,_=(0,h.Z)(e.points);try{for(_.s();!(f=_.n()).done;){var v=f.value;if(l.tx=v[0],l.ty=v[1],this.drawMarker(t,l),this._earlyReturn)break}}catch(d){_.e(d)}finally{_.f()}}this._placementPool.release(l)}}},{key:"drawMarker",value:function(t,e){switch(t.type){case"CIMCharacterMarker":case"CIMPictureMarker":this.drawPictureMarker(t,e);break;case"CIMVectorMarker":this.drawVectorMarker(t,e)}}},{key:"drawPictureMarker",value:function(t,e){if(t){var i=this._resourceManager.getResource(t.url),r=(0,A.J0)(t.size,C.E.CIMPictureMarker.size);if(!(null==i||r<=0)){var n=i.width,s=i.height;if(n&&s){var a=n/s,o=(0,A.J0)(t.scaleX,1),h=O.createIdentity(),l=t.anchorPoint;if(l){var u=l.x,c=l.y;"Absolute"!==t.anchorPointUnits&&(u*=r*a*o,c*=r),h.translate(-u,-c)}var f=(0,A.J0)(t.rotation);t.rotateClockwise&&(f=-f),this._mapRotation&&(f+=this._mapRotation),f&&h.rotate(f*N);var _=(0,A.J0)(t.offsetX),v=(0,A.J0)(t.offsetY);if(_||v){if(this._mapRotation){var d=N*this._mapRotation,p=Math.cos(d),m=Math.sin(d),y=_*m+v*p;_=_*p-v*m,v=y}h.translate(_,v)}var g=this.geomUnitsPerPoint();1!==g&&h.scale(g,g);var P=e.getAngle();P&&h.rotate(P),h.translate(e.tx,e.ty),this.push(h,!1),this.drawImage(t,r),this.pop()}}}}},{key:"drawVectorMarker",value:function(t,e){if(t){var i=t.markerGraphics;if(i){var r=(0,A.J0)(t.size,C.E.CIMVectorMarker.size),n=t.frame,s=n?n.ymax-n.ymin:0,a=r&&s?r/s:1,o=O.createIdentity();n&&o.translate(.5*-(n.xmax+n.xmin),.5*-(n.ymax+n.ymin));var l=t.anchorPoint;if(l){var u=l.x,c=l.y;"Absolute"!==t.anchorPointUnits?n&&(u*=n.xmax-n.xmin,c*=n.ymax-n.ymin):(u/=a,c/=a),o.translate(-u,-c)}1!==a&&o.scale(a,a);var f=(0,A.J0)(t.rotation);t.rotateClockwise&&(f=-f),this._mapRotation&&(f+=this._mapRotation),f&&o.rotate(f*N);var _=(0,A.J0)(t.offsetX),d=(0,A.J0)(t.offsetY);if(_||d){if(this._mapRotation){var p=N*this._mapRotation,m=Math.cos(p),y=Math.sin(p),g=_*y+d*m;_=_*m-d*y,d=g}o.translate(_,d)}var P=this.geomUnitsPerPoint();1!==P&&o.scale(P,P);var x=e.getAngle();x&&o.rotate(x),o.translate(e.tx,e.ty),this.push(o,t.scaleSymbolsProportionally);var k,M=(0,h.Z)(i);try{for(M.s();!(k=M.n()).done;){var b=k.value;(null===b||void 0===b?void 0:b.symbol)&&b.geometry||v.Z.getLogger("esri.symbols.cim.CIMSymbolDrawHelper").error("Invalid marker graphic",b);var S=b.textString;if("number"==typeof S&&(S=S.toString()),this.drawSymbol(b.symbol,b.geometry,S),this._earlyReturn)break}}catch(w){M.e(w)}finally{M.f()}this.pop()}}}},{key:"drawTextSymbol",value:function(t,e,i){if(t&&(0,x.wp)(e)&&!((0,A.J0)(t.height,C.E.CIMTextSymbol.height)<=0)){var r=O.createIdentity(),n=(0,A.J0)(t.angle);(n=-n)&&r.rotate(n*N);var s=(0,A.J0)(t.offsetX),a=(0,A.J0)(t.offsetY);(s||a)&&r.translate(s,a);var o=this.geomUnitsPerPoint();1!==o&&r.scale(o,o),r.translate(e.x,e.y),this.push(r,!1),this.drawText(t,i),this.pop()}}}]),t}(),D=function(t){(0,s.Z)(i,t);var e=(0,a.Z)(i);function i(t,r){var n;return(0,l.Z)(this,i),(n=e.call(this,t,r)).reset(),n}return(0,u.Z)(i,[{key:"reset",value:function(){this._xmin=this._ymin=1/0,this._xmax=this._ymax=-1/0,this._clipCount=0}},{key:"envelope",value:function(){return new z.Z(this._xmin,this._ymin,this._xmax-this._xmin,this._ymax-this._ymin)}},{key:"bounds",value:function(){return(0,y.al)(this._xmin,this._ymin,this._xmax,this._ymax)}},{key:"drawSolidFill",value:function(t){if(t&&!(this._clipCount>0))if((0,x.oU)(t))this._processPath(t.rings,0);else if((0,x.l9)(t))this._processPath(t.paths,0);else if((0,x.YX)(t)){var e=U(t);e&&this._processPath(e.rings,0)}else console.error("drawSolidFill Unexpected geometry type!")}},{key:"drawSolidStroke",value:function(t,e,i){if(!(!t||this._clipCount>0||null==i||i<=0)){var r=Math.max(.5*this.transformSize((0,A.J0)(i,C.E.CIMSolidStroke.width)),.25);if((0,x.oU)(t))this._processPath(t.rings,r);else if((0,x.l9)(t))this._processPath(t.paths,r);else if((0,x.YX)(t)){var n=U(t);n&&this._processPath(n.rings,r)}else console.error("drawSolidStroke unexpected geometry type!")}}},{key:"drawMarkerLayer",value:function(t,e){(0,x.oU)(e)&&t.markerPlacement&&("CIMMarkerPlacementInsidePolygon"===t.markerPlacement.type||"CIMMarkerPlacementPolygonCenter"===t.markerPlacement.type&&t.markerPlacement.clipAtBoundary)?this._processPath(e.rings,0):(0,r.Z)((0,n.Z)(i.prototype),"drawMarkerLayer",this).call(this,t,e)}},{key:"drawHatchFill",value:function(t,e){this.drawSolidFill(t)}},{key:"drawPictureFill",value:function(t,e){this.drawSolidFill(t)}},{key:"drawGradientFill",value:function(t,e){this.drawSolidFill(t)}},{key:"drawPictureStroke",value:function(t,e){this.drawSolidStroke(t,null,e.width)}},{key:"drawGradientStroke",value:function(t,e){this.drawSolidStroke(t,null,e.width)}},{key:"pushClipPath",value:function(t){this.drawSolidFill(t),this._clipCount++}},{key:"popClipPath",value:function(){this._clipCount--}},{key:"drawImage",value:function(t,e){var i=t.url,r=(0,A.J0)(t.scaleX,1),n=r*e,s=e,a=this._resourceManager.getResource(i);if(null!=a){var o=a.height/a.width;n=r*(e?o>1?e:e/o:a.width),s=e?o>1?e*o:e:a.height}this._merge(this.transformPt([-n/2,-s/2]),0),this._merge(this.transformPt([-n/2,s/2]),0),this._merge(this.transformPt([n/2,-s/2]),0),this._merge(this.transformPt([n/2,s/2]),0)}},{key:"drawText",value:function(t,e){if(e&&0!==e.length){this._textRasterizer||(this._textRasterizer=new T);var i=W(t),r=this._textRasterizer.computeTextSize(e,i),n=(0,o.Z)(r,2),s=n[0],a=n[1];s=(0,p.Wz)(s),a=(0,p.Wz)(a);var h=0;switch(t.horizontalAlignment){case"Left":h=s/2;break;case"Right":h=-s/2}var l=0;switch(t.verticalAlignment){case"Bottom":l=a/2;break;case"Top":l=-a/2;break;case"Baseline":l=a/6}this._merge(this.transformPt([-s/2+h,-a/2+l]),0),this._merge(this.transformPt([-s/2+h,a/2+l]),0),this._merge(this.transformPt([s/2+h,-a/2+l]),0),this._merge(this.transformPt([s/2+h,a/2+l]),0)}}},{key:"_processPath",value:function(t,e){if(t){var i,r=(0,h.Z)(t);try{for(r.s();!(i=r.n()).done;){var n=i.value,s=n?n.length:0;if(s>1){this._merge(this.transformPt(n[0]),e);for(var a=1;a<s;a++)this._merge(this.transformPt(n[a]),e)}}}catch(o){r.e(o)}finally{r.f()}}}},{key:"_merge",value:function(t,e){t[0]-e<this._xmin&&(this._xmin=t[0]-e),t[0]+e>this._xmax&&(this._xmax=t[0]+e),t[1]-e<this._ymin&&(this._ymin=t[1]-e),t[1]+e>this._ymax&&(this._ymax=t[1]+e)}}]),i}(X),Y=function(t){(0,s.Z)(i,t);var e=(0,a.Z)(i);function i(){var t;return(0,l.Z)(this,i),(t=e.apply(this,arguments))._searchPoint=[0,0],t._searchDistPoint=0,t._textInfo=null,t}return(0,u.Z)(i,[{key:"hitTest",value:function(t,e,i,r,n,s){var a=s*(0,p.F2)(1);this.setTransform(),this.setGeomUnitsPerPoint(a),this._searchPoint=[(t[0]+t[2])/2,(t[1]+t[3])/2],this._searchDistPoint=(t[2]-t[0])/2/a,this._textInfo=r;var o=e&&("CIMPointSymbol"===e.type&&"Map"!==e.angleAlignment||"CIMTextSymbol"===e.type);if(this._mapRotation=o?n:0,!(0,f.Z)("esri-mobile")){var h,l,u=(0,p.Wz)(F.pd*window.devicePixelRatio),c=(0,p.Wz)(F.fG);("CIMLineSymbol"!==(null===e||void 0===e?void 0:e.type)&&"CIMPolygonSymbol"!==(null===e||void 0===e?void 0:e.type)||null===(h=e.symbolLayers)||void 0===h||!h.some(A.k5))&&"CIMMeshSymbol"!==(null===e||void 0===e?void 0:e.type)&&(null!==(l=(0,A.ap)(e))&&void 0!==l?l:0)<c&&(this._searchDistPoint=u)}return this._earlyReturn=!1,this.drawSymbol(e,i),this._earlyReturn}},{key:"drawSolidFill",value:function(t,e){this._hitTestFill(t)}},{key:"drawHatchFill",value:function(t,e){this._hitTestFill(t)}},{key:"drawPictureFill",value:function(t,e){this._hitTestFill(t)}},{key:"drawGradientFill",value:function(t,e){this._hitTestFill(t)}},{key:"drawSolidStroke",value:function(t,e,i,r,n,s){this._hitTestStroke(t,i)}},{key:"drawPictureStroke",value:function(t,e){this._hitTestStroke(t,e.width)}},{key:"drawGradientStroke",value:function(t,e){this._hitTestStroke(t,e.width)}},{key:"drawMarkerLayer",value:function(t,e){t.markerPlacement&&("CIMMarkerPlacementInsidePolygon"===t.markerPlacement.type||"CIMMarkerPlacementPolygonCenter"===t.markerPlacement.type&&t.markerPlacement.clipAtBoundary)?this._hitTestFill(e):(0,r.Z)((0,n.Z)(i.prototype),"drawMarkerLayer",this).call(this,t,e)}},{key:"pushClipPath",value:function(t){}},{key:"popClipPath",value:function(){}},{key:"drawImage",value:function(t,e){var i=t.url,r=(0,A.J0)(t.scaleX,1),n=this._resourceManager.getResource(i);if(null!=n&&0!==n.height&&0!==e){var s=e*this.geomUnitsPerPoint(),a=s*r*(n.width/n.height),o=this.reverseTransformPt(this._searchPoint),h=this._searchDistPoint;Math.abs(o[0])<a/2+h&&Math.abs(o[1])<s/2+h&&(this._earlyReturn=!0)}}},{key:"drawText",value:function(t,e){var i,r=this._textInfo;if(r){var n=r.get(t);if(n&&n.glyphMosaicItems.glyphs.length){var s,a=(0,G.vn)((0,A.J0)(t.height,C.E.CIMTextSymbol.height)),o=t.lineGapType,l=t.lineGap,u=o?V(o,(0,A.J0)(l),a):0,c="CIMBackgroundCallout"===(null===(i=t.callout)||void 0===i?void 0:i.type),f=(0,R.Nr)(n.glyphMosaicItems,{scale:a/F.iD,angle:0,xOffset:0,yOffset:0,horizontalAlignment:t.horizontalAlignment,verticalAlignment:t.verticalAlignment,maxLineWidth:(0,G.g1)(t.lineWidth),lineHeight:F.uk*Math.max(.25,Math.min(u||1,4)),decoration:t.font.decoration||"none",useCIMAngleBehavior:!0,hasBackground:c}),_=this.reverseTransformPt(this._searchPoint),v=_[0],d=_[1],p=(0,h.Z)(f.glyphs);try{for(p.s();!(s=p.n()).done;){var m=s.value;if(v>m.xTopLeft&&v<m.xBottomRight&&d>-m.yBottomRight&&d<-m.yTopLeft){this._earlyReturn=!0;break}}}catch(y){p.e(y)}finally{p.f()}}}}},{key:"_hitTestFill",value:function(t){var e=null;if((0,x.YX)(t)){var i=t;e=[[[i.xmin,i.ymin],[i.xmin,i.ymax],[i.xmax,i.ymax],[i.xmax,i.ymin],[i.xmin,i.ymin]]]}else if((0,x.oU)(t))e=t.rings;else{if(!(0,x.l9)(t))return;e=t.paths}var r=this.reverseTransformPt(this._searchPoint);(function(t,e){var i,r=0,n=(0,h.Z)(e);try{for(n.s();!(i=n.n()).done;)for(var s=i.value,a=s.length,o=1;o<a;o++){var l=s[o-1],u=s[o];l[1]>t[1]!=u[1]>t[1]&&((u[0]-l[0])*(t[1]-l[1])-(u[1]-l[1])*(t[0]-l[0])>0?r++:r--)}}catch(c){n.e(c)}finally{n.f()}return 0!==r})(r,e)&&(this._earlyReturn=!0),this._earlyReturn||H(r,e,this.reverseTransformScalar(this._searchDistPoint)*this.prevGeomUnitsPerPoint())&&(this._earlyReturn=!0)}},{key:"_hitTestStroke",value:function(t,e){var i=null;if((0,x.YX)(t)){var r=t;i=[[[r.xmin,r.ymin],[r.xmin,r.ymax],[r.xmax,r.ymax],[r.xmax,r.ymin],[r.xmin,r.ymin]]]}else if((0,x.oU)(t))i=t.rings;else{if(!(0,x.l9)(t))return;i=t.paths}H(this.reverseTransformPt(this._searchPoint),i,(0,A.J0)(e,C.E.CIMSolidStroke.width)*this.geomUnitsPerPoint()/2+this.reverseTransformScalar(this._searchDistPoint)*this.prevGeomUnitsPerPoint())&&(this._earlyReturn=!0)}}]),i}(X),B=function(t){(0,s.Z)(i,t);var e=(0,a.Z)(i);function i(t,r,n,s){var a;return(0,l.Z)(this,i),(a=e.call(this,r,n))._applyAdditionalRenderProps=s,a._colorSubstitutionHelper=new M,a._ctx=t,a}return(0,u.Z)(i,[{key:"drawSolidFill",value:function(t,e){var i;if(t){if((0,x.oU)(t))this._buildPath(t.rings,!0);else if((0,x.l9)(t))this._buildPath(t.paths,!0);else if((0,x.YX)(t))this._buildPath(U(t).rings,!0);else{if(!(0,x.aW)(t))return;console.log("CanvasDrawHelper.drawSolidFill - No implementation!")}var r=this._ctx;r.fillStyle="string"==typeof e?e:"rgba("+Math.round(e[0])+","+Math.round(e[1])+","+Math.round(e[2])+","+(null!==(i=e[3])&&void 0!==i?i:255)/255+")",r.fill("evenodd")}}},{key:"drawSolidStroke",value:function(t,e,i,r,n,s){var a;if(t&&e&&0!==i){if((0,x.oU)(t))this._buildPath(t.rings,!0);else if((0,x.l9)(t))this._buildPath(t.paths,!1);else{if(!(0,x.YX)(t))return void console.log("CanvasDrawHelper.drawSolidStroke isn't implemented!");this._buildPath(U(t).rings,!0)}var o=this._ctx;o.strokeStyle="string"==typeof e?e:"rgba("+Math.round(e[0])+","+Math.round(e[1])+","+Math.round(e[2])+","+(null!==(a=e[3])&&void 0!==a?a:255)/255+")",o.lineWidth=Math.max(this.transformSize(i),.5),this._setCapStyle(r),this._setJoinStyle(n),o.miterLimit=s,o.stroke()}}},{key:"pushClipPath",value:function(t){if(this._ctx.save(),(0,x.oU)(t))this._buildPath(t.rings,!0);else if((0,x.l9)(t))this._buildPath(t.paths,!0);else{if(!(0,x.YX)(t))return;this._buildPath(U(t).rings,!0)}this._ctx.clip("evenodd")}},{key:"popClipPath",value:function(){this._ctx.restore()}},{key:"drawImage",value:function(t,e){var i=t.colorSubstitutions,r=t.url,n=t.tintColor,s=(0,A.J0)(t.scaleX,1),a=this._resourceManager.getResource(r);if(null!=a){var h=e*(a.width/a.height),l=e;e||(h=a.width,l=a.height);var u=(0,A.TB)(r)||"src"in a&&(0,A.TB)(a.src),c="getFrame"in a?I(a):a;i&&(c=this._colorSubstitutionHelper.applyColorSubstituition(c,i)),this._applyAdditionalRenderProps&&!u&&n&&(c=this._colorSubstitutionHelper.tintImageData(c,n));var f=this.transformPt([0,0]),_=this.getTransformAngle(),v=(0,o.Z)(_,2),d=v[0],p=v[1],m=this.transformSize(1),y=this._ctx;y.save(),y.setTransform({m11:s*m*d,m12:s*m*p,m21:-m*p,m22:m*d,m41:f[0],m42:f[1]}),y.drawImage(c,-h/2,-l/2,h,l),y.restore()}}},{key:"drawText",value:function(t,e){if(e&&0!==e.length){this._textRasterizer||(this._textRasterizer=new T);var i=W(t);i.size*=this.transformSize((0,p.Wz)(1));var r=this._textRasterizer.rasterizeText(e,i);if(r){var n=r.size,s=r.anchorX,a=r.anchorY,h=r.canvas,l=n[0]*(s+.5),u=n[1]*(a-.5),c=this._ctx,f=this.transformPt([0,0]),_=this.getTransformAngle(),v=(0,o.Z)(_,2),d=v[0],m=v[1];c.save(),c.setTransform({m11:1*d,m12:1*m,m21:-1*m,m22:1*d,m41:f[0]-1*l,m42:f[1]+1*u}),c.drawImage(h,0,0),c.restore()}}}},{key:"drawPictureFill",value:function(t,e){if(t){var i=e.colorSubstitutions,r=e.height,n=e.offsetX,s=e.offsetY,a=e.rotation,o=e.scaleX,h=e.tintColor,l=e.url,u=this._resourceManager.getResource(l);if(null!=u){if((0,x.oU)(t))this._buildPath(t.rings,!0);else if((0,x.l9)(t))this._buildPath(t.paths,!0);else if((0,x.YX)(t))this._buildPath(U(t).rings,!0);else{if(!(0,x.aW)(t))return;console.log("CanvasDrawHelper.drawPictureFill - No implementation!")}var c,f=this._ctx,_=(0,A.TB)(l)||"src"in u&&(0,A.TB)(u.src),v="getFrame"in u?I(u):u;if(i&&(v=this._colorSubstitutionHelper.applyColorSubstituition(v,i)),this._applyAdditionalRenderProps){_||h&&(v=this._colorSubstitutionHelper.tintImageData(v,h)),c=f.createPattern(v,"repeat");var d=this.transformSize(1);a||(a=0),n?n*=d:n=0,s?s*=d:s=0,r&&(r*=d);var p=r?r/u.height:1,m=o&&r?o*r/u.width:1;if(0!==a||1!==p||1!==m||0!==n||0!==s){var y=new DOMMatrix;y.rotateSelf(0,0,-a).translateSelf(n,s).scaleSelf(m,p,1),c.setTransform(y)}}else c=f.createPattern(v,"repeat");f.save(),f.fillStyle=c,f.fill("evenodd"),f.restore()}}}},{key:"drawPictureStroke",value:function(t,e){if(t){var i=e.colorSubstitutions,r=e.capStyle,n=e.joinStyle,s=e.miterLimit,a=e.tintColor,o=e.url,l=e.width,u=this._resourceManager.getResource(o);if(null!=u){var c;if((0,x.oU)(t))c=t.rings;else if((0,x.l9)(t))c=t.paths;else{if(!(0,x.YX)(t))return(0,x.aW)(t)?void console.log("CanvasDrawHelper.drawPictureStroke - No implementation!"):void 0;c=U(t).rings}l||(l=u.width);var f=(0,A.TB)(o)||"src"in u&&(0,A.TB)(u.src),v="getFrame"in u?I(u):u;i&&(v=this._colorSubstitutionHelper.applyColorSubstituition(v,i)),this._applyAdditionalRenderProps&&(f||a&&(v=this._colorSubstitutionHelper.tintImageData(v,a)));var d,m,y=Math.max(this.transformSize((0,p.F2)(l)),.5),g=y/v.width,P=this._ctx,k=P.createPattern(v,"repeat-y");P.save(),this._setCapStyle(r),this._setJoinStyle(n),void 0!==s&&(P.miterLimit=s),P.lineWidth=y;var M,b=(0,h.Z)(c);try{for(b.s();!(M=b.n()).done;){var S=M.value;if(q(S=(0,_.d9)(S)),S&&!(S.length<=1)){d=this.transformPt(S[0]);for(var C=1;C<S.length;C++){var w=J(d,m=this.transformPt(S[C])),z=new DOMMatrix;z.translateSelf(0,d[1]-y/2).scaleSelf(g,g,1).rotateSelf(0,0,90-w),k.setTransform(z),P.strokeStyle=k,P.beginPath(),P.moveTo(d[0],d[1]),P.lineTo(m[0],m[1]),P.stroke(),d=m}}}}catch(L){b.e(L)}finally{b.f()}P.restore()}}}},{key:"_buildPath",value:function(t,e){var i=this._ctx;if(i.beginPath(),t){var r,n=(0,h.Z)(t);try{for(n.s();!(r=n.n()).done;){var s=r.value,a=s?s.length:0;if(a>1){var o=this.transformPt(s[0]);i.moveTo(o[0],o[1]);for(var l=1;l<a;l++)o=this.transformPt(s[l]),i.lineTo(o[0],o[1]);e&&i.closePath()}}}catch(u){n.e(u)}finally{n.f()}}}},{key:"_setCapStyle",value:function(t){switch(t){case w.kP.Butt:this._ctx.lineCap="butt";break;case w.kP.Round:this._ctx.lineCap="round";break;case w.kP.Square:this._ctx.lineCap="square"}}},{key:"_setJoinStyle",value:function(t){switch(t){case w.r4.Bevel:this._ctx.lineJoin="bevel";break;case w.r4.Round:this._ctx.lineJoin="round";break;case w.r4.Miter:this._ctx.lineJoin="miter"}}}]),i}(X);function H(t,e,i){var r,n=(0,h.Z)(e);try{for(n.s();!(r=n.n()).done;)for(var s=r.value,a=s.length,o=1;o<a;o++){var l=s[o-1],u=s[o],c=(u[0]-l[0])*(u[0]-l[0])+(u[1]-l[1])*(u[1]-l[1]);if(0!==c){c=Math.sqrt(c);var f=((u[0]-l[0])*(t[1]-l[1])-(u[1]-l[1])*(t[0]-l[0]))/c;if(Math.abs(f)<i){var _=((u[0]-l[0])*(t[0]-l[0])+(u[1]-l[1])*(t[1]-l[1]))/c;if(_>-i&&_<c+i)return!0}}}}catch(v){n.e(v)}finally{n.f()}return!1}function J(t,e){var i=e[0]-t[0],r=e[1]-t[1];return 180/Math.PI*Math.atan2(r,i)}var U=function(t){return t?{spatialReference:t.spatialReference,rings:[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]]}:null},V=function(t,e,i){switch(t){case"ExtraLeading":return 1+e/i;case"Multiple":return e;case"Exact":return e/i}};function W(t){var e,i,r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,s=(0,A.BX)(t),a=(0,A.wi)(t.fontStyleName),o=null!==(e=t.fontFamilyName)&&void 0!==e?e:c.em,h=a.weight,l=a.style,u=n*(t.height||5),f=(0,A.X_)(t.horizontalAlignment),_=(0,A.FG)(t.verticalAlignment),v=(0,A.W7)(t),d=(0,A.W7)(t.haloSymbol),p=null!=d?n*(null!==(i=t.haloSize)&&void 0!==i?i:0):0,m="CIMBackgroundCallout"===(null===(r=t.callout)||void 0===r?void 0:r.type)?t.callout.backgroundSymbol:null,y=(0,A.W7)(m),g=(0,A.F)(m),P=(0,A.$Z)(m);return{color:v,size:u,horizontalAlignment:f,verticalAlignment:_,font:{family:o,style:(0,A.pJ)(l),weight:(0,A.On)(h),decoration:s},halo:{size:p||0,color:d,style:l},backgroundColor:y,borderLine:null!=g&&null!=P?{size:g,color:P}:null,pixelRatio:1,premultiplyColors:!0}}function q(t){for(var e,i,r,n,s,a=t[0],o=1;o<t.length;)e=t[o][0]-a[0],i=t[o][1]-a[1],n=0!==e?i/e:Math.PI/2,void 0!==r&&n-r<=1e-4?(t.splice(o-1,1),a=s):(s=a,a=t[o],o++),r=n}},78915:function(t,e,i){i.d(e,{B$:function(){return N},Tg:function(){return R},U1:function(){return W},bP:function(){return G},qp:function(){return X},rW:function(){return T}});var r=i(1413),n=i(29439),s=i(15671),a=i(43144),o=i(37762),h=i(75746),l=i(93169),u=i(84652),c=i(32718),f=i(84936),_=i(17842),v=i(65156),d=i(376),p=i(73268),m=i(84284),y=i(28222),g=i(86553),P=i(48202),x=i(31027),k=i(61574),M=i(99201),b=i(94109),S=i(62106),C=i(95857),w=Math.PI,I=w/2,z=Math.PI/180,L=96/72,Z=function(){return c.Z.getLogger("esri.symbols.cim.CIMSymbolHelper")};function T(t){var e;switch(t.type){case"cim":return t.data;case"web-style":return t;case"simple-marker":var i=N.fromSimpleMarker(t);if(!i)throw new Error("InternalError: Cannot convert symbol to CIM");e=i;break;case"picture-marker":e=N.fromPictureMarker(t);break;case"simple-line":e=N.fromSimpleLineSymbol(t);break;case"simple-fill":e=N.fromSimpleFillSymbol(t);break;case"picture-fill":e=N.fromPictureFillSymbol(t);break;case"text":e=N.fromTextSymbol(t)}return{type:"CIMSymbolReference",symbol:e}}function E(t,e,i){switch(e.type){case"CIMSymbolReference":return E(t,e.symbol,i);case"CIMPointSymbol":null==i&&(i={x:0,y:0}),t.drawSymbol(e,i);break;case"CIMLineSymbol":null==i&&(i={paths:[[[0,0],[10,0]]]}),t.drawSymbol(e,i);break;case"CIMPolygonSymbol":null==i&&(i={rings:[[[0,0],[0,10],[10,10],[10,0],[0,0]]]}),t.drawSymbol(e,i);break;case"CIMTextSymbol":t.drawSymbol(e,{x:0,y:0});break;case"CIMVectorMarker":var r=new m.u;t.drawMarker(e,r)}return t.envelope()}function A(t){if(!t)return 0;switch(t.type){case"CIMMarkerPlacementAlongLineSameSize":case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAtExtremities":case"CIMMarkerPlacementAtMeasuredUnits":case"CIMMarkerPlacementAtRatioPositions":case"CIMMarkerPlacementOnLine":case"CIMMarkerPlacementOnVertices":return Math.abs(t.offset);default:return 0}}function F(t){if(!t)return 0;switch(t.type){case"CIMGeometricEffectArrow":return Math.abs(.5*t.width);case"CIMGeometricEffectBuffer":return Math.abs(t.size);case"CIMGeometricEffectControlMeasureLine":return 500;case"CIMGeometricEffectExtension":case"CIMGeometricEffectRadial":return Math.abs(t.length);case"CIMGeometricEffectJog":return Math.abs(.5*t.length);case"CIMGeometricEffectMove":return Math.max(Math.abs((0,x.J0)(t.offsetX)),Math.abs((0,x.J0)(t.offsetY)));case"CIMGeometricEffectOffset":case"CIMGeometricEffectOffsetTangent":return Math.abs(t.offset);case"CIMGeometricEffectRegularPolygon":return Math.abs(t.radius);case"CIMGeometricEffectRotate":case"CIMGeometricEffectScale":default:return 0;case"CIMGeometricEffectTaperedPolygon":return.5*Math.max(Math.abs(t.fromWidth),Math.abs(t.toWidth));case"CIMGeometricEffectWave":return Math.abs(t.amplitude);case"CIMGeometricEffectDonut":return Math.abs(t.width)}}function R(t){if(!t)return 0;var e,i=0,r=(0,o.Z)(t);try{for(r.s();!(e=r.n()).done;){i+=F(e.value)}}catch(n){r.e(n)}finally{r.f()}return i}var G=function(){function t(){(0,s.Z)(this,t)}return(0,a.Z)(t,null,[{key:"getSymbolInflateSize",value:function(t,e,i,r,n){return t||(t=[0,0,0,0]),e?this._getInflateSize(t,e,i,r,n):t}},{key:"safeSize",value:function(t){var e=Math.max(Math.abs(t[0]),Math.abs(t[2])),i=Math.max(Math.abs(t[1]),Math.abs(t[3]));return Math.sqrt(e*e+i*i)}},{key:"_vectorMarkerBounds",value:function(t,e,i,r){var n=!0,s=(0,v.Ue)();if(null!==e&&void 0!==e&&e.markerGraphics){var a,h=(0,o.Z)(e.markerGraphics);try{for(h.s();!(a=h.n()).done;){var l=a.value,u=[0,0,0,0];l.geometry&&((0,d.$P)(s,l.geometry),u[0]=0,u[1]=0,u[2]=0,u[3]=0,this.getSymbolInflateSize(u,l.symbol,i,0,r),s[0]+=u[0],s[1]+=u[1],s[2]+=u[2],s[3]+=u[3],n?(t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],n=!1):(t[0]=Math.min(t[0],s[0]),t[1]=Math.min(t[1],s[1]),t[2]=Math.max(t[2],s[2]),t[3]=Math.max(t[3],s[3])))}}catch(c){h.e(c)}finally{h.f()}}return t}},{key:"_getInflateSize",value:function(t,e,i,r,n){if(function(t){return void 0!==t.symbolLayers}(e)){var s=this._getLayersInflateSize(t,e.symbolLayers,i,r,n),a=R(e.effects);return a>0&&(s[0]-=a,s[1]-=a,s[2]+=a,s[3]+=a),s}return this._getTextInflatedSize(t,e,n)}},{key:"_getLayersInflateSize",value:function(t,e,i,r,n){var s=!0;if(!e)return t;var a,h=(0,o.Z)(e);try{for(h.s();!(a=h.n()).done;){var l=a.value;if(l){var u=[0,0,0,0];switch(l.type){case"CIMSolidFill":case"CIMPictureFill":case"CIMHatchFill":case"CIMGradientFill":break;case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":var c=l,f=c.width;null!=f&&(c.capStyle===P.kP.Square||c.joinStyle===P.r4.Miter?f/=1.4142135623730951:f/=2,u[0]=-f,u[1]=-f,u[2]=f,u[3]=f);break;case"CIMCharacterMarker":case"CIMVectorMarker":case"CIMPictureMarker":var _=l;if("CIMVectorMarker"===l.type){var d=l;if(u=this._vectorMarkerBounds(u,d,i,n),d.frame){var p=(d.frame.xmin+d.frame.xmax)/2,m=(d.frame.ymin+d.frame.ymax)/2;if(u[0]-=p,u[1]-=m,u[2]-=p,u[3]-=m,null!=d.size){var y=d.size/(d.frame.ymax-d.frame.ymin);u[0]*=y,u[1]*=y,u[2]*=y,u[3]*=y}}}else if("CIMPictureMarker"===l.type){var g=l,k=i.getResource(g.url),b=1;if(null!=k&&k.height&&(b=k.width/k.height),null!=_.size){var S=_.size/2,C=_.size*b*g.scaleX/2;u=[-C,-S,C,S]}}else if(null!=_.size){var w=_.size/2;u=[-w,-w,w,w]}if(_.anchorPoint){var I=void 0,L=void 0;"Absolute"===_.anchorPointUnits?(I=_.anchorPoint.x,L=_.anchorPoint.y):(I=_.anchorPoint.x*(u[2]-u[0]),L=_.anchorPoint.y*(u[3]-u[1]));var Z=1.25*Math.sqrt(I*I+L*L);u[0]-=Z,u[1]-=Z,u[2]+=Z,u[3]+=Z}var T=(0,x.J0)(_.rotation);if(_.rotateClockwise&&(T=-T),r&&(T-=r),T){var E=z*T,F=Math.cos(E),G=Math.sin(E),N=(0,v.Ue)([M.FM,M.FM,-M.FM,-M.FM]);(0,v.Ho)(N,[u[0]*F-u[1]*G,u[0]*G+u[1]*F]),(0,v.Ho)(N,[u[0]*F-u[3]*G,u[0]*G+u[3]*F]),(0,v.Ho)(N,[u[2]*F-u[1]*G,u[2]*G+u[1]*F]),(0,v.Ho)(N,[u[2]*F-u[3]*G,u[2]*G+u[3]*F]),u=N}var O=(0,x.J0)(_.offsetX),X=(0,x.J0)(_.offsetY);if(r){var D=z*r,Y=Math.cos(D),B=Math.sin(D),H=O*B+X*Y;O=O*Y-X*B,X=H}u[0]+=O,u[1]+=X,u[2]+=O,u[3]+=X;var J=A(_.markerPlacement);J>0&&(u[0]-=J,u[1]-=J,u[2]+=J,u[3]+=J)}var U=R(l.effects);U>0&&(u[0]-=U,u[1]-=U,u[2]+=U,u[3]+=U),s?(t[0]=u[0],t[1]=u[1],t[2]=u[2],t[3]=u[3],s=!1):(t[0]=Math.min(t[0],u[0]),t[1]=Math.min(t[1],u[1]),t[2]=Math.max(t[2],u[2]),t[3]=Math.max(t[3],u[3]))}}}catch(V){h.e(V)}finally{h.f()}return t}},{key:"_getTextInflatedSize",value:function(t,e,i){var r,n,s=(0,C.vn)(null!==(r=e.height)&&void 0!==r?r:g.E.CIMTextSymbol.height);if(t[0]=-s/2,t[1]=-s/2,t[2]=s/2,t[3]=s/2,!i)return t;var a=i.get(e);if(!a)return t;if(!a.glyphMosaicItems.glyphs.length)return t;var o=e.lineGapType,h=e.lineGap,l=o?(0,y.et)(o,null!==h&&void 0!==h?h:0,s):0,u="CIMBackgroundCallout"===(null===(n=e.callout)||void 0===n?void 0:n.type),c=(0,S.Nr)(a.glyphMosaicItems,{scale:s/b.iD,angle:(0,x.J0)(e.angle),xOffset:(0,x.J0)(e.offsetX),yOffset:(0,x.J0)(e.offsetY),horizontalAlignment:e.horizontalAlignment,verticalAlignment:e.verticalAlignment,maxLineWidth:(0,C.g1)(e.lineWidth),lineHeight:b.uk*Math.max(.25,Math.min(l||1,4)),decoration:e.font.decoration||"none",useCIMAngleBehavior:!0,hasBackground:u}).boundsT,f=Math.sqrt(c.width*c.width+c.height*c.height);return t[0]-=c.x+f,t[1]-=c.y-f,t[2]+=c.x+f,t[3]+=-c.y+f,t}}]),t}(),N=function(){function t(){(0,s.Z)(this,t)}return(0,a.Z)(t,null,[{key:"getEnvelope",value:function(t,e,i){if(!t)return null;var r=new y.uQ(i);if(Array.isArray(t)){var n,s,a=(0,o.Z)(t);try{for(a.s();!(s=a.n()).done;){var h=s.value;n?n.union(E(r,h,e)):n=E(r,h,e)}}catch(l){a.e(l)}finally{a.f()}return n}return E(r,t,e)}},{key:"getTextureAnchor",value:function(t,e){var i=this.getEnvelope(t,null,e);if(!i)return[0,0,0];var r=(i.x+.5*i.width)*L,n=(i.y+.5*i.height)*L,s=i.width*L+2,a=i.height*L+2;return[-r/s,-n/a,a]}},{key:"rasterize",value:function(t,e,i,r){var n=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],s=i||this.getEnvelope(e,null,r);if(!s)return[null,0,0,0,0];var a=(s.x+.5*s.width)*L,o=(s.y+.5*s.height)*L;t.width=s.width*L,t.height=s.height*L,i||(t.width+=2,t.height+=2);var h=t.getContext("2d",{willReadFrequently:!0}),l=y.zA.createScale(L,-L);l.translate(.5*t.width-a,.5*t.height+o);var u=new y.cD(h,r,l);switch(e.type){case"CIMPointSymbol":var c={type:"point",x:0,y:0};u.drawSymbol(e,c);break;case"CIMVectorMarker":var f=new m.u;u.drawMarker(e,f)}var _=h.getImageData(0,0,t.width,t.height),v=new Uint8Array(_.data);if(n)for(var d,p=0;p<v.length;p+=4)d=v[p+3]/255,v[p]=v[p]*d,v[p+1]=v[p+1]*d,v[p+2]=v[p+2]*d;return[v,t.width,t.height,-a/t.width,-o/t.height]}},{key:"fromTextSymbol",value:function(e){var i=e.text;return{type:"CIMPointSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,anchorPointUnits:"Relative",dominantSizeAxis3D:"Y",size:10,billboardMode3D:"FaceNearPlane",frame:{xmin:-5,ymin:-5,xmax:5,ymax:5},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{x:0,y:0},symbol:t.createCIMTextSymbolfromTextSymbol(e),textString:i}],scaleSymbolsProportionally:!0,respectFrame:!0}],scaleX:1,angleAlignment:"Display"}}},{key:"fromPictureFillSymbol",value:function(t){var e,i=t.height,r=t.outline,n=t.width,s=t.xoffset,a=t.xscale,o=t.yoffset,h=t.yscale,l=[],u={type:"CIMPolygonSymbol",symbolLayers:l};if(r){var c=Q(r);c&&l.push(c)}var f=t.url;"esriPFS"===t.type&&t.imageData&&(f=t.imageData);var _="angle"in t&&null!==(e=t.angle)&&void 0!==e?e:0,v=(null!==n&&void 0!==n?n:0)*(a||1),d=(null!==i&&void 0!==i?i:0)*(h||1);return l.push({type:"CIMPictureFill",invertBackfaceTexture:!1,scaleX:1,textureFilter:P.Qb.Picture,tintColor:null,url:f,height:d,width:v,offsetX:(0,x.J0)(s),offsetY:(0,x.J0)(o),rotation:(0,x.J0)(-_),colorSubstitutions:null}),u}},{key:"fromSimpleFillSymbol",value:function(t){var e=t.color,i=t.style,r=t.outline,n=[],s={type:"CIMPolygonSymbol",symbolLayers:n};if(r){var a=Q(r);a&&n.push(a)}if(i&&"solid"!==i&&"none"!==i&&"esriSFSSolid"!==i&&"esriSFSNull"!==i){var o={type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",color:H(e),capStyle:P.kP.Butt,joinStyle:P.r4.Miter,width:.75}]},h=0,l=(0,_.Wz)(j(i)?8:10);switch(i){case"vertical":case"esriSFSVertical":h=90;break;case"forward-diagonal":case"esriSFSForwardDiagonal":case"diagonal-cross":case"esriSFSDiagonalCross":h=-45;break;case"backward-diagonal":case"esriSFSBackwardDiagonal":h=45;break;case"cross":case"esriSFSCross":h=0}n.push({type:"CIMHatchFill",lineSymbol:o,offsetX:0,offsetY:0,rotation:h,separation:l}),"cross"===i||"esriSFSCross"===i?n.push({type:"CIMHatchFill",lineSymbol:(0,u.d9)(o),offsetX:0,offsetY:0,rotation:90,separation:l}):"diagonal-cross"!==i&&"esriSFSDiagonalCross"!==i||n.push({type:"CIMHatchFill",lineSymbol:(0,u.d9)(o),offsetX:0,offsetY:0,rotation:45,separation:l})}else!i||"solid"!==i&&"esriSFSSolid"!==i||n.push({type:"CIMSolidFill",enable:!0,color:H(e)});return s}},{key:"fromSimpleLineSymbol",value:function(e){var i=e.cap,r=e.color,n=e.join,s=e.marker,a=e.miterLimit,o=e.style,h=e.width,l=null;"solid"!==o&&"none"!==o&&"esriSLSSolid"!==o&&"esriSLSNull"!==o&&(l=[{type:"CIMGeometricEffectDashes",dashTemplate:W(o,i),lineDashEnding:"NoConstraint",scaleDash:!0,offsetAlongLine:null}]);var u=[];if(s){var c;switch(s.placement){case"begin-end":c=P.Tx.Both;break;case"begin":c=P.Tx.JustBegin;break;case"end":c=P.Tx.JustEnd;break;default:c=P.Tx.None}var f=t.fromSimpleMarker(s,h,r).symbolLayers[0];f.markerPlacement={type:"CIMMarkerPlacementAtExtremities",placePerPart:!1,angleToLine:!0,offset:0,extremityPlacement:c,offsetAlongLine:0},u.push(f)}return u.push({type:"CIMSolidStroke",color:"none"!==o&&"esriSLSNull"!==o?H(r):[0,0,0,0],capStyle:X(i),joinStyle:D(n),miterLimit:a,width:h,effects:l}),{type:"CIMLineSymbol",symbolLayers:u}}},{key:"fromPictureMarker",value:function(t){var e=t.angle,i=t.height,r=t.width,n=t.xoffset,s=t.yoffset,a=t.url;return"esriPMS"===t.type&&t.imageData&&(a=t.imageData),{type:"CIMPointSymbol",symbolLayers:[{type:"CIMPictureMarker",invertBackfaceTexture:!1,scaleX:1,textureFilter:P.Qb.Picture,tintColor:null,url:a,size:i,width:r,offsetX:(0,x.J0)(n),offsetY:(0,x.J0)(s),rotation:(0,x.J0)(-e)}]}}},{key:"createCIMTextSymbolfromTextSymbol",value:function(t){var e,i,r,n,s,a,o=t.angle,l=t.color,u=t.font,c=t.haloColor,f=t.haloSize,_=t.horizontalAlignment,v=t.kerning,d=t.lineWidth,p=t.text,m=t.verticalAlignment,y=t.xoffset,g=t.yoffset,k=t.backgroundColor,M=t.borderLineColor,b=t.borderLineSize;u&&(e=u.family,i=u.style,r=u.weight,n=u.size,s=u.decoration);var S=!1;return p&&(S=(0,h.E)(p)[1]),(k||b)&&(a={type:"CIMBackgroundCallout",margin:null,backgroundSymbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",color:H(k)},{type:"CIMSolidStroke",color:H(M),width:b}]},accentBarSymbol:null,gap:null,leaderLineSymbol:null,lineStyle:null}),{type:"CIMTextSymbol",angle:o,blockProgression:P.zV.BTT,depth3D:1,extrapolateBaselines:!0,fontEffects:P.eZ.Normal,fontEncoding:P.DD.Unicode,fontFamilyName:e||"Arial",fontStyleName:J(i,r),fontType:P.Ky.Unspecified,haloSize:f,height:n,hinting:P.Dd.Default,horizontalAlignment:Y(null!==_&&void 0!==_?_:"center"),kerning:v,letterWidth:100,ligatures:!0,lineGapType:"Multiple",lineWidth:d,offsetX:(0,x.J0)(y),offsetY:(0,x.J0)(g),strikethrough:"line-through"===s,underline:"underline"===s,symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:H(l)}]},haloSymbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:H(c)}]},shadowColor:[0,0,0,255],shadowOffsetX:1,shadowOffsetY:1,textCase:"Normal",textDirection:S?P.UX.RTL:P.UX.LTR,verticalAlignment:B(null!==m&&void 0!==m?m:"baseline"),verticalGlyphOrientation:P.RS.Right,wordSpacing:100,billboardMode3D:P.UR.FaceNearPlane,callout:a}}},{key:"createPictureMarkerRasterizationParam",value:function(t){var e,i,r,n,s=t.angle,a=t.height,o=t.width,h=t.xoffset,l=t.yoffset,u=null!==(e=null!==(i=t.url)&&void 0!==i?i:null===(r=t.source)||void 0===r?void 0:r.url)&&void 0!==e?e:null===(n=t.source)||void 0===n?void 0:n.imageData;return u?{type:"sprite-rasterization-param",overrides:[],resource:{type:"CIMPictureMarker",invertBackfaceTexture:!1,scaleX:1,textureFilter:P.Qb.Picture,tintColor:null,url:u,size:a,width:o,offsetX:(0,x.J0)(h),offsetY:(0,x.J0)(l),rotation:(0,x.J0)(-s)}}:null}},{key:"createPictureFillRasterizationParam",value:function(t){var e=t.width,i=t.height,r=t.xoffset,n=t.yoffset,s=t.url;return s?{type:"sprite-rasterization-param",overrides:[],resource:{type:"CIMPictureFill",scaleX:1,textureFilter:P.Qb.Picture,tintColor:null,url:s,width:e,height:i,offsetX:(0,x.J0)(r),offsetY:(0,x.J0)(n),rotation:0}}:null}},{key:"fromSimpleMarker",value:function(t,e,i){var r,s,a,o,h,l=t.style,u=null!==(r=t.color)&&void 0!==r?r:i;if("path"===l||"esriSMSPath"===l){var c=[];if("outline"in t&&t.outline){var f=t.outline;c.push({type:"CIMSolidStroke",enable:!0,width:f.width,color:H(f.color),path:t.path})}c.push({type:"CIMSolidFill",enable:!0,color:H(u),path:t.path});var _=q("square"),v=(0,n.Z)(_,2),d=v[0],p=v[1];return{type:"CIMPointSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,rotation:-(0,x.J0)(t.angle),size:(0,x.J0)(t.size||6),offsetX:(0,x.J0)(t.xoffset),offsetY:(0,x.J0)(t.yoffset),scaleSymbolsProportionally:!1,frame:d,markerGraphics:[{type:"CIMMarkerGraphic",geometry:p,symbol:{type:"CIMPolygonSymbol",symbolLayers:c}}]}]}}var m,y,g=[],M=t.size;if("outline"in t&&t.outline&&"none"!==t.outline.style&&"esriSLSNull"!==t.outline.style){var b,S=t.outline,C="solid"!==S.style&&"esriSLSSolid"!==S.style,w=C?q(l,t.size):q(l),I=(0,n.Z)(w,2);m=I[0],y=I[1];var z=null!==(b=S.width)&&void 0!==b?b:k.CJ.width;if(C){var L=z/t.size,Z=(m.xmax-m.xmin)*L/2,T=(m.ymax-m.ymin)*L/2;m.xmin-=Z,m.xmax+=Z,m.ymin-=T,m.ymax+=T,M&&(M+=z)}var E="cross"!==t.style&&"x"!==t.style||"dot"===(null===t||void 0===t?void 0:t.outline.style)||"short-dot"===(null===t||void 0===t?void 0:t.outline.style)?P.sj.HalfGap:P.sj.FullPattern,A=C?[{type:"CIMGeometricEffectAddControlPoints"},{type:"CIMGeometricEffectDashes",dashTemplate:W(S.style,null).map((function(t){return S.width&&S.width>0?t*S.width:t})),lineDashEnding:E,controlPointEnding:P.sj.FullPattern}]:void 0;g.push({type:"CIMSolidStroke",capStyle:C?P.kP.Round:P.kP.Butt,enable:!0,width:z,color:H(S.color),effects:A})}else!e||"line-marker"!==t.type||"cross"!==t.style&&"x"!==t.style?(s=q(l),m=(a=(0,n.Z)(s,2))[0],y=a[1]):(o=q(l),m=(h=(0,n.Z)(o,2))[0],y=h[1],g.push({type:"CIMSolidStroke",enable:!0,width:e,color:H(u)}));g.push({type:"CIMSolidFill",enable:!0,color:H(u)});var F={type:"CIMPolygonSymbol",symbolLayers:g};return{type:"CIMPointSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,rotation:(0,x.J0)(-t.angle),size:(0,x.J0)(M||6*e),offsetX:(0,x.J0)(t.xoffset),offsetY:(0,x.J0)(t.yoffset),scaleSymbolsProportionally:!1,frame:m,markerGraphics:[{type:"CIMMarkerGraphic",geometry:y,symbol:F}]}]}}},{key:"fromCIMHatchFill",value:function(t,e){var i,r,n=e*(null!==(i=t.separation)&&void 0!==i?i:g.E.CIMHatchFill.separation),s=n/2,a=(0,u.d9)(t.lineSymbol);null===(r=a.symbolLayers)||void 0===r||r.forEach((function(t){var i;switch(t.type){case"CIMSolidStroke":null!=t.width&&(t.width*=e),null===(i=t.effects)||void 0===i||i.forEach((function(t){if("CIMGeometricEffectDashes"===t.type){var i=t.dashTemplate;t.dashTemplate=null===i||void 0===i?void 0:i.map((function(t){return t*e}))}}));break;case"CIMVectorMarker":null!=t.size&&(t.size*=e);var r=t.markerPlacement;null!=r&&"placementTemplate"in r&&(r.placementTemplate=r.placementTemplate.map((function(t){return t*e})))}}));for(var o=this._getLineSymbolPeriod(a)||4;o<4;)o*=2;var h=o/2;return{type:"CIMVectorMarker",frame:{xmin:-h,xmax:h,ymin:-s,ymax:s},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{paths:[[[-h,0],[h,0]]]},symbol:a}],size:n}}},{key:"fetchResources",value:function(t,e,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return t&&e?(O(t,(function(t){K(t,e,i),"url"in t&&t.url&&i.push(e.fetchResource(t.url,{signal:r}))})),i):i}},{key:"fetchFonts",value:function(e,i,r){if(e&&i)if("symbolLayers"in e&&e.symbolLayers){var n,s=(0,o.Z)(e.symbolLayers);try{for(s.s();!(n=s.n()).done;){var a=n.value;if("CIMVectorMarker"===a.type&&a.markerGraphics){var h,l=(0,o.Z)(a.markerGraphics);try{for(l.s();!(h=l.n()).done;){var u=h.value;(null===u||void 0===u?void 0:u.symbol)&&t.fetchFonts(u.symbol,i,r)}}catch(g){l.e(g)}finally{l.f()}}}}catch(g){s.e(g)}finally{s.f()}}else if("CIMTextSymbol"===e.type){var c=e.fontFamilyName,f=e.fontStyleName;if(!c||"calcitewebcoreicons"===c.toLowerCase())return;var _=(0,x.wi)(f),v=_.style,d=_.weight,m=(0,x.BX)(e),y=new p.Z({family:c,style:v,weight:d,decoration:m});r.push(i.loadFont(y).catch((function(){Z().error("Unsupported font ".concat(c," in CIM symbol"))})))}}},{key:"_getLineSymbolPeriod",value:function(t){if(t){var e=this._getEffectsRepeat(t.effects);if(e)return e;if(t.symbolLayers){var i,r=(0,o.Z)(t.symbolLayers);try{for(r.s();!(i=r.n()).done;){var n=i.value;if(n){var s=this._getEffectsRepeat(n.effects);if(s)return s;switch(n.type){case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":var a=this._getPlacementRepeat(n.markerPlacement);if(a)return a}}}}catch(h){r.e(h)}finally{r.f()}}}return 0}},{key:"_getEffectsRepeat",value:function(t){if(t){var e,i=(0,o.Z)(t);try{for(i.s();!(e=i.n()).done;){var r=e.value;if(r)switch(r.type){case"CIMGeometricEffectDashes":var n=r.dashTemplate;if(n&&n.length){var s,a=0,h=(0,o.Z)(n);try{for(h.s();!(s=h.n()).done;){a+=s.value}}catch(l){h.e(l)}finally{h.f()}return 1&n.length&&(a*=2),a}break;case"CIMGeometricEffectWave":return r.period;default:Z().error("unsupported geometric effect type ".concat(r.type))}}}catch(l){i.e(l)}finally{i.f()}}return 0}},{key:"_getPlacementRepeat",value:function(t){if(t)switch(t.type){case"CIMMarkerPlacementAlongLineSameSize":case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAlongLineVariableSize":var e=t.placementTemplate;if(e&&e.length){var i,r=0,n=(0,o.Z)(e);try{for(n.s();!(i=n.n()).done;){r+=+i.value}}catch(s){n.e(s)}finally{n.f()}return 1&e.length&&(r*=2),r}}return 0}},{key:"fromCIMInsidePolygon",value:function(t){var e,i=t.markerPlacement,n=(0,r.Z)({},t);n.markerPlacement=null,n.anchorPoint=null;var s,a,o,h,l=Math.abs(i.stepX),u=Math.abs(i.stepY),c=(null!==(e=i.randomness)&&void 0!==e?e:100)/100;if("Random"===i.gridType){var v=(0,_.Wz)(b.KA),d=Math.max(Math.floor(v/l),1),p=Math.max(Math.floor(v/u),1);s=d*l/2,o=2*(a=p*u/2);var m=new f.Z(i.seed),y=c*l/1.5,g=c*u/1.5;h=[];for(var P=0;P<d;P++)for(var x=0;x<p;x++){var k=P*l-s+y*(.5-m.getFloat()),M=x*u-a+g*(.5-m.getFloat());h.push({x:k,y:M}),0===P&&h.push({x:k+2*s,y:M}),0===x&&h.push({x:k,y:M+2*a})}}else!0===i.shiftOddRows?(o=2*u,h=[{x:-(s=l/2),y:0},{x:s,y:0},{x:0,y:a=u},{x:0,y:-a}]):(s=l/2,a=u/2,o=u,h=[{x:-l,y:0},{x:0,y:-u},{x:-l,y:-u},{x:0,y:0},{x:l,y:0},{x:0,y:u},{x:l,y:u},{x:-l,y:u},{x:l,y:-u}]);return{type:"CIMVectorMarker",frame:{xmin:-s,xmax:s,ymin:-a,ymax:a},markerGraphics:h.map((function(t){return{type:"CIMMarkerGraphic",geometry:t,symbol:{type:"CIMPointSymbol",symbolLayers:[n]}}})),size:o}}}]),t}();function O(t,e){if(t)switch(t.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":var i=t.symbolLayers;if(!i)return;var r,n=(0,o.Z)(i);try{for(n.s();!(r=n.n()).done;){var s=r.value;if(e(s),"CIMVectorMarker"===s.type){var a=s.markerGraphics;if(!a)continue;var h,l=(0,o.Z)(a);try{for(l.s();!(h=l.n()).done;){var u=h.value;if(u){var c=u.symbol;c&&O(c,e)}}}catch(f){l.e(f)}finally{l.f()}}}}catch(f){n.e(f)}finally{n.f()}}}var X=function(t){if(!t)return P.kP.Butt;switch(t){case"butt":return P.kP.Butt;case"square":return P.kP.Square;case"round":return P.kP.Round}},D=function(t){if(!t)return P.r4.Miter;switch(t){case"miter":return P.r4.Miter;case"round":return P.r4.Round;case"bevel":return P.r4.Bevel}},Y=function(t){if(null==t)return"Center";switch(t){case"left":return"Left";case"right":return"Right";case"center":return"Center"}},B=function(t){if(null==t)return"Center";switch(t){case"baseline":return"Baseline";case"top":return"Top";case"middle":return"Center";case"bottom":return"Bottom"}},H=function(t){return t?[t.r,t.g,t.b,255*t.a]:[0,0,0,0]},J=function(t,e){var i=U(e),r=V(t);return i&&r?"".concat(i,"-").concat(r):"".concat(i).concat(r)},U=function(t){if(!t)return"";switch(t.toLowerCase()){case"bold":case"bolder":return"bold"}return""},V=function(t){if(!t)return"";switch(t.toLowerCase()){case"italic":case"oblique":return"italic"}return""},W=function(t,e){var i=(0,l.Z)("safari")?.001:0,r="butt"===e;switch(t){case"dash":case"esriSLSDash":return r?[4,3]:[3,4];case"dash-dot":case"esriSLSDashDot":return r?[4,3,1,3]:[3,4,i,4];case"dot":case"esriSLSDot":return r?[1,3]:[i,4];case"long-dash":case"esriSLSLongDash":return r?[8,3]:[7,4];case"long-dash-dot":case"esriSLSLongDashDot":return r?[8,3,1,3]:[7,4,i,4];case"long-dash-dot-dot":case"esriSLSDashDotDot":return r?[8,3,1,3,1,3]:[7,4,i,4,i,4];case"short-dash":case"esriSLSShortDash":return r?[4,1]:[3,2];case"short-dash-dot":case"esriSLSShortDashDot":return r?[4,1,1,1]:[3,2,i,2];case"short-dash-dot-dot":case"esriSLSShortDashDotDot":return r?[4,1,1,1,1,1]:[3,2,i,2,i,2];case"short-dot":case"esriSLSShortDot":return r?[1,1]:[i,2];case"solid":case"esriSLSSolid":case"none":return Z().error("Unexpected: style does not require rasterization"),[0,0];default:return Z().error("Tried to rasterize SLS, but found an unexpected style: ".concat(t,"!")),[0,0]}};var q=function(t){var e,i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=r/2,s=t;if("circle"===s||"esriSMSCircle"===s){var a=.25,o=Math.acos(1-a/n),h=Math.ceil(w/o/4);0===h&&(h=1),o=I/h,h*=4;var l=[];l.push([n,0]);for(var u=1;u<h;u++)l.push([n*Math.cos(u*o),-n*Math.sin(u*o)]);l.push([n,0]),e={rings:[l]},i={xmin:-n,ymin:-n,xmax:n,ymax:n}}else if("cross"===s||"esriSMSCross"===s){var c=0;e={paths:[[[c,n],[c,-n]],[[n,c],[-n,c]]]},i={xmin:-n,ymin:-n,xmax:n,ymax:n}}else if("diamond"===s||"esriSMSDiamond"===s)e={rings:[[[-n,0],[0,n],[n,0],[0,-n],[-n,0]]]},i={xmin:-n,ymin:-n,xmax:n,ymax:n};else if("square"===s||"esriSMSSquare"===s)e={rings:[[[-n,-n],[-n,n],[n,n],[n,-n],[-n,-n]]]},i={xmin:-n,ymin:-n,xmax:n,ymax:n};else if("x"===s||"esriSMSX"===s)e={paths:[[[n,n],[-n,-n]],[[n,-n],[-n,n]]]},i={xmin:-n,ymin:-n,xmax:n,ymax:n};else if("triangle"===s||"esriSMSTriangle"===s){var f=.5773502691896257*r,_=-f,v=2/3*r,d=v-r;e={rings:[[[_,d],[0,v],[f,d],[_,d]]]},i={xmin:_,ymin:d,xmax:f,ymax:v}}else"arrow"===s&&(e={rings:[[[-50,50],[50,0],[-50,-50],[-33,-20],[-33,20],[-50,50]]]},i={xmin:-n,ymin:-n,xmax:n,ymax:n});return[i,e]},j=function(t){return"vertical"===t||"horizontal"===t||"cross"===t||"esriSFSCross"===t||"esriSFSVertical"===t||"esriSFSHorizontal"===t};function K(t,e,i){t.effects&&null==e.geometryEngine&&(e.geometryEnginePromise?i.push(e.geometryEnginePromise):(0,x.Cc)(t.effects)&&(e.geometryEnginePromise=(0,x.RI)(),i.push(e.geometryEnginePromise),e.geometryEnginePromise.then((function(t){return e.geometryEngine=t}))))}function Q(t){if(!t)return null;var e=null,i=t.cap,r=t.color,n=t.join,s=t.miterLimit,a=t.style,o=t.width;return"solid"!==a&&"none"!==a&&"esriSLSSolid"!==a&&"esriSLSNull"!==a&&(e=[{type:"CIMGeometricEffectDashes",dashTemplate:W(a,i),lineDashEnding:"NoConstraint",scaleDash:!0,offsetAlongLine:null}]),{type:"CIMSolidStroke",color:"esriSLSNull"!==a&&"none"!==a?H(r):[0,0,0,0],capStyle:X(i),joinStyle:D(n),miterLimit:s,width:o,effects:e}}},59713:function(t,e,i){i.d(e,{D:function(){return h},N:function(){return l}});var r=i(29439),n=i(15671),s=i(43144),a=i(23895),o=i(48202),h=.03,l=function(){function t(){(0,n.Z)(this,t)}return(0,s.Z)(t,[{key:"isEmpty",value:function(t){if(!t.nextPoint())return!0;var e,i,r,n;for(e=t.x,i=t.y;t.nextPoint();e=i,i=n)if(r=t.x,n=t.y,r!==e||n!==i)return t.seekPathStart(),!1;return t.seekPathStart(),!0}},{key:"normalize",value:function(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]);0!==e&&(t[0]/=e,t[1]/=e)}},{key:"getLength",value:function(t,e,i,r){var n=i-t,s=r-e;return Math.sqrt(n*n+s*s)}},{key:"getSegLength",value:function(t){var e=(0,r.Z)(t,2),i=(0,r.Z)(e[0],2),n=i[0],s=i[1],a=(0,r.Z)(e[1],2),o=a[0],h=a[1];return this.getLength(n,s,o,h)}},{key:"getCoord2D",value:function(t,e,i,r,n){return[t+(i-t)*n,e+(r-e)*n]}},{key:"getSegCoord2D",value:function(t,e){var i=(0,r.Z)(t,2),n=(0,r.Z)(i[0],2),s=n[0],a=n[1],o=(0,r.Z)(i[1],2),h=o[0],l=o[1];return this.getCoord2D(s,a,h,l,e)}},{key:"getAngle",value:function(t,e,i,r,n){var s=i-t,a=r-e;return Math.atan2(a,s)}},{key:"getAngleCS",value:function(t,e,i,r,n){var s=i-t,a=r-e,o=Math.sqrt(s*s+a*a);return o>0?[s/o,a/o]:[1,0]}},{key:"getSegAngleCS",value:function(t,e){var i=(0,r.Z)(t,2),n=(0,r.Z)(i[0],2),s=n[0],a=n[1],o=(0,r.Z)(i[1],2),h=o[0],l=o[1];return this.getAngleCS(s,a,h,l,e)}},{key:"cut",value:function(t,e,i,r,n,s){return[n<=0?[t,e]:this.getCoord2D(t,e,i,r,n),s>=1?[i,r]:this.getCoord2D(t,e,i,r,s)]}},{key:"getSubCurve",value:function(t,e,i){var r=a.z.createEmptyOptimizedCIM("esriGeometryPolyline");return this.appendSubCurve(r,t,e,i)?r:null}},{key:"appendSubCurve",value:function(t,e,i,r){t.startPath(),e.seekPathStart();var n=0,s=!0;if(!e.nextPoint())return!1;for(var a=e.x,o=e.y;e.nextPoint();){var h=this.getLength(a,o,e.x,e.y);if(0!==h){if(s){if(n+h>i){var l=(i-n)/h,u=1,c=!1;n+h>=r&&(u=(r-n)/h,c=!0);var f=this.cut(a,o,e.x,e.y,l,u);if(f&&t.pushPoints(f),c)break;s=!1}}else{if(n+h>r){var _=this.cut(a,o,e.x,e.y,0,(r-n)/h);_&&t.pushPoint(_[1]);break}t.pushXY(e.x,e.y)}n+=h,a=e.x,o=e.y}else a=e.x,o=e.y}return!0}},{key:"getCIMPointAlong",value:function(t,e){if(!t.nextPoint())return null;var i,r,n,s,a=0;for(i=t.x,r=t.y;t.nextPoint();i=n,r=s){n=t.x,s=t.y;var o=this.getLength(i,r,n,s);if(0!==o){if(a+o>e){var h=(e-a)/o;return this.getCoord2D(i,r,n,s,h)}a+=o}}return null}},{key:"offset",value:function(t,e,i,r,n){if(!t||t.length<2)return null;for(var s=0,a=t[s++],h=s;s<t.length;){var l=t[s];l[0]===a[0]&&l[1]===a[1]||(s!==h&&(t[h]=t[s]),a=t[h++]),s++}var u=t[0][0]===t[h-1][0]&&t[0][1]===t[h-1][1];if(u&&--h,h<(u?3:2))return null;var c=[];a=u?t[h-1]:null;for(var f=t[0],_=0;_<h;_++){var v=_===h-1?u?t[0]:null:t[_+1];if(a)if(v){var d=[v[0]-f[0],v[1]-f[1]];this.normalize(d);var p=[f[0]-a[0],f[1]-a[1]];this.normalize(p);var m=p[0]*d[1]-p[1]*d[0],y=p[0]*d[0]+p[1]*d[1];if(0===m&&1===y){f=v;continue}if(m>=0==e<=0){if(y<1){var g=[d[0]-p[0],d[1]-p[1]];this.normalize(g);var P=Math.sqrt((1+y)/2);if(P>1/r){var x=-Math.abs(e)/P;c.push([f[0]-g[0]*x,f[1]-g[1]*x])}}}else switch(i){case o.id.Mitered:var k=Math.sqrt((1+y)/2);if(k>0&&1/k<r){var M=[d[0]-p[0],d[1]-p[1]];this.normalize(M);var b=Math.abs(e)/k;c.push([f[0]-M[0]*b,f[1]-M[1]*b]);break}case o.id.Bevelled:c.push([f[0]+p[1]*e,f[1]-p[0]*e]),c.push([f[0]+d[1]*e,f[1]-d[0]*e]);break;case o.id.Rounded:if(y<1){c.push([f[0]+p[1]*e,f[1]-p[0]*e]);var S=Math.floor(2.5*(1-y));if(S>0)for(var C=1/S,w=C,I=1;I<S;I++,w+=C){var z=[p[1]*(1-w)+d[1]*w,-p[0]*(1-w)-d[0]*w];this.normalize(z),c.push([f[0]+z[0]*e,f[1]+z[1]*e])}c.push([f[0]+d[1]*e,f[1]-d[0]*e])}break;case o.id.Square:default:if(m<0)c.push([f[0]+(p[1]+p[0])*e,f[1]+(p[1]-p[0])*e]),c.push([f[0]+(d[1]-d[0])*e,f[1]-(d[0]+d[1])*e]);else{var L=Math.sqrt((1+Math.abs(y))/2),Z=[d[0]-p[0],d[1]-p[1]];this.normalize(Z);var T=e/L;c.push([f[0]-Z[0]*T,f[1]-Z[1]*T])}}}else{var E=[f[0]-a[0],f[1]-a[1]];this.normalize(E),c.push([f[0]+E[1]*e,f[1]-E[0]*e])}else{var A=[v[0]-f[0],v[1]-f[1]];this.normalize(A),c.push([f[0]+A[1]*e,f[1]-A[0]*e])}a=f,f=v}return c.length<(u?3:2)?null:(u&&c.push([c[0][0],c[0][1]]),c)}}]),t}()},85884:function(t,e,i){i.d(e,{Ll:function(){return d},Yw:function(){return _},h9:function(){return f},u:function(){return r}});var r,n=i(29439),s=i(60136),a=i(29388),o=i(15671),h=i(43144),l=i(23895),u=i(59713),c=1e-7,f=function(){function t(){(0,o.Z)(this,t),this._values=[],this.extPtGap=0,this.ctrlPtGap=0,this._length=0,this._currentValue=0}return(0,h.Z)(t,[{key:"isEmpty",value:function(){return 0===this._values.length}},{key:"size",value:function(){return this._values.length}},{key:"init",value:function(t,e){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(this._setEmpty(),!t||0===t.length)return!1;for(var r=0;r<t.length;r++){var n=Math.abs(t[r]);i&&n<c&&(n=c),this._values.push(n),this._length+=n}return e&&1&t.length&&(this._length*=2),0!==this._length&&(this.ctrlPtGap=this.extPtGap=0,this._currentValue=-1,!0)}},{key:"scale",value:function(t){for(var e=this._values?this._values.length:0,i=0;i<e;++i)this._values[i]*=t;this._length*=t,this.extPtGap*=t,this.ctrlPtGap*=t}},{key:"addValue",value:function(t){this._length+=t,this._values.push(t)}},{key:"firstValue",value:function(){return this._values[0]}},{key:"lastValue",value:function(){return this._values[this._values.length-1]}},{key:"nextValue",value:function(){return this._currentValue++,this._currentValue===this._values.length&&(this._currentValue=0),this._values[this._currentValue]}},{key:"reset",value:function(){this._currentValue=-1}},{key:"length",value:function(){return this._length}},{key:"_setEmpty",value:function(){this.extPtGap=this.ctrlPtGap=this._length=0,this._currentValue=-1,this._values.length=0}}]),t}(),_=(0,h.Z)((function t(){(0,o.Z)(this,t),this.pt=null,this.ca=0,this.sa=0}));!function(t){t[t.FAIL=0]="FAIL",t[t.END=1]="END",t[t.CONTINUE=2]="CONTINUE"}(r||(r={}));var v=function(){function t(){(0,o.Z)(this,t),this.reset()}return(0,h.Z)(t,[{key:"reset",value:function(){this.segment=null,this.segmentLength=0,this.abscissa=0,this.isPathEnd=!1,this.isPartEnd=!1}},{key:"isValid",value:function(){return null!==this.segment}},{key:"copyTo",value:function(t){t.segment=this.segment,t.segmentLength=this.segmentLength,t.abscissa=this.abscissa,t.isPathEnd=this.isPathEnd,t.isPartEnd=this.isPartEnd}}]),t}(),d=function(t){(0,s.Z)(i,t);var e=(0,a.Z)(i);function i(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(0,o.Z)(this,i),(t=e.call(this,r,n))._tolerance=u.D,t._currentPosition=new v,t}return(0,h.Z)(i,[{key:"updateTolerance",value:function(t){this._tolerance=u.D*t}},{key:"init",value:function(t,e){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return i?(this._patternLength=e.length(),this._partExtPtGap=e.extPtGap,this._partCtrlPtGap=e.ctrlPtGap):(this._patternLength=0,this._partExtPtGap=0,this._partCtrlPtGap=0),this._currentPosition.reset(),this._partSegCount=0,this._pathCursor=t,this._seg=-1,this._setPosAtNextPart()}},{key:"curPositionIsValid",value:function(){return this._currentPosition.isValid()}},{key:"nextPosition",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.FAIL,i=new v;return!!this._nextPosition(t,i,null,e)&&(i.copyTo(this._currentPosition),!0)}},{key:"curPointAndAngle",value:function(t){t.pt=this._getPoint(this._currentPosition);var e=this._getAngleCS(this._currentPosition),i=(0,n.Z)(e,2),r=i[0],s=i[1];t.ca=r,t.sa=s}},{key:"nextPointAndAngle",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.FAIL,s=new v;if(!this._nextPosition(t,s,null,i))return!1;s.copyTo(this._currentPosition),e.pt=this._getPoint(s);var a=this._getAngleCS(s),o=(0,n.Z)(a,2),h=o[0],l=o[1];return e.ca=h,e.sa=l,!0}},{key:"nextCurve",value:function(t){if(0===t)return null;var e=l.z.createEmptyOptimizedCIM("esriGeometryPolyline");e.startPath(),e.nextPath();var i=new v;return this._nextPosition(t,i,e,r.END)?(i.copyTo(this._currentPosition),e):null}},{key:"isPathEnd",value:function(){return this._currentPosition.isPathEnd}},{key:"getPathEnd",value:function(){return this._currentPosition.segment[1]}},{key:"getPt",value:function(t){return this._pathCursor.seekInPath(t),[this._pathCursor.x,this._pathCursor.y]}},{key:"getSeg",value:function(t){return[this.getPt(t),this.getPt(t+1)]}},{key:"_nextPosition",value:function(t,e,i,n){if(this._currentPosition.isPathEnd)return!1;var s=this._currentPosition.abscissa;for(this._currentPosition.segmentLength>0&&(s/=this._currentPosition.segmentLength),this._currentPosition.copyTo(e);e.abscissa+t*this._partLengthRatio>e.segmentLength+this._tolerance;){if(i){if(0===i.pathSize)if(0===s){var a=e.segment[0];i.pushXY(a[0],a[1])}else i.pushPoint(this.getSegCoord2D(e.segment,s));var o=e.segment[1];i.pushXY(o[0],o[1])}if(s=0,t-=(e.segmentLength-e.abscissa)/this._partLengthRatio,this._partSegCount)e.segment=this._nextSegment(),e.segmentLength=this.getSegLength(e.segment),e.abscissa=0,this._partSegCount--;else{if(!this._setPosAtNextPart())return n!==r.FAIL&&(e.segmentLength=this.getSegLength(e.segment),e.isPartEnd=!0,n===r.END?(e.abscissa=e.segmentLength,e.isPathEnd=!0):e.abscissa=e.segmentLength+t,!0);this._currentPosition.copyTo(e)}}if(e.abscissa+=t*this._partLengthRatio,i){0===i.pathSize&&(0===s?i.pushPoint(e.segment[0]):i.pushPoint(this.getSegCoord2D(e.segment,s)));var h=e.abscissa/e.segmentLength;1===h?i.pushPoint(e.segment[1]):i.pushPoint(this.getSegCoord2D(e.segment,h))}return this._partSegCount||Math.abs(e.abscissa-e.segmentLength)<this._tolerance&&(e.isPathEnd=this._partIsLast,e.isPartEnd=!0),!0}},{key:"_getPoint",value:function(t){var e=t.segmentLength<=0?0:t.abscissa/t.segmentLength;return this.getSegCoord2D(this._currentPosition.segment,e)}},{key:"_getAngleCS",value:function(t){var e=t.segmentLength<=0?0:t.abscissa/t.segmentLength;return this.getSegAngleCS(this._currentPosition.segment,e)}},{key:"_setPosAtNextPart",value:function(){for(;this._partSegCount;)this._hasNextSegment()&&this._nextSegment(),this._partSegCount--;if(!this._hasNextSegment())return!1;for(this._partLength=0,this._partIsLast=!0,this._partSegCount=0;this._hasNextSegment();)if(this._partLength+=this.getSegLength(this._nextSegment()),this._partSegCount++,this._pathCursor.getControlPointAt(this._getEndPointIndex())){this._partIsLast=!this._hasNextSegment();break}for(var t=this._partSegCount;t;)this._previousSegment(),--t;this._currentPosition.segment=this._nextSegment(),this._currentPosition.segmentLength=this.getSegLength(this._currentPosition.segment),this._currentPosition.abscissa=0,this._currentPosition.isPathEnd=this._currentPosition.isPartEnd=!1,--this._partSegCount;var e=this._getStartPointIndex();this._ctrlPtBegin=this._pathCursor.getControlPointAt(e);var i=e+this._partSegCount+1;if(i>=this._pathCursor.pathSize&&(i=0),this._ctrlPtEnd=this._pathCursor.getControlPointAt(i),this._patternLength>0){var r=this._ctrlPtBegin?this._partCtrlPtGap:this._partExtPtGap,n=this._ctrlPtEnd?this._partCtrlPtGap:this._partExtPtGap,s=Math.round((this._partLength-(r+n))/this._patternLength);s<=0&&(s=r+n>0?0:1),this._partLengthRatio=this._partLength/(r+n+s*this._patternLength),this._partLengthRatio<.01&&(this._partLengthRatio=1)}else this._partLengthRatio=1;return!0}},{key:"_hasNextSegment",value:function(){return this._seg<this._pathCursor.pathSize-2}},{key:"_previousSegment",value:function(){return this.getSeg(--this._seg)}},{key:"_nextSegment",value:function(){return this.getSeg(++this._seg)}},{key:"_getStartPointIndex",value:function(){return this._seg}},{key:"_getEndPointIndex",value:function(){return this._seg+1}}]),i}(u.N)},691:function(t,e,i){i.d(e,{Z:function(){return s}});var r=i(15671),n=i(43144),s=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;(0,r.Z)(this,t),this.x=e,this.y=i,this.width=n,this.height=s}return(0,n.Z)(t,[{key:"isEmpty",get:function(){return this.width<=0||this.height<=0}},{key:"union",value:function(t){this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.width=Math.max(this.width,t.width),this.height=Math.max(this.height,t.height)}}],[{key:"fromExtent",value:function(e){return new t(e.xmin,-e.ymax,e.xmax-e.xmin,e.ymax-e.ymin)}}]),t}()},81241:function(t,e,i){i.d(e,{T:function(){return s}});var r=i(15671),n=i(43144),s=function(){function t(){(0,r.Z)(this,t)}return(0,n.Z)(t,[{key:"execute",value:function(t,e,i,r,n){return new a(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();s.instance=null;var a=function(){function t(e,i,n){(0,r.Z)(this,t),this._inputGeometries=e,this._angleTolerance=void 0!==i.angleTolerance?i.angleTolerance:120,this._maxCosAngle=Math.cos((1-Math.abs(this._angleTolerance)/180)*Math.PI)}return(0,n.Z)(t,[{key:"next",value:function(){for(var t=this._inputGeometries.next();t;){if("esriGeometryPolygon"===t.geometryType)this._isClosed=!0;else if("esriGeometryPolyline"===t.geometryType)this._isClosed=!1;else{if("esriGeometryEnvelope"!==t.geometryType){t=this._inputGeometries.next();continue}if(this._maxCosAngle)return t;this._isClosed=!0}for(;t.nextPath();)this._processPath(t);return t.reset(),t}return null}},{key:"_processPath",value:function(t){if(t.nextPoint()){var e=t.x,i=t.y,r=e,n=i,s=t.pathSize,a=0,o=0,h=0,l=0,u=0,c=0;this._isClosed&&++s;for(var f=1;t.nextPoint()||f<s;++f){var _=void 0,v=void 0;this._isClosed&&f===s-1?(_=e,v=i):(_=t.x,v=t.y);var d=_-r,p=v-n,m=Math.sqrt(d*d+p*p);f>1&&m>0&&h>0&&(a*d+o*p)/m/h<=this._maxCosAngle&&t.setControlPointAt(f-1),1===f&&(l=d,u=p,c=m),m>0&&(r=_,n=v,a=d,o=p,h=m)}this._isClosed&&h>0&&c>0&&(a*l+o*u)/c/h<=this._maxCosAngle&&t.setControlPointAt(0)}}}]),t}()},8878:function(t,e,i){i.d(e,{P:function(){return v}});var r=i(60136),n=i(29388),s=i(15671),a=i(43144),o=i(23895),h=i(41116),l=i(25290),u=i(59713),c=i(48202),f=1.7320508075688772,_=c.TF.OpenEnded,v=function(){function t(){(0,s.Z)(this,t)}return(0,a.Z)(t,[{key:"execute",value:function(t,e,i,r,n){return new d(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();v.instance=null;var d=function(t){(0,r.Z)(i,t);var e=(0,n.Z)(i);function i(t,r,n){var a;return(0,s.Z)(this,i),(a=e.call(this,t,!1,!0))._curveHelper=new u.N,a._width=(void 0!==r.width?r.width:5)*n,a._arrowType=void 0!==r.geometricEffectArrowType?r.geometricEffectArrowType:void 0!==r.arrowType?r.arrowType:_,a._offsetFlattenError=u.D*n,a}return(0,a.Z)(i,[{key:"processPath",value:function(t){var e=o.z.createEmptyOptimizedCIM(t.geometryType);switch(this._arrowType){case c.TF.OpenEnded:default:this._constructSimpleArrow(e,t,!0);break;case c.TF.Block:this._constructSimpleArrow(e,t,!1);break;case c.TF.Crossed:this._constructCrossedArrow(e,t)}return e}},{key:"_constructSimpleArrow",value:function(t,e,i){var r=e.pathLength(),n=this._width;r<2*n&&(n=r/2);var s=this._curveHelper.getSubCurve(e,0,r-n);if(s&&s.nextPath()){s.seekPathStart();var a=n/2;if(!this._curveHelper.isEmpty(s)){var o=(0,h.l)(s),l=this._constructOffset(o,-a);if(l){var u=this._constructOffset(o,a);if(u){var c=this._constructArrowBasePoint(l,-a/2);if(c){var f=this._constructArrowBasePoint(u,a/2);if(f){e.seekInPath(e.pathSize-1);var _=[e.x,e.y];t.pushPath(u),t.nextPath(),t.nextPoint(),t.setControlPoint(),t.pushPoint(f),t.nextPoint(),t.setControlPoint(),t.pushPoint(_),t.nextPoint(),t.setControlPoint(),t.pushPoint(c),t.nextPoint(),t.setControlPoint(),t.pushPoints(l.reverse()),t.setControlPoint(),i||(t.setControlPointAt(0),t.setControlPointAt(t.pathSize-1),t.pushPoint(u[0])),t.reset()}}}}}}}},{key:"_constructCrossedArrow",value:function(t,e){var i=e.pathLength(),r=this._width;i<r*(1+f+1)&&(r=i/(1+f+1)),e.seekPathStart();var n=this._curveHelper.getSubCurve(e,0,i-r*(1+f));if(n){n.nextPath();var s=r/2;if(!this._curveHelper.isEmpty(n)){var a=(0,h.l)(n),o=this._constructOffset(a,s);if(o){var l=this._constructOffset(a,-s);if(l){var u=this._curveHelper.getSubCurve(e,0,i-r);if(u&&(u.nextPath(),!this._curveHelper.isEmpty(u))){var c=(0,h.l)(u),_=this._constructOffset(c,s);if(_){var v=this._constructOffset(c,-s);if(v){var d=_[_.length-1],p=this._constructArrowBasePoint(_,s/2);if(p){var m=v[v.length-1],y=this._constructArrowBasePoint(v,-s/2);if(y){e.seekInPath(e.pathSize-1);var g=[e.x,e.y];t.pushPath(o),t.nextPath(),t.nextPoint(),t.setControlPoint(),t.pushPoint(m),t.nextPoint(),t.setControlPoint(),t.pushPoint(y),t.nextPoint(),t.setControlPoint(),t.pushPoint(g),t.nextPoint(),t.setControlPoint(),t.pushPoint(p),t.nextPoint(),t.setControlPoint(),t.pushPoint(d),t.nextPoint(),t.setControlPoint(),t.pushPoints(l.reverse()),t.nextPoint(),t.setControlPoint(),t.reset()}}}}}}}}}}},{key:"_constructOffset",value:function(t,e){return this._curveHelper.offset(t,e,c.id.Rounded,4,this._offsetFlattenError)}},{key:"_constructArrowBasePoint",value:function(t,e){if(!t||t.length<2)return null;var i=t[t.length-2],r=t[t.length-1],n=[r[0]-i[0],r[1]-i[1]];return this._curveHelper.normalize(n),[r[0]+n[1]*e,r[1]-n[0]*e]}}]),i}(l.vT)},65057:function(t,e,i){i.d(e,{I:function(){return c}});var r=i(15671),n=i(43144),s=(i(59486),i(23895)),a=i(41116),o=i(35747),h=i(59713),l=i(48202),u=i(78952),c=function(){function t(){(0,r.Z)(this,t)}return(0,n.Z)(t,[{key:"execute",value:function(t,e,i,r,n,s){return new f(t,e,i,r,n,s)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();c.instance=null;var f=function(){function t(e,i,n,s,a,o){(0,r.Z)(this,t),this._inputGeometries=e,this._tileKey=s,this._geometryEngine=a,this._curveHelper=new h.N,this._size=(void 0!==i.size?i.size:1)*n,this._maxInflateSize=o*n,this._offsetFlattenError=h.D*n}return(0,n.Z)(t,[{key:"next",value:function(){for(var t;t=this._inputGeometries.next();){if(0===this._size)return t;if("esriGeometryEnvelope"===t.geometryType)if(this._size>0){var e=s.z.createEmptyOptimizedCIM(t.geometryType),i=(0,a.M)(t)[0],r=this._curveHelper.offset(i,this._size,l.id.Rounded,4,this._offsetFlattenError);if(r)return e.pushPath(r),e}else if(this._size<0){var n=t.asJSON();if(Math.min(n.xmax-n.xmin,n.ymax-n.ymin)+2*this._size>0)return s.z.fromJSONCIM({xmin:n.xmin-this._size,xmax:n.xmax+this._size,ymin:n.ymin-this._size,ymax:n.ymax+this._size})}var h=this._geometryEngine;if(null==h)return null;var c=this._tileKey?(0,o.L)(t,this._maxInflateSize):t;if(c){var f=h.buffer(u.Z.WebMercator,c.asJSON(),this._size,1);return f?s.z.fromJSONCIM(f):null}}return null}}]),t}()},53704:function(t,e,i){i.d(e,{Y:function(){return c}});var r=i(29439),n=i(37762),s=i(15671),a=i(43144),o=i(23895),h=i(41116),l=i(25290),u=i(48202),c=function(){function t(){(0,s.Z)(this,t)}return(0,a.Z)(t,[{key:"execute",value:function(t,e,i,r,n){return new f(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();c.instance=null;var f=function(){function t(e,i,r){var n;(0,s.Z)(this,t),this._defaultPointSize=20,this._inputGeometries=e,this._geomUnitsPerPoint=r,this._rule=null!==(n=i.rule)&&void 0!==n?n:u.Em.FullGeometry,this._defaultSize=this._defaultPointSize*r}return(0,a.Z)(t,[{key:"next",value:function(){for(var t;t=this._inputGeometries.next();){var e=this._processGeom((0,h.M)(t));if(null!==e&&void 0!==e&&e.length)return o.z.fromJSONCIM({paths:e})}return null}},{key:"_clone",value:function(t){return[t[0],t[1]]}},{key:"_mid",value:function(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}},{key:"_mix",value:function(t,e,i,r){return[t[0]*e+i[0]*r,t[1]*e+i[1]*r]}},{key:"_add",value:function(t,e){return[t[0]+e[0],t[1]+e[1]]}},{key:"_add2",value:function(t,e,i){return[t[0]+e,t[1]+i]}},{key:"_sub",value:function(t,e){return[t[0]-e[0],t[1]-e[1]]}},{key:"_dist",value:function(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}},{key:"_norm",value:function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}},{key:"_normalize",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=e/this._norm(t);t[0]*=i,t[1]*=i}},{key:"_leftPerpendicular",value:function(t){var e=-t[1],i=t[0];t[0]=e,t[1]=i}},{key:"_leftPerp",value:function(t){return[-t[1],t[0]]}},{key:"_rightPerpendicular",value:function(t){var e=t[1],i=-t[0];t[0]=e,t[1]=i}},{key:"_rightPerp",value:function(t){return[t[1],-t[0]]}},{key:"_dotProduct",value:function(t,e){return t[0]*e[0]+t[1]*e[1]}},{key:"_crossProduct",value:function(t,e){return t[0]*e[1]-t[1]*e[0]}},{key:"_rotateDirect",value:function(t,e,i){var r=t[0]*e-t[1]*i,n=t[0]*i+t[1]*e;t[0]=r,t[1]=n}},{key:"_makeCtrlPt",value:function(t){var e=[t[0],t[1]];return(0,l.qh)(e,1),e}},{key:"_addAngledTicks",value:function(t,e,i,r){var n=this._sub(i,e);this._normalize(n);var s,a=this._crossProduct(n,this._sub(r,e));s=a>0?this._rightPerp(n):this._leftPerp(n);var o=Math.abs(a)/2,h=[];h.push([e[0]+(s[0]-n[0])*o,e[1]+(s[1]-n[1])*o]),h.push(e),h.push(i),h.push([i[0]+(s[0]+n[0])*o,i[1]+(s[1]+n[1])*o]),t.push(h)}},{key:"_addBezier2",value:function(t,e,i,r,n){if(0!=n--){var s=this._mid(e,i),a=this._mid(i,r),o=this._mid(s,a);this._addBezier2(t,e,s,o,n),this._addBezier2(t,o,a,r,n)}else t.push(r)}},{key:"_addBezier3",value:function(t,e,i,r,n,s){if(0!=s--){var a=this._mid(e,i),o=this._mid(i,r),h=this._mid(r,n),l=this._mid(a,o),u=this._mid(o,h),c=this._mid(l,u);this._addBezier3(t,e,a,l,c,s),this._addBezier3(t,c,u,h,n,s)}else t.push(n)}},{key:"_add90DegArc",value:function(t,e,i,r,n){var s=null!==n&&void 0!==n?n:this._crossProduct(this._sub(i,e),this._sub(r,e))>0,a=this._mid(e,i),o=this._sub(a,e);s?this._leftPerpendicular(o):this._rightPerpendicular(o),a[0]+=o[0],a[1]+=o[1],this._addBezier3(t,e,this._mix(e,.33333,a,.66667),this._mix(i,.33333,a,.66667),i,4)}},{key:"_addArrow",value:function(t,e,i){var r=e[0],n=e[1],s=e[e.length-1],a=this._sub(r,n),o=this._norm(a);this._normalize(a);var h=Math.abs(this._crossProduct(a,this._sub(s,n))),l=this._dotProduct(a,this._sub(s,n));l<.05*o?l=.05*o:l>.95*o&&(l=.95*o);var u=.5*h,c=this._leftPerp(a),f=[n[0]+a[0]*l,n[1]+a[1]*l],_=e.length-1,v=[];v.push(i?[-c[0],-c[1]]:c);for(var d=[-a[0],-a[1]],p=1;p<_-1;p++){var m=this._sub(e[p+1],e[p]);this._normalize(m);var y=this._dotProduct(m,d),g=this._crossProduct(m,d),P=Math.sqrt((1+y)/2),x=this._sub(m,d);this._normalize(x),x[0]/=P,x[1]/=P,v.push(g<0?[-x[0],-x[1]]:x),d=m}v.push(this._rightPerp(d));for(var k=v.length-1;k>0;k--)t.push([e[k][0]+v[k][0]*u,e[k][1]+v[k][1]*u]);t.push([f[0]+v[0][0]*u,f[1]+v[0][1]*u]),t.push([f[0]+v[0][0]*h,f[1]+v[0][1]*h]),t.push(r),t.push([f[0]-v[0][0]*h,f[1]-v[0][1]*h]),t.push([f[0]-v[0][0]*u,f[1]-v[0][1]*u]);for(var M=1;M<v.length;M++)t.push([e[M][0]-v[M][0]*u,e[M][1]-v[M][1]*u])}},{key:"_cp2",value:function(t,e,i){return t.length>=2?t[1]:this._add2(t[0],e*this._defaultSize,i*this._defaultSize)}},{key:"_cp3",value:function(t,e,i,r){if(t.length>=3)return t[2];var n=this._mix(t[0],1-i,e,i),s=this._sub(e,t[0]);return this._normalize(s),this._rightPerpendicular(s),[n[0]+s[0]*r*this._defaultSize,n[1]+s[1]*r*this._defaultSize]}},{key:"_arrowPath",value:function(t){if(t.length>2)return t;var e=t[0],i=this._cp2(t,-4,0),r=this._sub(e,i);this._normalize(r);var n=this._rightPerp(r);return[e,i,[e[0]+(n[0]-r[0])*this._defaultSize,e[1]+(n[1]-r[1])*this._defaultSize]]}},{key:"_arrowLastSeg",value:function(t){var e,i=t[0],r=this._cp2(t,-4,0);if(t.length>=3)e=t[t.length-1];else{var n=this._sub(i,r);this._normalize(n);var s=this._rightPerp(n);e=[i[0]+(s[0]-n[0])*this._defaultSize,i[1]+(s[1]-n[1])*this._defaultSize]}return[r,e]}},{key:"_processGeom",value:function(t){if(!t)return null;var e,i=[],s=(0,n.Z)(t);try{for(s.s();!(e=s.n()).done;){var a=e.value;if(a&&0!==a.length){var o=a.length,h=a[0];switch(this._rule){case u.Em.PerpendicularFromFirstSegment:var c=this._cp2(a,0,-1),f=this._cp3(a,c,.5,4),_=[];_.push(f),_.push(this._mid(h,c)),i.push(_);break;case u.Em.ReversedFirstSegment:var v=this._cp2(a,0,-1);i.push([v,h]);break;case u.Em.PerpendicularToSecondSegment:if(a.length<3)return[];var d=this._cp2(a,-4,1),p=this._cp3(a,d,.882353,-1.94),m=[];m.push(this._mid(d,p)),m.push(h),i.push(m);break;case u.Em.SecondSegmentWithTicks:if(a.length<3)return[];var y,g=this._cp2(a,-4,1),P=this._cp3(a,g,.882353,-1.94),x=this._sub(P,g);y=this._crossProduct(x,this._sub(h,g))>0?this._rightPerp(x):this._leftPerp(x);var k=[];k.push([g[0]+(y[0]-x[0])/3,g[1]+(y[1]-x[1])/3]),k.push(g),k.push(P),k.push([P[0]+(y[0]+x[0])/3,P[1]+(y[1]+x[1])/3]),i.push(k);break;case u.Em.DoublePerpendicular:var M=this._cp2(a,0,-1),b=this._cp3(a,M,.5,3),S=this._mid(h,M),C=this._sub(S,b);this._normalize(C);var w=this._crossProduct(C,this._sub(h,b));this._leftPerpendicular(C);var I=[];I.push(h),I.push([b[0]+C[0]*w,b[1]+C[1]*w]),i.push(I);var z=[];z.push([b[0]-C[0]*w,b[1]-C[1]*w]),z.push(M),i.push(z);break;case u.Em.OppositeToFirstSegment:var L=this._cp2(a,0,-1),Z=this._cp3(a,L,.5,3),T=this._mid(h,L),E=this._sub(T,Z);this._normalize(E);var A=this._crossProduct(E,this._sub(h,Z));this._leftPerpendicular(E);var F=[];F.push([Z[0]+E[0]*A,Z[1]+E[1]*A]),F.push([Z[0]-E[0]*A,Z[1]-E[1]*A]),i.push(F);break;case u.Em.TriplePerpendicular:var R=this._cp2(a,0,-1),G=this._cp3(a,R,.5,4),N=this._mid(h,R),O=this._sub(N,G);this._normalize(O);var X=this._crossProduct(O,this._sub(h,G));this._leftPerpendicular(O);var D=[];D.push([G[0]+O[0]*X*.8,G[1]+O[1]*X*.8]),D.push([N[0]+.8*(h[0]-N[0]),N[1]+.8*(h[1]-N[1])]),i.push(D),i.push([G,N]);var Y=[];Y.push([G[0]-O[0]*X*.8,G[1]-O[1]*X*.8]),Y.push([N[0]+.8*(R[0]-N[0]),N[1]+.8*(R[1]-N[1])]),i.push(Y);break;case u.Em.HalfCircleFirstSegment:var B=this._cp2(a,0,-1),H=this._cp3(a,B,.5,4),J=this._mid(h,B),U=this._sub(B,h),V=Math.cos(Math.PI/18),W=Math.sin(Math.PI/18),q=Math.sqrt((1+V)/2),j=Math.sqrt((1-V)/2),K=[],Q=void 0;this._crossProduct(U,this._sub(H,h))>0?(K.push(h),U=this._sub(h,J),Q=B):(K.push(B),U=this._sub(B,J),Q=h),this._rotateDirect(U,q,j),U[0]/=q,U[1]/=q;for(var $=1;$<=18;$++)K.push(this._add(J,U)),this._rotateDirect(U,V,W);K.push(Q),i.push(K);break;case u.Em.HalfCircleSecondSegment:var tt=this._cp2(a,0,-1),et=this._cp3(a,tt,1,-1),it=this._sub(h,tt);this._normalize(it);var rt=this._crossProduct(it,this._sub(et,tt))/2;this._leftPerpendicular(it);var nt=[tt[0]+it[0]*rt,tt[1]+it[1]*rt];it=this._sub(tt,nt);var st=Math.cos(Math.PI/18),at=Math.sin(Math.PI/18);rt>0&&(at=-at);for(var ot=[tt],ht=1;ht<=18;ht++)this._rotateDirect(it,st,at),ot.push(this._add(nt,it));i.push(ot);break;case u.Em.HalfCircleExtended:var lt=this._cp2(a,0,-2),ut=this._cp3(a,lt,1,-1),ct=void 0;if(o>=4)ct=a[3];else{var ft=this._sub(h,lt);ct=this._add(ut,ft)}var _t=this._dist(lt,ut)/2/.75,vt=this._sub(lt,h);this._normalize(vt,_t);var dt=this._sub(ut,ct);this._normalize(dt,_t);var pt=[ct,ut];i.push(pt);var mt=[this._clone(ut)];this._addBezier3(mt,ut,this._add(ut,dt),this._add(lt,vt),lt,4),mt.push(h),i.push(mt);break;case u.Em.OpenCircle:for(var yt=this._cp2(a,-2,0),gt=this._sub(yt,h),Pt=Math.cos(Math.PI/18),xt=-Math.sin(Math.PI/18),kt=[yt],Mt=1;Mt<=33;Mt++)this._rotateDirect(gt,Pt,xt),kt.push(this._add(h,gt));i.push(kt);break;case u.Em.CoverageEdgesWithTicks:var bt=this._cp2(a,0,-1),St=void 0,Ct=void 0;if(o>=3)St=a[2];else{var wt=this._sub(bt,h),It=this._leftPerp(wt);St=[h[0]+It[0]-.25*wt[0],h[1]+It[1]-.25*wt[1]]}if(o>=4)Ct=a[3];else{var zt=this._mid(h,bt),Lt=this._sub(h,bt);this._normalize(Lt),this._leftPerpendicular(Lt);var Zt=this._crossProduct(Lt,this._sub(St,zt));this._rightPerpendicular(Lt),Ct=[St[0]+Lt[0]*Zt*2,St[1]+Lt[1]*Zt*2]}var Tt=this._sub(bt,h),Et=void 0,At=void 0;Et=this._crossProduct(Tt,this._sub(St,h))>0?this._rightPerp(Tt):this._leftPerp(Tt),(At=[]).push(St),At.push(h),At.push([h[0]+(Et[0]-Tt[0])/3,h[1]+(Et[1]-Tt[1])/3]),i.push(At),Et=this._crossProduct(Tt,this._sub(Ct,bt))>0?this._rightPerp(Tt):this._leftPerp(Tt),(At=[]).push([bt[0]+(Et[0]+Tt[0])/3,bt[1]+(Et[1]+Tt[1])/3]),At.push(bt),At.push(Ct),i.push(At);break;case u.Em.GapExtentWithDoubleTicks:var Ft=this._cp2(a,0,2),Rt=this._cp3(a,Ft,0,1),Gt=void 0;if(o>=4)Gt=a[3];else{var Nt=this._sub(Ft,h);Gt=this._add(Rt,Nt)}this._addAngledTicks(i,h,Ft,this._mid(Rt,Gt)),this._addAngledTicks(i,Rt,Gt,this._mid(h,Ft));break;case u.Em.GapExtentMidline:var Ot=this._cp2(a,2,0),Xt=this._cp3(a,Ot,0,1),Dt=void 0;if(o>=4)Dt=a[3];else{var Yt=this._sub(Ot,h);Dt=this._add(Xt,Yt)}var Bt=[];Bt.push(this._mid(h,Xt)),Bt.push(this._mid(Ot,Dt)),i.push(Bt);break;case u.Em.Chevron:var Ht=this._cp2(a,-1,-1),Jt=void 0;if(o>=3)Jt=a[2];else{var Ut=this._sub(Ht,h);this._leftPerpendicular(Ut),Jt=this._add(h,Ut)}i.push([Ht,this._makeCtrlPt(h),Jt]);break;case u.Em.PerpendicularWithArc:var Vt=this._cp2(a,0,-2),Wt=this._cp3(a,Vt,.5,-1),qt=this._sub(Vt,h),jt=this._norm(qt);qt[0]/=jt,qt[1]/=jt;var Kt=this._crossProduct(qt,this._sub(Wt,h)),Qt=this._dotProduct(qt,this._sub(Wt,h));Qt<.05*jt?Qt=.05*jt:Qt>.95*jt&&(Qt=.95*jt);var $t=[h[0]+qt[0]*Qt,h[1]+qt[1]*Qt],te=this._leftPerp(qt),ee=[];if(ee.push([$t[0]-te[0]*Kt,$t[1]-te[1]*Kt]),ee.push([$t[0]+te[0]*Kt,$t[1]+te[1]*Kt]),i.push(ee),o>=4){var ie=a[3],re=this._dotProduct(qt,this._sub(ie,h));re<.1*jt?re=.1*jt:re>.9*jt&&(re=.9*jt);var ne=[h[0]+qt[0]*re,h[1]+qt[1]*re],se=this._crossProduct(qt,this._sub(ie,h)),ae=[];ae.push([ne[0]-te[0]*se,ne[1]-te[1]*se]),ae.push([ne[0]+te[0]*se,ne[1]+te[1]*se]),i.push(ae)}var oe=[Vt[0]+te[0]*Kt,Vt[1]+te[1]*Kt];te=this._sub(Vt,oe);var he=Math.cos(Math.PI/18),le=Math.sin(Math.PI/18);Kt<0&&(le=-le),ee=[h,Vt];for(var ue=1;ue<=9;ue++)this._rotateDirect(te,he,le),ee.push(this._add(oe,te));i.push(ee);break;case u.Em.ClosedHalfCircle:for(var ce=this._cp2(a,2,0),fe=this._mid(h,ce),_e=this._sub(ce,fe),ve=Math.cos(Math.PI/18),de=Math.sin(Math.PI/18),pe=[h,ce],me=1;me<=18;me++)this._rotateDirect(_e,ve,de),pe.push(this._add(fe,_e));i.push(pe);break;case u.Em.TripleParallelExtended:var ye=this._cp2(a,0,-2),ge=this._cp3(a,ye,1,-2),Pe=this._mid(h,ye),xe=this._sub(ge,ye);this._normalize(xe);var ke=Math.abs(this._crossProduct(xe,this._sub(Pe,ye)))/2,Me=this._dist(ye,ge),be=[ye,h];be.push([h[0]+xe[0]*Me*.5,h[1]+xe[1]*Me*.5]),i.push(be);var Se=[];Se.push([Pe[0]-xe[0]*ke,Pe[1]-xe[1]*ke]),Se.push([Pe[0]+xe[0]*Me*.375,Pe[1]+xe[1]*Me*.375]),(0,l.qh)(Se[Se.length-1],1),Se.push([Pe[0]+xe[0]*Me*.75,Pe[1]+xe[1]*Me*.75]),i.push(Se);var Ce=[ye,ge];i.push(Ce);break;case u.Em.ParallelWithTicks:var we=this._cp2(a,3,0),Ie=this._cp3(a,we,.5,-1),ze=this._sub(Ie,we);this._normalize(ze);var Le=this._crossProduct(ze,this._sub(Ie,h));this._leftPerpendicular(ze),this._addAngledTicks(i,h,we,Ie),this._addAngledTicks(i,this._mix(h,1,ze,Le),this._mix(we,1,ze,Le),this._mid(h,we));break;case u.Em.Parallel:var Ze=this._cp2(a,3,0),Te=this._cp3(a,Ze,.5,-1),Ee=this._sub(Ze,h);this._normalize(Ee);var Ae=this._leftPerp(Ee),Fe=this._crossProduct(Ee,this._sub(Te,h)),Re=[h,Ze];i.push(Re),(Re=[]).push([h[0]+Ae[0]*Fe,h[1]+Ae[1]*Fe]),Re.push([Ze[0]+Ae[0]*Fe,Ze[1]+Ae[1]*Fe]),i.push(Re);break;case u.Em.PerpendicularToFirstSegment:var Ge=this._cp2(a,3,0),Ne=this._cp3(a,Ge,.5,-1),Oe=this._mid(h,Ge),Xe=this._sub(Ge,h);this._normalize(Xe);var De=this._crossProduct(Xe,this._sub(Ne,h));this._leftPerpendicular(Xe);var Ye=[];Ye.push([Oe[0]-Xe[0]*De*.25,Oe[1]-Xe[1]*De*.25]),Ye.push([Oe[0]+Xe[0]*De*1.25,Oe[1]+Xe[1]*De*1.25]),i.push(Ye);break;case u.Em.ParallelOffset:var Be=this._cp2(a,3,0),He=this._cp3(a,Be,.5,-1),Je=this._sub(Be,h);this._normalize(Je);var Ue=this._crossProduct(Je,this._sub(He,h));this._leftPerpendicular(Je);var Ve=[];Ve.push([h[0]-Je[0]*Ue,h[1]-Je[1]*Ue]),Ve.push([Be[0]-Je[0]*Ue,Be[1]-Je[1]*Ue]),i.push(Ve);var We=[];We.push([h[0]+Je[0]*Ue,h[1]+Je[1]*Ue]),We.push([Be[0]+Je[0]*Ue,Be[1]+Je[1]*Ue]),i.push(We);break;case u.Em.OffsetOpposite:var qe=this._cp2(a,3,0),je=this._cp3(a,qe,.5,-1),Ke=this._sub(qe,h);this._normalize(Ke);var Qe=this._crossProduct(Ke,this._sub(je,h));this._leftPerpendicular(Ke);var $e=[];$e.push([h[0]-Ke[0]*Qe,h[1]-Ke[1]*Qe]),$e.push([qe[0]-Ke[0]*Qe,qe[1]-Ke[1]*Qe]),i.push($e);break;case u.Em.OffsetSame:var ti=this._cp2(a,3,0),ei=this._cp3(a,ti,.5,-1),ii=this._sub(ti,h);this._normalize(ii);var ri=this._crossProduct(ii,this._sub(ei,h));this._leftPerpendicular(ii);var ni=[];ni.push([h[0]+ii[0]*ri,h[1]+ii[1]*ri]),ni.push([ti[0]+ii[0]*ri,ti[1]+ii[1]*ri]),i.push(ni);break;case u.Em.CircleWithArc:var si=this._cp2(a,3,0),ai=this._cp3(a,si,.5,-1),oi=void 0,hi=void 0;if(o>=4)oi=a[3],hi=this._crossProduct(this._sub(oi,si),this._sub(ai,si))>0;else{oi=si,hi=this._crossProduct(this._sub(oi,h),this._sub(ai,h))>0;var li=24*this._geomUnitsPerPoint,ui=this._sub(oi,h);this._normalize(ui,li);var ci=Math.sqrt(2)/2;this._rotateDirect(ui,ci,hi?ci:-ci),si=this._add(h,ui)}for(var fi=this._sub(si,h),_i=Math.cos(Math.PI/18),vi=Math.sin(Math.PI/18),di=[si],pi=1;pi<=36;pi++)this._rotateDirect(fi,_i,vi),di.push(this._add(h,fi));this._add90DegArc(di,si,oi,ai,hi),(0,l.qh)(di[di.length-8],1),i.push(di);break;case u.Em.DoubleJog:var mi=void 0,yi=this._cp2(a,-3,1),gi=this._cp3(a,yi,-1,-.5);if(o>=4)mi=a[3];else{var Pi=h;h=yi,mi=gi;var xi=this._dist(h,Pi),ki=this._dist(mi,Pi),Mi=30*this._geomUnitsPerPoint;.5*xi<Mi&&(Mi=.5*xi),.5*ki<Mi&&(Mi=.5*ki),yi=this._mix(h,Mi/xi,Pi,(xi-Mi)/xi),gi=this._mix(mi,Mi/ki,Pi,(ki-Mi)/ki)}var bi=this._mid(h,yi),Si=this._mid(mi,gi),Ci=this._dist(h,yi),wi=this._dist(gi,mi),Ii=Math.min(Ci,wi)/8;Ii=Math.min(Ii,24*this._geomUnitsPerPoint);var zi=Math.cos(Math.PI/4),Li=this._sub(h,yi);this._normalize(Li,Ii),this._crossProduct(Li,this._sub(mi,yi))>0?this._rotateDirect(Li,zi,-zi):this._rotateDirect(Li,zi,zi);var Zi=[];Zi.push(yi),Zi.push(this._add(bi,Li)),Zi.push(this._sub(bi,Li)),Zi.push(h),i.push(Zi),Li=this._sub(mi,gi),this._normalize(Li,Ii),this._crossProduct(Li,this._sub(h,gi))<0?this._rotateDirect(Li,zi,zi):this._rotateDirect(Li,zi,-zi),(Zi=[]).push(gi),Zi.push(this._add(Si,Li)),Zi.push(this._sub(Si,Li)),Zi.push(mi),i.push(Zi);break;case u.Em.PerpendicularOffset:var Ti=this._cp2(a,-4,1),Ei=this._cp3(a,Ti,.882353,-1.94),Ai=this._sub(Ei,Ti);this._crossProduct(Ai,this._sub(h,Ti))>0?this._rightPerpendicular(Ai):this._leftPerpendicular(Ai);var Fi=[Ai[0]/8,Ai[1]/8],Ri=this._sub(this._mid(Ti,Ei),Fi);i.push([Ri,h]);break;case u.Em.LineExcludingLastSegment:for(var Gi=this._arrowPath(a),Ni=[],Oi=Gi.length-2;Oi--;)Ni.push(Gi[Oi]);i.push(Ni);break;case u.Em.MultivertexArrow:var Xi=this._arrowPath(a),Di=[];this._addArrow(Di,Xi,!1),i.push(Di);break;case u.Em.CrossedArrow:var Yi=this._arrowPath(a),Bi=[];this._addArrow(Bi,Yi,!0),i.push(Bi);break;case u.Em.ChevronArrow:var Hi=this._arrowLastSeg(a),Ji=(0,r.Z)(Hi,2),Ui=Ji[0],Vi=Ji[1],Wi=10*this._geomUnitsPerPoint,qi=this._sub(h,Ui),ji=this._norm(qi);this._normalize(qi);var Ki=this._crossProduct(qi,this._sub(Vi,Ui)),Qi=this._dotProduct(qi,this._sub(Vi,Ui));Qi<.05*ji?Qi=.05*ji:Qi>.95*ji-Wi&&(Qi=.95*ji-Wi);var $i=[Ui[0]+qi[0]*Qi,Ui[1]+qi[1]*Qi],tr=this._leftPerp(qi),er=[];er.push([$i[0]+tr[0]*Ki+qi[0]*Wi,$i[1]+tr[1]*Ki+qi[1]*Wi]),er.push(h),er.push([$i[0]-tr[0]*Ki+qi[0]*Wi,$i[1]-tr[1]*Ki+qi[1]*Wi]),i.push(er);break;case u.Em.ChevronArrowOffset:var ir=this._arrowLastSeg(a),rr=(0,r.Z)(ir,2),nr=rr[0],sr=rr[1],ar=this._sub(h,nr),or=this._norm(ar);this._normalize(ar);var hr=this._crossProduct(ar,this._sub(sr,nr)),lr=this._dotProduct(ar,this._sub(sr,nr));lr<.05*or?lr=.05*or:lr>.95*or&&(lr=.95*or);var ur=[nr[0]+ar[0]*lr,nr[1]+ar[1]*lr];this._leftPerpendicular(ar);var cr=[];cr.push([ur[0]+ar[0]*hr*.5,ur[1]+ar[1]*hr*.5]),cr.push(this._mid(ur,h)),cr.push([ur[0]-ar[0]*hr*.5,ur[1]-ar[1]*hr*.5]),i.push(cr);break;case u.Em.PartialFirstSegment:var fr=this._arrowLastSeg(a),_r=(0,r.Z)(fr,2),vr=_r[0],dr=_r[1],pr=this._sub(h,vr),mr=this._norm(pr);this._normalize(pr);var yr=this._dotProduct(pr,this._sub(dr,vr));yr<.05*mr?yr=.05*mr:yr>.95*mr&&(yr=.95*mr);var gr=[vr[0]+pr[0]*yr,vr[1]+pr[1]*yr];i.push([vr,gr]);break;case u.Em.Arch:var Pr=this._cp2(a,0,-1),xr=this._cp3(a,Pr,.5,1),kr=this._sub(h,Pr),Mr=this._mix(xr,1,kr,.55),br=this._mix(xr,1,kr,-.55),Sr=[h];this._addBezier2(Sr,h,Mr,xr,4),this._addBezier2(Sr,xr,br,Pr,4),i.push(Sr);break;case u.Em.CurvedParallelTicks:var Cr=this._cp2(a,-4,1),wr=this._cp3(a,Cr,.882353,-1.94),Ir=this._sub(wr,Cr);this._crossProduct(Ir,this._sub(h,Cr))>0?this._rightPerpendicular(Ir):this._leftPerpendicular(Ir);var zr=[Ir[0]/8,Ir[1]/8],Lr=this._sub(this._mid(Cr,wr),zr),Zr=this._sub(this._mix(Cr,.75,wr,.25),zr),Tr=this._sub(this._mix(Cr,.25,wr,.75),zr),Er=[Cr];this._addBezier2(Er,Cr,Zr,Lr,3),this._addBezier2(Er,Lr,Tr,wr,3),i.push(Er);for(var Ar=0;Ar<8;Ar++){var Fr=Er[2*Ar+1],Rr=[this._clone(Fr)];Rr.push(this._add(Fr,[Ir[0]/4,Ir[1]/4])),i.push(Rr)}break;case u.Em.Arc90Degrees:var Gr=this._cp2(a,0,-1),Nr=this._cp3(a,Gr,.5,1),Or=[Gr];this._add90DegArc(Or,Gr,h,Nr),i.push(Or);break;case u.Em.TipWithPerpendicularAndTicks:var Xr=this._arrowLastSeg(a),Dr=(0,r.Z)(Xr,2),Yr=Dr[0],Br=Dr[1],Hr=10*this._geomUnitsPerPoint,Jr=this._sub(h,Yr),Ur=this._norm(Jr);this._normalize(Jr);var Vr=this._crossProduct(Jr,this._sub(Br,Yr)),Wr=this._dotProduct(Jr,this._sub(Br,Yr));Wr<.05*Ur?Wr=.05*Ur:Wr>.95*Ur-Hr&&(Wr=.95*Ur-Hr);var qr=this._leftPerp(Jr),jr=[h[0]-Jr[0]*Hr,h[1]-Jr[1]*Hr],Kr=.5*Math.max(Ur-Wr-Hr,Hr);Vr=Math.abs(Vr);var Qr=[];Qr.push([jr[0]+qr[0]*(Vr+Kr)-Jr[0]*Kr,jr[1]+qr[1]*(Vr+Kr)-Jr[1]*Kr]),Qr.push([jr[0]+qr[0]*Vr,jr[1]+qr[1]*Vr]),Qr.push([jr[0]-qr[0]*Vr,jr[1]-qr[1]*Vr]),Qr.push([jr[0]-qr[0]*(Vr+Kr)-Jr[0]*Kr,jr[1]-qr[1]*(Vr+Kr)-Jr[1]*Kr]),i.push(Qr),i.push([jr,h]);break;case u.Em.FullGeometry:default:i.push(a)}}}}catch($r){s.e($r)}finally{s.f()}return i}}]),t}()},38901:function(t,e,i){i.d(e,{d:function(){return u}});var r=i(60136),n=i(29388),s=i(15671),a=i(43144),o=i(23895),h=i(25290),l=i(59713),u=function(){function t(){(0,s.Z)(this,t)}return(0,a.Z)(t,[{key:"execute",value:function(t,e,i,r,n){return new c(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();u.instance=null;var c=function(t){(0,r.Z)(i,t);var e=(0,n.Z)(i);function i(t,r,n){var a;return(0,s.Z)(this,i),(a=e.call(this,t,!0,!0))._curveHelper=new l.N,a._beginCut=(void 0!==r.beginCut?r.beginCut:1)*n,a._endCut=(void 0!==r.endCut?r.endCut:1)*n,a._middleCut=(void 0!==r.middleCut?r.middleCut:0)*n,a._invert=void 0!==r.invert&&r.invert,a._beginCut<0&&(a._beginCut=0),a._endCut<0&&(a._endCut=0),a._middleCut<0&&(a._middleCut=0),a}return(0,a.Z)(i,[{key:"processPath",value:function(t){var e=this._beginCut,i=this._endCut,r=this._middleCut,n=t.pathLength(),s=o.z.createEmptyOptimizedCIM("esriGeometryPolyline");if(this._invert){if(0!==e||0!==i||0!==r)if(e+i+r>=n)for(s.startPath();t.nextPoint();)s.pushXY(t.x,t.y);else this._curveHelper.appendSubCurve(s,t,0,e),this._curveHelper.appendSubCurve(s,t,.5*(n-r),.5*(n+r)),this._curveHelper.appendSubCurve(s,t,n-i,i)}else if(0===e&&0===i&&0===r)for(s.startPath();t.nextPoint();)s.pushXY(t.x,t.y);else e+i+r<n&&(0===r?this._curveHelper.appendSubCurve(s,t,e,n-i):(this._curveHelper.appendSubCurve(s,t,e,.5*(n-r)),this._curveHelper.appendSubCurve(s,t,.5*(n+r),n-i)));return 0===s.totalSize?null:s}}]),i}(h.vT)},13874:function(t,e,i){i.d(e,{x:function(){return p}});var r=i(37762),n=i(93433),s=i(60136),a=i(29388),o=i(15671),h=i(43144),l=i(23895),u=i(41116),c=i(69662),f=i(25290),_=i(48202),v=i(85884),d=i(31027),p=function(){function t(){(0,o.Z)(this,t)}return(0,h.Z)(t,[{key:"execute",value:function(t,e,i,r,n){return new m(t,e,i,r)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();p.instance=null;var m=function(t){(0,s.Z)(i,t);var e=(0,a.Z)(i);function i(t,r,s,a){var h,l,u;(0,o.Z)(this,i),(u=e.call(this,t,!0,!0))._firstCurve=null,u._walker=new v.Ll,u._walker.updateTolerance(s),u._endings=r.lineDashEnding,u._customDashPos=-(null!==(h=r.offsetAlongLine)&&void 0!==h?h:0)*s,u._offsetAtEnd=(null!==(l=r.customEndingOffset)&&void 0!==l?l:0)*s,u._tileKey=a;var c=(0,d.T2)(r).dashTemplate;null==c&&(c=[]),c.length%2&&(c=[].concat((0,n.Z)(c),(0,n.Z)(c)));for(var f=0,_=0;_<c.length;_++){var p=Math.abs(c[_]);p<1e-7&&(p=1e-7),f+=p}return u._patternLength=f,u._numOfDashesPerPattern=c.length/2,u._pattern=new v.h9,u._pattern.init(c,!0),u._pattern.scale(s),u}return(0,h.Z)(i,[{key:"processPath",value:function(t){var e,i;if(0===this._pattern.length()){this.iteratePath=!1;var r=(0,u.l)(t);return l.z.fromJSONCIM({paths:[r]})}if(!this.iteratePath){var n=!0;switch(this._endings){case _.sj.HalfPattern:case _.sj.HalfGap:default:this._pattern.extPtGap=0;break;case _.sj.FullPattern:this.isClosed||(this._pattern.extPtGap=.5*this._pattern.firstValue());break;case _.sj.FullGap:this.isClosed||(this._pattern.extPtGap=.5*this._pattern.lastValue());break;case _.sj.NoConstraint:this.isClosed||(n=!1);break;case _.sj.Custom:this.isClosed||(this._pattern.extPtGap=.5*this._offsetAtEnd)}var s=t.pathLength();if(this._pattern.isEmpty()||s<.1*this._pattern.length()){var a=(0,u.l)(t);return l.z.fromJSONCIM({paths:[a]})}if(!this._walker.init(t,this._pattern,n)){var o=(0,u.l)(t);return l.z.fromJSONCIM({paths:[o]})}}if(this.iteratePath)i=this._pattern.nextValue();else{var h;switch(this._endings){case _.sj.HalfPattern:default:h=.5*this._pattern.firstValue();break;case _.sj.HalfGap:h=.5*-this._pattern.lastValue();break;case _.sj.FullGap:h=-this._pattern.lastValue();break;case _.sj.FullPattern:h=0;break;case _.sj.NoConstraint:case _.sj.Custom:h=-this._customDashPos}var c=h/this._pattern.length();h=(c-=Math.floor(c))*this._pattern.length(),this._pattern.reset(),i=this._pattern.nextValue();for(var f=!1;h>=i;)h-=i,i=this._pattern.nextValue(),f=!f;i-=h,f?(this._walker.nextPosition(i),i=this._pattern.nextValue()):this.isClosed&&(this._firstCurve=this._walker.nextCurve(i),i=this._pattern.nextValue(),this._walker.nextPosition(i),i=this._pattern.nextValue())}var v=this._walker.nextCurve(i);if(v)if(this._walker.isPathEnd()){if(this.iteratePath=!1,this._firstCurve){for(this._firstCurve.nextPath();this._firstCurve.nextPoint();)v.pushXY(this._firstCurve.x,this._firstCurve.y);this._firstCurve=null}}else i=this._pattern.nextValue(),!this._walker.nextPosition(i)||this._walker.isPathEnd()?(this.iteratePath=!1,this._firstCurve&&(v.pushCursor(this._firstCurve),this._firstCurve=null)):this.iteratePath=!0;else this.iteratePath=!1,v=this._firstCurve,this._firstCurve=null;return null!==(e=v)&&void 0!==e&&e.reset(),v}},{key:"isClippingRequired",value:function(t){var e,i=(0,u.M)(t),n=0,s=(0,r.Z)(i);try{for(s.s();!(e=s.n()).done;){var a=e.value;n+=(0,c.ok)(a)}}catch(o){s.e(o)}finally{s.f()}return Math.round(this._numOfDashesPerPattern*(n/this._patternLength))>1e3}}]),i}(f.vT)},24434:function(t,e,i){i.d(e,{h:function(){return u}});var r=i(37762),n=i(15671),s=i(43144),a=(i(59486),i(23895)),o=i(35747),h=i(48202),l=i(78952),u=function(){function t(){(0,n.Z)(this,t)}return(0,s.Z)(t,[{key:"execute",value:function(t,e,i,r,n,s){return new c(t,e,i,r,n,s)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();u.instance=null;var c=function(){function t(e,i,r,s,a,o){switch((0,n.Z)(this,t),this._inputGeometries=e,this._tileKey=s,this._geometryEngine=a,this._maxInflateSize=o*r,this._width=(void 0!==i.width?i.width:2)*r,i.method){case h.$y.Mitered:case h.$y.Bevelled:case h.$y.Rounded:case h.$y.TrueBuffer:case h.$y.Square:}this._option=i.option}return(0,s.Z)(t,[{key:"next",value:function(){for(var t;t=this._inputGeometries.next();){if("esriGeometryEnvelope"===t.geometryType&&this._width>0){var e=t.asJSON();return Math.min(e.xmax-e.xmin,e.ymax-e.ymin)-2*this._width<0?t:a.z.fromJSONCIM({paths:[[[e.xmin+this._width,e.ymin+this._width],[e.xmax-this._width,e.ymin+this._width],[e.xmax-this._width,e.ymax-this._width],[e.xmin+this._width,e.ymax-this._width],[e.xmin+this._width,e.ymin+this._width]],[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]]})}if("esriGeometryPolygon"===t.geometryType){if(0===this._width)return t.clone();var i=this._geometryEngine;if(null==i)return null;var n=this._tileKey?(0,o.L)(t,this._maxInflateSize):t.clone();if(!n)continue;var s=i.buffer(l.Z.WebMercator,n.asJSON(),-this._width,1);if(s){var h,u=(0,r.Z)(s.rings);try{for(u.s();!(h=u.n()).done;){var c=h.value;if(c){n.startPath();var f,_=(0,r.Z)(c.reverse());try{for(_.s();!(f=_.n()).done;){var v=f.value;n.pushXY(v[0],n.yFactor*v[1])}}catch(d){_.e(d)}finally{_.f()}}}}catch(d){u.e(d)}finally{u.f()}}return n}}return null}}]),t}()},12869:function(t,e,i){i.d(e,{F:function(){return u}});var r=i(60136),n=i(29388),s=i(15671),a=i(43144),o=i(23895),h=i(25290),l=i(59713),u=function(){function t(){(0,s.Z)(this,t)}return(0,a.Z)(t,[{key:"execute",value:function(t,e,i,r,n){return new c(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();u.instance=null;var c=function(t){(0,r.Z)(i,t);var e=(0,n.Z)(i);function i(t,r,n){var a;return(0,s.Z)(this,i),(a=e.call(this,t,!1,!0))._curveHelper=new l.N,a._length=(void 0!==r.length?r.length:20)*n,a._angle=void 0!==r.angle?r.angle:225,a._position=void 0!==r.position?r.position:50,a._length<0&&(a._length=-a._length),a._position<20&&(a._position=20),a._position>80&&(a._position=80),a._mirror=!1,a}return(0,a.Z)(i,[{key:"processPath",value:function(t){var e=o.z.createEmptyOptimizedCIM("esriGeometryPolyline");if(this._curveHelper.isEmpty(t))return null;t.seekInPath(0);var i=t.x,r=t.y;t.seekInPath(t.pathSize-1);var n=t.x,s=t.y,a=[n-i,s-r];this._curveHelper.normalize(a);var h=i+(n-i)*this._position/100,l=r+(s-r)*this._position/100,u=Math.cos((90-this._angle)/180*Math.PI),c=Math.sin((90-this._angle)/180*Math.PI);this._mirror&&(c=-c),this._mirror=!this._mirror;var f=[h-this._length/2*u,l-this._length/2*c],_=[h+this._length/2*u,l+this._length/2*c];return e.pushPath([[i,r],f,_,[n,s]]),e}}]),i}(h.vT)},69093:function(t,e,i){i.d(e,{b:function(){return s}});var r=i(15671),n=i(43144),s=function(){function t(){(0,r.Z)(this,t)}return(0,n.Z)(t,[{key:"execute",value:function(t,e,i,r,n){return new a(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();s.instance=null;var a=function(){function t(e,i,n){(0,r.Z)(this,t),this._inputGeometries=e,this._offsetX=void 0!==i.offsetX?i.offsetX*n:0,this._offsetY=void 0!==i.offsetY?i.offsetY*n:0}return(0,n.Z)(t,[{key:"next",value:function(){for(var t=this._inputGeometries.next();t;){if(t.totalSize>0)return this._move(t.clone(),this._offsetX,this._offsetY);t=this._inputGeometries.next()}return null}},{key:"_move",value:function(t,e,i){for(;t.nextPath();)for(;t.nextPoint();)t.x=t.x+e,t.y=t.y+i;return t.reset(),t}}]),t}()},91583:function(t,e,i){i.d(e,{F:function(){return f}});var r=i(15671),n=i(43144),s=(i(59486),i(23895)),a=i(41116),o=i(77981),h=i(35747),l=i(59713),u=i(48202),c=i(78952),f=function(){function t(){(0,r.Z)(this,t)}return(0,n.Z)(t,[{key:"execute",value:function(t,e,i,r,n,s){return new _(t,e,i,r,n,s)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();f.instance=null;var _=function(){function t(e,i,n,s,a,o){var h;(0,r.Z)(this,t),this._inputGeometries=e,this._tileKey=s,this._geometryEngine=a,this._curveHelper=new l.N,this._offset=(null!==(h=i.offset)&&void 0!==h?h:1)*n,this._method=i.method,this._maxInflateSize=Math.max(Math.abs(o*n),10),this._option=i.option,this._offsetFlattenError=l.D*n}return(0,n.Z)(t,[{key:"next",value:function(){for(var t;t=this._inputGeometries.next();){if(0===this._offset)return t.clone();if("esriGeometryEnvelope"===t.geometryType){if(this._method===u.id.Rounded&&this._offset>0){var e=(0,a.l)(t),i=this._curveHelper.offset(e,-this._offset,this._method,4,this._offsetFlattenError);if(i){var r=s.z.createEmptyOptimizedCIM(t.geometryType);return r.pushPath(i),r}return null}var n=t.asJSON();if((0,o.YX)(n)&&Math.min(n.xmax-n.xmin,n.ymax-n.ymin)+2*this._offset>0)return s.z.fromJSONCIM({xmin:n.xmin-this._offset,xmax:n.xmax+this._offset,ymin:n.ymin-this._offset,ymax:n.ymax+this._offset})}var l=this._geometryEngine;if(null!=l){var f=this._tileKey?(0,h.L)(t,this._maxInflateSize):t.clone();if(f){var _=l.offset(c.Z.WebMercator,f.asJSON(),-this._offset,1,this._method,4,this._offsetFlattenError);return _?s.z.fromJSONCIM(_):null}}}return null}}]),t}()},67993:function(t,e,i){i.d(e,{m:function(){return s}});var r=i(15671),n=i(43144),s=function(){function t(){(0,r.Z)(this,t)}return(0,n.Z)(t,[{key:"execute",value:function(t,e,i,r,n){return new a(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();s.instance=null;var a=function(){function t(e,i,n){(0,r.Z)(this,t),this._inputGeometries=e,this._reverse=void 0===i.reverse||i.reverse}return(0,n.Z)(t,[{key:"next",value:function(){for(var t=this._inputGeometries.next();t;){if(!this._reverse)return t;if("esriGeometryPolyline"===t.geometryType)return o(t.clone());t=this._inputGeometries.next()}return null}}]),t}();function o(t){for(;t.nextPath();)for(var e=0;e<t.pathSize/2;e++){t.seekInPath(e);var i=t.x,r=t.y;t.seekInPath(t.pathSize-e-1);var n=t.x,s=t.y;t.x=i,t.y=r,t.seekInPath(e),t.x=n,t.y=s}return t.reset(),t}},64369:function(t,e,i){i.d(e,{O:function(){return a}});var r=i(15671),n=i(43144),s=i(376),a=function(){function t(){(0,r.Z)(this,t)}return(0,n.Z)(t,[{key:"execute",value:function(t,e,i,r,n){return new o(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();a.instance=null;var o=function(){function t(e,i,n){(0,r.Z)(this,t),this._inputGeometries=e,this._rotateAngle=void 0!==i.angle?i.angle*Math.PI/180:0}return(0,n.Z)(t,[{key:"next",value:function(){for(var t=this._inputGeometries.next();t;){if(0===this._rotateAngle||"esriGeometryPoint"===t.geometryType)return t;if(t.totalSize>0){var e=(0,s.Cs)(t),i=(e[2]+e[0])/2,r=(e[3]+e[1])/2;return t.reset(),this._rotate(t.clone(),i,r)}t=this._inputGeometries.next()}return null}},{key:"_rotate",value:function(t,e,i){for(var r=Math.cos(this._rotateAngle),n=Math.sin(this._rotateAngle);t.nextPath();)for(;t.nextPoint();){var s=t.x-e,a=t.y-i;t.x=e+s*r-a*n,t.y=i+s*n+a*r}return t.reset(),t}}]),t}()},13957:function(t,e,i){i.d(e,{I:function(){return a}});var r=i(15671),n=i(43144),s=i(376),a=function(){function t(){(0,r.Z)(this,t)}return(0,n.Z)(t,[{key:"execute",value:function(t,e,i,r,n){return new o(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();a.instance=null;var o=function(){function t(e,i,n){(0,r.Z)(this,t),this._inputGeometries=e,this._xFactor=void 0!==i.xScaleFactor?i.xScaleFactor:1.15,this._yFactor=void 0!==i.yScaleFactor?i.yScaleFactor:1.15}return(0,n.Z)(t,[{key:"next",value:function(){var t=this._inputGeometries.next();if(t){if(1===this._xFactor&&1===this._yFactor)return t;if("esriGeometryPoint"===t.geometryType)return t;if(t.totalSize>0){var e=(0,s.Cs)(t),i=(e[2]+e[0])/2,r=(e[3]+e[1])/2;return t.reset(),this._scaleCursor(t.clone(),i,r)}}return null}},{key:"_scaleCursor",value:function(t,e,i){for(;t.nextPath();)for(;t.nextPoint();)t.x=e+(t.x-e)*this._xFactor,t.y=i+(t.y-i)*this._yFactor;return t.reset(),t}}]),t}()},38236:function(t,e,i){i.d(e,{w:function(){return h}});var r=i(15671),n=i(43144),s=i(23895),a=i(48202),o=i(85884),h=function(){function t(){(0,r.Z)(this,t)}return(0,n.Z)(t,[{key:"execute",value:function(t,e,i,r,n){return new l(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();h.instance=null;var l=function(){function t(e,i,n){(0,r.Z)(this,t),this._inputGeometries=e,this._height=(void 0!==i.amplitude?i.amplitude:2)*n,this._period=(void 0!==i.period?i.period:3)*n,this._style=i.waveform,this._height<=0&&(this._height=Math.abs(this._height)),this._period<=0&&(this._period=Math.abs(this._period)),this._pattern=new o.h9,this._pattern.addValue(this._period),this._pattern.addValue(this._period),this._walker=new o.Ll,this._walker.updateTolerance(n)}return(0,n.Z)(t,[{key:"next",value:function(){for(var t=this._inputGeometries.next();t;){if(0===this._height||0===this._period)return t;var e=this._processGeom(t);if(e)return e;t=this._inputGeometries.next()}return null}},{key:"_processGeom",value:function(t){for(var e=s.z.createEmptyOptimizedCIM(t.geometryType);t.nextPath();){e.startPath();var i=t.pathLength();if(this._walker.init(t,this._pattern))switch(this._style){case a.zQ.Sinus:default:this._constructCurve(e,i,!1);break;case a.zQ.Square:this._constructSquare(e,i);break;case a.zQ.Triangle:this._constructTriangle(e,i);break;case a.zQ.Random:this._constructCurve(e,i,!0)}else for(;t.nextPoint();)e.pushXY(t.x,t.y)}return e}},{key:"_constructCurve",value:function(t,e,i){var r=Math.round(e/this._period);0===r&&(r=1);var n=16*r+1,s=e/r,a=this._period/16,h=1/n,l=2*Math.PI*e/s,u=2*Math.PI*Math.random(),c=2*Math.PI*Math.random(),f=2*Math.PI*Math.random(),_=.75-Math.random()/2,v=.75-Math.random()/2,d=new o.Yw;this._walker.curPointAndAngle(d),t.pushPoint(d.pt);for(var p=0;;){if(!this._walker.nextPointAndAngle(a,d)){t.pushPoint(this._walker.getPathEnd());break}var m=p,y=void 0;if(p+=h,i){var g=this._height/2*(1+.3*Math.sin(_*l*m+u));y=g*Math.sin(l*m+c),y+=g*Math.sin(v*l*m+f),y/=2}else y=.5*this._height*Math.sin(.5*l*m);t.pushXY(d.pt[0]-y*d.sa,d.pt[1]+y*d.ca)}}},{key:"_constructSquare",value:function(t,e){Math.round(e/this._period);for(var i=!0;;){var r=!1;if(this._walker.curPositionIsValid()){var n=new o.Yw;this._walker.curPointAndAngle(n);var s=new o.Yw;if(this._walker.nextPointAndAngle(this._period,s)){var a=new o.Yw;this._walker.nextPointAndAngle(this._period,a)&&(i?(t.pushPoint(n.pt),i=!1):t.pushPoint(n.pt),t.pushXY(n.pt[0]-this._height/2*n.sa,n.pt[1]+this._height/2*n.ca),t.pushXY(s.pt[0]-this._height/2*s.sa,s.pt[1]+this._height/2*s.ca),t.pushXY(s.pt[0]+this._height/2*s.sa,s.pt[1]-this._height/2*s.ca),t.pushXY(a.pt[0]+this._height/2*a.sa,a.pt[1]-this._height/2*a.ca),r=!0)}}if(!r){t.pushPoint(this._walker.getPathEnd());break}}}},{key:"_constructTriangle",value:function(t,e){Math.round(e/this._period);for(var i=!0;;){var r=!1;if(this._walker.curPositionIsValid()){var n=new o.Yw;this._walker.curPointAndAngle(n);var s=new o.Yw;if(this._walker.nextPointAndAngle(this._period/2,s)){var a=new o.Yw;this._walker.nextPointAndAngle(this._period,a)&&(this._walker.nextPosition(this._period/2)&&(i?(t.pushPoint(n.pt),i=!1):t.pushPoint(n.pt),t.pushXY(s.pt[0]-this._height/2*s.sa,s.pt[1]+this._height/2*s.ca),t.pushXY(a.pt[0]+this._height/2*a.sa,a.pt[1]-this._height/2*a.ca)),r=!0)}}if(!r){t.pushPoint(this._walker.getPathEnd());break}}}}]),t}()},53986:function(t,e,i){i.d(e,{W:function(){return u}});var r=i(60136),n=i(29388),s=i(15671),a=i(43144),o=i(25290),h=i(48202),l=i(85884),u=function(){function t(){(0,s.Z)(this,t)}return(0,a.Z)(t,[{key:"execute",value:function(t,e,i,r,n){return new c(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();u.instance=null;var c=function(t){(0,r.Z)(i,t);var e=(0,n.Z)(i);function i(t,r,n){var a,o;return(0,s.Z)(this,i),(o=e.call(this,t))._geometryWalker=new l.Ll,o._geometryWalker.updateTolerance(n),o._angleToLine=null===(a=r.angleToLine)||void 0===a||a,o._offset=(r.offset?r.offset:0)*n,o._originalEndings=r.endings,o._offsetAtEnd=(r.customEndingOffset?r.customEndingOffset:0)*n,o._position=-(r.offsetAlongLine?r.offsetAlongLine:0)*n,o._pattern=new l.h9,o._pattern.init(r.placementTemplate,!1),o._pattern.scale(n),o._endings=o._originalEndings,o}return(0,a.Z)(i,[{key:"processPath",value:function(t){if(this._pattern.isEmpty())return null;var e;if(this.iteratePath)e=this._pattern.nextValue();else{this._originalEndings===h.JS.WithFullGap&&this.isClosed?this._endings=h.JS.WithMarkers:this._endings=this._originalEndings,this._pattern.extPtGap=0;var i,r=!0;switch(this._endings){case h.JS.NoConstraint:i=-this._position,i=this._adjustPosition(i),r=!1;break;case h.JS.WithHalfGap:default:i=-this._pattern.lastValue()/2;break;case h.JS.WithFullGap:i=-this._pattern.lastValue(),this._pattern.extPtGap=this._pattern.lastValue();break;case h.JS.WithMarkers:i=0;break;case h.JS.Custom:i=-this._position,i=this._adjustPosition(i),this._pattern.extPtGap=.5*this._offsetAtEnd}if(!this._geometryWalker.init(t,this._pattern,r))return null;this._pattern.reset();for(var n=0;i>n;)i-=n,n=this._pattern.nextValue();e=n-=i,this.iteratePath=!0}var s=new l.Yw;return this._geometryWalker.nextPointAndAngle(e,s)?this._endings===h.JS.WithFullGap&&this._geometryWalker.isPathEnd()?(this.iteratePath=!1,null):this._endings===h.JS.WithMarkers&&this._geometryWalker.isPathEnd()&&(this.iteratePath=!1,this.isClosed)?null:(this.internalPlacement.setTranslate(s.pt[0]-this._offset*s.sa,s.pt[1]+this._offset*s.ca),this._angleToLine&&this.internalPlacement.setRotateCS(s.ca,s.sa),this.internalPlacement):(this.iteratePath=!1,null)}},{key:"_adjustPosition",value:function(t){var e=t/this._pattern.length();return(e-=Math.floor(e))*this._pattern.length()}}]),i}(o.v1)},1243:function(t,e,i){i.d(e,{j:function(){return _}});var r=i(29439),n=i(88301),s=i(61120),a=i(60136),o=i(29388),h=i(15671),l=i(43144),u=i(25290),c=i(59713),f=i(48202),_=function(){function t(){(0,h.Z)(this,t)}return(0,l.Z)(t,[{key:"execute",value:function(t,e,i,r,n){return new v(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();_.instance=null;var v=function(t){(0,a.Z)(i,t);var e=(0,o.Z)(i);function i(t,r,n){var s,a;return(0,h.Z)(this,i),(a=e.call(this,t,!1,!0))._curveHelper=new c.N,a._placePerPart=null!==(s=r.placePerPart)&&void 0!==s&&s,a._angleToLine=void 0===r.angleToLine||r.angleToLine,a._offset=void 0!==r.offset?r.offset*n:0,a._type=r.extremityPlacement,a._position=void 0!==r.offsetAlongLine?r.offsetAlongLine*n:0,a._beginProcessed=!1,a}return(0,l.Z)(i,[{key:"processMultiPath",value:function(t){return this._placePerPart?(0,n.Z)((0,s.Z)(i.prototype),"processMultiPath",this).call(this,t):this.processPath(t)}},{key:"processPath",value:function(t){var e;switch(this._type){case f.Tx.Both:default:this._beginProcessed?(e=this._atExtremities(t,this._position,!1),this._beginProcessed=!1,this.iterateMultiPath=!1,this.iteratePath=!1):(e=this._atExtremities(t,this._position,!0),this._beginProcessed=!0,this.iterateMultiPath=!0,this.iteratePath=!0);break;case f.Tx.JustBegin:e=this._atExtremities(t,this._position,!0);break;case f.Tx.JustEnd:e=this._atExtremities(t,this._position,!1);case f.Tx.None:}return e}},{key:"_atExtremities",value:function(t,e,i){if(this._placePerPart||(i?t.seekPath(0):t.seekPath(t.totalSize-1)),i||t.seekPathEnd(),i?t.nextPoint():t.prevPoint())for(var n=0,s=0,a=0,o=[t.x,t.y],h=o[0],l=o[1];i?t.nextPoint():t.prevPoint();){s=h,a=l,h=t.x,l=t.y;var u=this._curveHelper.getLength(s,a,h,l);if(n+u>e){var c=(e-n)/u,f=this._curveHelper.getAngleCS(s,a,h,l,c),_=(0,r.Z)(f,2),v=_[0],d=_[1],p=this._curveHelper.getCoord2D(s,a,h,l,c);return this.internalPlacement.setTranslate(p[0]-this._offset*d,p[1]+this._offset*v),this._angleToLine&&this.internalPlacement.setRotateCS(-v,-d),this.internalPlacement}n+=u}return null}}]),i}(u.v1)},81624:function(t,e,i){i.d(e,{x:function(){return l}});var r=i(60136),n=i(29388),s=i(15671),a=i(43144),o=i(25290),h=i(85884),l=function(){function t(){(0,s.Z)(this,t)}return(0,a.Z)(t,[{key:"execute",value:function(t,e,i,r,n){return new u(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();l.instance=null;var u=function(t){(0,r.Z)(i,t);var e=(0,n.Z)(i);function i(t,r,n){var a;return(0,s.Z)(this,i),(a=e.call(this,t))._walker=new h.Ll,a._walker.updateTolerance(n),a._angleToLine=void 0===r.angleToLine||r.angleToLine,a._offset=void 0!==r.offset?r.offset*n:0,a._beginGap=void 0!==r.beginPosition?r.beginPosition*n:0,a._endGap=void 0!==r.endPosition?r.endPosition*n:0,a._flipFirst=void 0===r.flipFirst||r.flipFirst,a._pattern=new h.h9,a._pattern.init(r.positionArray,!1,!1),a._subPathLen=0,a._posCount=a._pattern.size(),a._isFirst=!0,a._prevPos=0,a}return(0,a.Z)(i,[{key:"processPath",value:function(t){if(this._pattern.isEmpty())return null;var e;if(this.iteratePath){var i=this._pattern.nextValue()*this._subPathLen,r=this._beginGap+i;e=r-this._prevPos,this._prevPos=r}else{if(this._posCount=this._pattern.size(),this._isFirst=!0,this._prevPos=0,this._subPathLen=t.pathLength()-this._beginGap-this._endGap,this._subPathLen<0)return this.iteratePath=!1,null;if(!this._walker.init(t,this._pattern,!1))return null;this._pattern.reset();var n=this._pattern.nextValue()*this._subPathLen,s=this._beginGap+n;e=s-this._prevPos,this._prevPos=s,this.iteratePath=!0}var a=new h.Yw;if(!this._walker.nextPointAndAngle(e,a,h.u.END))return this.iteratePath=!1,null;this.internalPlacement.setTranslate(a.pt[0]-this._offset*a.sa,a.pt[1]+this._offset*a.ca);var o,l,u=this._isFirst&&this._flipFirst;return this._angleToLine?(o=a.ca,l=a.sa):(o=1,l=0),u&&(o=-o,l=-l),this.internalPlacement.setRotateCS(o,l),this._isFirst=!1,this._posCount--,0===this._posCount&&(this.iteratePath=!1),this.internalPlacement}}]),i}(o.v1)},50516:function(t,e,i){i.d(e,{O:function(){return _}});var r=i(37762),n=i(29439),s=i(15671),a=i(43144),o=i(84936),h=i(84284),l=i(48202),u=512,c=24,f=1e-6,_=function(){function t(){(0,s.Z)(this,t)}return(0,a.Z)(t,[{key:"execute",value:function(t,e,i,r,n){return new v(t,e,i,r,n)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();_.instance=null;var v=function(){function t(e,i,r,a,c){var f,_;if((0,s.Z)(this,t),this._xMin=0,this._xMax=0,this._yMin=0,this._yMax=0,this._currentX=0,this._currentY=0,this._accelerationMap=null,this._testInsidePolygon=!1,this._verticalSubdivision=!0,this._stepX=Math.abs(null!==(f=i.stepX)&&void 0!==f?f:16)*r,this._stepY=Math.abs(null!==(_=i.stepY)&&void 0!==_?_:16)*r,this._stepX=Math.round(128*this._stepX)/128,this._stepY=Math.round(128*this._stepY)/128,0!==this._stepX&&0!==this._stepY){var v;if(this._gridType=null!==(v=i.gridType)&&void 0!==v?v:l.bj.Fixed,this._gridType===l.bj.Random){var d,p,m=null!==(d=i.seed)&&void 0!==d?d:13;this._randomLCG=new o.Z(1*m),this._randomness=(null!==(p=i.randomness)&&void 0!==p?p:100)/100,this._gridAngle=0,this._shiftOddRows=!1,this._cosAngle=1,this._sinAngle=0,this._offsetX=0,this._offsetY=0,this._buildRandomValues()}else{var y,g,P,x;if(this._randomness=0,this._gridAngle=null!==(y=i.gridAngle)&&void 0!==y?y:0,this._shiftOddRows=null!==(g=i.shiftOddRows)&&void 0!==g&&g,this._offsetX=(null!==(P=i.offsetX)&&void 0!==P?P:0)*r,this._offsetY=(null!==(x=i.offsetY)&&void 0!==x?x:0)*r,this._cosAngle=Math.cos(this._gridAngle/180*Math.PI),this._sinAngle=-Math.sin(this._gridAngle/180*Math.PI),this._stepX)if(this._offsetX<0)for(;this._offsetX<-.5*this._stepX;)this._offsetX+=this._stepX;else for(;this._offsetX>=.5*this._stepX;)this._offsetX-=this._stepX;if(this._stepY)if(this._offsetY<0)for(;this._offsetY<-.5*this._stepY;)this._offsetY+=this._stepY;else for(;this._offsetY>=.5*this._stepY;)this._offsetY-=this._stepY}if(this._graphicOriginX=0,this._graphicOriginY=0,null!=a){var k=a.split("/"),M=(0,n.Z)(k,4),b=M[0],S=M[1],C=M[2],w=M[3],I=parseFloat(b),z=parseFloat(S),L=parseFloat(C),Z=parseFloat(w);this._graphicOriginX=-(Z*Math.pow(2,I)+L)*u,this._graphicOriginY=z*u,this._testInsidePolygon=!0}this._internalPlacement=new h.u,this._calculateMinMax(e),this._geometryCursor=e}}return(0,a.Z)(t,[{key:"next",value:function(){return this._geometryCursor?this._nextInside():null}},{key:"_buildRandomValues",value:function(){if(!t._randValues){t._randValues=[];for(var e=0;e<c;e++)for(var i=0;i<c;i++)t._randValues.push(this._randomLCG.getFloat()),t._randValues.push(this._randomLCG.getFloat())}}},{key:"_calculateMinMax",value:function(t){var e,i,r,n,s,a,o,h,l,c,f,_,v,d;this._xMin=0,this._xMax=0,this._yMin=0,this._yMax=0,o=h=v=f=Number.MAX_VALUE,l=c=d=_=-Number.MAX_VALUE;var p=1!==this._cosAngle;for(t.reset();t.nextPath();)for(;t.nextPoint();)a=t.x,s=t.y,e=a-this._graphicOriginX-this._offsetX,i=s-this._graphicOriginY-this._offsetY,p?(r=this._cosAngle*e-this._sinAngle*i,n=this._sinAngle*e+this._cosAngle*i):(r=e,n=i),o=Math.min(o,r),l=Math.max(l,r),h=Math.min(h,n),c=Math.max(c,n),f=Math.min(f,s),_=Math.max(_,s),v=Math.min(v,a),d=Math.max(d,a);f=f!==Number.MAX_VALUE?f:-u-this._stepY,_=_!==-Number.MAX_VALUE?_:this._stepY,v=v!==Number.MAX_VALUE?v:-this._stepX;var m=_-f,y=(d=d!==-Number.MAX_VALUE?d:u+this._stepX)-v;if(this._verticalSubdivision=m>=y,this._polygonMin=this._verticalSubdivision?f:v,this._testInsidePolygon){var g=0-this._graphicOriginX-this._offsetX-this._stepX,P=u-this._graphicOriginX-this._offsetX+this._stepX,x=-u-this._graphicOriginY-this._offsetY-this._stepY,k=0-this._graphicOriginY-this._offsetY+this._stepY;if(p){var M=[[g,x],[g,k],[P,x],[P,k]];g=x=Number.MAX_VALUE,P=k=-Number.MAX_VALUE;for(var b=0,S=M;b<S.length;b++){var C=S[b],w=this._cosAngle*C[0]-this._sinAngle*C[1],I=this._sinAngle*C[0]+this._cosAngle*C[1];g=Math.min(g,w),P=Math.max(P,w),x=Math.min(x,I),k=Math.max(k,I)}}o=o!==Number.MAX_VALUE?Math.max(o,g):g,h=h!==Number.MAX_VALUE?Math.max(h,x):x,l=l!==-Number.MAX_VALUE?Math.min(l,P):P,c=c!==-Number.MAX_VALUE?Math.min(c,k):k}this._xMin=Math.round(o/this._stepX),this._xMax=Math.round(l/this._stepX),this._yMin=Math.round(h/this._stepY),this._yMax=Math.round(c/this._stepY),this._currentX=this._xMax+1,this._currentY=this._yMin-1,this._buildAccelerationMap(t,v,d,f,_)}},{key:"_buildAccelerationMap",value:function(t,e,i,r,n){t.reset();var s=new Map,a=this._verticalSubdivision,o=a?n-r:i-e,h=Math.ceil(o/10);if(!(h<=1)){var l,c,f,_,v,p,m,y,g,P,x,k=Math.floor(o/h);for(h++,this._delta=k,a?(g=-u-2*this._stepY,P=2*this._stepY,x=r):(g=-2*this._stepX,P=u+2*this._stepX,x=e);t.nextPath();)if(!(t.pathSize<2)&&t.nextPoint())for(l=t.x,c=t.y;t.nextPoint();l=f,c=_){if(f=t.x,_=t.y,a){if(c===_||c<g&&_<g||c>P&&_>P)continue;v=Math.min(c,_),p=Math.max(c,_)}else{if(l===f||l<g&&f<g||l>P&&f>P)continue;v=Math.min(l,f),p=Math.max(l,f)}for(;v<p;)d(m=Math.floor((v-x)/k),l,c,f,_,s),v+=k;(y=Math.floor((p-x)/k))>m&&d(y,l,c,f,_,s)}this._accelerationMap=s}}},{key:"_nextInside",value:function(){for(;;){if(this._currentX>this._xMax){if(this._currentY++,this._currentY>this._yMax)return null;this._currentX=this._xMin,this._shiftOddRows&&this._currentY%2&&this._currentX--}var e=this._currentX*this._stepX+this._offsetX;this._shiftOddRows&&this._currentY%2&&(e+=.5*this._stepX);var i=this._currentY*this._stepY+this._offsetY,r=void 0,n=void 0;if(this._currentX++,this._gridType===l.bj.Random){var s=(this._currentX%c+c)%c,a=(this._currentY%c+c)%c;r=this._graphicOriginX+e+this._stepX*this._randomness*(.5-t._randValues[a*c+s])*2/3,n=this._graphicOriginY+i+this._stepY*this._randomness*(.5-t._randValues[a*c+s+1])*2/3}else r=this._graphicOriginX+this._cosAngle*e+this._sinAngle*i,n=this._graphicOriginY-this._sinAngle*e+this._cosAngle*i;if(!this._testInsidePolygon||this._isInsidePolygon(r,n,this._geometryCursor))return this._internalPlacement.setTranslate(r,n),this._internalPlacement}}},{key:"_isInsidePolygon",value:function(t,e,i){if(null==this._accelerationMap)return function(t,e,i){var r,n,s,a,o=0;for(t+=f,e+=f,i.reset();i.nextPath();)if(i.nextPoint())for(r=i.x,n=i.y;i.nextPoint();r=s,n=a)s=i.x,n>e!=(a=i.y)>e&&((s-r)*(e-n)-(a-n)*(t-r)>0?o++:o--);return 0!==o}(t,e,i);t+=f,e+=f;var n=this._verticalSubdivision,s=n?e:t,a=Math.floor((s-this._polygonMin)/this._delta),o=this._accelerationMap.get(a);if(!o)return!1;var h,l,u,c,_=0,v=(0,r.Z)(o);try{for(v.s();!(c=v.n()).done;){var d=c.value;if(h=d[0],l=d[1],n){if(h[1]>e==l[1]>e)continue;u=(l[0]-h[0])*(e-h[1])-(l[1]-h[1])*(t-h[0])}else{if(h[0]>t==l[0]>t)continue;u=(l[1]-h[1])*(t-h[0])-(l[0]-h[0])*(e-h[1])}u>0?_++:_--}}catch(p){v.e(p)}finally{v.f()}return 0!==_}}]),t}();function d(t,e,i,r,n,s){var a=s.get(t);a||(a=[],s.set(t,a)),a.push([[e,i],[r,n]])}},46628:function(t,e,i){i.d(e,{D:function(){return c}});var r=i(29439),n=i(60136),s=i(29388),a=i(15671),o=i(43144),h=i(25290),l=i(59713),u=i(48202),c=function(){function t(){(0,a.Z)(this,t)}return(0,o.Z)(t,[{key:"execute",value:function(t,e,i,r,n){return new f(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();c.instance=null;var f=function(t){(0,n.Z)(i,t);var e=(0,s.Z)(i);function i(t,r,n){var s;return(0,a.Z)(this,i),(s=e.call(this,t))._curveHelper=new l.N,s._angleToLine=void 0===r.angleToLine||r.angleToLine,s._offset=void 0!==r.offset?r.offset*n:0,s._relativeTo=r.relativeTo,s._position=void 0!==r.startPointOffset?r.startPointOffset*n:0,s._epsilon=.001*n,s}return(0,o.Z)(i,[{key:"processPath",value:function(t){var e=this._position;if(this._relativeTo===u.CS.SegmentMidpoint){if(this.iteratePath||(this.iteratePath=!0),t.nextPoint())for(var i=[t.x,t.y],n=i[0],s=i[1],a=0,o=0;t.nextPoint();){a=t.x,o=t.y;var h=this._curveHelper.getLength(n,s,a,o);if(!(h<this._epsilon)){var l=.5+this._position/h,c=this._curveHelper.getAngleCS(n,s,a,o,l),f=(0,r.Z)(c,2),_=f[0],v=f[1],d=this._curveHelper.getCoord2D(n,s,a,o,l);return this.internalPlacement.setTranslate(d[0]-this._offset*v,d[1]+this._offset*_),this._angleToLine&&this.internalPlacement.setRotateCS(_,v),this.internalPlacement}n=a,s=o}return this.iteratePath=!1,null}var p=this._relativeTo===u.CS.LineEnd;return this.onLine(t,e,p)}},{key:"onLine",value:function(t,e,i){var n,s=!1;switch(this._relativeTo){case u.CS.LineMiddle:default:t.seekPathStart(),n=t.pathLength()/2+e;break;case u.CS.LineBeginning:n=e;break;case u.CS.LineEnd:n=e,s=!0}i?t.seekPathEnd():t.seekPathStart();var a=0;if(i?t.prevPoint():t.nextPoint())for(var o=[t.x,t.y],h=o[0],l=o[1],c=0,f=0;i?t.prevPoint():t.nextPoint();){c=t.x,f=t.y;var _=this._curveHelper.getLength(h,l,c,f);if(a+_>n){var v=(n-a)/_,d=this._curveHelper.getAngleCS(h,l,c,f,v),p=(0,r.Z)(d,2),m=p[0],y=p[1],g=this._curveHelper.getCoord2D(h,l,c,f,v),P=s?-this._offset:this._offset;return this.internalPlacement.setTranslate(g[0]-P*y,g[1]+P*m),this._angleToLine&&(s?this.internalPlacement.setRotateCS(-m,-y):this.internalPlacement.setRotateCS(m,y)),this.internalPlacement}h=c,l=f,a+=_}return null}}]),i}(h.v1)},93268:function(t,e,i){i.d(e,{o:function(){return l}});var r=i(60136),n=i(29388),s=i(15671),a=i(43144),o=i(25290),h=i(59713),l=function(){function t(){(0,s.Z)(this,t)}return(0,a.Z)(t,[{key:"execute",value:function(t,e,i,r,n){return new u(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();l.instance=null;var u=function(t){(0,r.Z)(i,t);var e=(0,n.Z)(i);function i(t,r,n){var a;return(0,s.Z)(this,i),(a=e.call(this,t))._curveHelper=new h.N,a._angleToLine=void 0===r.angleToLine||r.angleToLine,a._offset=void 0!==r.offset?r.offset*n:0,a._endPoints=void 0===r.placeOnEndPoints||r.placeOnEndPoints,a._controlPoints=void 0===r.placeOnControlPoints||r.placeOnControlPoints,a._regularVertices=void 0===r.placeOnRegularVertices||r.placeOnRegularVertices,a._tags=[],a._tagIterator=0,a}return(0,a.Z)(i,[{key:"processPath",value:function(t){if(this.iteratePath||(this._preparePath(t),this.iteratePath=!0),this._tagIterator>=this._tags.length)return this._tags.length=0,this._tagIterator=0,this.iteratePath=!1,null;var e=this._tags[this._tagIterator];this._angleToLine&&this.internalPlacement.setRotate(e[2]);var i=e[0],r=e[1];if(0!==this._offset){var n=Math.cos(e[2]),s=Math.sin(e[2]);i-=this._offset*s,r+=this._offset*n}return this.internalPlacement.setTranslate(i,r),this._tagIterator++,this.internalPlacement}},{key:"_preparePath",value:function(t){this._tags.length=0,this._tagIterator=0,t.seekPathStart();var e=t.isClosed(),i=0,r=!1,n=0,s=0;if(t.seekPathStart(),t.nextPoint())for(var a=t.x,o=t.y,h=t.getControlPoint(),l=!0,u=t.nextPoint();u;){var f=t.x,_=t.y,v=t.getControlPoint();(this._angleToLine||0!==this._offset)&&(n=this._curveHelper.getAngle(a,o,f,_,0)),l?(l=!1,e?(i=n,r=h):(this._endPoints||this._controlPoints&&h)&&this._tags.push([a,o,n])):h?this._controlPoints&&this._tags.push([a,o,c(s,n)]):this._regularVertices&&this._tags.push([a,o,c(s,n)]),(this._angleToLine||0!==this._offset)&&(s=this._curveHelper.getAngle(a,o,f,_,1)),(u=t.nextPoint())||(e?v||r?this._controlPoints&&this._tags.push([f,_,c(s,i)]):this._regularVertices&&this._tags.push([f,_,c(s,i)]):(this._endPoints||this._controlPoints&&v)&&this._tags.push([f,_,s])),a=f,o=_,h=v}this._tagIterator=0}}]),i}(o.v1);function c(t,e){for(var i=Math.PI;Math.abs(e-t)>i+2e-15;)e-t>i?e-=2*i:e+=2*i;return(t+e)/2}},63156:function(t,e,i){i.d(e,{y:function(){return u}});var r=i(15671),n=i(43144),s=i(376),a=i(4954),o=i(36372),h=i(84284),l=i(48202),u=function(){function t(){(0,r.Z)(this,t)}return(0,n.Z)(t,[{key:"execute",value:function(t,e,i,r,n){return new c(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();u.instance=null;var c=function(){function t(e,i,n){(0,r.Z)(this,t),this._geometryCursor=e,this._offsetX=void 0!==i.offsetX?i.offsetX*n:0,this._offsetY=void 0!==i.offsetY?i.offsetY*n:0,this._method=void 0!==i.method?i.method:l.Lh.OnPolygon,this._internalPlacement=new h.u}return(0,n.Z)(t,[{key:"next",value:function(){var t=this._geometryCursor;return this._geometryCursor=null,t?this._polygonCenter(t):null}},{key:"_polygonCenter",value:function(t){var e=!1;switch(this._method){case l.Lh.CenterOfMass:var i=(0,a.NA)(t);i&&(this._internalPlacement.setTranslate(i[0]+this._offsetX,i[1]+this._offsetY),e=!0);break;case l.Lh.BoundingBoxCenter:var r=(0,s.Cs)(t);r&&(this._internalPlacement.setTranslate((r[2]+r[0])/2+this._offsetX,(r[3]+r[1])/2+this._offsetY),e=!0);break;case l.Lh.OnPolygon:default:var n=(0,o.r)(t);null!==n&&(this._internalPlacement.setTranslate(n[0]+this._offsetX,n[1]+this._offsetY),e=!0)}return e?this._internalPlacement:null}}]),t}()},38999:function(t,e,i){i.d(e,{TR:function(){return n},b7:function(){return h},g:function(){return u},kH:function(){return o},qv:function(){return l},tf:function(){return c}});var r,n,s,a=i(32718);function o(t){if(!t)return r.Center;switch(t){case"Left":case"left":return r.Left;case"Right":case"right":return r.Right;case"Justify":return a.Z.getLogger("esri.views.2d.engine.webgl.alignmentUtils").warnOnce("Horizontal alignment 'justify' is not implemented. Falling back to 'center'."),r.Center;case"Center":case"center":return r.Center}}function h(t){if(!t)return n.Center;switch(t){case"Top":case"top":return n.Top;case"Center":case"middle":return n.Center;case"Baseline":case"baseline":return n.Baseline;case"Bottom":case"bottom":return n.Bottom}}function l(t){switch(t){case"above-left":case"esriServerPointLabelPlacementAboveLeft":return["right","bottom"];case"above-center":case"above-along":case"esriServerPointLabelPlacementAboveCenter":case"esriServerLinePlacementAboveAlong":return["center","bottom"];case"above-right":case"esriServerPointLabelPlacementAboveRight":return["left","bottom"];case"center-left":case"esriServerPointLabelPlacementCenterLeft":return["right","middle"];case"center-center":case"center-along":case"esriServerPointLabelPlacementCenterCenter":case"esriServerLinePlacementCenterAlong":case"always-horizontal":case"esriServerPolygonPlacementAlwaysHorizontal":return["center","middle"];case"center-right":case"esriServerPointLabelPlacementCenterRight":return["left","middle"];case"below-left":case"esriServerPointLabelPlacementBelowLeft":return["right","top"];case"below-center":case"below-along":case"esriServerPointLabelPlacementBelowCenter":case"esriServerLinePlacementBelowAlong":return["center","top"];case"below-right":case"esriServerPointLabelPlacementBelowRight":return["left","top"];default:return console.debug("Found invalid placement type ".concat(t)),["center","middle"]}}function u(t){switch(t){case r.Right:case"right":return-1;case r.Center:case"center":return 0;case r.Left:case"left":return 1;default:return console.debug("Found invalid horizontal alignment ".concat(t)),0}}function c(t){switch(t){case n.Top:case"top":return 1;case n.Center:case"middle":return 0;case n.Bottom:case n.Baseline:case"baseline":case"bottom":return-1;default:return console.debug("Found invalid vertical alignment ".concat(t)),0}}(s=r||(r={}))[s.Left=-1]="Left",s[s.Center=0]="Center",s[s.Right=1]="Right",function(t){t[t.Top=1]="Top",t[t.Center=0]="Center",t[t.Bottom=-1]="Bottom",t[t.Baseline=2]="Baseline"}(n||(n={}))},62106:function(t,e,i){i.d(e,{Nr:function(){return M}});var r=i(37762),n=i(29439),s=i(15671),a=i(43144),o=i(50264),h=i(35609),l=i(13611),u=i(30932),c=i(38999),f=i(12233),_=i(28289),v=Math.PI/180,d=function(){function t(e,i,r,n){(0,s.Z)(this,t),this._rotationT=(0,h.Ue)(),this._xBounds=0,this._yBounds=0,this.minZoom=0,this.maxZoom=255,this._bounds=null;var a=r.rect,o=new Float32Array(8);e*=n,i*=n;var l=r.code?a.width*n:r.metrics.width,u=r.code?a.height*n:r.metrics.height;this.width=l,this.height=u,o[0]=e,o[1]=i,o[2]=e+l,o[3]=i,o[4]=e,o[5]=i+u,o[6]=e+l,o[7]=i+u,this._data=o,this._setTextureCoords(a),this._scale=n,this._mosaic=r,this.x=e,this.y=i,this.maxOffset=Math.max(e+l,i+u)}return(0,a.Z)(t,[{key:"mosaic",get:function(){return this._mosaic}},{key:"angle",get:function(){return this._angle},set:function(t){this._angle=t,(0,o.Us)(this._rotationT,-t),this._setOffsets()}},{key:"xTopLeft",get:function(){return this._data[0]}},{key:"yTopLeft",get:function(){return this._data[1]}},{key:"xBottomRight",get:function(){return this._data[6]}},{key:"yBottomRight",get:function(){return this._data[7]}},{key:"texcoords",get:function(){return this._texcoords}},{key:"textureBinding",get:function(){return this._mosaic.textureBinding}},{key:"offsets",get:function(){return this._offsets||this._setOffsets(),this._offsets}},{key:"char",get:function(){return String.fromCharCode(this._mosaic.code)}},{key:"code",get:function(){return this._mosaic.code}},{key:"bounds",get:function(){if(!this._bounds){var t=this._mosaic.metrics,e=t.height,i=t.width*this._scale,r=Math.abs(e)*this._scale,n=new Float32Array(8);n[0]=this.x,n[1]=this.y,n[2]=this.x+i,n[3]=this.y,n[4]=this.x,n[5]=this.y+r,n[6]=this.x+i,n[7]=this.y+r;var s=(0,o.Jp)((0,h.Ue)(),this._rotationT,this._transform);(0,h.Zz)(n,n,s);for(var a=1/0,l=1/0,u=0,c=0,f=0;f<4;f++){var v=n[2*f],d=n[2*f+1];a=Math.min(a,v),l=Math.min(l,d),u=Math.max(u,v),c=Math.max(c,d)}var p=u-a,m=c-l,y=a+p/2,g=l+m/2;this._bounds=new _.Z(y,g,p,m)}return this._bounds}},{key:"setTransform",value:function(t){this._transform=t,this._offsets=null}},{key:"_setOffsets",value:function(){this._offsets||(this._offsets={topLeft:[0,0],topRight:[0,0],bottomLeft:[0,0],bottomRight:[0,0]});var t=(0,o.Jp)((0,h.Ue)(),this._rotationT,this._transform);this._offsets.topLeft[0]=this._data[0],this._offsets.topLeft[1]=this._data[1],this._offsets.topRight[0]=this._data[2],this._offsets.topRight[1]=this._data[3],this._offsets.bottomLeft[0]=this._data[4],this._offsets.bottomLeft[1]=this._data[5],this._offsets.bottomRight[0]=this._data[6],this._offsets.bottomRight[1]=this._data[7],(0,l.iu)(this._offsets.topLeft,this._offsets.topLeft,t),(0,l.iu)(this._offsets.topRight,this._offsets.topRight,t),(0,l.iu)(this._offsets.bottomLeft,this._offsets.bottomLeft,t),(0,l.iu)(this._offsets.bottomRight,this._offsets.bottomRight,t)}},{key:"_setTextureCoords",value:function(t){var e=t.x,i=t.y,r=t.width,n=t.height;this._texcoords={topLeft:[e,i],topRight:[e+r,i],bottomLeft:[e,i+n],bottomRight:[e+r,i+n]}}}]),t}(),p=function(t,e){return{code:0,page:0,sdf:!0,rect:new f.Z(0,0,11,8),textureBinding:e,metrics:{advance:0,height:4,width:t,left:0,top:0}}};function m(t,e){return t.forEach((function(t){return(0,l.iu)(t,t,e)})),{topLeft:t[0],topRight:t[1],bottomLeft:t[2],bottomRight:t[3]}}var y=function(){function t(e,i,a){var o,h;(0,s.Z)(this,t),this._rotation=0,this._decorate(e,i,a),this.glyphs=e,this.bounds=this._createBounds(e),this.isMultiline=i.length>1,this._hasRotation=0!==a.angle,this._transform=this._createGlyphTransform(this.bounds,a),this._borderLineSizePx=a.borderLineSizePx,(a.borderLineSizePx||a.hasBackground)&&(o=this.shapeBackground(this._transform),h=(0,n.Z)(o,2),this.bounds=h[0],this.textBox=h[1]);var l,u=(0,r.Z)(e);try{for(u.s();!(l=u.n()).done;){l.value.setTransform(this._transform)}}catch(c){u.e(c)}finally{u.f()}}return(0,a.Z)(t,[{key:"setRotation",value:function(t){if(0!==t||0!==this._rotation){this._rotation=t;var e=this._transform,i=(0,o.Us)((0,h.Ue)(),t);(0,o.Jp)(e,i,e);var n,s=(0,r.Z)(this.glyphs);try{for(s.s();!(n=s.n()).done;){n.value.setTransform(this._transform)}}catch(a){s.e(a)}finally{s.f()}}}},{key:"_decorate",value:function(t,e,i){if(i.decoration&&"none"!==i.decoration&&t.length){var n,s=i.scale,a="underline"===i.decoration?26:16,o=t[0].textureBinding,h=(0,r.Z)(e);try{for(h.s();!(n=h.n()).done;){var l=n.value,u=l.startX*s,c=l.startY*s,f=(l.width+l.glyphWidthEnd)*s;t.push(new d(u,c+a*s,p(f,o),1))}}catch(_){h.e(_)}finally{h.f()}}}},{key:"shapeBackground",value:function(t){var e=(1.5+(this._borderLineSizePx||0))/2,i=this._borderLineSizePx?e:0,r=this.bounds,n=r.xmin,s=r.ymin,a=r.xmax,o=r.ymax,h=r.x,l=r.y,u=r.width,c=r.height,f=[n-8,s-8],v=[a+8,s-8],d=[n-8,o+8],p=[a+8,o+8],y=m([[f[0]-e,f[1]-e],[v[0]+e,v[1]-e],[f[0]+i,f[1]+i],[v[0]-i,v[1]+i]],t),g=m([[d[0]+i,d[1]-i],[p[0]-i,p[1]-i],[d[0]-e,d[1]+e],[p[0]+e,p[1]+e]],t),P=m([[f[0]-e,f[1]-e],[f[0]+i,f[1]+i],[d[0]-e,d[1]+e],[d[0]+i,d[1]-i]],t),x=m([[v[0]-i,v[1]+i],[v[0]+e,v[1]-e],[p[0]-i,p[1]-i],[p[0]+e,p[1]+e]],t),k={main:m([f,v,d,p],t),top:y,bot:g,left:P,right:x};return[new _.Z(h,l,u+2*e,c+2*e),k]}},{key:"boundsT",get:function(){var t=this.bounds,e=(0,l.t8)((0,u.Ue)(),t.x,t.y);if((0,l.iu)(e,e,this._transform),this._hasRotation){var i=Math.max(t.width,t.height);return new _.Z(e[0],e[1],i,i)}return new _.Z(e[0],e[1],t.width,t.height)}},{key:"_createBounds",value:function(t){var e,i=1/0,n=1/0,s=0,a=0,o=(0,r.Z)(t);try{for(o.s();!(e=o.n()).done;){var h=e.value;i=Math.min(i,h.xTopLeft),n=Math.min(n,h.yTopLeft),s=Math.max(s,h.xBottomRight),a=Math.max(a,h.yBottomRight)}}catch(c){o.e(c)}finally{o.f()}var l=s-i,u=a-n;return new _.Z(i+l/2,n+u/2,l,u)}},{key:"_createGlyphTransform",value:function(t,e){var i=v*e.angle,r=(0,h.Ue)(),n=(0,u.Ue)();return(0,o.Iu)(r,r,(0,l.t8)(n,e.xOffset,-e.yOffset)),e.useCIMAngleBehavior?(0,o.U1)(r,r,i):((0,o.Iu)(r,r,(0,l.t8)(n,t.x,t.y)),(0,o.U1)(r,r,i),(0,o.Iu)(r,r,(0,l.t8)(n,-t.x,-t.y))),r}}]),t}(),g=(0,a.Z)((function t(e,i,r,n,a,o){(0,s.Z)(this,t),this.glyphWidthEnd=0,this.startX=0,this.startY=0,this.start=Math.max(0,Math.min(i,r)),this.end=Math.max(0,Math.max(i,r)),this.end<e.length&&(this.glyphWidthEnd=e[this.end].metrics.width),this.width=n,this.yMin=a,this.yMax=o})),P=function(t){return 10===t},x=function(t){return 32===t};function k(t,e){for(var i=0,r=0;r<t.length;r++){var n=t[r].width;i=Math.max(n,i)}var s="underline"===e.decoration?4:0,a=t[0].yMin;return{x:0,y:a,height:t[t.length-1].yMax+e.lineHeight*(t.length-1)+s-a,width:i}}function M(t,e){for(var i=e.scale,r=new Array,n=t.glyphs,s=function(t,e,i){for(var r=new Array,n=1/i.scale,s=i.maxLineWidth*n,a=e?t.length-1:0,o=e?-1:t.length,h=e?-1:1,l=a,u=0,c=0,f=l,_=f,v=0,d=1/0,p=0;l!==o;){var m=t[l],y=m.code,k=m.metrics,M=Math.abs(k.top);if(P(y)||x(y)||(d=Math.min(d,M),p=Math.max(p,M+k.height)),P(y))l!==a&&(r.push(new g(t,f,l-h,u,d===1/0?0:d,p)),d=1/0,p=0),u=0,f=l+h,_=l+h,c=0;else if(x(y))_=l+h,c=0,v=k.advance,u+=k.advance;else if(u>s){if(_!==f){var b=_-2*h;u-=v,r.push(new g(t,f,b,u-c,d,p)),d=1/0,p=0,f=_,u=c}else r.push(new g(t,f,l-h,u,d,p)),d=1/0,p=0,f=l,_=l,u=0;u+=k.advance,c+=k.advance}else u+=k.advance,c+=k.advance;l+=h}var S=new g(t,f,l-h,u,d,p);return S.start>=0&&S.end<t.length&&r.push(S),r}(n,t.isRightToLeft,e),a=s.length?k(s,e):{x:0,y:0,height:0,width:0},o=(0,c.kH)(e.horizontalAlignment),h=(0,c.b7)(e.verticalAlignment),l=h===c.TR.Baseline?1:0,u=l?0:h-1,f=(1-l)*-a.y+u*(a.height/2)+-22*(l?1:0),_=0;_<s.length;_++){var v=s[_],p=v.start,m=v.end,M=-1*(o+1)*(v.width/2)-3,b=_*e.lineHeight+f-3;s[_].startX=M,s[_].startY=b;for(var S=p;S<=m;S++){var C=n[S];if(!P(C.code)){var w=new d(M+C.metrics.left,b-C.metrics.top,C,i);M+=C.metrics.advance,r.push(w)}}}return new y(r,s,e)}},95857:function(t,e,i){i.d(e,{OC:function(){return a},XA:function(){return o},g1:function(){return l},vn:function(){return h}});var r=i(17842),n=i(80885),s=(i(65156),i(92975),i(94109)),a=50;function o(t){if(!t)return null;var e=t.xmin,i=t.ymin,r=t.xmax,s=t.ymax,a=t.spatialReference;return new n.Z({rings:[[[e,i],[e,s],[r,s],[r,i],[e,i]]],spatialReference:a})}function h(t){return(0,r.Wz)(Math.round((0,r.F2)(t)))}function l(t){var e=(0,r.Wz)(s.A5),i=(0,r.Wz)(s.NT);return Math.max(e,Math.min(t||i,i))}}}]);
//# sourceMappingURL=78915.63d9763d.chunk.js.map