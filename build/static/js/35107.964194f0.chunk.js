"use strict";(self.webpackChunkreact_training=self.webpackChunkreact_training||[]).push([[35107],{35107:function(e,t,n){n.r(t),n.d(t,{default:function(){return de}});var i=n(1413),r=n(15671),a=n(43144),s=n(60136),o=n(29388),l=n(27366),u=n(66978),c=n(49861),p=(n(93169),n(32718)),h=(n(84936),n(69912)),d=n(33565),v=n(74165),m=n(15861),y=n(44927),f=n(94172),g=n(68860),_=n(79803),w=n(77671),b=n(93433),C=n(29439),k=n(37762),M=(n(59486),n(52639)),L=(n(59166),n(51508),n(86950)),S=n(42537),Z=n(92026),D=n(5163),x=n(46634),O=n(2170),T=n(15559),A=n(93655),R=n(50951),G=n(85577),j=n(9843),U=n(14813),H=n(74229),I=n(2346),E=n(45900),z=n(84954),V=n(17877),B=n(34019),W=n(80151),J=n(44270),P=n(64674),N=n(41201),Y=n(36257),X=n(848),q=n(75021),F=n(58009),K=n(73268),Q=n(16072),$=n(29909),ee=n(78952),te=1e5,ne=function(e){(0,s.Z)(n,e);var t=(0,o.Z)(n);function n(e){var i;return(0,r.Z)(this,n),(i=t.call(this,e))._drawActive=!1,i._measurementLayer=new A.default({internal:!0,listMode:"hide",visible:!1}),i._manipulatorLayer=new A.default({internal:!0,listMode:"hide",visible:!1}),i._snappingLayer=new A.default({internal:!0,listMode:"hide",visible:!1}),i._updatingHandles=new x.R,i._vertices=[],i.geodesicDistanceThreshold=null,i.measurement=null,i.measurementLabel=null,i}return(0,a.Z)(n,[{key:"initialize",value:function(){var e=this;(0,N.ME)("esri/core/t9n/Units").then((function(t){e.messages=t}));var t=this.view;this._draw=new j.Z({view:t}),t.map.addMany([this._measurementLayer,this._manipulatorLayer,this._snappingLayer]),t.focus(),this._snappingManagerResult=(0,J.u)(t),this.addHandles([(0,Y.qe)((0,m.Z)((0,v.Z)().mark((function t(){return(0,v.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,N.ME)("esri/core/t9n/Units");case 2:e.messages=t.sent;case 3:case"end":return t.stop()}}),t)})))),(0,f.watch)((function(){return[e.unit,e.geodesicDistanceThreshold,e.messages]}),(function(){e._updatePolylines()}),f.initial),(0,f.watch)((function(){return[e.view.effectiveTheme.accentColor,e.view.effectiveTheme.textColor]}),(function(){if(e._vertices.length){var t,n=e._vertices.map((function(e){return e.coord})),i=(0,k.Z)(e._vertices);try{for(i.s();!(t=i.n()).done;){t.value.handle.remove()}}catch(r){i.e(r)}finally{i.f()}e._vertices=[],e._measurementLayer.removeAll(),e._manipulatorLayer.removeAll(),e._snappingLayer.removeAll(),e.manipulators.removeAll(),e._updateSketch(n)}})),(0,f.watch)((function(){return e.snappingOptions.featureSources}),(function(t){var n,i=(0,k.Z)(t);try{for(i.s();!(n=i.n()).done;){var r=n.value;r.layer!==e._measurementLayer&&r.layer!==e._manipulatorLayer||(r.enabled=!1)}}catch(a){i.e(a)}finally{i.f()}}),f.initial),this._snappingManagerResult]),(0,P.Ob)(this)}},{key:"destroy",value:function(){var e=this.view.map;this._draw.view=null,this._draw=(0,Z.SC)(this._draw),e.removeMany([this._measurementLayer,this._manipulatorLayer,this._snappingLayer]),this._measurementLayer.removeAll(),this._manipulatorLayer.removeAll(),this._snappingLayer.removeAll(),this._set("measurement",null),this._set("measurementLabel",null),this._measurementLayer=(0,Z.SC)(this._measurementLayer),this._manipulatorLayer=(0,Z.SC)(this._manipulatorLayer),this._snappingLayer=(0,Z.SC)(this._snappingLayer),this._updatingHandles=(0,Z.SC)(this._updatingHandles),this._resetVertices()}},{key:"_snappingManager",get:function(){return this._snappingManagerResult.snappingManager}},{key:"cursor",get:function(){return this._drawActive?"crosshair":null}},{key:"editable",set:function(e){this._set("editable",e),e||this._draw.reset()}},{key:"snappingOptions",get:function(){return this._snappingManager.options}},{key:"updating",get:function(){return this._updatingHandles.updating||this._snappingManager.updating}},{key:"onActivate",value:function(){this._drawActive||0!==this._vertices.length||this._startSketch()}},{key:"onShow",value:function(){this._measurementLayer.visible=!0,this._manipulatorLayer.visible=!0,this._snappingLayer.visible=!0}},{key:"onHide",value:function(){this._measurementLayer.visible=!1,this._manipulatorLayer.visible=!1,this._snappingLayer.visible=!1}},{key:"_getSnappingContext",value:function(e){return new B.N({elevationInfo:{mode:"on-the-ground",offset:0},pointer:e,editGeometryOperations:new V.c(new z.XE("point",(0,U.Y6)(!1,!1,this.view.spatialReference)),R.JY.Local),visualizer:new G.r(this._snappingLayer)})}},{key:"_resetVertices",value:function(){var e,t=(0,k.Z)(this._vertices);try{for(t.s();!(e=t.n()).done;){e.value.handle.remove()}}catch(n){t.e(n)}finally{t.f()}this._vertices=[]}},{key:"_startSketch",value:function(){var e=this;this._drawActive=!0;var t=this._snappingManager,n=this._draw.create("polyline",{mode:"click",snappingManager:t});n.on(["vertex-add","vertex-update","vertex-remove","cursor-update","undo","redo"],(function(t){return e._updateSketch(t.vertices)})),n.on("draw-complete",(function(){e._stopSketch()}))}},{key:"_stopSketch",value:function(){this.manipulators.forEach((function(e){e.manipulator.interactive=!0})),this._drawActive=!1,this.finishToolCreation()}},{key:"_updateSketch",value:function(e){for(var t=this,n=this.view.spatialReference;this._vertices.length>e.length;){var i=this._vertices.pop(),r=i.handle,a=i.manipulator;r.remove(),this.manipulators.remove(a)}for(var s=function(i){var r=(0,C.Z)(e[i],2),a=r[0],s=r[1],o=new X.Z({x:a,y:s,spatialReference:n}),l=function(e,t,n){var i=(0,L.G)(t.effectiveTheme.accentColor,.5),r={type:"simple-line",width:0},a=8,s=new Q.default({style:"circle",color:i,size:a,outline:r}),o=new Q.default({style:"circle",color:i,size:1.5*a,outline:r}),l=new M.Z({geometry:e,symbol:s});return new I.L({view:t,layer:n,graphic:l,focusedSymbol:o})}(o,t.view,t._manipulatorLayer);t.manipulators.add(l);var u=V.c.fromGeometry(o,R.JY.Local),c=[u.on("vertex-update",(function(e){var n=e.vertices.at(0);n&&(t._vertices[i].coord=[n.pos[0],n.pos[1]],t._updatePolylines())})),(0,H.Xd)(l,(function(e,n,i,r){var a,s=t._getSnappingContext(r),o=t._snappingManager,l=t._updatingHandles,c=(0,W.W)({snappingContext:s,snappingManager:o,updatingHandles:l}).snappingStep;(a=n.next((0,H.Cf)(t.view)).next((function(t){if("start"===t.action){var n=new X.Z(t.mapStart);e.graphic.geometry=n,u.trySetGeometry(n)}return t}))).next.apply(a,(0,b.Z)(c)).next((0,H.$Q)({operations:u})).next((function(){e.graphic.geometry=u.data.geometry}))}))];t._vertices.push({manipulator:l,coord:[a,s],handle:(0,S.AL)(c)})},o=this._vertices.length;o<e.length;o++)s(o);var l=this._vertices.length-1,u=this._vertices[l],c=(0,C.Z)(e[l],2),p=c[0],h=c[1];u.coord[0]===p&&u.coord[1]===h||(u.coord=[p,h],u.manipulator.graphic.geometry=new X.Z({x:p,y:h,spatialReference:n}));var d=this._drawActive?this._vertices[l].manipulator:null;this.manipulators.forEach((function(e){var t=e.manipulator;t.interactive=null==d||t!==d})),this._updatePolylines()}},{key:"_updatePolylines",value:function(){var e;if(this._vertices.length<2)this._measurementLayer.removeAll();else{var t=function(e,t,n){var i,r,a=new $.Z({paths:[e],spatialReference:t});if(t.isGeographic)if((0,T.Gb)(t))i=(0,T.Jf)([a],"meters")[0],r=(0,T.j2)(a,te);else{var s=(0,_.project)(a,ee.Z.WGS84),o=(0,T.j2)(s,te);i=(0,T.Jf)([s],"meters")[0],r=(0,_.project)(o,t)}else if(t.isWebMercator)i=(0,O.geodesicLength)(a,"meters"),r=(0,O.geodesicDensify)(a,te,"meters");else{var l=(0,O.planarLength)(a,"meters");if(null!=n&&l>=n){var u=(0,_.project)(a,ee.Z.WGS84),c=(0,T.j2)(u,te);i=(0,T.Jf)([u],"meters")[0],r=(0,_.project)(c,t)}else i=l,r=a}return{measurement:{geometry:r,length:i},original:a,drawing:r}}(this._vertices.map((function(e){return e.coord})),this.view.spatialReference,this.geodesicDistanceThreshold),n=t.measurement,i=t.drawing,r=t.original;this._set("measurement",n);var a,s,o=function(e,t,n){if(!t||!e)return"";switch(n){case"metric":return(0,D.Rd)(e,t.length,"meters");case"imperial":return(0,D.Ud)(e,t.length,"meters");default:return(0,D.VG)(e,(0,g.En)(t.length,"meters",n),n)}}(this.messages,n,this.unit);this._set("measurementLabel",o);var l=this._measurementLayer.graphics,u=2===l.length,c=this.view.effectiveTheme;u?(a=l.at(0),s=l.at(1)):(a=new M.Z({symbol:new q.Z({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",effects:[{type:"CIMGeometricEffectDashes",dashTemplate:[14,12],lineDashEnding:"FullGap",controlPointEnding:"NoConstraint"}],enable:!0,capStyle:"Butt",joinStyle:"Round",width:3.5,color:(0,L.mj)(c.accentColor).toArray()},{type:"CIMSolidStroke",enable:!0,capStyle:"Butt",joinStyle:"Round",width:5,color:c.accentColor.toArray()}]}}})}),s=new M.Z({symbol:new F.Z({color:c.textColor,haloColor:(0,L.G)((0,L.mj)(c.textColor,L.K6.Low),.5),haloSize:2,font:new K.Z({size:14,family:"sans-serif"})})}),l.removeAll(),l.addMany([a,s])),a.geometry=i,s.geometry=null===(e=r.extent)||void 0===e?void 0:e.center,s.symbol.text=o}}}]),n}(E.m);function ie(e){if(!e)return!1;var t=e.isGeographic,n=e.isWebMercator,i=e.isWGS84;return t&&!i&&!(0,T.Gb)(e)||!t&&!n}(0,l._)([(0,c.Cb)()],ne.prototype,"_drawActive",void 0),(0,l._)([(0,c.Cb)({readOnly:!0})],ne.prototype,"cursor",null),(0,l._)([(0,c.Cb)({value:!0})],ne.prototype,"editable",null),(0,l._)([(0,c.Cb)({type:Number})],ne.prototype,"geodesicDistanceThreshold",void 0),(0,l._)([(0,c.Cb)({readOnly:!0})],ne.prototype,"measurement",void 0),(0,l._)([(0,c.Cb)({readOnly:!0})],ne.prototype,"measurementLabel",void 0),(0,l._)([(0,c.Cb)()],ne.prototype,"messages",void 0),(0,l._)([(0,c.Cb)()],ne.prototype,"unit",void 0),(0,l._)([(0,c.Cb)()],ne.prototype,"updating",null),(0,l._)([(0,c.Cb)({constructOnly:!0})],ne.prototype,"view",void 0),ne=(0,l._)([(0,h.j)("esri.widgets.DistanceMeasurement2D.DistanceMeasurement2DTool")],ne);var re=function(e){(0,s.Z)(n,e);var t=(0,o.Z)(n);function n(e){var i;return(0,r.Z)(this,n),(i=t.call(this,e)).supportedViewType="2d",i.unsupportedErrorMessage="DistanceMeasurement2DViewModel is only supported in 2D views.",i}return(0,a.Z)(n,[{key:"initialize",value:function(){var e=this;this.addHandles([(0,f.watch)((function(){var t;return null===(t=e.view)||void 0===t?void 0:t.spatialReference}),(function(){return e.clear()})),(0,f.watch)((function(){return e.unit}),(function(t){null!=e.tool&&(e.tool.unit=t)}),f.initial),(0,f.watch)((function(){return e.geodesicDistanceThreshold}),(function(t){null!=e.tool&&(e.tool.geodesicDistanceThreshold=t)}),f.initial)])}},{key:"geodesicDistanceThreshold",get:function(){return this._get("geodesicDistanceThreshold")},set:function(e){(0,y.Mr)(p.Z.getLogger(this),"geodesicDistanceThreshold",{version:"4.29",warnOnce:!0}),this._set("geodesicDistanceThreshold",e)}},{key:"measurement",get:function(){return null!=this.tool?this.tool.measurement:null}},{key:"measurementLabel",get:function(){return null!=this.tool?this.tool.measurementLabel:null}},{key:"state",get:function(){var e;return this.disabled||null==this.view||null==(null===(e=this.view)||void 0===e?void 0:e.spatialReference)?"disabled":null!=this.tool&&this.measurement?this.tool.active?"measuring":"measured":"ready"}},{key:"unit",get:function(){return this._validateUnit(this.defaultUnit)},set:function(e){this._overrideIfSome("unit",this._validateUnit(e))}},{key:"unitOptions",get:function(){return g.oD},set:function(e){this._overrideIfSome("unitOptions",this._validateUnits(e))}},{key:"start",value:function(){var e=(0,m.Z)((0,v.Z)().mark((function e(){var t;return(0,v.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.view,e.t0=null!=t,!e.t0){e.next=9;break}return e.next=5,(0,f.whenOnce)((function(){return t.ready}));case 5:if(e.t1=ie(t.spatialReference),!e.t1){e.next=9;break}return e.next=9,(0,_.load)();case 9:this.createTool({interactive:!0});case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"clear",value:function(){this.removeTool()}},{key:"constructTool",value:function(){return new ne({view:this.view,visible:this.visible,geodesicDistanceThreshold:this.geodesicDistanceThreshold,unit:this.unit})}},{key:"_validateUnit",value:function(e){var t=this.unitOptions,n=this.defaultUnit;return null!=e&&t.includes(e)?e:t.includes(n)?n:t.length>0?t[0]:n}},{key:"_validateUnits",value:function(e){if(null==e)return[];var t=e.filter((function(e){return g.oD.includes(e)}));return 0===t.length?g.oD.slice():t}}]),n}(n(32845).V);(0,l._)([(0,c.Cb)(w.Y)],re.prototype,"defaultUnit",void 0),(0,l._)([(0,c.Cb)()],re.prototype,"geodesicDistanceThreshold",null),(0,l._)([(0,c.Cb)({readOnly:!0})],re.prototype,"measurement",null),(0,l._)([(0,c.Cb)({readOnly:!0})],re.prototype,"measurementLabel",null),(0,l._)([(0,c.Cb)({readOnly:!0})],re.prototype,"state",null),(0,l._)([(0,c.Cb)({type:String})],re.prototype,"unit",null),(0,l._)([(0,c.Cb)({type:[String]})],re.prototype,"unitOptions",null);var ae=re=(0,l._)([(0,h.j)("esri.widgets.DistanceMeasurement2D.DistanceMeasurement2DViewModel")],re),se=n(7021),oe=n(15142),le=(n(80975),n(80532)),ue=n(67005),ce="esri-distance-measurement-2d",pe={base:ce,newMeasurementButton:"".concat(ce,"__clear-button")},he=function(e){(0,s.Z)(n,e);var t=(0,o.Z)(n);function n(e,i){var a;return(0,r.Z)(this,n),(a=t.call(this,e,i)).messages=null,a.messagesCommon=null,a.viewModel=new ae,a}return(0,a.Z)(n,[{key:"active",get:function(){return this.viewModel.active}},{key:"icon",get:function(){return"measure-line"},set:function(e){this._overrideIfSome("icon",e)}},{key:"label",get:function(){var e,t;return null!==(e=null===(t=this.messages)||void 0===t?void 0:t.widgetLabel)&&void 0!==e?e:""},set:function(e){this._overrideIfSome("label",e)}},{key:"unit",get:function(){return this.viewModel.unit},set:function(e){this.viewModel.unit=e}},{key:"unitOptions",get:function(){return this.viewModel.unitOptions},set:function(e){this.viewModel.unitOptions=e}},{key:"view",get:function(){return this.viewModel.view},set:function(e){this.viewModel.view=e}},{key:"visible",get:function(){return this.viewModel.visible},set:function(e){this.viewModel.visible=e}},{key:"render",value:function(){var e=this,t=this.messages,n=this.messagesCommon,r=this.unit,a=this.unitOptions,s=this.viewModel,o=s.active,l=s.measurementLabel,c=s.state,p=s.supported;return(0,ue.u)("div",{"aria-label":this.messages.widgetLabel,class:this.classes(pe.base,se.z.widget,se.z.panel),key:this,role:"presentation"},this.visible?(0,ue.u)(oe.s,{active:o,measurementItems:[{key:"distance",title:t.distance,value:l}],messages:(0,i.Z)((0,i.Z)({},t),{},{notApplicable:n.notApplicable}),newMeasurementButtonClass:pe.newMeasurementButton,state:c,supported:p,unit:r,unitOptions:a,onNewMeasurementClick:function(){(0,u.R8)(e.viewModel.start())},onUnitChange:function(t){e.unit=t}}):null)}}]),n}(d.Z);(0,l._)([(0,c.Cb)({readOnly:!0})],he.prototype,"active",null),(0,l._)([(0,c.Cb)()],he.prototype,"icon",null),(0,l._)([(0,c.Cb)()],he.prototype,"label",null),(0,l._)([(0,c.Cb)()],he.prototype,"uiStrings",void 0),(0,l._)([(0,c.Cb)(),(0,le.H)("esri/widgets/DistanceMeasurement2D/t9n/DistanceMeasurement2D")],he.prototype,"messages",void 0),(0,l._)([(0,c.Cb)(),(0,le.H)("esri/t9n/common")],he.prototype,"messagesCommon",void 0),(0,l._)([(0,c.Cb)()],he.prototype,"unit",null),(0,l._)([(0,c.Cb)()],he.prototype,"unitOptions",null),(0,l._)([(0,c.Cb)()],he.prototype,"view",null),(0,l._)([(0,c.Cb)({type:ae})],he.prototype,"viewModel",void 0),(0,l._)([(0,c.Cb)({type:Boolean})],he.prototype,"visible",null);var de=he=(0,l._)([(0,h.j)("esri.widgets.DistanceMeasurement2D")],he)}}]);
//# sourceMappingURL=35107.964194f0.chunk.js.map