"use strict";(self.webpackChunkreact_training=self.webpackChunkreact_training||[]).push([[80142],{43244:function(e,t,n){n.d(t,{Z:function(){return o}});var i=n(37762),r=n(15671),a=n(43144),o=function(){function e(t){(0,r.Z)(this,e),this.size=0,this._start=0,this.maxSize=t,this._buffer=new Array(t)}return(0,a.Z)(e,[{key:"entries",get:function(){return this._buffer}},{key:"enqueue",value:function(e){if(this.size===this.maxSize){var t=this._buffer[this._start];return this._buffer[this._start]=e,this._start=(this._start+1)%this.maxSize,t}return this._buffer[(this._start+this.size++)%this.maxSize]=e,null}},{key:"dequeue",value:function(){if(0===this.size)return null;var e=this._buffer[this._start];return this._buffer[this._start]=null,this.size--,this._start=(this._start+1)%this.maxSize,e}},{key:"peek",value:function(){return 0===this.size?null:this._buffer[this._start]}},{key:"peekLast",value:function(){return 0===this.size?null:this._buffer[(this._start+(this.size-1))%this.maxSize]}},{key:"find",value:function(e){if(0===this.size)return null;var t,n=(0,i.Z)(this._buffer);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(null!=r&&e(r))return r}}catch(a){n.e(a)}finally{n.f()}return null}},{key:"clear",value:function(e){for(var t=this.dequeue();null!=t;)e&&e(t),t=this.dequeue()}}]),e}()},76151:function(e,t,n){n.d(t,{Qo:function(){return c}});var i=n(37762),r=n(15671),a=n(43144),o=n(43244),s=n(16889),u="__esri_stream_id__",l="__esri_timestamp__",c=function(){function e(t,n,i,a){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:128;(0,r.Z)(this,e),this._trackIdToObservations=new Map,this._idCounter=0,this._lastPurge=performance.now(),this._addOrUpdated=new Map,this._removed=[],this._maxAge=0,this._timeInfo=i,this._purgeOptions=a,this.store=t,this.objectIdField=n,this.purgeInterval=o,this._useGeneratedIds=this.objectIdField===u}return(0,a.Z)(e,[{key:"removeById",value:function(e){this._removed.push(e)}},{key:"removeByTrackId",value:function(e){var t=this._trackIdToObservations.get(e);if(t){var n,r=(0,i.Z)(t.entries);try{for(r.s();!(n=r.n()).done;){var a=n.value;this._removed.push(a)}}catch(o){r.e(o)}finally{r.f()}}}},{key:"add",value:function(e){if(this._useGeneratedIds){var t=this._nextId();e.attributes[this.objectIdField]=t,e.objectId=t}else e.objectId=e.attributes[this.objectIdField];var n=e.objectId;if(this._addOrUpdated.set(n,e),this._maxAge=Math.max(this._maxAge,e.attributes[this._timeInfo.startTimeField]),!this._timeInfo.trackIdField)return null==this._trackIdLessObservations&&(this._trackIdLessObservations=new o.Z(1e5)),void this._trackIdLessObservations.enqueue(n);var i=e.attributes[this._timeInfo.trackIdField];if(!this._trackIdToObservations.has(i)){var r,a=null!=(null===(r=this._purgeOptions)||void 0===r?void 0:r.maxObservations)?this._purgeOptions.maxObservations:1e3,u=(0,s.uZ)(a,0,1e3);this._trackIdToObservations.set(i,new o.Z(u))}var l=this._trackIdToObservations.get(i),c=null===l||void 0===l?void 0:l.enqueue(n);null!=c&&(this._addOrUpdated.has(c)?this._addOrUpdated.delete(c):this._removed.push(c))}},{key:"checkForUpdates",value:function(){var e=this._getToAdd(),t=this._getToRemove(),n=performance.now();n-this._lastPurge>=this.purgeInterval&&(this._purge(n),this._lastPurge=n);var r=[];if(null!=t){var a,o=(0,i.Z)(t);try{for(o.s();!(a=o.n()).done;){var s=a.value,u=this.store.removeById(s);null!=u&&r.push(u)}}catch(p){o.e(p)}finally{o.f()}}var c=[];if(null!=e){var d,f=new Set(null!==t&&void 0!==t?t:[]),v=(0,i.Z)(e);try{for(v.s();!(d=v.n()).done;){var h=d.value;f.has(h.objectId)||(h.attributes[l]=n,this.store.add(h),c.push(h))}}catch(p){v.e(p)}finally{v.f()}}return!(!c.length&&(null===r||void 0===r||!r.length))&&(this.store.update(c,r),!0)}},{key:"_getToAdd",value:function(){if(!this._addOrUpdated.size)return null;var e=new Array(this._addOrUpdated.size),t=0;return this._addOrUpdated.forEach((function(n){return e[t++]=n})),this._addOrUpdated.clear(),e}},{key:"_getToRemove",value:function(){var e=this._removed;return this._removed.length?(this._removed=[],e):null}},{key:"_nextId",value:function(){var e=this._idCounter;return this._idCounter=(this._idCounter+1)%4294967294+1,e}},{key:"_purge",value:function(e){var t=this._purgeOptions;null!=t&&(this._purgeSomeByDisplayCount(t),this._purgeByAge(t),this._purgeByAgeReceived(e,t),this._purgeTracks())}},{key:"_purgeSomeByDisplayCount",value:function(e){if(e.displayCount){var t=this.store.size;if(t>e.displayCount){if(this._timeInfo.trackIdField){var n,r=(0,i.Z)(this._trackIdToObservations.values());try{for(r.s();!(n=r.n()).done;){var a=n.value;if(t>e.displayCount&&a.size){var o=a.dequeue();this._removed.push(o),t--}}}catch(l){r.e(l)}finally{r.f()}}if(null!=this._trackIdLessObservations)for(var s=t-e.displayCount;s-- >0;){var u=this._trackIdLessObservations.dequeue();null!=u&&this._removed.push(u)}}}}},{key:"_purgeByAge",value:function(e){var t,n=this,i=null===(t=this._timeInfo)||void 0===t?void 0:t.startTimeField;if(e.age&&i){var r=60*e.age*1e3,a=this._maxAge-r;this.store.forEach((function(e){e.attributes[i]<a&&n._removed.push(e.objectId)}))}}},{key:"_purgeByAgeReceived",value:function(e,t){var n=this;if(t.ageReceived){var i=e-60*t.ageReceived*1e3;this.store.forEach((function(e){e.attributes[l]<i&&n._removed.push(e.objectId)}))}}},{key:"_purgeTracks",value:function(){var e=this;this._trackIdToObservations.forEach((function(t,n){0===t.size&&e._trackIdToObservations.delete(n)}))}}]),e}()},87072:function(e,t,n){function i(e){var t,n=e.layer;return"floorInfo"in n&&null!==(t=n.floorInfo)&&void 0!==t&&t.floorField&&"floors"in e.view?a(e.view.floors,n.floorInfo.floorField):null}function r(e,t){var n;return"floorInfo"in t&&null!==(n=t.floorInfo)&&void 0!==n&&n.floorField?a(e,t.floorInfo.floorField):null}function a(e,t){if(null===e||void 0===e||!e.length)return null;var n=e.filter((function(e){return""!==e})).map((function(e){return"'".concat(e,"'")}));return n.push("''"),"".concat(t," IN (").concat(n.join(","),") OR ").concat(t," IS NULL")}n.d(t,{c:function(){return i},f:function(){return r}})},50863:function(e,t,n){n.d(t,{h:function(){return r}});var i=n(45739);function r(e,t,n){if(null==(null===e||void 0===e?void 0:e.timeInfo))return null;var r=e.datesInUnknownTimezone,a=void 0!==r&&r,o=e.timeOffset,s=e.useViewTime,u=e.timeExtent;a&&(u=(0,i.toLocalTimeExtent)(u));var l=s?t&&u?t.intersection(u):t||u:u;return!l||l.isEmpty||l.isAllTime?l:(o&&(l=l.offset(-o.value,o.unit)),a&&(l=(0,i.toUTCTimeExtent)(l)),l.equals(n)?n:l)}},83217:function(e,t,n){n.d(t,{x:function(){return i}});var i=Symbol("WebScene")},45739:function(e,t,n){n.r(t),n.d(t,{getTimeExtentFromLayers:function(){return b},getTimeSliderSettingsFromWebDocument:function(){return x},getTimeSliderSettingsFromWebMap:function(){return Z},toLocalTimeExtent:function(){return O},toUTCTimeExtent:function(){return C}});var i=n(93433),r=n(37762),a=n(74165),o=n(15861),s=n(62044),u=n(63780),l=n(44927),c=n(84652),d=n(32718),f=n(86710),v=n(38675),h=n(83217);function p(e){return null!=e&&"object"==typeof e&&h.x in e}function m(e){return void 0!==e.timeInfo}function y(e,t){return _.apply(this,arguments)}function _(){return(_=(0,o.Z)((0,a.Z)().mark((function e(t,n){var i,r,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null!==(i=null===(r=t.widgets)||void 0===r||null===(o=r.timeSlider)||void 0===o?void 0:o.fullTimeExtent)&&void 0!==i?i:b(t.allLayers,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){var t,n=null!==(t=e.numThumbs)&&void 0!==t?t:2,i=e.currentTimeExtent;if(i){var r=i.start,a=i.end;return null!=r&&null!=a&&r.getTime()===a.getTime()?"instant":2===n?"time-window":null==r||0===r.getTime()?"cumulative-from-start":"cumulative-from-end"}return 2===n?"time-window":"cumulative-from-start"}function k(e){var t=e.numStops,n=e.stopInterval,i=e.stops;return i?{dates:(0,c.d9)(i)}:n?{interval:n.clone()}:{count:null!==t&&void 0!==t?t:5}}function b(e,t){return I.apply(this,arguments)}function I(){return I=(0,o.Z)((0,a.Z)().mark((function e(t,n){var l,c,d,f,v,h,p,y,_,g,k,b,I;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.length){e.next=2;break}return e.abrupt("return",s.Z.allTime);case 2:return e.next=4,Promise.all(t.map((function(e){return e.load({signal:n})})));case 4:if(l=t.filter(m),c=t.filter((function(e){return!m(e)&&null!=e.visibilityTimeExtent})),0!==l.length||0!==c.length){e.next=7;break}return e.abrupt("return",s.Z.allTime);case 7:d=[],f=[],v=(0,r.Z)(l);try{for(v.s();!(h=v.n()).done;)"feature"!==(null===(y=h.value)||void 0===y?void 0:y.type)&&"map-image"!==(null===y||void 0===y?void 0:y.type)||null===(p=y.timeInfo)||void 0===p||!p.hasLiveData?f.push(y):d.push(y)}catch(w){v.e(w)}finally{v.f()}if(_=function(e){return null==e||e.isAllTime},g=[].concat((0,i.Z)(f.map((function(e){var t,n,i=null===(t=e.timeInfo)||void 0===t?void 0:t.fullTimeExtent,r=e.visibilityTimeExtent;return null!==(n=null===i||void 0===i?void 0:i.intersection(r))&&void 0!==n?n:r}))),(0,i.Z)(c.map((function(e){return e.visibilityTimeExtent})))),!g.some(_)){e.next=13;break}return e.abrupt("return",s.Z.allTime);case 13:return k=d.map(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var i,r,o,s,u,l;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchRecomputedExtents({signal:n});case 2:if(e.t2=r=e.sent,e.t1=null===e.t2,e.t1){e.next=6;break}e.t1=void 0===r;case 6:if(!e.t1){e.next=10;break}e.t3=void 0,e.next=11;break;case 10:e.t3=r.timeExtent;case 11:if(e.t4=i=e.t3,e.t0=null!==e.t4,!e.t0){e.next=15;break}e.t0=void 0!==i;case 15:if(!e.t0){e.next=19;break}e.t5=i,e.next=20;break;case 19:e.t5=null===(o=t.timeInfo)||void 0===o?void 0:o.fullTimeExtent;case 20:return u=e.t5,l=t.visibilityTimeExtent,e.abrupt("return",null!==(s=null===u||void 0===u?void 0:u.intersection(l))&&void 0!==s?s:l);case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=16,Promise.allSettled(k);case 16:if(!(b=e.sent.map((function(e){return"fulfilled"===e.status?e.value:null}))).some(_)){e.next=19;break}return e.abrupt("return",s.Z.allTime);case 19:if(0!==(I=[].concat((0,i.Z)(b),(0,i.Z)(g)).filter(u.pC)).length){e.next=22;break}return e.abrupt("return",s.Z.allTime);case 22:return e.abrupt("return",I.reduce((function(e,t){return e.union(t)})));case 23:case"end":return e.stop()}}),e)}))),I.apply(this,arguments)}function w(e,t){var n,i=e.currentTimeExtent;if(!i)return null;var r=i.start,a=i.end,o=null!==(n=null!==r&&void 0!==r?r:a)&&void 0!==n?n:null;switch(t){case"time-window":return new s.Z({start:r,end:a});case"cumulative-from-start":return new s.Z({start:null,end:o});case"cumulative-from-end":return new s.Z({start:o,end:null});case"instant":return new s.Z({start:o,end:o})}}function Z(e,t){return T.apply(this,arguments)}function T(){return(T=(0,o.Z)((0,a.Z)().mark((function e(t,n){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,l.XV)(d.Z.getLogger("esri.support.timeUtils.getTimeSliderSettingsFromWebMap"),"`timeUtils.getTimeSliderSettingsFromWebMap` is deprecated in favor of 'timeUtils.getTimeSliderSettingsFromWebDocument'",{replacement:"timeUtils.getTimeSliderSettingsFromWebDocument",version:"4.30",see:"https://developers.arcgis.com/javascript/latest/api-reference/esri-support-timeUtils.html#getTimeSliderSettingsFromWebDocument",warnOnce:!0}),null==t||!(0,v.s)(t)){e.next=7;break}return e.next=4,x(t,n);case 4:e.t0=e.sent,e.next=8;break;case 7:e.t0=null;case 8:return e.abrupt("return",e.t0);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e,t){return S.apply(this,arguments)}function S(){return(S=(0,o.Z)((0,a.Z)().mark((function e(t,n){var i,r,o,s,u,l;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,v.s)(t)||p(t)){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,t.load({signal:n});case 4:if(o=null===t||void 0===t||null===(i=t.widgets)||void 0===i?void 0:i.timeSlider){e.next=7;break}return e.abrupt("return",null);case 7:return e.next=9,y(t,n);case 9:return s=e.sent,u=o.loop,l=g(o),e.abrupt("return",{fullTimeExtent:s,loop:u,mode:l,playRate:null!==(r=o.stopDelay)&&void 0!==r?r:2e3,stops:k(o),timeExtent:w(o,l)});case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e){if(!e)return e;var t=e.start,n=e.end;return new s.Z({start:null!=t?(0,f.Nm)(t,-t.getTimezoneOffset(),"minutes"):t,end:null!=n?(0,f.Nm)(n,-n.getTimezoneOffset(),"minutes"):n})}function O(e){if(!e)return e;var t=e.start,n=e.end;return new s.Z({start:null!=t?(0,f.Nm)(t,t.getTimezoneOffset(),"minutes"):t,end:null!=n?(0,f.Nm)(n,n.getTimezoneOffset(),"minutes"):n})}},21643:function(e,t,n){n.r(t),n.d(t,{default:function(){return P}});var i=n(15671),r=n(43144),a=n(60136),o=n(29388),s=n(27366),u=n(10064),l=n(94172),c=n(49861),d=(n(93169),n(32718),n(84936),n(69912)),f=n(37762),v=(n(59486),n(52639)),h=n(7138),p=n(92026),m=n(67426),y=n(76151),_=n(97463),g=n(5198),k=n(27823),b=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(e){return(0,i.Z)(this,n),t.call(this,e)}return(0,r.Z)(n,[{key:"getObjectId",value:function(){return this.objectId}}]),n}(v.Z);(0,s._)([(0,c.Cb)({type:Number,json:{read:!0}})],b.prototype,"objectId",void 0),b=(0,s._)([(0,d.j)("esri.layers.graphics.controllers.StreamController.StreamGraphic")],b);var I=function(){function e(t){(0,i.Z)(this,e),this.onUpdate=t,this._idToGraphic=new Map}return(0,r.Z)(e,[{key:"destroy",value:function(){this._idToGraphic.clear()}},{key:"add",value:function(e){this._idToGraphic.set(e.objectId,e)}},{key:"get",value:function(e){return this._idToGraphic.get(e)}},{key:"forEach",value:function(e){this._idToGraphic.forEach(e)}},{key:"removeById",value:function(e){var t=this._idToGraphic.get(e);return t?(t.sourceLayer=t.layer=null,this._idToGraphic.delete(e),t):null}},{key:"update",value:function(e,t){this.onUpdate(e,t)}},{key:"size",get:function(){return this._idToGraphic.size}}]),e}(),w=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(){var e;return(0,i.Z)(this,n),(e=t.apply(this,arguments)).isPaused=!1,e.graphics=new g.g,e._updateInfo={websocket:0,client:0},e._updateIntervalId=null,e._outSpatialReference=null,e}return(0,r.Z)(n,[{key:"initialize",value:function(){var e=this;this.addResolvingPromise(this.layer.when((function(){return e._startup()})))}},{key:"destroy",value:function(){this.clear()}},{key:"_clearInterval",value:function(){null!==this._updateIntervalId&&(clearInterval(this._updateIntervalId),this._updateIntervalId=null)}},{key:"clear",value:function(){this._shutdown(),this.graphics.clear()}},{key:"updating",get:function(){return!this.connection||"connected"===this.connection.connectionStatus}},{key:"_shutdown",value:function(){this._clearInterval(),this.connection=(0,p.SC)(this.connection),this.store=(0,p.SC)(this.store),this.removeAllHandles()}},{key:"_startup",value:function(){var e=this,t=this.layer,n=this.layerView,i=t.spatialReference,r=t.definitionExpression,a=t.geometryDefinition,o=t.objectIdField,s=t.timeInfo,u=t.purgeOptions,c=t.maxReconnectionAttempts,d=t.maxReconnectionInterval,f=t.customParameters,v=t.geometryType?k.M.toJSON(t.geometryType):null,h=i,p=n.view.spatialReference;this.clear(),this._set("connection",(0,_.createConnection)(t.parsedUrl,h,p,v,r,a,c,d,null!==f&&void 0!==f?f:void 0)),this._outSpatialReference=p.toJSON(),this.store=new I(this._onUpdate.bind(this)),this.featuresManager=new y.Qo(this.store,o,s.toJSON(),u);var m="startup-watches";this.removeHandles(m),this.addHandles([t.on("send-message-to-socket",(function(t){return e.connection.sendMessageToSocket(t)})),t.on("send-message-to-client",(function(t){return e.connection.sendMessageToClient(t)})),this.connection.on("data-received",(function(t){return e._onFeature(t)})),this.connection.on("message-received",(function(t){return e._onWebSocketMessage(t)})),(0,l.watch)((function(){return[t.definitionExpression,t.geometryDefinition,t.purgeOptions]}),(function(){return e._startup()}))],m),this.isPaused||this._initUpdateInterval()}},{key:"_onWebSocketMessage",value:function(e){var t=this;if(this.layerView.emit("message-received",e),"type"in e)switch(e.type){case"delete":if(e.objectIds){var n,i=(0,f.Z)(e.objectIds);try{for(i.s();!(n=i.n()).done;){var r=n.value;this.featuresManager.removeById(r)}}catch(u){i.e(u)}finally{i.f()}}if(e.trackIds){var a,o=(0,f.Z)(e.trackIds);try{for(o.s();!(a=o.n()).done;){var s=a.value;this.featuresManager.removeByTrackId(s)}}catch(u){o.e(u)}finally{o.f()}}break;case"clear":this.store.forEach((function(e){return t.featuresManager.removeById(e.objectId)}))}}},{key:"_onFeature",value:function(e){this._updateInfo.websocket++,this.layerView.hasEventListener("data-received")&&this.layerView.emit("data-received",{attributes:e.attributes,centroid:e.centroid,geometry:e.geometry});try{null==e.geometry||e.geometry.spatialReference||(e.geometry.spatialReference=this._outSpatialReference);var t=b.fromJSON(e);t.sourceLayer=t.layer=this.layer,this.featuresManager.add(t)}catch(n){}}},{key:"_onUpdate",value:function(e,t){null!=t&&this.graphics.removeMany(t),null!=e&&(this._updateInfo.client+=e.length,this.graphics.addMany(e))}},{key:"_initUpdateInterval",value:function(){var e=this;this._clearInterval();var t=this.layer.updateInterval,n=performance.now();this._updateIntervalId=setInterval((function(){var t=performance.now(),i=t-n;if(i>2500){n=t;var r=Math.round(e._updateInfo.client/(i/1e3)),a=Math.round(e._updateInfo.websocket/(i/1e3));e._updateInfo.client=0,e._updateInfo.websocket=0,e.layerView.emit("update-rate",{client:r,websocket:a})}e.featuresManager.checkForUpdates()}),t)}},{key:"pauseStream",value:function(){this.isPaused=!0,this._clearInterval()}},{key:"resumeStream",value:function(){this.isPaused=!1,this._initUpdateInterval()}},{key:"disconnect",value:function(){this._shutdown()}},{key:"connect",value:function(){null==this.connection&&this._startup()}},{key:"clearGraphics",value:function(){this.graphics.clear()}}]),n}((0,m.v)(h.default));(0,s._)([(0,c.Cb)()],w.prototype,"isPaused",void 0),(0,s._)([(0,c.Cb)({constructOnly:!0})],w.prototype,"layer",void 0),(0,s._)([(0,c.Cb)({constructOnly:!0})],w.prototype,"layerView",void 0),(0,s._)([(0,c.Cb)()],w.prototype,"connection",void 0),(0,s._)([(0,c.Cb)({readOnly:!0})],w.prototype,"updating",null),w=(0,s._)([(0,d.j)("esri.layers.graphics.controllers.StreamController")],w);var Z=n(21149),T=n(7303),x=n(42069),S=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(e){var r;return(0,i.Z)(this,n),(r=t.call(this,e)).suspendResumeExtentMode="computed",r}return(0,r.Z)(n,[{key:"connection",get:function(){var e;return null===(e=this.controller)||void 0===e?void 0:e.connection}},{key:"createController",value:function(){return new w({layer:this.layer,layerView:this.layerView})}},{key:"beforeSetController",value:function(){}},{key:"pause",value:function(){var e;null===(e=this.controller)||void 0===e||e.pauseStream()}},{key:"resume",value:function(){var e;null===(e=this.controller)||void 0===e||e.resumeStream()}},{key:"disconnect",value:function(){var e;null===(e=this.controller)||void 0===e||e.disconnect()}},{key:"connect",value:function(){var e;null===(e=this.controller)||void 0===e||e.connect()}},{key:"clear",value:function(){var e;null===(e=this.controller)||void 0===e||e.clearGraphics()}}]),n}(n(22380).Q);(0,s._)([(0,c.Cb)()],S.prototype,"controller",void 0),(0,s._)([(0,c.Cb)()],S.prototype,"connection",null),(0,s._)([(0,c.Cb)()],S.prototype,"suspendResumeExtentMode",void 0),S=(0,s._)([(0,d.j)("esri.views.3d.layers.graphics.StreamGraphics3DGraphicsPipeline")],S);var C=n(78485),O=n(67581),E=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(){var e;return(0,i.Z)(this,n),(e=t.apply(this,arguments)).type="stream-3d",e.updatePolicy=C.j.ASYNC,e.hasZ=!0,e.hasM=!1,e}return(0,r.Z)(n,[{key:"initialize",value:function(){var e=this;this.addHandles((0,l.watch)((function(){return e.suspended}),(function(t){e.graphicsPipeline&&e._onSuspendedChange(t)})))}},{key:"connectionError",get:function(){var e,t,n=null===(e=this.graphicsPipeline)||void 0===e||null===(t=e.connection)||void 0===t?void 0:t.errorString;return n?new u.Z("stream-controller",n):null}},{key:"createQuery",value:function(){return new Z.Z({outFields:["*"],returnGeometry:!0,outSpatialReference:this.view.spatialReference})}},{key:"queryLatestObservations",value:function(e,t){return this.queryEngine.executeQueryForLatestObservations(this._ensureQuery(e),null===t||void 0===t?void 0:t.signal)}},{key:"_streamConnectionStatus",get:function(){var e,t,n;return null!==(e=null===(t=this.graphicsPipeline)||void 0===t||null===(n=t.connection)||void 0===n?void 0:n.connectionStatus)&&void 0!==e?e:"disconnected"}},{key:"createGraphicsPipeline",value:function(){return new S({layerView:this})}},{key:"createController",value:function(){return new w({layer:this.layer,layerView:this})}},{key:"beforeSetController",value:function(){}},{key:"_doPause",value:function(){var e;null===(e=this.graphicsPipeline)||void 0===e||e.pause()}},{key:"_doResume",value:function(){var e;null===(e=this.graphicsPipeline)||void 0===e||e.resume()}},{key:"_doDisconnect",value:function(){var e;null!==(e=this.graphicsPipeline)&&void 0!==e&&e.disconnect(),this._doPause()}},{key:"_doConnect",value:function(){var e;null!==(e=this.graphicsPipeline)&&void 0!==e&&e.connect(),this.resume()}},{key:"_doClear",value:function(){var e;null===(e=this.graphicsPipeline)||void 0===e||e.clear()}}]),n}((0,n(27499).Z)((0,T.R)((0,x.A)(O.Z))));(0,s._)([(0,c.Cb)({readOnly:!0})],E.prototype,"updatePolicy",void 0),(0,s._)([(0,c.Cb)({readOnly:!0})],E.prototype,"connectionError",null),(0,s._)([(0,c.Cb)()],E.prototype,"graphicsPipeline",void 0),(0,s._)([(0,c.Cb)({readOnly:!0})],E.prototype,"hasZ",void 0),(0,s._)([(0,c.Cb)({readOnly:!0})],E.prototype,"hasM",void 0),(0,s._)([(0,c.Cb)({readOnly:!0})],E.prototype,"_streamConnectionStatus",null);var P=E=(0,s._)([(0,d.j)("esri.views.3d.layers.StreamLayerView3D")],E)},27499:function(e,t,n){n.d(t,{Z:function(){return d}});var i=n(15671),r=n(43144),a=n(60136),o=n(29388),s=n(27366),u=n(49861),l=(n(93169),n(32718),n(84936),n(69912)),c=n(18661),d=function(e){var t=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(){var e;(0,i.Z)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a)))._isUserPaused=!1,e.filter=null,e}return(0,r.Z)(n,[{key:"resume",value:function(){this._isUserPaused=!1,this.suspended||this._doResume()}},{key:"pause",value:function(){this._isUserPaused=!0,this.suspended||this._doPause()}},{key:"disconnect",value:function(){this._doDisconnect()}},{key:"connect",value:function(){this._doConnect()}},{key:"clear",value:function(){this._doClear()}},{key:"connectionStatus",get:function(){return(this._isUserPaused||this.suspended)&&"connected"===this._streamConnectionStatus?"paused":this._streamConnectionStatus}},{key:"_onSuspendedChange",value:function(e){e?this._doPause():this._isUserPaused||this._doResume()}}]),n}(e);return(0,s._)([(0,u.Cb)()],t.prototype,"_isUserPaused",void 0),(0,s._)([(0,u.Cb)({readOnly:!0})],t.prototype,"connectionStatus",null),(0,s._)([(0,u.Cb)({type:c.Z})],t.prototype,"filter",void 0),t=(0,s._)([(0,l.j)("esri.views.layers.StreamLayerView")],t)}}}]);
//# sourceMappingURL=80142.dbc25e21.chunk.js.map