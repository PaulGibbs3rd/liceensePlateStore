"use strict";(self.webpackChunkreact_training=self.webpackChunkreact_training||[]).push([[66027,18277],{46634:function(e,t,r){r.d(t,{R:function(){return f}});var n=r(15671),i=r(43144),s=r(60136),a=r(29388),o=r(27366),u=r(7138),c=r(42537),l=r(94172),d=r(99346),p=r(49861),v=r(69912),f=function(e){(0,s.Z)(r,e);var t=(0,a.Z)(r);function r(){var e;return(0,n.Z)(this,r),(e=t.apply(this,arguments)).updating=!1,e._handleId=0,e._scheduleHandleId=0,e._pendingPromises=new Set,e}return(0,i.Z)(r,[{key:"destroy",value:function(){this.removeAll()}},{key:"add",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._installWatch(e,t,r,l.watch)}},{key:"addWhen",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._installWatch(e,t,r,l.when)}},{key:"addOnCollectionChange",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.initial,s=void 0!==i&&i,a=n.final,o=void 0!==a&&a,u=++this._handleId;return this.addHandles([(0,l.on)(e,"after-changes",this._createSyncUpdatingCallback(),l.sync),(0,l.on)(e,"change",t,{onListenerAdd:s?function(e){return t({added:e.toArray(),removed:[]})}:void 0,onListenerRemove:o?function(e){return t({added:[],removed:e.toArray()})}:void 0})],u),(0,c.kB)((function(){return r.removeHandles(u)}))}},{key:"addPromise",value:function(e){var t=this;if(null==e)return e;var r=++this._handleId;this.addHandles((0,c.kB)((function(){t._pendingPromises.delete(e)&&(0!==t._pendingPromises.size||t.hasHandles(h)||t._set("updating",!1))})),r),this._pendingPromises.add(e),this._set("updating",!0);var n=function(){return t.removeHandles(r)};return e.then(n,n),e}},{key:"removeAll",value:function(){this._pendingPromises.clear(),this.removeAllHandles(),this._set("updating",!1)}},{key:"_installWatch",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0,s=++this._handleId;n.sync||this._installSyncUpdatingWatch(e,s);var a=i(e,t,n);return this.addHandles(a,s),(0,c.kB)((function(){return r.removeHandles(s)}))}},{key:"_installSyncUpdatingWatch",value:function(e,t){var r=this._createSyncUpdatingCallback(),n=(0,l.watch)(e,r,{sync:!0,equals:function(){return!1}});return this.addHandles(n,t),n}},{key:"_createSyncUpdatingCallback",value:function(){var e=this;return function(){e.removeHandles(h),++e._scheduleHandleId;var t=e._scheduleHandleId;e._get("updating")||e._set("updating",!0),e.addHandles((0,d.Os)((function(){t===e._scheduleHandleId&&(e._set("updating",e._pendingPromises.size>0),e.removeHandles(h))})),h)}}}]),r}(u.default);(0,o._)([(0,p.Cb)({readOnly:!0})],f.prototype,"updating",void 0),f=(0,o._)([(0,v.j)("esri.core.support.UpdatingHandles")],f);var h=-42},22751:function(e,t,r){r.d(t,{x:function(){return a}});var n=r(42537),i=r(94172),s=new WeakMap;function a(e){return!e.destroyed&&(s.has(e)||e.addHandles([(0,i.watch)((function(){var t=e.parent;return!(!t||!("type"in t))&&("catalog-dynamic-group"===t.type||a(t))}),(function(t){return s.set(e,t)}),i.syncAndInitial),(0,n.kB)((function(){return s.delete(e)}))]),s.get(e))}},18277:function(e,t,r){r.d(t,{$6:function(){return g},$z:function(){return a},F7:function(){return s},Ow:function(){return c},S0:function(){return u},d1:function(){return l},dm:function(){return d},ir:function(){return o}});var n=r(93433),i=[["binary","application/octet-stream","bin",""]];function s(e,t){var r;return null!=v(t.name,null!==(r=null===e||void 0===e?void 0:e.supportedFormats)&&void 0!==r?r:[])}function a(e,t){var r;if(!e)return!1;var n=d(t,null!==(r=e.supportedFormats)&&void 0!==r?r:[]);return null!=n&&e.editFormats.includes(n)}function o(e){var t;return p(null!==(t=null===e||void 0===e?void 0:e.supportedFormats)&&void 0!==t?t:[]).flatMap(m).map((function(e){return".".concat(e)}))}function u(e,t){return f(function(e,t){var r=e.toLowerCase();return p(t).find((function(e){return h(e)===r}))}(e,t))}function c(e,t){return f(v(e,t))}function l(e,t){return h(function(e,t){return p(t).find((function(t){return f(t)===e}))}(e,t))}function d(e,t){var r;return null!==(r=c(e.name,t))&&void 0!==r?r:u(e.type,t)}function p(e){return[].concat(i,(0,n.Z)(e))}function v(e,t){var r=e.toLowerCase();return p(t).find((function(e){return m(e).some((function(e){return r.endsWith(e)}))}))}function f(e){return null===e||void 0===e?void 0:e[0]}function h(e){return null===e||void 0===e?void 0:e[1].toLowerCase()}function m(e){var t;return null!==(t=null===e||void 0===e?void 0:e[2].split(",").map((function(e){return e.toLowerCase()})))&&void 0!==t?t:[]}function g(e){var t;return null===(t=e.tables)||void 0===t?void 0:t.find((function(e){return"assetMaps"===e.role}))}},57858:function(e,t,r){r.d(t,{Q:function(){return c},q:function(){return o}});var n=r(74165),i=r(15861),s=r(19545),a=r(76200);function o(e,t,r){return u.apply(this,arguments)}function u(){return u=(0,i.Z)((0,n.Z)().mark((function e(t,r,i){var o,u,c,l,d,p;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===s.id||void 0===s.id?void 0:s.id.findCredential(t.restUrl)){e.next=3;break}return e.abrupt("return",null);case 3:if("loaded"!==t.loadStatus||""!==r||null===(o=t.user)||void 0===o||!o.sourceJSON||!1!==i){e.next=5;break}return e.abrupt("return",t.user.sourceJSON);case 5:if(u={responseType:"json",query:{f:"json"}},i&&(u.query.returnUserLicenseTypeExtensions=!0),""!==r){e.next=15;break}return e.next=9,(0,a.Z)(t.restUrl+"/community/self",u);case 9:if(!(c=e.sent).data){e.next=14;break}if(null===(l=c.data)||void 0===l||!l.username){e.next=14;break}return e.abrupt("return",l);case 14:case 21:return e.abrupt("return",null);case 15:return e.next=17,(0,a.Z)(t.restUrl+"/community/users/"+r,u);case 17:if(!(d=e.sent).data){e.next=21;break}return p=d.data,e.abrupt("return",p.error?null:p);case 22:case"end":return e.stop()}}),e)}))),u.apply(this,arguments)}function c(e,t,r){return l.apply(this,arguments)}function l(){return l=(0,i.Z)((0,n.Z)().mark((function e(t,r,i){var s,a,u;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(t,r,!0);case 2:return u=e.sent,e.abrupt("return",null!==(s=null===u||void 0===u||null===(a=u.userLicenseTypeExtensions)||void 0===a?void 0:a.includes(i))&&void 0!==s&&s);case 4:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)}},39812:function(e,t,r){r.r(t),r.d(t,{default:function(){return Ce}});var n=r(37762),i=r(93433),s=r(44925),a=r(74165),o=r(15861),u=r(15671),c=r(43144),l=r(60136),d=r(29388),p=r(27366),v=r(7138),f=r(80987),h=r(10064),m=r(32718),g=r(94172),y=r(35995),k=r(49861),b=(r(93169),r(84936),r(69912)),x=r(46634),w=r(37933),Z=r(7575),_=r(57858),S=r(1413),V=r(88301),E=r(61120),I=r(42265),L=r(19545),C=r(76200),M=r(63780),U=r(79056),R=r(46784),O=r(84652),P=r(54472),H=r(66978),T=r(38511),F=r(78952),N=r(91836),D=r(29887),A=r(56601),W=r(62594),j=r(94582),J=r(98995),Y=r(73117),q=r(23084),Q=r(62204),G=r(26760),z=r(54789);function $(e,t){var r=t.id;return{id:r,name:t.name,url:"".concat(e,"/").concat(r),type:t.type||"Table"}}function B(e){return{isDataVersioned:(0,G.ud)(e,"hasVersionedData",!1)}}function K(e,t){var r=e?e.toLowerCase().split(",").map((function(e){return e.trim()})):[],n=r.includes("query"),i=r.includes("editing")&&!t.datesInUnknownTimezone,s=i&&r.includes("create"),a=i&&r.includes("delete"),o=i&&r.includes("update");return i&&!(s||a||o)&&(s=a=o=!0),{supportsAdd:s,supportsDelete:a,supportsEditing:i,supportsChangeTracking:r.includes("changetracking"),supportsQuery:n,supportsQueryDataElements:(0,G.ud)(t,"supportsQueryDataElements",!1),supportsQueryDomains:(0,G.ud)(t,"supportsQueryDomains",!1),supportsQueryContingentValues:(0,G.ud)(t,"supportsQueryContingentValues",!1),supportsSync:r.includes("sync"),supportsUpdate:o}}function X(e){return{maxRecordCountFactor:(0,G.Dq)(e,"maxRecordCountFactor",void 0),maxRecordCount:(0,G.Dq)(e,"maxRecordCount",void 0)}}function ee(e){var t=null===e||void 0===e?void 0:e.advancedEditingCapabilities;return{supportsGlobalId:(0,G.ud)(e,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:(0,G.ud)(t,"supportsReturnServiceEditsInSourceSR",!1),supportsSplit:(0,G.ud)(t,"supportsSplit",!1),supportsAsyncApplyEdits:(0,G.ud)(t,"supportsAsyncApplyEdits",!1)}}function te(e){var t=null===e||void 0===e?void 0:e.syncCapabilities,r=null===t||void 0===t?void 0:t.supportedSyncDataOptions;return{supportsAsync:(0,G.ud)(t,"supportsAsync",!1),supportedSyncDataOptions:{annotations:!(1&~r),dimensions:!(2&~r),contingentValues:!(4&~r),attributeRules:!(8&~r),utilityNetworkSystem:!(16&~r),annotationFullModel:!(32&~r),include3DObjects:!(64&~r),utilityNetworkMissingLayers:!(128&~r),preserveTrueCurves:!(256&~r)}}}var re=function(e){(0,l.Z)(r,e);var t=(0,d.Z)(r);function r(e){var n;return(0,u.Z)(this,r),(n=t.call(this,e)).url=null,n.sourceJSON=null,n.userHasFullEditingPrivileges=!1,n.userHasUpdateItemPrivileges=!1,n.userTypeExtensions=[],n.layerInfos=null,n.tableInfos=null,n.capabilities=null,n}return(0,c.Z)(r,[{key:"read",value:function(e,t){this.sourceJSON=e,(0,V.Z)((0,E.Z)(r.prototype),"read",this).call(this,e,t)}},{key:"utilityNetworkUrl",get:function(){if(this.sourceJSON){var e,t=(0,n.Z)(this.sourceJSON.layers);try{for(t.s();!(e=t.n()).done;){var r=e.value;if("Utility Network Layer"===r.type)return"".concat(this.url,"/").concat(r.id)}}catch(i){t.e(i)}finally{t.f()}}return null}},{key:"versionManagementServiceUrl",get:function(){var e;return null!==(e=this.sourceJSON)&&void 0!==e&&e.hasBranchVersionedData?this.url.replace(/\/FeatureServer/i,"/VersionManagementServer"):null}},{key:"readLayerInfos",value:function(e,t){var r=this;return(t.layers||[]).map((function(e){var t=e.type,n=e.geometryType;return(0,S.Z)((0,S.Z)({},$(r.url,e)),{},{type:t||"Feature Layer",geometryType:n})}))}},{key:"readTableInfos",value:function(e,t){var r=this;return(t.tables||[]).map((function(e){return $(r.url,e)}))}},{key:"readCapabilities",value:function(e,t){return function(e){return{data:B(e),sync:te(e),operations:K(e.capabilities,e),query:X(e),editing:ee(e)}}(t)}},{key:"effectiveCapabilities",get:function(){var e=this.capabilities;if(!e)return null;var t=(0,O.d9)(e),r=t.operations;return this.userHasUpdateItemPrivileges?(r.supportsAdd=r.supportsDelete=r.supportsEditing=r.supportsQuery=r.supportsUpdate=!0,t):(this.userHasFullEditingPrivileges&&r.supportsEditing&&(r.supportsAdd=r.supportsDelete=r.supportsUpdate=!0),t)}},{key:"load",value:function(e){var t=this;return this.addResolvingPromise(this._fetchService(this.url,e).then((function(){return t._setUserPrivileges(e)}))),Promise.resolve(this)}},{key:"fetchAllLayersAndTables",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load(t);case 2:return this._fetchLayersAndTablesPromise||(this._fetchLayersAndTablesPromise=this._fetchLayersAndTables(this.url)),(0,H.k_)(t),e.abrupt("return",this._fetchLayersAndTablesPromise);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"applyEdits",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,r){var n,i,s,o,u,c,l,d=this;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._internalApplyEdits(t,r);case 4:return i=e.sent,s=i.results,o=i.edits,u=i.editedFeatures,c=function(e){return e.filter((function(e){return!e.error})).map(O.d9)},l=0,e.abrupt("return",(s.map((function(e){n=(0,A.jF)(d.url,e.id,null===r||void 0===r?void 0:r.gdbVersion,!0);var t={edits:o[l],addedFeatures:c(e.addFeatureResults),updatedFeatures:c(e.updateFeatureResults),deletedFeatures:c(e.deleteFeatureResults),addedAttachments:c(e.addAttachmentResults),updatedAttachments:c(e.updateAttachmentResults),deletedAttachments:c(e.deleteAttachmentResults),exceededTransferLimit:!1,historicMoment:e.editMoment?new Date(e.editMoment):null};l+=1,u.length>0&&(t.editedFeatures=u),n.resolve(t),n=null})),s));case 13:throw e.prev=13,e.t0=e.catch(1),n&&n.reject(e.t0),e.t0;case 16:case"end":return e.stop()}}),e,this,[[1,13]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_setUserPrivileges",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var r,n,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!I.Z.userPrivilegesApplied){e.next=13;break}return e.prev=1,e.next=4,this._fetchUserPrivileges(this.sourceJSON.serviceItemId,t);case 4:r=e.sent,n=r.features.fullEdit,i=r.content.updateItem,this._set("userHasFullEditingPrivileges",n),this._set("userHasUpdateItemPrivileges",i),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),(0,H.r9)(e.t0);case 13:case"end":return e.stop()}}),e,this,[[1,10]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_fetchUserPrivileges",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,r){var n,i,s,o,u,c,l;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=!0,i=!1,s=!1,t){e.next=3;break}return e.abrupt("return",{features:{edit:n,fullEdit:i},content:{updateItem:s}});case 3:return e.prev=3,e.next=6,(0,w.oP)(this.url,r);case 6:o=e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),(0,H.r9)(e.t0);case 12:return e.prev=12,l=null!=r?r.signal:null,e.next=16,null===L.id||void 0===L.id?void 0:L.id.getCredential("".concat(o,"/sharing"),{prompt:!1,signal:l});case 16:u=e.sent,e.next=22;break;case 19:e.prev=19,e.t1=e.catch(12),(0,H.r9)(e.t1);case 22:if(u){e.next=24;break}return e.abrupt("return",{features:{edit:n,fullEdit:i},content:{updateItem:s}});case 24:return e.prev=24,c=new J.default({id:t,portal:{url:o}}),e.next=28,c.load(r);case 28:if(!c.portal.user){e.next=30;break}return e.abrupt("return",(0,Y.Ss)(c));case 30:e.next=35;break;case 32:e.prev=32,e.t2=e.catch(24),(0,H.r9)(e.t2);case 35:return e.abrupt("return",{features:{edit:n,fullEdit:i},content:{updateItem:s}});case 36:case"end":return e.stop()}}),e,this,[[3,9],[12,19],[24,32]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_internalApplyEdits",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,r){var n,i,s,u,c,l,d,p,v,f,h,m;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,W.fK)(this.url);case 2:return i=null!==(n=null===r||void 0===r?void 0:r.globalIdUsed)&&void 0!==n&&n,s=F.Z.fromJSON(this.sourceJSON.spatialReference),e.next=6,this._processApplyEditsParams(t,r);case 6:return u=e.sent,c=u.edits,l=u.options,e.next=11,Promise.all(c.map(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var r,n,o,u,c,l,d,p,v,f,h,m,g,y;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=null!==(r=null===(n=t.addFeatures)||void 0===n?void 0:n.map((function(e){return(0,N.mh)({spatialReference:s},e,null)})))&&void 0!==r?r:[],e.next=3,Promise.all(c);case 3:return l=e.sent.filter(M.pC),d=l.length>0?l:null,p=null!==(o=null===(u=t.updateFeatures)||void 0===u?void 0:u.map((function(e){return(0,N.mh)({spatialReference:s},e,null)})))&&void 0!==o?o:[],e.next=8,Promise.all(p);case 8:return v=e.sent.filter(M.pC),f=v.length>0?v:null,h=(0,N.CJ)(t.identifierFields,t.deleteFeatures,i),m=h.length>0?h:null,(0,Q.P)(d,f,s),e.next=15,(0,N.hw)(t.identifierFields,t);case 15:return g=e.sent,y=null,g&&(y={adds:g.adds.length>0?g.adds:void 0,updates:g.updates.length>0?g.updates:void 0,deletes:g.deletes.length>0?g.deletes:void 0}),e.abrupt("return",{id:t.id,adds:d,updates:f,deletes:m,attachments:y});case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 11:return d=e.sent,p={gdbVersion:null===l||void 0===l?void 0:l.gdbVersion,rollbackOnFailure:!0,useGlobalIds:i,returnEditMoment:!0,honorSequenceOfEdits:null===l||void 0===l?void 0:l.honorSequenceOfEdits,usePreviousEditMoment:null===l||void 0===l?void 0:l.usePreviousEditMoment,returnServiceEditsInSourceSR:!1,returnServiceEditsOption:"originalAndCurrentFeatures",async:!1},e.next=15,(0,z.Px)(this.url,null===r||void 0===r?void 0:r.gdbVersion,!0);case 15:return v=(0,z.JV)(this.url,(null===r||void 0===r?void 0:r.gdbVersion)||null),p.edits=JSON.stringify(d),f=(0,q.en)(this.url),h=(0,q.lA)(f.query,{query:(0,q.cv)((0,S.Z)((0,S.Z)({},p),{},{f:"json"})),method:"post"}),v&&(h.authMode="immediate",h.query.sessionId=z.U8),e.prev=19,e.next=22,(0,C.Z)(this.url+"/applyEdits",h);case 22:m=e.sent,e.next=33;break;case 25:if(e.prev=25,e.t0=e.catch(19),(0,N.JK)(e.t0)){e.next=29;break}throw e.t0;case 29:return h.authMode="immediate",e.next=32,(0,C.Z)(this.url+"/applyEdits",h);case 32:m=e.sent;case 33:return e.abrupt("return",(0,S.Z)((0,S.Z)({},ne(m)),{},{edits:c}));case 34:case"end":return e.stop()}}),e,this,[[19,25]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_processApplyEditsParams",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,r){var n,i=this;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,S.Z)({},r),e.next=3,Promise.all(t.map(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n,s,o,u;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.effectiveCapabilities,s=t&&(t.addFeatures||t.updateFeatures||t.deleteFeatures),o=t&&(t.addAttachments||t.updateAttachments||t.deleteAttachments),(0,D.checkEditingCapabilities)(t,n,r,!!s,!!o,"feature-service"),n.data.isDataVersioned||null===r||void 0===r||!r.gdbVersion){e.next=3;break}throw new h.Z("feature-service:invalid-parameter","'gdbVersion' is applicable only if the layer supports versioned data. See: 'capabilities.data.isVersioned'");case 3:return u=(0,D.normalizeEdits)(t,n,"feature-service"),e.t0=S.Z,e.t1=S.Z,e.t2={},e.next=9,(0,D.normalizeGeometries)(u);case 9:return e.t3=e.sent,e.t4=(0,e.t1)(e.t2,e.t3),e.t5={},e.t6={id:t.id,identifierFields:t.identifierFields},e.abrupt("return",(0,e.t0)(e.t4,e.t5,e.t6));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:return e.t0=e.sent,e.t1=n,e.abrupt("return",{edits:e.t0,options:e.t1});case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_fetchService",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,r){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.sourceJSON){e.next=2;break}return e.abrupt("return",void this.read(this.sourceJSON,{url:(0,q.en)(t)}));case 2:return e.next=4,(0,C.Z)(t,(0,S.Z)({responseType:"json",query:{f:"json"}},r));case 4:n=e.sent,this.read(n.data,{url:(0,q.en)(t)});case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_fetchLayersAndTables",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var r,n,i=this;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(t,"/layers"),e.next=3,(0,C.Z)(r,{responseType:"json",query:{f:"json"}});case 3:return n=e.sent,e.abrupt("return",{layers:n.data.layers.map((function(e){var t=e.type,r=e.geometryType,n=$(i.url,e),s=(0,j.h)(e,n.url);return(0,S.Z)((0,S.Z)({},n),{},{type:t||"Feature Layer",geometryType:r,capabilities:s})})),tables:n.data.tables.map((function(e){var t=$(i.url,e),r=(0,j.h)(e,t.url);return(0,S.Z)((0,S.Z)({},t),{},{capabilities:r})}))});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),r}((0,R.eC)((0,U.IG)(P.Z)));function ne(e){var t=e.data,r=[];return{results:t.map((function(e){var t,n,i,s={addResults:null!==(t=e.addResults)&&void 0!==t?t:[],updateResults:null!==(n=e.updateResults)&&void 0!==n?n:[],deleteResults:null!==(i=e.deleteResults)&&void 0!==i?i:[],attachments:e.attachments,editMoment:e.editMoment},a=(0,N.RZ)(s),o=e.editedFeatures,u=null!==o&&void 0!==o&&o.spatialReference?new F.Z({wkid:null===o||void 0===o?void 0:o.spatialReference.wkid,wkt:null===o||void 0===o?void 0:o.spatialReference.wkt,latestWkid:null===o||void 0===o?void 0:o.spatialReference.latestWkid,latestVcsWkid:null===o||void 0===o?void 0:o.spatialReference.latestVcsWkid,vcsWkid:null===o||void 0===o?void 0:o.spatialReference.vcsWkid}):null,c=o?(0,N.JX)(o,u):null;return c&&r.push({layerId:e.id,editedFeatures:c}),(0,S.Z)({id:e.id,editedFeatures:c},a)})),editedFeatures:r}}(0,p._)([(0,k.Cb)()],re.prototype,"url",void 0),(0,p._)([(0,k.Cb)()],re.prototype,"sourceJSON",void 0),(0,p._)([(0,k.Cb)()],re.prototype,"userHasFullEditingPrivileges",void 0),(0,p._)([(0,k.Cb)()],re.prototype,"userHasUpdateItemPrivileges",void 0),(0,p._)([(0,k.Cb)({readOnly:!0})],re.prototype,"utilityNetworkUrl",null),(0,p._)([(0,k.Cb)({readOnly:!0})],re.prototype,"versionManagementServiceUrl",null),(0,p._)([(0,k.Cb)()],re.prototype,"userTypeExtensions",void 0),(0,p._)([(0,k.Cb)({json:{read:{source:["layers"]}}})],re.prototype,"layerInfos",void 0),(0,p._)([(0,T.r)("layerInfos",["layers"])],re.prototype,"readLayerInfos",null),(0,p._)([(0,k.Cb)({json:{read:{source:["tables"]}}})],re.prototype,"tableInfos",void 0),(0,p._)([(0,T.r)("tableInfos",["tables"])],re.prototype,"readTableInfos",null),(0,p._)([(0,k.Cb)({readOnly:!0,json:{read:{source:["hasVersionedData","capabilities","supportsQueryDataElements","supportsQueryDomains","supportsQueryContingentValues","maxRecordCountFactor","maxRecordCount","advancedEditingCapabilities","supportsApplyEditsWithGlobalIds","syncCapabilities","datesInUnknownTimezone"]}}})],re.prototype,"capabilities",void 0),(0,p._)([(0,T.r)("capabilities",["hasVersionedData","capabilities","supportsQueryDataElements","supportsQueryDomains","supportsQueryContingentValues","maxRecordCountFactor","maxRecordCount","advancedEditingCapabilities","supportsApplyEditsWithGlobalIds","syncCapabilities","datesInUnknownTimezone"])],re.prototype,"readCapabilities",null),(0,p._)([(0,k.Cb)({readOnly:!0})],re.prototype,"effectiveCapabilities",null);var ie=re=(0,p._)([(0,b.j)("esri.rest.featureService.FeatureService")],re),se=r(25899),ae=function e(t,r){var i,s=(0,n.Z)(t);try{for(s.s();!(i=s.n()).done;){var a=i.value;if("feature"===a.type||"subtype-group"===a.type){if(!a.url)continue;var o=(0,se.Qc)(a.url).url.path,u=r.get(o);if(u)u.layers.push(a);else{var c=new ie({url:o}),l=[a];r.set(o,{featureService:c,layers:l})}}else"group"===a.type&&e(a.layers,r)}}catch(d){s.e(d)}finally{s.f()}};function oe(e){var t=new Map;return ae(e,t),t}var ue=r(29439),ce=r(42537),le=r(77427),de=function(e){(0,l.Z)(r,e);var t=(0,d.Z)(r);function r(e){var n;return(0,u.Z)(this,r),(n=t.call(this,e)).versionManagementService=null,n.featureServiceUrl=null,n.url=null,n.currentVersion=null,n.currentVersionInfo=null,n.versionInfos=[],n.versionableItems=new f.Z,n.usePersistentReadSessions=!1,n.state="lock-none",n}return(0,c.Z)(r,[{key:"initialize",value:function(){var e=this;this.url=this.versionManagementService.url,this.featureServiceUrl=this.url.replace(/\/VersionManagementServer/i,"/FeatureServer"),this.addHandles([this.versionableItems.on("before-add",(function(t){if(t.item.featureServiceUrl.toLowerCase()!==e.featureServiceUrl.toLowerCase())return t.preventDefault(),void m.Z.getLogger(e).error("#add()","Cannot add versionAdapter, feature service urls do not match.")})),this.versionableItems.on("before-remove",(function(t){if(0===e.versionableItems.items.length&&e.currentVersion&&"name"in e.currentVersion&&"none"!==e.versionManagementService.getLockType(e.currentVersion))return t.preventDefault(),void m.Z.getLogger(e).error("#remove()","Cannot remove last versionAdapter.")}))])}},{key:"load",value:function(e){return this.addResolvingPromise(this._setUpState(e)),Promise.resolve(this)}},{key:"defaultVersionIdentifier",get:function(){return this.versionManagementService.defaultVersionIdentifier}},{key:"isDefault",get:function(){return!this.currentVersion||!!this.currentVersion&&"name"in this.currentVersion&&this.currentVersion.name===this.defaultVersionIdentifier.name}},{key:"getVersionInfos",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){var t,r=arguments;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.length>0&&void 0!==r[0]&&r[0],e.t0=t,!e.t0){e.next=6;break}return e.next=5,this.versionManagementService.getVersionInfos();case 5:this.versionInfos=e.sent;case 6:return e.abrupt("return",this.versionInfos);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"alterVersion",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,r){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.currentVersion||!("guid"in this.currentVersion)||t.guid!==this.currentVersion.guid){e.next=2;break}return e.abrupt("return",!1);case 2:return e.next=4,this.versionManagementService.alterVersion(t,r);case 4:if(n=e.sent,e.t0=n,!e.t0){e.next=9;break}return e.next=9,this.getVersionInfos(!0);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"deleteVersion",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.currentVersion||!("guid"in this.currentVersion)||t.guid!==this.currentVersion.guid){e.next=2;break}return e.abrupt("return",!1);case 2:return e.next=4,this.versionManagementService.deleteVersion(t);case 4:if(r=e.sent,e.t0=r,!e.t0){e.next=9;break}return e.next=9,this.getVersionInfos(!0);case 9:return e.abrupt("return",r);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getVersionInfoExtended",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.currentVersion&&"name"in this.currentVersion?this.versionManagementService.getVersionInfoExtended(this.currentVersion):this.versionManagementService.getVersionInfoExtended(this.defaultVersionIdentifier));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"startEditing",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){var t,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isDefaultOrHistoricVersion()){e.next=2;break}return e.abrupt("return",{success:!1});case 2:if(this.usePersistentReadSessions){e.next=9;break}return e.next=5,this.versionManagementService.startReadingWithResult(this.currentVersion);case 5:if((t=e.sent).success){e.next=8;break}return e.abrupt("return",t);case 8:this.state="lock-read";case 9:return e.next=11,this.versionManagementService.startEditingWithResult(this.currentVersion);case 11:return r=e.sent,e.abrupt("return",(r.success&&(this.state="lock-write"),r));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stopEditing",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var r,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isDefaultOrHistoricVersion()){e.next=2;break}return e.abrupt("return",{success:!1});case 2:return e.next=4,this.versionManagementService.stopEditingWithResult(this.currentVersion,t);case 4:if((r=e.sent).success){e.next=7;break}return e.abrupt("return",r);case 7:if(this.state="lock-read",this.usePersistentReadSessions){e.next=12;break}return e.next=10,this.versionManagementService.stopReadingWithResult(this.currentVersion);case 10:return n=e.sent,e.abrupt("return",(n.success&&(this.state="lock-none"),n));case 12:return e.abrupt("return",r);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"changeVersion",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var r,n,i,s,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=null,!this.usePersistentReadSessions){e.next=21;break}if(!this._isDefaultOrHistoricVersion(t)){e.next=13;break}if(!t||!("name"in t)){e.next=10;break}return e.next=6,this.versionManagementService.getVersionInfoExtended(t);case 6:n=e.sent,this.state="public"===(null===(i=n)||void 0===i?void 0:i.access)?"lock-none":"lock-read",e.next=11;break;case 10:this.state="lock-read";case 11:e.next=17;break;case 13:return e.next=15,this.versionManagementService.startReading(t);case 15:if(e.sent){e.next=17;break}throw new h.Z("Failed to acquire read lock for version: "+t);case 17:if(e.t0=this._isDefaultOrHistoricVersion(this.currentVersion),e.t0){e.next=21;break}return e.next=21,this.versionManagementService.stopReading(this.currentVersion);case 21:return e.next=23,this.versionManagementService.changeVersionWithResult(this.versionableItems,this.currentVersion,t);case 23:if(s=e.sent,o=!1,s.forEach((function(e,t){o=o||e.success})),e.t1=o,!e.t1){e.next=36;break}if(this.currentVersion=t,e.t2=n,e.t2){e.next=34;break}return e.next=33,this.getVersionInfoExtended();case 33:e.t2=e.sent;case 34:this.currentVersionInfo=e.t2,this._isDefaultOrHistoricVersion()?this.currentVersion&&"name"in this.currentVersion?this.state="public"===(null===(r=this.currentVersionInfo)||void 0===r?void 0:r.access)?"lock-none":"lock-read":this.state="lock-read":this.state="read"!==this.versionManagementService.getLockType(this.currentVersion)?"lock-none":"lock-read";case 36:return e.abrupt("return",s);case 37:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"undo",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._isDefaultOrHistoricVersion()?{success:!1}:(this.versionManagementService.undo(this.currentVersion),{success:!0}));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"redo",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._isDefaultOrHistoricVersion()?{success:!1}:(this.versionManagementService.redo(this.currentVersion),{success:!0}));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_setUpState",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var r,n=this;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.versionManagementService.load(t);case 2:return this.state="lock-none",e.next=5,this.getVersionInfoExtended();case 5:if(this.currentVersionInfo=e.sent,this.versionableItems.forEach((function(e){n.currentVersion?"name"in n.currentVersion?(e.gdbVersion=n.currentVersion.name,e.historicMoment=null):(e.historicMoment=n.currentVersion,e.gdbVersion=null):(e.gdbVersion=null,e.historicMoment=null)})),e.t0=this.usePersistentReadSessions,!e.t0){e.next=18;break}if(!this._isDefaultOrHistoricVersion()){e.next=13;break}this.currentVersion&&"name"in this.currentVersion?this.state="public"===(null===(r=this.currentVersionInfo)||void 0===r?void 0:r.access)?"lock-none":"lock-read":this.state="lock-read",e.next=18;break;case 13:return e.next=15,this.versionManagementService.startReading(this.currentVersion);case 15:if(e.t1=e.sent,!e.t1){e.next=18;break}this.state="lock-read";case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isDefaultOrHistoricVersion",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.currentVersion;return!(e&&"name"in e)||e.name===this.versionManagementService.defaultVersionIdentifier.name}}]),r}((0,R.eC)(P.Z));(0,p._)([(0,k.Cb)()],de.prototype,"versionManagementService",void 0),(0,p._)([(0,k.Cb)()],de.prototype,"featureServiceUrl",void 0),(0,p._)([(0,k.Cb)()],de.prototype,"url",void 0),(0,p._)([(0,k.Cb)()],de.prototype,"currentVersion",void 0),(0,p._)([(0,k.Cb)()],de.prototype,"currentVersionInfo",void 0),(0,p._)([(0,k.Cb)()],de.prototype,"versionInfos",void 0),(0,p._)([(0,k.Cb)()],de.prototype,"versionableItems",void 0),(0,p._)([(0,k.Cb)()],de.prototype,"usePersistentReadSessions",void 0),(0,p._)([(0,k.Cb)()],de.prototype,"state",void 0),(0,p._)([(0,k.Cb)({readOnly:!0})],de.prototype,"defaultVersionIdentifier",null),(0,p._)([(0,k.Cb)({readOnly:!0})],de.prototype,"isDefault",null);var pe=de=(0,p._)([(0,b.j)("esri.versionManagement.VersioningState")],de),ve=r(31201),fe=function(){function e(t){(0,u.Z)(this,e),this.moments=[],this.forwardMoments=[],this.moments.push(t)}return(0,c.Z)(e,[{key:"push",value:function(e){return this.forwardMoments.length,this.moments.push(e)}},{key:"pop",value:function(){if(!(this.forwardMoments.length>0))return this.moments.pop()}},{key:"undo",value:function(){if(this.canUndo()){var e=this.moments.pop();return this.forwardMoments.push(e),e}}},{key:"peek",value:function(){return this.moments.at(-1)}},{key:"canUndo",value:function(){return this.moments.length>1}},{key:"canRedo",value:function(){return this.hasForwardEdits()}},{key:"redo",value:function(){if(this.canRedo()){var e=this.forwardMoments.pop();return this.moments.push(e),e}}},{key:"size",value:function(){return this.moments.length+this.forwardMoments.length}},{key:"hasForwardEdits",value:function(){return this.forwardMoments.length>0}},{key:"clearForwardEdits",value:function(){this.forwardMoments=[]}}]),e}(),he=r(22751),me=(r(75505),r(86741),r(51370),function(){function e(t){(0,u.Z)(this,e),this.versionableItem=t,this.type="featureLayer"}return(0,c.Z)(e,[{key:"gdbVersion",get:function(){return this.versionableItem.gdbVersion},set:function(e){this.versionableItem.gdbVersion=e}},{key:"historicMoment",get:function(){return this.versionableItem.historicMoment},set:function(e){this.versionableItem.historicMoment=e}},{key:"featureServiceUrl",get:function(){return this.versionableItem.url.replace(/^(.*\/FeatureServer)\/\d+$/,"$1")}}]),e}());(0,p._)([(0,k.Cb)({readOnly:!0})],me.prototype,"type",void 0),(0,p._)([(0,k.Cb)()],me.prototype,"gdbVersion",null),(0,p._)([(0,k.Cb)({type:Date})],me.prototype,"historicMoment",null),(0,p._)([(0,k.Cb)({readOnly:!0})],me.prototype,"featureServiceUrl",null);var ge=function(){function e(t){(0,u.Z)(this,e),this.versionableItem=t,this.type="network"}return(0,c.Z)(e,[{key:"gdbVersion",get:function(){return this.versionableItem.gdbVersion},set:function(e){this.versionableItem.gdbVersion=e}},{key:"historicMoment",get:function(){return this.versionableItem.historicMoment},set:function(e){this.versionableItem.historicMoment=e}},{key:"featureServiceUrl",get:function(){return this.versionableItem.featureServiceUrl}}]),e}();(0,p._)([(0,k.Cb)({readOnly:!0})],ge.prototype,"type",void 0),(0,p._)([(0,k.Cb)()],ge.prototype,"gdbVersion",null),(0,p._)([(0,k.Cb)({type:Date})],ge.prototype,"historicMoment",null),(0,p._)([(0,k.Cb)({readOnly:!0})],ge.prototype,"featureServiceUrl",null);var ye=function(){function e(t){(0,u.Z)(this,e),this.versionableItem=t,this.type="subtypeGroupLayer"}return(0,c.Z)(e,[{key:"gdbVersion",get:function(){return this.versionableItem.gdbVersion},set:function(e){this.versionableItem.gdbVersion=e}},{key:"historicMoment",get:function(){return this.versionableItem.historicMoment},set:function(e){this.versionableItem.historicMoment=e}},{key:"featureServiceUrl",get:function(){return this.versionableItem.url.replace(/^(.*\/FeatureServer)\/\d+$/,"$1")}}]),e}();function ke(e){return"networkServiceUrl"in e?new ge(e):"feature"!==e.type||(0,he.x)(e)?"subtype-group"!==e.type||(0,he.x)(e)?null:new ye(e):new me(e)}function be(e){var t,r=[],i=(0,n.Z)(e);try{for(i.s();!(t=i.n()).done;){var s=t.value;if("group"===s.type){var a,o=s,u=o.allTables.concat(o.allLayers),c=(0,n.Z)(u);try{for(c.s();!(a=c.n()).done;){var l=a.value;if("feature"===l.type||"subtype-group"===l.type){var d=ke(l);d&&r.push(d)}}}catch(v){c.e(v)}finally{c.f()}}else{var p=ke(s);p&&r.push(p)}}}catch(v){i.e(v)}finally{i.f()}return r}(0,p._)([(0,k.Cb)({readOnly:!0})],ye.prototype,"type",void 0),(0,p._)([(0,k.Cb)()],ye.prototype,"gdbVersion",null),(0,p._)([(0,k.Cb)({type:Date})],ye.prototype,"historicMoment",null),(0,p._)([(0,k.Cb)({readOnly:!0})],ye.prototype,"featureServiceUrl",null);var xe=function(e){(0,l.Z)(s,e);var t=(0,d.Z)(s);function s(e){var r;return(0,u.Z)(this,s),(r=t.call(this,e)).url=null,r.sourceJSON=null,r.name=null,r.defaultVersionIdentifier=null,r.capabilities=null,r._isDefault=function(e){return!e||e===r.defaultVersionIdentifier.name},r._dateEquals=function(e,t){return!e&&!t||!(!e||!t)&&e.toISOString()===t.toISOString()},r._applyEditsHandler=function(e){var t=e.serviceUrl,n=e.gdbVersion,i=e.result;t===r._featureServiceUrl&&i.then((function(e){var t=e.historicMoment;t&&r._addMomentToVersionItem(n,t)}))},r}return(0,c.Z)(s,[{key:"initialize",value:function(){var e,t=this;this.url=(0,y.Qj)(this.url),this._featureServiceUrl=this.url.replace(/\/VersionManagementServer/i,"/FeatureServer"),z.YO.has(this.url)||z.YO.set(this.url,new Map);var r=(null!==(e=z.rj.get(this.url))&&void 0!==e?e:0)+1;z.rj.set(this.url,r),this.when().then((function(){return t.addHandles((0,A.qH)(t._applyEditsHandler))}),(function(){}))}},{key:"destroy",value:function(){var e,t=(null!==(e=z.rj.get(this.url))&&void 0!==e?e:1)-1;z.rj.set(this.url,t),0===t&&z.YO.delete(this.url),z.Jp.delete(this._featureServiceUrl)}},{key:"read",value:function(e,t){this.sourceJSON=e,(0,V.Z)((0,E.Z)(s.prototype),"read",this).call(this,e,t)}},{key:"readDefaultVersionIdentifier",value:function(e,t){return{name:t.defaultVersionName,guid:t.defaultVersionGuid}}},{key:"writeDefaultVersionIdentifier",value:function(e,t){t.defaultVersionName=e.name,t.defaultVersionGuid=e.guid}},{key:"load",value:function(e){return this.addResolvingPromise(this._fetchService(this.url,e)),Promise.resolve(this)}},{key:"createVersion",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n,i,s,o,u;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([r.e(25939).then(r.bind(r,25939)),r.e(43147).then(r.bind(r,43147))]);case 2:return n=e.sent,i=(0,ue.Z)(n,2),s=i[0].createVersion,o=i[1].default,u=o.from(t),e.abrupt("return",s(this.url,u));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteVersion",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n,i,s,o,u,c,l;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([r.e(59658).then(r.bind(r,59658)),r.e(87774).then(r.bind(r,87774))]);case 2:return i=e.sent,s=(0,ue.Z)(i,2),o=s[0].deleteVersion,u=s[1].default,t.guid&&(null===(n=z.YO.get(this.url))||void 0===n?void 0:n.has(t.guid))&&(c=null!==z.U8&&void 0!==z.U8?z.U8:void 0),l=new u({versionName:t.name,sessionId:c}),e.abrupt("return",o(this.url,l));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getVersionInfoExtended",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(29780).then(r.bind(r,29780));case 2:return n=e.sent,i=n.getVersion,e.abrupt("return",i(this.url,t.guid));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getVersionInfos",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){var t,n,i,s,o,u,c=arguments;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:{},e.next=3,Promise.all([r.e(85215).then(r.bind(r,85215)),r.e(74790).then(r.bind(r,74790))]);case 3:return n=e.sent,i=(0,ue.Z)(n,2),s=i[0].getVersionInfos,o=i[1].default,u=o.from(t),e.abrupt("return",s(this.url,u));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"reconcile",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n,i,s,o,u,c,l=arguments;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.length>1&&void 0!==l[1]?l[1]:{},e.next=3,Promise.all([r.e(63893).then(r.bind(r,63893)),r.e(2364).then(r.bind(r,2364))]);case 3:return i=e.sent,s=(0,ue.Z)(i,2),o=s[0].reconcile,u=s[1].default,c=u.from(n),e.abrupt("return",(c.sessionId=z.U8,o(this.url,t.guid,c)));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"post",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n,i,s,o,u;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([r.e(54841).then(r.bind(r,54841)),r.e(82196).then(r.bind(r,82196))]);case 2:return n=e.sent,i=(0,ue.Z)(n,2),s=i[0].post,o=i[1].default,u=o.from({sessionId:z.U8}),e.abrupt("return",s(this.url,t.guid,u));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"alterVersion",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,n){var i,s,o,u,c;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([r.e(50098).then(r.bind(r,50098)),r.e(52112).then(r.bind(r,52112))]);case 2:return i=e.sent,s=(0,ue.Z)(i,2),o=s[0].alterVersion,u=s[1].default,c=u.from(n),e.abrupt("return",o(this.url,t.guid,c));case 8:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"startReading",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.startReadingWithResult(t);case 2:return e.abrupt("return",e.sent.success);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"startReadingWithResult",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n,i,s,o,u,c;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(50880).then(r.bind(r,50880));case 2:return n=e.sent,i=n.startReading,e.next=6,i(this.url,t.guid,z.U8);case 6:if(!(s=e.sent).success){e.next=14;break}return e.next=10,this.getVersionInfoExtended(t);case 10:o=e.sent,u=new Date(o.modifiedDate),c={name:o.versionIdentifier.name,moment:u,lockType:"read"},this._addOrUpdateItem(t.guid,c),(0,A.SY)(this._featureServiceUrl,null,t.name,u);case 14:return e.abrupt("return",s);case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"stopReading",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stopReadingWithResult(t);case 2:return e.abrupt("return",e.sent.success);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"stopReadingWithResult",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n,i,s,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(32673).then(r.bind(r,32673));case 2:return i=e.sent,s=i.stopReading,e.next=6,s(this.url,t.guid,z.U8);case 6:return o=e.sent,e.abrupt("return",(o.success&&(null!==(n=z.YO.get(this.url))&&void 0!==n&&n.delete(t.guid),(0,A.SY)(this._featureServiceUrl,null,t.name,null)),o));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"startEditing",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.startEditingWithResult(t);case 2:return e.abrupt("return",e.sent.success);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"startEditingWithResult",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n,i,s,o,u,c,l;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(90114).then(r.bind(r,90114));case 2:return n=e.sent,i=n.startEditing,e.next=6,i(this.url,t.guid,z.U8);case 6:if(!(s=e.sent).success){e.next=15;break}return e.next=10,this.getVersionInfoExtended(t);case 10:o=e.sent,u=new Date(o.modifiedDate),c=new fe(u),l={name:t.name,moment:u,lockType:"edit",stack:c},this._addOrUpdateItem(t.guid,l),(0,A.SY)(this._featureServiceUrl,null,t.name,u);case 15:return e.abrupt("return",s);case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"stopEditing",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,r){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stopEditingWithResult(t,r);case 2:return e.abrupt("return",e.sent.success);case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"stopEditingWithResult",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,n){var i,s,o,u,c,l,d,p,v,f,h,m,g;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=14;break}if(null===(o=null===(i=z.YO.get(this.url))||void 0===i?void 0:i.get(t.guid))||void 0===o||null===(s=o.stack)||void 0===s||!s.canRedo()){e.next=14;break}return e.next=5,Promise.all([r.e(2106).then(r.bind(r,2106)),r.e(70519).then(r.bind(r,70519))]);case 5:return u=e.sent,c=(0,ue.Z)(u,2),l=c[0].deleteForwardEdits,d=c[1].default,e.next=11,l(this.url,t.guid,new d({sessionId:z.U8,moment:o.moment}));case 11:if((p=e.sent).success){e.next=14;break}return e.abrupt("return",p);case 14:return e.next=16,r.e(62856).then(r.bind(r,62856));case 16:return v=e.sent,f=v.stopEditing,e.next=20,f(this.url,t.guid,z.U8,n);case 20:if(!(h=e.sent).success){e.next=27;break}return e.next=24,this.getVersionInfoExtended(t);case 24:m=e.sent,g=new Date(m.modifiedDate),this._addOrUpdateItem(t.guid,{name:t.name,moment:g,lockType:"read",editMomentStack:void 0}),(0,A.SY)(this._featureServiceUrl,null,t.name,g);case 27:return e.abrupt("return",h);case 28:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getLockType",value:function(e){var t,r,n=null===(t=z.YO.get(this.url))||void 0===t||null===(r=t.get(e.guid))||void 0===r?void 0:r.lockType;return null!==n&&void 0!==n?n:"none"}},{key:"changeVersion",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,r,i){var s,o,u,c,l,d,p,v,f,m,g,y,k=this;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i&&"name"in i,!e.t0){e.next=5;break}return e.next=4,this.getVersionInfoExtended(i);case 4:e.t0=!e.sent;case 5:if(!e.t0){e.next=7;break}throw new h.Z("version-management-service:invalid-version","version does not exist");case 7:if(!("networkServiceUrl"in t)){e.next=12;break}if(this._featureServiceUrl.toLowerCase()!==t.featureServiceUrl.toLowerCase()){e.next=10;break}return e.abrupt("return",this._changeVersionInternal(t,r,i));case 10:e.next=55;break;case 12:"layers"in t?(s=t.allTables.concat(t.allLayers),t.utilityNetworks&&t.utilityNetworks.forEach((function(e){k._featureServiceUrl.toLowerCase()===e.featureServiceUrl.toLowerCase()&&k._changeVersionInternal(e,r,i)}))):s=t,o=(0,n.Z)(s),e.prev=14,o.s();case 16:if((u=o.n()).done){e.next=47;break}if("feature"!==(c=u.value).type&&"subtype-group"!==c.type){e.next=24;break}if(l=/^(.*\/FeatureServer)\/\d+$/,d=c.url.replace(l,"$1"),this._featureServiceUrl.toLowerCase()!==d.toLowerCase()||this._changeVersionInternal(c,r,i)){e.next=22;break}return e.abrupt("return",!1);case 22:e.next=45;break;case 24:if("group"!==c.type){e.next=45;break}p=c.allTables.concat(c.allLayers),v=(0,n.Z)(p),e.prev=27,v.s();case 29:if((f=v.n()).done){e.next=37;break}if("feature"!==(m=f.value).type&&"subtype-group"!==m.type){e.next=35;break}if(g=/^(.*\/FeatureServer)\/\d+$/,y=m.url.replace(g,"$1"),this._featureServiceUrl.toLowerCase()!==y.toLowerCase()||this._changeVersionInternal(m,r,i)){e.next=35;break}return e.abrupt("return",!1);case 35:e.next=29;break;case 37:e.next=42;break;case 39:e.prev=39,e.t1=e.catch(27),v.e(e.t1);case 42:return e.prev=42,v.f(),e.finish(42);case 45:e.next=16;break;case 47:e.next=52;break;case 49:e.prev=49,e.t2=e.catch(14),o.e(e.t2);case 52:return e.prev=52,o.f(),e.finish(52);case 55:return e.abrupt("return",!0);case 56:case"end":return e.stop()}}),e,this,[[14,49,52,55],[27,39,42,45]])})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"changeVersionWithResult",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,r,s){var o,u,c,l,d,p,v,f,h,m,g,y,k,b,x;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("layers"in t?(u=be(t.allTables.concat(t.allLayers).filter((function(e){return"group"!==e.type})).toArray()),t.utilityNetworks&&t.utilityNetworks.forEach((function(e){var t=be([e]);u.push.apply(u,(0,i.Z)(t))})),o=u):o=t,!s||!("name"in s)){e.next=9;break}return e.next=4,this.getVersionInfoExtended(s);case 4:if(e.sent){e.next=9;break}c=new Map,l=(0,n.Z)(o);try{for(l.s();!(d=l.n()).done;)p=d.value,c.set(p,{success:!1})}catch(a){l.e(a)}finally{l.f()}return e.abrupt("return",c);case 9:if(!r||!("name"in r)){e.next=15;break}if("none"===this.getLockType(r)){e.next=15;break}v=new Map,f=(0,n.Z)(o);try{for(f.s();!(h=f.n()).done;)m=h.value,v.set(m,{success:!1})}catch(a){f.e(a)}finally{f.f()}return e.abrupt("return",v);case 15:g=new Map,y=(0,n.Z)(o);try{for(y.s();!(k=y.n()).done;)(b=k.value)&&(b.featureServiceUrl.toLowerCase()===this._featureServiceUrl.toLowerCase()?(x=this._changeVersionInternalWithResult(b,r,s),g.set(b,x)):g.set(b,{success:!1}))}catch(a){y.e(a)}finally{y.f()}return e.abrupt("return",g);case 19:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"getVersionIdentifierFromName",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var r,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.getVersionInfos({includeHidden:!0});case 3:return n=e.sent,e.abrupt("return",(null===(r=n.find((function(e){return e.versionIdentifier.name===t})))||void 0===r?void 0:r.versionIdentifier)||null);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getVersionIdentifierFromGuid",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(29780).then(r.bind(r,29780));case 2:return n=e.sent,i=n.getVersion,e.prev=4,e.next=7,i(this.url,t);case 7:return e.abrupt("return",e.sent.versionIdentifier);case 10:return e.prev=10,e.t0=e.catch(4),e.abrupt("return",null);case 13:case"end":return e.stop()}}),e,this,[[4,10]])})));return function(t){return e.apply(this,arguments)}}()},{key:"canUndo",value:function(e){var t,r,n=null===(t=z.YO.get(this.url))||void 0===t?void 0:t.get(e.guid);return!(null===n||void 0===n||null===(r=n.stack)||void 0===r||!r.canUndo())}},{key:"canRedo",value:function(e){var t,r,n=null===(t=z.YO.get(this.url))||void 0===t?void 0:t.get(e.guid);return!(null===n||void 0===n||null===(r=n.stack)||void 0===r||!r.canRedo())}},{key:"undo",value:function(e){var t,r,n=null===(t=z.YO.get(this.url))||void 0===t?void 0:t.get(e.guid),i=(null===n||void 0===n||null===(r=n.stack)||void 0===r?void 0:r.undo())||void 0;if(n&&i){var s,a=n.stack.peek();(0,A.SY)(this._featureServiceUrl,null,e.name,a),null===(s=z.YO.get(this.url))||void 0===s||s.set(e.guid,(0,S.Z)((0,S.Z)({},n),{},{moment:a}))}}},{key:"redo",value:function(e){var t,r,n,i=null===(t=z.YO.get(this.url))||void 0===t?void 0:t.get(e.guid),s=(null===i||void 0===i||null===(r=i.stack)||void 0===r?void 0:r.redo())||void 0;i&&s&&((0,A.SY)(this._featureServiceUrl,null,e.name,s),null===(n=z.YO.get(this.url))||void 0===n||n.set(e.guid,(0,S.Z)((0,S.Z)({},i),{},{moment:s})))}},{key:"_setUpData",value:function(e,t){var r=this,n=null,i=null,s=null,a=null,o=function(e){var t,n,i=null===z.YO||void 0===z.YO||null===(t=z.YO.get(r.url))||void 0===t?void 0:t.get(e.guid);s=e.name,a=null!==(n=null===i||void 0===i?void 0:i.moment)&&void 0!==n?n:null};if(e&&"name"in e){if("none"!==this.getLockType(e))throw new h.Z("version-management-service:version-locked","version is locked");n=e.name,i=null,t&&"name"in t?o(t):(s=this.defaultVersionIdentifier.name,a=t)}else n=this.defaultVersionIdentifier.name,i=e,t&&"name"in t?o(t):(s=this.defaultVersionIdentifier.name,a=t);return{fromVersionName:n,fromMoment:i,toVersionName:s,toMoment:a}}},{key:"_changeVersionInternal",value:function(e,t,r){try{var n=this._setUpData(t,r),i=n.fromVersionName,s=n.fromMoment,a=n.toVersionName,o=n.toMoment;(this._isDefault(i)&&this._isDefault(e.gdbVersion)&&this._dateEquals(e.historicMoment,s)||i===e.gdbVersion&&this._dateEquals(e.historicMoment,s))&&(e.gdbVersion=a,e.historicMoment=o)}catch(i){return!1}return!0}},{key:"_changeVersionInternalWithResult",value:function(e,t,r){try{var n=this._setUpData(t,r),i=n.fromVersionName,s=n.fromMoment,a=n.toVersionName,o=n.toMoment;return this._isDefault(i)&&this._isDefault(e.gdbVersion)&&this._dateEquals(e.historicMoment,s)||i===e.gdbVersion&&this._dateEquals(e.historicMoment,s)?(e.gdbVersion=a,e.historicMoment=o,{success:!0}):{success:!1}}catch(i){return{success:!1}}}},{key:"_addMomentToVersionItem",value:function(e,t){var r=z.YO.get(this.url);if(r){var i,s=(0,n.Z)(r);try{for(s.s();!(i=s.n()).done;){var a=(0,ue.Z)(i.value,2),o=a[0];a[1].name===e&&this._addToStack(o,t)}}catch(u){s.e(u)}finally{s.f()}}}},{key:"_addToStack",value:function(e,t){var r=z.YO.get(this.url),n=null===r||void 0===r?void 0:r.get(e);return!(null===n||void 0===n||!n.stack)&&(function(e,t){if(e)return e.getTime()<t.getTime();return!0}(n.stack.peek(),t)&&n.stack.push(t),r.set(e,(0,S.Z)((0,S.Z)({},n),{},{moment:t})),!0)}},{key:"_addOrUpdateItem",value:function(e,t){var r=z.YO.get(this.url),n=null===r||void 0===r?void 0:r.get(e);return n?(r.set(e,(0,S.Z)((0,S.Z)({},n),t)),!0):!(!t.name||!t.lockType)&&(null!==r&&void 0!==r&&r.set(e,(0,S.Z)((0,S.Z)({},t),{},{lockType:t.lockType})),!0)}},{key:"_fetchService",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,r){var n,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.sourceJSON){e.next=4;break}return this.read(this.sourceJSON,{origin:"service",url:(0,q.en)(t)}),n=new y.R9(this.url).host,e.abrupt("return",void z.Jp.set(n,this.defaultVersionIdentifier.name));case 4:return e.next=6,(0,C.Z)(t,(0,S.Z)({responseType:"json",query:{f:"json"}},r));case 6:i=e.sent,this.read(i.data);case 8:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()}]),s}((0,R.eC)(P.Z));(0,p._)([(0,k.Cb)()],xe.prototype,"url",void 0),(0,p._)([(0,k.Cb)()],xe.prototype,"sourceJSON",void 0),(0,p._)([(0,k.Cb)({type:String,json:{write:!0}})],xe.prototype,"name",void 0),(0,p._)([(0,k.Cb)({json:{write:{target:{defaultVersionName:{type:String},defaultVersionGuid:{type:String}}},read:{source:["defaultVersionName","defaultVersionGuid"]}}})],xe.prototype,"defaultVersionIdentifier",void 0),(0,p._)([(0,T.r)("defaultVersionIdentifier",["defaultVersionName","defaultVersionGuid"])],xe.prototype,"readDefaultVersionIdentifier",null),(0,p._)([(0,ve.c)("defaultVersionIdentifier",{defaultVersionName:{type:String},defaultVersionGuid:{type:String}})],xe.prototype,"writeDefaultVersionIdentifier",null),(0,p._)([(0,k.Cb)({json:{write:!0}})],xe.prototype,"capabilities",void 0);var we=xe=(0,p._)([(0,b.j)("esri.versionManagement.VersionManagementService")],xe);function Ze(e,t){return _e.apply(this,arguments)}function _e(){return _e=(0,o.Z)((0,a.Z)().mark((function e(t,r){var s,o,u,c,l,d,p,v,h,m,g,y,k,b,x;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"layers"in t?(o=be(t.allTables.concat(t.allLayers).filter((function(e){return"group"!==e.type})).toArray()),t.utilityNetworks&&t.utilityNetworks.forEach((function(e){var t=be([e]);o.push.apply(o,(0,i.Z)(t))})),s=o):s=new f.Z(t),u=new Map,c=(0,n.Z)(s);try{for(c.s();!(l=c.n()).done;)d=l.value,(p=u.get(d.featureServiceUrl))?p.push(d):u.set(d.featureServiceUrl,new f.Z([d]))}catch(a){c.e(a)}finally{c.f()}v=new f.Z,h=(0,n.Z)(u),e.prev=6,h.s();case 8:if((m=h.n()).done){e.next=19;break}return g=(0,ue.Z)(m.value,2),y=g[0],k=g[1],b=new ie({url:y}),e.next=13,b.load();case 13:if(b.versionManagementServiceUrl){e.next=15;break}return e.abrupt("continue",17);case 15:x=new we({url:b.versionManagementServiceUrl}),v.push(new pe({versionManagementService:x,versionableItems:k,usePersistentReadSessions:r}));case 17:e.next=8;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(6),h.e(e.t0);case 24:return e.prev=24,h.f(),e.finish(24);case 27:return e.abrupt("return",v);case 28:case"end":return e.stop()}}),e,null,[[6,21,24,27]])}))),_e.apply(this,arguments)}var Se=new Map;function Ve(e){return Ee.apply(this,arguments)}function Ee(){return Ee=(0,o.Z)((0,a.Z)().mark((function e(t){var r,n,i=arguments;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>1&&void 0!==i[1]&&i[1],e.next=3,Ze(t.map,r);case 3:return n=e.sent,e.abrupt("return",(0,le.s1)(Se,t,(function(){return t.addHandles((0,ce.kB)((function(){Se.delete(t),n.forEach((function(e){return e.destroy()}))}))),n.forEach((function(e){return e.load().catch((function(e){m.Z.getLogger("esri.versionManagement.VersioningState").error("Failed to load Versioning State",e)}))})),n})));case 5:case"end":return e.stop()}}),e)}))),Ee.apply(this,arguments)}var Ie=["featureServerUrl","versionIdentifier"],Le=function(e){(0,l.Z)(r,e);var t=(0,d.Z)(r);function r(e){var n;return(0,u.Z)(this,r),(n=t.call(this,e))._portalLookup=new Map,n._updatingHandlesLoad=new x.R,n._updatingHandlesExecute=new x.R,n.advancedEditingUserTypeExtensionLookup=new Map,n.executionError=void 0,n.featureServiceLookup=new Map,n.loadError=void 0,n.serverVersionLookup=new Map,n.serviceNameLookup=new Map,n.userLookup=new Map,n.versionIdentifierLookup=new Map,n.versionInfoLookup=new Map,n.versionManagementServiceLookup=new Map,n.versioningStateLookup=new Map,n.view=null,n.versioningStates=null,n}return(0,c.Z)(r,[{key:"initialize",value:function(){var e=this;this._viewChangeHandle(),this.addHandles([(0,g.watch)((function(){return e.view}),(function(){e._resetAllLookupProperties(),e._viewChangeHandle()})),(0,g.watch)((function(){return e.versioningStates}),(function(){e._resetVersioningLookupProperties(),e._setVersioningStatesLookups()}))])}},{key:"destroy",value:function(){this._updatingHandlesLoad.destroy(),this._updatingHandlesExecute.destroy()}},{key:"state",get:function(){return this._updatingHandlesLoad.updating?"loading":this.loadError?"disabled":this._updatingHandlesExecute.updating?"executing":this.executionError?"failed":"ready"}},{key:"alterVersion",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._updatingHandlesExecute.addPromise(this._alterVersionInternal(t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"changeVersion",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,r,n){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._updatingHandlesExecute.addPromise(this._changeVersionInternal(t,r,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"createVersion",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._updatingHandlesExecute.addPromise(this._createVersionInternal(t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteVersion",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,r,n){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._updatingHandlesExecute.addPromise(this._deleteVersionInternal(t,r,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"getVersionInfos",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._updatingHandlesExecute.addPromise(this._getVersionInfosInternal(t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_alterVersionInternal",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var r,n,i,o,u,c=this;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("disabled"!==this.state){e.next=2;break}throw this._logError("version-management-view-model:load-error",this.loadError),new h.Z("version-management-view-model:load-error",this.loadError);case 2:if(this._setExecutionError(),r=this.versioningStateLookup.get(t.featureServerUrl)){e.next=6;break}throw this._logError("version-management-view-model:execution-error","no-versioning-state-found"),new h.Z("version-management-view-model:execution-error",this.executionError);case 6:if(this.serverVersionLookup.has(t.featureServerUrl)&&!(this.serverVersionLookup.get(t.featureServerUrl)<=11.1)){e.next=8;break}throw this._logError("version-management-view-model:execution-error","no-valid-enterprise-version"),new h.Z("version-management-view-model:execution-error",this.executionError);case 8:if(this.advancedEditingUserTypeExtensionLookup.get(t.featureServerUrl)){e.next=10;break}throw this._logError("version-management-view-model:execution-error","no-advanced-editing-user-type-extension"),new h.Z("version-management-view-model:execution-error",this.executionError);case 10:return n=t.featureServerUrl,i=t.versionIdentifier,o=(0,s.Z)(t,Ie),e.next=15,r.alterVersion(i,o).catch((function(e){throw c._logExecutionError(e),e}));case 15:return u=e.sent,e.next=18,this.getVersionInfos(n);case 18:return e.abrupt("return",u);case 19:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_changeVersionInternal",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,r,n){var i,s,o=this;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("disabled"!==this.state){e.next=2;break}throw this._logError("version-management-view-model:load-error",this.loadError),new h.Z("version-management-view-model:load-error",this.loadError);case 2:if(this._setExecutionError(),i=this.versioningStateLookup.get(t)){e.next=6;break}throw this._logError("version-management-view-model:execution-error","no-versioning-state-found"),new h.Z("version-management-view-model:execution-error",this.executionError);case 6:return s={name:r,guid:n},e.next=9,i.changeVersion(s).catch((function(e){throw o._logExecutionError(e),e}));case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"_updateVersionableItems",value:function(e){var t=this;this._updatingHandlesLoad.addPromise((0,o.Z)((0,a.Z)().mark((function r(){return(0,a.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:be(e.added).forEach((function(e){var r=e.featureServiceUrl,n=t.versioningStateLookup.get(r);n&&(n.versionableItems.find((function(t){return t.versionableItem===e.versionableItem}))||n.versionableItems.add(e))})),be(e.removed).forEach((function(e){var r=e.featureServiceUrl,n=t.versioningStateLookup.get(r);if(n){var i=n.versionableItems.find((function(t){return t.versionableItem===e.versionableItem}));i&&n.versionableItems.remove(i)}else t._logError("version-management-view-model:execution-error","no-version-management-service-found")}));case 2:case"end":return r.stop()}}),r)})))())}},{key:"_createVersionInternal",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var r,n,i,s,o,u,c,l,d,p,v,f,m,g,y,k,b=this;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("disabled"!==this.state){e.next=2;break}throw this._logError("version-management-view-model:load-error",this.loadError),new h.Z("version-management-view-model:load-error",this.loadError);case 2:if(this._setExecutionError(),u=t.featureServerUrl,c=this.versioningStateLookup.get(u)){e.next=6;break}throw this._logError("version-management-view-model:execution-error","no-versioning-state-found"),new h.Z("version-management-view-model:execution-error",this.executionError);case 6:if(l=this.advancedEditingUserTypeExtensionLookup.get(t.featureServerUrl),d=this.userLookup.get(u).toUpperCase(),(p=this._isEmptyString(t.ownerName)?d:null===(r=t.ownerName)||void 0===r?void 0:r.trim().toUpperCase())===d){e.next=12;break}if(!(this.serverVersionLookup.get(u)<=11.1)){e.next=10;break}throw this._logError("version-management-view-model:execution-error","versioning-api-error"),new h.Z("version-management-view-model:execution-error",this.executionError);case 10:if(l){e.next=12;break}throw this._logError("version-management-view-model:execution-error","no-advanced-editing-user-type-extension"),new h.Z("version-management-view-model:execution-error",this.executionError);case 12:return e.next=14,null===(n=this.versioningStateLookup.get(u))||void 0===n?void 0:n.getVersionInfos();case 14:if(v=e.sent,!("SDE"===(null===p||void 0===p?void 0:p.toUpperCase())&&"DEFAULT"===t.versionName.toUpperCase()||null!==(i=v)&&void 0!==i&&i.find((function(e){return e.versionIdentifier.name.toUpperCase()===(p+"."+t.versionName).toUpperCase()||e.versionIdentifier.name.toUpperCase()===(d+"."+t.versionName).toUpperCase()})))){e.next=17;break}throw this._logError("version-management-view-model:execution-error","no-valid-version-name"),new h.Z("version-management-view-model:execution-error",this.executionError);case 17:return e.next=19,c.versionManagementService.createVersion({versionName:t.versionName,access:p!==d?"public":t.access,description:t.description}).catch((function(e){throw b._logExecutionError(e),e}));case 19:if(f=e.sent,p===d){e.next=27;break}return m=f.versionIdentifier,g=m.guid,y=m.name,k={featureServerUrl:u,versionIdentifier:{guid:g,name:y},access:t.access,ownerName:p},e.next=24,this.alterVersion(k);case 24:if(e.t0=e.sent,e.t0){e.next=27;break}this.deleteVersion(u,d+"."+t.versionName,f.versionIdentifier.guid);case 27:return e.next=29,this.getVersionInfos(u);case 29:return e.next=31,null===(s=this.versioningStateLookup.get(u))||void 0===s?void 0:s.getVersionInfos();case 31:return v=e.sent,e.abrupt("return",null===(o=v)||void 0===o?void 0:o.find((function(e){return e.versionIdentifier.guid===f.versionIdentifier.guid})));case 33:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_deleteVersionInternal",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,r,n){var i,s,o=this;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("disabled"!==this.state){e.next=2;break}throw this._logError("version-management-view-model:load-error",this.loadError),new h.Z("version-management-view-model:load-error",this.loadError);case 2:if(this._setExecutionError(),i=this.versioningStateLookup.get(t)){e.next=6;break}throw this._logError("version-management-view-model:execution-error","no-versioning-state-found"),new h.Z("version-management-view-model:execution-error",this.executionError);case 6:if(!(this.serverVersionLookup.get(t)<=11.1)){e.next=8;break}throw this._logError("version-management-view-model:execution-error","versioning-api-error"),new h.Z("version-management-view-model:execution-error",this.executionError);case 8:if(this.advancedEditingUserTypeExtensionLookup.get(t)){e.next=10;break}throw this._logError("version-management-view-model:execution-error","no-advanced-editing-user-type-extension"),new h.Z("version-management-view-model:execution-error",this.executionError);case 10:return s={name:r,guid:n},e.next=13,i.deleteVersion(s).catch((function(e){throw o._logExecutionError(e),new h.Z("version-management-view-model:execution-error",o.executionError)}));case 13:return e.abrupt("return",e.sent);case 14:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"_getVersionInfosInternal",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var r,n,i,s,o,u,c,l=this;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("disabled"!==this.state){e.next=2;break}throw this._logError("version-management-view-model:load-error",this.loadError),new h.Z("version-management-view-model:load-error",this.loadError);case 2:if(this._setExecutionError(),s=null===(r=this.featureServiceLookup.get(t))||void 0===r?void 0:r.featureService){e.next=6;break}throw this._logError("version-management-view-model:execution-error","no-feature-service-found"),new h.Z("version-management-view-model:execution-error",this.executionError);case 6:if(e.t0=s.loaded,e.t0){e.next=10;break}return e.next=10,s.load().catch((function(e){throw l._logExecutionError(e),e}));case 10:if(o=s.url,this.serverVersionLookup.set(o,null!==(n=null===(i=s.sourceJSON)||void 0===i?void 0:i.currentVersion)&&void 0!==n?n:0),this.serverVersionLookup.get(o)<=11.1&&this.advancedEditingUserTypeExtensionLookup.set(o,!1),u=this.userLookup.get(t),!this._portalLookup.get(t)||!u){e.next=22;break}return e.t1=this.advancedEditingUserTypeExtensionLookup,e.t2=o,e.next=18,(0,_.Q)(this._portalLookup.get(t),u,"advediting");case 18:e.t3=e.sent,e.t1.set.call(e.t1,e.t2,e.t3),e.next=23;break;case 22:this.advancedEditingUserTypeExtensionLookup.set(o,!1);case 23:if(c=this.versioningStateLookup.get(t)){e.next=26;break}throw this._logError("version-management-view-model:execution-error","no-versioning-state-found"),new h.Z("version-management-view-model:execution-error",this.executionError);case 26:if(e.t4=c.loaded,e.t4){e.next=30;break}return e.next=30,c.load().catch((function(e){throw l._logExecutionError(e),e}));case 30:return e.next=32,c.getVersionInfos(!0).catch((function(e){throw l._logExecutionError(e),e}));case 32:return e.abrupt("return",e.sent);case 33:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isEmptyString",value:function(e){return!e||0===e.trim().length}},{key:"_logError",value:function(e,t){switch(m.Z.getLogger(this).error(new h.Z(e,t)),e){case"version-management-view-model:load-error":this._setLoadError(t);break;case"version-management-view-model:execution-error":this._setExecutionError(t)}}},{key:"_logExecutionError",value:function(e){this._logError("version-management-view-model:execution-error",e.message)}},{key:"_viewChangeHandle",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){var t=this;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._updatingHandlesLoad.addPromise((0,o.Z)((0,a.Z)().mark((function e(){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._setLoadError(),t.view){e.next=2;break}return e.abrupt("return",void t._setLoadError("no-view-property"));case 2:if(!t.view||"2d"===t.view.type){e.next=4;break}return e.abrupt("return",void t._logError("version-management-view-model:load-error","sceneView-not-supported"));case 4:return t.removeHandles("map-change-handle"),t.addHandles([(0,g.watch)((function(){var e;return null===(e=t.view)||void 0===e?void 0:e.map}),(function(){t._resetAllLookupProperties(),t._mapChangeHandle(t.versioningStates)}))],"map-change-handle"),e.next=7,t._getVersioningStates();case 7:return r=e.sent,e.next=10,t._mapChangeHandle(r);case 10:case"end":return e.stop()}}),e)})))());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_mapChangeHandle",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var r=this;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._updatingHandlesLoad.addPromise((0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r._setLoadError(),r.removeHandles("map-layers-tables-change-handle"),r.addHandles([(0,g.on)((function(){var e;return null===(e=r.view)||void 0===e?void 0:e.map.allLayers}),"change",(function(e){(e.added.some((function(e){return"feature"===e.type}))||e.removed.some((function(e){return"feature"===e.type}))||e.added.some((function(e){return"subtype-group"===e.type}))||e.removed.some((function(e){return"subtype-group"===e.type})))&&(r._resetServiceRelatedLookupProperties(),r._propertiesChangeInternal(r.versioningStates),r._updateVersionableItems(e))})),(0,g.on)((function(){var e;return null===(e=r.view)||void 0===e?void 0:e.map.allTables}),"change",(function(e){(e.added.some((function(e){return"feature"===e.type}))||e.removed.some((function(e){return"feature"===e.type}))||e.added.some((function(e){return"subtype-group"===e.type}))||e.removed.some((function(e){return"subtype-group"===e.type})))&&(r._resetServiceRelatedLookupProperties(),r._propertiesChangeInternal(r.versioningStates),r._updateVersionableItems(e))}))],"map-layers-tables-change-handle"),e.next=5,r._propertiesChangeInternal(t);case 5:case"end":return e.stop()}}),e)})))());case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_propertiesChangeInternal",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var r=this;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._updatingHandlesLoad.addPromise((0,o.Z)((0,a.Z)().mark((function e(){var s,o,u,c,l,d,p,v,f,h,g,k,b;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=function(e){return"feature"===e.type},o=r.view.map,u=o.allLayers,c=o.allTables,r._setLoadError(),r.featureServiceLookup=oe([].concat((0,i.Z)(u.filter(s)),(0,i.Z)(c.filter(s)))),!r.featureServiceLookup.size){e.next=44;break}r._updateFeatureServiceLookup(t),r.serviceNameLookup=new Map,l=(0,n.Z)(r.featureServiceLookup.values()),e.prev=4,l.s();case 6:if((d=l.n()).done){e.next=29;break}if(p=d.value,v=p.featureService,f=p.featureService.url,r.serviceNameLookup.has(f)){e.next=27;break}if(e.t0=v.loaded,e.t0){e.next=14;break}return e.next=14,v.load().catch((function(e){m.Z.getLogger(r).error(e)}));case 14:if(v.versionManagementServiceUrl){e.next=17;break}return r.featureServiceLookup.delete(f),e.abrupt("continue",27);case 17:return e.next=19,(0,w.oP)(f);case 19:return g=e.sent,k=new Z.Z({authMode:"immediate",url:g}),e.next=23,k.load().catch((function(e){m.Z.getLogger(r).error(e)}));case 23:if(b=null===(h=k.user)||void 0===h?void 0:h.username,v.loaded&&k.loaded&&b){e.next=26;break}return e.abrupt("continue",27);case 26:r.serviceNameLookup.set((0,y.Qj)(f),f.split("/").at(-2)),r.userLookup.set(f,b),r._portalLookup.set(f,k);case 27:e.next=6;break;case 29:e.next=34;break;case 31:e.prev=31,e.t1=e.catch(4),l.e(e.t1);case 34:return e.prev=34,l.f(),e.finish(34);case 37:return r.removeHandles("versioning-states-change-handle"),t.forEach((function(e){return r._handleVersioningStateLookupUpdate(e)})),e.next=41,r._updateVersioningStates(t);case 41:r.versioningStates=t,e.next=45;break;case 44:r._logError("version-management-view-model:load-error","no-feature-services");case 45:case"end":return e.stop()}}),e,null,[[4,31,34,37]])})))());case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateFeatureServiceLookup",value:function(e){var t,r=(0,n.Z)(e);try{for(r.s();!(t=r.n()).done;){var i=t.value,s=i.featureServiceUrl;if(!this.featureServiceLookup.has(s)){var a=new ie({url:s}),o=i.versionableItems.toArray().flatMap((function(e){return"network"===e.type?null:e.versionableItem}));this.featureServiceLookup.set(s,{featureService:a,layers:o})}}}catch(u){r.e(u)}finally{r.f()}}},{key:"_updateVersioningStates",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var r,i,s,o=this;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=(0,n.Z)(this.featureServiceLookup.values()),e.prev=1,s=(0,a.Z)().mark((function e(){var r,n,s,u;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=i.value,(n=r.featureService).versionManagementServiceUrl){e.next=4;break}return e.abrupt("return","continue");case 4:return!t.find((function(e){return e.featureServiceUrl===n.url}))&&n.versionManagementServiceUrl&&(s=new f.Z(be(r.layers)),u=new pe({versionManagementService:new we({url:n.versionManagementServiceUrl}),versionableItems:s}),t.add(u),o._handleVersioningStateLookupUpdate(u)),e.next=7,o.getVersionInfos(n.url);case 7:case"end":return e.stop()}}),e)})),r.s();case 4:if((i=r.n()).done){e.next=11;break}return e.delegateYield(s(),"t0",6);case 6:if("continue"!==e.t0){e.next=9;break}return e.abrupt("continue",9);case 9:e.next=4;break;case 11:e.next=16;break;case 13:e.prev=13,e.t1=e.catch(1),r.e(e.t1);case 16:return e.prev=16,r.f(),e.finish(16);case 19:case"end":return e.stop()}}),e,this,[[1,13,16,19]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_getVersioningStates",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.versioningStates||!this.versioningStates.length){e.next=4;break}e.t0=this.versioningStates,e.next=12;break;case 4:if(!this.view){e.next=10;break}return e.next=7,Ve(this.view,!1);case 7:e.t1=e.sent,e.next=11;break;case 10:e.t1=(this._logError("version-management-view-model:load-error","no-view-property"),new f.Z);case 11:e.t0=e.t1;case 12:return e.abrupt("return",e.t0);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_handleVersioningStateLookupUpdate",value:function(e){var t;this.versioningStateLookup.set(e.featureServiceUrl,e),this._addHandlesToVersioningState(e),this.versionIdentifierLookup.set(e.featureServiceUrl,null===(t=e.currentVersionInfo)||void 0===t?void 0:t.versionIdentifier),this.versionManagementServiceLookup.set(e.featureServiceUrl,e.versionManagementService)}},{key:"_setVersioningStatesLookups",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){var t=this;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._updatingHandlesLoad.addPromise((0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.versioningStates,!e.t0){e.next=7;break}return t.removeHandles("versioning-states-change-handle"),t._updateFeatureServiceLookup(t.versioningStates),t.versioningStates.forEach((function(e){return t._handleVersioningStateLookupUpdate(e)})),e.next=7,t._updateVersioningStates(t.versioningStates);case 7:case"end":return e.stop()}}),e)})))());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_addHandlesToVersioningState",value:function(e){var t=this;this.addHandles([(0,g.watch)((function(){return e.versionInfos}),(function(){t.versionInfoLookup.set(e.featureServiceUrl,e.versionInfos)})),(0,g.watch)((function(){var t;return null===(t=e.currentVersionInfo)||void 0===t?void 0:t.versionIdentifier}),(function(){var r;t.versionIdentifierLookup.set(e.featureServiceUrl,null===(r=e.currentVersionInfo)||void 0===r?void 0:r.versionIdentifier)}))],"versioning-states-change-handle")}},{key:"_resetVersioningLookupProperties",value:function(){this.versionIdentifierLookup=new Map,this.versionInfoLookup=new Map,this.versionManagementServiceLookup=new Map,this.versioningStateLookup=new Map}},{key:"_resetAllLookupProperties",value:function(){this._portalLookup=new Map,this.advancedEditingUserTypeExtensionLookup=new Map,this.serverVersionLookup=new Map,this.userLookup=new Map,this.versioningStates=new f.Z,this._resetVersioningLookupProperties(),this._resetServiceRelatedLookupProperties()}},{key:"_resetServiceRelatedLookupProperties",value:function(){this.featureServiceLookup=new Map,this.serviceNameLookup=new Map}},{key:"_setExecutionError",value:function(e){this._set("executionError",e)}},{key:"_setLoadError",value:function(e){this._set("loadError",e)}}]),r}(v.default);(0,p._)([(0,k.Cb)()],Le.prototype,"_portalLookup",void 0),(0,p._)([(0,k.Cb)()],Le.prototype,"advancedEditingUserTypeExtensionLookup",void 0),(0,p._)([(0,k.Cb)({readOnly:!0})],Le.prototype,"executionError",void 0),(0,p._)([(0,k.Cb)()],Le.prototype,"featureServiceLookup",void 0),(0,p._)([(0,k.Cb)({readOnly:!0})],Le.prototype,"loadError",void 0),(0,p._)([(0,k.Cb)()],Le.prototype,"serverVersionLookup",void 0),(0,p._)([(0,k.Cb)()],Le.prototype,"serviceNameLookup",void 0),(0,p._)([(0,k.Cb)({readOnly:!0})],Le.prototype,"state",null),(0,p._)([(0,k.Cb)()],Le.prototype,"userLookup",void 0),(0,p._)([(0,k.Cb)()],Le.prototype,"versionIdentifierLookup",void 0),(0,p._)([(0,k.Cb)()],Le.prototype,"versionInfoLookup",void 0),(0,p._)([(0,k.Cb)()],Le.prototype,"versionManagementServiceLookup",void 0),(0,p._)([(0,k.Cb)()],Le.prototype,"versioningStateLookup",void 0),(0,p._)([(0,k.Cb)()],Le.prototype,"view",void 0),(0,p._)([(0,k.Cb)()],Le.prototype,"versioningStates",void 0);var Ce=Le=(0,p._)([(0,b.j)("esri.widgets.VersionManagement.VersionManagementViewModel")],Le)}}]);
//# sourceMappingURL=66027.0a38a2c8.chunk.js.map