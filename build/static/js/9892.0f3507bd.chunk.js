"use strict";(self.webpackChunkreact_training=self.webpackChunkreact_training||[]).push([[9892],{99894:function(e,t,a){function r(){return new Float32Array(4)}function i(e){var t=new Float32Array(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function n(e,t,a,r){var i=new Float32Array(4);return i[0]=e,i[1]=t,i[2]=a,i[3]=r,i}function l(){return r()}function o(){return n(1,1,1,1)}function s(){return n(1,0,0,0)}function u(){return n(0,1,0,0)}function f(){return n(0,0,1,0)}function c(){return n(0,0,0,1)}a.d(t,{al:function(){return n},d9:function(){return i}});var d=l(),v=o(),y=s(),p=u(),g=f(),_=c();Object.freeze(Object.defineProperty({__proto__:null,ONES:v,UNIT_W:_,UNIT_X:y,UNIT_Y:p,UNIT_Z:g,ZEROS:d,clone:i,create:r,createView:function(e,t){return new Float32Array(e,t,4)},fromValues:n,ones:o,unitW:c,unitX:s,unitY:u,unitZ:f,zeros:l},Symbol.toStringTag,{value:"Module"}))},13200:function(e,t,a){a.d(t,{k3:function(){return l},s5:function(){return n}});Math.PI;var r=1/Math.LN2;function i(e,t){return(e%=t)>=0?e:e+t}function n(e){return i(.7111111111111111*e,256)}function l(e){return Math.log(e)*r}},3886:function(e,t,a){a.d(t,{Z:function(){return l}});var r=a(37762),i=a(15671),n=a(43144),l=function(){function e(){(0,i.Z)(this,e),this.name=this.constructor.name||"UnnamedBrush",this.brushEffect=null}return(0,n.Z)(e,[{key:"prepareState",value:function(e,t){}},{key:"draw",value:function(e,t,a){}},{key:"drawMany",value:function(e,t,a){var i,n=(0,r.Z)(t);try{for(n.s();!(i=n.n()).done;){var l=i.value;l.visible&&this.draw(e,l,a)}}catch(o){n.e(o)}finally{n.f()}}}]),e}()},17538:function(e,t,a){a.d(t,{J:function(){return g}});var r=a(37762),i=a(15671),n=a(43144),l=a(60136),o=a(29388),s=a(16889),u=a(8768),f=a(99894),c=a(94109),d=a(3886),v=a(44070),y=a(8548),p=a(45412),g=function(e){(0,l.Z)(a,e);var t=(0,o.Z)(a);function a(){var e;return(0,i.Z)(this,a),(e=t.apply(this,arguments))._color=(0,f.al)(1,0,0,1),e._patternMatrix=(0,u.Ue)(),e._programOptions={id:!1,pattern:!1},e}return(0,n.Z)(a,[{key:"dispose",value:function(){this._vao&&(this._vao.dispose(),this._vao=null)}},{key:"drawMany",value:function(e,t){var a=e.context,i=e.painter,n=e.requestRender,l=e.allowDelayedRender;this._loadWGLResources(e);var o,u,f=e.displayLevel,d=e.styleLayer,v=d.backgroundMaterial,p=i.vectorTilesMaterialManager,g=d.getPaintValue("background-color",f),_=d.getPaintValue("background-opacity",f),m=d.getPaintValue("background-pattern",f),M=void 0!==m,h=1|window.devicePixelRatio,U=e.spriteMosaic,E=h>c.Vo?2:1,P=this._programOptions;P.pattern=M;var w=p.getMaterialProgram(a,v,P);if(!l||null==n||w.compiled){if(a.bindVAO(this._vao),a.useProgram(w),M){var D=U.getMosaicItemPosition(m,!0);if(null!=D){var I=D.tl,x=D.br,S=D.page;o=x[0]-I[0],u=x[1]-I[1];var R=U.getPageSize(S);null!=R&&(U.bind(a,y.cw.LINEAR,S,c.dD),w.setUniform4f("u_tlbr",I[0],I[1],x[0],x[1]),w.setUniform2fv("u_mosaicSize",R),w.setUniform1i("u_texture",c.dD))}w.setUniform1f("u_opacity",_)}else{var T=g[3]*_;this._color[0]=T*g[0],this._color[1]=T*g[1],this._color[2]=T*g[2],this._color[3]=T,w.setUniform4fv("u_color",this._color)}w.setUniform1f("u_depth",d.z||0);var V,L=(0,r.Z)(t);try{for(L.s();!(V=L.n()).done;){var A=V.value;if(w.setUniform1f("u_coord_range",A.rangeX),w.setUniformMatrix3fv("u_dvsMat3",A.transforms.displayViewScreenMat3),M){var N=Math.max(Math.pow(2,Math.round(f)-A.key.level),1),k=E*A.width*N,Z=k/(0,s.fp)(o),O=k/(0,s.fp)(u);this._patternMatrix[0]=Z,this._patternMatrix[4]=O,w.setUniformMatrix3fv("u_pattern_matrix",this._patternMatrix)}a.setStencilFunction(y.wb.EQUAL,0,255),a.drawArrays(y.MX.TRIANGLE_STRIP,0,4)}}catch(b){L.e(b)}finally{L.f()}}else n()}},{key:"_loadWGLResources",value:function(e){if(!this._vao){var t=e.context,a=e.styleLayer.backgroundMaterial,r=new Int8Array([0,0,1,0,0,1,1,1]),i=v.f.createVertex(t,y.l1.STATIC_DRAW,r),n=new p.U(t,a.getAttributeLocations(),a.getLayoutInfo(),{geometry:i});this._vao=n}}}]),a}(d.Z)},5562:function(e,t,a){a.d(t,{j:function(){return c}});var r=a(37762),i=a(15671),n=a(43144),l=a(60136),o=a(29388),s=a(21391),u=a(3886),f=a(8548),c=function(e){(0,l.Z)(a,e);var t=(0,o.Z)(a);function a(){var e;return(0,i.Z)(this,a),(e=t.apply(this,arguments))._programOptions={id:!1},e}return(0,n.Z)(a,[{key:"dispose",value:function(){}},{key:"drawMany",value:function(e,t){var a=e.context,i=e.displayLevel,n=e.requiredLevel,l=e.state,o=e.painter,u=e.spriteMosaic,c=e.styleLayerUID,d=e.requestRender,v=e.allowDelayedRender;if(t.some((function(e){var t,a;return null!==(t=null===(a=e.layerData.get(c))||void 0===a?void 0:a.circleIndexCount)&&void 0!==t&&t}))){var y=e.styleLayer,p=y.circleMaterial,g=o.vectorTilesMaterialManager,_=y.getPaintValue("circle-translate",i),m=y.getPaintValue("circle-translate-anchor",i),M=this._programOptions,h=g.getMaterialProgram(a,p,M);if(!v||null==d||h.compiled){a.useProgram(h),h.setUniformMatrix3fv("u_displayMat3",m===s.fD.VIEWPORT?l.displayMat3:l.displayViewMat3),h.setUniform2fv("u_circleTranslation",_),h.setUniform1f("u_depth",y.z),h.setUniform1f("u_antialiasingWidth",1.2);var U,E=-1,P=(0,r.Z)(t);try{for(P.s();!(U=P.n()).done;){var w=U.value;if(w.layerData.has(c)){w.key.level!==E&&(E=w.key.level,p.setDataUniforms(h,i,y,E,u));var D=w.layerData.get(c);if(D.circleIndexCount){D.prepareForRendering(a);var I=D.vao;null!=I&&(a.bindVAO(I),h.setUniformMatrix3fv("u_dvsMat3",w.transforms.displayViewScreenMat3),n!==w.key.level?a.setStencilFunction(f.wb.EQUAL,w.stencilRef,255):a.setStencilFunction(f.wb.GREATER,255,255),a.drawElements(f.MX.TRIANGLES,D.circleIndexCount,f.g.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*D.circleIndexStart),w.triangleCount+=D.circleIndexCount/3)}}}}catch(x){P.e(x)}finally{P.f()}}else d()}}}]),a}(u.Z)},54410:function(e,t,a){a.d(t,{R:function(){return y}});var r=a(29439),i=a(37762),n=a(15671),l=a(43144),o=a(60136),s=a(29388),u=a(21391),f=a(94109),c=a(3886),d=a(8548),v=1/65536,y=function(e){(0,o.Z)(a,e);var t=(0,s.Z)(a);function a(){var e;return(0,n.Z)(this,a),(e=t.apply(this,arguments))._fillProgramOptions={id:!1,pattern:!1},e._outlineProgramOptions={id:!1},e}return(0,l.Z)(a,[{key:"dispose",value:function(){}},{key:"drawMany",value:function(e,t){var a,r=e.displayLevel,n=e.renderPass,l=e.spriteMosaic,o=e.styleLayerUID,s=!1,u=(0,i.Z)(t);try{for(u.s();!(a=u.n()).done;){var f=a.value;if(f.layerData.has(o)){var c=f.layerData.get(o);if(c.fillIndexCount>0||c.outlineIndexCount>0){s=!0;break}}}}catch(x){u.e(x)}finally{u.f()}if(s){var d,v=e.styleLayer,y=v.getPaintProperty("fill-pattern"),p=void 0!==y,g=p&&y.isDataDriven;if(p&&!g){var _=y.getValue(r);d=l.getMosaicItemPosition(_,!0)}var m=!p&&v.getPaintValue("fill-antialias",r),M=!0,h=1;if(!p){var U=v.getPaintProperty("fill-color"),E=v.getPaintProperty("fill-opacity");if((null===U||void 0===U||!U.isDataDriven)&&(null===E||void 0===E||!E.isDataDriven)){var P=v.getPaintValue("fill-color",r);(h=v.getPaintValue("fill-opacity",r)*P[3])>=1&&(M=!1)}}if(!M||"opaque"!==n){var w=v.getPaintValue("fill-translate",r),D=v.getPaintValue("fill-translate-anchor",r);(M||"translucent"!==n)&&this._drawFill(e,o,v,t,w,D,p,d,g);var I=!v.hasDataDrivenOutlineColor&&v.outlineUsesFillColor&&h<1;m&&"opaque"!==n&&!I&&this._drawOutline(e,o,v,t,w,D)}}}},{key:"_drawFill",value:function(e,t,a,n,l,o,s,c,y){if(!s||y||null!=c){var p=e.context,g=e.displayLevel,_=e.state,m=e.painter,M=e.pixelRatio,h=e.spriteMosaic,U=e.requestRender,E=e.allowDelayedRender,P=a.fillMaterial,w=m.vectorTilesMaterialManager,D=M>f.Vo?2:1,I=this._fillProgramOptions;I.pattern=s;var x=w.getMaterialProgram(p,P,I);if(!E||null==U||x.compiled){if(p.useProgram(x),null!=c){var S=c.page,R=h.getPageSize(S);null!=R&&(h.bind(p,d.cw.LINEAR,S,f.dD),x.setUniform2fv("u_mosaicSize",R),x.setUniform1i("u_texture",f.dD))}x.setUniformMatrix3fv("u_displayMat3",o===u.fD.VIEWPORT?_.displayMat3:_.displayViewMat3),x.setUniform2fv("u_fillTranslation",l),x.setUniform1f("u_depth",a.z+v);var T,V=-1,L=(0,i.Z)(n);try{for(L.s();!(T=L.n()).done;){var A=T.value;if(A.layerData.has(t)){A.key.level!==V&&(V=A.key.level,P.setDataUniforms(x,g,a,V,h));var N=A.layerData.get(t);if(N.fillIndexCount){N.prepareForRendering(p);var k=N.fillVAO;if(null!=k){if(p.bindVAO(k),x.setUniformMatrix3fv("u_dvsMat3",A.transforms.displayViewScreenMat3),p.setStencilFunction(d.wb.EQUAL,A.stencilRef,255),s){var Z=Math.max(Math.pow(2,Math.round(g)-A.key.level),1),O=A.rangeX/(D*A.width*Z);x.setUniform1f("u_patternFactor",O)}if(y){var b=N.patternMap;if(!b)continue;var F,z=(0,i.Z)(b);try{for(z.s();!(F=z.n()).done;){var C=(0,r.Z)(F.value,2),G=C[0],W=C[1],X=h.getPageSize(G);null!=X&&(h.bind(p,d.cw.LINEAR,G,f.dD),x.setUniform2fv("u_mosaicSize",X),x.setUniform1i("u_texture",f.dD),p.drawElements(d.MX.TRIANGLES,W[1],d.g.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*W[0]))}}catch(Y){z.e(Y)}finally{z.f()}}else p.drawElements(d.MX.TRIANGLES,N.fillIndexCount,d.g.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*N.fillIndexStart);A.triangleCount+=N.fillIndexCount/3}}}}}catch(Y){L.e(Y)}finally{L.f()}}else U()}}},{key:"_drawOutline",value:function(e,t,a,r,n,l){var o=e.context,s=e.displayLevel,f=e.state,c=e.painter,y=e.pixelRatio,p=e.spriteMosaic,g=e.requestRender,_=e.allowDelayedRender,m=a.outlineMaterial,M=c.vectorTilesMaterialManager,h=.75/y,U=this._outlineProgramOptions,E=M.getMaterialProgram(o,m,U);if(!_||null==g||E.compiled){o.useProgram(E),E.setUniformMatrix3fv("u_displayMat3",l===u.fD.VIEWPORT?f.displayMat3:f.displayViewMat3),E.setUniform2fv("u_fillTranslation",n),E.setUniform1f("u_depth",a.z+v),E.setUniform1f("u_outline_width",h);var P,w=-1,D=(0,i.Z)(r);try{for(D.s();!(P=D.n()).done;){var I=P.value;if(I.layerData.has(t)){I.key.level!==w&&(w=I.key.level,m.setDataUniforms(E,s,a,w,p));var x=I.layerData.get(t);if(x.prepareForRendering(o),x.outlineIndexCount){var S=x.outlineVAO;null!=S&&(o.bindVAO(S),E.setUniformMatrix3fv("u_dvsMat3",I.transforms.displayViewScreenMat3),o.setStencilFunction(d.wb.EQUAL,I.stencilRef,255),o.drawElements(d.MX.TRIANGLES,x.outlineIndexCount,d.g.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*x.outlineIndexStart),I.triangleCount+=x.outlineIndexCount/3)}}}}catch(R){D.e(R)}finally{D.f()}}else g()}}]),a}(c.Z)},93509:function(e,t,a){a.d(t,{z:function(){return v}});var r=a(29439),i=a(37762),n=a(15671),l=a(43144),o=a(60136),s=a(29388),u=a(21391),f=a(94109),c=a(3886),d=a(8548),v=function(e){(0,o.Z)(a,e);var t=(0,s.Z)(a);function a(){var e;return(0,n.Z)(this,a),(e=t.apply(this,arguments))._programOptions={id:!1,pattern:!1,sdf:!1},e}return(0,l.Z)(a,[{key:"dispose",value:function(){}},{key:"drawMany",value:function(e,t){var a=e.context,n=e.displayLevel,l=e.state,o=e.painter,s=e.pixelRatio,c=e.spriteMosaic,v=e.styleLayerUID,y=e.requestRender,p=e.allowDelayedRender;if(t.some((function(e){var t,a;return null!==(t=null===(a=e.layerData.get(v))||void 0===a?void 0:a.lineIndexCount)&&void 0!==t&&t}))){var g,_,m=e.styleLayer,M=m.lineMaterial,h=o.vectorTilesMaterialManager,U=m.getPaintValue("line-translate",n),E=m.getPaintValue("line-translate-anchor",n),P=m.getPaintProperty("line-pattern"),w=void 0!==P,D=w&&P.isDataDriven;if(w&&!D){var I=P.getValue(n);g=c.getMosaicItemPosition(I)}var x=!1;if(!w){var S=m.getPaintProperty("line-dasharray");if(x=(_=void 0!==S)&&S.isDataDriven,_&&!x){var R=S.getValue(n),T=m.getDashKey(R,m.getLayoutValue("line-cap",n));g=c.getMosaicItemPosition(T)}}var V=1/s,L=this._programOptions;L.pattern=w,L.sdf=_;var A=h.getMaterialProgram(a,M,L);if(!p||null==y||A.compiled){if(a.useProgram(A),A.setUniformMatrix3fv("u_displayViewMat3",l.displayViewMat3),A.setUniformMatrix3fv("u_displayMat3",E===u.fD.VIEWPORT?l.displayMat3:l.displayViewMat3),A.setUniform2fv("u_lineTranslation",U),A.setUniform1f("u_depth",m.z),A.setUniform1f("u_antialiasing",V),g&&null!=g){var N=g.page,k=c.getPageSize(N);null!=k&&(c.bind(a,d.cw.LINEAR,N,f.dD),A.setUniform2fv("u_mosaicSize",k),A.setUniform1i("u_texture",f.dD))}var Z,O=-1,b=(0,i.Z)(t);try{for(b.s();!(Z=b.n()).done;){var F=Z.value;if(F.layerData.has(v)){F.key.level!==O&&(O=F.key.level,M.setDataUniforms(A,n,m,O,c));var z=Math.pow(2,n-O)/s;A.setUniform1f("u_zoomFactor",z);var C=F.layerData.get(v);if(C.lineIndexCount){C.prepareForRendering(a);var G=C.vao;if(null!=G){if(a.bindVAO(G),A.setUniformMatrix3fv("u_dvsMat3",F.transforms.displayViewScreenMat3),a.setStencilFunction(d.wb.EQUAL,F.stencilRef,255),D||x){var W=C.patternMap;if(!W)continue;var X,Y=(0,i.Z)(W);try{for(Y.s();!(X=Y.n()).done;){var B=(0,r.Z)(X.value,2),q=B[0],Q=B[1],j=c.getPageSize(q);null!=j&&(c.bind(a,d.cw.LINEAR,q,f.dD),A.setUniform2fv("u_mosaicSize",j),A.setUniform1i("u_texture",f.dD),a.drawElements(d.MX.TRIANGLES,Q[1],d.g.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*Q[0]))}}catch(H){Y.e(H)}finally{Y.f()}}else a.drawElements(d.MX.TRIANGLES,C.lineIndexCount,d.g.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*C.lineIndexStart);F.triangleCount+=C.lineIndexCount/3}}}}}catch(H){b.e(H)}finally{b.f()}}else y()}}}]),a}(c.Z)},11640:function(e,t,a){a.d(t,{e:function(){return g}});var r=a(29439),i=a(37762),n=a(15671),l=a(43144),o=a(60136),s=a(29388),u=a(30932),f=a(46618),c=a(21391),d=a(94109),v=a(13200),y=a(3886),p=a(8548),g=function(e){(0,o.Z)(a,e);var t=(0,s.Z)(a);function a(){var e;return(0,n.Z)(this,a),(e=t.apply(this,arguments))._iconProgramOptions={id:!1,sdf:!1},e._sdfProgramOptions={id:!1},e._spritesTextureSize=(0,u.Ue)(),e}return(0,l.Z)(a,[{key:"dispose",value:function(){}},{key:"drawMany",value:function(e,t){var a=e.styleLayer;this._drawIcons(e,a,t),this._drawText(e,a,t)}},{key:"_drawIcons",value:function(e,t,a){var n,l,o=e.context,s=e.displayLevel,u=e.painter,y=e.spriteMosaic,p=e.state,g=e.styleLayerUID,_=e.requestRender,m=e.allowDelayedRender,M=t.iconMaterial,h=u.vectorTilesMaterialManager,U=!1,E=(0,i.Z)(a);try{for(E.s();!(l=E.n()).done;){var P=l.value;if(P.layerData.has(g)&&(n=P.layerData.get(g)).iconPerPageElementsMap.size>0){U=!0;break}}}catch(G){E.e(G)}finally{E.f()}if(U){var w=t.getPaintValue("icon-translate",s),D=t.getPaintValue("icon-translate-anchor",s),I=t.getLayoutValue("icon-rotation-alignment",s);I===c.aF.AUTO&&(I=t.getLayoutValue("symbol-placement",s)===c.R.POINT?c.aF.VIEWPORT:c.aF.MAP);var x=I===c.aF.MAP,S=t.getLayoutValue("icon-keep-upright",s)&&x,R=n.isIconSDF,T=this._iconProgramOptions;T.sdf=R;var V=h.getMaterialProgram(o,M,T);if(!m||null==_||V.compiled){o.useProgram(V),V.setUniformMatrix3fv("u_displayViewMat3",I===c.aF.MAP?p.displayViewMat3:p.displayMat3),V.setUniformMatrix3fv("u_displayMat3",D===c.fD.VIEWPORT?p.displayMat3:p.displayViewMat3),V.setUniform2fv("u_iconTranslation",w),V.setUniform1f("u_depth",t.z),V.setUniform1f("u_mapRotation",(0,v.s5)(p.rotation)),V.setUniform1f("u_keepUpright",S?1:0),V.setUniform1f("u_level",10*s),V.setUniform1i("u_texture",d.dD),V.setUniform1f("u_fadeDuration",f.v7/1e3);var L,A=-1,N=(0,i.Z)(a);try{for(N.s();!(L=N.n()).done;){var k=L.value;if(k.layerData.has(g)&&(k.key.level!==A&&(A=k.key.level,M.setDataUniforms(V,s,t,A,y)),0!==(n=k.layerData.get(g)).iconPerPageElementsMap.size)){n.prepareForRendering(o),n.updateOpacityInfo();var Z=n.iconVAO;if(null!=Z){o.bindVAO(Z),V.setUniformMatrix3fv("u_dvsMat3",k.transforms.displayViewScreenMat3),V.setUniform1f("u_time",(performance.now()-n.lastOpacityUpdate)/1e3);var O,b=(0,i.Z)(n.iconPerPageElementsMap);try{for(b.s();!(O=b.n()).done;){var F=(0,r.Z)(O.value,2),z=F[0],C=F[1];this._renderIconRange(e,V,C,z,k)}}catch(G){b.e(G)}finally{b.f()}}}}}catch(G){N.e(G)}finally{N.f()}}else _()}}},{key:"_renderIconRange",value:function(e,t,a,r,i){var n=e.context,l=e.spriteMosaic;this._spritesTextureSize[0]=l.getWidth(r)/4,this._spritesTextureSize[1]=l.getHeight(r)/4,t.setUniform2fv("u_mosaicSize",this._spritesTextureSize),l.bind(n,p.cw.LINEAR,r,d.dD),this._setStencilState(e,i),n.drawElements(p.MX.TRIANGLES,a[1],p.g.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*a[0]),i.triangleCount+=a[1]/3}},{key:"_drawText",value:function(e,t,a){var r,n,l=this,o=e.context,s=e.displayLevel,y=e.glyphMosaic,p=e.painter,g=e.pixelRatio,_=e.spriteMosaic,m=e.state,M=e.styleLayerUID,h=e.requestRender,U=e.allowDelayedRender,E=t.textMaterial,P=p.vectorTilesMaterialManager,w=!1,D=(0,i.Z)(a);try{for(D.s();!(n=D.n()).done;){var I=n.value;if(I.layerData.has(M)&&(r=I.layerData.get(M)).glyphPerPageElementsMap.size>0){w=!0;break}}}catch(Y){D.e(Y)}finally{D.f()}if(w){var x=t.getPaintProperty("text-opacity");if(!x||x.isDataDriven||0!==x.getValue(s)){var S=t.getPaintProperty("text-color"),R=!S||S.isDataDriven||S.getValue(s)[3]>0,T=t.getPaintProperty("text-halo-width"),V=t.getPaintProperty("text-halo-color"),L=(!T||T.isDataDriven||T.getValue(s)>0)&&(!V||V.isDataDriven||V.getValue(s)[3]>0);if(R||L){var A=t.getLayoutValue("text-rotation-alignment",s);A===c.aF.AUTO&&(A=t.getLayoutValue("symbol-placement",s)===c.R.POINT?c.aF.VIEWPORT:c.aF.MAP);var N=A===c.aF.MAP,k=t.getLayoutValue("text-keep-upright",s)&&N,Z=.8*3/g;this._glyphTextureSize||(this._glyphTextureSize=(0,u.al)(y.width/4,y.height/4));var O=t.getPaintValue("text-translate",s),b=t.getPaintValue("text-translate-anchor",s),F=this._sdfProgramOptions,z=P.getMaterialProgram(o,E,F);if(!U||null==h||z.compiled){o.useProgram(z),z.setUniformMatrix3fv("u_displayViewMat3",A===c.aF.MAP?m.displayViewMat3:m.displayMat3),z.setUniformMatrix3fv("u_displayMat3",b===c.fD.VIEWPORT?m.displayMat3:m.displayViewMat3),z.setUniform2fv("u_textTranslation",O),z.setUniform1f("u_depth",t.z+152587890625e-16),z.setUniform2fv("u_mosaicSize",this._glyphTextureSize),z.setUniform1f("u_mapRotation",(0,v.s5)(m.rotation)),z.setUniform1f("u_keepUpright",k?1:0),z.setUniform1f("u_level",10*s),z.setUniform1i("u_texture",d._E),z.setUniform1f("u_antialiasingWidth",Z),z.setUniform1f("u_fadeDuration",f.v7/1e3);var C,G=-1,W=(0,i.Z)(a);try{var X=function(){var a=C.value;if(!a.layerData.has(M))return"continue";if(a.key.level!==G&&(G=a.key.level,E.setDataUniforms(z,s,t,G,_)),0===(r=a.layerData.get(M)).glyphPerPageElementsMap.size)return"continue";r.prepareForRendering(o),r.updateOpacityInfo();var i=r.textVAO;if(null==i)return"continue";o.bindVAO(i),z.setUniformMatrix3fv("u_dvsMat3",a.transforms.displayViewScreenMat3),l._setStencilState(e,a);var n=(performance.now()-r.lastOpacityUpdate)/1e3;z.setUniform1f("u_time",n),r.glyphPerPageElementsMap.forEach((function(e,t){l._renderGlyphRange(o,e,t,y,z,L,R,a)}))};for(W.s();!(C=W.n()).done;)X()}catch(Y){W.e(Y)}finally{W.f()}}else h()}}}}},{key:"_renderGlyphRange",value:function(e,t,a,r,i,n,l,o){r.bind(e,p.cw.LINEAR,a,d._E),n&&(i.setUniform1f("u_halo",1),e.drawElements(p.MX.TRIANGLES,t[1],p.g.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*t[0]),o.triangleCount+=t[1]/3),l&&(i.setUniform1f("u_halo",0),e.drawElements(p.MX.TRIANGLES,t[1],p.g.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*t[0]),o.triangleCount+=t[1]/3)}},{key:"_setStencilState",value:function(e,t){var a=e.context,r=e.is3D,i=e.stencilSymbols;if(a.setStencilTestEnabled(!0),i)return a.setStencilWriteMask(255),void a.setStencilFunction(p.wb.ALWAYS,t.stencilRef,255);a.setStencilWriteMask(0),r?a.setStencilFunction(p.wb.EQUAL,t.stencilRef,255):a.setStencilFunction(p.wb.GREATER,255,255)}}]),a}(y.Z)},56648:function(e,t,a){a.d(t,{B:function(){return n}});var r=a(15671),i=a(43144),n=function(){function e(t){(0,r.Z)(this,e),this._readFile=t}return(0,i.Z)(e,[{key:"resolveIncludes",value:function(e){return this._resolve(e)}},{key:"_resolve",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Map;if(a.has(e))return a.get(e);var r=this._read(e);if(!r)throw new Error("cannot find shader file ".concat(e));for(var i=/^[^\S\n]*#include\s+<(\S+)>[^\S\n]?/gm,n=i.exec(r),l=[];null!=n;)l.push({path:n[1],start:n.index,length:n[0].length}),n=i.exec(r);var o=0,s="";return l.forEach((function(e){s+=r.slice(o,e.start),s+=a.has(e.path)?"":t._resolve(e.path,a),o=e.start+e.length})),s+=r.slice(o),a.set(e,s),s}},{key:"_read",value:function(e){return this._readFile(e)}}]),e}()}}]);
//# sourceMappingURL=9892.0f3507bd.chunk.js.map