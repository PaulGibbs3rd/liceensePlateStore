"use strict";(self.webpackChunkreact_training=self.webpackChunkreact_training||[]).push([[1869],{1869:function(e,i,t){t.r(i),t.d(i,{arcgis_version_management_service_item:function(){return v},arcgis_version_management_version_properties:function(){return u}});var s=t(4942),n=t(1413),a=t(29439),r=t(37762),c=t(74165),o=t(15861),l=t(15671),d=t(43144),h=t(62042),v=function(){function e(i){var t=this;(0,l.Z)(this,e),(0,h.r)(this,i),this.arcgisFlowItemBack=(0,h.c)(this,"arcgisFlowItemBack",7),this.arcgisFlowItemClose=(0,h.c)(this,"arcgisFlowItemClose",7),this.arcgisGetVersions=(0,h.c)(this,"arcgisGetVersions",7),this.arcgisManageVersion=(0,h.c)(this,"arcgisManageVersion",7),this.arcgisNewVersion=(0,h.c)(this,"arcgisNewVersion",7),this._versionListEventListeners=new Map,this._arcgisGetVersions=function(e){t.arcgisGetVersions.emit(e.detail)},this._arcgisManageVersion=function(e){t.arcgisManageVersion.emit(e.detail)},this._arcgisNewVersion=function(e){t.arcgisNewVersion.emit(e.detail)},this.serviceItemElementProps=void 0}return(0,d.Z)(e,[{key:"disconnectedCallback",value:function(){this._versionList&&this._removeVersionListEventListeners(this._versionList)}},{key:"render",value:function(){var e,i,t=this,s=this.serviceItemElementProps,n=s.allowEditing,a=s.closable,r=s.currentUser,l=s.executionError,d=s.currentVersionIdentifier,v=s.flowElement,u=s.hasAdvEditingUte,f=s.heading,m=s.isVersioningApiAvailable,g=s.pageSize,b=s.serviceName,p=s.serviceUrl,_=s.state,V=s.strings,k=s.versionInfos,w=this._versionList,C=(0,h.h)("calcite-combobox",{key:"e80f4924dbd00f2a29140b91ee53369dff826d39",clearDisabled:!0,label:b,maxItems:5,overlayPositioning:"fixed",selectionMode:"single-persist",onCalciteComboboxChange:function(e){var i=e.target,s=k.find((function(e){return e.versionIdentifier.guid===i.value}));t.arcgisManageVersion.emit({actionType:"changeVersion",serviceUrl:p,versionInfo:s})}},k?k.map((function(e){return(0,h.h)("calcite-combobox-item",{selected:d.guid===e.versionIdentifier.guid&&d.name===e.versionIdentifier.name,textLabel:e.versionIdentifier.name,value:e.versionIdentifier.guid})})):void 0);return n&&(e=(0,h.h)("calcite-action",{key:"fc6779c583aa81cf1f12584bda094b7d0d25dd06",id:"actionManageVersions_".concat(b),icon:"list",scale:"s",slot:"control",text:"",onClick:function(){var e=(0,o.Z)((0,c.Z)().mark((function e(){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(w=document.createElement("arcgis-version-management-version-list")).versionListElementProps={closable:a,currentUser:r,currentVersionIdentifier:d,executionError:l,hasAdvEditingUte:u,heading:f,isVersioningApiAvailable:m,pageSize:g,serviceName:b,serviceUrl:p,state:_,strings:V,versionInfos:k},w.addEventListener("calciteFlowItemBack",(function(e){e.preventDefault(),t.arcgisFlowItemBack.emit()})),w.addEventListener("calciteFlowItemClose",(function(){t.arcgisFlowItemClose.emit()})),t._addVersionListEventListeners(w),v.append(w);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),i=(0,h.h)("calcite-tooltip",{key:"5d9377d1bec63e4c3d310a3941c0ad693e81f48b",overlayPositioning:"fixed",referenceElement:"actionManageVersions_".concat(b)},(0,h.h)("span",{key:"ce2e9fc08127e075738fb2cc59fa5387343eda50"},V.headers.manageVersions))),(0,h.h)("calcite-block",{key:"357a2c3e708f61505efa5e1a8f82a7c8ab4ac8dd",open:!0,heading:b},C,e,i)}},{key:"_addVersionListEventListeners",value:function(e){e.addEventListener("arcgisGetVersions",this._arcgisGetVersions),this._versionListEventListeners.set("arcgisGetVersions",this._arcgisGetVersions),e.addEventListener("arcgisManageVersion",this._arcgisManageVersion),this._versionListEventListeners.set("arcgisManageVersion",this._arcgisManageVersion),e.addEventListener("arcgisNewVersion",this._arcgisNewVersion),this._versionListEventListeners.set("arcgisNewVersion",this._arcgisNewVersion)}},{key:"_removeVersionListEventListeners",value:function(e){var i,t=(0,r.Z)(this._versionListEventListeners);try{for(t.s();!(i=t.n()).done;){var s=(0,a.Z)(i.value,2),n=s[0],c=s[1];e.removeEventListener(n,c)}}catch(o){t.e(o)}finally{t.f()}}},{key:"el",get:function(){return(0,h.g)(this)}}]),e}(),u=function(){function e(i){var t=this;(0,l.Z)(this,e),(0,h.r)(this,i),this.arcgisAlterVersion=(0,h.c)(this,"arcgisAlterVersion",7),this.arcgisCreateVersion=(0,h.c)(this,"arcgisCreateVersion",7),this.arcgisFlowItemBack=(0,h.c)(this,"arcgisFlowItemBack",7),this.arcgisFlowItemClose=(0,h.c)(this,"arcgisFlowItemClose",7),this._switchToVersion=!0,this._handleCancel=function(){t.arcgisFlowItemBack.emit()},this._handleChange=function(e){var i,a=t._mode,r=t._ownerName,c=t._versionName,o=t.versionPropertiesElementProps,l=o.currentUser,d=o.serviceUrl,h=o.versionInfo,v=t._alterVersionParameters,u=t._createVersionParameters;switch("create"===a&&(u||(u={access:"public",description:"",featureServerUrl:d,ownerName:l.toUpperCase(),versionName:""})),"edit"===a&&(v||(v={featureServerUrl:d,versionIdentifier:h.versionIdentifier,ownerName:r,versionName:c,access:h.access,description:h.description})),e.type){case"calciteChipGroupSelect":var f=e.target.label,m=e.target.selectedItems[0].value;"create"===a&&(u=(0,n.Z)((0,n.Z)({},u),(0,s.Z)({},f,m))),"edit"===a&&(v=(0,n.Z)((0,n.Z)({},v),(0,s.Z)({},f,m)));break;case"calciteInputTextInput":var g=e.target.name,b=e.target.value;"create"===a&&(u=(0,n.Z)((0,n.Z)({},u),(0,s.Z)({},g,b))),"edit"===a&&(v=(0,n.Z)((0,n.Z)({},v),(0,s.Z)({},g,b)));break;case"calciteTextAreaInput":var p=e.target.name,_=e.target.value;"create"===a&&(u=(0,n.Z)((0,n.Z)({},u),(0,s.Z)({},p,_))),"edit"===a&&(v=(0,n.Z)((0,n.Z)({},v),(0,s.Z)({},p,_)))}"create"===a&&("public"!==u.access&&l.toUpperCase()!==(null===(i=u.ownerName)||void 0===i?void 0:i.toUpperCase())?(t.switchToVersionCheckboxElement.checked=!1,t.switchToVersionCheckboxElement.disabled=!0):t.switchToVersionCheckboxElement.disabled=!1,t._createVersionParameters=u);"edit"===a&&(t._alterVersionParameters=v)},this._handleClose=function(){t.arcgisFlowItemClose.emit()},this._handleSave=function(){var e=t._alterVersionParameters,i=t._createVersionParameters,s=t._mode,n=t._switchToVersion;"create"===s&&t.arcgisCreateVersion.emit({createVersionParameters:i,switchToVersion:n}),"edit"===s&&t.arcgisAlterVersion.emit({alterVersionParameters:e})},this._handleSwitchToVersionChange=function(e){t._switchToVersion=e.target.checked},this.versionPropertiesElementProps=void 0}return(0,d.Z)(e,[{key:"componentWillLoad",value:function(){var e=(0,o.Z)((0,c.Z)().mark((function e(){var i;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(i=this.versionPropertiesElementProps.versionInfo)?(this._mode="edit",this._fullVersionName=i.versionIdentifier.name,this._ownerName=this._fullVersionName.substring(0,this._fullVersionName.lastIndexOf(".")).toUpperCase(),this._versionName=this._fullVersionName.substring(this._fullVersionName.lastIndexOf(".")+1)):this._mode="create";case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidRender",value:function(){var e;"create"===this._mode&&(null===(e=this.versionNameInputElement)||void 0===e||e.setFocus())}},{key:"render",value:function(){var e=this,i=this.versionPropertiesElementProps,t=i.closable,s=i.currentUser,n=i.hasAdvEditingUte,a=i.state,r=i.strings,c=i.versionInfo,o=this._mode,l=this._ownerName,d=this._versionName,v=(0,h.h)("div",{key:"135d4141e995bbf31123c16d900a1e274575aafb"},(0,h.h)("calcite-button",{key:"44a78143d595fe108d1d312da6ba1bf340be77b8",appearance:"outline",slot:"footer",width:"half",onClick:this._handleCancel},r.actions.cancelSave),(0,h.h)("calcite-button",{key:"30b32b985a16d7841a444e638309b914cac1b406",slot:"footer",width:"half",onClick:this._handleSave},r.actions.saveVersion)),u=(0,h.h)("calcite-label",{key:"fb496917361a78043ca219cdb438f30414dd5acd"},r.input.versionAccess,(0,h.h)("calcite-chip-group",{key:"f81920bbcdc1bd18187b8107d039cd2a61b8e4dc",label:"access",onCalciteChipGroupSelect:this._handleChange,selectionMode:"single-persist"},(0,h.h)("calcite-chip",{key:"9e55255b9114d1d239a17248ccd200fd097af5f2",selected:"edit"===o&&"public"===c.access||"create"===o,value:"public"},r.accessLevels.public),(0,h.h)("calcite-chip",{key:"03374352be5cfff98f80bb915fe75be762078258",selected:"edit"===o&&"protected"===c.access,value:"protected"},r.accessLevels.protected),(0,h.h)("calcite-chip",{key:"452499aeb04c69b51101b774d91c0479753cf43b",selected:"edit"===o&&"private"===c.access,value:"private"},r.accessLevels.private))),f=(0,h.h)("calcite-label",{key:"11c04b89dfd8d85b68d322d552ece3bf5cc35567"},r.input.versionDescription,(0,h.h)("calcite-text-area",{key:"469568f5e6f902076338f1e7a99332d724ff54da",name:"description",onCalciteTextAreaInput:this._handleChange,resize:"vertical",value:"edit"===o?c.description:""})),m=(0,h.h)("calcite-label",{key:"14b2dabc65093f576b8ebca98cec745210353c0b"},r.input.versionName,(0,h.h)("calcite-input-text",{key:"04c0d47377ea59031fa88c38b996203b0d7c9175",ref:function(i){e.versionNameInputElement=i},name:"versionName",onCalciteInputTextInput:this._handleChange,maxLength:62,value:"edit"===o?d:""})),g=(0,h.h)("calcite-label",{key:"b1773ab9fd4183852b522f465a6ba5347934c358"},r.input.versionOwner,(0,h.h)("calcite-input-text",{key:"e62366ef2e7c143e9f63be1ae177a6b1a3639bce",name:"ownerName",onCalciteInputTextInput:this._handleChange,disabled:!n,value:"edit"===o?l:s.toUpperCase()})),b="create"===o?(0,h.h)("calcite-label",{layout:"inline"},(0,h.h)("calcite-checkbox",{ref:function(i){e.switchToVersionCheckboxElement=i},checked:!0,name:"switchToVersion",onCalciteCheckboxChange:this._handleSwitchToVersionChange}),r.actions.switchToVersion):void 0;return(0,h.h)("calcite-flow-item",{key:"79059091093b6a5c977b43c2530db56f86c98133",closable:t,description:c?c.versionIdentifier.name:"",heading:c?r.actions.editVersion:r.actions.newVersion,onCalciteFlowItemClose:this._handleClose},(0,h.h)("calcite-panel",{key:"0eecfe1d97445089ef205e3c4dc569a23edc863c",loading:"executing"===a},(0,h.h)("calcite-block",{key:"ae61afab2e9d622c41d4b2e0f833057ceba024e0",heading:"",open:!0},m,f,u,g,b,v)))}},{key:"el",get:function(){return(0,h.g)(this)}}]),e}()}}]);
//# sourceMappingURL=1869.fb60514e.chunk.js.map