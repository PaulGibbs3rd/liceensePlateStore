"use strict";(self.webpackChunkreact_training=self.webpackChunkreact_training||[]).push([[46639],{14916:function(e,t,n){function i(e,t,n,i){var r=null,o=1e3;"number"==typeof t?(o=t,i=n):(r=null!==t&&void 0!==t?t:null,o=n);var a,l=0,s=function(){l=0,e.apply(i,a)},u=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r&&r.apply(i,t),a=t,o?l||(l=setTimeout(s,o)):s()};return u.remove=function(){l&&(clearTimeout(l),l=0)},u.forceUpdate=function(){l&&(clearTimeout(l),s())},u.hasPendingUpdates=function(){return!!l},u}n.d(t,{P:function(){return i}})},91340:function(e,t,n){n.d(t,{it:function(){return L},wK:function(){return S},aX:function(){return T},or:function(){return N},hR:function(){return Z}});var i=n(74165),r=n(29439),o=n(15861),a=n(37762),l=n(42265),s=n(10064),u=n(32718),d=n(80885),c=n(29909),p=n(76335),f=n(92975),v=n(81753),h=n(1413),y=(n(59486),n(76200)),m=n(77981),g=n(23084);function _(e,t,n,i){return b.apply(this,arguments)}function b(){return b=(0,o.Z)((0,i.Z)().mark((function e(t,n,r,o){var a,l,s,u,d,c,p,v;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(0,g.en)(t),l=n[0].spatialReference,s=(0,h.Z)((0,h.Z)({},o),{},{responseType:"json",query:(0,h.Z)((0,h.Z)({},a.query),{},{f:"json",sr:(0,f.B9)(l),target:JSON.stringify({geometryType:(0,m.Ji)(n[0]),geometries:n}),cutter:JSON.stringify(r)})}),e.next=5,(0,y.Z)(a.path+"/cut",s);case 5:return u=e.sent,d=u.data,c=d.cutIndexes,p=d.geometries,v=void 0===p?[]:p,e.abrupt("return",{cutIndexes:c,geometries:v.map((function(e){var t=(0,m.im)(e);return t.spatialReference=l,t}))});case 11:case"end":return e.stop()}}),e)}))),b.apply(this,arguments)}var w=n(35995),I=n(35594);function x(e,t,n){return M.apply(this,arguments)}function M(){return M=(0,o.Z)((0,i.Z)().mark((function e(t,n,r){var o,a,l,s,u,d;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o="string"==typeof t?(0,w.mN)(t):t,a=n[0].spatialReference,l=(0,m.Ji)(n[0]),s=(0,h.Z)((0,h.Z)({},r),{},{query:(0,h.Z)((0,h.Z)({},o.query),{},{f:"json",sr:(0,f.B9)(a),geometries:JSON.stringify((0,I.F)(n))})}),e.next=6,(0,y.Z)(o.path+"/simplify",s);case 6:return u=e.sent,d=u.data,e.abrupt("return",(0,I.o)(d.geometries,l,a));case 9:case"end":return e.stop()}}),e)}))),M.apply(this,arguments)}var k=function(){return u.Z.getLogger("esri.geometry.support.normalizeUtils")};function C(e){for(var t=[],n=0,i=0,r=0;r<e.length;r++){for(var o=e[r],a=null,l=0;l<o.length;l++)a=o[l],t.push(a),0===l?i=n=a[0]:(n=Math.min(n,a[0]),i=Math.max(i,a[0]));a&&t.push([(n+i)/2,0])}return t}function Z(e,t){if(!(e instanceof c.Z||e instanceof d.Z)){var n="straightLineDensify: the input geometry is neither polyline nor polygon";throw k().error(n),new s.Z(n)}var i,r=(0,p.x3)(e),o=[],l=(0,a.Z)(r);try{for(l.s();!(i=l.n()).done;){var u=i.value,f=[];o.push(f),f.push([u[0][0],u[0][1]]);for(var v=0;v<u.length-1;v++){var h=u[v][0],y=u[v][1],m=u[v+1][0],g=u[v+1][1],_=Math.sqrt((m-h)*(m-h)+(g-y)*(g-y)),b=(g-y)/_,w=(m-h)/_,I=_/t;if(I>1){for(var x=1;x<=I-1;x++){var M=x*t,C=w*M+h,Z=b*M+y;f.push([C,Z])}var A=(_+Math.floor(I-1)*t)/2,F=w*A+h,E=b*A+y;f.push([F,E])}f.push([m,g])}}}catch(T){l.e(T)}finally{l.f()}return function(e){return"polygon"===e.type}(e)?new d.Z({rings:o,spatialReference:e.spatialReference}):new c.Z({paths:o,spatialReference:e.spatialReference})}function A(e,t,n){if(t){var i=Z(e,1e6);e=(0,v.Sx)(i,!0)}return n&&(e=(0,p.Sy)(e,n)),e}function F(e,t,n){if(Array.isArray(e)){var i=e[0];if(i>t){var r=(0,p.XZ)(i,t);e[0]=i+r*(-2*t)}else if(i<n){var o=(0,p.XZ)(i,n);e[0]=i+o*(-2*n)}}else{var a=e.x;if(a>t){var l=(0,p.XZ)(a,t);e=e.clone().offset(l*(-2*t),0)}else if(a<n){var s=(0,p.XZ)(a,n);e=e.clone().offset(s*(-2*n),0)}}return e}function E(e,t){for(var n=-1,i=function(i){for(var r=t.cutIndexes[i],o=t.geometries[i],l=(0,p.x3)(o),s=function(e){var t=l[e];t.some((function(n){if(n[0]<180)return!0;for(var i=0,r=0;r<t.length;r++){var a=t[r][0];i=a>i?a:i}i=Number(i.toFixed(9));for(var l=-360*(0,p.XZ)(i,180),s=0;s<t.length;s++){var u=o.getPoint(e,s);o.setPoint(e,s,u.clone().offset(l,0))}return!0}))},u=0;u<l.length;u++)s(u);if(r===n){if(function(e){return"polygon"===e[0].type}(e)){var d,c=(0,a.Z)((0,p.x3)(o));try{for(c.s();!(d=c.n()).done;){var f=d.value;e[r]=e[r].addRing(f)}}catch(m){c.e(m)}finally{c.f()}}else if(function(e){return"polyline"===e[0].type}(e)){var v,h=(0,a.Z)((0,p.x3)(o));try{for(h.s();!(v=h.n()).done;){var y=v.value;e[r]=e[r].addPath(y)}}catch(m){h.e(m)}finally{h.f()}}}else n=r,e[r]=o},r=0;r<t.cutIndexes.length;r++)i(r);return e}function T(e,t,n){return R.apply(this,arguments)}function R(){return R=(0,o.Z)((0,i.Z)().mark((function e(t,n,r){var o,s,u,h,y,m,g,b,w,I,M,C,Z,R,S,L,N,P,O,V,j,q,H,W,D,X,z,B,J,U,$,Y,Q,G,K,ee,te,ne,ie,re,oe,ae,le;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Array.isArray(t)){e.next=2;break}return e.abrupt("return",T([t],n));case 2:n&&"string"!=typeof n&&k().warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead"),s="string"==typeof n?n:null!==(o=null===n||void 0===n?void 0:n.url)&&void 0!==o?o:l.Z.geometryServiceUrl,M=0,C=[],Z=[],R=(0,a.Z)(t);try{for(R.s();!(S=R.n()).done;)null!=(L=S.value)?(u||(u=L.spatialReference,h=(0,f.C5)(u),y=u.isWebMercator,b=y?102100:4326,m=p.UZ[b].maxX,g=p.UZ[b].minX,w=p.UZ[b].plus180Line,I=p.UZ[b].minus180Line),h?"mesh"===L.type?Z.push(L):"point"===L.type?Z.push(F(L.clone(),m,g)):"multipoint"===L.type?((N=L.clone()).points=N.points.map((function(e){return F(e,m,g)})),Z.push(N)):"extent"===L.type?(P=L.clone()._normalize(!1,!1,h),Z.push(P.rings?new d.Z(P):P)):L.extent?(O=L.extent,V=(0,p.XZ)(O.xmin,g)*(2*m),j=0===V?L.clone():(0,p.Sy)(L.clone(),V),O.offset(V,0),q=O.xmin,H=O.xmax,q=Number(q.toFixed(9)),H=Number(H.toFixed(9)),O.intersects(w)&&H!==m?(M=H>M?H:M,j=A(j,y),C.push(j),Z.push("cut")):O.intersects(I)&&q!==g?(M=H*(2*m)>M?H*(2*m):M,j=A(j,y,360),C.push(j),Z.push("cut")):Z.push(j)):Z.push(L.clone()):Z.push(L)):Z.push(L)}catch(i){R.e(i)}finally{R.f()}for(W=(0,p.XZ)(M,m),D=-90,X=W,z=new c.Z;W>0;)B=360*W-180,z.addPath([[B,D],[B,-1*D]]),D*=-1,W--;if(!(C.length>0&&X>0)){e.next=29;break}return e.t0=E,e.t1=C,e.next=16,_(s,C,z,r);case 16:for(e.t2=e.sent,J=(0,e.t0)(e.t1,e.t2),U=[],$=[],Y=0;Y<Z.length;Y++)"cut"!==(Q=Z[Y])?$.push(Q):(G=J.shift(),null!=(K=t[Y])&&"polygon"===K.type&&K.rings&&K.rings.length>1&&G.rings.length>=K.rings.length?(U.push(G),$.push("simplify")):$.push(y?(0,v.$)(G):G));if(U.length){e.next=23;break}return e.abrupt("return",$);case 23:return e.next=25,x(s,U,r);case 25:for(ee=e.sent,te=[],ne=0;ne<$.length;ne++)"simplify"!==(ie=$[ne])?te.push(ie):te.push(y?(0,v.$)(ee.shift()):ee.shift());return e.abrupt("return",te);case 29:for(re=[],oe=0;oe<Z.length;oe++)"cut"!==(ae=Z[oe])?re.push(ae):(le=C.shift(),re.push(!0===y?(0,v.$)(le):le));return e.abrupt("return",re);case 32:case"end":return e.stop()}}),e)}))),R.apply(this,arguments)}function S(e){var t;if(!e)return null;var n=e.extent;if(!n)return null;var i=e.spatialReference&&(0,f.C5)(e.spatialReference);if(!i)return n;var o,a=(0,r.Z)(i.valid,2),l=a[0],s=a[1],u=2*s,d=n.width,c=n.xmin,p=n.xmax;if(c=(t=[p,c])[0],p=t[1],"extent"===e.type||0===d||d<=s||d>u||c<l||p>s)return n;switch(e.type){case"polygon":if(!(e.rings.length>1))return n;o=C(e.rings);break;case"polyline":if(!(e.paths.length>1))return n;o=C(e.paths);break;case"multipoint":o=e.points}for(var v=n.clone(),h=0;h<o.length;h++){var y=o[h][0];y<0?(y+=s,p=Math.max(y,p)):(y-=s,c=Math.min(y,c))}return v.xmin=c,v.xmax=p,v.width<d?(v.xmin-=s,v.xmax-=s,v):n}function L(e,t,n){var i=(0,f.C5)(n);if(null==i)return e;var o=(0,r.Z)(i.valid,2),a=o[0],l=o[1],s=2*l,u=0,d=0;t>l?u=Math.ceil(Math.abs(t-l)/s):t<a&&(u=-Math.ceil(Math.abs(t-a)/s)),e>l?d=Math.ceil(Math.abs(e-l)/s):e<a&&(d=-Math.ceil(Math.abs(e-a)/s));var c=e+(u-d)*s,p=c-t;return p>l?c-=s:p<a&&(c+=s),c}function N(e,t){var n=(0,f.C5)(t);if(n){var i=(0,r.Z)(n.valid,2),o=i[0],a=i[1],l=a-o;if(e<o)for(;e<o;)e+=l;if(e>a)for(;e>a;)e-=l}return e}},76335:function(e,t,n){n.d(t,{Sy:function(){return u},UZ:function(){return l},XZ:function(){return s},x3:function(){return d}});var i=n(37762),r=n(29909),o=n(78952),a=n(77981),l={102100:{maxX:20037508.342788905,minX:-20037508.342788905,plus180Line:new r.Z({paths:[[[20037508.342788905,-20037508.342788905],[20037508.342788905,20037508.342788905]]],spatialReference:o.Z.WebMercator}),minus180Line:new r.Z({paths:[[[-20037508.342788905,-20037508.342788905],[-20037508.342788905,20037508.342788905]]],spatialReference:o.Z.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new r.Z({paths:[[[180,-180],[180,180]]],spatialReference:o.Z.WGS84}),minus180Line:new r.Z({paths:[[[-180,-180],[-180,180]]],spatialReference:o.Z.WGS84})}};function s(e,t){return Math.ceil((e-t)/(2*t))}function u(e,t){var n,r=d(e),o=(0,i.Z)(r);try{for(o.s();!(n=o.n()).done;){var a,l=n.value,s=(0,i.Z)(l);try{for(s.s();!(a=s.n()).done;){a.value[0]+=t}}catch(u){s.e(u)}finally{s.f()}}}catch(u){o.e(u)}finally{o.f()}return e}function d(e){return(0,a.oU)(e)?e.rings:e.paths}},3182:function(e,t,n){n.d(t,{S6:function(){return s},u_:function(){return l}});var i=n(1413),r=n(15671),o=n(43144),a=n(80457),l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;(0,r.Z)(this,e),this.geometry=t,this.attributes=n,this.centroid=i,this.objectId=o,this.displayId=0,this.geohashX=0,this.geohashY=0}return(0,o.Z)(e,[{key:"weakClone",value:function(){var t=new e(this.geometry,this.attributes,this.centroid,this.objectId);return t.displayId=this.displayId,t.geohashX=this.geohashX,t.geohashY=this.geohashY,t}},{key:"clone",value:function(){var t,n,r=new e(null===(t=this.geometry)||void 0===t?void 0:t.clone(),(0,i.Z)({},this.attributes),null===(n=this.centroid)||void 0===n?void 0:n.clone(),this.objectId);return r.displayId=this.displayId,r.geohashX=this.geohashX,r.geohashY=this.geohashY,r}}],[{key:"fromJSON",value:function(t,n){var i=t.geometry?a.Z.fromJSON(t.geometry):null,r=t.centroid?a.Z.fromJSON(t.centroid):null,o=t.attributes[n];return new e(i,t.attributes,r,o)}}]),e}();function s(e){var t,n;return!(null===(t=e.geometry)||void 0===t||null===(n=t.coords)||void 0===n||!n.length)}},6908:function(e,t,n){n.d(t,{Z:function(){return o}});var i=n(15671),r=n(43144),o=function(){function e(){(0,i.Z)(this,e),this.objectIdFieldName=null,this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1,this.uniqueIdField=null,this.queryGeometryType=null,this.queryGeometry=null}return(0,r.Z)(e,[{key:"weakClone",value:function(){var t=new e;return t.objectIdFieldName=this.objectIdFieldName,t.globalIdFieldName=this.globalIdFieldName,t.geohashFieldName=this.geohashFieldName,t.geometryProperties=this.geometryProperties,t.geometryType=this.geometryType,t.spatialReference=this.spatialReference,t.hasZ=this.hasZ,t.hasM=this.hasM,t.features=this.features,t.fields=this.fields,t.transform=this.transform,t.exceededTransferLimit=this.exceededTransferLimit,t.uniqueIdField=this.uniqueIdField,t.queryGeometry=this.queryGeometry,t.queryGeometryType=this.queryGeometryType,t}}]),e}()},80457:function(e,t,n){n.d(t,{Z:function(){return s}});var i=n(29439),r=n(37762),o=n(93433),a=n(15671),l=n(43144),s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];(0,a.Z)(this,e),this.lengths=null!==t&&void 0!==t?t:[],this.coords=null!==n&&void 0!==n?n:[],this.hasIndeterminateRingOrder=i}return(0,l.Z)(e,[{key:"isPoint",get:function(){return 0===this.lengths.length}},{key:"maxLength",get:function(){return Math.max.apply(Math,(0,o.Z)(this.lengths))}},{key:"size",get:function(){return this.lengths.reduce((function(e,t){return e+t}))}},{key:"forEachVertex",value:function(e){var t=0;this.lengths.length||e(this.coords[0],this.coords[1]);for(var n=0;n<this.lengths.length;n++){for(var i=this.lengths[n],r=0;r<i;r++)e(this.coords[2*(r+t)],this.coords[2*(r+t)+1]);t+=i}}},{key:"deltaDecode",value:function(){var e,t=this.clone(),n=t.coords,i=t.lengths,o=0,a=(0,r.Z)(i);try{for(a.s();!(e=a.n()).done;){for(var l=e.value,s=1;s<l;s++)n[2*(o+s)]+=n[2*(o+s)-2],n[2*(o+s)+1]+=n[2*(o+s)-1];o+=l}}catch(u){a.e(u)}finally{a.f()}return t}},{key:"clone",value:function(t){if(0===this.lengths.length)return new e([],[this.coords[0],this.coords[1]]);var n=2*(0===this.lengths.length?1:this.lengths.reduce((function(e,t){return e+t}))),i=this.coords.slice(0,n);return t?(t.set(i),new e(this.lengths,t,this.hasIndeterminateRingOrder)):new e(Array.from(this.lengths),Array.from(i),this.hasIndeterminateRingOrder)}}],[{key:"fromJSON",value:function(t){return new e(t.lengths,t.coords,t.hasIndeterminateRingOrder)}},{key:"fromRect",value:function(t){var n=(0,i.Z)(t,4),r=n[0],o=n[1],a=n[2]-r,l=n[3]-o;return new e([5],[r,o,a,0,0,l,-a,0,0,-l])}}]),e}()},22585:function(e,t,n){function i(e){var t={};for(var n in e)if("declaredClass"!==n){var r=e[n];if(null!=r&&"function"!=typeof r)if(Array.isArray(r)){t[n]=[];for(var o=0;o<r.length;o++)t[n][o]=i(r[o])}else"object"==typeof r?r.toJSON&&(t[n]=JSON.stringify(r)):t[n]=r}return t}n.d(t,{A:function(){return i}})},77946:function(e,t,n){n.d(t,{F:function(){return p},e:function(){return d}});var i=n(1413),r=n(74165),o=n(15861),a=n(23084),l=n(5192),s=n(49818),u=n(21149);function d(e,t,n){return c.apply(this,arguments)}function c(){return c=(0,o.Z)((0,r.Z)().mark((function e(t,n,i){var o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p(t,n,i);case 2:return o=e.sent,e.abrupt("return",s.Z.fromJSON(o));case 4:case"end":return e.stop()}}),e)}))),c.apply(this,arguments)}function p(e,t,n){return f.apply(this,arguments)}function f(){return f=(0,o.Z)((0,r.Z)().mark((function e(t,n,o){var s,d,c,p,f;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=(0,a.en)(t),d=(0,i.Z)({},o),c=u.Z.from(n),e.next=5,(0,l.JT)(s,c,c.sourceSpatialReference,d);case 5:return p=e.sent,f=p.data,e.abrupt("return",f);case 8:case"end":return e.stop()}}),e)}))),f.apply(this,arguments)}},5192:function(e,t,n){n.d(t,{Ev:function(){return w},JT:function(){return y},Vn:function(){return k},Vr:function(){return x},hH:function(){return I},n7:function(){return b},qp:function(){return g}});var i=n(1413),r=n(74165),o=n(15861),a=n(76200),l=n(35995),s=n(77981),u=n(91340),d=n(92975),c=n(22585),p=n(27607),f=n(68620),v="Layer does not support extent calculation.";function h(e,t){var n,i=e.geometry,r=e.toJSON();delete r.compactGeometryEnabled,delete r.defaultSpatialReferenceEnabled;var o,a,l,u=r;if(null!=i&&(a=i.spatialReference,l=(0,d.B9)(a),u.geometryType=(0,s.Ji)(i),u.geometry=function(e,t){if(t&&"extent"===e.type)return"".concat(e.xmin,",").concat(e.ymin,",").concat(e.xmax,",").concat(e.ymax);if(t&&"point"===e.type)return"".concat(e.x,",").concat(e.y);var n=e.toJSON();return delete n.spatialReference,JSON.stringify(n)}(i,e.compactGeometryEnabled),u.inSR=l),r.groupByFieldsForStatistics&&(u.groupByFieldsForStatistics=r.groupByFieldsForStatistics.join(",")),r.objectIds&&(u.objectIds=r.objectIds.join(",")),r.orderByFields&&(u.orderByFields=r.orderByFields.join(",")),!r.outFields||!r.returnDistinctValues&&(null!==t&&void 0!==t&&t.returnCountOnly||null!==t&&void 0!==t&&t.returnExtentOnly||null!==t&&void 0!==t&&t.returnIdsOnly)?delete u.outFields:r.outFields.includes("*")?u.outFields="*":u.outFields=r.outFields.join(","),r.outSR?(u.outSR=(0,d.B9)(r.outSR),o=e.outSpatialReference):i&&(r.returnGeometry||r.returnCentroid)&&(u.outSR=u.inSR,o=a),r.returnGeometry&&delete r.returnGeometry,r.outStatistics&&(u.outStatistics=JSON.stringify(r.outStatistics)),r.fullText&&(u.fullText=JSON.stringify(r.fullText)),r.pixelSize&&(u.pixelSize=JSON.stringify(r.pixelSize)),r.quantizationParameters&&(e.defaultSpatialReferenceEnabled&&null!=a&&null!=(null===(n=e.quantizationParameters)||void 0===n?void 0:n.extent)&&a.equals(e.quantizationParameters.extent.spatialReference)&&delete r.quantizationParameters.extent.spatialReference,u.quantizationParameters=JSON.stringify(r.quantizationParameters)),r.parameterValues&&(u.parameterValues=JSON.stringify(r.parameterValues)),r.rangeValues&&(u.rangeValues=JSON.stringify(r.rangeValues)),r.dynamicDataSource&&(u.layer=JSON.stringify({source:r.dynamicDataSource}),delete r.dynamicDataSource),r.timeExtent){var c=r.timeExtent,p=c.start,f=c.end;null==p&&null==f||(u.time=p===f?p:"".concat(null!==p&&void 0!==p?p:"null",",").concat(null!==f&&void 0!==f?f:"null")),delete r.timeExtent}return e.defaultSpatialReferenceEnabled&&null!=a&&null!=o&&a.equals(o)&&(u.defaultSR=u.inSR,delete u.inSR,delete u.outSR),u}function y(e,t,n,i){return m.apply(this,arguments)}function m(){return(m=(0,o.Z)((0,r.Z)().mark((function e(t,n,i,o){var a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n.timeExtent||!n.timeExtent.isEmpty){e.next=4;break}e.t0={data:{features:[]}},e.next=7;break;case 4:return e.next=6,k(t,n,"json",o);case 6:e.t0=e.sent;case 7:return a=e.t0,e.abrupt("return",((0,f.p)(n,i,a.data),a));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e,t,n,i){return _.apply(this,arguments)}function _(){return(_=(0,o.Z)((0,r.Z)().mark((function e(t,n,i,o){var a,l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n.timeExtent||!n.timeExtent.isEmpty){e.next=2;break}return e.abrupt("return",{data:i.createFeatureResult()});case 2:return e.next=4,b(t,n,o);case 4:return a=e.sent,l=a,e.abrupt("return",(l.data=(0,p.C)(a.data,i),l));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(e,t,n){return k(e,t,"pbf",n)}function w(e,t,n){return null!=t.timeExtent&&t.timeExtent.isEmpty?Promise.resolve({data:{objectIds:[]}}):k(e,t,"json",n,{returnIdsOnly:!0})}function I(e,t,n){return null!=t.timeExtent&&t.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):k(e,t,"json",n,{returnIdsOnly:!0,returnCountOnly:!0})}function x(e,t,n){return M.apply(this,arguments)}function M(){return(M=(0,o.Z)((0,r.Z)().mark((function e(t,n,i){var o,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n.timeExtent||!n.timeExtent.isEmpty){e.next=2;break}return e.abrupt("return",{data:{count:0,extent:null}});case 2:return e.next=4,k(t,n,"json",i,{returnExtentOnly:!0,returnCountOnly:!0});case 4:if(o=e.sent,!(a=o.data).hasOwnProperty("extent")){e.next=8;break}return e.abrupt("return",o);case 8:if(!a.features){e.next=10;break}throw new Error(v);case 10:if(!a.hasOwnProperty("count")){e.next=12;break}throw new Error(v);case 12:return e.abrupt("return",o);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e,t,n){return C.apply(this,arguments)}function C(){return C=(0,o.Z)((0,r.Z)().mark((function e(t,n,o){var s,d,p,f,v,y,m,g=arguments;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=g.length>3&&void 0!==g[3]?g[3]:{},d=g.length>4&&void 0!==g[4]?g[4]:{},p="string"==typeof t?(0,l.mN)(t):t,f=n.geometry?[n.geometry]:[],e.next=6,(0,u.aX)(f,null,{signal:s.signal});case 6:return v=e.sent,null!=(y=null===v||void 0===v?void 0:v[0])&&((n=n.clone()).geometry=y),m=(0,c.A)((0,i.Z)((0,i.Z)((0,i.Z)({},p.query),{},{f:o},d),h(n,d))),e.abrupt("return",(0,a.Z)((0,l.v_)(p.path,Z(n,d)?"query3d":"query"),(0,i.Z)((0,i.Z)({},s),{},{responseType:"pbf"===o?"array-buffer":"json",query:(0,i.Z)((0,i.Z)({},m),s.query)})));case 11:case"end":return e.stop()}}),e)}))),C.apply(this,arguments)}function Z(e,t){return null!=e.formatOf3DObjects&&!(t.returnCountOnly||t.returnExtentOnly||t.returnIdsOnly)}},10194:function(e,t,n){n.r(t),n.d(t,{default:function(){return Ce}});var i=n(1413),r=n(15671),o=n(43144),a=n(60136),l=n(29388),s=n(27366),u=(n(59166),n(94172)),d=n(49861),c=n(89125),p=(n(84936),n(93169),n(69912)),f=n(33565),v=(n(32718),n(21993)),h=n(83244),y=n(96919),m=n(80975),g=n(67005),_="esri-feature-element-info",b={base:_,title:"".concat(_,"__title"),description:"".concat(_,"__description")},w=function(e){(0,a.Z)(n,e);var t=(0,l.Z)(n);function n(e,i){var o;return(0,r.Z)(this,n),(o=t.call(this,e,i)).description=null,o.headingLevel=2,o.title=null,o}return(0,o.Z)(n,[{key:"render",value:function(){return(0,g.u)("div",{class:b.base},this._renderTitle(),this._renderDescription())}},{key:"_renderTitle",value:function(){var e=this.title;return e?(0,g.u)(y.X,{class:b.title,innerHTML:e,level:this.headingLevel}):null}},{key:"_renderDescription",value:function(){var e=this.description;return e?(0,g.u)("div",{class:b.description,innerHTML:e,key:"description"}):null}}]),n}(f.Z);(0,s._)([(0,d.Cb)()],w.prototype,"description",void 0),(0,s._)([(0,d.Cb)()],w.prototype,"headingLevel",void 0),(0,s._)([(0,d.Cb)()],w.prototype,"title",void 0);var I=w=(0,s._)([(0,p.j)("esri.widgets.Feature.support.FeatureElementInfo")],w),x="esri-feature-attachments",M=function(e){(0,a.Z)(n,e);var t=(0,l.Z)(n);function n(e,i){var o;return(0,r.Z)(this,n),(o=t.call(this,e,i))._featureElementInfo=null,o.attachmentsWidget=new v.default,o.headingLevel=2,o.viewModel=new h.Z,o}return(0,o.Z)(n,[{key:"initialize",value:function(){var e=this;this._featureElementInfo=new I,this.addHandles([(0,u.watch)((function(){var t,n;return[null===(t=e.viewModel)||void 0===t?void 0:t.description,null===(n=e.viewModel)||void 0===n?void 0:n.title,e.headingLevel]}),(function(){return e._setupFeatureElementInfo()}),u.initial),(0,u.watch)((function(){return e.viewModel}),(function(t){return e.attachmentsWidget.viewModel=t}),u.initial)])}},{key:"destroy",value:function(){var e;this.attachmentsWidget.viewModel=null,this.attachmentsWidget.destroy(),null===(e=this._featureElementInfo)||void 0===e||e.destroy()}},{key:"description",get:function(){return this.viewModel.description},set:function(e){this.viewModel.description=e}},{key:"displayType",get:function(){return this.attachmentsWidget.displayType},set:function(e){this.attachmentsWidget.displayType=e}},{key:"graphic",get:function(){return this.viewModel.graphic},set:function(e){this.viewModel.graphic=e}},{key:"title",get:function(){return this.viewModel.title},set:function(e){this.viewModel.title=e}},{key:"render",value:function(){var e,t=this.attachmentsWidget;return(0,g.u)("div",{class:x},null===(e=this._featureElementInfo)||void 0===e?void 0:e.render(),null===t||void 0===t?void 0:t.render())}},{key:"_setupFeatureElementInfo",value:function(){var e,t=this.description,n=this.title,i=this.headingLevel;null===(e=this._featureElementInfo)||void 0===e||e.set({description:t,title:n,headingLevel:i})}}]),n}(f.Z);(0,s._)([(0,d.Cb)({readOnly:!0})],M.prototype,"attachmentsWidget",void 0),(0,s._)([(0,d.Cb)()],M.prototype,"description",null),(0,s._)([(0,d.Cb)()],M.prototype,"displayType",null),(0,s._)([(0,d.Cb)()],M.prototype,"graphic",null),(0,s._)([(0,d.Cb)()],M.prototype,"headingLevel",void 0),(0,s._)([(0,d.Cb)()],M.prototype,"title",null),(0,s._)([(0,d.Cb)({type:h.Z})],M.prototype,"viewModel",void 0);var k=M=(0,s._)([(0,p.j)("esri.widgets.Feature.FeatureAttachments")],M),C=n(50267),Z=n(45276),A=n(53963),F="esri-feature-content",E={base:F,loaderContainer:"".concat(F,"__loader-container"),loader:"".concat(F,"__loader")},T=function(e){(0,a.Z)(n,e);var t=(0,l.Z)(n);function n(e,i){var o;return(0,r.Z)(this,n),(o=t.call(this,e,i)).viewModel=null,o._addTargetToAnchors=function(e){Array.from(e.querySelectorAll("a")).forEach((function(e){(0,Z.or)(e.href)&&!e.hasAttribute("target")&&e.setAttribute("target","_blank")}))},o}return(0,o.Z)(n,[{key:"creator",get:function(){var e;return null===(e=this.viewModel)||void 0===e?void 0:e.creator},set:function(e){this.viewModel&&(this.viewModel.creator=e)}},{key:"graphic",get:function(){var e;return null===(e=this.viewModel)||void 0===e?void 0:e.graphic},set:function(e){this.viewModel&&(this.viewModel.graphic=e)}},{key:"render",value:function(){var e,t=null===(e=this.viewModel)||void 0===e?void 0:e.state;return(0,g.u)("div",{class:E.base},"loading"===t?this._renderLoading():this._renderCreated())}},{key:"_renderLoading",value:function(){return(0,g.u)("div",{class:E.loaderContainer,key:"loader"},(0,g.u)("div",{class:E.loader}))}},{key:"_renderCreated",value:function(){var e,t=null===(e=this.viewModel)||void 0===e?void 0:e.created;return t?t instanceof HTMLElement?(0,g.u)("div",{afterCreate:this._attachToNode,bind:t,key:t}):(0,A.Qd)(t)?(0,g.u)("div",{key:t},!t.destroyed&&t.render()):(0,g.u)("div",{afterCreate:this._addTargetToAnchors,innerHTML:t,key:t}):null}},{key:"_attachToNode",value:function(e){e.appendChild(this)}}]),n}(f.Z);(0,s._)([(0,d.Cb)()],T.prototype,"creator",null),(0,s._)([(0,d.Cb)()],T.prototype,"graphic",null),(0,s._)([(0,d.Cb)({type:C.Z})],T.prototype,"viewModel",void 0);var R=T=(0,s._)([(0,p.j)("esri.widgets.Feature.FeatureContent")],T),S=n(4942),L=n(86836),N=n(7021),P=n(30333),O=n(80532),V="esri-feature-fields",j={base:V,fieldHeader:"".concat(V,"__field-header"),fieldData:"".concat(V,"__field-data"),fieldDataDate:"".concat(V,"__field-data--date")},q=function(e){(0,a.Z)(n,e);var t=(0,l.Z)(n);function n(e,i){var o;return(0,r.Z)(this,n),(o=t.call(this,e,i))._featureElementInfo=null,o.viewModel=new L.Z,o.messages=null,o.messagesURIUtils=null,o}return(0,o.Z)(n,[{key:"initialize",value:function(){var e=this;this._featureElementInfo=new I,this.addHandles((0,u.watch)((function(){var t,n;return[null===(t=e.viewModel)||void 0===t?void 0:t.description,null===(n=e.viewModel)||void 0===n?void 0:n.title]}),(function(){return e._setupFeatureElementInfo()}),u.initial))}},{key:"destroy",value:function(){var e;null===(e=this._featureElementInfo)||void 0===e||e.destroy()}},{key:"attributes",get:function(){return this.viewModel.attributes},set:function(e){this.viewModel.attributes=e}},{key:"description",get:function(){return this.viewModel.description},set:function(e){this.viewModel.description=e}},{key:"expressionInfos",get:function(){return this.viewModel.expressionInfos},set:function(e){this.viewModel.expressionInfos=e}},{key:"fieldInfos",get:function(){return this.viewModel.fieldInfos},set:function(e){this.viewModel.fieldInfos=e}},{key:"title",get:function(){return this.viewModel.title},set:function(e){this.viewModel.title=e}},{key:"render",value:function(){var e;return(0,g.u)("div",{class:j.base},null===(e=this._featureElementInfo)||void 0===e?void 0:e.render(),this._renderFields())}},{key:"_renderFieldInfo",value:function(e,t){var n,i=this.viewModel.attributes,r=e.fieldName||"",o=e.label||r,a=i?null==i[r]?"":i[r]:"",l=!(null===(n=e.format)||void 0===n||!n.dateFormat),s="number"!=typeof a||l?(0,P.q)(this.messagesURIUtils,a):this._forceLTR(a),u=(0,S.Z)({},j.fieldDataDate,l);return(0,g.u)("tr",{key:"fields-element-info-row-".concat(r,"-").concat(t)},(0,g.u)("th",{class:j.fieldHeader,innerHTML:o,key:"fields-element-info-row-header-".concat(r,"-").concat(t)}),(0,g.u)("td",{class:this.classes(j.fieldData,u),innerHTML:s,key:"fields-element-info-row-data-".concat(r,"-").concat(t)}))}},{key:"_renderFields",value:function(){var e=this,t=this.viewModel.formattedFieldInfos;return null!==t&&void 0!==t&&t.length?(0,g.u)("table",{class:N.z.table,summary:this.messages.fieldsSummary},(0,g.u)("tbody",null,t.map((function(t,n){return e._renderFieldInfo(t,n)})))):null}},{key:"_setupFeatureElementInfo",value:function(){var e,t=this.description,n=this.title;null===(e=this._featureElementInfo)||void 0===e||e.set({description:t,title:n})}},{key:"_forceLTR",value:function(e){return"&lrm;".concat(e)}}]),n}(f.Z);(0,s._)([(0,d.Cb)()],q.prototype,"attributes",null),(0,s._)([(0,d.Cb)()],q.prototype,"description",null),(0,s._)([(0,d.Cb)()],q.prototype,"expressionInfos",null),(0,s._)([(0,d.Cb)()],q.prototype,"fieldInfos",null),(0,s._)([(0,d.Cb)()],q.prototype,"title",null),(0,s._)([(0,d.Cb)({type:L.Z,nonNullable:!0})],q.prototype,"viewModel",void 0),(0,s._)([(0,d.Cb)(),(0,O.H)("esri/widgets/Feature/t9n/Feature")],q.prototype,"messages",void 0),(0,s._)([(0,d.Cb)(),(0,O.H)("esri/widgets/support/t9n/uriUtils")],q.prototype,"messagesURIUtils",void 0);var H=q=(0,s._)([(0,p.j)("esri.widgets.Feature.FeatureFields")],q),W=n(29439),D=n(74165),X=n(15861),z=n(97326),B=n(90193),J=n(99388),U=n(21516),$=n(8905),Y=n(37384),Q=n(8704),G="esri-feature-media",K={base:G,mediaContainer:"".concat(G,"__container"),mediaItemContainer:"".concat(G,"__item-container"),mediaItem:"".concat(G,"__item"),mediaItemText:"".concat(G,"__item-text"),mediaItemTitle:"".concat(G,"__item-title"),mediaItemCaption:"".concat(G,"__item-caption"),mediaNavigation:"".concat(G,"__item-navigation"),mediaPagination:"".concat(G,"__pagination"),mediaPaginationText:"".concat(G,"__pagination-text"),mediaPrevious:"".concat(G,"__previous"),mediaPreviousIconLTR:"".concat(G,"__previous-icon"),mediaPreviousIconRTL:"".concat(G,"__previous-icon--rtl"),mediaNext:"".concat(G,"__next"),mediaNextIconLTR:"".concat(G,"__next-icon"),mediaNextIconRTL:"".concat(G,"__next-icon--rtl"),mediaChart:"".concat(G,"__chart"),mediaPaginationButton:"".concat(G,"__pagination-button"),mediaPaginationIcon:"".concat(G,"__pagination-icon"),mediaChartRendered:"".concat(G,"__chart--rendered")},ee="category",te="value",ne="rgba(50, 50, 50, 1)",ie=function(e){(0,a.Z)(s,e);var t=(0,l.Z)(s);function s(e,i){var o;return(0,r.Z)(this,s),(o=t.call(this,e,i))._refreshTimer=null,o._refreshIntervalInfo=null,o._featureElementInfo=null,o._chartRootMap=new WeakMap,o.viewModel=new U.Z,o.messages=null,o._disposeChart=function(e){var t;null!==(t=o._chartRootMap.get(e))&&void 0!==t&&t.dispose(),o._chartRootMap.delete(e)},o._createChart=function(){var e=(0,X.Z)((0,D.Z)().mark((function e(t){var i,r,a,l,s,u;return(0,D.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=(0,z.Z)(o),r=i.destroyed,a=i.viewModel,!r&&a&&t){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,Promise.all([n.e(24390),n.e(98266),n.e(24489),n.e(86798)]).then(n.bind(n,86798));case 5:return l=e.sent,s=l.createRoot,e.next=9,s(t);case 9:u=e.sent,o._chartRootMap.set(t,u),o._renderChart({mediaInfo:a.activeMediaInfo,root:u});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o}return(0,o.Z)(s,[{key:"initialize",value:function(){var e=this;this._featureElementInfo=new I,this.addHandles([(0,u.watch)((function(){var t,n;return[null===(t=e.viewModel)||void 0===t?void 0:t.activeMediaInfo,null===(n=e.viewModel)||void 0===n?void 0:n.activeMediaInfoIndex]}),(function(){return e._setupMediaRefreshTimer()}),u.initial),(0,u.watch)((function(){var t,n;return[null===(t=e.viewModel)||void 0===t?void 0:t.description,null===(n=e.viewModel)||void 0===n?void 0:n.title]}),(function(){return e._setupFeatureElementInfo()}),u.initial)])}},{key:"loadDependencies",value:function(){return(0,$.h)({icon:function(){return Promise.all([n.e(92358),n.e(87474)]).then(n.bind(n,87474))}})}},{key:"destroy",value:function(){var e;this._clearMediaRefreshTimer(),null===(e=this._featureElementInfo)||void 0===e||e.destroy()}},{key:"attributes",get:function(){return this.viewModel.attributes},set:function(e){this.viewModel.attributes=e}},{key:"activeMediaInfoIndex",get:function(){return this.viewModel.activeMediaInfoIndex},set:function(e){this.viewModel.activeMediaInfoIndex=e}},{key:"description",get:function(){return this.viewModel.description},set:function(e){this.viewModel.description=e}},{key:"fieldInfoMap",get:function(){return this.viewModel.fieldInfoMap},set:function(e){this.viewModel.fieldInfoMap=e}},{key:"layer",get:function(){return this.viewModel.layer},set:function(e){this.viewModel.layer=e}},{key:"mediaInfos",get:function(){return this.viewModel.mediaInfos},set:function(e){this.viewModel.mediaInfos=e}},{key:"popupTemplate",get:function(){return this.viewModel.popupTemplate},set:function(e){this.viewModel.popupTemplate=e}},{key:"relatedInfos",get:function(){return this.viewModel.relatedInfos},set:function(e){this.viewModel.relatedInfos=e}},{key:"title",get:function(){return this.viewModel.title},set:function(e){this.viewModel.title=e}},{key:"render",value:function(){var e;return(0,g.u)("div",{bind:this,class:K.base,onkeyup:this._handleMediaKeyup},null===(e=this._featureElementInfo)||void 0===e?void 0:e.render(),this._renderMedia())}},{key:"_renderMedia",value:function(){var e=this.viewModel,t=e.formattedMediaInfoCount,n=e.activeMediaInfoIndex,i=this._renderMediaText();return t?(0,g.u)("div",{class:K.mediaContainer,key:"media-element-container"},this._renderMediaInfo(),(0,g.u)("div",{class:K.mediaNavigation},i,t>1?(0,g.u)("div",{class:K.mediaPagination},this._renderMediaPageButton("previous"),(0,g.u)("span",{class:K.mediaPaginationText},(0,Q.n)(this.messages.pageText,{index:n+1,total:t})),this._renderMediaPageButton("next")):null)):null}},{key:"_renderMediaText",value:function(){var e=this.viewModel.activeMediaInfo;if(!e)return null;var t=e&&e.title?(0,g.u)("div",{class:K.mediaItemTitle,innerHTML:e.title,key:"media-title"}):null,n=e&&e.caption?(0,g.u)("div",{class:K.mediaItemCaption,innerHTML:e.caption,key:"media-caption"}):null;return t||n?(0,g.u)("div",{class:K.mediaItemText,key:"media-text"},t,n):null}},{key:"_renderImageMediaInfo",value:function(e){var t;if(!e.value)return null;var n=this._refreshIntervalInfo,i=this.viewModel,r=i.activeMediaInfoIndex,o=i.formattedMediaInfoCount,a=e.value,l=e.refreshInterval,s=e.altText,u=e.title,d=e.type,c=a.sourceURL,p=a.linkURL,f=(0,Z.or)(null!==p&&void 0!==p?p:void 0)?"_blank":"_self",v="_blank"===f?"noreferrer":"",h=l?n:null,y=h?h.timestamp:0,m=h?h.sourceURL:c,_=(0,g.u)("img",{alt:s||u,key:"media-".concat(d,"-").concat(r,"-").concat(o,"-").concat(y),src:null!==m&&void 0!==m?m:void 0});return null!==(t=p?(0,g.u)("a",{href:p,rel:v,target:f,title:u},_):null)&&void 0!==t?t:_}},{key:"_renderChartMediaInfo",value:function(e){var t=this.viewModel,n=t.activeMediaInfoIndex,i=t.formattedMediaInfoCount;return(0,g.u)("div",{afterCreate:this._createChart,afterRemoved:this._disposeChart,bind:this,class:K.mediaChart,key:"media-".concat(e.type,"-").concat(n,"-").concat(i)})}},{key:"_renderMediaInfoType",value:function(){var e=this.viewModel.activeMediaInfo;return e?"image"===e.type?this._renderImageMediaInfo(e):e.type.includes("chart")?this._renderChartMediaInfo(e):null:null}},{key:"_renderMediaInfo",value:function(){return this.viewModel.activeMediaInfo?(0,g.u)("div",{class:K.mediaItemContainer,key:"media-container"},(0,g.u)("div",{class:K.mediaItem,key:"media-item-container"},this._renderMediaInfoType())):null}},{key:"_renderMediaPageButton",value:function(e){if(this.viewModel.formattedMediaInfoCount<2)return null;var t="previous"===e,n=t?this.messages.previous:this.messages.next,i=t?"chevron-left":"chevron-right",r=t?"media-previous":"media-next",o=t?this._previous:this._next;return(0,g.u)("button",{"aria-label":n,bind:this,class:K.mediaPaginationButton,key:r,onclick:o,tabIndex:0,title:n,type:"button"},(0,g.u)("calcite-icon",{class:K.mediaPaginationIcon,icon:i,scale:"s"}))}},{key:"_setupFeatureElementInfo",value:function(){var e,t=this.description,n=this.title;null===(e=this._featureElementInfo)||void 0===e||e.set({description:t,title:n})}},{key:"_next",value:function(){this.viewModel.next()}},{key:"_previous",value:function(){this.viewModel.previous()}},{key:"_getRenderer",value:function(){if(this.viewModel){var e=this.viewModel,t=e.isAggregate,n=e.layer;return t&&null!==n&&void 0!==n&&n.featureReduction&&"renderer"in n.featureReduction?n.featureReduction.renderer:null===n||void 0===n?void 0:n.renderer}}},{key:"_getSeriesColors",value:function(){var e=(0,X.Z)((0,D.Z)().mark((function e(t){var i,r,o;return(0,D.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n.e(24390),n.e(96715)]).then(n.bind(n,96715));case 2:return i=e.sent,r=i.colorAm5,o=new Map,e.abrupt("return",(t.forEach((function(e){e.color&&o.set(e,r(e.color.toCss(!0)))})),o));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"_getRendererColors",value:function(){var e=(0,X.Z)((0,D.Z)().mark((function e(){var t,i,r,o,a,l;return(0,D.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n.e(24390),n.e(96715)]).then(n.bind(n,96715));case 2:if(t=e.sent,i=t.colorAm5,r=new Map,o=this._getRenderer(),a="default",o){e.next=9;break}return e.abrupt("return",r);case 9:return e.next=11,(0,J.zB)(o);case 11:return(l=e.sent).delete(a),e.abrupt("return",Array.from(l.values()).every((function(e){return 1===(null===e||void 0===e?void 0:e.length)}))?(Array.from(l.keys()).forEach((function(e){var t,n,o=null===(t=l.get(e))||void 0===t||null===(n=t[0])||void 0===n?void 0:n.toCss(!0);o&&r.set(e,i(o))})),r):r);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_handleMediaKeyup",value:function(e){var t=e.key;"ArrowLeft"===t&&(e.stopPropagation(),this.viewModel.previous()),"ArrowRight"===t&&(e.stopPropagation(),this.viewModel.next())}},{key:"_canAnimateChart",value:function(){return!!this.viewModel&&!!this.viewModel.abilities.chartAnimation&&!(0,B.n)()}},{key:"_getChartAnimationMS",value:function(){return this._canAnimateChart()?250:0}},{key:"_getChartSeriesAnimationMS",value:function(){return this._canAnimateChart()?500:0}},{key:"_renderChart",value:function(){var e=(0,X.Z)((0,D.Z)().mark((function e(t){var r,o,a,l,s,u,d,c,p,f,v,h,y,m,g,_,b,w,I;return(0,D.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.root,o=t.mediaInfo,a=o.value,l=o.type,e.next=6,Promise.all([n.e(24390),n.e(96715)]).then(n.bind(n,96715));case 6:return s=e.sent,u=s.ResponsiveThemeAm5,d=s.DarkThemeAm5,c=s.AnimatedThemeAm5,p=s.ColorSetAm5,f=s.ThemeAm5,v=s.esriChartColorSet,(h=f.new(r)).rule("ColorSet").set("colors",v),h.rule("ColorSet").set("reuse",!0),y=[u.new(r),h],(0,Y.$o)()&&y.push(d.new(r)),this._canAnimateChart()&&y.push(c.new(r)),r.setThemes(y),e.next=19,this._getRendererColors();case 19:return m=e.sent,e.next=22,this._getSeriesColors(a.series);case 22:g=e.sent,_=p.new(r,{}),b=g.get(a.series[0]),w=b?{lineSettings:{stroke:b}}:void 0,I=a.series.map((function(e,t){var n,r=g.get(e)||m.get(e.fieldName)||_.getIndex(t);return(0,i.Z)((n={},(0,S.Z)(n,ee,e.tooltip),(0,S.Z)(n,te,e.value),(0,S.Z)(n,"columnSettings",{fill:r,stroke:r}),n),w)})).filter((function(e){return"pie-chart"!==l||null!=e.value&&e.value>0})),"pie-chart"===l?this._createPieChart(t,I):this._createXYChart(t,I);case 28:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_getDirection",value:function(){return(0,m.dZ)(this.container)?"rtl":"ltr"}},{key:"_isInversed",value:function(){return!!(0,m.dZ)(this.container)}},{key:"_customizeChartTooltip",value:function(){var e=(0,X.Z)((0,D.Z)().mark((function e(t){var i,r,o,a,l=arguments;return(0,D.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>1&&void 0!==l[1]?l[1]:"horizontal",e.next=3,Promise.all([n.e(24390),n.e(96715)]).then(n.bind(n,96715));case 3:o=e.sent,a=o.colorAm5,t.setAll({pointerOrientation:r}),null!==(i=t.get("background"))&&void 0!==i&&i.setAll({stroke:a(ne)}),t.label.setAll({direction:this._getDirection(),oversizedBehavior:"wrap",maxWidth:200});case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_createPieChart",value:function(){var e=(0,X.Z)((0,D.Z)().mark((function e(t,i){var r,o,a,l,s,u,d,c,p,f,v,h,y;return(0,D.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n.e(24390),n.e(96715)]).then(n.bind(n,96715));case 2:return r=e.sent,o=r.TooltipAm5,e.next=6,Promise.all([n.e(24390),n.e(98266),n.e(17228),n.e(77011)]).then(n.bind(n,77011));case 6:a=e.sent,l=a.PieChartAm5,s=a.PieSeriesAm5,u=t.mediaInfo,d=t.root,c=u.title,5,p=(null===u||void 0===u?void 0:u.altText)||(null===u||void 0===u?void 0:u.title)||"",f=d.container.children.push(l.new(d,{ariaLabel:p,focusable:!0,paddingBottom:5,paddingTop:5,paddingLeft:5,paddingRight:5})),v="{category}: {valuePercentTotal.formatNumber('0.00')}%\n ({value})",h=o.new(d,{labelText:v}),(y=f.series.push(s.new(d,{name:c,valueField:te,categoryField:ee,tooltip:h}))).ticks.template.set("forceHidden",!0),y.labels.template.set("forceHidden",!0),y.slices.template.states.create("active",{shiftRadius:5}),this._customizeChartTooltip(h),y.slices.template.setAll({ariaLabel:v,focusable:!0,templateField:"columnSettings"}),y.data.setAll(i),y.appear(this._getChartSeriesAnimationMS()),f.appear(this._getChartAnimationMS()),f.root.dom.classList.toggle(K.mediaChartRendered,!0);case 19:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getMinSeriesValue",value:function(e){var t=0;return e.forEach((function(e){return t=Math.min(e.value,t)})),t}},{key:"_createColumnChart",value:function(){var e=(0,X.Z)((0,D.Z)().mark((function e(t,i,r){var o,a,l,s,u,d,c,p,f,v,h,y,m,g,_,b,w,I;return(0,D.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n.e(24390),n.e(96715)]).then(n.bind(n,96715));case 2:return o=e.sent,a=o.TooltipAm5,l=o.ScrollbarAm5,e.next=7,Promise.all([n.e(24390),n.e(98266),n.e(17228),n.e(49596),n.e(96436)]).then(n.bind(n,96436));case 7:s=e.sent,u=s.CategoryAxisAm5,d=s.AxisRendererXAm5,c=s.ValueAxisAm5,p=s.AxisRendererYAm5,f=s.ColumnSeriesAm5,v=i.mediaInfo,h=i.root,y=v.value,m=v.title,t.setAll({wheelX:"panX",wheelY:"zoomX"}),(g=t.xAxes.push(u.new(h,{renderer:d.new(h,{inversed:this._isInversed()}),categoryField:ee}))).get("renderer").labels.template.setAll({forceHidden:!0}),(_=t.yAxes.push(c.new(h,{renderer:p.new(h,{inside:!1}),min:this._getMinSeriesValue(y.series)}))).get("renderer").labels.template.setAll({direction:this._getDirection()}),b="{categoryX}",w=a.new(h,{labelText:b}),I=t.series.push(f.new(h,{name:m,xAxis:g,yAxis:_,valueYField:te,categoryXField:ee,tooltip:w})),this._customizeChartTooltip(w),I.columns.template.setAll({ariaLabel:b,focusable:!0,templateField:"columnSettings"}),y.series.length>15&&t.set("scrollbarX",l.new(h,{orientation:"horizontal"})),g.data.setAll(r),I.data.setAll(r),I.appear(this._getChartSeriesAnimationMS()),t.appear(this._getChartAnimationMS());case 24:case"end":return e.stop()}}),e,this)})));return function(t,n,i){return e.apply(this,arguments)}}()},{key:"_createBarChart",value:function(){var e=(0,X.Z)((0,D.Z)().mark((function e(t,i,r){var o,a,l,s,u,d,c,p,f,v,h,y,m,g,_,b,w,I;return(0,D.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n.e(24390),n.e(96715)]).then(n.bind(n,96715));case 2:return o=e.sent,a=o.TooltipAm5,l=o.ScrollbarAm5,e.next=7,Promise.all([n.e(24390),n.e(98266),n.e(17228),n.e(49596),n.e(96436)]).then(n.bind(n,96436));case 7:s=e.sent,u=s.CategoryAxisAm5,d=s.AxisRendererXAm5,c=s.ValueAxisAm5,p=s.AxisRendererYAm5,f=s.ColumnSeriesAm5,v=i.mediaInfo,h=i.root,y=v.value,m=v.title,t.setAll({wheelX:"panY",wheelY:"zoomY"}),(g=t.yAxes.push(u.new(h,{renderer:p.new(h,{inversed:!0}),categoryField:ee}))).get("renderer").labels.template.setAll({forceHidden:!0}),(_=t.xAxes.push(c.new(h,{renderer:d.new(h,{inside:!1,inversed:this._isInversed()}),min:this._getMinSeriesValue(y.series)}))).get("renderer").labels.template.setAll({direction:this._getDirection()}),b="{categoryY}",w=a.new(h,{labelText:b}),I=t.series.push(f.new(h,{name:m,xAxis:_,yAxis:g,valueXField:te,categoryYField:ee,tooltip:w})),this._customizeChartTooltip(w,"vertical"),I.columns.template.setAll({ariaLabel:b,focusable:!0,templateField:"columnSettings"}),y.series.length>15&&t.set("scrollbarY",l.new(h,{orientation:"vertical"})),g.data.setAll(r),I.data.setAll(r),I.appear(this._getChartSeriesAnimationMS()),t.appear(this._getChartAnimationMS());case 24:case"end":return e.stop()}}),e,this)})));return function(t,n,i){return e.apply(this,arguments)}}()},{key:"_createLineChart",value:function(){var e=(0,X.Z)((0,D.Z)().mark((function e(t,i,r){var o,a,l,s,u,d,c,p,f,v,h,y,m,g,_,b,w,I,x,M,k;return(0,D.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n.e(24390),n.e(96715)]).then(n.bind(n,96715));case 2:return s=e.sent,u=s.TooltipAm5,d=s.ScrollbarAm5,e.next=7,Promise.all([n.e(24390),n.e(98266),n.e(17228),n.e(49596),n.e(96436)]).then(n.bind(n,96436));case 7:c=e.sent,p=c.CategoryAxisAm5,f=c.AxisRendererXAm5,v=c.ValueAxisAm5,h=c.AxisRendererYAm5,y=c.LineSeriesAm5,m=i.root,g=i.mediaInfo,_=g.value,b=g.title,t.setAll({wheelX:"panX",wheelY:"zoomX"}),(w=t.xAxes.push(p.new(m,{renderer:f.new(m,{inversed:this._isInversed()}),categoryField:ee}))).get("renderer").labels.template.setAll({forceHidden:!0}),(I=t.yAxes.push(v.new(m,{renderer:h.new(m,{inside:!1}),min:this._getMinSeriesValue(_.series)}))).get("renderer").labels.template.setAll({direction:this._getDirection()}),"{categoryX}",x=null===(o=r[0])||void 0===o||null===(a=o.lineSettings)||void 0===a?void 0:a.stroke,M=u.new(m,{getFillFromSprite:!x,labelText:"{categoryX}"}),x&&(null===(l=M.get("background"))||void 0===l||l.setAll({fill:x})),(k=t.series.push(y.new(m,{name:b,xAxis:w,yAxis:I,valueYField:te,categoryXField:ee,tooltip:M}))).strokes.template.setAll({templateField:"lineSettings"}),this._customizeChartTooltip(M,"vertical"),_.series.length>15&&t.set("scrollbarX",d.new(m,{orientation:"horizontal"})),w.data.setAll(r),k.data.setAll(r),k.appear(this._getChartSeriesAnimationMS()),t.appear(this._getChartAnimationMS());case 26:case"end":return e.stop()}}),e,this)})));return function(t,n,i){return e.apply(this,arguments)}}()},{key:"_createXYChart",value:function(){var e=(0,X.Z)((0,D.Z)().mark((function e(t,i){var r,o,a,l,s,u,d,c;return(0,D.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n.e(24390),n.e(98266),n.e(17228),n.e(49596),n.e(96436)]).then(n.bind(n,96436));case 2:if(r=e.sent,o=r.XYChartAm5,a=r.XYCursorAm5,l=t.root,s=t.mediaInfo,u=s.type,d=(null===s||void 0===s?void 0:s.altText)||(null===s||void 0===s?void 0:s.title)||"",(c=l.container.children.push(o.new(l,{ariaLabel:d,focusable:!0,panX:!0,panY:!0}))).set("cursor",a.new(l,{})),e.t0="column-chart"===u,!e.t0){e.next=15;break}return e.next=15,this._createColumnChart(c,t,i);case 15:if(e.t1="bar-chart"===u,!e.t1){e.next=19;break}return e.next=19,this._createBarChart(c,t,i);case 19:if(e.t2="line-chart"===u,!e.t2){e.next=23;break}return e.next=23,this._createLineChart(c,t,i);case 23:c.root.dom.classList.toggle(K.mediaChartRendered,!0);case 24:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_clearMediaRefreshTimer",value:function(){var e=this._refreshTimer;e&&(clearTimeout(e),this._refreshTimer=null)}},{key:"_updateMediaInfoTimestamp",value:function(e){var t=Date.now();this._refreshIntervalInfo={timestamp:t,sourceURL:e&&this._getImageSource(e,t)}}},{key:"_setupMediaRefreshTimer",value:function(){this._clearMediaRefreshTimer();var e=this.viewModel.activeMediaInfo;"image"===(null===e||void 0===e?void 0:e.type)&&(null===e||void 0===e?void 0:e.refreshInterval)>0&&this._setRefreshTimeout(e)}},{key:"_setRefreshTimeout",value:function(e){var t=this,n=e.refreshInterval,i=e.value,r=6e4*n;this._updateMediaInfoTimestamp(i.sourceURL);var o=setInterval((function(){t._updateMediaInfoTimestamp(i.sourceURL)}),r);this._refreshTimer=o}},{key:"_getImageSource",value:function(e,t){var n=e.includes("?")?"&":"?",i=e.split("#"),r=(0,W.Z)(i,2),o=r[0],a=r[1],l=void 0===a?"":a;return"".concat(o).concat(n,"timestamp=").concat(t).concat(l?"#":"").concat(l)}}]),s}(f.Z);(0,s._)([(0,d.Cb)()],ie.prototype,"_refreshIntervalInfo",void 0),(0,s._)([(0,d.Cb)()],ie.prototype,"attributes",null),(0,s._)([(0,d.Cb)()],ie.prototype,"activeMediaInfoIndex",null),(0,s._)([(0,d.Cb)()],ie.prototype,"description",null),(0,s._)([(0,d.Cb)()],ie.prototype,"fieldInfoMap",null),(0,s._)([(0,d.Cb)()],ie.prototype,"layer",null),(0,s._)([(0,d.Cb)()],ie.prototype,"mediaInfos",null),(0,s._)([(0,d.Cb)()],ie.prototype,"popupTemplate",null),(0,s._)([(0,d.Cb)()],ie.prototype,"relatedInfos",null),(0,s._)([(0,d.Cb)()],ie.prototype,"title",null),(0,s._)([(0,d.Cb)({type:U.Z})],ie.prototype,"viewModel",void 0),(0,s._)([(0,d.Cb)(),(0,O.H)("esri/widgets/Feature/t9n/Feature")],ie.prototype,"messages",void 0);var re=ie=(0,s._)([(0,p.j)("esri.widgets.Feature.FeatureMedia")],ie),oe=n(57240),ae="esri-feature",le={base:"".concat(ae,"-expression"),loadingSpinnerContainer:"".concat(ae,"__loading-container")},se=function(e){(0,a.Z)(i,e);var t=(0,l.Z)(i);function i(e,n){var o;return(0,r.Z)(this,i),(o=t.call(this,e,n))._contentWidget=null,o.viewModel=new oe.Z,o}return(0,o.Z)(i,[{key:"initialize",value:function(){var e=this;this.addHandles((0,u.watch)((function(){var t;return null===(t=e.viewModel)||void 0===t?void 0:t.contentElementViewModel}),(function(){return e._setupExpressionWidget()}),u.initial))}},{key:"loadDependencies",value:function(){return(0,$.h)({loader:function(){return Promise.all([n.e(92358),n.e(46895),n.e(92382)]).then(n.bind(n,92382))}})}},{key:"destroy",value:function(){this._destroyContentWidget()}},{key:"render",value:function(){var e,t=this.viewModel.state;return(0,g.u)("div",{class:le.base},"loading"===t?this._renderLoading():"disabled"===t?null:null===(e=this._contentWidget)||void 0===e?void 0:e.render())}},{key:"_renderLoading",value:function(){return(0,g.u)("div",{class:le.loadingSpinnerContainer,key:"loading-container"},(0,g.u)("calcite-loader",{inline:!0,label:""}))}},{key:"_destroyContentWidget",value:function(){var e=this._contentWidget;e&&(e.viewModel=null,e.destroy()),this._contentWidget=null}},{key:"_setupExpressionWidget",value:function(){var e=this.viewModel,t=e.contentElementViewModel,n=e.contentElement,i=null===n||void 0===n?void 0:n.type;this._destroyContentWidget();var r=t?"fields"===i?new H({viewModel:t}):"media"===i?new re({viewModel:t}):"text"===i?new R({viewModel:t}):null:null;this._contentWidget=r,this.scheduleRender()}}]),i}(f.Z);(0,s._)([(0,d.Cb)({type:oe.Z})],se.prototype,"viewModel",void 0);var ue=se=(0,s._)([(0,p.j)("esri.widgets.Feature.FeatureExpression")],se),de=n(92026),ce=n(66978),pe=n(67667),fe="esri-feature",ve="".concat(fe,"-relationship"),he={base:ve,listContainer:"".concat(ve,"__list"),listItem:"".concat(ve,"__list-item"),listItemHidden:"".concat(ve,"__list-item--hidden"),listContainerQuerying:"".concat(ve,"__list--querying"),featureObserver:"".concat(fe,"__feature-observer"),stickySpinnerContainer:"".concat(fe,"__sticky-loading-container"),loadingSpinnerContainer:"".concat(fe,"__loading-container")},ye={title:!0,description:!0},me=function(e){(0,a.Z)(s,e);var t=(0,l.Z)(s);function s(e,n){var o;return(0,r.Z)(this,s),(o=t.call(this,e,n))._featureElementInfo=null,o._relatedFeatureIntersectionObserverNode=null,o._relatedFeatureIntersectionObserver=new IntersectionObserver((function(e){var t=(0,W.Z)(e,1)[0];(null===t||void 0===t?void 0:t.isIntersecting)&&o._increaseFeaturePage()}),{root:window.document}),o.headingLevel=2,o.viewModel=new pe.Z,o.messages=null,o.messagesCommon=null,o.visibleElements=(0,i.Z)({},ye),o._increaseFeaturePage=function(){var e=o.viewModel,t=e.state,n=e.showAllEnabled,i=e.relatedFeatures,r=e.featuresPerPage,a=e.featurePage;"ready"===t&&n&&i.length>=r*a&&o.viewModel.featurePage++},o}return(0,o.Z)(s,[{key:"initialize",value:function(){var e=this;this._featureElementInfo=new I,this.addHandles([(0,u.watch)((function(){return[e.viewModel.description,e.viewModel.title,e.headingLevel]}),(function(){return e._setupFeatureElementInfo()}),u.initial),(0,u.watch)((function(){return[e.viewModel.state,e.viewModel.showAllEnabled,e._relatedFeatureIntersectionObserverNode]}),(function(){return e._handleRelatedFeatureObserverChange()})),(0,u.on)((function(){return e.viewModel.relatedFeatureViewModels}),"change",(function(){return e._setupRelatedFeatureViewModels()}))])}},{key:"loadDependencies",value:function(){return(0,$.h)({icon:function(){return Promise.all([n.e(92358),n.e(87474)]).then(n.bind(n,87474))},list:function(){return Promise.all([n.e(92358),n.e(46895),n.e(54438),n.e(34504),n.e(8715),n.e(38782)]).then(n.bind(n,38782))},"list-item":function(){return Promise.all([n.e(92358),n.e(46895),n.e(65138),n.e(21340)]).then(n.bind(n,67994))},loader:function(){return Promise.all([n.e(92358),n.e(46895),n.e(92382)]).then(n.bind(n,92382))},notice:function(){return Promise.all([n.e(92358),n.e(46895),n.e(15669)]).then(n.bind(n,15669))}})}},{key:"destroy",value:function(){this._unobserveRelatedFeatureObserver(),this._featureElementInfo=(0,de.SC)(this._featureElementInfo)}},{key:"displayShowAllButton",get:function(){var e=this.viewModel,t=e.showAllEnabled,n=e.featureCount,i=e.displayCount,r=e.state;return!t&&!!n&&"ready"===r&&(n>i||0===i)}},{key:"displayListItems",get:function(){return this.displayShowAllButton||this.viewModel.relatedFeatureViewModels.length>0}},{key:"description",get:function(){return this.viewModel.description},set:function(e){this.viewModel.description=e}},{key:"featureCountDescription",get:function(){var e=this.messages,t=this.viewModel.featureCount;return(0,Q.n)(null===e||void 0===e?void 0:e.numberRecords,{number:t})}},{key:"title",get:function(){return this.viewModel.title},set:function(e){this.viewModel.title=e}},{key:"castVisibleElements",value:function(e){return(0,i.Z)((0,i.Z)({},ye),e)}},{key:"render",value:function(){var e,t=this.viewModel.state;return(0,g.u)("div",{class:this.classes(he.base,N.z.widget)},null===(e=this._featureElementInfo)||void 0===e?void 0:e.render(),"loading"===t?this._renderLoading():"disabled"===t?this._renderRelationshipNotFound():this._renderRelatedFeatures())}},{key:"_renderStickyLoading",value:function(){return"querying"===this.viewModel.state?(0,g.u)("div",{class:he.stickySpinnerContainer,key:"sticky-loader"},this._renderLoadingIcon()):null}},{key:"_renderLoadingIcon",value:function(){return(0,g.u)("calcite-loader",{inline:!0,label:""})}},{key:"_renderLoading",value:function(){return(0,g.u)("div",{class:he.loadingSpinnerContainer,key:"loading-container"},this._renderLoadingIcon())}},{key:"_renderShowAllIconNode",value:function(){return(0,g.u)("calcite-icon",{icon:"list",scale:"s",slot:"content-end"})}},{key:"_renderChevronIconNode",value:function(){var e=(0,m.dZ)(this.container)?"chevron-left":"chevron-right";return(0,g.u)("calcite-icon",{icon:e,scale:"s",slot:"content-end"})}},{key:"_renderRelatedFeature",value:function(e){var t,n,i=this,r=this.viewModel.itemDescriptionFieldName,o=e.title;e.description=r&&(null===(t=e.formattedAttributes)||void 0===t?void 0:t.global[r]);var a="loading"===e.state;return(0,g.u)("calcite-list-item",{class:this.classes(he.listItem,(0,S.Z)({},he.listItemHidden,a)),description:null!==(n=e.description)&&void 0!==n?n:"",key:e.uid,label:o,onCalciteListItemSelect:function(){return i.emit("select-record",{featureViewModel:e})}},this._renderChevronIconNode())}},{key:"_renderShowAllListItem",value:function(){var e,t=this;return this.displayShowAllButton?(0,g.u)("calcite-list-item",{description:this.featureCountDescription,key:"show-all-item",label:null===(e=this.messages)||void 0===e?void 0:e.showAll,onCalciteListItemSelect:function(){return t.emit("show-all-records")}},this._renderShowAllIconNode()):null}},{key:"_renderNoRelatedFeaturesMessage",value:function(){var e;return(0,g.u)("calcite-notice",{icon:"information",key:"no-related-features-message",kind:"brand",open:!0,scale:"s",width:"full"},(0,g.u)("div",{slot:"message"},null===(e=this.messages)||void 0===e?void 0:e.noRelatedFeatures))}},{key:"_renderFeatureObserver",value:function(){return(0,g.u)("div",{afterCreate:this._relatedFeatureIntersectionObserverCreated,bind:this,class:he.featureObserver,key:"feature-observer"})}},{key:"_renderList",value:function(){var e=this,t=this.viewModel.relatedFeatureViewModels;return(0,g.u)("calcite-list",null,t.toArray().map((function(t){return e._renderRelatedFeature(t)})),this._renderShowAllListItem())}},{key:"_renderRelatedFeatures",value:function(){var e=this.displayListItems,t=this.viewModel.state;return(0,g.u)("div",{class:this.classes(he.listContainer,(0,S.Z)({},he.listContainerQuerying,"querying"===t)),key:"list-container"},e?this._renderList():"ready"===t?this._renderNoRelatedFeaturesMessage():null,this._renderStickyLoading(),this._renderFeatureObserver())}},{key:"_renderRelationshipNotFound",value:function(){var e;return(0,g.u)("calcite-notice",{icon:"exclamation-mark-triangle",key:"relationship-not-found",kind:"danger",open:!0,scale:"s",width:"full"},(0,g.u)("div",{slot:"message"},null===(e=this.messages)||void 0===e?void 0:e.relationshipNotFound))}},{key:"_setupRelatedFeatureViewModels",value:function(){var e=this,t=this.viewModel.relatedFeatureViewModels,n="related-feature-viewmodels";this.removeHandles(n),null!==t&&void 0!==t&&t.forEach((function(t){e.addHandles((0,u.watch)((function(){return[t.title,t.state]}),(function(){return e.scheduleRender()}),u.initial),n)})),this.scheduleRender()}},{key:"_setupFeatureElementInfo",value:function(){var e,t=this.headingLevel,n=this.visibleElements,i=n.description&&this.description,r=n.title&&this.title;null===(e=this._featureElementInfo)||void 0===e||e.set({description:i,title:r,headingLevel:t})}},{key:"_handleRelatedFeatureObserverChange",value:function(){var e=(0,X.Z)((0,D.Z)().mark((function e(){var t,n,i;return(0,D.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._unobserveRelatedFeatureObserver(),t=this.viewModel,n=t.state,i=t.showAllEnabled,e.next=4,(0,ce.e4)(0);case 4:this._relatedFeatureIntersectionObserverNode&&"ready"===n&&i&&this._relatedFeatureIntersectionObserver.observe(this._relatedFeatureIntersectionObserverNode);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_relatedFeatureIntersectionObserverCreated",value:function(e){this._relatedFeatureIntersectionObserverNode=e}},{key:"_unobserveRelatedFeatureObserver",value:function(){this._relatedFeatureIntersectionObserverNode&&this._relatedFeatureIntersectionObserver.unobserve(this._relatedFeatureIntersectionObserverNode)}}]),s}(f.Z);(0,s._)([(0,d.Cb)()],me.prototype,"_relatedFeatureIntersectionObserverNode",void 0),(0,s._)([(0,d.Cb)({readOnly:!0})],me.prototype,"displayShowAllButton",null),(0,s._)([(0,d.Cb)({readOnly:!0})],me.prototype,"displayListItems",null),(0,s._)([(0,d.Cb)()],me.prototype,"description",null),(0,s._)([(0,d.Cb)({readOnly:!0})],me.prototype,"featureCountDescription",null),(0,s._)([(0,d.Cb)()],me.prototype,"headingLevel",void 0),(0,s._)([(0,d.Cb)()],me.prototype,"title",null),(0,s._)([(0,d.Cb)({type:pe.Z})],me.prototype,"viewModel",void 0),(0,s._)([(0,d.Cb)(),(0,O.H)("esri/widgets/Feature/t9n/Feature")],me.prototype,"messages",void 0),(0,s._)([(0,d.Cb)(),(0,O.H)("esri/t9n/common")],me.prototype,"messagesCommon",void 0),(0,s._)([(0,d.Cb)()],me.prototype,"visibleElements",void 0),(0,s._)([(0,c.p)("visibleElements")],me.prototype,"castVisibleElements",null);var ge,_e=me=(0,s._)([(0,p.j)("esri.widgets.Feature.FeatureRelationship")],me),be=n(71045),we=n(29845),Ie=n(72221),xe={title:!0,content:!0,lastEditedInfo:!0},Me="relationship-handles",ke=ge=function(e){(0,a.Z)(s,e);var t=(0,l.Z)(s);function s(e,n){var o;return(0,r.Z)(this,s),(o=t.call(this,e,n))._contentWidgets=[],o.flowItems=null,o.headingLevel=2,o.messages=null,o.messagesCommon=null,o.visibleElements=(0,i.Z)({},xe),o.viewModel=new be.Z,o}return(0,o.Z)(s,[{key:"initialize",value:function(){var e=this;this.addHandles((0,u.watch)((function(){var t;return null===(t=e.viewModel)||void 0===t?void 0:t.contentViewModels}),(function(){return e._setupContentWidgets()}),u.initial))}},{key:"loadDependencies",value:function(){return(0,$.h)({notice:function(){return Promise.all([n.e(92358),n.e(46895),n.e(15669)]).then(n.bind(n,15669))},loader:function(){return Promise.all([n.e(92358),n.e(46895),n.e(92382)]).then(n.bind(n,92382))}})}},{key:"destroy",value:function(){this._destroyContentWidgets()}},{key:"graphic",get:function(){return this.viewModel.graphic},set:function(e){this.viewModel.graphic=e}},{key:"defaultPopupTemplateEnabled",get:function(){return this.viewModel.defaultPopupTemplateEnabled},set:function(e){this.viewModel.defaultPopupTemplateEnabled=e}},{key:"isTable",get:function(){return this.viewModel.isTable}},{key:"icon",get:function(){return"polygon"},set:function(e){this._overrideIfSome("icon",e)}},{key:"label",get:function(){var e,t;return null!==(e=null===(t=this.messages)||void 0===t?void 0:t.widgetLabel)&&void 0!==e?e:""},set:function(e){this._overrideIfSome("label",e)}},{key:"spatialReference",get:function(){return this.viewModel.spatialReference},set:function(e){this.viewModel.spatialReference=e}},{key:"timeZone",get:function(){return this.viewModel.timeZone},set:function(e){this.viewModel.timeZone=e}},{key:"title",get:function(){return this.viewModel.title}},{key:"castVisibleElements",value:function(e){return(0,i.Z)((0,i.Z)({},xe),e)}},{key:"map",get:function(){return this.viewModel.map},set:function(e){this.viewModel.map=e}},{key:"view",get:function(){return this.viewModel.view},set:function(e){this.viewModel.view=e}},{key:"setActiveMedia",value:function(e,t){return this.viewModel.setActiveMedia(e,t)}},{key:"nextMedia",value:function(e){return this.viewModel.nextMedia(e)}},{key:"previousMedia",value:function(e){return this.viewModel.previousMedia(e)}},{key:"render",value:function(){var e=this.viewModel.state,t=(0,g.u)("div",{class:we.i.container,key:"container"},this._renderTitle(),"error"===e?this._renderError():"loading"===e?this._renderLoading():this._renderContentContainer());return(0,g.u)("div",{class:this.classes(we.i.base,N.z.widget)},t)}},{key:"_renderError",value:function(){var e=this.messagesCommon,t=this.messages,n=this.visibleElements;return(0,g.u)("calcite-notice",{icon:"exclamation-mark-circle",kind:"danger",open:!0,scale:"s"},n.title?(0,g.u)("div",{key:"error-title",slot:"title"},e.errorMessage):null,(0,g.u)("div",{key:"error-message",slot:"message"},t.loadingError))}},{key:"_renderLoading",value:function(){return(0,g.u)("div",{class:we.i.loadingSpinnerContainer,key:"loading-container"},(0,g.u)("calcite-loader",{inline:!0,label:""}))}},{key:"_renderContentContainer",value:function(){return this.visibleElements.content?(0,g.u)("div",{class:we.i.main},[this._renderContent(),this._renderLastEditInfo()]):null}},{key:"_renderTitle",value:function(){var e=this.visibleElements,t=this.title;return e.title?(0,g.u)(y.X,{class:we.i.title,innerHTML:t,level:this.headingLevel}):null}},{key:"_renderContent",value:function(){var e=this.viewModel.content,t="content";if(!e)return null;if(Array.isArray(e))return e.length?(0,g.u)("div",{class:we.i.contentNode,key:"".concat(t,"-content-elements")},e.map(this._renderContentElement,this)):null;if("string"==typeof e){var n=this._contentWidgets[0];return!n||n.destroyed?null:(0,g.u)("div",{class:this.classes(we.i.contentNode,we.i.contentNodeText),key:"".concat(t,"-content")},n.render())}return this.renderNodeContent(e)}},{key:"_renderContentElement",value:function(e,t){var n,i=this.visibleElements;if("boolean"!=typeof i.content&&(null===(n=i.content)||void 0===n||!n[e.type]))return null;switch(e.type){case"attachments":return this._renderAttachments(t);case"custom":return this._renderCustom(e,t);case"fields":return this._renderFields(t);case"media":return this._renderMedia(t);case"text":return this._renderText(e,t);case"expression":return this._renderExpression(t);case"relationship":return this._renderRelationship(t);default:return null}}},{key:"_renderAttachments",value:function(e){var t=this._contentWidgets[e];if(!t||t.destroyed)return null;var n=t.viewModel,i=n.state,r=n.attachmentInfos;return"loading"===i||r.length>0?(0,g.u)("div",{class:this.classes(we.i.contentElement),key:this._buildKey("attachments-element",e)},t.render()):null}},{key:"_renderRelationship",value:function(e){var t=this._contentWidgets[e];return t&&!t.destroyed&&this.flowItems?(0,g.u)("div",{class:we.i.contentElement,key:this._buildKey("relationship-element",e)},t.render()):null}},{key:"_renderExpression",value:function(e){var t=this._contentWidgets[e];return!t||t.destroyed?null:(0,g.u)("div",{class:we.i.contentElement,key:this._buildKey("expression-element",e)},t.render())}},{key:"_renderCustom",value:function(e,t){var n=e.creator,i=this._contentWidgets[t];return!i||i.destroyed?null:n?(0,g.u)("div",{class:we.i.contentElement,key:this._buildKey("custom-element",t)},i.render()):null}},{key:"_renderFields",value:function(e){var t=this._contentWidgets[e];return!t||t.destroyed?null:(0,g.u)("div",{class:we.i.contentElement,key:this._buildKey("fields-element",e)},t.render())}},{key:"_renderMedia",value:function(e){var t=this._contentWidgets[e];return!t||t.destroyed?null:(0,g.u)("div",{class:we.i.contentElement,key:this._buildKey("media-element",e)},t.render())}},{key:"_renderLastEditInfo",value:function(){var e=this.visibleElements,t=this.messages,n=this.viewModel.lastEditInfo;if(!n||!e.lastEditedInfo)return null;var i=n.date,r=n.user,o="edit"===n.type?r?t.lastEditedByUser:t.lastEdited:r?t.lastCreatedByUser:t.lastCreated,a=(0,Q.n)(o,{date:i,user:r});return(0,g.u)("div",{class:this.classes(we.i.lastEditedInfo,we.i.contentElement),key:"edit-info-element"},a)}},{key:"_renderText",value:function(e,t){var n=e.text,i=this._contentWidgets[t];return!i||i.destroyed?null:n?(0,g.u)("div",{class:this.classes(we.i.contentElement,we.i.text),key:this._buildKey("text-element",t)},i.render()):null}},{key:"_buildKey",value:function(e){for(var t,n,i=arguments.length,r=new Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];return"".concat(e,"__").concat((null===(t=this.viewModel)||void 0===t||null===(n=t.graphic)||void 0===n?void 0:n.uid)||"0","-").concat(r.join("-"))}},{key:"_destroyContentWidget",value:function(e){e&&(e.viewModel=null,!e.destroyed&&e.destroy())}},{key:"_destroyContentWidgets",value:function(){var e=this;this.removeHandles(Me),this._contentWidgets.forEach((function(t){return e._destroyContentWidget(t)})),this._contentWidgets=[]}},{key:"_addFeatureRelationshipHandles",value:function(e){var t=this,n=this.flowItems,i=this.visibleElements;this.addHandles([(0,u.on)((function(){return e}),"select-record",(function(e){var t=e.featureViewModel;n&&(t.abilities={relationshipContent:!0},n.push(new ge({flowItems:n,viewModel:t,visibleElements:i})))})),(0,u.on)((function(){return e}),"show-all-records",(function(){if(n){var i=e.viewModel;i.showAllEnabled=!0;var r=new _e({visibleElements:{title:!1,description:!1},viewModel:i});t._addFeatureRelationshipHandles(r),n.push(r)}}))],Me)}},{key:"_setupContentWidgets",value:function(){var e,t=this;this._destroyContentWidgets();var n=this.headingLevel,i=this.visibleElements,r=null===(e=this.viewModel)||void 0===e?void 0:e.content,o=this.viewModel.contentViewModels;if(Array.isArray(r))r.forEach((function(e,r){if("attachments"===e.type&&(t._contentWidgets[r]=new k({displayType:e.displayType,headingLevel:i.title&&n<6?n+1:n,viewModel:o[r]})),"fields"===e.type&&(t._contentWidgets[r]=new H({viewModel:o[r]})),"media"===e.type&&(t._contentWidgets[r]=new re({viewModel:o[r]})),"text"===e.type&&(t._contentWidgets[r]=new R({viewModel:o[r]})),"custom"===e.type&&(t._contentWidgets[r]=new R({viewModel:o[r]})),"expression"===e.type&&(t._contentWidgets[r]=new ue({viewModel:o[r]})),"relationship"===e.type){var a=new _e({viewModel:o[r]});t._addFeatureRelationshipHandles(a),t._contentWidgets[r]=a}}),this);else{var a=o[0];a&&!a.destroyed&&(this._contentWidgets[0]=new R({viewModel:a}))}this.scheduleRender()}}]),s}((0,Ie.q)(f.Z));(0,s._)([(0,d.Cb)()],ke.prototype,"graphic",null),(0,s._)([(0,d.Cb)()],ke.prototype,"defaultPopupTemplateEnabled",null),(0,s._)([(0,d.Cb)()],ke.prototype,"flowItems",void 0),(0,s._)([(0,d.Cb)()],ke.prototype,"headingLevel",void 0),(0,s._)([(0,d.Cb)({readOnly:!0})],ke.prototype,"isTable",null),(0,s._)([(0,d.Cb)()],ke.prototype,"icon",null),(0,s._)([(0,d.Cb)()],ke.prototype,"label",null),(0,s._)([(0,d.Cb)(),(0,O.H)("esri/widgets/Feature/t9n/Feature")],ke.prototype,"messages",void 0),(0,s._)([(0,d.Cb)(),(0,O.H)("esri/t9n/common")],ke.prototype,"messagesCommon",void 0),(0,s._)([(0,d.Cb)()],ke.prototype,"spatialReference",null),(0,s._)([(0,d.Cb)()],ke.prototype,"timeZone",null),(0,s._)([(0,d.Cb)({readOnly:!0})],ke.prototype,"title",null),(0,s._)([(0,d.Cb)()],ke.prototype,"visibleElements",void 0),(0,s._)([(0,c.p)("visibleElements")],ke.prototype,"castVisibleElements",null),(0,s._)([(0,d.Cb)()],ke.prototype,"map",null),(0,s._)([(0,d.Cb)()],ke.prototype,"view",null),(0,s._)([(0,d.Cb)({type:be.Z})],ke.prototype,"viewModel",void 0);var Ce=ke=ge=(0,s._)([(0,p.j)("esri.widgets.Feature")],ke)},83244:function(e,t,n){n.d(t,{Z:function(){return c}});var i=n(43144),r=n(15671),o=n(60136),a=n(29388),l=n(27366),s=n(49861),u=(n(93169),n(32718),n(84936),n(69912)),d=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(e){var i;return(0,r.Z)(this,n),(i=t.call(this,e)).description=null,i.title=null,i}return(0,i.Z)(n)}(n(4819).Z);(0,l._)([(0,s.Cb)()],d.prototype,"description",void 0),(0,l._)([(0,s.Cb)()],d.prototype,"title",void 0);var c=d=(0,l._)([(0,u.j)("esri.widgets.Feature.FeatureAttachments.FeatureAttachmentsViewModel")],d)},50267:function(e,t,n){n.d(t,{Z:function(){return m}});var i=n(74165),r=n(15861),o=n(15671),a=n(43144),l=n(60136),s=n(29388),u=n(27366),d=n(52639),c=n(7138),p=n(94172),f=n(49861),v=(n(93169),n(32718),n(84936),n(69912)),h=n(45276),y=function(e){(0,l.Z)(n,e);var t=(0,s.Z)(n);function n(e){var i;return(0,o.Z)(this,n),(i=t.call(this,e))._loadingPromise=null,i.created=null,i.creator=null,i.destroyer=null,i.graphic=null,i.addHandles((0,p.watch)((function(){return i.creator}),(function(e){i._destroyContent(),i._createContent(e)}),p.initial)),i}return(0,a.Z)(n,[{key:"destroy",value:function(){this._destroyContent()}},{key:"state",get:function(){return this._loadingPromise?"loading":"ready"}},{key:"_destroyContent",value:function(){var e=this.created,t=this.graphic,n=this.destroyer;e&&t&&((0,h.vD)({type:"content",value:n,event:{graphic:t}}),this._set("created",null))}},{key:"_createContent",value:function(){var e=(0,r.Z)((0,i.Z)().mark((function e(t){var n,r,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=this.graphic)&&t){e.next=3;break}return e.abrupt("return");case 3:return r=(0,h.vD)({type:"content",value:t,event:{graphic:n}}),this._loadingPromise=r,this.notifyChange("state"),e.next=7,r;case 7:o=e.sent,r===this._loadingPromise&&(this._loadingPromise=null,this.notifyChange("state"),this._set("created",o));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(c.default);(0,u._)([(0,f.Cb)({readOnly:!0})],y.prototype,"created",void 0),(0,u._)([(0,f.Cb)()],y.prototype,"creator",void 0),(0,u._)([(0,f.Cb)()],y.prototype,"destroyer",void 0),(0,u._)([(0,f.Cb)({type:d.Z})],y.prototype,"graphic",void 0),(0,u._)([(0,f.Cb)({readOnly:!0})],y.prototype,"state",null);var m=y=(0,u._)([(0,v.j)("esri.widgets.Feature.FeatureContent.FeatureContentViewModel")],y)},57240:function(e,t,n){n.d(t,{Z:function(){return Z}});var i=n(74165),r=n(15861),o=n(15671),a=n(43144),l=n(97326),s=n(60136),u=n(29388),d=n(27366),c=(n(59486),n(52639)),p=n(7138),f=n(94172),v=n(14916),h=n(49861),y=(n(93169),n(32718),n(84936),n(69912)),m=(n(26418),n(23046),n(1374),n(39384),n(29230)),g=n(29514),_=(n(44051),n(98752)),b=n(26538),w=n(50267),I=n(86836),x=n(21516),M=n(83819),k=n(848),C=function(e){(0,s.Z)(n,e);var t=(0,u.Z)(n);function n(e){var a;return(0,o.Z)(this,n),(a=t.call(this,e))._abortController=null,a.expressionInfo=null,a.graphic=null,a.contentElement=null,a.contentElementViewModel=null,a.interceptor=null,a.location=null,a.view=null,a._cancelQuery=function(){var e=(0,l.Z)(a)._abortController;e&&e.abort(),a._abortController=null},a._createVM=function(){var e,t,n=null===(e=a.contentElement)||void 0===e?void 0:e.type;null===(t=a.contentElementViewModel)||void 0===t||t.destroy();var i="fields"===n?new I.Z:"media"===n?new x.Z:"text"===n?new w.Z:null;a._set("contentElementViewModel",i)},a._compile=(0,r.Z)((0,i.Z)().mark((function e(){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a._cancelQuery(),t=new AbortController,a._abortController=t,e.next=5,a._compileExpression();case 5:a._abortController===t&&(a._abortController=null);case 6:case"end":return e.stop()}}),e)}))),a._compileThrottled=(0,v.P)(a._compile,1,(0,l.Z)(a)),a._compileExpression=(0,r.Z)((0,i.Z)().mark((function e(){var t,n,r,o,s,u,d,c,p,f,v,h,y,b;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=(0,l.Z)(a),n=t.expressionInfo,r=t.graphic,o=t.interceptor,s=t.spatialReference,u=t.map,d=t.location,c=t.view,p=t._abortController,n&&r){e.next=3;break}return e.abrupt("return",void a._set("contentElement",null));case 3:return e.next=5,(0,M.LC)();case 5:if(f=e.sent,p===a._abortController){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,(0,M.Rq)({arcade:f,expressionInfo:n,graphic:r,location:d,interceptor:o,map:u,spatialReference:s,view:c});case 10:if((v=e.sent)&&"esri.arcade.Dictionary"===v.declaredClass){e.next=13;break}return e.abrupt("return",void a._set("contentElement",null));case 13:return e.next=15,v.castAsJsonAsync(null===p||void 0===p?void 0:p.signal);case 15:h=e.sent,y=null===h||void 0===h?void 0:h.type,b="media"===y?g.Z.fromJSON(h):"text"===y?_.Z.fromJSON(h):"fields"===y?m.Z.fromJSON(h):null,a._set("contentElement",b);case 19:case"end":return e.stop()}}),e)}))),a.addHandles([(0,f.watch)((function(){return[a.expressionInfo,a.graphic,a.map,a.spatialReference,a.view]}),(function(){return a._compileThrottled()}),f.initial),(0,f.watch)((function(){return[a.contentElement]}),(function(){return a._createVM()}),f.initial)]),a}return(0,a.Z)(n,[{key:"initialize",value:function(){this.addHandles(this._compileThrottled)}},{key:"destroy",value:function(){var e;this._cancelQuery(),null!==(e=this.contentElementViewModel)&&void 0!==e&&e.destroy(),this._set("contentElementViewModel",null),this._set("contentElement",null)}},{key:"spatialReference",get:function(){var e,t;return null!==(e=null===(t=this.view)||void 0===t?void 0:t.spatialReference)&&void 0!==e?e:null},set:function(e){this._override("spatialReference",e)}},{key:"state",get:function(){var e=this._abortController,t=this.contentElement,n=this.contentElementViewModel;return e?"loading":t||n?"ready":"disabled"}},{key:"map",get:function(){var e,t;return null!==(e=null===(t=this.view)||void 0===t?void 0:t.map)&&void 0!==e?e:null},set:function(e){this._override("map",e)}}]),n}(p.default);(0,d._)([(0,h.Cb)()],C.prototype,"_abortController",void 0),(0,d._)([(0,h.Cb)({type:b.Z})],C.prototype,"expressionInfo",void 0),(0,d._)([(0,h.Cb)({type:c.Z})],C.prototype,"graphic",void 0),(0,d._)([(0,h.Cb)({readOnly:!0})],C.prototype,"contentElement",void 0),(0,d._)([(0,h.Cb)({readOnly:!0})],C.prototype,"contentElementViewModel",void 0),(0,d._)([(0,h.Cb)()],C.prototype,"interceptor",void 0),(0,d._)([(0,h.Cb)({type:k.Z})],C.prototype,"location",void 0),(0,d._)([(0,h.Cb)()],C.prototype,"spatialReference",null),(0,d._)([(0,h.Cb)({readOnly:!0})],C.prototype,"state",null),(0,d._)([(0,h.Cb)()],C.prototype,"map",null),(0,d._)([(0,h.Cb)()],C.prototype,"view",void 0);var Z=C=(0,d._)([(0,y.j)("esri.widgets.Feature.FeatureExpression.FeatureExpressionViewModel")],C)},86836:function(e,t,n){n.d(t,{Z:function(){return h}});var i=n(15671),r=n(43144),o=n(60136),a=n(29388),l=n(27366),s=n(7138),u=n(49861),d=(n(93169),n(32718),n(84936),n(69912)),c=n(89860),p=n(16698),f=n(45276),v=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(e){var r;return(0,i.Z)(this,n),(r=t.call(this,e)).attributes=null,r.expressionInfos=null,r.description=null,r.fieldInfos=null,r.title=null,r}return(0,r.Z)(n,[{key:"formattedFieldInfos",get:function(){var e=this.expressionInfos,t=this.fieldInfos,n=[];return null!==t&&void 0!==t&&t.forEach((function(t){if(!t.hasOwnProperty("visible")||t.visible){var i=t.clone();i.label=(0,f.JD)(i,e),n.push(i)}})),n}}]),n}(s.default);(0,l._)([(0,u.Cb)()],v.prototype,"attributes",void 0),(0,l._)([(0,u.Cb)({type:[c.Z]})],v.prototype,"expressionInfos",void 0),(0,l._)([(0,u.Cb)()],v.prototype,"description",void 0),(0,l._)([(0,u.Cb)({type:[p.Z]})],v.prototype,"fieldInfos",void 0),(0,l._)([(0,u.Cb)({readOnly:!0})],v.prototype,"formattedFieldInfos",null),(0,l._)([(0,u.Cb)()],v.prototype,"title",void 0);var h=v=(0,l._)([(0,d.j)("esri.widgets.Feature.FeatureFields.FeatureFieldsViewModel")],v)},21516:function(e,t,n){n.d(t,{Z:function(){return w}});var i=n(93433),r=n(1413),o=n(15671),a=n(43144),l=n(60136),s=n(29388),u=n(27366),d=n(7138),c=n(63780),p=n(49861),f=n(89125),v=(n(93169),n(69912)),h=n(16698),y=n(60260),m=n(45276),g=n(16490),_={chartAnimation:!0},b=function(e){(0,l.Z)(n,e);var t=(0,s.Z)(n);function n(e){var i;return(0,o.Z)(this,n),(i=t.call(this,e)).abilities=(0,r.Z)({},_),i.activeMediaInfoIndex=0,i.attributes=null,i.description=null,i.fieldInfoMap=null,i.formattedAttributes=null,i.expressionAttributes=null,i.isAggregate=!1,i.layer=null,i.mediaInfos=null,i.popupTemplate=null,i.relatedInfos=null,i.title=null,i}return(0,a.Z)(n,[{key:"castAbilities",value:function(e){return(0,r.Z)((0,r.Z)({},_),e)}},{key:"activeMediaInfo",get:function(){return this.formattedMediaInfos[this.activeMediaInfoIndex]||null}},{key:"formattedMediaInfos",get:function(){return this._formatMediaInfos()||[]}},{key:"formattedMediaInfoCount",get:function(){return this.formattedMediaInfos.length}},{key:"setActiveMedia",value:function(e){this._setContentElementMedia(e)}},{key:"next",value:function(){this._pageContentElementMedia(1)}},{key:"previous",value:function(){this._pageContentElementMedia(-1)}},{key:"_setContentElementMedia",value:function(e){var t=this.formattedMediaInfoCount,n=(e+t)%t;this.activeMediaInfoIndex=n}},{key:"_pageContentElementMedia",value:function(e){var t=this.activeMediaInfoIndex+e;this._setContentElementMedia(t)}},{key:"_formatMediaInfos",value:function(){var e,t,n,i,r,o=this,a=this.mediaInfos,l=this.layer,s=null!==(e=this.attributes)&&void 0!==e?e:{},u=null!==(t=this.formattedAttributes)&&void 0!==t?t:{},d=null!==(n=this.expressionAttributes)&&void 0!==n?n:{},p=null!==(i=this.fieldInfoMap)&&void 0!==i?i:new Map;return null!==(r=null===a||void 0===a?void 0:a.map((function(e){var t=null===e||void 0===e?void 0:e.clone();if(!t)return null;if(t.title=(0,m.S$)({attributes:s,fieldInfoMap:p,globalAttributes:u,expressionAttributes:d,layer:l,text:t.title}),t.caption=(0,m.S$)({attributes:s,fieldInfoMap:p,globalAttributes:u,expressionAttributes:d,layer:l,text:t.caption}),t.altText=(0,m.S$)({attributes:s,fieldInfoMap:p,globalAttributes:u,expressionAttributes:d,layer:l,text:t.altText}),"image"===t.type){if(!t.value)return;return o._setImageValue({value:t.value,formattedAttributes:u,layer:l}),t.value.sourceURL?t:void 0}if("pie-chart"===t.type||"line-chart"===t.type||"column-chart"===t.type||"bar-chart"===t.type){if(!t.value)return;return o._setChartValue({value:t.value,chartType:t.type,attributes:s,formattedAttributes:u,layer:l,expressionAttributes:d}),t}return null})).filter(c.pC))&&void 0!==r?r:[]}},{key:"_setImageValue",value:function(e){var t,n=null!==(t=this.fieldInfoMap)&&void 0!==t?t:new Map,i=e.value,r=e.formattedAttributes,o=e.layer,a=i.linkURL,l=i.sourceURL;if(l){var s=(0,m.Qu)(l,o);i.sourceURL=(0,m.ar)({formattedAttributes:r,template:s,fieldInfoMap:n})}if(a){var u=(0,m.Qu)(a,o);i.linkURL=(0,m.ar)({formattedAttributes:r,template:u,fieldInfoMap:n})}}},{key:"_setChartValue",value:function(e){var t,n=this,r=e.value,o=e.attributes,a=e.formattedAttributes,l=e.chartType,s=e.layer,u=e.expressionAttributes,d=this.popupTemplate,c=this.relatedInfos,p=r.fields,f=r.normalizeField,v=s;if(r.fields=(0,m.iJ)(p,v),f&&(r.normalizeField=(0,m.k6)(f,v)),p.some((function(e){return!!(null!=a[e]||(0,m.oM)(e)&&null!==c&&void 0!==c&&c.size)}))){var h=null!==(t=null===d||void 0===d?void 0:d.fieldInfos)&&void 0!==t?t:[];p.forEach((function(e,t){var s,d=null===(s=r.colors)||void 0===s?void 0:s[t];if((0,m.oM)(e))r.series=[].concat((0,i.Z)(r.series),(0,i.Z)(n._getRelatedChartInfos({fieldInfos:h,fieldName:e,formattedAttributes:a,chartType:l,value:r,color:d})));else{var c=n._getChartOption({value:r,attributes:o,chartType:l,formattedAttributes:a,expressionAttributes:u,fieldName:e,fieldInfos:h,color:d});r.series.push(c)}}))}}},{key:"_getRelatedChartInfos",value:function(e){var t,n=this,i=e.fieldInfos,r=e.fieldName,o=e.formattedAttributes,a=e.chartType,l=e.value,s=e.color,u=[],d=(0,g.Bt)(r),c=d&&(null===(t=this.relatedInfos)||void 0===t?void 0:t.get(d.layerId.toString()));if(!c)return u;var p=c.relatedFeatures,f=c.relation;if(!f||!p)return u;var v=f.cardinality;return p.forEach((function(e){var t=e.attributes;t&&Object.keys(t).forEach((function(e){e===d.fieldName&&u.push(n._getChartOption({value:l,attributes:t,formattedAttributes:o,fieldName:r,chartType:a,relatedFieldName:e,hasMultipleRelatedFeatures:(null===p||void 0===p?void 0:p.length)>1,fieldInfos:i,color:s}))}))})),"one-to-many"===v||"many-to-many"===v?u:[u[0]]}},{key:"_getTooltip",value:function(e){var t=e.label,n=e.value;return"pie-chart"===e.chartType?"".concat(t):"".concat(t,": ").concat(n)}},{key:"_getChartOption",value:function(e){var t,n,i=e.value,r=e.attributes,o=e.formattedAttributes,a=e.expressionAttributes,l=e.fieldName,s=e.relatedFieldName,u=e.fieldInfos,d=e.chartType,c=e.hasMultipleRelatedFeatures,p=e.color,f=this.layer,v=null!==(t=this.fieldInfoMap)&&void 0!==t?t:new Map,_=i.normalizeField,b=i.tooltipField,w=_?(0,m.oM)(_)?r[(0,g.Bt)(_).fieldName]:r[_]:null,I=(0,m.Rd)(l)&&a&&void 0!==a[l]?a[l]:s&&void 0!==r[s]?r[s]:void 0!==r[l]?r[l]:o[l],x=new y.Z({fieldName:l,color:p,value:void 0===I?null:I&&w?I/w:I});if((0,m.oM)(l)){var M,k,C,Z,A,F=v.get(l.toLowerCase()),E=b&&v.get(b.toLowerCase()),T=null!==(M=null===F||void 0===F?void 0:F.fieldName)&&void 0!==M?M:l,R=c&&b?(0,g.Bt)(b).fieldName:null!==(k=null===E||void 0===E?void 0:E.fieldName)&&void 0!==k?k:b,S=c&&R?r[R]:null!==(C=null!==(Z=null!==(A=o[R])&&void 0!==A?A:null===F||void 0===F?void 0:F.label)&&void 0!==Z?Z:null===F||void 0===F?void 0:F.fieldName)&&void 0!==C?C:s,L=c&&s?r[s]:o[T];return x.tooltip=this._getTooltip({label:S,value:L,chartType:d}),x}var N=(0,m._R)(u,l),P=(0,m.k6)(l,f),O=b&&void 0!==o[b]?o[b]:(0,m.JD)(N||new h.Z({fieldName:P}),null===(n=this.popupTemplate)||void 0===n?void 0:n.expressionInfos),V=o[P];return x.tooltip=this._getTooltip({label:O,value:V,chartType:d}),x}}]),n}(d.default);(0,u._)([(0,p.Cb)()],b.prototype,"abilities",void 0),(0,u._)([(0,f.p)("abilities")],b.prototype,"castAbilities",null),(0,u._)([(0,p.Cb)()],b.prototype,"activeMediaInfoIndex",void 0),(0,u._)([(0,p.Cb)({readOnly:!0})],b.prototype,"activeMediaInfo",null),(0,u._)([(0,p.Cb)()],b.prototype,"attributes",void 0),(0,u._)([(0,p.Cb)()],b.prototype,"description",void 0),(0,u._)([(0,p.Cb)()],b.prototype,"fieldInfoMap",void 0),(0,u._)([(0,p.Cb)()],b.prototype,"formattedAttributes",void 0),(0,u._)([(0,p.Cb)()],b.prototype,"expressionAttributes",void 0),(0,u._)([(0,p.Cb)({readOnly:!0})],b.prototype,"formattedMediaInfos",null),(0,u._)([(0,p.Cb)()],b.prototype,"isAggregate",void 0),(0,u._)([(0,p.Cb)()],b.prototype,"layer",void 0),(0,u._)([(0,p.Cb)({readOnly:!0})],b.prototype,"formattedMediaInfoCount",null),(0,u._)([(0,p.Cb)()],b.prototype,"mediaInfos",void 0),(0,u._)([(0,p.Cb)()],b.prototype,"popupTemplate",void 0),(0,u._)([(0,p.Cb)()],b.prototype,"relatedInfos",void 0),(0,u._)([(0,p.Cb)()],b.prototype,"title",void 0);var w=b=(0,u._)([(0,v.j)("esri.widgets.Feature.FeatureMedia.FeatureMediaViewModel")],b)},71045:function(e,t,n){n.d(t,{Z:function(){return H}});var i,r=n(74165),o=n(15861),a=n(1413),l=n(15671),s=n(43144),u=n(97326),d=n(60136),c=n(29388),p=n(27366),f=(n(59486),n(52639)),v=(0,s.Z)((function e(t,n){(0,l.Z)(this,e),this.preLayerQueryCallback=t,this.preRequestCallback=n,this.preLayerQueryCallback||(this.preLayerQueryCallback=function(e){}),this.preRequestCallback||(this.preLayerQueryCallback=function(e){})})),h=n(7138),y=n(63780),m=n(79056),g=n(32718),_=n(66978),b=n(94172),w=n(14916),I=n(49861),x=n(89125),M=(n(93169),n(69912)),k=n(98752),C=n(6701),Z=n(83244),A=n(50267),F=n(57240),E=n(86836),T=n(21516),R=n(67667),S=n(83819),L=n(45276),N=n(16490),P=n(848),O="content-view-models",V="relationship-view-models",j={attachmentsContent:!0,chartAnimation:!0,customContent:!0,expressionContent:!0,fieldsContent:!0,mediaContent:!0,textContent:!0,relationshipContent:!0},q=i=function(e){(0,d.Z)(n,e);var t=(0,c.Z)(n);function n(e){var i;return(0,l.Z)(this,n),(i=t.call(this,e))._error=null,i._featureAbortController=null,i._graphicChangedThrottled=(0,w.P)(i._graphicChanged,1,(0,u.Z)(i)),i._expressionAttributes=null,i._graphicExpressionAttributes=null,i.abilities=(0,a.Z)({},j),i.content=null,i.contentViewModels=[],i.description=null,i.defaultPopupTemplateEnabled=!1,i.formattedAttributes=null,i.lastEditInfo=null,i.location=null,i.relatedInfos=new Map,i.title="",i.view=null,i._isAllowedContentType=function(e){var t=(0,u.Z)(i).abilities;return"attachments"===e.type&&!!t.attachmentsContent||"custom"===e.type&&!!t.customContent||"fields"===e.type&&!!t.fieldsContent||"media"===e.type&&!!t.mediaContent||"text"===e.type&&!!t.textContent||"expression"===e.type&&!!t.expressionContent||"relationship"===e.type&&!!t.relationshipContent},i.addHandles((0,b.watch)((function(){return[i.graphic,i._effectivePopupTemplate,i.abilities,i.timeZone]}),(function(){return i._graphicChangedThrottled()}),b.initial)),i}return(0,s.Z)(n,[{key:"initialize",value:function(){this.addHandles(this._graphicChangedThrottled)}},{key:"destroy",value:function(){this._clear(),this._cancelFeatureQuery(),this._error=null,this.graphic=null,this._destroyContentViewModels(),this.relatedInfos.clear()}},{key:"_effectivePopupTemplate",get:function(){return null!=this.graphic?this.graphic.getEffectivePopupTemplate(this.defaultPopupTemplateEnabled):null}},{key:"_fieldInfoMap",get:function(){return(0,L.EB)((0,L.Hs)(this._effectivePopupTemplate),this._sourceLayer)}},{key:"_sourceLayer",get:function(){return(0,L.l$)(this.graphic)}},{key:"castAbilities",value:function(e){return(0,a.Z)((0,a.Z)({},j),e)}},{key:"isTable",get:function(){var e;return(null===(e=this._sourceLayer)||void 0===e?void 0:e.isTable)||!1}},{key:"state",get:function(){return this.graphic?this._error?"error":this.waitingForContent?"loading":"ready":"disabled"}},{key:"graphic",set:function(e){var t;this._set("graphic",null!==(t=null===e||void 0===e?void 0:e.clone())&&void 0!==t?t:null)}},{key:"spatialReference",get:function(){var e,t;return null!==(e=null===(t=this.view)||void 0===t?void 0:t.spatialReference)&&void 0!==e?e:null},set:function(e){this._override("spatialReference",e)}},{key:"timeZone",get:function(){var e,t;return null!==(e=null===(t=this.view)||void 0===t?void 0:t.timeZone)&&void 0!==e?e:C.By},set:function(e){this._overrideIfSome("timeZone",e)}},{key:"map",get:function(){var e;return(null===(e=this.view)||void 0===e?void 0:e.map)||null},set:function(e){this._override("map",e)}},{key:"waitingForContent",get:function(){return!!this._featureAbortController}},{key:"setActiveMedia",value:function(e,t){var n=this.contentViewModels[e];n instanceof T.Z&&n.setActiveMedia(t)}},{key:"nextMedia",value:function(e){var t=this.contentViewModels[e];t instanceof T.Z&&t.next()}},{key:"previousMedia",value:function(e){var t=this.contentViewModels[e];t instanceof T.Z&&t.previous()}},{key:"updateGeometry",value:function(){var e=(0,o.Z)((0,r.Z)().mark((function e(){var t,n,i,o,a,l,s,u,d;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.graphic,i=this.spatialReference,o=this._sourceLayer,e.next=3,null===o||void 0===o?void 0:o.load();case 3:if((a=null===o||void 0===o?void 0:o.objectIdField)&&n&&o){e.next=6;break}return e.abrupt("return");case 6:if(null!=(l=null===n||void 0===n||null===(t=n.attributes)||void 0===t?void 0:t[a])){e.next=9;break}return e.abrupt("return");case 9:if(s=[l],n.geometry){e.next=16;break}return e.next=13,(0,L.K7)({layer:o,graphic:n,outFields:[],objectIds:s,returnGeometry:!0,spatialReference:i});case 13:u=e.sent,(d=null===u||void 0===u?void 0:u.geometry)&&(n.geometry=d);case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_clear",value:function(){this._set("title",""),this._set("content",null),this._set("formattedAttributes",null)}},{key:"_graphicChanged",value:function(){var e=(0,o.Z)((0,r.Z)().mark((function e(){var t,n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._cancelFeatureQuery(),this._error=null,this._clear(),t=this.graphic){e.next=4;break}return e.abrupt("return");case 4:return n=new AbortController,this._featureAbortController=n,e.prev=6,e.next=9,this._queryFeature({signal:n.signal});case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(6),(0,_.D_)(e.t0)||(this._error=e.t0,g.Z.getLogger(this).error("error","The popupTemplate could not be displayed for this feature.",{error:e.t0,graphic:t,popupTemplate:this._effectivePopupTemplate}));case 14:this._featureAbortController===n&&(this._featureAbortController=null);case 15:case"end":return e.stop()}}),e,this,[[6,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"_cancelFeatureQuery",value:function(){var e=this._featureAbortController;e&&e.abort(),this._featureAbortController=null}},{key:"_compileContentElement",value:function(e,t){return"attachments"===e.type?this._compileAttachments(e,t):"custom"===e.type?this._compileCustom(e,t):"fields"===e.type?this._compileFields(e,t):"media"===e.type?this._compileMedia(e,t):"text"===e.type?this._compileText(e,t):"expression"===e.type?this._compileExpression(e,t):"relationship"===e.type?this._compileRelationship(e,t):void 0}},{key:"_compileContent",value:function(e){var t=this;if(this._destroyContentViewModels(),this.graphic)return Array.isArray(e)?e.filter(this._isAllowedContentType).map((function(e,n){return t._compileContentElement(e,n)})).filter(y.pC):"string"==typeof e?this._compileText(new k.Z({text:e}),0).text:e}},{key:"_destroyContentViewModels",value:function(){this.removeHandles(V),this.removeHandles(O),this.contentViewModels.forEach((function(e){return e&&!e.destroyed&&e.destroy()})),this._set("contentViewModels",[])}},{key:"_matchesFeature",value:function(e,t){var n,i=null===e||void 0===e||null===(n=e.graphic)||void 0===n?void 0:n.getObjectId(),r=null===t||void 0===t?void 0:t.getObjectId();return null!=i&&null!=r&&i===r}},{key:"_setRelatedFeaturesViewModels",value:function(e){var t=this,n=e.relatedFeatureViewModels,r=e.relatedFeatures,o=e.map,a=this.view,l=this.spatialReference,s=this.timeZone;null!==r&&void 0!==r&&r.filter(Boolean).forEach((function(e){n.some((function(n){return t._matchesFeature(n,e)}))||n.add(new i({abilities:{relationshipContent:!1},map:o,view:a,spatialReference:l,timeZone:s,graphic:e}))})),n.forEach((function(e){var i=null===r||void 0===r?void 0:r.find((function(n){return t._matchesFeature(e,n)}));i||n.remove(e)}))}},{key:"_setExpressionContentVM",value:function(e,t){var n=this.formattedAttributes,i=e.contentElement,r=e.contentElementViewModel,o=null===i||void 0===i?void 0:i.type;r&&o&&("fields"===o&&(this._createFieldsFormattedAttributes({contentElement:i,contentElementIndex:t,formattedAttributes:n}),r.set(this._createFieldsVMParams(i,t))),"media"===o&&(this._createMediaFormattedAttributes({contentElement:i,contentElementIndex:t,formattedAttributes:n}),r.set(this._createMediaVMParams(i,t))),"text"===o&&r.set(this._createTextVMParams(i)))}},{key:"_compileRelationship",value:function(e,t){var n=this,i=e.displayCount,r=e.orderByFields,o=e.relationshipId,l=e.title,s=e.description,u=this._sourceLayer,d=this.graphic,c=this.map;if((0,L.Um)(u)){var p=new R.Z((0,a.Z)({displayCount:i,graphic:d,orderByFields:r,relationshipId:o,layer:u,map:c},this._compileTitleAndDesc({title:l,description:s})));return this.contentViewModels[t]=p,this.addHandles((0,b.on)((function(){return p.relatedFeatures}),"change",(function(){return n._setRelatedFeaturesViewModels(p)})),V),e}}},{key:"_compileExpression",value:function(e,t){var n=this,r=e.expressionInfo,o=this.graphic,a=this.map,l=this.spatialReference,s=this.view,u=this.location,d=new F.Z({expressionInfo:r,graphic:o,interceptor:i.interceptor,map:a,spatialReference:l,view:s,location:u});return this.contentViewModels[t]=d,this.addHandles((0,b.watch)((function(){return d.contentElementViewModel}),(function(){return n._setExpressionContentVM(d,t)}),b.initial),O),e}},{key:"_compileAttachments",value:function(e,t){var n=this.graphic,i=e.description,r=e.title;return this.contentViewModels[t]=new Z.Z((0,a.Z)({graphic:n},this._compileTitleAndDesc({title:r,description:i}))),e}},{key:"_compileCustom",value:function(e,t){var n=this.graphic,i=e.creator,r=e.destroyer;return this.contentViewModels[t]=new A.Z({graphic:n,creator:i,destroyer:r}),e}},{key:"_compileTitleAndDesc",value:function(e){var t=e.title,n=e.description,i=this._fieldInfoMap,r=this._sourceLayer,o=this.graphic,a=this.formattedAttributes,l=null===o||void 0===o?void 0:o.attributes,s=this._expressionAttributes,u=a.global;return{title:(0,L.S$)({attributes:l,fieldInfoMap:i,globalAttributes:u,expressionAttributes:s,layer:r,text:t}),description:(0,L.S$)({attributes:l,fieldInfoMap:i,globalAttributes:u,expressionAttributes:s,layer:r,text:n})}}},{key:"_createFieldsVMParams",value:function(e,t){var n=this._effectivePopupTemplate,i=this.formattedAttributes,r=(0,a.Z)((0,a.Z)({},null===i||void 0===i?void 0:i.global),null===i||void 0===i?void 0:i.content[t]),o=(null===e||void 0===e?void 0:e.fieldInfos)||(null===n||void 0===n?void 0:n.fieldInfos),l=null===o||void 0===o?void 0:o.filter((function(e){var t=e.fieldName;return!!t&&((0,L.Rd)(t)||(0,L.oM)(t)||r.hasOwnProperty(t))})),s=null===n||void 0===n?void 0:n.expressionInfos,u=e.description,d=e.title;return(0,a.Z)({attributes:r,expressionInfos:s,fieldInfos:l},this._compileTitleAndDesc({title:d,description:u}))}},{key:"_compileFields",value:function(e,t){var n=e.clone(),i=new E.Z(this._createFieldsVMParams(e,t));return this.contentViewModels[t]=i,n.fieldInfos=i.formattedFieldInfos.slice(0),n}},{key:"_createMediaVMParams",value:function(e,t){var n,i=this.abilities,r=this.graphic,o=this._fieldInfoMap,l=this._effectivePopupTemplate,s=this.relatedInfos,u=this._sourceLayer,d=this._expressionAttributes,c=this.formattedAttributes,p=null!==(n=null===r||void 0===r?void 0:r.attributes)&&void 0!==n?n:{},f=e.description,v=e.mediaInfos,h=e.title;return(0,a.Z)({abilities:{chartAnimation:i.chartAnimation},activeMediaInfoIndex:e.activeMediaInfoIndex||0,attributes:p,isAggregate:null===r||void 0===r?void 0:r.isAggregate,layer:u,fieldInfoMap:o,formattedAttributes:(0,a.Z)((0,a.Z)({},null===c||void 0===c?void 0:c.global),null===c||void 0===c?void 0:c.content[t]),expressionAttributes:d,mediaInfos:v,popupTemplate:l,relatedInfos:s},this._compileTitleAndDesc({title:h,description:f}))}},{key:"_compileMedia",value:function(e,t){var n=e.clone(),i=new T.Z(this._createMediaVMParams(e,t));return n.mediaInfos=i.formattedMediaInfos.slice(0),this.contentViewModels[t]=i,n}},{key:"_createTextVMParams",value:function(e){var t=this.graphic,n=this._fieldInfoMap,i=this._sourceLayer,r=this._expressionAttributes;if(e&&e.text){var o,a,l,s=null!==(o=null===t||void 0===t?void 0:t.attributes)&&void 0!==o?o:{},u=null!==(a=null===(l=this.formattedAttributes)||void 0===l?void 0:l.global)&&void 0!==a?a:{};e.text=(0,L.S$)({attributes:s,fieldInfoMap:n,globalAttributes:u,expressionAttributes:r,layer:i,text:e.text})}return{graphic:t,creator:e.text}}},{key:"_compileText",value:function(e,t){var n=e.clone();return this.contentViewModels[t]=new A.Z(this._createTextVMParams(n)),n}},{key:"_compileLastEditInfo",value:function(){var e=this._effectivePopupTemplate,t=this._sourceLayer,n=this.graphic,i=this.timeZone;if(e){var r=e.lastEditInfoEnabled,o=null===t||void 0===t?void 0:t.editFieldsInfo;return r&&o?(0,L.Tj)(o,null===n||void 0===n?void 0:n.attributes,i,t):void 0}}},{key:"_compileTitle",value:function(e){var t,n,i,r=this._fieldInfoMap,o=this._sourceLayer,a=this.graphic,l=this._expressionAttributes,s=null!==(t=null===a||void 0===a?void 0:a.attributes)&&void 0!==t?t:{},u=null!==(n=null===(i=this.formattedAttributes)||void 0===i?void 0:i.global)&&void 0!==n?n:{};return(0,L.S$)({attributes:s,fieldInfoMap:r,globalAttributes:u,expressionAttributes:l,layer:o,text:e})}},{key:"_getTitle",value:function(){var e=(0,o.Z)((0,r.Z)().mark((function e(){var t,n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._effectivePopupTemplate,n=this.graphic,e.abrupt("return",n?(0,L.vD)({type:"title",value:null===t||void 0===t?void 0:t.title,event:{graphic:n}}):null);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getContent",value:function(){var e=(0,o.Z)((0,r.Z)().mark((function e(){var t,n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._effectivePopupTemplate,n=this.graphic,e.abrupt("return",n?(0,L.vD)({type:"content",value:null===t||void 0===t?void 0:t.content,event:{graphic:n}}):null);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_queryFeature",value:function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t){var n,o,l,s,u,d,c,p,f,v,h,y,m;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this._featureAbortController,o=this._sourceLayer,l=this.graphic,s=this._effectivePopupTemplate,u=this.map,d=this.view,c=this.spatialReference,p=this.location,n===this._featureAbortController&&l){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,(0,L.Xh)({graphic:l,popupTemplate:s,layer:o,spatialReference:c},t);case 5:return e.next=7,(0,_.as)({content:this._getContent(),title:this._getTitle()});case 7:return f=e.sent,v=f.content.value,h=f.title.value,e.next=12,(0,_.as)({checkForRelatedFeatures:this._checkForRelatedFeatures(t),expressionAttributes:(0,S.Um)({expressionInfos:null===s||void 0===s?void 0:s.expressionInfos,spatialReference:c,graphic:l,map:u,interceptor:i.interceptor,view:d,options:t,location:p})});case 12:y=e.sent,m=y.expressionAttributes.value,n===this._featureAbortController&&l&&(this._expressionAttributes=m,this._graphicExpressionAttributes=(0,a.Z)((0,a.Z)({},l.attributes),m),this._set("formattedAttributes",this._createFormattedAttributes(v)),this._set("title",this._compileTitle(h)),this._set("lastEditInfo",this._compileLastEditInfo()||null),this._set("content",this._compileContent(v)||null));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_createMediaFormattedAttributes",value:function(e){var t=e.contentElement,n=e.contentElementIndex,i=e.formattedAttributes,r=this._effectivePopupTemplate,o=this.graphic,l=this.relatedInfos,s=this._sourceLayer,u=this._fieldInfoMap,d=this._graphicExpressionAttributes,c=this.timeZone;i.content[n]=(0,L.uI)({fieldInfos:null===r||void 0===r?void 0:r.fieldInfos,graphic:o,attributes:(0,a.Z)((0,a.Z)({},d),t.attributes),layer:s,fieldInfoMap:u,relatedInfos:l,timeZone:c})}},{key:"_createFieldsFormattedAttributes",value:function(e){var t=e.contentElement,n=e.contentElementIndex,i=e.formattedAttributes;if(t.fieldInfos){var r=this.graphic,o=this.relatedInfos,l=this._sourceLayer,s=this._fieldInfoMap,u=this._graphicExpressionAttributes,d=this.timeZone;i.content[n]=(0,L.uI)({fieldInfos:t.fieldInfos,graphic:r,attributes:(0,a.Z)((0,a.Z)({},u),t.attributes),layer:l,fieldInfoMap:s,relatedInfos:o,timeZone:d})}}},{key:"_createFormattedAttributes",value:function(e){var t=this,n=this._effectivePopupTemplate,i=this.graphic,r=this.relatedInfos,o=this._sourceLayer,a=this._fieldInfoMap,l=this._graphicExpressionAttributes,s=this.timeZone,u=null===n||void 0===n?void 0:n.fieldInfos,d={global:(0,L.uI)({fieldInfos:u,graphic:i,attributes:l,layer:o,fieldInfoMap:a,relatedInfos:r,timeZone:s}),content:[]};return Array.isArray(e)&&e.forEach((function(e,n){"fields"===e.type&&t._createFieldsFormattedAttributes({contentElement:e,contentElementIndex:n,formattedAttributes:d}),"media"===e.type&&t._createMediaFormattedAttributes({contentElement:e,contentElementIndex:n,formattedAttributes:d})})),d}},{key:"_checkForRelatedFeatures",value:function(e){var t=this.graphic,n=this._effectivePopupTemplate;return this._queryRelatedInfos(t,(0,L.Hs)(n),e)}},{key:"_queryRelatedInfos",value:function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t,n,i){var o,a,l,s,u,d,c=this;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=this.relatedInfos,a=this._sourceLayer,o.clear(),null==(null===a||void 0===a?void 0:a.associatedLayer)){e.next=8;break}return e.next=5,null===a||void 0===a?void 0:a.associatedLayer.load(i);case 5:e.t0=e.sent,e.next=9;break;case 8:e.t0=a;case 9:if((l=e.t0)&&t){e.next=12;break}return e.abrupt("return");case 12:if(s=n.filter((function(e){return!!e.fieldName&&(0,L.oM)(e.fieldName)})),null!==s&&void 0!==s&&s.length){e.next=15;break}return e.abrupt("return");case 15:return n.forEach((function(e){return c._configureRelatedInfo(e,l)})),e.next=18,(0,N.Vb)({relatedInfos:o,layer:l},i);case 18:return u=e.sent,Object.keys(u).forEach((function(e){var t,n=o.get(e.toString()),i=null===(t=u[e])||void 0===t?void 0:t.value;n&&i&&(n.layerInfo=i.data)})),e.next=22,(0,N.kp)({graphic:t,relatedInfos:o,layer:l},i);case 22:d=e.sent,Object.keys(d).forEach((function(e){var t;(0,N.lg)(null===(t=d[e])||void 0===t?void 0:t.value,o.get(e.toString()))}));case 24:case"end":return e.stop()}}),e,this)})));return function(t,n,i){return e.apply(this,arguments)}}()},{key:"_configureRelatedInfo",value:function(e,t){var n=this.relatedInfos,i=(0,N.Bt)(e.fieldName||"");if(i){var r=i.layerId,o=i.fieldName;if(r){var a=n.get(r.toString())||(0,N.uc)(r,t);a&&((0,N.NF)({relatedInfo:a,fieldName:o,fieldInfo:e}),this.relatedInfos.set(r,a))}}}}]),n}((0,m.IG)(h.default));q.interceptor=new v(L.s5,L.Ns),(0,p._)([(0,I.Cb)()],q.prototype,"_error",void 0),(0,p._)([(0,I.Cb)()],q.prototype,"_featureAbortController",void 0),(0,p._)([(0,I.Cb)({readOnly:!0})],q.prototype,"_effectivePopupTemplate",null),(0,p._)([(0,I.Cb)({readOnly:!0})],q.prototype,"_fieldInfoMap",null),(0,p._)([(0,I.Cb)({readOnly:!0})],q.prototype,"_sourceLayer",null),(0,p._)([(0,I.Cb)()],q.prototype,"abilities",void 0),(0,p._)([(0,x.p)("abilities")],q.prototype,"castAbilities",null),(0,p._)([(0,I.Cb)({readOnly:!0})],q.prototype,"content",void 0),(0,p._)([(0,I.Cb)({readOnly:!0})],q.prototype,"contentViewModels",void 0),(0,p._)([(0,I.Cb)()],q.prototype,"description",void 0),(0,p._)([(0,I.Cb)({type:Boolean})],q.prototype,"defaultPopupTemplateEnabled",void 0),(0,p._)([(0,I.Cb)({readOnly:!0})],q.prototype,"isTable",null),(0,p._)([(0,I.Cb)({readOnly:!0})],q.prototype,"state",null),(0,p._)([(0,I.Cb)({readOnly:!0})],q.prototype,"formattedAttributes",void 0),(0,p._)([(0,I.Cb)({type:f.Z,value:null})],q.prototype,"graphic",null),(0,p._)([(0,I.Cb)({readOnly:!0})],q.prototype,"lastEditInfo",void 0),(0,p._)([(0,I.Cb)({type:P.Z})],q.prototype,"location",void 0),(0,p._)([(0,I.Cb)({readOnly:!0})],q.prototype,"relatedInfos",void 0),(0,p._)([(0,I.Cb)()],q.prototype,"spatialReference",null),(0,p._)([(0,I.Cb)()],q.prototype,"timeZone",null),(0,p._)([(0,I.Cb)({readOnly:!0})],q.prototype,"title",void 0),(0,p._)([(0,I.Cb)()],q.prototype,"map",null),(0,p._)([(0,I.Cb)({readOnly:!0})],q.prototype,"waitingForContent",null),(0,p._)([(0,I.Cb)()],q.prototype,"view",void 0);var H=q=i=(0,p._)([(0,M.j)("esri.widgets.Feature.FeatureViewModel")],q)},29845:function(e,t,n){n.d(t,{i:function(){return r}});var i="esri-feature",r={base:i,container:"".concat(i,"__size-container"),title:"".concat(i,"__title"),main:"".concat(i,"__main-container"),btn:"".concat(i,"__button"),icon:"".concat(i,"__icon"),content:"".concat(i,"__content"),contentNode:"".concat(i,"__content-node"),contentNodeText:"".concat(i,"__content-node--text"),contentElement:"".concat(i,"__content-element"),text:"".concat(i,"__text"),lastEditedInfo:"".concat(i,"__last-edited-info"),fields:"".concat(i,"__fields"),fieldHeader:"".concat(i,"__field-header"),fieldData:"".concat(i,"__field-data"),fieldDataDate:"".concat(i,"__field-data--date"),loadingSpinnerContainer:"".concat(i,"__loading-container")}},72221:function(e,t,n){n.d(t,{q:function(){return p}});var i=n(15671),r=n(43144),o=n(60136),a=n(29388),l=n(27366),s=(n(32718),n(93169),n(84936),n(10064),n(69912)),u=n(29845),d=n(53963),c=n(67005),p=function(e){var t=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(){var e;return(0,i.Z)(this,n),(e=t.apply(this,arguments)).renderNodeContent=function(t){return(0,d.Qd)(t)&&!t.destroyed?(0,c.u)("div",{class:u.i.contentNode,key:t},t.render()):t instanceof HTMLElement?(0,c.u)("div",{afterCreate:e._attachToNode,bind:t,class:u.i.contentNode,key:t}):(0,d.o)(t)?(0,c.u)("div",{afterCreate:e._attachToNode,bind:t.domNode,class:u.i.contentNode,key:t}):null},e}return(0,r.Z)(n,[{key:"_attachToNode",value:function(e){e.appendChild(this)}}]),n}(e);return t=(0,l._)([(0,s.j)("esri.widgets.Feature.support.FeatureContentMixin")],t)}},83819:function(e,t,n){n.d(t,{LC:function(){return h},Rq:function(){return b},Um:function(){return I}});var i=n(37762),r=n(29439),o=n(74165),a=n(1413),l=n(15861),s=n(32718),u=n(66978),d=n(64326),c=n(45276),p=n(7021),f=function(){return s.Z.getLogger("esri.widgets.Feature.support.arcadeFeatureUtils")};function v(e){return"string"==typeof e?(0,c.qD)((0,c.M3)(e)):Array.isArray(e)?function(e){return'<ul class="esri-widget__list">'.concat(e.map((function(e){return"<li>".concat("string"==typeof e?(0,c.qD)((0,c.M3)(e)):e,"</li>")})).join(""),"</ul>")}(e):"esri.arcade.Dictionary"===(null===e||void 0===e?void 0:e.declaredClass)?function(e){var t=e.keys().map((function(t){var n=e.field(t);return"<tr><th>".concat(t,"</th><td>").concat("string"==typeof n?(0,c.qD)((0,c.M3)(n)):n,"</td></tr>")})).join("");return'<table class="'.concat(p.z.table,'">').concat(t,"</table>")}(e):e}function h(){return Promise.all([n.e(45026),n.e(55515)]).then(n.bind(n,55515))}function y(e){return"createQuery"in e&&"queryFeatures"in e}function m(e){return g.apply(this,arguments)}function g(){return g=(0,l.Z)((0,o.Z)().mark((function e(t){var n,i,r,a,l,s,u,d,c,p;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.graphic,i=t.view,r=t.options,a=n.isAggregate,l=n.layer,a&&l&&"2d"===(null===i||void 0===i?void 0:i.type)){e.next=4;break}return e.abrupt("return",[]);case 4:return e.next=6,i.whenLayerView(l);case 6:if(y(s=e.sent)){e.next=9;break}return e.abrupt("return",[]);case 9:return u=s.createQuery(),d=n.getObjectId(),u.aggregateIds=null!=d?[d]:[],e.next=13,s.queryFeatures(u,r);case 13:return c=e.sent,p=c.features,e.abrupt("return",p);case 16:case"end":return e.stop()}}),e)}))),g.apply(this,arguments)}function _(e){var t=e.layer,n=e.aggregatedFeatures,i=e.interceptor,r=t.fields,o=t.objectIdField,l=t.geometryType,s=t.spatialReference,u=t.displayField;return new d.default((0,a.Z)((0,a.Z)({fields:r,objectIdField:o,geometryType:l,spatialReference:s,displayField:u,interceptor:i},"feature"===t.type?{templates:t.templates,typeIdField:t.typeIdField,types:t.types}:null),{},{source:n}))}function b(e){return w.apply(this,arguments)}function w(){return w=(0,l.Z)((0,o.Z)().mark((function e(t){var n,i,l,s,u,d,c,p,v,h,y,g,b,w,I,x,M,k,C,Z,A,F,E,T;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=t.expressionInfo,u=t.arcade,d=t.interceptor,c=t.spatialReference,p=t.map,v=t.graphic,h=t.location,y=t.view,g=t.options,null!==s&&void 0!==s&&s.expression){e.next=3;break}return e.abrupt("return",null);case 3:return b=v.isAggregate,w=null!==(n=v.sourceLayer||v.layer)&&void 0!==n?n:void 0,I=b?"feature-reduction-popup":"popup",x=u.createArcadeProfile(I),M=u.createArcadeExecutor(s.expression,x).catch((function(e){return f().error("arcade-executor-error",{error:e,expressionInfo:s})})),e.next=10,Promise.all([m({graphic:v,view:y,options:g}),M]);case 10:if(k=e.sent,C=(0,r.Z)(k,2),Z=C[0],A=C[1]){e.next=16;break}return e.abrupt("return",null);case 16:return F="feature-reduction-popup"===I?_({layer:w,aggregatedFeatures:Z,interceptor:d}):void 0,E=(0,a.Z)((0,a.Z)({},"feature-reduction-popup"===I?{$aggregatedFeatures:F}:{$datastore:null===w||void 0===w?void 0:w.url,$layer:"feature"===(null===w||void 0===w?void 0:w.type)||"subtype-sublayer"===(null===w||void 0===w?void 0:w.type)||"catalog-footprint"===(null===w||void 0===w?void 0:w.type)||"oriented-imagery"===(null===w||void 0===w?void 0:w.type)?w:"scene"===(null===w||void 0===w?void 0:w.type)&&null!=w.associatedLayer?w.associatedLayer:void 0,$map:p,$userInput:h,$graph:"knowledge-graph-sublayer"===(null===w||void 0===w?void 0:w.type)?null===w||void 0===w||null===(i=w.parentCompositeLayer)||void 0===i?void 0:i.knowledgeGraph:void 0}),{},{$feature:v}),T={abortSignal:null!==(l=null===g||void 0===g?void 0:g.signal)&&void 0!==l?l:void 0,interceptor:null!==d&&void 0!==d?d:void 0,rawOutput:!0,spatialReference:null!==c&&void 0!==c?c:void 0,timeZone:null===y||void 0===y?void 0:y.timeZone},e.next=19,A.executeAsync(E,T).catch((function(e){return f().error("arcade-execution-error",{error:e,graphic:v,expressionInfo:s})})).finally((function(){return null===F||void 0===F?void 0:F.destroy()}));case 19:return e.abrupt("return",e.sent);case 20:case"end":return e.stop()}}),e)}))),w.apply(this,arguments)}function I(e){return x.apply(this,arguments)}function x(){return x=(0,l.Z)((0,o.Z)().mark((function e(t){var n,r,a,l,s,d,c,p,f,y,m,g,_,w,I,x;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.expressionInfos,r=t.spatialReference,a=t.graphic,l=t.interceptor,s=t.map,d=t.view,c=t.location,p=t.options,null!==n&&void 0!==n&&n.length){e.next=3;break}return e.abrupt("return",{});case 3:return e.next=5,h();case 5:f=e.sent,y={},m=(0,i.Z)(n);try{for(m.s();!(g=m.n()).done;)_=g.value,y["expression/".concat(_.name)]=b({expressionInfo:_,arcade:f,interceptor:l,spatialReference:r,map:s,graphic:a,location:c,view:d,options:p})}catch(o){m.e(o)}finally{m.f()}return e.next=11,(0,u.as)(y);case 11:for(x in w=e.sent,I={},w)I[x]=v(w[x].value);return e.abrupt("return",I);case 15:case"end":return e.stop()}}),e)}))),x.apply(this,arguments)}},16490:function(e,t,n){n.d(t,{Bt:function(){return b},NF:function(){return R},Vb:function(){return E},kp:function(){return T},lg:function(){return M},uc:function(){return x}});var i=n(74165),r=n(37762),o=n(15861),a=n(29439),l=n(76200),s=n(63780),u=n(10064),d=n(32718),c=n(66978),p=n(37270),f=(n(93169),n(64020),n(77946)),v=(n(42265),n(19545),n(35995),n(68860),n(83448),n(92975),n(41414),n(16889),n(53866),n(32238),n(77577),n(848),n(80885),n(29909),n(76335),n(78952),n(22186),n(59486),n(78084),n(49818),n(21149)),h=(n(11812),n(99837),n(99086)),y=(n(54307),n(33997)),m=n(45276),g=function(){return d.Z.getLogger("esri.widgets.Feature.support.relatedFeatureUtils")},_=new Map;function b(e){if(!(0,m.oM)(e))return null;var t=e.split("/").slice(1),n=(0,a.Z)(t,2);return{layerId:n[0],fieldName:n[1]}}function w(e){var t,n=e.originRelationship,i=e.relationships,r=e.layerId;return null!==(t=i.find((function(e){var t=e.relatedTableId,i=e.id;return"".concat(t)===r&&i===(null===n||void 0===n?void 0:n.id)})))&&void 0!==t?t:null}function I(e,t){var n=t.toLowerCase();for(var i in e)if(i.toLowerCase()===n)return e[i];return null}function x(e,t){var n=function(e,t){if(!t.relationships)return null;var n=null;return t.relationships.some((function(t){return t.id===parseInt(e,10)&&(n=t,!0)})),n}(e,t);if(n)return{url:"".concat(t.url,"/").concat(n.relatedTableId),sourceSpatialReference:t.spatialReference,relation:n,relatedFields:[],outStatistics:[]}}function M(e,t){if(t&&e){var n=e.features,i=e.statsFeatures,r=null===n||void 0===n?void 0:n.value;t.relatedFeatures=r?r.features:[];var o=null===i||void 0===i?void 0:i.value;t.relatedStatsFeatures=o?o.features:[]}}function k(e,t,n,i){var r,o,a,l,s=new h.default;return s.outFields=["*"],s.relationshipId="number"==typeof t.id?t.id:parseInt(t.id,10),s.objectIds=[e.attributes[n.objectIdField]],s.gdbVersion=null!==(r=n.gdbVersion)&&void 0!==r?r:null,s.historicMoment=null!==(o=n.historicMoment)&&void 0!==o?o:null,null!==(a=null===(l=n.queryRelatedFeatures)||void 0===l?void 0:l.call(n,s,i))&&void 0!==a?a:Promise.resolve({})}function C(e,t,n){for(var i=0,r=[];i<t.length;)r.push("".concat(e," IN (").concat(t.slice(i,n+i),")")),i+=n;return r.join(" OR ")}function Z(e){return e?(0,s.Tw)(e):void 0}function A(e){return e?(0,s.Tw)(e,(function(e,t){return JSON.stringify(e.toJSON())===JSON.stringify(t.toJSON())})):void 0}function F(){return F=(0,o.Z)((0,i.Z)().mark((function e(t,n,r,o){var a,l,s,u,d,h,y,m,g,_,b,x,M,F,E,T,R,L,N,P,O,V,j;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r.layerId.toString(),l=n.layerInfo,s=n.relation,u=n.relatedFields,d=n.outStatistics,h=n.url,y=n.sourceSpatialReference,m=Z(u),g=A(d),l&&s){e.next=3;break}return e.abrupt("return",null);case 3:if(null===(_=w({originRelationship:s,relationships:l.relationships,layerId:a}))||void 0===_||!_.relationshipTableId||!_.keyFieldInRelationshipTable){e.next=17;break}return e.next=7,k(t,_,r,o);case 7:if(e.t0=t.attributes[r.objectIdField],b=e.sent[e.t0]){e.next=11;break}return e.abrupt("return",null);case 11:if(x=b.features.map((function(e){return e.attributes[l.objectIdField]})),null===g||void 0===g||!g.length||!l.supportsStatistics){e.next=17;break}return(M=new v.Z).where=C(l.objectIdField,x,1e3),M.outFields=m,M.outStatistics=g,M.sourceSpatialReference=y,F={features:Promise.resolve(b),statsFeatures:(0,f.e)(h,M)},e.abrupt("return",(0,c.as)(F));case 17:if(!(E=null===_||void 0===_?void 0:_.keyField)){e.next=21;break}return T=(0,p.H7)(S(l.fields,E)),R=I(t.attributes,s.keyField),L=T?"".concat(E,"=").concat(R):"".concat(E,"='").concat(R,"'"),N=r.historicMoment,P=r.gdbVersion,O=(0,f.e)(h,new v.Z({where:L,outFields:m,sourceSpatialReference:y,historicMoment:N,gdbVersion:P}),o),V=null!==g&&void 0!==g&&g.length&&l.supportsStatistics?(0,f.e)(h,new v.Z({where:L,outFields:m,outStatistics:g,sourceSpatialReference:y}),o):null,j={features:O},e.abrupt("return",(V&&(j.statsFeatures=V),(0,c.as)(j)));case 21:return e.abrupt("return",null);case 22:case"end":return e.stop()}}),e)}))),F.apply(this,arguments)}function E(e,t){var n=e.relatedInfos,i=e.layer,r={};return n.forEach((function(e,t){var n=e.relation;if(!n){var o=new u.Z("relation-required","A relation is required on a layer to retrieve related records.");throw g().error(o),o}var a=n.relatedTableId;if("number"!=typeof a){var s=new u.Z("A related table ID is required on a layer to retrieve related records.");throw g().error(s),s}var d="".concat(i.url,"/").concat(a),c=_.get(d),p=null!==c&&void 0!==c?c:function(e,t){return(0,l.Z)(e,{query:{f:"json"},signal:null===t||void 0===t?void 0:t.signal})}(d);c||_.set(d,p),r[t]=p})),(0,c.Hl)((0,c.as)(r),t)}function T(e,t){var n=e.graphic,i=e.relatedInfos,r=e.layer,o={};return i.forEach((function(e,i){e.layerInfo&&(o[i]=function(e,t,n,i){return F.apply(this,arguments)}(n,e,r,t))})),(0,c.as)(o)}function R(e){var t,n=e.relatedInfo,i=e.fieldName,r=e.fieldInfo;if(null!==(t=n.relatedFields)&&void 0!==t&&t.push(i),r.statisticType){var o,a=new y.Z({statisticType:r.statisticType,onStatisticField:i,outStatisticFieldName:i});null===(o=n.outStatistics)||void 0===o||o.push(a)}}function S(e,t){if(null!=e){t=t.toLowerCase();var n,i=(0,r.Z)(e);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(o&&o.name.toLowerCase()===t)return o}}catch(a){i.e(a)}finally{i.f()}}return null}},30333:function(e,t,n){n.d(t,{q:function(){return o}});var i=n(643),r=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,target:"_blank",label:"{messages.view}"},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"App Studio Player"},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Collector"},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Explorer"},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Navigator"},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Survey123"},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Trek2There"},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Workforce"},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"iForm"},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"FlowFinity"},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Laserfische"},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Microsoft Power Bi"}];function o(e,t){if("string"!=typeof t||!t)return t;var n=r.find((function(e){return e.pattern.test(t)}));if(!n)return t;var o=t.match(n.pattern),a=null===o||void 0===o?void 0:o[2],l=(0,i.gx)((0,i.gx)(n.label,{messages:e,hierPart:a}),{appName:n.appName}),s=n.target?' target="'.concat(n.target,'"'):"",u="_blank"===n.target?' rel="noreferrer"':"";return t.replace(n.pattern,"<a".concat(s,' href="$1"').concat(u,">").concat(l,"</a>"))}},53963:function(e,t,n){n.d(t,{Qd:function(){return i},o:function(){return r}});n(78088),n(67005),n(80975);function i(e){return e&&"function"==typeof e.render}function r(e){return e&&"function"==typeof e.postMixInProperties&&"function"==typeof e.buildRendering&&"function"==typeof e.postCreate&&"function"==typeof e.startup}}}]);
//# sourceMappingURL=46639.b17d8c23.chunk.js.map