"use strict";(self.webpackChunkreact_training=self.webpackChunkreact_training||[]).push([[65772,93655],{68748:function(t,e,i){i.d(e,{a:function(){return y},z:function(){return v}});var n=i(37762),o=i(15671),s=i(43144),a=i(60136),r=i(29388),l=i(27366),c=i(80987),u=i(60354),d=(i(93169),i(32718),i(49861)),h=(i(84936),i(69912)),y=function(t){(0,a.Z)(i,t);var e=(0,r.Z)(i);function i(t){var n;return(0,o.Z)(this,i),(n=e.call(this,t)).addHandles([n.on("before-add",(function(t){null==t.item&&t.preventDefault()})),n.on("after-add",(function(t){return n._own(t.item)})),n.on("after-remove",(function(t){return n._release(t.item)}))]),n}return(0,s.Z)(i,[{key:"owner",get:function(){return this._get("owner")},set:function(t){t!==this._get("owner")&&(this._releaseAll(),this._set("owner",t),this._ownAll())}},{key:"_ownAll",value:function(){var t,e=(0,n.Z)(this.items);try{for(e.s();!(t=e.n()).done;){var i=t.value;this._own(i)}}catch(o){e.e(o)}finally{e.f()}}},{key:"_releaseAll",value:function(){var t,e=(0,n.Z)(this.items);try{for(e.s();!(t=e.n()).done;){var i=t.value;this._release(i)}}catch(o){e.e(o)}finally{e.f()}}},{key:"_createNewInstance",value:function(t){return this.itemType?new(c.Z.ofType(this.itemType.Type))(t):new c.Z(t)}}]),i}(c.Z);function v(t,e){return{type:t,cast:u.R,set:function(i){var n=(0,u.Z)(i,this._get(e),t);n.owner=this,this._set(e,n)}}}(0,l._)([(0,d.Cb)()],y.prototype,"owner",null),y=(0,l._)([(0,h.j)("esri.core.support.OwningCollection")],y)},46634:function(t,e,i){i.d(e,{R:function(){return v}});var n=i(15671),o=i(43144),s=i(60136),a=i(29388),r=i(27366),l=i(7138),c=i(42537),u=i(94172),d=i(99346),h=i(49861),y=i(69912),v=function(t){(0,s.Z)(i,t);var e=(0,a.Z)(i);function i(){var t;return(0,n.Z)(this,i),(t=e.apply(this,arguments)).updating=!1,t._handleId=0,t._scheduleHandleId=0,t._pendingPromises=new Set,t}return(0,o.Z)(i,[{key:"destroy",value:function(){this.removeAll()}},{key:"add",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._installWatch(t,e,i,u.watch)}},{key:"addWhen",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._installWatch(t,e,i,u.when)}},{key:"addOnCollectionChange",value:function(t,e){var i=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=n.initial,s=void 0!==o&&o,a=n.final,r=void 0!==a&&a,l=++this._handleId;return this.addHandles([(0,u.on)(t,"after-changes",this._createSyncUpdatingCallback(),u.sync),(0,u.on)(t,"change",e,{onListenerAdd:s?function(t){return e({added:t.toArray(),removed:[]})}:void 0,onListenerRemove:r?function(t){return e({added:[],removed:t.toArray()})}:void 0})],l),(0,c.kB)((function(){return i.removeHandles(l)}))}},{key:"addPromise",value:function(t){var e=this;if(null==t)return t;var i=++this._handleId;this.addHandles((0,c.kB)((function(){e._pendingPromises.delete(t)&&(0!==e._pendingPromises.size||e.hasHandles(p)||e._set("updating",!1))})),i),this._pendingPromises.add(t),this._set("updating",!0);var n=function(){return e.removeHandles(i)};return t.then(n,n),t}},{key:"removeAll",value:function(){this._pendingPromises.clear(),this.removeAllHandles(),this._set("updating",!1)}},{key:"_installWatch",value:function(t,e){var i=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3?arguments[3]:void 0,s=++this._handleId;n.sync||this._installSyncUpdatingWatch(t,s);var a=o(t,e,n);return this.addHandles(a,s),(0,c.kB)((function(){return i.removeHandles(s)}))}},{key:"_installSyncUpdatingWatch",value:function(t,e){var i=this._createSyncUpdatingCallback(),n=(0,u.watch)(t,i,{sync:!0,equals:function(){return!1}});return this.addHandles(n,e),n}},{key:"_createSyncUpdatingCallback",value:function(){var t=this;return function(){t.removeHandles(p),++t._scheduleHandleId;var e=t._scheduleHandleId;t._get("updating")||t._set("updating",!0),t.addHandles((0,d.Os)((function(){e===t._scheduleHandleId&&(t._set("updating",t._pendingPromises.size>0),t.removeHandles(p))})),p)}}}]),i}(l.default);(0,r._)([(0,h.Cb)({readOnly:!0})],v.prototype,"updating",void 0),v=(0,r._)([(0,y.j)("esri.core.support.UpdatingHandles")],v);var p=-42},93655:function(t,e,i){i.r(e),i.d(e,{default:function(){return b}});var n=i(15671),o=i(43144),s=i(88301),a=i(61120),r=i(60136),l=i(29388),c=i(27366),u=i(49861),d=(i(93169),i(32718),i(84936),i(69912)),h=i(68748),y=i(30651),v=i(6693),p=i(56811),m=i(78983),w=i(64575),A=function(t){(0,r.Z)(i,t);var e=(0,l.Z)(i);function i(t){var o;return(0,n.Z)(this,i),(o=e.call(this,t)).elevationInfo=null,o.graphics=new m.J,o.screenSizePerspectiveEnabled=!0,o.type="graphics",o.internal=!1,o}return(0,o.Z)(i,[{key:"destroy",value:function(){this.removeAll(),this.graphics.destroy()}},{key:"add",value:function(t){return this.graphics.add(t),this}},{key:"addMany",value:function(t){return this.graphics.addMany(t),this}},{key:"removeAll",value:function(){return this.graphics.removeAll(),this}},{key:"remove",value:function(t){this.graphics.remove(t)}},{key:"removeMany",value:function(t){this.graphics.removeMany(t)}},{key:"on",value:function(t,e){return(0,s.Z)((0,a.Z)(i.prototype),"on",this).call(this,t,e)}},{key:"graphicChanged",value:function(t){this.emit("graphic-update",t)}}]),i}((0,v.h7)((0,p.M)(y.Z)));(0,c._)([(0,u.Cb)({type:w.Z})],A.prototype,"elevationInfo",void 0),(0,c._)([(0,u.Cb)((0,h.z)(m.J,"graphics"))],A.prototype,"graphics",void 0),(0,c._)([(0,u.Cb)({type:["show","hide"]})],A.prototype,"listMode",void 0),(0,c._)([(0,u.Cb)()],A.prototype,"screenSizePerspectiveEnabled",void 0),(0,c._)([(0,u.Cb)({readOnly:!0})],A.prototype,"type",void 0),(0,c._)([(0,u.Cb)({constructOnly:!0})],A.prototype,"internal",void 0);var b=A=(0,c._)([(0,d.j)("esri.layers.GraphicsLayer")],A)},78983:function(t,e,i){i.d(e,{J:function(){return h}});var n=i(15671),o=i(43144),s=i(60136),a=i(29388),r=i(27366),l=i(52639),c=(i(32718),i(25243)),u=(i(84936),i(93169),i(10064),i(42017)),d=i(69912),h=function(t){(0,s.Z)(i,t);var e=(0,a.Z)(i);function i(){return(0,n.Z)(this,i),e.apply(this,arguments)}return(0,o.Z)(i,[{key:"_own",value:function(t){t.layer&&"remove"in t.layer&&t.layer!==this.owner&&t.layer.remove(t),t.layer=this.owner}},{key:"_release",value:function(t){t.layer===this.owner&&(t.layer=null)}}]),i}(i(68748).a);(0,r._)([(0,u.c)({Type:l.Z,ensureType:(0,c.se)(l.Z)})],h.prototype,"itemType",void 0),h=(0,r._)([(0,d.j)("esri.support.GraphicsCollection")],h)},83089:function(t,e,i){function n(t,e,i){if(e&&null!==t&&void 0!==t&&t.map){var n=t.map,o=n.layers.find((function(t){return t===e}));o||n.add(e,i),o&&null!=i&&n.layers.reorder(o,i)}}function o(t,e){var i="subtype-sublayer"===(null===e||void 0===e?void 0:e.type)?e.parent:e;return t.allLayerViews.find((function(t){var e=t.layer;return e===i||"sublayers"in e&&null!=e.sublayers&&e.sublayers.includes(i)}))}i.d(e,{j:function(){return o},p:function(){return n}})},65772:function(t,e,i){i.r(e),i.d(e,{default:function(){return F}});var n=i(15671),o=i(43144),s=i(60136),a=i(29388),r=i(27366),l=i(94172),c=i(49861),u=(i(93169),i(32718)),d=(i(84936),i(69912)),h=i(33565),y=i(8905),v=(i(80975),i(80532)),p=i(67005),m=i(97326),w=i(65905),A=i(51995),b=i(35996),f=i(14404),_=i(7138),g=function(t){(0,s.Z)(i,t);var e=(0,a.Z)(i);function i(t){var o;return(0,n.Z)(this,i),(o=e.call(this,t)).arrowsToggle=!1,o.capSelect=!1,o.colorPicker=!0,o.stylePicker=!0,o.widthInput=!0,o}return(0,o.Z)(i)}(_.default);(0,r._)([(0,c.Cb)({type:Boolean,nonNullable:!0})],g.prototype,"arrowsToggle",void 0),(0,r._)([(0,c.Cb)({type:Boolean,nonNullable:!0})],g.prototype,"capSelect",void 0),(0,r._)([(0,c.Cb)({type:Boolean,nonNullable:!0})],g.prototype,"colorPicker",void 0),(0,r._)([(0,c.Cb)({type:Boolean,nonNullable:!0})],g.prototype,"stylePicker",void 0),(0,r._)([(0,c.Cb)({type:Boolean,nonNullable:!0})],g.prototype,"widthInput",void 0);var k=g=(0,r._)([(0,d.j)("esri.widgets.UtilityNetworkAssociations.VisibleElementsSettingsPane")],g),S="esri-un-associations",C={divControlsSymbolPicker:"".concat(S,"__div-controls-symbol-picker"),dropdown:"".concat(S,"__dropdown"),dropdownItemLineCap:"".concat(S,"__dropdown-item-line-cap"),dropdownItemLinePattern:"".concat(S,"__dropdown-item-line-pattern"),dropdownSelectedItemLineCap:"".concat(S,"__dropdown-selected-item-line-cap"),dropdownSelectedItemLinePattern:"".concat(S,"__dropdown-selected-item-line-pattern"),dropdownTrigger:"".concat(S,"__dropdown-trigger"),labelAndToggle:"".concat(S,"__label-and-toggle")},x=function(t){(0,s.Z)(r,t);var e=(0,a.Z)(r);function r(t,i){var o;return(0,n.Z)(this,r),(o=e.call(this,t,i))._lineCapTypes=["butt","round","square"],o._lineStyleTypes=["solid","dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","short-dash","short-dash-dot","short-dash-dot-dot","short-dot"],o.lineSymbol=new f.default,o.messages=null,o.showArrows=!1,o.visibleElements=new k,o._afterComponentCreate=o._afterComponentCreate.bind((0,m.Z)(o)),o}return(0,o.Z)(r,[{key:"render",value:function(){var t=this.messages.input,e=t.lineCap,i=t.lineColor,n=t.lineStyle,o=t.lineWidth,s=t.showArrows,a=this.visibleElements,r=this.lineSymbol;return(0,p.u)("div",{class:C.divControlsSymbolPicker},a.arrowsToggle?this._renderToggle(s,this.showArrows,r,"marker"):void 0,a.capSelect?this._renderLineStylePicker(e,this._lineCapTypes,r,"cap"):void 0,a.colorPicker&&r.color?this._renderColorPicker(i,r.color.toHex(),r,"color"):void 0,a.stylePicker?this._renderLineStylePicker(n,this._lineStyleTypes,r,"style"):void 0,a.widthInput?this._renderNumberInput(o,r.width.toString(),r,"width"):void 0)}},{key:"loadDependencies",value:function(){return(0,y.h)({dropdown:function(){return Promise.all([i.e(92358),i.e(89219),i.e(43001)]).then(i.bind(i,43001))},"dropdown-group":function(){return i.e(89992).then(i.bind(i,89992))},"dropdown-item":function(){return Promise.all([i.e(92358),i.e(19784)]).then(i.bind(i,19784))},input:function(){return Promise.all([i.e(92358),i.e(46895),i.e(54438),i.e(8715),i.e(16746)]).then(i.bind(i,75655))},"input-number":function(){return Promise.all([i.e(92358),i.e(46895),i.e(54438),i.e(18135),i.e(77244)]).then(i.bind(i,90460))},label:function(){return Promise.all([i.e(92358),i.e(35738)]).then(i.bind(i,35738))},switch:function(){return Promise.all([i.e(92358),i.e(54438),i.e(40206)]).then(i.bind(i,40206))}})}},{key:"_afterComponentCreate",value:function(t){"value"in t&&null!=t.value&&"setNumberValue"in t&&t.setNumberValue({committing:!1,value:t.value,origin:"direct"})}},{key:"_renderColorPicker",value:function(t,e,i,n){return(0,p.u)("calcite-label",{scale:"s"},t,(0,p.u)("calcite-input",{scale:"s",type:"color",value:e,onCalciteInputInput:function(t){var e=t.target;i.set(n,new A.Z(e.value))}}))}},{key:"_renderLineStylePicker",value:function(t,e,i,n){var o="style"===n,s="esri/widgets/UtilityNetworkAssociations/assets/img";return(0,p.u)("calcite-label",{scale:"s"},t,(0,p.u)("calcite-dropdown",{class:C.dropdown,onCalciteDropdownSelect:function(t){var e=t.target;i.set(n,e.selectedItems[0].label)}},(0,p.u)("div",{class:C.dropdownTrigger,role:"button",slot:"trigger"},(0,p.u)("div",{class:o?C.dropdownSelectedItemLinePattern:C.dropdownSelectedItemLineCap,style:"background-image:url(".concat((0,w.V)("".concat(s,"/line-").concat(o?"patterns":"caps","/").concat(i[n],".png")),")")})),(0,p.u)("calcite-dropdown-group",null,e.map((function(t){return function(t,e){return(0,p.u)("calcite-dropdown-item",{label:t,selected:i[e]===t},(0,p.u)("div",{class:o?C.dropdownItemLinePattern:C.dropdownItemLineCap,style:"background-image:url(".concat((0,w.V)("".concat(s,"/line-").concat(o?"patterns":"caps","/").concat(t,".png")),")")}))}(t,n)})))))}},{key:"_renderNumberInput",value:function(t,e,i,n){return(0,p.u)("calcite-label",{scale:"s"},t,(0,p.u)("calcite-input-number",{afterCreate:this._afterComponentCreate,max:10,min:1,scale:"s",step:1,type:"number",value:e,onCalciteInputNumberChange:function(t){var e=t.target;i.set(n,e.value)}}))}},{key:"_renderToggle",value:function(t,e,i,n){return(0,p.u)("div",{class:C.labelAndToggle},(0,p.u)("calcite-label",{scale:"s"},t),(0,p.u)("calcite-switch",{bind:this,checked:e,onCalciteSwitchChange:function(t){t.target.checked?i.set(n,new b.Z({style:"arrow"})):i.set(n,null)}}))}}]),r}(h.Z);(0,r._)([(0,c.Cb)()],x.prototype,"lineSymbol",void 0),(0,r._)([(0,c.Cb)(),(0,v.H)("esri/widgets/UtilityNetworkAssociations/t9n/UtilityNetworkAssociations")],x.prototype,"messages",void 0),(0,r._)([(0,c.Cb)()],x.prototype,"showArrows",void 0),(0,r._)([(0,c.Cb)({type:k,nonNullable:!0})],x.prototype,"visibleElements",void 0);var L=x=(0,r._)([(0,d.j)("esri.widgets.UtilityNetworkAssociations.UtilityNetworkAssociationsLineSymbolPicker")],x),Z=i(37762),M=i(74165),E=i(15861),N=i(52639),I=(i(59166),i(80987)),P=i(10064),G=i(46634),T=i(93655),H=i(83089),R=i(36257),U=i(41201),V=function(t){(0,s.Z)(i,t);var e=(0,a.Z)(i);function i(t){var o;return(0,n.Z)(this,i),(o=e.call(this,t))._internalGraphicsLayerConnectivity=o._createInternalGraphicsLayer("Connectivity Associations (Internal)"),o._internalGraphicsLayerStructuralAttachment=o._createInternalGraphicsLayer("Structural Attachment Associations (Internal)"),o._initialValidationsFinished=!1,o._updatingHandles=new G.R,o.autoRefreshAssociations=!1,o.connectivityAssociationsLineSymbol=new f.default({style:"short-dash",width:2,color:[190,159,159,1]}),o.executionError="",o.loadErrors=new I.Z,o.maxAllowableAssociations=250,o.showAssociationsEnabled=!1,o.showArrowsConnectivity=!1,o.showArrowsStructuralAttachment=!1,o.structuralAttachmentAssociationsLineSymbol=new f.default({style:"short-dash",width:2,color:[159,190,159,1]}),o}return(0,o.Z)(i,[{key:"initialize",value:function(){var t=this,e=function(){var e=(0,E.Z)((0,M.Z)().mark((function e(){return(0,M.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.messages,e.t0){e.next=5;break}return e.next=4,(0,U.ME)("esri/widgets/UtilityNetworkAssociations/t9n/UtilityNetworkAssociations");case 4:t.messages=e.sent;case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e().then((function(){t.view||(t.view=null),t.utilityNetwork||(t.utilityNetwork=null),t.addHandles([(0,l.watch)((function(){return[t.view,t.utilityNetwork]}),(0,E.Z)((0,M.Z)().mark((function e(){var i,n,o,s,a,r,l,c;return(0,M.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.loadErrors,s=t.messages.info,a=s.noUtilityNetwork,r=s.noView,t._initialValidationsFinished=!1,o.removeAll(),l=!1,c=!1,t.removeAssociations(),"utility"===(null===(i=t.utilityNetwork)||void 0===i?void 0:i.type)){e.next=8;break}t.loadErrors.push(a),u.Z.getLogger(t).error(new P.Z("utilityNetworkAssociations:missing-property",a)),e.next=13;break;case 8:if(e.t0=t.utilityNetwork.loaded,e.t0){e.next=12;break}return e.next=12,t.utilityNetwork.load();case 12:l=!0;case 13:if("2d"!==(null===(n=t.view)||void 0===n?void 0:n.type)?(t.loadErrors.push(r),u.Z.getLogger(t).error(new P.Z("utilityNetworkAssociations:missing-property",r))):((0,H.p)(t.view,t._internalGraphicsLayerConnectivity),(0,H.p)(t.view,t._internalGraphicsLayerStructuralAttachment),c=!0),e.t1=l&&c&&t.showAssociationsEnabled,!e.t1){e.next=18;break}return e.next=18,t.showAssociations();case 18:t._internalGraphicsLayerConnectivity.visible=t.includeConnectivityAssociations,t._internalGraphicsLayerStructuralAttachment.visible=t.includeStructuralAttachmentAssociations,t._initialValidationsFinished=!0;case 21:case"end":return e.stop()}}),e)}))),{initial:!0}),(0,l.watch)((function(){var e;return[null===(e=t.view)||void 0===e?void 0:e.stationary,t.showAssociationsEnabled,t.maxAllowableAssociations]}),(0,E.Z)((0,M.Z)().mark((function e(){var i;return(0,M.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=(null===(i=t.view)||void 0===i?void 0:i.stationary)&&t.showAssociationsEnabled&&(t.includeConnectivityAssociations||t.includeStructuralAttachmentAssociations),!e.t0){e.next=4;break}return e.next=4,t.showAssociations();case 4:case"end":return e.stop()}}),e)})))),(0,l.watch)((function(){return[t.showArrowsConnectivity]}),(function(){var e=t.connectivityAssociationsLineSymbol.clone();e.marker=null,t.showArrowsConnectivity&&(e.marker=new b.Z({color:t.connectivityAssociationsLineSymbol.color,placement:"end",style:"arrow"}));var i,n=(0,Z.Z)(t._internalGraphicsLayerConnectivity.graphics);try{for(n.s();!(i=n.n()).done;){i.value.symbol=e}}catch(o){n.e(o)}finally{n.f()}})),(0,l.watch)((function(){return[t.showArrowsStructuralAttachment]}),(function(){var e=t.structuralAttachmentAssociationsLineSymbol.clone();e.marker=null,t.showArrowsStructuralAttachment&&(e.marker=new b.Z({color:t.structuralAttachmentAssociationsLineSymbol.color,placement:"end",style:"arrow"}));var i,n=(0,Z.Z)(t._internalGraphicsLayerStructuralAttachment.graphics);try{for(n.s();!(i=n.n()).done;){i.value.symbol=e}}catch(o){n.e(o)}finally{n.f()}})),(0,l.watch)((function(){var e=t.connectivityAssociationsLineSymbol;return[e.cap,e.color,e.style,e.width,e.marker]}),(function(){var e,i=t.connectivityAssociationsLineSymbol.clone(),n=(0,Z.Z)(t._internalGraphicsLayerConnectivity.graphics);try{for(n.s();!(e=n.n()).done;){e.value.symbol=i}}catch(o){n.e(o)}finally{n.f()}t.showArrowsConnectivity=!1,i.marker=null,t.connectivityAssociationsLineSymbol.marker&&(t.showArrowsConnectivity=!0,i.marker=new b.Z({color:t.connectivityAssociationsLineSymbol.color,placement:"end",style:"arrow"}))})),(0,l.watch)((function(){var e=t.structuralAttachmentAssociationsLineSymbol;return[e.cap,e.color,e.style,e.width,e.marker]}),(function(){var e,i=t.structuralAttachmentAssociationsLineSymbol.clone(),n=(0,Z.Z)(t._internalGraphicsLayerStructuralAttachment.graphics);try{for(n.s();!(e=n.n()).done;){e.value.symbol=i}}catch(o){n.e(o)}finally{n.f()}t.showArrowsStructuralAttachment=!1,i.marker=null,t.structuralAttachmentAssociationsLineSymbol.marker&&(t.showArrowsStructuralAttachment=!0,i.marker=new b.Z({color:t.structuralAttachmentAssociationsLineSymbol.color,placement:"end",style:"arrow"}))})),(0,R.qe)(e)])}))}},{key:"destroy",value:function(){this._updatingHandles.destroy(),this.view=null,this._removeInternalGraphicsLayers()}},{key:"includeConnectivityAssociations",set:function(t){this._set("includeConnectivityAssociations",t),this._internalGraphicsLayerConnectivity.visible=t}},{key:"includeStructuralAttachmentAssociations",set:function(t){this._set("includeStructuralAttachmentAssociations",t),this._internalGraphicsLayerStructuralAttachment.visible=t}},{key:"state",get:function(){return this.loadErrors.length?"disabled":this._updatingHandles.updating?"executing":""!==this.executionError?"warning":this._initialValidationsFinished?"ready":"loading"}},{key:"utilityNetwork",set:function(t){this._get("utilityNetwork")!==t&&this._set("utilityNetwork",t)}},{key:"view",set:function(t){this._get("view")!==t&&this._set("view",t)}},{key:"removeAssociations",value:function(){this._internalGraphicsLayerConnectivity.removeAll(),this._internalGraphicsLayerStructuralAttachment.removeAll()}},{key:"showAssociations",value:function(){var t=(0,E.Z)((0,M.Z)().mark((function t(){var e,i,n,o,s,a,r=this;return(0,M.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=this.messages.info,o=n.maxAllowableAssociationsExceeded,s=n.noAssociationsFound,a=this.utilityNetwork,this._set("executionError",""),this._updatingHandles.addPromise(null===a||void 0===a?void 0:a.synthesizeAssociationGeometries({returnConnectivityAssociations:this.includeConnectivityAssociations,returnAttachmentAssociations:this.includeStructuralAttachmentAssociations,extent:null===(e=this.view)||void 0===e?void 0:e.extent,outSpatialReference:null===(i=this.utilityNetwork)||void 0===i?void 0:i.spatialReference.clone(),maxGeometryCount:this.maxAllowableAssociations}).then((function(t){var e=[],i=[];return null!==t&&void 0!==t&&t.maxGeometryCountExceeded?(r.removeAssociations(),void r._set("executionError",o)):0===(null===t||void 0===t?void 0:t.associations.length)?(r.removeAssociations(),void r._set("executionError",s)):void(t&&(e=null===t||void 0===t?void 0:t.associations.filter((function(t){return"connectivity"===t.associationType})).map((function(t){return r.connectivityAssociationsLineSymbol.marker=null,r.showArrowsConnectivity&&(r.connectivityAssociationsLineSymbol.marker=new b.Z({color:r.connectivityAssociationsLineSymbol.color,placement:"end",style:"arrow"})),new N.Z({geometry:t.geometry.clone(),symbol:r.connectivityAssociationsLineSymbol})})),i=t.associations.filter((function(t){return"attachment"===t.associationType})).map((function(t){return r.structuralAttachmentAssociationsLineSymbol.marker=null,r.showArrowsStructuralAttachment&&(r.structuralAttachmentAssociationsLineSymbol.marker=new b.Z({color:r.structuralAttachmentAssociationsLineSymbol.color,placement:"end",style:"arrow"})),new N.Z({geometry:t.geometry.clone(),symbol:r.structuralAttachmentAssociationsLineSymbol})})),r._internalGraphicsLayerConnectivity.removeAll(),e.length>0&&r._internalGraphicsLayerConnectivity.addMany(e),r._internalGraphicsLayerStructuralAttachment.removeAll(),i.length>0&&r._internalGraphicsLayerStructuralAttachment.addMany(i)))}),(function(t){var e=t.message;r._set("executionError",e)})));case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"_createInternalGraphicsLayer",value:function(t){return new T.default({listMode:"hide",internal:!0,title:t})}},{key:"_removeInternalGraphicsLayers",value:function(){var t;this._internalGraphicsLayerConnectivity&&this._internalGraphicsLayerStructuralAttachment&&(null===(t=this.view)||void 0===t?void 0:t.map)&&(this.view.map.remove(this._internalGraphicsLayerConnectivity),this.view.map.remove(this._internalGraphicsLayerStructuralAttachment))}}]),i}(_.default);(0,r._)([(0,c.Cb)()],V.prototype,"_initialValidationsFinished",void 0),(0,r._)([(0,c.Cb)()],V.prototype,"autoRefreshAssociations",void 0),(0,r._)([(0,c.Cb)({type:f.default,nonNullable:!0})],V.prototype,"connectivityAssociationsLineSymbol",void 0),(0,r._)([(0,c.Cb)({readOnly:!0})],V.prototype,"executionError",void 0),(0,r._)([(0,c.Cb)({type:Boolean,value:!0})],V.prototype,"includeConnectivityAssociations",null),(0,r._)([(0,c.Cb)({type:Boolean,value:!0})],V.prototype,"includeStructuralAttachmentAssociations",null),(0,r._)([(0,c.Cb)()],V.prototype,"loadErrors",void 0),(0,r._)([(0,c.Cb)()],V.prototype,"maxAllowableAssociations",void 0),(0,r._)([(0,c.Cb)()],V.prototype,"messages",void 0),(0,r._)([(0,c.Cb)()],V.prototype,"showAssociationsEnabled",void 0),(0,r._)([(0,c.Cb)()],V.prototype,"showArrowsConnectivity",void 0),(0,r._)([(0,c.Cb)()],V.prototype,"showArrowsStructuralAttachment",void 0),(0,r._)([(0,c.Cb)({readOnly:!0})],V.prototype,"state",null),(0,r._)([(0,c.Cb)({type:f.default,nonNullable:!0})],V.prototype,"structuralAttachmentAssociationsLineSymbol",void 0),(0,r._)([(0,c.Cb)()],V.prototype,"utilityNetwork",null),(0,r._)([(0,c.Cb)()],V.prototype,"view",null);var W=V=(0,r._)([(0,d.j)("esri.widgets.UtilityNetworkAssociations.UtilityNetworkAssociationsViewModel")],V),D=function(t){(0,s.Z)(i,t);var e=(0,a.Z)(i);function i(t){var o;return(0,n.Z)(this,i),(o=e.call(this,t)).maxAllowableAssociationsSlider=!1,o.connectivityAssociationsSettings=null,o.structuralAttachmentAssociationsSettings=null,o}return(0,o.Z)(i)}(_.default);(0,r._)([(0,c.Cb)({type:Boolean,nonNullable:!0})],D.prototype,"maxAllowableAssociationsSlider",void 0),(0,r._)([(0,c.Cb)({type:k,nonNullable:!0})],D.prototype,"connectivityAssociationsSettings",void 0),(0,r._)([(0,c.Cb)({type:k,nonNullable:!0})],D.prototype,"structuralAttachmentAssociationsSettings",void 0);var O=D=(0,r._)([(0,d.j)("esri.widgets.UtilityNetworkAssociations.VisibleElements")],D),B="esri-un-associations",j={action:"".concat(B,"__action"),actionRefresh:"".concat(B,"__action-refresh"),blockContent:"".concat(B,"__block-content"),blockSectionSettings:"".concat(B,"__block-section-settings"),divControlsMain:"".concat(B,"__div-controls-main"),label:"".concat(B,"__label"),labelAndSlider:"".concat(B,"__label-and-slider"),labelAndToggle:"".concat(B,"__label-and-toggle"),slider:"".concat(B,"__slider"),statusIconContainer:"".concat(B,"__status-icon-container"),statusIconWarning:"".concat(B,"__status-icon-warning"),switch:"".concat(B,"__switch"),switchContainer:"".concat(B,"__switch-container"),widgetContainer:"".concat(B,"__widget-container")},z=function(t){(0,s.Z)(r,t);var e=(0,a.Z)(r);function r(t,i){var o;return(0,n.Z)(this,r),(o=e.call(this,t,i))._autoRefreshAssociations=!0,o._associationsOptionsEnabled=!1,o._maxAllowableAssociationsSliderMax=1e3,o._maxAllowableAssociationsSliderMin=250,o._maxAllowableAssociationsSliderStep=250,o.messages=null,o.messagesCommon=null,o.viewModel=new W,o.visibleElements=new O,o}return(0,o.Z)(r,[{key:"initialize",value:function(){var t=this;this.addHandles([(0,l.watch)((function(){var e;return[null===(e=t.view)||void 0===e?void 0:e.stationary,t.showAssociationsEnabled,t.includeConnectivityAssociations,t.includeStructuralAttachmentAssociations,t.maxAllowableAssociations]}),(function(){!0===t.autoRefreshAssociations&&(!0===t.showAssociationsEnabled?t.viewModel.showAssociations():t.viewModel.removeAssociations())}))])}},{key:"autoRefreshAssociations",get:function(){return this._autoRefreshAssociations},set:function(t){this._autoRefreshAssociations=t}},{key:"connectivityAssociationsLineSymbol",get:function(){return this.viewModel.connectivityAssociationsLineSymbol},set:function(t){this.viewModel.connectivityAssociationsLineSymbol=t}},{key:"icon",get:function(){return"view-associations"},set:function(t){this._overrideIfSome("icon",t)}},{key:"includeConnectivityAssociations",get:function(){return this.viewModel.includeConnectivityAssociations},set:function(t){this.viewModel.includeConnectivityAssociations=t}},{key:"includeStructuralAttachmentAssociations",get:function(){return this.viewModel.includeStructuralAttachmentAssociations},set:function(t){this.viewModel.includeStructuralAttachmentAssociations=t}},{key:"label",get:function(){var t,e;return null!==(t=null===(e=this.messages)||void 0===e?void 0:e.widgetLabel)&&void 0!==t?t:""},set:function(t){this._overrideIfSome("label",t)}},{key:"maxAllowableAssociations",get:function(){return this.viewModel.maxAllowableAssociations},set:function(t){this.viewModel.maxAllowableAssociations=t}},{key:"maxAllowableAssociationsSliderMax",get:function(){return this._maxAllowableAssociationsSliderMax},set:function(t){t<=this.maxAllowableAssociationsSliderMin||(this._maxAllowableAssociationsSliderMax=t)}},{key:"maxAllowableAssociationsSliderMin",get:function(){return this._maxAllowableAssociationsSliderMin},set:function(t){t<0||t>=this.maxAllowableAssociationsSliderMax||(this._maxAllowableAssociationsSliderMin=t)}},{key:"maxAllowableAssociationsSliderStep",get:function(){return this._maxAllowableAssociationsSliderStep},set:function(t){this._maxAllowableAssociationsSliderStep=t}},{key:"showArrowsConnectivity",get:function(){return this.viewModel.showArrowsConnectivity},set:function(t){this.viewModel.showArrowsConnectivity=t}},{key:"showArrowsStructuralAttachment",get:function(){return this.viewModel.showArrowsStructuralAttachment},set:function(t){this.viewModel.showArrowsStructuralAttachment=t}},{key:"showAssociationsEnabled",get:function(){return this.viewModel.showAssociationsEnabled},set:function(t){this.viewModel.showAssociationsEnabled=t}},{key:"structuralAttachmentAssociationsLineSymbol",get:function(){return this.viewModel.structuralAttachmentAssociationsLineSymbol},set:function(t){this.viewModel.structuralAttachmentAssociationsLineSymbol=t}},{key:"utilityNetwork",get:function(){return this.viewModel.utilityNetwork},set:function(t){this.viewModel.utilityNetwork=t}},{key:"view",get:function(){return this.viewModel.view},set:function(t){this.viewModel.view=t}},{key:"render",value:function(){var t=this.label;return(0,p.u)("div",{class:j.widgetContainer},(0,p.u)("calcite-block",{class:j.blockContent,collapsible:!0,heading:t},this._renderStatusIcon(),this.autoRefreshAssociations?this._renderShowAssociationsSwitch():this._renderRefreshAssociationsAction(),this._renderContent()))}},{key:"loadDependencies",value:function(){return(0,y.h)({action:function(){return Promise.all([i.e(92358),i.e(46895),i.e(65138),i.e(91741)]).then(i.bind(i,6814))},block:function(){return Promise.all([i.e(92358),i.e(46895),i.e(89219),i.e(63839),i.e(65138),i.e(2654),i.e(23635),i.e(4758)]).then(i.bind(i,4758))},"block-section":function(){return Promise.all([i.e(92358),i.e(46895),i.e(54438),i.e(93090)]).then(i.bind(i,93090))},icon:function(){return Promise.all([i.e(92358),i.e(87474)]).then(i.bind(i,87474))},label:function(){return Promise.all([i.e(92358),i.e(35738)]).then(i.bind(i,35738))},notice:function(){return Promise.all([i.e(92358),i.e(46895),i.e(15669)]).then(i.bind(i,15669))},panel:function(){return Promise.all([i.e(92358),i.e(46895),i.e(89219),i.e(63839),i.e(65138),i.e(2654),i.e(23635),i.e(89524),i.e(85026)]).then(i.bind(i,85026))},slider:function(){return Promise.all([i.e(92358),i.e(46895),i.e(54438),i.e(69008)]).then(i.bind(i,69008))},switch:function(){return Promise.all([i.e(92358),i.e(54438),i.e(40206)]).then(i.bind(i,40206))},tooltip:function(){return Promise.all([i.e(92358),i.e(89219),i.e(94730)]).then(i.bind(i,94730))}})}},{key:"_connectivityAssociationsSwitchChange",value:function(t){this.includeConnectivityAssociations=t.target.checked}},{key:"_getLoadErrorMessagesAsNotices",value:function(t,e){return(0,p.u)("calcite-notice",{closable:!1,key:"error-notice-".concat(e),kind:"warning",open:!0,scale:"s"},(0,p.u)("div",{slot:"message"},t))}},{key:"_maxAllowableAssociationsSliderChange",value:function(t){this.maxAllowableAssociations=Number(t.target.value)}},{key:"_refreshAssociations",value:function(){var t=this.viewModel,e=this.viewModel.state;"ready"!==e&&"warning"!==e||t.showAssociations()}},{key:"_renderConnectivityAssociationsSettings",value:function(){var t=this.messages.input.enableConnectivity,e=this.visibleElements.connectivityAssociationsSettings;if(e)return(0,p.u)("calcite-block-section",{class:j.blockSectionSettings,text:t},(0,p.u)(L,{id:"".concat(this.id,"-symbol-picker-connectivity"),lineSymbol:this.connectivityAssociationsLineSymbol,showArrows:this.showArrowsConnectivity,visibleElements:e}))}},{key:"_renderConnectivityAssociationsToggle",value:function(){var t=this.messages.input.enableConnectivity;return(0,p.u)("div",{class:j.labelAndToggle,key:"connectivityAssociationsToggleDiv"},(0,p.u)("calcite-label",{class:j.label},t),(0,p.u)("calcite-switch",{bind:this,checked:this.includeConnectivityAssociations,disabled:!this._associationsOptionsEnabled&&this.autoRefreshAssociations,onCalciteSwitchChange:this._connectivityAssociationsSwitchChange}))}},{key:"_renderContent",value:function(){var t=this.viewModel,e=t.loadErrors,i=t.state;return"disabled"===i?(0,p.u)("div",{class:j.divControlsMain,key:"loadErrorsDiv"},e.items.map(this._getLoadErrorMessagesAsNotices)):(0,p.u)("calcite-panel",{disabled:"loading"===i},(0,p.u)("div",{class:j.divControlsMain},this._renderConnectivityAssociationsToggle(),this._renderStructuralAttachmentAssociationsToggle(),this._renderSettingsPane()))}},{key:"_renderLoadingAction",value:function(t,e,i){return(0,p.u)("div",{key:t,slot:"control"},(0,p.u)("calcite-action",{id:e,loading:!0,text:i}),(0,p.u)("calcite-tooltip",{referenceElement:e},(0,p.u)("span",null,i)))}},{key:"_renderMaxAllowableAssociationsSlider",value:function(){var t=this.messages.input.maxAllowableAssociations;if(this.visibleElements.maxAllowableAssociationsSlider)return(0,p.u)("div",{class:j.labelAndSlider},(0,p.u)("calcite-label",{class:j.label},t),(0,p.u)("calcite-slider",{bind:this,class:j.slider,labelTicks:!0,max:this.maxAllowableAssociationsSliderMax,min:this.maxAllowableAssociationsSliderMin,scale:"s",snap:!0,step:this.maxAllowableAssociationsSliderStep,ticks:this.maxAllowableAssociationsSliderStep,value:this.maxAllowableAssociations,onCalciteSliderChange:this._maxAllowableAssociationsSliderChange}))}},{key:"_renderRefreshAssociationsAction",value:function(){var t=this.messages.input.refreshAssociations,e=this.messagesCommon.loading,i=this.viewModel.state,n="".concat(this.id,"-refresh-action");if("disabled"!==i)return(0,p.u)("div",{class:j.actionRefresh,slot:"control"},(0,p.u)("calcite-action",{bind:this,class:j.action,icon:"refresh-f",id:n,loading:"loading"===i,onclick:this._refreshAssociations,text:t}),(0,p.u)("calcite-tooltip",{referenceElement:n},(0,p.u)("span",null,"loading"===i?e:t)))}},{key:"_renderSettingsPane",value:function(){var t=this.messagesCommon.settings,e=this.visibleElements,i=e.maxAllowableAssociationsSlider,n=e.connectivityAssociationsSettings,o=e.structuralAttachmentAssociationsSettings;if(i||n||o)return(0,p.u)("calcite-block",{class:j.blockContent,collapsible:!0,heading:t},this._renderMaxAllowableAssociationsSlider(),this._renderConnectivityAssociationsSettings(),this._renderStructuralAttachmentAssociationsSettings())}},{key:"_renderShowAssociationsSwitch",value:function(){var t=this.messages.input.enableAssociations,e=this.messagesCommon.loading,i=this.viewModel.state,n="".concat(this.id,"-show-associations-switch");if("disabled"!==i)return"loading"===i?this._renderLoadingAction("loadingActionDiv","".concat(this.id,"-loading-action"),e):(0,p.u)("div",{class:j.switchContainer,key:"switchDiv",slot:"control"},(0,p.u)("calcite-switch",{bind:this,checked:this.showAssociationsEnabled,class:j.switch,id:n,onCalciteSwitchChange:this._showAssociationsSwitchChange}),(0,p.u)("calcite-tooltip",{referenceElement:n},(0,p.u)("span",null,t)))}},{key:"_renderStatusIcon",value:function(){var t=this.messagesCommon.executing,e=this.viewModel,i=e.executionError;switch(e.state){case"disabled":return this._renderWarningIcon("statusDiv","".concat(this.id,"-disabled-icon"),null);case"warning":return this._renderWarningIcon("statusDiv","".concat(this.id,"-warning-icon"),i);case"executing":return this._renderLoadingAction("executingActionDiv","".concat(this.id,"-executing-action"),t);default:return}}},{key:"_renderStructuralAttachmentAssociationsSettings",value:function(){var t=this.messages.input.enableStructuralAttachment,e=this.visibleElements.structuralAttachmentAssociationsSettings;if(e)return(0,p.u)("calcite-block-section",{class:j.blockSectionSettings,text:t},(0,p.u)(L,{id:"".concat(this.id,"-symbol-picker-structural-attachment"),lineSymbol:this.structuralAttachmentAssociationsLineSymbol,showArrows:this.showArrowsStructuralAttachment,visibleElements:e}))}},{key:"_renderStructuralAttachmentAssociationsToggle",value:function(){var t=this.messages.input.enableStructuralAttachment;return(0,p.u)("div",{class:j.labelAndToggle,key:"structuralAttachmentAssociationsToggleDiv"},(0,p.u)("calcite-label",{class:j.label},t),(0,p.u)("calcite-switch",{bind:this,checked:this.includeStructuralAttachmentAssociations,disabled:!this._associationsOptionsEnabled&&this.autoRefreshAssociations,onCalciteSwitchChange:this._structuralAttAssociationsSwitchChange}))}},{key:"_showAssociationsSwitchChange",value:function(t){var e=this.viewModel;this.showAssociationsEnabled=t.target.checked,this._associationsOptionsEnabled=t.target.checked,this.showAssociationsEnabled||e.removeAssociations()}},{key:"_structuralAttAssociationsSwitchChange",value:function(t){this.includeStructuralAttachmentAssociations=t.target.checked}},{key:"_renderWarningIcon",value:function(t,e,i){return i?(0,p.u)("div",{class:j.statusIconContainer,key:t,slot:"control"},(0,p.u)("calcite-icon",{class:j.statusIconWarning,icon:"exclamation-mark-triangle",id:e,scale:"s"}),(0,p.u)("calcite-tooltip",{referenceElement:e},(0,p.u)("span",null,i))):(0,p.u)("div",{class:j.statusIconContainer,key:t,slot:"control"},(0,p.u)("calcite-icon",{class:j.statusIconWarning,icon:"exclamation-mark-triangle",id:e,scale:"s"}))}}]),r}(h.Z);(0,r._)([(0,c.Cb)()],z.prototype,"autoRefreshAssociations",null),(0,r._)([(0,c.Cb)()],z.prototype,"connectivityAssociationsLineSymbol",null),(0,r._)([(0,c.Cb)()],z.prototype,"icon",null),(0,r._)([(0,c.Cb)()],z.prototype,"includeConnectivityAssociations",null),(0,r._)([(0,c.Cb)()],z.prototype,"includeStructuralAttachmentAssociations",null),(0,r._)([(0,c.Cb)()],z.prototype,"label",null),(0,r._)([(0,c.Cb)()],z.prototype,"maxAllowableAssociations",null),(0,r._)([(0,c.Cb)()],z.prototype,"maxAllowableAssociationsSliderMax",null),(0,r._)([(0,c.Cb)()],z.prototype,"maxAllowableAssociationsSliderMin",null),(0,r._)([(0,c.Cb)()],z.prototype,"maxAllowableAssociationsSliderStep",null),(0,r._)([(0,c.Cb)(),(0,v.H)("esri/widgets/UtilityNetworkAssociations/t9n/UtilityNetworkAssociations")],z.prototype,"messages",void 0),(0,r._)([(0,c.Cb)(),(0,v.H)("esri/t9n/common")],z.prototype,"messagesCommon",void 0),(0,r._)([(0,c.Cb)()],z.prototype,"showArrowsConnectivity",null),(0,r._)([(0,c.Cb)()],z.prototype,"showArrowsStructuralAttachment",null),(0,r._)([(0,c.Cb)()],z.prototype,"showAssociationsEnabled",null),(0,r._)([(0,c.Cb)()],z.prototype,"structuralAttachmentAssociationsLineSymbol",null),(0,r._)([(0,c.Cb)()],z.prototype,"utilityNetwork",null),(0,r._)([(0,c.Cb)()],z.prototype,"view",null),(0,r._)([(0,c.Cb)({type:W})],z.prototype,"viewModel",void 0),(0,r._)([(0,c.Cb)({type:O,nonNullable:!0})],z.prototype,"visibleElements",void 0);var F=z=(0,r._)([(0,d.j)("esri.widgets.UtilityNetworkAssociations")],z)}}]);
//# sourceMappingURL=65772.dfea94f1.chunk.js.map