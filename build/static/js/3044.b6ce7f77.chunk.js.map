{"version":3,"file":"static/js/3044.b6ce7f77.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/widgets/OrientedImageryViewer/adapters/OrientedImageryViewerViewModelAdapter2D.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport\"../../../geometry.js\";import e from\"../../../Graphic.js\";import{isSome as t}from\"../../../core/arrayUtils.js\";import i from\"../../../core/Logger.js\";import{waitTick as o,throwIfAborted as r,isAbortError as s}from\"../../../core/promiseUtils.js\";import{transformPoints as a}from\"../../../layers/orientedImagery/transformations/imageToGroundUtils.js\";import{convertOrientationToPixelLocation as n}from\"../../../layers/orientedImagery/transformations/utils.js\";import{activePolygonSymbol as l,polygonSymbol as m}from\"../symbols.js\";import c from\"../../../geometry/Polygon.js\";class p{constructor(p){this.viewModel=p,this.createFootprints=async t=>{await o(t);const{coveragePolygons:i,currentBestFeature:r,isAdditionalCoverageVisible:s}=this.viewModel;for(const o of i)o?.imageID===r.attributes.objectId?this.viewModel.bestFeatureFootprint=new e({attributes:{imageID:o?.imageID},geometry:o,symbol:l,visible:!1}):this.viewModel.additionalFootprints.push(new e({attributes:{imageID:o?.imageID},geometry:o,symbol:m.clone(),visible:s}))},this.updateFootprint=async(o,n)=>{const{activeViewer:m,currentBestFeature:p,currentCoverageVisible:g,footprintExtent:u}=this.viewModel,f=m?.imageSize;if(p&&f&&u)try{const i=await a(o,{feature:p,imageProperties:{width:f[0],height:f[1]},options:n,footprintExtent:u});r(n);const s=i.filter(t);if(!s.length)return;const m=[s.map((({x:e,y:t})=>[e,t,1]))];m[0].push(m[0][0]);const d=new c({rings:m,spatialReference:s[0].spatialReference});this.viewModel.updateCurrentCoveragePolygon(new e({geometry:d,attributes:{imageID:p.attributes.objectId},symbol:l,visible:g}))}catch(d){s(d)||i.getLogger(this.viewModel).error(\"update-footprint\",d)}},this.updateFootprintPanorama=async(t,i)=>{const{horizontalFieldOfView:o,pitch:s,verticalFieldOfView:m,yaw:p}=t,{activeViewer:g,currentBestFeature:u,currentCoverageVisible:f,footprintExtent:d}=this.viewModel,h=g?.imageSize;if(!u||!h||!d)return;const{cameraPitch:y,objectId:w}=u.attributes;if(s+y-m/2>180)return void this.viewModel.updateCurrentCoveragePolygon(null);let v=[];if(s+y+m/2<180){v=[[-o/2,m/2],[o/2,m/2],...s-m/2<0?[[-o/2,-m/2],[o/2,-m/2]]:[[o/2,-m/2],[-o/2,-m/2]]]}else if(s+y-m/2<180&&s+y+m/2>180){v=[[-o/2,-m/2]];const e=Math.floor(o/6),t=o/e;for(let i=0;i<=e;i++)v.push([i*t-o/2,90-s]);v.push([o/2,-m/2])}const b=v.map((([e,t])=>n(p+e,s+t,h[0],h[1]))),j=await a(b,{feature:u,imageProperties:{width:h[0],height:h[1]},options:i,footprintExtent:d});r(i);const I=[j.map((({x:e,y:t})=>[e,t,1]))];I[0].push(I[0][0]);const F=new c({rings:I,spatialReference:j[0].spatialReference});this.viewModel.updateCurrentCoveragePolygon(new e({geometry:F,attributes:{imageID:w},symbol:l.clone(),visible:f}))}}}export{p as default};\n"],"names":["p","_createClass","_this","_classCallCheck","this","viewModel","createFootprints","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","t","_this$viewModel","i","r","s","_iterator","_step","_o","wrap","_context","prev","next","o","coveragePolygons","currentBestFeature","isAdditionalCoverageVisible","_createForOfIteratorHelper","n","done","value","imageID","attributes","objectId","bestFeatureFootprint","e","geometry","symbol","l","visible","additionalFootprints","push","m","err","f","stop","_x","apply","arguments","updateFootprint","_ref2","_callee2","_this$viewModel2","_p2","g","u","_i","_s","_m","d","_context2","activeViewer","currentCoverageVisible","footprintExtent","imageSize","a","feature","imageProperties","width","height","options","sent","filter","length","abrupt","map","_ref3","x","y","c","rings","spatialReference","updateCurrentCoveragePolygon","t0","error","_x2","_x3","updateFootprintPanorama","_ref4","_callee3","_p3","_this$viewModel3","h","_u$attributes","w","v","_e","_t","_i2","b","j","I","F","_context3","horizontalFieldOfView","pitch","verticalFieldOfView","yaw","cameraPitch","concat","_toConsumableArray","Math","floor","_ref5","_ref6","_slicedToArray","_ref7","_x4","_x5"],"sourceRoot":""}